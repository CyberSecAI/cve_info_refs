=== Content from bugs.launchpad.net_f74b5ba1_20250125_023412.html ===

[Log in / Register](https://bugs.launchpad.net/mahara/%2Bbug/1720034/%2Blogin)

[![](https://launchpadlibrarian.net/302557383/mahara_64x64.png)](https://launchpad.net/mahara)

## [Mahara](https://launchpad.net/mahara)

* [Overview](https://launchpad.net/mahara)
* [Code](https://code.launchpad.net/mahara)
* [Bugs](https://bugs.launchpad.net/mahara)
* [Blueprints](https://blueprints.launchpad.net/mahara)
* [Translations](https://translations.launchpad.net/mahara)
* [Answers](https://answers.launchpad.net/mahara)

# journal titles not being escaped

Bug #1720034 reported by
[Cecilia Vela Gurovic](https://launchpad.net/~ceciliavg)
on 2017-09-28

[256](/%2Bhelp-bugs/bug-heat.html)

This bug affects 1 person

| Affects | | Status | Importance | Assigned to | Milestone |
| --- | --- | --- | --- | --- | --- |
|  | [Mahara](https://bugs.launchpad.net/mahara) | Fix Released | High | [Robert Lyon](https://launchpad.net/~robertl-9) | [Mahara 17.10.0](https://launchpad.net/mahara/%2Bmilestone/17.10.0) |
|  | [15.04](https://bugs.launchpad.net/mahara/15.04) | Fix Released | High | Unassigned | [Mahara 15.04.15](https://launchpad.net/mahara/%2Bmilestone/15.04.15) |
|  | [16.04](https://bugs.launchpad.net/mahara/16.04) | Fix Released | High | Unassigned | [Mahara 16.04.9](https://launchpad.net/mahara/%2Bmilestone/16.04.9) |
|  | [16.10](https://bugs.launchpad.net/mahara/16.10) | Fix Released | High | Unassigned | [Mahara 16.10.6](https://launchpad.net/mahara/%2Bmilestone/16.10.6) |
|  | [17.04](https://bugs.launchpad.net/mahara/17.04) | Fix Released | High | Unassigned | [Mahara 17.04.4](https://launchpad.net/mahara/%2Bmilestone/17.04.4) |
|  | [17.10](https://bugs.launchpad.net/mahara/17.10) | Fix Released | High | [Robert Lyon](https://launchpad.net/~robertl-9) | [Mahara 17.10.0](https://launchpad.net/mahara/%2Bmilestone/17.10.0) |

### Bug Description

Steps to test:

- create a journal

- set title to:

 <script>alert(1)</script>

- save

alert is displayed

- add an entry to the journal

- set title to:

 <script>alert(1)</script>

alert is displayed

[Robert Lyon (robertl-9)](https://launchpad.net/~robertl-9)
on 2017-09-28

| Changed in mahara: | |
| --- | --- |
| **milestone**: | none → 17.10.0 |
| **status**: | Confirmed → In Progress |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Robert Lyon (robertl-9)](https://launchpad.net/~robertl-9) wrote on 2017-10-29: |  |  | [#1](/mahara/%2Bbug/1720034/comments/1) |
| --- | --- | --- | --- |

<https://reviews.mahara.org/#/c/8059/>

https://reviews.mahara.org/#/c/8059/

[Kristina Hoeppner (kris-hoeppner)](https://launchpad.net/~kris-hoeppner)
on 2017-10-30

| **information type**: | Private Security → Public Security |
| --- | --- |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Mahara Bot (dev-mahara)](https://launchpad.net/~dev-mahara) wrote on 2017-10-30:  [**A change has been merged**](/mahara/%2Bbug/1720034/comments/2) |  |  | [#2](/mahara/%2Bbug/1720034/comments/2) |
| --- | --- | --- | --- |

Reviewed: <https://reviews.mahara.org/8224>

Committed: <https://git.mahara.org/mahara/mahara/commit/77cc040b93c031d9e54edad5616d29e14de6664f>

Submitter: Robert Lyon (<email address hidden>)

Branch: 15.04\_STABLE

commit 77cc040b93c031d9e54edad5616d29e14de6664f

Author: Robert Lyon <email address hidden>

Date: Thu Sep 28 14:07:40 2017 +1300

[Bug 1720034](/bugs/1720034): Journal/Journal post title not being escaped in delete button

behatnotneeded

Change-Id: I6f0c82a74e0d60614230aac1d4fc3884eae387a5

Signed-off-by: Robert Lyon <email address hidden>

(cherry picked from commit c367be4d30e4b0dd45cd76373b19c7393f7809ee)

(cherry picked from commit 465b7df21db3c4cb2780475d46ec77bcebda8831)

Reviewed: https://reviews.mahara.org/8224
Committed: https://git.mahara.org/mahara/mahara/commit/77cc040b93c031d9e54edad5616d29e14de6664f
Submitter: Robert Lyon (robertl@catalyst.net.nz)
Branch: 15.04\_STABLE
commit 77cc040b93c031d9e54edad5616d29e14de6664f
Author: Robert Lyon <robertl@catalyst.net.nz>
Date: Thu Sep 28 14:07:40 2017 +1300
Bug 1720034: Journal/Journal post title not being escaped in delete button
behatnotneeded
Change-Id: I6f0c82a74e0d60614230aac1d4fc3884eae387a5
Signed-off-by: Robert Lyon <robertl@catalyst.net.nz>
(cherry picked from commit c367be4d30e4b0dd45cd76373b19c7393f7809ee)
(cherry picked from commit 465b7df21db3c4cb2780475d46ec77bcebda8831)

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Mahara Bot (dev-mahara)](https://launchpad.net/~dev-mahara) wrote on 2017-10-30: |  |  | [#3](/mahara/%2Bbug/1720034/comments/3) |
| --- | --- | --- | --- |

Reviewed: <https://reviews.mahara.org/8223>

Committed: <https://git.mahara.org/mahara/mahara/commit/3d9d5a43f5e5665207e41171b06d2f9129c0183f>

Submitter: Robert Lyon (<email address hidden>)

Branch: 16.04\_STABLE

commit 3d9d5a43f5e5665207e41171b06d2f9129c0183f

Author: Robert Lyon <email address hidden>

Date: Thu Sep 28 14:07:40 2017 +1300

[Bug 1720034](/bugs/1720034): Journal/Journal post title not being escaped in delete button

behatnotneeded

Change-Id: I6f0c82a74e0d60614230aac1d4fc3884eae387a5

Signed-off-by: Robert Lyon <email address hidden>

(cherry picked from commit c367be4d30e4b0dd45cd76373b19c7393f7809ee)

(cherry picked from commit 465b7df21db3c4cb2780475d46ec77bcebda8831)

Reviewed: https://reviews.mahara.org/8223
Committed: https://git.mahara.org/mahara/mahara/commit/3d9d5a43f5e5665207e41171b06d2f9129c0183f
Submitter: Robert Lyon (robertl@catalyst.net.nz)
Branch: 16.04\_STABLE
commit 3d9d5a43f5e5665207e41171b06d2f9129c0183f
Author: Robert Lyon <robertl@catalyst.net.nz>
Date: Thu Sep 28 14:07:40 2017 +1300
Bug 1720034: Journal/Journal post title not being escaped in delete button
behatnotneeded
Change-Id: I6f0c82a74e0d60614230aac1d4fc3884eae387a5
Signed-off-by: Robert Lyon <robertl@catalyst.net.nz>
(cherry picked from commit c367be4d30e4b0dd45cd76373b19c7393f7809ee)
(cherry picked from commit 465b7df21db3c4cb2780475d46ec77bcebda8831)

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Mahara Bot (dev-mahara)](https://launchpad.net/~dev-mahara) wrote on 2017-10-30: |  |  | [#4](/mahara/%2Bbug/1720034/comments/4) |
| --- | --- | --- | --- |

Reviewed: <https://reviews.mahara.org/8222>

Committed: <https://git.mahara.org/mahara/mahara/commit/35f72449a09c0db4300dd6d1ff801609dfea86b1>

Submitter: Robert Lyon (<email address hidden>)

Branch: 16.10\_STABLE

commit 35f72449a09c0db4300dd6d1ff801609dfea86b1

Author: Robert Lyon <email address hidden>

Date: Thu Sep 28 14:07:40 2017 +1300

[Bug 1720034](/bugs/1720034): Journal/Journal post title not being escaped in delete button

behatnotneeded

Change-Id: I6f0c82a74e0d60614230aac1d4fc3884eae387a5

Signed-off-by: Robert Lyon <email address hidden>

(cherry picked from commit c367be4d30e4b0dd45cd76373b19c7393f7809ee)

(cherry picked from commit 465b7df21db3c4cb2780475d46ec77bcebda8831)

Reviewed: https://reviews.mahara.org/8222
Committed: https://git.mahara.org/mahara/mahara/commit/35f72449a09c0db4300dd6d1ff801609dfea86b1
Submitter: Robert Lyon (robertl@catalyst.net.nz)
Branch: 16.10\_STABLE
commit 35f72449a09c0db4300dd6d1ff801609dfea86b1
Author: Robert Lyon <robertl@catalyst.net.nz>
Date: Thu Sep 28 14:07:40 2017 +1300
Bug 1720034: Journal/Journal post title not being escaped in delete button
behatnotneeded
Change-Id: I6f0c82a74e0d60614230aac1d4fc3884eae387a5
Signed-off-by: Robert Lyon <robertl@catalyst.net.nz>
(cherry picked from commit c367be4d30e4b0dd45cd76373b19c7393f7809ee)
(cherry picked from commit 465b7df21db3c4cb2780475d46ec77bcebda8831)

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Mahara Bot (dev-mahara)](https://launchpad.net/~dev-mahara) wrote on 2017-10-30: |  |  | [#5](/mahara/%2Bbug/1720034/comments/5) |
| --- | --- | --- | --- |

Reviewed: <https://reviews.mahara.org/8221>

Committed: <https://git.mahara.org/mahara/mahara/commit/039bbd9b5c350e1a9f2b895aeefb661dace62021>

Submitter: Robert Lyon (<email address hidden>)

Branch: 17.04\_STABLE

commit 039bbd9b5c350e1a9f2b895aeefb661dace62021

Author: Robert Lyon <email address hidden>

Date: Thu Sep 28 14:07:40 2017 +1300

[Bug 1720034](/bugs/1720034): Journal/Journal post title not being escaped in delete button

behatnotneeded

Change-Id: I6f0c82a74e0d60614230aac1d4fc3884eae387a5

Signed-off-by: Robert Lyon <email address hidden>

(cherry picked from commit c367be4d30e4b0dd45cd76373b19c7393f7809ee)

(cherry picked from commit 465b7df21db3c4cb2780475d46ec77bcebda8831)

Reviewed: https://reviews.mahara.org/8221
Committed: https://git.mahara.org/mahara/mahara/commit/039bbd9b5c350e1a9f2b895aeefb661dace62021
Submitter: Robert Lyon (robertl@catalyst.net.nz)
Branch: 17.04\_STABLE
commit 039bbd9b5c350e1a9f2b895aeefb661dace62021
Author: Robert Lyon <robertl@catalyst.net.nz>
Date: Thu Sep 28 14:07:40 2017 +1300
Bug 1720034: Journal/Journal post title not being escaped in delete button
behatnotneeded
Change-Id: I6f0c82a74e0d60614230aac1d4fc3884eae387a5
Signed-off-by: Robert Lyon <robertl@catalyst.net.nz>
(cherry picked from commit c367be4d30e4b0dd45cd76373b19c7393f7809ee)
(cherry picked from commit 465b7df21db3c4cb2780475d46ec77bcebda8831)

[See full activity log](https://bugs.launchpad.net/mahara/%2Bbug/1720034/%2Bactivity)

To post a comment you must [log in](%2Blogin?comments=all).

* [Report a bug](/mahara/%2Bfilebug)

This report contains
**Public Security**
information

Everyone can see this security related information.

You are
[not directly subscribed to this bug's notifications.](/mahara/%2Bbug/1720034/%2Bsubscribe)

Subscribing...

* [Edit bug mail](https://bugs.launchpad.net/mahara/%2Bbug/1720034/%2Bsubscriptions "View and change your subscriptions to this bug")

## Other bug subscribers

[Subscribe someone else](https://bugs.launchpad.net/mahara/%2Bbug/1720034/%2Baddsubscriber "Launchpad will email that person whenever this bugs changes")

## Remote bug watches

Bug watches keep track of this bug in other bug trackers.

[![Launchpad](/@@/launchpad-footer-logo.svg)](https://launchpad.net/)
 •
[Take the tour](https://launchpad.net/%2Btour)
 •
[Read the guide](https://help.launchpad.net/)

© 2004
[Canonical Ltd.](http://canonical.com/)
 •
[Terms of use](https://launchpad.net/legal)
 •
[Data privacy](https://www.ubuntu.com/legal/dataprivacy)
 •
[Contact Launchpad Support](/feedback)
 •
[Blog](http://blog.launchpad.net/)
 •
[Careers](https://canonical.com/careers)
 •
[System status](https://ubuntu.social/%40launchpadstatus)
 •
4d55102
([Get the code!](https://dev.launchpad.net/))



=== Content from mahara.org_330deee1_20250125_023414.html ===

[Skip to main content](#header-main)

* [Login](https://mahara.org/?login)

Show search

SearchGo

[![Mahara ePortfolio System](https://mahara.org/theme/mahara-org/images/site-logo.svg?v=4171)](https://mahara.org/)
[![Mahara ePortfolio System](https://mahara.org/theme/raw/images/site-logo-small.svg?v=4171)](https://mahara.org/)
Show main menu

* [Home](https://mahara.org/)
* [Subscription](https://mahara.org/subscription)
* [Demo](https://mahara.org/demo)
* About

  + [About Mahara](https://mahara.org/about)
  + [About open source](https://mahara.org/about/opensource)
  + [Features](https://mahara.org/features)
  + [What is an ePortfolio?](https://mahara.org/about/eportfolios)
  + [Who is using Mahara?](https://mahara.org/showcase)
  + [News and announcements](https://mahara.org/news)
  + [Newsletter](https://mahara.org/newsletter)
  + [Podcast 'Create. Share. Engage.'](https://podcast.mahara.org)
* Community

  + [Community](https://mahara.org/community)
  + [Forums](https://mahara.org/forums)
  + [Mahara manual](https://mahara.org/documentation)
  + [Wiki](https://mahara.org/wiki)
  + [Bug / feature tracker](https://mahara.org/tracker)
  + [Release notes](https://mahara.org/releasenotes)
  + [Security](https://mahara.org/security)
  + [Contributors](https://mahara.org/community/contributors)
  + [Branding](https://mahara.org/branding)
  + [Events](https://mahara.org/events)
* Partners

  + [Partners](https://mahara.org/partners)
  + [Business Partners](https://mahara.org/business-partners)
  + [Supporters](https://mahara.org/supporters)

# Portfolios for your learning community

SearchGo

[Try out Mahara](http://demo.mahara.org/)

![Continuous single line drawing of a puhutukawa tree with a tui on the branches](https://mahara.org/theme/mahara-org/images/dashboard-tree-desktop-full.svg)

![Continuous single line drawing of a person working on a laptop](https://mahara.org/theme/mahara-org/images/dashboard-person-desktop.svg)

## Create portfolios

Using Mahara, students and staff create their personal learning stories by uploading evidence of activities they have participated in, and embedding publicly accessible content they have previously put online. They can write reflections on their experiences that frame this evidence, map it to competencies or registration requirements, and provide necessary context.

Mahara can be used for many different portfolio purposes, such as study, professional development, work-integrated learning, assessment, showcase and presentation, and employability.

[Learn about the portfolio options](https://mahara.org/view/view.php?id=137010)

## Share work

Mahara allows portfolios to be shared flexibly with one person, a specific group of people, or the entire world. Access can be further restricted to a particular time frame or just within an assessment task.

[Find out about sharing portfolios](https://mahara.org/view/view.php?id=137011)

![Continuous single line drawing of a paper plane in flight](https://mahara.org/theme/mahara-org/images/dashboard-paperplane-desktop.svg)

![Continuous single line drawing of a group of people sitting around a laptop in discussion](https://mahara.org/theme/mahara-org/images/dashboard-group-desktop.svg)

## Engage with others

Mahara makes it easy to comment and give feedback. Portfolios can also be submitted to learning management systems via LTI (Learning Tools Interoperability) for marking.

Groups in Mahara allow people to create portfolios collaboratively and engage in forum discussions.

[Learn about collaborating in Mahara](https://mahara.org/view/view.php?id=137012)

## Listen to portfolio stories

In our podcast 'Create. Share. Engage.' portfolio practitioners, researchers, learning designers, and portfolio authors share their journey. Learn how they navigate the many different facets of portfolios in general, and Mahara specifically.

[Listen on the podcast website or in your favourite app](https://podcast.mahara.org/)

![Continuous single line drawing of a speech bubble with the words 'Create. Share. Engage. Portfolios for learning and more'](https://mahara.org/theme/mahara-org/images/dashboard-podcast-desktop.svg)

![Continuous single line drawing of a speech bubble with the words 'Create. Share. Engage. Portfolios for learning and more'](https://mahara.org/theme/mahara-org/images/dashboard-podcast-logo.svg)

Mahara Community

* [About
  (tab)](https://mahara.org/group/mahara-community)
* [Members
  (tab)](https://mahara.org/group/members.php?id=1)
* [Forums
  (tab selected)](https://mahara.org/interaction/forum/index.php?group=1)
* [Portfolios
  (tab)](https://mahara.org/view/groupviews.php?group=1)

# Forums | Mahara Community

## [Security Announcements](https://mahara.org/interaction/forum/view.php?id=43) / Security issue relating to cross-site scripting <15.04.15; <16.04.9; <16.10.6; <17.04.4

---

This topic is closed. Only moderators and the group administrators can post new replies.

![Robert Lyon's profile picture](https://mahara.org/thumb.php?type=profileiconbyid&maxwidth=40&maxheight=40&id=313288)
[Robert Lyon](https://mahara.org/user/robertlyon-1)

Posts: 778

30 October 2017, 14:27

User's displayed title is not escaped for internal artefacts

Vuln type: CSS
Impact: Code execution

Suggested description:

Mahara 15.04 before 15.04.15 and 16.04 before 16.04.9 and 16.10 before 16.10.6 and 17.04 before 17.04.4 are vulnerable to a user submitting a potential dangerous payload, e.g., XSS code, to be saved as titles in internal artefacts.

Reported by: chbi
Bug reports:
[https://bugs.launchpad.net/mahara/+bug/1720034](https://bugs.launchpad.net/mahara/%2Bbug/1720034)
[https://bugs.launchpad.net/mahara/+bug/1719472](https://bugs.launchpad.net/mahara/%2Bbug/1719472)
[https://bugs.launchpad.net/mahara/+bug/1719480](https://bugs.launchpad.net/mahara/%2Bbug/1719480)

CVE: CVE-2017-15273

1 result

## Subscribe to our monthly newsletter

Do you want to stay updated on the latest news from Mahara and wider portfolio community? Subscribe to the monthly Mahara newsletter from Catalyst, the maintainers of Mahara.

[Sign up for the newsletter](https://zcu.nz/wpPM)

Create. Share. Engage.
[Try out Mahara](http://demo.mahara.org/)
[Support Mahara](https://mahara.org/subscription)

#### [Support](https://mahara.org/community)

* [Community forums](https://mahara.org/forums)
* [Mahara manual](https://mahara.org/documentation)
* [Wiki](https://mahara.org/wiki)
* [Bug / feature tracker](https://mahara.org/tracker)
* [Extended security support](https://mahara.org/extended-security-support)

#### [Get involved](https://mahara.org/community)

* [Community forums](https://mahara.org/forums)
* [Code repository](https://mahara.org/repository)
* [Contribute](https://mahara.org/contribute)
* [Release notes](https://mahara.org/releasenotes)
* [Events](https://mahara.org/events)

#### [About](https://mahara.org/about)

* [News and announcements](https://mahara.org/news)
* [Podcast 'Create. Share. Engage.'](https://podcast.mahara.org)
* [Contributors](https://mahara.org/community/contributors)
* [Security](https://mahara.org/security)
* [Accessibility](https://mahara.org/accessibility)

#### [Home](https://mahara.org/)

#### [Partners](https://mahara.org/partners)

#### [Subscription](https://mahara.org/subscription)

#### [Demo site](https://mahara.org/demo)

[![Powered by Mahara](https://mahara.org/theme/mahara-org/images/powered_by_mahara.svg?v=4171)](https://mahara.org/)

* [Legal](https://mahara.org/legal.php)
* [Contact us](https://mahara.org/contact.php)
* [Help](https://manual.mahara.org/en/24.04/)

[![Developed and maintained by Catalyst](https://mahara.org/theme/mahara-org/images/maintained-by-catalyst.png)](https://catalyst.net.nz/)

[Follow us on LinkedIn](https://www.linkedin.com/company/1845966)

[Find us on Mastodon](https://mastodon.nzoss.nz/%40mahara)



=== Content from bugs.launchpad.net_8bb0d384_20250126_053149.html ===

[Log in / Register](https://bugs.launchpad.net/mahara/%2Bbug/1719472/%2Blogin)

[![](https://launchpadlibrarian.net/302557383/mahara_64x64.png)](https://launchpad.net/mahara)

## [Mahara](https://launchpad.net/mahara)

* [Overview](https://launchpad.net/mahara)
* [Code](https://code.launchpad.net/mahara)
* [Bugs](https://bugs.launchpad.net/mahara)
* [Blueprints](https://blueprints.launchpad.net/mahara)
* [Translations](https://translations.launchpad.net/mahara)
* [Answers](https://answers.launchpad.net/mahara)

# User autocomplete selector in Mail composer not escaping the name

Bug #1719472 reported by
[Robert Lyon](https://launchpad.net/~robertl-9)
on 2017-09-25

[256](/%2Bhelp-bugs/bug-heat.html)

This bug affects 1 person

| Affects | | Status | Importance | Assigned to | Milestone |
| --- | --- | --- | --- | --- | --- |
|  | [Mahara](https://bugs.launchpad.net/mahara) | Fix Released | High | [Robert Lyon](https://launchpad.net/~robertl-9) | [Mahara 17.10.0](https://launchpad.net/mahara/%2Bmilestone/17.10.0) |
|  | [16.04](https://bugs.launchpad.net/mahara/16.04) | Fix Released | High | Unassigned | [Mahara 16.04.9](https://launchpad.net/mahara/%2Bmilestone/16.04.9) |
|  | [16.10](https://bugs.launchpad.net/mahara/16.10) | Fix Released | High | Unassigned | [Mahara 16.10.6](https://launchpad.net/mahara/%2Bmilestone/16.10.6) |
|  | [17.04](https://bugs.launchpad.net/mahara/17.04) | Fix Released | High | Unassigned | [Mahara 17.04.4](https://launchpad.net/mahara/%2Bmilestone/17.04.4) |
|  | [17.10](https://bugs.launchpad.net/mahara/17.10) | Fix Released | High | [Robert Lyon](https://launchpad.net/~robertl-9) | [Mahara 17.10.0](https://launchpad.net/mahara/%2Bmilestone/17.10.0) |

### Bug Description

This means that a user can set a bad name and compromise another user

To reproduce:

\*) Login as "user1"

\*) Click on "Main menu" - "Content" - "Profile" - "About me"

\*) Insert at "First name" or "Last name" or "Display name":

<script>alert(1)</script>

\*) Save with "Save profile"

\*) Click on "User menu" - "0 unread" - "Compose"

\*) Send a message to another user, for example:

Recipients: user2

Subject: Hello

Message: Please reply

\*) Send the message with "Send message"

\*) Logout as "user1"

\*) Login as "user2"

\*) Open the received message in the dashboard ("Inbox")

\*) Click on "Reply"

\*) The alert dialog appears

To fix:

Normally when we show a user's name to screen we filter it via hsc()

But in this case the name is being fetched by the autocomplete pieform element via the translate\_ids\_to\_names() function without being escaped.

So we need to escape it before returning the name

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Robert Lyon (robertl-9)](https://launchpad.net/~robertl-9) wrote on 2017-09-25: |  |  | [#1](/mahara/%2Bbug/1719472/comments/1) |
| --- | --- | --- | --- |

Patch for this

<https://reviews.mahara.org/#/c/8054/>

Patch for this
https://reviews.mahara.org/#/c/8054/

[Kristina Hoeppner (kris-hoeppner)](https://launchpad.net/~kris-hoeppner)
on 2017-10-30

| **information type**: | Private Security → Public Security |
| --- | --- |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Mahara Bot (dev-mahara)](https://launchpad.net/~dev-mahara) wrote on 2017-10-30:  [**A change has been merged**](/mahara/%2Bbug/1719472/comments/2) |  |  | [#2](/mahara/%2Bbug/1719472/comments/2) |
| --- | --- | --- | --- |

Reviewed: <https://reviews.mahara.org/8208>

Committed: <https://git.mahara.org/mahara/mahara/commit/13fa6facb342b7a58df517f7d59ba396c1863b94>

Submitter: Robert Lyon (<email address hidden>)

Branch: 16.04\_STABLE

commit 13fa6facb342b7a58df517f7d59ba396c1863b94

Author: Robert Lyon <email address hidden>

Date: Tue Sep 26 11:27:34 2017 +1300

[Bug 1719472](/bugs/1719472): Escape user's display\_name() when supplying to autocomplete

behatnotneeded

Change-Id: I4b342a0d3f00015e8f2e0ff7d93d2b5198fbc32d

Signed-off-by: Robert Lyon <email address hidden>

(cherry picked from commit 86711cb835dcd87208170df32e3405cd0467e1cf)

Reviewed: https://reviews.mahara.org/8208
Committed: https://git.mahara.org/mahara/mahara/commit/13fa6facb342b7a58df517f7d59ba396c1863b94
Submitter: Robert Lyon (robertl@catalyst.net.nz)
Branch: 16.04\_STABLE
commit 13fa6facb342b7a58df517f7d59ba396c1863b94
Author: Robert Lyon <robertl@catalyst.net.nz>
Date: Tue Sep 26 11:27:34 2017 +1300
Bug 1719472: Escape user's display\_name() when supplying to autocomplete
behatnotneeded
Change-Id: I4b342a0d3f00015e8f2e0ff7d93d2b5198fbc32d
Signed-off-by: Robert Lyon <robertl@catalyst.net.nz>
(cherry picked from commit 86711cb835dcd87208170df32e3405cd0467e1cf)

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Mahara Bot (dev-mahara)](https://launchpad.net/~dev-mahara) wrote on 2017-10-30: |  |  | [#3](/mahara/%2Bbug/1719472/comments/3) |
| --- | --- | --- | --- |

Reviewed: <https://reviews.mahara.org/8207>

Committed: <https://git.mahara.org/mahara/mahara/commit/fa531905b49096f071351e4381e42660f48944d5>

Submitter: Robert Lyon (<email address hidden>)

Branch: 16.10\_STABLE

commit fa531905b49096f071351e4381e42660f48944d5

Author: Robert Lyon <email address hidden>

Date: Tue Sep 26 11:27:34 2017 +1300

[Bug 1719472](/bugs/1719472): Escape user's display\_name() when supplying to autocomplete

behatnotneeded

Change-Id: I4b342a0d3f00015e8f2e0ff7d93d2b5198fbc32d

Signed-off-by: Robert Lyon <email address hidden>

(cherry picked from commit 86711cb835dcd87208170df32e3405cd0467e1cf)

Reviewed: https://reviews.mahara.org/8207
Committed: https://git.mahara.org/mahara/mahara/commit/fa531905b49096f071351e4381e42660f48944d5
Submitter: Robert Lyon (robertl@catalyst.net.nz)
Branch: 16.10\_STABLE
commit fa531905b49096f071351e4381e42660f48944d5
Author: Robert Lyon <robertl@catalyst.net.nz>
Date: Tue Sep 26 11:27:34 2017 +1300
Bug 1719472: Escape user's display\_name() when supplying to autocomplete
behatnotneeded
Change-Id: I4b342a0d3f00015e8f2e0ff7d93d2b5198fbc32d
Signed-off-by: Robert Lyon <robertl@catalyst.net.nz>
(cherry picked from commit 86711cb835dcd87208170df32e3405cd0467e1cf)

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Mahara Bot (dev-mahara)](https://launchpad.net/~dev-mahara) wrote on 2017-10-30: |  |  | [#4](/mahara/%2Bbug/1719472/comments/4) |
| --- | --- | --- | --- |

Reviewed: <https://reviews.mahara.org/8206>

Committed: <https://git.mahara.org/mahara/mahara/commit/a99dbced72c6fd76d0589bcac6e4af8db330c4bd>

Submitter: Robert Lyon (<email address hidden>)

Branch: 17.04\_STABLE

commit a99dbced72c6fd76d0589bcac6e4af8db330c4bd

Author: Robert Lyon <email address hidden>

Date: Tue Sep 26 11:27:34 2017 +1300

[Bug 1719472](/bugs/1719472): Escape user's display\_name() when supplying to autocomplete

behatnotneeded

Change-Id: I4b342a0d3f00015e8f2e0ff7d93d2b5198fbc32d

Signed-off-by: Robert Lyon <email address hidden>

(cherry picked from commit 86711cb835dcd87208170df32e3405cd0467e1cf)

Reviewed: https://reviews.mahara.org/8206
Committed: https://git.mahara.org/mahara/mahara/commit/a99dbced72c6fd76d0589bcac6e4af8db330c4bd
Submitter: Robert Lyon (robertl@catalyst.net.nz)
Branch: 17.04\_STABLE
commit a99dbced72c6fd76d0589bcac6e4af8db330c4bd
Author: Robert Lyon <robertl@catalyst.net.nz>
Date: Tue Sep 26 11:27:34 2017 +1300
Bug 1719472: Escape user's display\_name() when supplying to autocomplete
behatnotneeded
Change-Id: I4b342a0d3f00015e8f2e0ff7d93d2b5198fbc32d
Signed-off-by: Robert Lyon <robertl@catalyst.net.nz>
(cherry picked from commit 86711cb835dcd87208170df32e3405cd0467e1cf)

[See full activity log](https://bugs.launchpad.net/mahara/%2Bbug/1719472/%2Bactivity)

To post a comment you must [log in](%2Blogin?comments=all).

* [Report a bug](/mahara/%2Bfilebug)

This report contains
**Public Security**
information

Everyone can see this security related information.

You are
[not directly subscribed to this bug's notifications.](/mahara/%2Bbug/1719472/%2Bsubscribe)

Subscribing...

* [Edit bug mail](https://bugs.launchpad.net/mahara/%2Bbug/1719472/%2Bsubscriptions "View and change your subscriptions to this bug")

## Other bug subscribers

[Subscribe someone else](https://bugs.launchpad.net/mahara/%2Bbug/1719472/%2Baddsubscriber "Launchpad will email that person whenever this bugs changes")

## Remote bug watches

Bug watches keep track of this bug in other bug trackers.

[![Launchpad](/@@/launchpad-footer-logo.svg)](https://launchpad.net/)
 •
[Take the tour](https://launchpad.net/%2Btour)
 •
[Read the guide](https://help.launchpad.net/)

© 2004
[Canonical Ltd.](http://canonical.com/)
 •
[Terms of use](https://launchpad.net/legal)
 •
[Data privacy](https://www.ubuntu.com/legal/dataprivacy)
 •
[Contact Launchpad Support](/feedback)
 •
[Blog](http://blog.launchpad.net/)
 •
[Careers](https://canonical.com/careers)
 •
[System status](https://ubuntu.social/%40launchpadstatus)
 •
4d55102
([Get the code!](https://dev.launchpad.net/))



=== Content from bugs.launchpad.net_c96ae4ee_20250126_053150.html ===

[Log in / Register](https://bugs.launchpad.net/mahara/%2Bbug/1719480/%2Blogin)

[![](https://launchpadlibrarian.net/302557383/mahara_64x64.png)](https://launchpad.net/mahara)

## [Mahara](https://launchpad.net/mahara)

* [Overview](https://launchpad.net/mahara)
* [Code](https://code.launchpad.net/mahara)
* [Bugs](https://bugs.launchpad.net/mahara)
* [Blueprints](https://blueprints.launchpad.net/mahara)
* [Translations](https://translations.launchpad.net/mahara)
* [Answers](https://answers.launchpad.net/mahara)

# Webservice test client / elasticsearch not escaping returned dumped values to screen

Bug #1719480 reported by
[Robert Lyon](https://launchpad.net/~robertl-9)
on 2017-09-25

[256](/%2Bhelp-bugs/bug-heat.html)

This bug affects 1 person

| Affects | | Status | Importance | Assigned to | Milestone |
| --- | --- | --- | --- | --- | --- |
|  | [Mahara](https://bugs.launchpad.net/mahara) | Fix Released | High | [Robert Lyon](https://launchpad.net/~robertl-9) | [Mahara 17.10.0](https://launchpad.net/mahara/%2Bmilestone/17.10.0) |
|  | [15.04](https://bugs.launchpad.net/mahara/15.04) | Fix Released | High | Unassigned | [Mahara 15.04.15](https://launchpad.net/mahara/%2Bmilestone/15.04.15) |
|  | [16.04](https://bugs.launchpad.net/mahara/16.04) | Fix Released | High | Unassigned | [Mahara 16.04.9](https://launchpad.net/mahara/%2Bmilestone/16.04.9) |
|  | [16.10](https://bugs.launchpad.net/mahara/16.10) | Fix Released | High | Unassigned | [Mahara 16.10.6](https://launchpad.net/mahara/%2Bmilestone/16.10.6) |
|  | [17.04](https://bugs.launchpad.net/mahara/17.04) | Fix Released | High | Unassigned | [Mahara 17.04.4](https://launchpad.net/mahara/%2Bmilestone/17.04.4) |
|  | [17.10](https://bugs.launchpad.net/mahara/17.10) | Fix Released | High | [Robert Lyon](https://launchpad.net/~robertl-9) | [Mahara 17.10.0](https://launchpad.net/mahara/%2Bmilestone/17.10.0) |

### Bug Description

Similar problem to [Bug 1719472](/bugs/1719472)

where we have a user with display name set to '<script>alert(1)</script>'

When fetching this user via webservices the test client displays the output to screen without escaping it

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Robert Lyon (robertl-9)](https://launchpad.net/~robertl-9) wrote on 2017-09-25: |  |  | [#1](/mahara/%2Bbug/1719480/comments/1) |
| --- | --- | --- | --- |

Patch for this is <https://reviews.mahara.org/#/c/8055/>

Patch for this is https://reviews.mahara.org/#/c/8055/

[Robert Lyon (robertl-9)](https://launchpad.net/~robertl-9)
on 2017-09-27

| **summary**: | - Webservice test client not escaping returned dumped values to screen+ Webservice test client / elasticsearch not escaping returned dumped+ values to screen |
| --- | --- |

[Kristina Hoeppner (kris-hoeppner)](https://launchpad.net/~kris-hoeppner)
on 2017-10-30

| **information type**: | Private Security → Public Security |
| --- | --- |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Mahara Bot (dev-mahara)](https://launchpad.net/~dev-mahara) wrote on 2017-10-30:  [**A change has been merged**](/mahara/%2Bbug/1719480/comments/2) |  |  | [#2](/mahara/%2Bbug/1719480/comments/2) |
| --- | --- | --- | --- |

Reviewed: <https://reviews.mahara.org/8219>

Committed: <https://git.mahara.org/mahara/mahara/commit/63c9b7c7fabd591012dc125ded8d0b012fec064c>

Submitter: Robert Lyon (<email address hidden>)

Branch: 15.04\_STABLE

commit 63c9b7c7fabd591012dc125ded8d0b012fec064c

Author: Robert Lyon <email address hidden>

Date: Tue Sep 26 12:08:05 2017 +1300

[Bug 1719480](/bugs/1719480): Escaping the output of the webservice testclient

Before displaying it to screen

Change-Id: I0bfc727ca6e0feee649392fcd85a89b16f55201f

Signed-off-by: Robert Lyon <email address hidden>

(cherry picked from commit 648b191ed8f93c5b4171837018eebc3db19974ad)

Reviewed: https://reviews.mahara.org/8219
Committed: https://git.mahara.org/mahara/mahara/commit/63c9b7c7fabd591012dc125ded8d0b012fec064c
Submitter: Robert Lyon (robertl@catalyst.net.nz)
Branch: 15.04\_STABLE
commit 63c9b7c7fabd591012dc125ded8d0b012fec064c
Author: Robert Lyon <robertl@catalyst.net.nz>
Date: Tue Sep 26 12:08:05 2017 +1300
Bug 1719480: Escaping the output of the webservice testclient
Before displaying it to screen
Change-Id: I0bfc727ca6e0feee649392fcd85a89b16f55201f
Signed-off-by: Robert Lyon <robertl@catalyst.net.nz>
(cherry picked from commit 648b191ed8f93c5b4171837018eebc3db19974ad)

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Mahara Bot (dev-mahara)](https://launchpad.net/~dev-mahara) wrote on 2017-10-30: |  |  | [#3](/mahara/%2Bbug/1719480/comments/3) |
| --- | --- | --- | --- |

Reviewed: <https://reviews.mahara.org/8218>

Committed: <https://git.mahara.org/mahara/mahara/commit/1042bf4ee27c65dc56459776aa2a91a3fa373c44>

Submitter: Robert Lyon (<email address hidden>)

Branch: 16.04\_STABLE

commit 1042bf4ee27c65dc56459776aa2a91a3fa373c44

Author: Robert Lyon <email address hidden>

Date: Tue Sep 26 12:08:05 2017 +1300

[Bug 1719480](/bugs/1719480): Escaping the output of the webservice testclient

Before displaying it to screen

Change-Id: I0bfc727ca6e0feee649392fcd85a89b16f55201f

Signed-off-by: Robert Lyon <email address hidden>

(cherry picked from commit 648b191ed8f93c5b4171837018eebc3db19974ad)

Reviewed: https://reviews.mahara.org/8218
Committed: https://git.mahara.org/mahara/mahara/commit/1042bf4ee27c65dc56459776aa2a91a3fa373c44
Submitter: Robert Lyon (robertl@catalyst.net.nz)
Branch: 16.04\_STABLE
commit 1042bf4ee27c65dc56459776aa2a91a3fa373c44
Author: Robert Lyon <robertl@catalyst.net.nz>
Date: Tue Sep 26 12:08:05 2017 +1300
Bug 1719480: Escaping the output of the webservice testclient
Before displaying it to screen
Change-Id: I0bfc727ca6e0feee649392fcd85a89b16f55201f
Signed-off-by: Robert Lyon <robertl@catalyst.net.nz>
(cherry picked from commit 648b191ed8f93c5b4171837018eebc3db19974ad)

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Mahara Bot (dev-mahara)](https://launchpad.net/~dev-mahara) wrote on 2017-10-30: |  |  | [#4](/mahara/%2Bbug/1719480/comments/4) |
| --- | --- | --- | --- |

Reviewed: <https://reviews.mahara.org/8217>

Committed: <https://git.mahara.org/mahara/mahara/commit/cde1a4d35b5c5a1fa721ff1311e9a2402a45b6ee>

Submitter: Robert Lyon (<email address hidden>)

Branch: 16.10\_STABLE

commit cde1a4d35b5c5a1fa721ff1311e9a2402a45b6ee

Author: Robert Lyon <email address hidden>

Date: Tue Sep 26 12:08:05 2017 +1300

[Bug 1719480](/bugs/1719480): Escaping the output of the webservice testclient

Before displaying it to screen

Change-Id: I0bfc727ca6e0feee649392fcd85a89b16f55201f

Signed-off-by: Robert Lyon <email address hidden>

(cherry picked from commit 648b191ed8f93c5b4171837018eebc3db19974ad)

Reviewed: https://reviews.mahara.org/8217
Committed: https://git.mahara.org/mahara/mahara/commit/cde1a4d35b5c5a1fa721ff1311e9a2402a45b6ee
Submitter: Robert Lyon (robertl@catalyst.net.nz)
Branch: 16.10\_STABLE
commit cde1a4d35b5c5a1fa721ff1311e9a2402a45b6ee
Author: Robert Lyon <robertl@catalyst.net.nz>
Date: Tue Sep 26 12:08:05 2017 +1300
Bug 1719480: Escaping the output of the webservice testclient
Before displaying it to screen
Change-Id: I0bfc727ca6e0feee649392fcd85a89b16f55201f
Signed-off-by: Robert Lyon <robertl@catalyst.net.nz>
(cherry picked from commit 648b191ed8f93c5b4171837018eebc3db19974ad)

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Mahara Bot (dev-mahara)](https://launchpad.net/~dev-mahara) wrote on 2017-10-30:  [**A patch has been submitted for review**](/mahara/%2Bbug/1719480/comments/5) |  |  | [#5](/mahara/%2Bbug/1719480/comments/5) |
| --- | --- | --- | --- |

Patch for "17.04\_STABLE" branch: <https://reviews.mahara.org/8243>

Patch for "17.04\_STABLE" branch: https://reviews.mahara.org/8243

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Mahara Bot (dev-mahara)](https://launchpad.net/~dev-mahara) wrote on 2017-10-30:  [**A change has been merged**](/mahara/%2Bbug/1719480/comments/6) |  |  | [#6](/mahara/%2Bbug/1719480/comments/6) |
| --- | --- | --- | --- |

Reviewed: <https://reviews.mahara.org/8243>

Committed: <https://git.mahara.org/mahara/mahara/commit/d360f4f2a06e8b6364e14a196b01f0e182dfc0d5>

Submitter: Robert Lyon (<email address hidden>)

Branch: 17.04\_STABLE

commit d360f4f2a06e8b6364e14a196b01f0e182dfc0d5

Author: Robert Lyon <email address hidden>

Date: Wed Sep 27 16:33:03 2017 +1300

[Bug 1719480](/bugs/1719480): Need to escape displayname in elasticsearch templates

Change-Id: I663f6ffde03b6b3504d49a767ac0ff55d0ab8437

Signed-off-by: Robert Lyon <email address hidden>

(cherry picked from commit 056d42fc014a846399af42be84f243b0f419c939)

Reviewed: https://reviews.mahara.org/8243
Committed: https://git.mahara.org/mahara/mahara/commit/d360f4f2a06e8b6364e14a196b01f0e182dfc0d5
Submitter: Robert Lyon (robertl@catalyst.net.nz)
Branch: 17.04\_STABLE
commit d360f4f2a06e8b6364e14a196b01f0e182dfc0d5
Author: Robert Lyon <robertl@catalyst.net.nz>
Date: Wed Sep 27 16:33:03 2017 +1300
Bug 1719480: Need to escape displayname in elasticsearch templates
Change-Id: I663f6ffde03b6b3504d49a767ac0ff55d0ab8437
Signed-off-by: Robert Lyon <robertl@catalyst.net.nz>
(cherry picked from commit 056d42fc014a846399af42be84f243b0f419c939)

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Mahara Bot (dev-mahara)](https://launchpad.net/~dev-mahara) wrote on 2017-10-30:  [**A patch has been submitted for review**](/mahara/%2Bbug/1719480/comments/7) |  |  | [#7](/mahara/%2Bbug/1719480/comments/7) |
| --- | --- | --- | --- |

Patch for "16.10\_STABLE" branch: <https://reviews.mahara.org/8244>

Patch for "16.10\_STABLE" branch: https://reviews.mahara.org/8244

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Mahara Bot (dev-mahara)](https://launchpad.net/~dev-mahara) wrote on 2017-10-30:  [**A change has been merged**](/mahara/%2Bbug/1719480/comments/8) |  |  | [#8](/mahara/%2Bbug/1719480/comments/8) |
| --- | --- | --- | --- |

Reviewed: <https://reviews.mahara.org/8244>

Committed: <https://git.mahara.org/mahara/mahara/commit/5b0b1f07ac798b01a6da204523ac7fa73ebd9130>

Submitter: Robert Lyon (<email address hidden>)

Branch: 16.10\_STABLE

commit 5b0b1f07ac798b01a6da204523ac7fa73ebd9130

Author: Robert Lyon <email address hidden>

Date: Wed Sep 27 16:33:03 2017 +1300

[Bug 1719480](/bugs/1719480): Need to escape displayname in elasticsearch templates

Change-Id: I663f6ffde03b6b3504d49a767ac0ff55d0ab8437

Signed-off-by: Robert Lyon <email address hidden>

(cherry picked from commit 056d42fc014a846399af42be84f243b0f419c939)

Reviewed: https://reviews.mahara.org/8244
Committed: https://git.mahara.org/mahara/mahara/commit/5b0b1f07ac798b01a6da204523ac7fa73ebd9130
Submitter: Robert Lyon (robertl@catalyst.net.nz)
Branch: 16.10\_STABLE
commit 5b0b1f07ac798b01a6da204523ac7fa73ebd9130
Author: Robert Lyon <robertl@catalyst.net.nz>
Date: Wed Sep 27 16:33:03 2017 +1300
Bug 1719480: Need to escape displayname in elasticsearch templates
Change-Id: I663f6ffde03b6b3504d49a767ac0ff55d0ab8437
Signed-off-by: Robert Lyon <robertl@catalyst.net.nz>
(cherry picked from commit 056d42fc014a846399af42be84f243b0f419c939)

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Mahara Bot (dev-mahara)](https://launchpad.net/~dev-mahara) wrote on 2017-10-30:  [**A patch has been submitted for review**](/mahara/%2Bbug/1719480/comments/9) |  |  | [#9](/mahara/%2Bbug/1719480/comments/9) |
| --- | --- | --- | --- |

Patch for "16.04\_STABLE" branch: <https://reviews.mahara.org/8245>

Patch for "16.04\_STABLE" branch: https://reviews.mahara.org/8245

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Mahara Bot (dev-mahara)](https://launchpad.net/~dev-mahara) wrote on 2017-10-30:  [**A change has been merged**](/mahara/%2Bbug/1719480/comments/10) |  |  | [#10](/mahara/%2Bbug/1719480/comments/10) |
| --- | --- | --- | --- |

Reviewed: <https://reviews.mahara.org/8245>

Committed: <https://git.mahara.org/mahara/mahara/commit/3a1166a789e7eae75923dad5fd12f35230f0196c>

Submitter: Robert Lyon (<email address hidden>)

Branch: 16.04\_STABLE

commit 3a1166a789e7eae75923dad5fd12f35230f0196c

Author: Robert Lyon <email address hidden>

Date: Wed Sep 27 16:33:03 2017 +1300

[Bug 1719480](/bugs/1719480): Need to escape displayname in elasticsearch templates

Change-Id: I663f6ffde03b6b3504d49a767ac0ff55d0ab8437

Signed-off-by: Robert Lyon <email address hidden>

(cherry picked from commit 056d42fc014a846399af42be84f243b0f419c939)

(cherry picked from commit 5b0b1f07ac798b01a6da204523ac7fa73ebd9130)

Reviewed: https://reviews.mahara.org/8245
Committed: https://git.mahara.org/mahara/mahara/commit/3a1166a789e7eae75923dad5fd12f35230f0196c
Submitter: Robert Lyon (robertl@catalyst.net.nz)
Branch: 16.04\_STABLE
commit 3a1166a789e7eae75923dad5fd12f35230f0196c
Author: Robert Lyon <robertl@catalyst.net.nz>
Date: Wed Sep 27 16:33:03 2017 +1300
Bug 1719480: Need to escape displayname in elasticsearch templates
Change-Id: I663f6ffde03b6b3504d49a767ac0ff55d0ab8437
Signed-off-by: Robert Lyon <robertl@catalyst.net.nz>
(cherry picked from commit 056d42fc014a846399af42be84f243b0f419c939)
(cherry picked from commit 5b0b1f07ac798b01a6da204523ac7fa73ebd9130)

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Mahara Bot (dev-mahara)](https://launchpad.net/~dev-mahara) wrote on 2017-10-30:  [**A patch has been submitted for review**](/mahara/%2Bbug/1719480/comments/11) |  |  | [#11](/mahara/%2Bbug/1719480/comments/11) |
| --- | --- | --- | --- |

Patch for "15.04\_STABLE" branch: <https://reviews.mahara.org/8246>

Patch for "15.04\_STABLE" branch: https://reviews.mahara.org/8246

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Mahara Bot (dev-mahara)](https://launchpad.net/~dev-mahara) wrote on 2017-10-30:  [**A change has been merged**](/mahara/%2Bbug/1719480/comments/12) |  |  | [#12](/mahara/%2Bbug/1719480/comments/12) |
| --- | --- | --- | --- |

Reviewed: <https://reviews.mahara.org/8246>

Committed: <https://git.mahara.org/mahara/mahara/commit/7a55082017280b59c6fc5316ff188d699a42005d>

Submitter: Robert Lyon (<email address hidden>)

Branch: 15.04\_STABLE

commit 7a55082017280b59c6fc5316ff188d699a42005d

Author: Robert Lyon <email address hidden>

Date: Wed Sep 27 16:33:03 2017 +1300

[Bug 1719480](/bugs/1719480): Need to escape displayname in elasticsearch templates

Change-Id: I663f6ffde03b6b3504d49a767ac0ff55d0ab8437

Signed-off-by: Robert Lyon <email address hidden>

(cherry picked from commit 056d42fc014a846399af42be84f243b0f419c939)

(cherry picked from commit 5b0b1f07ac798b01a6da204523ac7fa73ebd9130)

Reviewed: https://reviews.mahara.org/8246
Committed: https://git.mahara.org/mahara/mahara/commit/7a55082017280b59c6fc5316ff188d699a42005d
Submitter: Robert Lyon (robertl@catalyst.net.nz)
Branch: 15.04\_STABLE
commit 7a55082017280b59c6fc5316ff188d699a42005d
Author: Robert Lyon <robertl@catalyst.net.nz>
Date: Wed Sep 27 16:33:03 2017 +1300
Bug 1719480: Need to escape displayname in elasticsearch templates
Change-Id: I663f6ffde03b6b3504d49a767ac0ff55d0ab8437
Signed-off-by: Robert Lyon <robertl@catalyst.net.nz>
(cherry picked from commit 056d42fc014a846399af42be84f243b0f419c939)
(cherry picked from commit 5b0b1f07ac798b01a6da204523ac7fa73ebd9130)

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Mahara Bot (dev-mahara)](https://launchpad.net/~dev-mahara) wrote on 2017-10-30: |  |  | [#13](/mahara/%2Bbug/1719480/comments/13) |
| --- | --- | --- | --- |

Reviewed: <https://reviews.mahara.org/8216>

Committed: <https://git.mahara.org/mahara/mahara/commit/aeeae1931d2108f9927c6b9e6e891a397dee14cf>

Submitter: Robert Lyon (<email address hidden>)

Branch: 17.04\_STABLE

commit aeeae1931d2108f9927c6b9e6e891a397dee14cf

Author: Robert Lyon <email address hidden>

Date: Tue Sep 26 12:08:05 2017 +1300

[Bug 1719480](/bugs/1719480): Escaping the output of the webservice testclient

Before displaying it to screen

Change-Id: I0bfc727ca6e0feee649392fcd85a89b16f55201f

Signed-off-by: Robert Lyon <email address hidden>

(cherry picked from commit 648b191ed8f93c5b4171837018eebc3db19974ad)

Reviewed: https://reviews.mahara.org/8216
Committed: https://git.mahara.org/mahara/mahara/commit/aeeae1931d2108f9927c6b9e6e891a397dee14cf
Submitter: Robert Lyon (robertl@catalyst.net.nz)
Branch: 17.04\_STABLE
commit aeeae1931d2108f9927c6b9e6e891a397dee14cf
Author: Robert Lyon <robertl@catalyst.net.nz>
Date: Tue Sep 26 12:08:05 2017 +1300
Bug 1719480: Escaping the output of the webservice testclient
Before displaying it to screen
Change-Id: I0bfc727ca6e0feee649392fcd85a89b16f55201f
Signed-off-by: Robert Lyon <robertl@catalyst.net.nz>
(cherry picked from commit 648b191ed8f93c5b4171837018eebc3db19974ad)

[See full activity log](https://bugs.launchpad.net/mahara/%2Bbug/1719480/%2Bactivity)

To post a comment you must [log in](%2Blogin?comments=all).

* [Report a bug](/mahara/%2Bfilebug)

This report contains
**Public Security**
information

Everyone can see this security related information.

You are
[not directly subscribed to this bug's notifications.](/mahara/%2Bbug/1719480/%2Bsubscribe)

Subscribing...

* [Edit bug mail](https://bugs.launchpad.net/mahara/%2Bbug/1719480/%2Bsubscriptions "View and change your subscriptions to this bug")

## Other bug subscribers

[Subscribe someone else](https://bugs.launchpad.net/mahara/%2Bbug/1719480/%2Baddsubscriber "Launchpad will email that person whenever this bugs changes")

## Remote bug watches

Bug watches keep track of this bug in other bug trackers.

[![Launchpad](/@@/launchpad-footer-logo.svg)](https://launchpad.net/)
 •
[Take the tour](https://launchpad.net/%2Btour)
 •
[Read the guide](https://help.launchpad.net/)

© 2004
[Canonical Ltd.](http://canonical.com/)
 •
[Terms of use](https://launchpad.net/legal)
 •
[Data privacy](https://www.ubuntu.com/legal/dataprivacy)
 •
[Contact Launchpad Support](/feedback)
 •
[Blog](http://blog.launchpad.net/)
 •
[Careers](https://canonical.com/careers)
 •
[System status](https://ubuntu.social/%40launchpadstatus)
 •
4d55102
([Get the code!](https://dev.launchpad.net/))



=== Content from bugs.launchpad.net_b35d3a5c_20250126_053149.html ===

[Log in / Register](https://bugs.launchpad.net/mahara/%2Bbug/1719480/%2Blogin)

[![](https://launchpadlibrarian.net/302557383/mahara_64x64.png)](https://launchpad.net/mahara)

## [Mahara](https://launchpad.net/mahara)

* [Overview](https://launchpad.net/mahara)
* [Code](https://code.launchpad.net/mahara)
* [Bugs](https://bugs.launchpad.net/mahara)
* [Blueprints](https://blueprints.launchpad.net/mahara)
* [Translations](https://translations.launchpad.net/mahara)
* [Answers](https://answers.launchpad.net/mahara)

# Webservice test client / elasticsearch not escaping returned dumped values to screen

Bug #1719480 reported by
[Robert Lyon](https://launchpad.net/~robertl-9)
on 2017-09-25

[256](/%2Bhelp-bugs/bug-heat.html)

This bug affects 1 person

| Affects | | Status | Importance | Assigned to | Milestone |
| --- | --- | --- | --- | --- | --- |
|  | [Mahara](https://bugs.launchpad.net/mahara) | Fix Released | High | [Robert Lyon](https://launchpad.net/~robertl-9) | [Mahara 17.10.0](https://launchpad.net/mahara/%2Bmilestone/17.10.0) |
|  | [15.04](https://bugs.launchpad.net/mahara/15.04) | Fix Released | High | Unassigned | [Mahara 15.04.15](https://launchpad.net/mahara/%2Bmilestone/15.04.15) |
|  | [16.04](https://bugs.launchpad.net/mahara/16.04) | Fix Released | High | Unassigned | [Mahara 16.04.9](https://launchpad.net/mahara/%2Bmilestone/16.04.9) |
|  | [16.10](https://bugs.launchpad.net/mahara/16.10) | Fix Released | High | Unassigned | [Mahara 16.10.6](https://launchpad.net/mahara/%2Bmilestone/16.10.6) |
|  | [17.04](https://bugs.launchpad.net/mahara/17.04) | Fix Released | High | Unassigned | [Mahara 17.04.4](https://launchpad.net/mahara/%2Bmilestone/17.04.4) |
|  | [17.10](https://bugs.launchpad.net/mahara/17.10) | Fix Released | High | [Robert Lyon](https://launchpad.net/~robertl-9) | [Mahara 17.10.0](https://launchpad.net/mahara/%2Bmilestone/17.10.0) |

### Bug Description

Similar problem to [Bug 1719472](/bugs/1719472)

where we have a user with display name set to '<script>alert(1)</script>'

When fetching this user via webservices the test client displays the output to screen without escaping it

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Robert Lyon (robertl-9)](https://launchpad.net/~robertl-9) wrote on 2017-09-25: |  |  | [#1](/mahara/%2Bbug/1719480/comments/1) |
| --- | --- | --- | --- |

Patch for this is <https://reviews.mahara.org/#/c/8055/>

Patch for this is https://reviews.mahara.org/#/c/8055/

[Robert Lyon (robertl-9)](https://launchpad.net/~robertl-9)
on 2017-09-27

| **summary**: | - Webservice test client not escaping returned dumped values to screen+ Webservice test client / elasticsearch not escaping returned dumped+ values to screen |
| --- | --- |

[Kristina Hoeppner (kris-hoeppner)](https://launchpad.net/~kris-hoeppner)
on 2017-10-30

| **information type**: | Private Security → Public Security |
| --- | --- |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Mahara Bot (dev-mahara)](https://launchpad.net/~dev-mahara) wrote on 2017-10-30:  [**A change has been merged**](/mahara/%2Bbug/1719480/comments/2) |  |  | [#2](/mahara/%2Bbug/1719480/comments/2) |
| --- | --- | --- | --- |

Reviewed: <https://reviews.mahara.org/8219>

Committed: <https://git.mahara.org/mahara/mahara/commit/63c9b7c7fabd591012dc125ded8d0b012fec064c>

Submitter: Robert Lyon (<email address hidden>)

Branch: 15.04\_STABLE

commit 63c9b7c7fabd591012dc125ded8d0b012fec064c

Author: Robert Lyon <email address hidden>

Date: Tue Sep 26 12:08:05 2017 +1300

[Bug 1719480](/bugs/1719480): Escaping the output of the webservice testclient

Before displaying it to screen

Change-Id: I0bfc727ca6e0feee649392fcd85a89b16f55201f

Signed-off-by: Robert Lyon <email address hidden>

(cherry picked from commit 648b191ed8f93c5b4171837018eebc3db19974ad)

Reviewed: https://reviews.mahara.org/8219
Committed: https://git.mahara.org/mahara/mahara/commit/63c9b7c7fabd591012dc125ded8d0b012fec064c
Submitter: Robert Lyon (robertl@catalyst.net.nz)
Branch: 15.04\_STABLE
commit 63c9b7c7fabd591012dc125ded8d0b012fec064c
Author: Robert Lyon <robertl@catalyst.net.nz>
Date: Tue Sep 26 12:08:05 2017 +1300
Bug 1719480: Escaping the output of the webservice testclient
Before displaying it to screen
Change-Id: I0bfc727ca6e0feee649392fcd85a89b16f55201f
Signed-off-by: Robert Lyon <robertl@catalyst.net.nz>
(cherry picked from commit 648b191ed8f93c5b4171837018eebc3db19974ad)

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Mahara Bot (dev-mahara)](https://launchpad.net/~dev-mahara) wrote on 2017-10-30: |  |  | [#3](/mahara/%2Bbug/1719480/comments/3) |
| --- | --- | --- | --- |

Reviewed: <https://reviews.mahara.org/8218>

Committed: <https://git.mahara.org/mahara/mahara/commit/1042bf4ee27c65dc56459776aa2a91a3fa373c44>

Submitter: Robert Lyon (<email address hidden>)

Branch: 16.04\_STABLE

commit 1042bf4ee27c65dc56459776aa2a91a3fa373c44

Author: Robert Lyon <email address hidden>

Date: Tue Sep 26 12:08:05 2017 +1300

[Bug 1719480](/bugs/1719480): Escaping the output of the webservice testclient

Before displaying it to screen

Change-Id: I0bfc727ca6e0feee649392fcd85a89b16f55201f

Signed-off-by: Robert Lyon <email address hidden>

(cherry picked from commit 648b191ed8f93c5b4171837018eebc3db19974ad)

Reviewed: https://reviews.mahara.org/8218
Committed: https://git.mahara.org/mahara/mahara/commit/1042bf4ee27c65dc56459776aa2a91a3fa373c44
Submitter: Robert Lyon (robertl@catalyst.net.nz)
Branch: 16.04\_STABLE
commit 1042bf4ee27c65dc56459776aa2a91a3fa373c44
Author: Robert Lyon <robertl@catalyst.net.nz>
Date: Tue Sep 26 12:08:05 2017 +1300
Bug 1719480: Escaping the output of the webservice testclient
Before displaying it to screen
Change-Id: I0bfc727ca6e0feee649392fcd85a89b16f55201f
Signed-off-by: Robert Lyon <robertl@catalyst.net.nz>
(cherry picked from commit 648b191ed8f93c5b4171837018eebc3db19974ad)

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Mahara Bot (dev-mahara)](https://launchpad.net/~dev-mahara) wrote on 2017-10-30: |  |  | [#4](/mahara/%2Bbug/1719480/comments/4) |
| --- | --- | --- | --- |

Reviewed: <https://reviews.mahara.org/8217>

Committed: <https://git.mahara.org/mahara/mahara/commit/cde1a4d35b5c5a1fa721ff1311e9a2402a45b6ee>

Submitter: Robert Lyon (<email address hidden>)

Branch: 16.10\_STABLE

commit cde1a4d35b5c5a1fa721ff1311e9a2402a45b6ee

Author: Robert Lyon <email address hidden>

Date: Tue Sep 26 12:08:05 2017 +1300

[Bug 1719480](/bugs/1719480): Escaping the output of the webservice testclient

Before displaying it to screen

Change-Id: I0bfc727ca6e0feee649392fcd85a89b16f55201f

Signed-off-by: Robert Lyon <email address hidden>

(cherry picked from commit 648b191ed8f93c5b4171837018eebc3db19974ad)

Reviewed: https://reviews.mahara.org/8217
Committed: https://git.mahara.org/mahara/mahara/commit/cde1a4d35b5c5a1fa721ff1311e9a2402a45b6ee
Submitter: Robert Lyon (robertl@catalyst.net.nz)
Branch: 16.10\_STABLE
commit cde1a4d35b5c5a1fa721ff1311e9a2402a45b6ee
Author: Robert Lyon <robertl@catalyst.net.nz>
Date: Tue Sep 26 12:08:05 2017 +1300
Bug 1719480: Escaping the output of the webservice testclient
Before displaying it to screen
Change-Id: I0bfc727ca6e0feee649392fcd85a89b16f55201f
Signed-off-by: Robert Lyon <robertl@catalyst.net.nz>
(cherry picked from commit 648b191ed8f93c5b4171837018eebc3db19974ad)

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Mahara Bot (dev-mahara)](https://launchpad.net/~dev-mahara) wrote on 2017-10-30:  [**A patch has been submitted for review**](/mahara/%2Bbug/1719480/comments/5) |  |  | [#5](/mahara/%2Bbug/1719480/comments/5) |
| --- | --- | --- | --- |

Patch for "17.04\_STABLE" branch: <https://reviews.mahara.org/8243>

Patch for "17.04\_STABLE" branch: https://reviews.mahara.org/8243

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Mahara Bot (dev-mahara)](https://launchpad.net/~dev-mahara) wrote on 2017-10-30:  [**A change has been merged**](/mahara/%2Bbug/1719480/comments/6) |  |  | [#6](/mahara/%2Bbug/1719480/comments/6) |
| --- | --- | --- | --- |

Reviewed: <https://reviews.mahara.org/8243>

Committed: <https://git.mahara.org/mahara/mahara/commit/d360f4f2a06e8b6364e14a196b01f0e182dfc0d5>

Submitter: Robert Lyon (<email address hidden>)

Branch: 17.04\_STABLE

commit d360f4f2a06e8b6364e14a196b01f0e182dfc0d5

Author: Robert Lyon <email address hidden>

Date: Wed Sep 27 16:33:03 2017 +1300

[Bug 1719480](/bugs/1719480): Need to escape displayname in elasticsearch templates

Change-Id: I663f6ffde03b6b3504d49a767ac0ff55d0ab8437

Signed-off-by: Robert Lyon <email address hidden>

(cherry picked from commit 056d42fc014a846399af42be84f243b0f419c939)

Reviewed: https://reviews.mahara.org/8243
Committed: https://git.mahara.org/mahara/mahara/commit/d360f4f2a06e8b6364e14a196b01f0e182dfc0d5
Submitter: Robert Lyon (robertl@catalyst.net.nz)
Branch: 17.04\_STABLE
commit d360f4f2a06e8b6364e14a196b01f0e182dfc0d5
Author: Robert Lyon <robertl@catalyst.net.nz>
Date: Wed Sep 27 16:33:03 2017 +1300
Bug 1719480: Need to escape displayname in elasticsearch templates
Change-Id: I663f6ffde03b6b3504d49a767ac0ff55d0ab8437
Signed-off-by: Robert Lyon <robertl@catalyst.net.nz>
(cherry picked from commit 056d42fc014a846399af42be84f243b0f419c939)

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Mahara Bot (dev-mahara)](https://launchpad.net/~dev-mahara) wrote on 2017-10-30:  [**A patch has been submitted for review**](/mahara/%2Bbug/1719480/comments/7) |  |  | [#7](/mahara/%2Bbug/1719480/comments/7) |
| --- | --- | --- | --- |

Patch for "16.10\_STABLE" branch: <https://reviews.mahara.org/8244>

Patch for "16.10\_STABLE" branch: https://reviews.mahara.org/8244

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Mahara Bot (dev-mahara)](https://launchpad.net/~dev-mahara) wrote on 2017-10-30:  [**A change has been merged**](/mahara/%2Bbug/1719480/comments/8) |  |  | [#8](/mahara/%2Bbug/1719480/comments/8) |
| --- | --- | --- | --- |

Reviewed: <https://reviews.mahara.org/8244>

Committed: <https://git.mahara.org/mahara/mahara/commit/5b0b1f07ac798b01a6da204523ac7fa73ebd9130>

Submitter: Robert Lyon (<email address hidden>)

Branch: 16.10\_STABLE

commit 5b0b1f07ac798b01a6da204523ac7fa73ebd9130

Author: Robert Lyon <email address hidden>

Date: Wed Sep 27 16:33:03 2017 +1300

[Bug 1719480](/bugs/1719480): Need to escape displayname in elasticsearch templates

Change-Id: I663f6ffde03b6b3504d49a767ac0ff55d0ab8437

Signed-off-by: Robert Lyon <email address hidden>

(cherry picked from commit 056d42fc014a846399af42be84f243b0f419c939)

Reviewed: https://reviews.mahara.org/8244
Committed: https://git.mahara.org/mahara/mahara/commit/5b0b1f07ac798b01a6da204523ac7fa73ebd9130
Submitter: Robert Lyon (robertl@catalyst.net.nz)
Branch: 16.10\_STABLE
commit 5b0b1f07ac798b01a6da204523ac7fa73ebd9130
Author: Robert Lyon <robertl@catalyst.net.nz>
Date: Wed Sep 27 16:33:03 2017 +1300
Bug 1719480: Need to escape displayname in elasticsearch templates
Change-Id: I663f6ffde03b6b3504d49a767ac0ff55d0ab8437
Signed-off-by: Robert Lyon <robertl@catalyst.net.nz>
(cherry picked from commit 056d42fc014a846399af42be84f243b0f419c939)

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Mahara Bot (dev-mahara)](https://launchpad.net/~dev-mahara) wrote on 2017-10-30:  [**A patch has been submitted for review**](/mahara/%2Bbug/1719480/comments/9) |  |  | [#9](/mahara/%2Bbug/1719480/comments/9) |
| --- | --- | --- | --- |

Patch for "16.04\_STABLE" branch: <https://reviews.mahara.org/8245>

Patch for "16.04\_STABLE" branch: https://reviews.mahara.org/8245

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Mahara Bot (dev-mahara)](https://launchpad.net/~dev-mahara) wrote on 2017-10-30:  [**A change has been merged**](/mahara/%2Bbug/1719480/comments/10) |  |  | [#10](/mahara/%2Bbug/1719480/comments/10) |
| --- | --- | --- | --- |

Reviewed: <https://reviews.mahara.org/8245>

Committed: <https://git.mahara.org/mahara/mahara/commit/3a1166a789e7eae75923dad5fd12f35230f0196c>

Submitter: Robert Lyon (<email address hidden>)

Branch: 16.04\_STABLE

commit 3a1166a789e7eae75923dad5fd12f35230f0196c

Author: Robert Lyon <email address hidden>

Date: Wed Sep 27 16:33:03 2017 +1300

[Bug 1719480](/bugs/1719480): Need to escape displayname in elasticsearch templates

Change-Id: I663f6ffde03b6b3504d49a767ac0ff55d0ab8437

Signed-off-by: Robert Lyon <email address hidden>

(cherry picked from commit 056d42fc014a846399af42be84f243b0f419c939)

(cherry picked from commit 5b0b1f07ac798b01a6da204523ac7fa73ebd9130)

Reviewed: https://reviews.mahara.org/8245
Committed: https://git.mahara.org/mahara/mahara/commit/3a1166a789e7eae75923dad5fd12f35230f0196c
Submitter: Robert Lyon (robertl@catalyst.net.nz)
Branch: 16.04\_STABLE
commit 3a1166a789e7eae75923dad5fd12f35230f0196c
Author: Robert Lyon <robertl@catalyst.net.nz>
Date: Wed Sep 27 16:33:03 2017 +1300
Bug 1719480: Need to escape displayname in elasticsearch templates
Change-Id: I663f6ffde03b6b3504d49a767ac0ff55d0ab8437
Signed-off-by: Robert Lyon <robertl@catalyst.net.nz>
(cherry picked from commit 056d42fc014a846399af42be84f243b0f419c939)
(cherry picked from commit 5b0b1f07ac798b01a6da204523ac7fa73ebd9130)

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Mahara Bot (dev-mahara)](https://launchpad.net/~dev-mahara) wrote on 2017-10-30:  [**A patch has been submitted for review**](/mahara/%2Bbug/1719480/comments/11) |  |  | [#11](/mahara/%2Bbug/1719480/comments/11) |
| --- | --- | --- | --- |

Patch for "15.04\_STABLE" branch: <https://reviews.mahara.org/8246>

Patch for "15.04\_STABLE" branch: https://reviews.mahara.org/8246

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Mahara Bot (dev-mahara)](https://launchpad.net/~dev-mahara) wrote on 2017-10-30:  [**A change has been merged**](/mahara/%2Bbug/1719480/comments/12) |  |  | [#12](/mahara/%2Bbug/1719480/comments/12) |
| --- | --- | --- | --- |

Reviewed: <https://reviews.mahara.org/8246>

Committed: <https://git.mahara.org/mahara/mahara/commit/7a55082017280b59c6fc5316ff188d699a42005d>

Submitter: Robert Lyon (<email address hidden>)

Branch: 15.04\_STABLE

commit 7a55082017280b59c6fc5316ff188d699a42005d

Author: Robert Lyon <email address hidden>

Date: Wed Sep 27 16:33:03 2017 +1300

[Bug 1719480](/bugs/1719480): Need to escape displayname in elasticsearch templates

Change-Id: I663f6ffde03b6b3504d49a767ac0ff55d0ab8437

Signed-off-by: Robert Lyon <email address hidden>

(cherry picked from commit 056d42fc014a846399af42be84f243b0f419c939)

(cherry picked from commit 5b0b1f07ac798b01a6da204523ac7fa73ebd9130)

Reviewed: https://reviews.mahara.org/8246
Committed: https://git.mahara.org/mahara/mahara/commit/7a55082017280b59c6fc5316ff188d699a42005d
Submitter: Robert Lyon (robertl@catalyst.net.nz)
Branch: 15.04\_STABLE
commit 7a55082017280b59c6fc5316ff188d699a42005d
Author: Robert Lyon <robertl@catalyst.net.nz>
Date: Wed Sep 27 16:33:03 2017 +1300
Bug 1719480: Need to escape displayname in elasticsearch templates
Change-Id: I663f6ffde03b6b3504d49a767ac0ff55d0ab8437
Signed-off-by: Robert Lyon <robertl@catalyst.net.nz>
(cherry picked from commit 056d42fc014a846399af42be84f243b0f419c939)
(cherry picked from commit 5b0b1f07ac798b01a6da204523ac7fa73ebd9130)

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Mahara Bot (dev-mahara)](https://launchpad.net/~dev-mahara) wrote on 2017-10-30: |  |  | [#13](/mahara/%2Bbug/1719480/comments/13) |
| --- | --- | --- | --- |

Reviewed: <https://reviews.mahara.org/8216>

Committed: <https://git.mahara.org/mahara/mahara/commit/aeeae1931d2108f9927c6b9e6e891a397dee14cf>

Submitter: Robert Lyon (<email address hidden>)

Branch: 17.04\_STABLE

commit aeeae1931d2108f9927c6b9e6e891a397dee14cf

Author: Robert Lyon <email address hidden>

Date: Tue Sep 26 12:08:05 2017 +1300

[Bug 1719480](/bugs/1719480): Escaping the output of the webservice testclient

Before displaying it to screen

Change-Id: I0bfc727ca6e0feee649392fcd85a89b16f55201f

Signed-off-by: Robert Lyon <email address hidden>

(cherry picked from commit 648b191ed8f93c5b4171837018eebc3db19974ad)

Reviewed: https://reviews.mahara.org/8216
Committed: https://git.mahara.org/mahara/mahara/commit/aeeae1931d2108f9927c6b9e6e891a397dee14cf
Submitter: Robert Lyon (robertl@catalyst.net.nz)
Branch: 17.04\_STABLE
commit aeeae1931d2108f9927c6b9e6e891a397dee14cf
Author: Robert Lyon <robertl@catalyst.net.nz>
Date: Tue Sep 26 12:08:05 2017 +1300
Bug 1719480: Escaping the output of the webservice testclient
Before displaying it to screen
Change-Id: I0bfc727ca6e0feee649392fcd85a89b16f55201f
Signed-off-by: Robert Lyon <robertl@catalyst.net.nz>
(cherry picked from commit 648b191ed8f93c5b4171837018eebc3db19974ad)

[See full activity log](https://bugs.launchpad.net/mahara/%2Bbug/1719480/%2Bactivity)

To post a comment you must [log in](%2Blogin?comments=all).

* [Report a bug](/mahara/%2Bfilebug)

This report contains
**Public Security**
information

Everyone can see this security related information.

You are
[not directly subscribed to this bug's notifications.](/mahara/%2Bbug/1719480/%2Bsubscribe)

Subscribing...

* [Edit bug mail](https://bugs.launchpad.net/mahara/%2Bbug/1719480/%2Bsubscriptions "View and change your subscriptions to this bug")

## Other bug subscribers

[Subscribe someone else](https://bugs.launchpad.net/mahara/%2Bbug/1719480/%2Baddsubscriber "Launchpad will email that person whenever this bugs changes")

## Remote bug watches

Bug watches keep track of this bug in other bug trackers.

[![Launchpad](/@@/launchpad-footer-logo.svg)](https://launchpad.net/)
 •
[Take the tour](https://launchpad.net/%2Btour)
 •
[Read the guide](https://help.launchpad.net/)

© 2004
[Canonical Ltd.](http://canonical.com/)
 •
[Terms of use](https://launchpad.net/legal)
 •
[Data privacy](https://www.ubuntu.com/legal/dataprivacy)
 •
[Contact Launchpad Support](/feedback)
 •
[Blog](http://blog.launchpad.net/)
 •
[Careers](https://canonical.com/careers)
 •
[System status](https://ubuntu.social/%40launchpadstatus)
 •
4d55102
([Get the code!](https://dev.launchpad.net/))



=== Content from bugs.launchpad.net_8f03c612_20250125_023410.html ===

[Log in / Register](https://bugs.launchpad.net/mahara/%2Bbug/1719472/%2Blogin)

[![](https://launchpadlibrarian.net/302557383/mahara_64x64.png)](https://launchpad.net/mahara)

## [Mahara](https://launchpad.net/mahara)

* [Overview](https://launchpad.net/mahara)
* [Code](https://code.launchpad.net/mahara)
* [Bugs](https://bugs.launchpad.net/mahara)
* [Blueprints](https://blueprints.launchpad.net/mahara)
* [Translations](https://translations.launchpad.net/mahara)
* [Answers](https://answers.launchpad.net/mahara)

# User autocomplete selector in Mail composer not escaping the name

Bug #1719472 reported by
[Robert Lyon](https://launchpad.net/~robertl-9)
on 2017-09-25

[256](/%2Bhelp-bugs/bug-heat.html)

This bug affects 1 person

| Affects | | Status | Importance | Assigned to | Milestone |
| --- | --- | --- | --- | --- | --- |
|  | [Mahara](https://bugs.launchpad.net/mahara) | Fix Released | High | [Robert Lyon](https://launchpad.net/~robertl-9) | [Mahara 17.10.0](https://launchpad.net/mahara/%2Bmilestone/17.10.0) |
|  | [16.04](https://bugs.launchpad.net/mahara/16.04) | Fix Released | High | Unassigned | [Mahara 16.04.9](https://launchpad.net/mahara/%2Bmilestone/16.04.9) |
|  | [16.10](https://bugs.launchpad.net/mahara/16.10) | Fix Released | High | Unassigned | [Mahara 16.10.6](https://launchpad.net/mahara/%2Bmilestone/16.10.6) |
|  | [17.04](https://bugs.launchpad.net/mahara/17.04) | Fix Released | High | Unassigned | [Mahara 17.04.4](https://launchpad.net/mahara/%2Bmilestone/17.04.4) |
|  | [17.10](https://bugs.launchpad.net/mahara/17.10) | Fix Released | High | [Robert Lyon](https://launchpad.net/~robertl-9) | [Mahara 17.10.0](https://launchpad.net/mahara/%2Bmilestone/17.10.0) |

### Bug Description

This means that a user can set a bad name and compromise another user

To reproduce:

\*) Login as "user1"

\*) Click on "Main menu" - "Content" - "Profile" - "About me"

\*) Insert at "First name" or "Last name" or "Display name":

<script>alert(1)</script>

\*) Save with "Save profile"

\*) Click on "User menu" - "0 unread" - "Compose"

\*) Send a message to another user, for example:

Recipients: user2

Subject: Hello

Message: Please reply

\*) Send the message with "Send message"

\*) Logout as "user1"

\*) Login as "user2"

\*) Open the received message in the dashboard ("Inbox")

\*) Click on "Reply"

\*) The alert dialog appears

To fix:

Normally when we show a user's name to screen we filter it via hsc()

But in this case the name is being fetched by the autocomplete pieform element via the translate\_ids\_to\_names() function without being escaped.

So we need to escape it before returning the name

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Robert Lyon (robertl-9)](https://launchpad.net/~robertl-9) wrote on 2017-09-25: |  |  | [#1](/mahara/%2Bbug/1719472/comments/1) |
| --- | --- | --- | --- |

Patch for this

<https://reviews.mahara.org/#/c/8054/>

Patch for this
https://reviews.mahara.org/#/c/8054/

[Kristina Hoeppner (kris-hoeppner)](https://launchpad.net/~kris-hoeppner)
on 2017-10-30

| **information type**: | Private Security → Public Security |
| --- | --- |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Mahara Bot (dev-mahara)](https://launchpad.net/~dev-mahara) wrote on 2017-10-30:  [**A change has been merged**](/mahara/%2Bbug/1719472/comments/2) |  |  | [#2](/mahara/%2Bbug/1719472/comments/2) |
| --- | --- | --- | --- |

Reviewed: <https://reviews.mahara.org/8208>

Committed: <https://git.mahara.org/mahara/mahara/commit/13fa6facb342b7a58df517f7d59ba396c1863b94>

Submitter: Robert Lyon (<email address hidden>)

Branch: 16.04\_STABLE

commit 13fa6facb342b7a58df517f7d59ba396c1863b94

Author: Robert Lyon <email address hidden>

Date: Tue Sep 26 11:27:34 2017 +1300

[Bug 1719472](/bugs/1719472): Escape user's display\_name() when supplying to autocomplete

behatnotneeded

Change-Id: I4b342a0d3f00015e8f2e0ff7d93d2b5198fbc32d

Signed-off-by: Robert Lyon <email address hidden>

(cherry picked from commit 86711cb835dcd87208170df32e3405cd0467e1cf)

Reviewed: https://reviews.mahara.org/8208
Committed: https://git.mahara.org/mahara/mahara/commit/13fa6facb342b7a58df517f7d59ba396c1863b94
Submitter: Robert Lyon (robertl@catalyst.net.nz)
Branch: 16.04\_STABLE
commit 13fa6facb342b7a58df517f7d59ba396c1863b94
Author: Robert Lyon <robertl@catalyst.net.nz>
Date: Tue Sep 26 11:27:34 2017 +1300
Bug 1719472: Escape user's display\_name() when supplying to autocomplete
behatnotneeded
Change-Id: I4b342a0d3f00015e8f2e0ff7d93d2b5198fbc32d
Signed-off-by: Robert Lyon <robertl@catalyst.net.nz>
(cherry picked from commit 86711cb835dcd87208170df32e3405cd0467e1cf)

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Mahara Bot (dev-mahara)](https://launchpad.net/~dev-mahara) wrote on 2017-10-30: |  |  | [#3](/mahara/%2Bbug/1719472/comments/3) |
| --- | --- | --- | --- |

Reviewed: <https://reviews.mahara.org/8207>

Committed: <https://git.mahara.org/mahara/mahara/commit/fa531905b49096f071351e4381e42660f48944d5>

Submitter: Robert Lyon (<email address hidden>)

Branch: 16.10\_STABLE

commit fa531905b49096f071351e4381e42660f48944d5

Author: Robert Lyon <email address hidden>

Date: Tue Sep 26 11:27:34 2017 +1300

[Bug 1719472](/bugs/1719472): Escape user's display\_name() when supplying to autocomplete

behatnotneeded

Change-Id: I4b342a0d3f00015e8f2e0ff7d93d2b5198fbc32d

Signed-off-by: Robert Lyon <email address hidden>

(cherry picked from commit 86711cb835dcd87208170df32e3405cd0467e1cf)

Reviewed: https://reviews.mahara.org/8207
Committed: https://git.mahara.org/mahara/mahara/commit/fa531905b49096f071351e4381e42660f48944d5
Submitter: Robert Lyon (robertl@catalyst.net.nz)
Branch: 16.10\_STABLE
commit fa531905b49096f071351e4381e42660f48944d5
Author: Robert Lyon <robertl@catalyst.net.nz>
Date: Tue Sep 26 11:27:34 2017 +1300
Bug 1719472: Escape user's display\_name() when supplying to autocomplete
behatnotneeded
Change-Id: I4b342a0d3f00015e8f2e0ff7d93d2b5198fbc32d
Signed-off-by: Robert Lyon <robertl@catalyst.net.nz>
(cherry picked from commit 86711cb835dcd87208170df32e3405cd0467e1cf)

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Mahara Bot (dev-mahara)](https://launchpad.net/~dev-mahara) wrote on 2017-10-30: |  |  | [#4](/mahara/%2Bbug/1719472/comments/4) |
| --- | --- | --- | --- |

Reviewed: <https://reviews.mahara.org/8206>

Committed: <https://git.mahara.org/mahara/mahara/commit/a99dbced72c6fd76d0589bcac6e4af8db330c4bd>

Submitter: Robert Lyon (<email address hidden>)

Branch: 17.04\_STABLE

commit a99dbced72c6fd76d0589bcac6e4af8db330c4bd

Author: Robert Lyon <email address hidden>

Date: Tue Sep 26 11:27:34 2017 +1300

[Bug 1719472](/bugs/1719472): Escape user's display\_name() when supplying to autocomplete

behatnotneeded

Change-Id: I4b342a0d3f00015e8f2e0ff7d93d2b5198fbc32d

Signed-off-by: Robert Lyon <email address hidden>

(cherry picked from commit 86711cb835dcd87208170df32e3405cd0467e1cf)

Reviewed: https://reviews.mahara.org/8206
Committed: https://git.mahara.org/mahara/mahara/commit/a99dbced72c6fd76d0589bcac6e4af8db330c4bd
Submitter: Robert Lyon (robertl@catalyst.net.nz)
Branch: 17.04\_STABLE
commit a99dbced72c6fd76d0589bcac6e4af8db330c4bd
Author: Robert Lyon <robertl@catalyst.net.nz>
Date: Tue Sep 26 11:27:34 2017 +1300
Bug 1719472: Escape user's display\_name() when supplying to autocomplete
behatnotneeded
Change-Id: I4b342a0d3f00015e8f2e0ff7d93d2b5198fbc32d
Signed-off-by: Robert Lyon <robertl@catalyst.net.nz>
(cherry picked from commit 86711cb835dcd87208170df32e3405cd0467e1cf)

[See full activity log](https://bugs.launchpad.net/mahara/%2Bbug/1719472/%2Bactivity)

To post a comment you must [log in](%2Blogin?comments=all).

* [Report a bug](/mahara/%2Bfilebug)

This report contains
**Public Security**
information

Everyone can see this security related information.

You are
[not directly subscribed to this bug's notifications.](/mahara/%2Bbug/1719472/%2Bsubscribe)

Subscribing...

* [Edit bug mail](https://bugs.launchpad.net/mahara/%2Bbug/1719472/%2Bsubscriptions "View and change your subscriptions to this bug")

## Other bug subscribers

[Subscribe someone else](https://bugs.launchpad.net/mahara/%2Bbug/1719472/%2Baddsubscriber "Launchpad will email that person whenever this bugs changes")

## Remote bug watches

Bug watches keep track of this bug in other bug trackers.

[![Launchpad](/@@/launchpad-footer-logo.svg)](https://launchpad.net/)
 •
[Take the tour](https://launchpad.net/%2Btour)
 •
[Read the guide](https://help.launchpad.net/)

© 2004
[Canonical Ltd.](http://canonical.com/)
 •
[Terms of use](https://launchpad.net/legal)
 •
[Data privacy](https://www.ubuntu.com/legal/dataprivacy)
 •
[Contact Launchpad Support](/feedback)
 •
[Blog](http://blog.launchpad.net/)
 •
[Careers](https://canonical.com/careers)
 •
[System status](https://ubuntu.social/%40launchpadstatus)
 •
4d55102
([Get the code!](https://dev.launchpad.net/))


