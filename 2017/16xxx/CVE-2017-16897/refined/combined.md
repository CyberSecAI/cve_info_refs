=== Content from github.com_fb5106b6_20250126_024625.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fauth0%2Fpassport-wsfed-saml2)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fauth0%2Fpassport-wsfed-saml2)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E&source=header-repo&source_repo=auth0%2Fpassport-wsfed-saml2)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[auth0](/auth0)
/
**[passport-wsfed-saml2](/auth0/passport-wsfed-saml2)**
Public

* [Notifications](/login?return_to=%2Fauth0%2Fpassport-wsfed-saml2) You must be signed in to change notification settings
* [Fork
  62](/login?return_to=%2Fauth0%2Fpassport-wsfed-saml2)
* [Star
   49](/login?return_to=%2Fauth0%2Fpassport-wsfed-saml2)

passport strategy for both WS-fed and SAML2 protocol

### License

[MIT license](/auth0/passport-wsfed-saml2/blob/master/LICENSE)

[49
stars](/auth0/passport-wsfed-saml2/stargazers) [62
forks](/auth0/passport-wsfed-saml2/forks) [Branches](/auth0/passport-wsfed-saml2/branches) [Tags](/auth0/passport-wsfed-saml2/tags) [Activity](/auth0/passport-wsfed-saml2/activity)
 [Star](/login?return_to=%2Fauth0%2Fpassport-wsfed-saml2)

 [Notifications](/login?return_to=%2Fauth0%2Fpassport-wsfed-saml2) You must be signed in to change notification settings

* [Code](/auth0/passport-wsfed-saml2)
* [Issues
  21](/auth0/passport-wsfed-saml2/issues)
* [Pull requests
  28](/auth0/passport-wsfed-saml2/pulls)
* [Actions](/auth0/passport-wsfed-saml2/actions)
* [Projects
  0](/auth0/passport-wsfed-saml2/projects)
* [Security](/auth0/passport-wsfed-saml2/security)
* [Insights](/auth0/passport-wsfed-saml2/pulse)

Additional navigation options

* [Code](/auth0/passport-wsfed-saml2)
* [Issues](/auth0/passport-wsfed-saml2/issues)
* [Pull requests](/auth0/passport-wsfed-saml2/pulls)
* [Actions](/auth0/passport-wsfed-saml2/actions)
* [Projects](/auth0/passport-wsfed-saml2/projects)
* [Security](/auth0/passport-wsfed-saml2/security)
* [Insights](/auth0/passport-wsfed-saml2/pulse)

# auth0/passport-wsfed-saml2

    master[Branches](/auth0/passport-wsfed-saml2/branches)[Tags](/auth0/passport-wsfed-saml2/tags)Go to fileCode
## Folders and files

| Name | | Name | Last commit message | Last commit date |
| --- | --- | --- | --- | --- |
| Latest commit History[69 Commits](/auth0/passport-wsfed-saml2/commits/master/) | | |
| [.github/workflows](/auth0/passport-wsfed-saml2/tree/master/.github/workflows "This path skips through empty directories") | | [.github/workflows](/auth0/passport-wsfed-saml2/tree/master/.github/workflows "This path skips through empty directories") |  |  |
| [.vscode](/auth0/passport-wsfed-saml2/tree/master/.vscode ".vscode") | | [.vscode](/auth0/passport-wsfed-saml2/tree/master/.vscode ".vscode") |  |  |
| [examples](/auth0/passport-wsfed-saml2/tree/master/examples "examples") | | [examples](/auth0/passport-wsfed-saml2/tree/master/examples "examples") |  |  |
| [lib/passport-wsfed-saml2](/auth0/passport-wsfed-saml2/tree/master/lib/passport-wsfed-saml2 "This path skips through empty directories") | | [lib/passport-wsfed-saml2](/auth0/passport-wsfed-saml2/tree/master/lib/passport-wsfed-saml2 "This path skips through empty directories") |  |  |
| [test](/auth0/passport-wsfed-saml2/tree/master/test "test") | | [test](/auth0/passport-wsfed-saml2/tree/master/test "test") |  |  |
| [.gitignore](/auth0/passport-wsfed-saml2/blob/master/.gitignore ".gitignore") | | [.gitignore](/auth0/passport-wsfed-saml2/blob/master/.gitignore ".gitignore") |  |  |
| [.jshintrc](/auth0/passport-wsfed-saml2/blob/master/.jshintrc ".jshintrc") | | [.jshintrc](/auth0/passport-wsfed-saml2/blob/master/.jshintrc ".jshintrc") |  |  |
| [.npmignore](/auth0/passport-wsfed-saml2/blob/master/.npmignore ".npmignore") | | [.npmignore](/auth0/passport-wsfed-saml2/blob/master/.npmignore ".npmignore") |  |  |
| [.npmrc](/auth0/passport-wsfed-saml2/blob/master/.npmrc ".npmrc") | | [.npmrc](/auth0/passport-wsfed-saml2/blob/master/.npmrc ".npmrc") |  |  |
| [LICENSE](/auth0/passport-wsfed-saml2/blob/master/LICENSE "LICENSE") | | [LICENSE](/auth0/passport-wsfed-saml2/blob/master/LICENSE "LICENSE") |  |  |
| [README.md](/auth0/passport-wsfed-saml2/blob/master/README.md "README.md") | | [README.md](/auth0/passport-wsfed-saml2/blob/master/README.md "README.md") |  |  |
| [opslevel.yml](/auth0/passport-wsfed-saml2/blob/master/opslevel.yml "opslevel.yml") | | [opslevel.yml](/auth0/passport-wsfed-saml2/blob/master/opslevel.yml "opslevel.yml") |  |  |
| [package.json](/auth0/passport-wsfed-saml2/blob/master/package.json "package.json") | | [package.json](/auth0/passport-wsfed-saml2/blob/master/package.json "package.json") |  |  |
| View all files | | |

## Repository files navigation

* README
* MIT license
* Security
# Passport-wsfed-saml2

[![Build Status](https://github.com/auth0/passport-wsfed-saml2/workflows/Tests/badge.svg)](https://github.com/auth0/passport-wsfed-saml2/workflows/Tests/badge.svg)

This is a ws-federation protocol + SAML2 tokens authentication provider for [Passport](http://passportjs.org/).

The code was originally based on Henri Bergius's [passport-saml](https://github.com/bergie/passport-saml) library.

Passport-wsfed-saml2 has been tested to work with both [Windows Azure Active Directory / Access Control Service](https://www.windowsazure.com/en-us/home/features/identity/) and with [Microsoft Active Directory Federation Services](http://en.wikipedia.org/wiki/Active_Directory_Federation_Services).

## Installation

```
$ npm install passport-wsfed-saml2

```

## Usage

### Configure strategy

This example utilizes a development namespace (auth10-dev) on [Windows Azure Access Control Service](https://www.windowsazure.com/en-us/home/features/identity/) and is using Google as the only identity provider configured for the sample application.

```
passport.use(new wsfedsaml2(
  {
    path: '/login/callback',
    realm: 'urn:node:app',
    homeRealm: '', // optionally specify an identity provider to avoid showing the idp selector
    identityProviderUrl: 'https://auth10-dev.accesscontrol.windows.net/v2/wsfederation',
    cert: 'MIIDFjCCAf6gAwIBAgIQDRRprj9lv5RBvaQdlFltDzANBgkqhkiG9w0BAQUFADAvMS0wKwYDVQQDEyRhdXRoMTAtZGV2LmFjY2Vzc2NvbnRyb2wud2luZG93cy5uZXQwHhcNMTEwOTIxMDMzMjMyWhcNMTIwOTIwMDkzMjMyWjAvMS0wKwYDVQQDEyRhdXRoMTAtZGV2LmFjY2Vzc2NvbnRyb2wud2luZG93cy5uZXQwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCEIAEB/KKT3ehNMy2MQEyJIQ14CnZ8DC2FZgL5Gw3UBSdRb9JinK/gw7yOQtwKfJUqeoZaUSAAdcdbgqwVxOnMBfWiYX7DGlEznSfqYVnjOWjqqjpoe0h6RaOkdWovDtoidmqVV1tWRJFjkj895clPxkLpnqqcycfXtSdZen0SroGyirD2mhMc9ccLbJ3zRnBNjlvpo5zow1zYows09tNC2EhGROL/OS4JNRQnJRICZC+WkA7Igf3xb4btJOzIPYhFiqCGrd/81CHmAyEuNzyc60I5yomDQfZ91Eb5Uk3F7mlfAlYB2aZwDwldLSOlVE8G1E5xFexF/5KyPC4ShNodAgMBAAGjLjAsMAsGA1UdDwQEAwIE8DAdBgNVHQ4EFgQUyYfx/r0czsPgTzitqey+fGMQpkcwDQYJKoZIhvcNAQEFBQADggEBAB5dgQlM3tKS+/cjlvMCPjZH0Iqo/Wxecri3YWi2iVziZ/TQ3dSV+J/iTyduN7rJmFQzTsNERcsgyAwblwnEKXXvlWo8G/+VDIMh3zVPNQFKns5WPkfkhoSVlnZPTQ8zdXAcWgDXbCgvdqIPozdgL+4l0W0XVL1ugA4/hmMXh4TyNd9Qj7MWvlmwVjevpSqN4wG735jAZFHb/L/vvc91uKqP+JvLNj8tPFVxatzi56X1V8jBM61Hx1Z9D0RCDjtmcQVysVEylW9O6mNy6ZrhLm0q5yecWudfBbTKDqRoCHQRjrMU2c5q/ZFDtgjLim7FaNxFbgTyjeRCPclEhfemYVg='
  },
  function(profile, done) {
    findByEmail(profile.email, function(err, user) {
      if (err) {
        return done(err);
      }
      return done(null, user);
    });
  })
));
```

### Provide the authentication callback

You need to provide a route corresponding to the `path` configuration parameter given to the strategy:

```
app.post('/login/callback',
  passport.authenticate('wsfed-saml2', { failureRedirect: '/', failureFlash: true }),
  function(req, res) {
    res.redirect('/');
  }
);
```

### Jwt

Although this started as wsfed&saml we added support for wsfed&jwt. Usage is

```
passport.use(new wsfedsaml2(
  {
    jwt: {
      //same options than node-jsonwebtoken
      algorithm: 'RS256'
    },
    cert: 'MIIDFjCCAf6gAwIBAgIQDRRprj9lv5RBvaQdlFltDzANBgkqhkiG9w0BAQUFADAvMS0wKwYDVQQDEyRhdXRoMTAtZGV2LmFjY2Vzc2NvbnRyb2wud2luZG93cy5uZXQwHhcNMTEwOTIxMDMzMjMyWhcNMTIwOTIwMDkzMjMyWjAvMS0wKwYDVQQDEyRhdXRoMTAtZGV2LmFjY2Vzc2NvbnRyb2wud2luZG93cy5uZXQwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCEIAEB/KKT3ehNMy2MQEyJIQ14CnZ8DC2FZgL5Gw3UBSdRb9JinK/gw7yOQtwKfJUqeoZaUSAAdcdbgqwVxOnMBfWiYX7DGlEznSfqYVnjOWjqqjpoe0h6RaOkdWovDtoidmqVV1tWRJFjkj895clPxkLpnqqcycfXtSdZen0SroGyirD2mhMc9ccLbJ3zRnBNjlvpo5zow1zYows09tNC2EhGROL/OS4JNRQnJRICZC+WkA7Igf3xb4btJOzIPYhFiqCGrd/81CHmAyEuNzyc60I5yomDQfZ91Eb5Uk3F7mlfAlYB2aZwDwldLSOlVE8G1E5xFexF/5KyPC4ShNodAgMBAAGjLjAsMAsGA1UdDwQEAwIE8DAdBgNVHQ4EFgQUyYfx/r0czsPgTzitqey+fGMQpkcwDQYJKoZIhvcNAQEFBQADggEBAB5dgQlM3tKS+/cjlvMCPjZH0Iqo/Wxecri3YWi2iVziZ/TQ3dSV+J/iTyduN7rJmFQzTsNERcsgyAwblwnEKXXvlWo8G/+VDIMh3zVPNQFKns5WPkfkhoSVlnZPTQ8zdXAcWgDXbCgvdqIPozdgL+4l0W0XVL1ugA4/hmMXh4TyNd9Qj7MWvlmwVjevpSqN4wG735jAZFHb/L/vvc91uKqP+JvLNj8tPFVxatzi56X1V8jBM61Hx1Z9D0RCDjtmcQVysVEylW9O6mNy6ZrhLm0q5yecWudfBbTKDqRoCHQRjrMU2c5q/ZFDtgjLim7FaNxFbgTyjeRCPclEhfemYVg='
  },
  function(profile, done) {
    findByEmail(profile.email, function(err, user) {
      if (err) {
        return done(err);
      }
      return done(null, user);
    });
  })
));
```

### Configure strategy for ADFS (WS-Fed)

This example utilizes a strategy with ADFS using WS-Fed.

```
passport.use('wsfed-saml2', new wsfedsaml2({
	// ADFS RP identifier
	realm: 'urn:node:wsfedapp',
	identityProviderUrl: 'https://my-adfs/adfs/ls',
	// ADFS token signing certificate
	thumbprint: '5D27....D27E'
	// or cert: fs.readFileSync("adfs_signing_key.cer")
}, function (profile, done) {
 // ...
}));
```

### Configure strategy for ADFS (SAMLp)

This example utilizes a strategy using SAMLp and RP token encryption.

```
passport.use('wsfed-saml2', new wsfedsaml2({
	// ADFS RP identifier
	realm: 'urn:node:samlapp',
	identityProviderUrl: 'https://my-adfs/adfs/ls',
    // ADFS token signing certificate
    thumbprint: '5D27...D27E',
	// or cert: fs.readFileSync("adfs_signing_key.cer")
    protocol: "samlp",
	// This is the private key (use case where ADFS
	// is configured for RP token encryption)
    decryptionKey: fs.readFileSync("server.key")
}, function (profile, done) {
 // ...
}));
```

## Issue Reporting

If you have found a bug or if you have a feature request, please report them at this repository issues section. Please do not report security vulnerabilities on the public GitHub issue tracker. The [Responsible Disclosure Program](https://auth0.com/whitehat) details the procedure for disclosing security issues.

## Security Notice

The [Security Notice](/auth0/passport-wsfed-saml2/blob/master/SECURITY-NOTICE.md) lists the version that is vulnerable and the actions that are required to upgrade to the latest version.

## Author

[Auth0](/auth0/passport-wsfed-saml2/blob/master/auth0.com)

## License

This project is licensed under the MIT license. See the [LICENSE](/auth0/passport-wsfed-saml2/blob/master/LICENSE) file for more info.

## About

passport strategy for both WS-fed and SAML2 protocol

### Resources

[Readme](#readme-ov-file)
### License

[MIT license](#MIT-1-ov-file)
### Security policy

[Security policy](#security-ov-file)

[Activity](/auth0/passport-wsfed-saml2/activity)
[Custom properties](/auth0/passport-wsfed-saml2/custom-properties)
### Stars

[**49**
stars](/auth0/passport-wsfed-saml2/stargazers)
### Watchers

[**89**
watching](/auth0/passport-wsfed-saml2/watchers)
### Forks

[**62**
forks](/auth0/passport-wsfed-saml2/forks)
[Report repository](/contact/report-content?content_url=https%3A%2F%2Fgithub.com%2Fauth0%2Fpassport-wsfed-saml2&report=auth0+%28user%29)

## [Releases 10](/auth0/passport-wsfed-saml2/releases)

[Update .npmignore
Latest

Jun 16, 2021](/auth0/passport-wsfed-saml2/releases/tag/v4.5.1)
[+ 9 releases](/auth0/passport-wsfed-saml2/releases)

## [Packages 0](/orgs/auth0/packages?repo_name=passport-wsfed-saml2)

No packages published

## [Contributors 30](/auth0/passport-wsfed-saml2/graphs/contributors)

[+ 16 contributors](/auth0/passport-wsfed-saml2/graphs/contributors)

## Languages

* [JavaScript
  99.5%](/auth0/passport-wsfed-saml2/search?l=javascript)
* [EJS
  0.5%](/auth0/passport-wsfed-saml2/search?l=ejs)

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from auth0.com_28e05727_20250124_182215.html ===
[Skip to main content](#maincontent)​[Articles](/docs/articles)[Quickstarts](/docs/quickstarts)[Auth0 APIs](/docs/api)[SDKs](/docs/libraries)[Contact sales](https://auth0.com/get-started?place=header&type=button&text=talk%20to%20sales) Log inSign up

---

​[Articles](/docs/articles)[Quickstarts](/docs/quickstarts)[Auth0 APIs](/docs/api)[SDKs](/docs/libraries)[Contact sales](https://auth0.com/get-started?place=header&type=button&text=talk%20to%20sales) Log inSign up

1. Main Menu
[###### Secure](/docs/secure)

Protect Your Application

* [Application Credentials](/docs/secure/application-credentials "Application Credentials")
* [Attack Protection](/docs/secure/attack-protection "Attack Protection")
* [Continuous Session Protection](/docs/secure/continuous-session-protection "Continuous Session Protection")
* [Highly Regulated Identity](/docs/secure/highly-regulated-identity "Highly Regulated Identity")
* [Multi-Factor Authentication](/docs/secure/multi-factor-authentication "Multi-Factor Authentication")
* [Security Center](/docs/secure/security-center "Security Center")
* [Security Guidance](/docs/secure/security-guidance "Security Guidance")
* [General Security Tips](/docs/secure/security-guidance/tips "General Security Tips")
* [Security Bulletins](/docs/secure/security-guidance/security-bulletins "Security Bulletins")
* [CVE-2022-23539, CVE-2022-23541, CVE-2022-23540: Security Update for jsonwebtoken](/docs/secure/security-guidance/security-bulletins/2022-12-21-jsonwebtoken "CVE-2022-23539, CVE-2022-23541, CVE-2022-23540: Security Update for jsonwebtoken")
* [CVE-2022-23505: Security Update for passport-wsfed-saml2 Library](/docs/secure/security-guidance/security-bulletins/cve-2022-23505 "CVE-2022-23505: Security Update for passport-wsfed-saml2 Library")
* [CVE-2022-24794: Security Update for Express OpenID Connect Library](/docs/secure/security-guidance/security-bulletins/cve-2022-24794 "CVE-2022-24794: Security Update for Express OpenID Connect Library")
* [CVE-2021-43812: Security Update for Next.js Auth0 Library](/docs/secure/security-guidance/security-bulletins/cve-2021-43812 "CVE-2021-43812: Security Update for Next.js Auth0 Library")
* [CVE-2021-41246: Security Update for Express OpenID Connect Library](/docs/secure/security-guidance/security-bulletins/cve-2021-41246 "CVE-2021-41246: Security Update for Express OpenID Connect Library")
* [CVE-2021-32702: Security Update for Auth0 Next.js Library](/docs/secure/security-guidance/security-bulletins/cve-2021-32702 "CVE-2021-32702: Security Update for Auth0 Next.js Library")
* [CVE-2021-32641: Security Update for Auth0 Lock Library](/docs/secure/security-guidance/security-bulletins/cve-2021-32641 "CVE-2021-32641: Security Update for Auth0 Lock Library")
* [CVE 2020-15259: Security Update for ad-ldap-connector](/docs/secure/security-guidance/security-bulletins/cve-2020-15259 "CVE 2020-15259: Security Update for ad-ldap-connector")
* [CVE-2020-15240: Security Update for omniauth-auth0 JWT Validation](/docs/secure/security-guidance/security-bulletins/cve-2020-15240 "CVE-2020-15240: Security Update for omniauth-auth0 JWT Validation")
* [CVE-2020-15125: Security Update for node-auth0 Library](/docs/secure/security-guidance/security-bulletins/cve-2020-15125 "CVE-2020-15125: Security Update for node-auth0 Library")
* [CVE-2020-15119: Security Update for Auth0 Lock Library](/docs/secure/security-guidance/security-bulletins/cve-2020-15119 "CVE-2020-15119: Security Update for Auth0 Lock Library")
* [CVE-2020-15084: Security Update for express-jwt Library](/docs/secure/security-guidance/security-bulletins/cve-2020-15084 "CVE-2020-15084: Security Update for express-jwt Library")
* [CVE-2020-5391, CVE-2020-5392, CVE-2020-6753, CVE-2020-7948, CVE-2020-7947: Security Update for WordPress Plugin for Auth0](/docs/secure/security-guidance/security-bulletins/2020-03-31-wpauth0 "CVE-2020-5391, CVE-2020-5392, CVE-2020-6753, CVE-2020-7948, CVE-2020-7947: Security Update for WordPress Plugin for Auth0")
* [CVE-2020-5263: Security Update for auth0.js Library](/docs/secure/security-guidance/security-bulletins/cve-2020-5263 "CVE-2020-5263: Security Update for auth0.js Library")
* [CVE-2019-20174: Security Update for Auth0 Lock Library](/docs/secure/security-guidance/security-bulletins/cve-2019-20174 "CVE-2019-20174: Security Update for Auth0 Lock Library")
* [CVE-2019-16929: Security Vulnerability in auth0.net](/docs/secure/security-guidance/security-bulletins/cve-2019-16929 "CVE-2019-16929: Security Vulnerability in auth0.net")
* [CVE-2019-13483: Security Vulnerability in Passport-SharePoint](/docs/secure/security-guidance/security-bulletins/cve-2019-13483 "CVE-2019-13483: Security Vulnerability in Passport-SharePoint")
* [CVE-2019-7644: Security Vulnerability in Auth0-WCF-Service-JWT](/docs/secure/security-guidance/security-bulletins/cve-2019-7644 "CVE-2019-7644: Security Vulnerability in Auth0-WCF-Service-JWT")
* [CVE-2019-20173: Security Update for WordPress Plugin for Auth0 wp-auth0](/docs/secure/security-guidance/security-bulletins/cve-2019-20173 "CVE-2019-20173: Security Update for WordPress Plugin for Auth0 wp-auth0")
* [CVE-2018-15121: Security Vulnerability in auth0-aspnet and auth0-aspnet-owin](/docs/secure/security-guidance/security-bulletins/cve-2018-15121 "CVE-2018-15121: Security Vulnerability in auth0-aspnet and auth0-aspnet-owin")
* [CVE-2018-11537: Security Update for angular-jwt Allow List Bypass](/docs/secure/security-guidance/security-bulletins/cve-2018-11537 "CVE-2018-11537: Security Update for angular-jwt Allow List Bypass")
* [CVE-2018-7307: Security Vulnerability for auth0.js < 9.3](/docs/secure/security-guidance/security-bulletins/cve-2018-7307 "CVE-2018-7307: Security Vulnerability for auth0.js < 9.3")
* [CVE-2018-6874: Security Vulnerability in the Auth0 Authentication Service](/docs/secure/security-guidance/security-bulletins/cve-2018-6874 "CVE-2018-6874: Security Vulnerability in the Auth0 Authentication Service")
* [CVE-2018-6873: Security Vulnerability in the Auth0 Authentication Service](/docs/secure/security-guidance/security-bulletins/cve-2018-6873 "CVE-2018-6873: Security Vulnerability in the Auth0 Authentication Service")
* [CVE-2017-17068: Security Update for auth0.js Popup Callback Vulnerability](/docs/secure/security-guidance/security-bulletins/cve-2017-17068 "CVE-2017-17068: Security Update for auth0.js Popup Callback Vulnerability")
* [CVE-2017-16897: Security Update for passport-wsfed-saml2 Passport Strategy Library](/docs/secure/security-guidance/security-bulletins/cve-2017-16897 "CVE-2017-16897: Security Update for passport-wsfed-saml2 Passport Strategy Library")
* [Auth0 Security Bulletin for Rules](/docs/secure/security-guidance/security-bulletins/2019-01-10-rules "Auth0 Security Bulletin for Rules")
* [Auth0 Security Bulletin for Assigning Scopes Based on Email Address](/docs/secure/security-guidance/security-bulletins/2019-09-05-scopes "Auth0 Security Bulletin for Assigning Scopes Based on Email Address")
* [Data Security](/docs/secure/security-guidance/data-security "Data Security")
* [Prevent Common Cybersecurity Threats](/docs/secure/security-guidance/prevent-threats "Prevent Common Cybersecurity Threats")
* [Incident Response: Using Logs](/docs/secure/security-guidance/incident-response-using-logs "Incident Response: Using Logs")
* [Tokens](/docs/secure/tokens "Tokens")

Compliance

* [Data Privacy and Compliance](/docs/secure/data-privacy-and-compliance "Data Privacy and Compliance")

1. [Docs](/docs)
3. [Secure](/docs/secure)
5. [Security Guidance](/docs/secure/security-guidance)
7. [Security Bulletins](/docs/secure/security-guidance/security-bulletins)
9. [CVE-2017-16897: Security Update for passport-wsfed-saml2 Passport Strategy Library](/docs/secure/security-guidance/security-bulletins/cve-2017-16897)
# CVE-2017-16897: Security Update for passport-wsfed-saml2 Passport Strategy Library

**Published**: December 22, 2017

**CVE number**: CVE-2017-16897

**Credit**: Alan Bishop

## Overview

A vulnerability has been discovered in the [passport-wsfed-saml2 library](https://github.com/auth0/passport-wsfed-saml2) affecting versions < `3.0.5`. **passport-wsfed-saml2** is a WS-Federation protocol and SAML2 tokens authentication provider for [Passport.js](http://passportjs.org/).

This vulnerability allows an attacker to impersonate another user and potentially elevate their privileges if the SAML identity provider does not sign the full SAML response, but instead only signs the assertion within the response.

An attacker who successfully exploits this vulnerability could use that response to craft a request with a different **NameIdentifier** in order to log in as a different user. A malicious actor could also perform a privilege escalation attack if authenticating as a specific user with administrative privileges. The attacker must have an existing account, or be able to intercept the encrypted traffic and modify the SAML response on the fly.

This update addresses the vulnerability by avoiding wrapping attacks for **Assertion** and **Response** elements, as well as providing some defensive changes in XPath expressions. An update has also been implemented to improve the method of logging information about the signing of the SAML response.

Patching this vulnerability requires a library upgrade.

## Am I affected?

This vulnerability affected cloud tenants utilizing the **SAMLP Identity Provider Connection** wherein the identity provider either:

* signed SAML response and signed assertion
* did not sign SAML response and signed assertion

No action is required for Auth0 cloud tenants.

The vulnerability scope also extended to those using the [passport-wsfed-saml2 strategy with passport.js](https://github.com/auth0/passport-wsfed-saml2), which requires a library upgrade (see the next section).

## How to fix that?

Developers using the **passport-wsfed-saml2** library need to upgrade to the latest version: `3.0.5`.

Updated packages are available on npm. To ensure delivery of additional bug fixes moving forward, please make sure your `package.json` file is updated to take patch and minor level updates of our libraries.

```
{
  "dependencies": {
    "passport-wsfed-saml2": "^3.0.5"
  }
}
```

Was this helpful?

Yes /No
### Will this update impact my users?

No. This fix patches the library that your application runs, but will not impact your users, their current state, or any existing sessions.

Was this article helpful?

Yes No

Developers

* [Developer Hub](https://developer.auth0.com/resources)
* [Code Samples and Guides](https://developer.auth0.com/resources/code-samples)
* [Blog posts](https://auth0.com/blog/developers/)
* [Videos](https://auth0.com/docs/videos)
* [Identity Unlocked - Podcasts](https://identityunlocked.auth0.com/public/49/Identity%2C-Unlocked.--bed7fada)
* [Zero Index Newsletter](https://developer.auth0.com/newsletter)

Documentation

* [Articles](https://auth0.com/docs/articles)
* [Quickstarts](https://auth0.com/docs/quickstarts)
* [APIs](https://auth0.com/docs/api)
* [SDK Libraries](https://auth0.com/docs/libraries)
* [Blog](https://auth0.com/blog/)
* [Reports](https://auth0.com/resources/ebooks)
* [Webinars](https://auth0.com/resources/webinars)

Get Involved

* [Forum](https://community.auth0.com/)
* [Events](https://developer.auth0.com/events)
* [Ambassador Program](https://auth0.com/ambassador-program)
* [Auth0 Research Program](https://auth0.com/research-program)

Company

* [Our Customers](https://auth0.com/customers)
* [Compliance - Ensuring privacy and security](https://auth0.com/security)
* [Partners](https://auth0.com/partners)
* [Careers We're hiring!](https://www.okta.com/company/careers/)
* [Okta + Auth0](https://www.okta.com/okta-and-auth0/)

Support Center

* [Community](https://community.auth0.com/)
* [Support](https://support.auth0.com/)
* [Help](https://community.auth0.com/c/help/6)
* [FAQs](https://community.auth0.com/c/faq/42)
* [Auth0 Marketplace](https://marketplace.auth0.com)

Learning

* [Learn](https://auth0.com/learn)
* [Intro to IAM (CIAM)](https://auth0.com/intro-to-iam)
* [Blog](https://auth0.com/blog/)

Platform

* [Access Management](https://auth0.com/platform/access-management)
* [Extensibility](https://auth0.com/platform/extensibility)
* [Security](https://auth0.com/platform/login-security)
* [User Management](https://auth0.com/platform/user-management)
* [Authentication](https://auth0.com/platform/authentication)

Features

* [Universal Login](https://auth0.com/features/universal-login)
* [Single Sign On](https://auth0.com/features/single-sign-on)
* [Multifactor Authentication](https://auth0.com/features/multifactor-authentication)
* [Actions](https://auth0.com/features/actions)
* [Machine to Machine](https://auth0.com/features/machine-to-machine)
* [Passwordless](https://auth0.com/features/passwordless)
* [Breached Passwords](https://auth0.com/features/breached-passwords)

© 2025 Okta, Inc. All Rights Reserved.

[Status](https://status.auth0.com) • [Legal](https://www.okta.com/agreements/) • [Privacy](https://auth0.com/privacy) • [Terms](https://auth0.com/web-terms) • [Your Privacy Choices](https://auth0.com/your-privacy-choices)![](https://cdn.auth0.com/website/footer/ccpa.svg)[Status](https://status.auth0.com) • [Legal](https://www.okta.com/agreements/) • [Privacy](https://auth0.com/privacy) • [Terms](https://auth0.com/web-terms) • [Your Privacy Choices](https://auth0.com/your-privacy-choices)![](https://cdn.auth0.com/website/footer/ccpa.svg)
