=== Content from lists.gnu.org_41714e0a_20250125_050411.html ===


| | **chicken-announce** | | --- | |
| --- | --- |

[[Top](../)][[All Lists](/archive/html)]

[Advanced](/archive/cgi-bin/namazu.cgi?idxname=chicken-announce)

---

[Date Prev][[Date Next](msg00001.html)][Thread Prev][[Thread Next](msg00001.html)][[Date Index](index.html#00000)][[Thread Index](threads.html#00000)]

## [Chicken-announce] [SECURITY] Unchecked malloc size in "external" SRFI-4

---

| **From**: | Peter Bex |
| --- | --- |

| **Subject**: | [Chicken-announce] [SECURITY] Unchecked malloc size in "external" SRFI-4 vector constructors |
| **Date**: | Wed, 15 Mar 2017 20:44:59 +0100 |
| **User-agent**: | Mutt/1.5.23 (2014-03-12) |

---

```
Hi all,

Our user "Lemonboy" has found a vulnerability in CHICKEN's SRFI-4
constructors, when using a nonstandard extension; the "NONGC" argument
to make-[su]{8,16,32}vector.  This argument will allocate a uniform
bytevector in unmanaged memory (not subject to garbage collection),
by using malloc().

The range of the size argument would not be checked, which means a
negative size could end up being passed to malloc(), resulting in a
segfault and potential buffer overruns.

Constructor calls to allocate SRFI-4 vectors in managed memory are not
affected.

This issue has been fixed in master by commit e792fd8cc, which can be
found here in patch form:
<https://code.call-cc.org/cgi-bin/gitweb.cgi?p=chicken-core.git;a=commitdiff;h=68c4e537a29d3f878016e0144c42d0e7ae5d41b4>

A simple workaround would be to always check the range of the input to
be between 0 and 2^30 for 8-bit vectors, 2^29 for 16-bit vectors or 2^28
for 32-bit vectors before passing it on to the constructor.

Many thanks to Lemonboy for finding this issue and proposing an initial
patch.

Regards,
The CHICKEN Team

```

**[![Attachment:](/icons/generic.png)](pgpzVXn6yQcxR.pgp)
[signature.asc](pgpzVXn6yQcxR.pgp)**

*Description:* Digital signature

---

reply via email to

---

| [Prev in Thread] | **Current Thread** | [[Next in Thread](msg00001.html)] |
| --- | --- | --- |

* **[Chicken-announce] [SECURITY] Unchecked malloc size in "external" SRFI-4 vector constructors**,
  *Peter Bex*Â **<=**
  + **[Re: [Chicken-announce] [SECURITY] Unchecked malloc size in "external" SRFI-4 vector constructors](msg00001.html)**, *Peter Bex*, 2017/03/16

---

* Next by Date:
  **[Re: [Chicken-announce] [SECURITY] Unchecked malloc size in "external" SRFI-4 vector constructors](msg00001.html)**
* Next by thread:
  **[Re: [Chicken-announce] [SECURITY] Unchecked malloc size in "external" SRFI-4 vector constructors](msg00001.html)**
* Index(es):
  + [**Date**](index.html#00000)
  + [**Thread**](threads.html#00000)


