=== Content from cveform.mitre.org_c3616b63_20250126_030637.html ===


[![CVE logo](Content/cveLogoR.svg)](https://cve.org/)

[CVE Records
![CVE Record search](Content/search_icon.png)](https://cve.mitre.org/cve/search_cve_list.html)

[Search CVE Records](https://cve.mitre.org/cve/search_cve_list.html)

## Submit a CVE Request

\* Required

![errors](Content/exclamation.jpg)

\* Select a request type

- Please choose an action -
Report Vulnerability/Request CVE ID
Notify CVE about a publication
Request an update to an existing CVE Entry
Request information on the CVE Numbering Authority (CNA) Program
Other

![errors](Content/exclamation.jpg)

\* Enter your e-mail address

![alert](Content/info.jpg)

IMPORTANT: Please add cve-request@mitre.org and cve@mitre.org as
safe senders in your email client before completing this form.

Enter a PGP Key (to encrypt)

Processing....

#### Legal

* [Terms of Use](https://cve.org/Legal/TermsOfUse)
* [Privacy Policy](https://cve.org/Legal/PrivacyPolicy)

#### Media

* [News](https://cve.org/Media/News)
* [Events](https://cve.org/Media/Events)
* [Sign up for e-newsletter](https://cve.mitre.org/news/newsletter.html)

##### Social Media

[github

![](Content/github.png)](https://github.com/CVEProject)
[linkedin

![](Content/linkedin.png)](https://www.linkedin.com/showcase/cve-cwe-capec)
[youtube

![](Content/youtube.png)](https://www.youtube.com/channel/UCUHd2XFDsKH8kjMZQaSKpDQ/)
[twitter for CVE New

![](Content/twitter.png)
New CVE Records](https://twitter.com/CVEnew/)
[twitter for CVE announce

![](Content/twitter.png)
 CVE Announce](https://twitter.com/CVEannounce/)

#### Contact

* [CVE Program Support](https://cveform.mitre.org)
* [CNA](https://cve.org/PartnerInformation/ListofPartners)
* [CVE Website Support](https://cveform.mitre.org)

Use of the CVE® List and the associated references from this website are subject to the
[terms of use](https://cve.org/Legal/TermsOfUse). CVE is sponsored by the
[U.S. Department of Homeland Security (DHS)](https://www.dhs.gov/)
 [Cybersecurity and Infrastructure Security Agency (CISA)](https://www.dhs.gov/cisa/cybersecurity-division/). Copyright © 1999-2023,
[The MITRE Corporation](https://www.mitre.org/). CVE and the CVE logo are registered trademarks of The MITRE Corporation.

×
#### Vulnerability Information

Vulnerability Type

CWE-ID

Definition

Buffer Overflow

[CWE-119](http://cwe.mitre.org/data/definitions/119.html)

The software performs operations on a memory buffer, but it can read from or write to a memory location that is outside of the intended boundary of the buffer.

Cross Site Scripting (XSS)

[CWE-79](http://cwe.mitre.org/data/definitions/79.html)

The software does not neutralize or incorrectly neutralizes user-controllable input before it is placed in output that is used as a web page that is served to other users.

SQL Injection

[CWE-89](http://cwe.mitre.org/data/definitions/89.html)

The software constructs all or part of an SQL command using externally-influenced input from an upstream component, but it does not neutralize or incorrectly neutralizes special elements that could modify the intended SQL command when it is sent to a downstream component.

Directory Traversal

[CWE-22](http://cwe.mitre.org/data/definitions/22.html)

The software uses external input to construct a pathname that is intended to identify a file or directory that is located underneath a restricted parent directory, but the software does not properly neutralize special elements within the pathname that can cause the pathname to resolve to a location that is outside of the restricted directory.

XML External Entity (XXE)

[CWE-611](http://cwe.mitre.org/data/definitions/611.html)

The software processes an XML document that can contain XML entities with URIs that resolve to documents outside of the intended sphere of control, causing the product to embed incorrect documents into its output.

Insecure Permissions

[CWE-276](http://cwe.mitre.org/data/definitions/276.html)

The software, upon installation, sets incorrect permissions for an object that exposes it to an unintended actor.

Incorrect Access Control

[CWE-284](http://cwe.mitre.org/data/definitions/284.html)

The software does not restrict or incorrectly restricts access to a resource from an unauthorized actor.

Integer Overflow

[CWE-190](http://cwe.mitre.org/data/definitions/190.html)

The software performs a calculation that can produce an integer overflow or wraparound, when the logic assumes that the resulting value will always be larger than the original value. This can introduce other weaknesses when the calculation is used for resource management or execution control.

Cross Site Request Forgery (CSRF)

[CWE-352](http://cwe.mitre.org/data/definitions/352.html)

The web application does not, or can not, sufficiently verify whether a well-formed, valid, consistent request was intentionally provided by the user who submitted the request.

Missing SSL certification verification

[CWE-599](http://cwe.mitre.org/data/definitions/599.html)

The software uses OpenSSL and trusts or uses a certificate without using the SSL\_get\_verify\_result() function to ensure that the certificate satisfies all necessary security requirements.

Other or Unknown

N/A

The software contains a mistake other than above which can be directly used by a hacker to gain access to a system or network.

×
#### Other Vulnerability Information

You can find more information at [cwe.mitre.org](http://cwe.mitre.org)

* Algorithm complexity
* Array index error
* Auth bypass using cookie
* Buffer Overflow
* Cross-Site Request Forgery (CSRF)
* Cross-Site Scripting (XSS)
* Directory Traversal
* Double free
* Eval injection
* File Upload
* Format String
* HTTP Response Splitting

* HTTP Request Splitting
* Incomplete blacklist
* Integer Overflow
* Integer Signedness
* Memory Leak
* Shell Metacharacter Injectoin
* Open Redirect
* Redirect without Exit
* Path Disclosure
* Insecure Permissions
* PHP remote file inclusion
* Session Fixation

* SQL Injection
* Symbolic Link Following
* Untrusted Search Path
* Unquoted Windows search path
* Use after free
* Default user/password
* Large or infinite loop
* Exposed insecure/unsafe method in ActiveX control
* Generation of insufficiently random numbers
* XML Extneral Entity (XXE)
* Incorrect Access Control
* Missing SSL certificate validation

×
#### Vulnerability Information

Attack Type

Definition

Remote

The vulnerability can be exploited through a network. The attacker may be either on the adjacent or remote network.

Local

To exploit the vulnerability, the attacker needs to be logged into the operating system on a local machine or a guest operating system.

Physical

The attacker needs to be located near the victim or have physical access to the vulnerable system to exploit the vulnerability. Examples include touching a workstation keyboard or USB device, "shoulder surfing" to see a workstation's display, and touching the screen of a mobile device.

Context-dependent

The type of access needed to exploit the vulnerability is dependent on how the vulnerable product is used. This is most often used for libraries.

×
#### Vulnerability Information

Update Type

Definition

Duplicate

More than one CVE ID has been assigned to a single vulnerability.

Rejection

Vendor rejects the assignment of a particular CVE ID.

Split/Merge

A single CVE Entry should be split into two or more CVE Entries OR Two or more existing CVE Entries should be merged into a single CVE Entry.

Update Description

Update the description in an existing CVE Entry.

Update References

Add, remove, or change a reference for an existing CVE Entry.

Other

Any request related to an existing CVE Entry that does not fall within one of the other categories.



=== Content from github.com_a4bc6d0a_20250124_193511.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Ftorvalds%2Flinux%2Fcommit%2F4c03b862b12f980456f9de92db6d508a4999b788)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Ftorvalds%2Flinux%2Fcommit%2F4c03b862b12f980456f9de92db6d508a4999b788)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fcommit_fragments%2Frepo_layout&source=header-repo&source_repo=torvalds%2Flinux)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[torvalds](/torvalds)
/
**[linux](/torvalds/linux)**
Public

* [Notifications](/login?return_to=%2Ftorvalds%2Flinux) You must be signed in to change notification settings
* [Fork
  54.9k](/login?return_to=%2Ftorvalds%2Flinux)
* [Star
   186k](/login?return_to=%2Ftorvalds%2Flinux)

* [Code](/torvalds/linux)
* [Pull requests
  437](/torvalds/linux/pulls)
* [Actions](/torvalds/linux/actions)
* [Projects
  0](/torvalds/linux/projects)
* [Security](/torvalds/linux/security)
* [Insights](/torvalds/linux/pulse)

Additional navigation options

* [Code](/torvalds/linux)
* [Pull requests](/torvalds/linux/pulls)
* [Actions](/torvalds/linux/actions)
* [Projects](/torvalds/linux/projects)
* [Security](/torvalds/linux/security)
* [Insights](/torvalds/linux/pulse)

## Commit

[Permalink](/torvalds/linux/commit/4c03b862b12f980456f9de92db6d508a4999b788)

This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository.

irda: Fix lockdep annotations in hashbin\_delete().

[Browse files](/torvalds/linux/tree/4c03b862b12f980456f9de92db6d508a4999b788)
Browse the repository at this point in the history

```
A nested lock depth was added to the hasbin_delete() code but it
doesn't actually work some well and results in tons of lockdep splats.

Fix the code instead to properly drop the lock around the operation
and just keep peeking the head of the hashbin queue.

Reported-by: Dmitry Vyukov <dvyukov@google.com>
Tested-by: Dmitry Vyukov <dvyukov@google.com>
Signed-off-by: David S. Miller <davem@davemloft.net>
```

* Loading branch information

[![@davem330](https://avatars.githubusercontent.com/u/1053866?s=40&v=4)](/davem330)

[davem330](/torvalds/linux/commits?author=davem330 "View all commits by davem330")
committed
Feb 17, 2017

1 parent
[22f0708](/torvalds/linux/commit/22f0708a718daea5e79de2d29b4829de016a4ff4)

commit 4c03b86

Showing
**1 changed file**
with
**16 additions**
and
**18 deletions**.

* Whitespace
* Ignore whitespace

* Split
* Unified

## There are no files selected for viewing

34 changes: 16 additions & 18 deletions

34
[net/irda/irqueue.c](#diff-670afe7df12a7efdcb9c17cefd14cc1d930820709658ef36a8679705f815f5a6 "net/irda/irqueue.c")

Show comments

[View file](/torvalds/linux/blob/4c03b862b12f980456f9de92db6d508a4999b788/net/irda/irqueue.c)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -383,9 +383,6 @@ EXPORT\_SYMBOL(hashbin\_new); |
|  |  | \* for deallocating this structure if it's complex. If not the user can |
|  |  | \* just supply kfree, which should take care of the job. |
|  |  | \*/ |
|  |  | #ifdef CONFIG\_LOCKDEP |
|  |  | static int hashbin\_lock\_depth = 0; |
|  |  | #endif |
|  |  | int hashbin\_delete( hashbin\_t\* hashbin, FREE\_FUNC free\_func) |
|  |  | { |
|  |  | irda\_queue\_t\* queue; |
| Expand All | | @@ -396,22 +393,27 @@ int hashbin\_delete( hashbin\_t\* hashbin, FREE\_FUNC free\_func) |
|  |  | IRDA\_ASSERT(hashbin->magic == HB\_MAGIC, return -1;); |
|  |  |  |
|  |  | /\* Synchronize \*/ |
|  |  | if ( hashbin->hb\_type & HB\_LOCK ) { |
|  |  | spin\_lock\_irqsave\_nested(&hashbin->hb\_spinlock, flags, |
|  |  | hashbin\_lock\_depth++); |
|  |  | } |
|  |  | if (hashbin->hb\_type & HB\_LOCK) |
|  |  | spin\_lock\_irqsave(&hashbin->hb\_spinlock, flags); |
|  |  |  |
|  |  | /\* |
|  |  | \* Free the entries in the hashbin, TODO: use hashbin\_clear when |
|  |  | \* it has been shown to work |
|  |  | \*/ |
|  |  | for (i = 0; i < HASHBIN\_SIZE; i ++ ) { |
|  |  | queue = dequeue\_first((irda\_queue\_t\*\*) &hashbin->hb\_queue[i]); |
|  |  | while (queue ) { |
|  |  | if (free\_func) |
|  |  | (\*free\_func)(queue); |
|  |  | queue = dequeue\_first( |
|  |  | (irda\_queue\_t\*\*) &hashbin->hb\_queue[i]); |
|  |  | while (1) { |
|  |  | queue = dequeue\_first((irda\_queue\_t\*\*) &hashbin->hb\_queue[i]); |
|  |  |  |
|  |  | if (!queue) |
|  |  | break; |
|  |  |  |
|  |  | if (free\_func) { |
|  |  | if (hashbin->hb\_type & HB\_LOCK) |
|  |  | spin\_unlock\_irqrestore(&hashbin->hb\_spinlock, flags); |
|  |  | free\_func(queue); |
|  |  | if (hashbin->hb\_type & HB\_LOCK) |
|  |  | spin\_lock\_irqsave(&hashbin->hb\_spinlock, flags); |
|  |  | } |
|  |  | } |
|  |  | } |
|  |  |  |
| Expand All | | @@ -420,12 +422,8 @@ int hashbin\_delete( hashbin\_t\* hashbin, FREE\_FUNC free\_func) |
|  |  | hashbin->magic = ~HB\_MAGIC; |
|  |  |  |
|  |  | /\* Release lock \*/ |
|  |  | if ( hashbin->hb\_type & HB\_LOCK) { |
|  |  | if (hashbin->hb\_type & HB\_LOCK) |
|  |  | spin\_unlock\_irqrestore(&hashbin->hb\_spinlock, flags); |
|  |  | #ifdef CONFIG\_LOCKDEP |
|  |  | hashbin\_lock\_depth--; |
|  |  | #endif |
|  |  | } |
|  |  |  |
|  |  | /\* |
|  |  | \* Free the hashbin structure |
| Expand Down | |  |

Toggle all file notes
Toggle all file annotations

### 0 comments on commit `4c03b86`

Please
[sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Ftorvalds%2Flinux%2Fcommit%2F4c03b862b12f980456f9de92db6d508a4999b788) to comment.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from www.kernel.org_37a4f630_20250124_193510.html ===
commit 3737a5f7223464efed3b0a9da2b045dae28d3a53
Author: Greg Kroah-Hartman
Date: Sun Feb 26 11:11:18 2017 +0100
Linux 4.9.13
commit d004006055974a976841c4f95e8c25ca7b5b38d5
Author: Brian Foster
Date: Thu Feb 16 17:19:12 2017 -0800
xfs: clear delalloc and cache on buffered write failure
commit fa7f138ac4c70dc00519c124cf7cd4862a0a5b0e upstream.
The buffered write failure handling code in
xfs\_file\_iomap\_end\_delalloc() has a couple minor problems. First, if
written == 0, start\_fsb is not rounded down and it fails to kill off a
delalloc block if the start offset is block unaligned. This results in a
lingering delalloc block and broken delalloc block accounting detected
at unmount time. Fix this by rounding down start\_fsb in the unlikely
event that written == 0.
Second, it is possible for a failed overwrite of a delalloc extent to
leave dirty pagecache around over a hole in the file. This is because is
possible to hit ->iomap\_end() on write failure before the iomap code has
attempted to allocate pagecache, and thus has no need to clean it up. If
the targeted delalloc extent was successfully written by a previous
write, however, then it does still have dirty pages when ->iomap\_end()
punches out the underlying blocks. This ultimately results in writeback
over a hole. To fix this problem, unconditionally punch out the
pagecache from XFS before the associated delalloc range.
Signed-off-by: Brian Foster
Reviewed-by: Christoph Hellwig
Reviewed-by: Darrick J. Wong
Signed-off-by: Darrick J. Wong
Signed-off-by: Greg Kroah-Hartman
commit 57d759622aa76591958f46707edebe20c284b7d2
Author: Michael Schenk
Date: Thu Jan 26 11:25:04 2017 -0600
rtlwifi: rtl\_usb: Fix for URB leaking when doing ifconfig up/down
commit 575ddce0507789bf9830d089557d2199d2f91865 upstream.
In the function rtl\_usb\_start we pre-allocate a certain number of urbs
for RX path but they will not be freed when calling rtl\_usb\_stop. This
results in leaking urbs when doing ifconfig up and down. Eventually,
the system has no available urbs.
Signed-off-by: Michael Schenk
Signed-off-by: Larry Finger
Signed-off-by: Kalle Valo
Signed-off-by: Greg Kroah-Hartman
commit 1cb3de83ab740c17dafe9148c2a5b5ac41a736cf
Author: Tejun Heo
Date: Wed Feb 8 15:19:07 2017 -0500
block: fix double-free in the failure path of cgwb\_bdi\_init()
commit 5f478e4ea5c5560b4e40eb136991a09f9389f331 upstream.
When !CONFIG\_CGROUP\_WRITEBACK, bdi has single bdi\_writeback\_congested
at bdi->wb\_congested. cgwb\_bdi\_init() allocates it with kzalloc() and
doesn't do further initialization. This usually works fine as the
reference count gets bumped to 1 by wb\_init() and the put from
wb\_exit() releases it.
However, when wb\_init() fails, it puts the wb base ref automatically
freeing the wb and the explicit kfree() in cgwb\_bdi\_init() error path
ends up trying to free the same pointer the second time causing a
double-free.
Fix it by explicitly initilizing the refcnt to 1 and putting the base
ref from cgwb\_bdi\_destroy().
Signed-off-by: Tejun Heo
Reported-by: Dmitry Vyukov
Fixes: a13f35e87140 ("writeback: don't embed root bdi\_writeback\_congested in bdi\_writeback")
Signed-off-by: Jens Axboe
Signed-off-by: Greg Kroah-Hartman
commit 62c153f346fe5ef8946103050548707ff294961f
Author: Lv Zheng
Date: Wed Feb 8 11:00:01 2017 +0800
ACPICA: Linuxize: Restore and fix Intel compiler build
commit ffab9188e444854882dbc291500d576d6bad7b7b upstream.
ACPICA commit b59347d0b8b676cb555fe8da5cad08fcd4eeb0d3
The following commit cleans up compiler specific inclusions:
Commit: 9fa1cebdbfff3db8953cebca8ee327d75edefc40
Subject: ACPICA: OSL: Cleanup the inclusion order of the compiler-specific headers
But breaks one thing due to the following old issue:
Buidling Linux kernel with Intel compiler originally depends on acgcc.h
not acintel.h.
So after making Intel compiler build working in ACPICA upstream by
correctly using acintel.h, it becomes unable to build Linux kernel using
Intel compiler as there is no acintel.h in the kernel source tree.
This patch releases acintel.h to Linux kernel and fixes its inclusion in
acenv.h.
Fixes: 9fa1cebdbfff (ACPICA: OSL: Cleanup the inclusion order of the compiler-specific headers)
Link: https://github.com/acpica/acpica/commit/b59347d0
Tested-by: Stepan M Mishura
Signed-off-by: Lv Zheng
Signed-off-by: Rafael J. Wysocki
Signed-off-by: Greg Kroah-Hartman
commit 8f9872be6db939a75a075cd893a47ce5742cee00
Author: Jiri Kosina
Date: Wed Feb 1 21:01:54 2017 +0100
netfilter: nf\_ct\_helper: warn when not applying default helper assignment
commit dfe75ff8ca74f54b0fa5a326a1aa9afa485ed802 upstream.
Commit 3bb398d925 ("netfilter: nf\_ct\_helper: disable automatic helper
assignment") is causing behavior regressions in firewalls, as traffic
handled by conntrack helpers is now by default not passed through even
though it was before due to missing CT targets (which were not necessary
before this commit).
The default had to be switched off due to security reasons [1] [2] and
therefore should stay the way it is, but let's be friendly to firewall
admins and issue a warning the first time we're in situation where packet
would be likely passed through with the old default but we're likely going
to drop it on the floor now.
Rewrite the code a little bit as suggested by Linus, so that we avoid
spaghettiing the code even more -- namely the whole decision making
process regarding helper selection (either automatic or not) is being
separated, so that the whole logic can be simplified and code (condition)
duplication reduced.
[1] https://cansecwest.com/csw12/conntrack-attack.pdf
[2] https://home.regit.org/netfilter-en/secure-use-of-helpers/
Signed-off-by: Jiri Kosina
Signed-off-by: Pablo Neira Ayuso
Signed-off-by: Greg Kroah-Hartman
commit e6bdd8d2fffc0875eb16ec5e08e8230771539073
Author: Thomas Gleixner
Date: Wed Feb 15 11:11:51 2017 +0100
goldfish: Sanitize the broken interrupt handler
commit 6cf18e6927c0b224f972e3042fb85770d63cb9f8 upstream.
This interrupt handler is broken in several ways:
- It loops forever when the op code is not decodeable
- It never returns IRQ\_HANDLED because the only way to exit the loop
returns IRQ\_NONE unconditionally.
The whole concept of this is broken. Creating devices in an interrupt
handler is beyond any point of sanity.
Make it at least behave halfways sane so accidental users do not have to
deal with a hard to debug lockup.
Fixes: e809c22b8fb028 ("goldfish: add the goldfish virtual bus")
Reported-by: Gabriel C
Signed-off-by: Thomas Gleixner
Acked-by: Linus Torvalds
Signed-off-by: Greg Kroah-Hartman
commit 2709c2a1b0165e7b4084077148697175ecd9d2c7
Author: Thomas Gleixner
Date: Wed Feb 15 11:11:50 2017 +0100
x86/platform/goldfish: Prevent unconditional loading
commit 47512cfd0d7a8bd6ab71d01cd89fca19eb2093eb upstream.
The goldfish platform code registers the platform device unconditionally
which causes havoc in several ways if the goldfish\_pdev\_bus driver is
enabled:
- Access to the hardcoded physical memory region, which is either not
available or contains stuff which is completely unrelated.
- Prevents that the interrupt of the serial port can be requested
- In case of a spurious interrupt it goes into a infinite loop in the
interrupt handler of the pdev\_bus driver (which needs to be fixed
seperately).
Add a 'goldfish' command line option to make the registration opt-in when
the platform is compiled in.
I'm seriously grumpy about this engineering trainwreck, which has seven
SOBs from Intel developers for 50 lines of code. And none of them figured
out that this is broken. Impressive fail!
Fixes: ddd70cf93d78 ("goldfish: platform device for x86")
Reported-by: Gabriel C
Signed-off-by: Thomas Gleixner
Acked-by: Linus Torvalds
Signed-off-by: Greg Kroah-Hartman
commit fef3fdf2d83cd0ca3bc0052ab58baab010929434
Author: Johan Hovold
Date: Wed Feb 8 18:53:08 2017 +0100
USB: serial: console: fix uninitialised spinlock
commit 14816b16fa0adac24f82492f18fa62c55acabbbe upstream.
Since commit 4a510969374a ("tty: Make tty\_files\_lock per-tty") a new
tty\_struct spin lock is taken in the tty release path, but the
USB-serial-console hack was never updated hence leaving the lock of its
"fake" tty uninitialised. This was eventually detected by lockdep.
Make sure to initialise the new lock also for the fake tty to address
this regression.
Yes, this code is a mess, but cleaning it up is left for another day.
Fixes: 4a510969374a ("tty: Make tty\_files\_lock per-tty")
Reviewed-by: Greg Kroah-Hartman
Signed-off-by: Johan Hovold
Signed-off-by: Greg Kroah-Hartman
commit 960a38eae80a9e5ba9688c0eb92114f6de028904
Author: Johan Hovold
Date: Thu Jan 12 14:56:09 2017 +0100
USB: serial: ark3116: fix register-accessor error handling
commit 9fef37d7cf170522fb354d6d0ea6de09b9b16678 upstream.
The current implementation failed to detect short transfers, something
which could lead to bits of the uninitialised heap transfer buffer
leaking to user space.
Fixes: 149fc791a452 ("USB: ark3116: Setup some basic infrastructure for new ark3116 driver.")
Fixes: f4c1e8d597d1 ("USB: ark3116: Make existing functions 16450-aware and add close and release functions.")
Reviewed-by: Greg Kroah-Hartman
Signed-off-by: Johan Hovold
Signed-off-by: Greg Kroah-Hartman
commit a2ce74e35d5fd1afb5304b645c3b459c922a2c4a
Author: Johan Hovold
Date: Fri Jan 13 13:21:08 2017 +0100
USB: serial: opticon: fix CTS retrieval at open
commit 2eee05020a0e7ee7c04422cbacdb07859e45dce6 upstream.
The opticon driver used a control request at open to trigger a CTS
status notification to be sent over the bulk-in pipe. When the driver
was converted to using the generic read implementation, an inverted test
prevented this request from being sent, something which could lead to
TIOCMGET reporting an incorrect CTS state.
Reported-by: Dan Carpenter
Fixes: 7a6ee2b02751 ("USB: opticon: switch to generic read implementation")
Reviewed-by: Greg Kroah-Hartman
Signed-off-by: Johan Hovold
Signed-off-by: Greg Kroah-Hartman
commit a1fc6fb5f31edc1b6fb8de092f6ab6fbe967aaa7
Author: Johan Hovold
Date: Thu Jan 12 14:56:21 2017 +0100
USB: serial: spcp8x5: fix modem-status handling
commit 5ed8d41023751bdd3546f2fe4118304357efe8d2 upstream.
Make sure to detect short control transfers and return zero on success
when retrieving the modem status.
This fixes the TIOCMGET implementation which since e1ed212d8593 ("USB:
spcp8x5: add proper modem-status support") has returned TIOCM\_LE on
successful retrieval, and avoids leaking bits from the stack on short
transfers.
This also fixes the carrier-detect implementation which since the above
mentioned commit unconditionally has returned true.
Fixes: e1ed212d8593 ("USB: spcp8x5: add proper modem-status support")
Reviewed-by: Greg Kroah-Hartman
Signed-off-by: Johan Hovold
Signed-off-by: Greg Kroah-Hartman
commit 26805681a45d071ac8df99933d842c1380b7e279
Author: Johan Hovold
Date: Thu Feb 2 17:38:35 2017 +0100
USB: serial: ftdi\_sio: fix line-status over-reporting
commit a6bb1e17a39818b01b55d8e6238b4b5f06d55038 upstream.
FTDI devices use a receive latency timer to periodically empty the
receive buffer and report modem and line status (also when the buffer is
empty).
When a break or error condition is detected the corresponding status
flags will be set on a packet with nonzero data payload and the flags
are not updated until the break is over or further characters are
received.
In order to avoid over-reporting break and error conditions, these flags
must therefore only be processed for packets with payload.
This specifically fixes the case where after an overrun, the error
condition is continuously reported and NULL-characters inserted until
further data is received.
Reported-by: Michael Walle
Fixes: 72fda3ca6fc1 ("USB: serial: ftd\_sio: implement sysrq handling on
break")
Fixes: 166ceb690750 ("USB: ftdi\_sio: clean up line-status handling")
Signed-off-by: Johan Hovold
Signed-off-by: Greg Kroah-Hartman
commit a1510a8c0ded157158be688a54c107aac4291f77
Author: Johan Hovold
Date: Wed Jan 25 15:35:20 2017 +0100
USB: serial: ftdi\_sio: fix extreme low-latency setting
commit c6dce2626606ef16434802989466636bc28c1419 upstream.
Since commit 557aaa7ffab6 ("ft232: support the ASYNC\_LOW\_LATENCY
flag") the FTDI driver has been using a receive latency-timer value of
1 ms instead of the device default of 16 ms.
The latency timer is used to periodically empty a non-full receive
buffer, but a status header is always sent when the timer expires
including when the buffer is empty. This means that a two-byte bulk
message is received every millisecond also for an otherwise idle port as
long as it is open.
Let's restore the pre-2009 behaviour which reduces the rate of the
status messages to 1/16th (e.g. interrupt frequency drops from 1 kHz to
62.5 Hz) by not setting ASYNC\_LOW\_LATENCY by default.
Anyone willing to pay the price for the minimum-latency behaviour should
set the flag explicitly instead using the TIOCSSERIAL ioctl or a tool
such as setserial (e.g. setserial /dev/ttyUSB0 low\_latency).
Note that since commit 0cbd81a9f6ba ("USB: ftdi\_sio: remove
tty->low\_latency") the ASYNC\_LOW\_LATENCY flag has no other effects but
to set a minimal latency timer.
Reported-by: Antoine Aubert
Fixes: 557aaa7ffab6 ("ft232: support the ASYNC\_LOW\_LATENCY flag")
Signed-off-by: Johan Hovold
Signed-off-by: Greg Kroah-Hartman
commit f3d56f7a586e6fdddb9cfae46787492c94add38d
Author: Johan Hovold
Date: Thu Jan 12 14:56:11 2017 +0100
USB: serial: ftdi\_sio: fix modem-status error handling
commit 427c3a95e3e29e65f59d99aaf320d7506f3eed57 upstream.
Make sure to detect short responses when fetching the modem status in
order to avoid parsing uninitialised buffer data and having bits of it
leak to user space.
Note that we still allow for short 1-byte responses.
Fixes: 1da177e4c3f4 ("Linux-2.6.12-rc2")
Reviewed-by: Greg Kroah-Hartman
Signed-off-by: Johan Hovold
Signed-off-by: Greg Kroah-Hartman
commit 4420e0f8fddfade44c399d346dc388dd925eb100
Author: Ken Lin
Date: Sat Feb 4 04:00:24 2017 +0800
USB: serial: cp210x: add new IDs for GE Bx50v3 boards
commit 9a593656def0dc2f6c227851e8e602077267a5f1 upstream.
Add new USB IDs for cp2104/5 devices on Bx50v3 boards due to the design
change.
Signed-off-by: Ken Lin
Signed-off-by: Johan Hovold
Signed-off-by: Greg Kroah-Hartman
commit 308a96c857ccba6aaebfdc4c63045cb2970de0fb
Author: Johan Hovold
Date: Thu Feb 9 12:11:41 2017 +0100
USB: serial: mos7840: fix another NULL-deref at open
commit 5182c2cf2a9bfb7f066ef0bdd2bb6330b94dd74e upstream.
Fix another NULL-pointer dereference at open should a malicious device
lack an interrupt-in endpoint.
Note that the driver has a broken check for an interrupt-in endpoint
which means that an interrupt URB has never even been submitted.
Fixes: 3f5429746d91 ("USB: Moschip 7840 USB-Serial Driver")
Reviewed-by: Greg Kroah-Hartman
Signed-off-by: Johan Hovold
Signed-off-by: Greg Kroah-Hartman
commit 9ab870e7425c224328ec5807ed916d417810b2eb
Author: Javier Martinez Canillas
Date: Mon Jan 2 11:57:20 2017 -0300
tty: serial: msm: Fix module autoload
commit abe81f3b8ed2996e1712d26d38ff6b73f582c616 upstream.
If the driver is built as a module, autoload won't work because the module
alias information is not filled. So user-space can't match the registered
device with the corresponding module.
Export the module alias information using the MODULE\_DEVICE\_TABLE() macro.
Before this patch:
$ modinfo drivers/tty/serial/msm\_serial.ko | grep alias
$
After this patch:
$ modinfo drivers/tty/serial/msm\_serial.ko | grep alias
alias: of:N\*T\*Cqcom,msm-uartdmC\*
alias: of:N\*T\*Cqcom,msm-uartdm
alias: of:N\*T\*Cqcom,msm-uartC\*
alias: of:N\*T\*Cqcom,msm-uart
Signed-off-by: Javier Martinez Canillas
Acked-by: Bjorn Andersson
Cc: stable
Signed-off-by: Greg Kroah-Hartman
Signed-off-by: Greg Kroah-Hartman
commit 1a0e2594ef76fabe28049922c20d19c12aad4881
Author: Maxime Jayat
Date: Tue Feb 21 18:35:51 2017 +0100
net: socket: fix recvmmsg not returning error from sock\_error
[ Upstream commit e623a9e9dec29ae811d11f83d0074ba254aba374 ]
Commit 34b88a68f26a ("net: Fix use after free in the recvmmsg exit path"),
changed the exit path of recvmmsg to always return the datagrams
variable and modified the error paths to set the variable to the error
code returned by recvmsg if necessary.
However in the case sock\_error returned an error, the error code was
then ignored, and recvmmsg returned 0.
Change the error path of recvmmsg to correctly return the error code
of sock\_error.
The bug was triggered by using recvmmsg on a CAN interface which was
not up. Linux 4.6 and later return 0 in this case while earlier
releases returned -ENETDOWN.
Fixes: 34b88a68f26a ("net: Fix use after free in the recvmmsg exit path")
Signed-off-by: Maxime Jayat
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 481aedf869fbf2d4503ca0005dbd68b78422955a
Author: Paolo Abeni
Date: Tue Feb 21 09:33:18 2017 +0100
ip: fix IP\_CHECKSUM handling
[ Upstream commit ca4ef4574f1ee5252e2cd365f8f5d5bafd048f32 ]
The skbs processed by ip\_cmsg\_recv() are not guaranteed to
be linear e.g. when sending UDP packets over loopback with
MSGMORE.
Using csum\_partial() on [potentially] the whole skb len
is dangerous; instead be on the safe side and use skb\_checksum().
Thanks to syzkaller team to detect the issue and provide the
reproducer.
v1 -> v2:
- move the variable declaration in a tighter scope
Fixes: ad6f939ab193 ("ip: Add offset parameter to ip\_cmsg\_recv")
Reported-by: Andrey Konovalov
Signed-off-by: Paolo Abeni
Acked-by: Eric Dumazet
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 7c56012e92b51030b13c4652a9494d422562d5d5
Author: Michael S. Tsirkin
Date: Sun Feb 19 07:17:17 2017 +0200
ptr\_ring: fix race conditions when resizing
[ Upstream commit e71695307114335be1ed912f4a347396c2ed0e69 ]
Resizing currently drops consumer lock. This can cause entries to be
reordered, which isn't good in itself. More importantly, consumer can
detect a false ring empty condition and block forever.
Further, nesting of consumer within producer lock is problematic for
tun, since it produces entries in a BH, which causes a lock order
reversal:
CPU0 CPU1
---- ----
consume:
lock(&(&r->consumer\_lock)->rlock);
resize:
local\_irq\_disable();
lock(&(&r->producer\_lock)->rlock);
lock(&(&r->consumer\_lock)->rlock);
produce:
lock(&(&r->producer\_lock)->rlock);
To fix, nest producer lock within consumer lock during resize,
and keep consumer lock during the whole swap operation.
Reported-by: Dmitry Vyukov
Cc: stable@vger.kernel.org
Cc: "David S. Miller"
Acked-by: Jason Wang
Signed-off-by: Michael S. Tsirkin
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit c2219da51664451149350e47321aa0fcf72a8b8f
Author: David S. Miller
Date: Fri Feb 17 16:19:39 2017 -0500
irda: Fix lockdep annotations in hashbin\_delete().
[ Upstream commit 4c03b862b12f980456f9de92db6d508a4999b788 ]
A nested lock depth was added to the hasbin\_delete() code but it
doesn't actually work some well and results in tons of lockdep splats.
Fix the code instead to properly drop the lock around the operation
and just keep peeking the head of the hashbin queue.
Reported-by: Dmitry Vyukov
Tested-by: Dmitry Vyukov
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit f23fd87e154f2c0fbac2e33c999e388f9baf2714
Author: Paolo Abeni
Date: Fri Feb 17 19:14:27 2017 +0100
vxlan: fix oops in dev\_fill\_metadata\_dst
[ Upstream commit 22f0708a718daea5e79de2d29b4829de016a4ff4 ]
Since the commit 0c1d70af924b ("net: use dst\_cache for vxlan device")
vxlan\_fill\_metadata\_dst() calls vxlan\_get\_route() passing a NULL
dst\_cache pointer, so the latter should explicitly check for
valid dst\_cache ptr. Unfortunately the commit d71785ffc7e7 ("net: add
dst\_cache to ovs vxlan lwtunnel") removed said check.
As a result is possible to trigger a null pointer access calling
vxlan\_fill\_metadata\_dst(), e.g. with:
ovs-vsctl add-br ovs-br0
ovs-vsctl add-port ovs-br0 vxlan0 -- set interface vxlan0 \
type=vxlan options:remote\_ip=192.168.1.1 \
options:key=1234 options:dst\_port=4789 ofport\_request=10
ip address add dev ovs-br0 172.16.1.2/24
ovs-vsctl set Bridge ovs-br0 ipfix=@i -- --id=@i create IPFIX \
targets=\"172.16.1.1:1234\" sampling=1
iperf -c 172.16.1.1 -u -l 1000 -b 10M -t 1 -p 1234
This commit addresses the issue passing to vxlan\_get\_route() the
dst\_cache already available into the lwt info processed by
vxlan\_fill\_metadata\_dst().
Fixes: d71785ffc7e7 ("net: add dst\_cache to ovs vxlan lwtunnel")
Signed-off-by: Paolo Abeni
Acked-by: Jiri Benc
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 171d92a9d915d238e05285ca67faf30f554d7df7
Author: Andrey Konovalov
Date: Thu Feb 16 17:22:46 2017 +0100
dccp: fix freeing skb too early for IPV6\_RECVPKTINFO
[ Upstream commit 5edabca9d4cff7f1f2b68f0bac55ef99d9798ba4 ]
In the current DCCP implementation an skb for a DCCP\_PKT\_REQUEST packet
is forcibly freed via \_\_kfree\_skb in dccp\_rcv\_state\_process if
dccp\_v6\_conn\_request successfully returns.
However, if IPV6\_RECVPKTINFO is set on a socket, the address of the skb
is saved to ireq->pktopts and the ref count for skb is incremented in
dccp\_v6\_conn\_request, so skb is still in use. Nevertheless, it gets freed
in dccp\_rcv\_state\_process.
Fix by calling consume\_skb instead of doing goto discard and therefore
calling \_\_kfree\_skb.
Similar fixes for TCP:
fb7e2399ec17f1004c0e0ccfd17439f8759ede01 [TCP]: skb is unexpectedly freed.
0aea76d35c9651d55bbaf746e7914e5f9ae5a25d tcp: SYN packets are now
simply consumed
Signed-off-by: Andrey Konovalov
Acked-by: Eric Dumazet
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 6c854afc5399dd74cf5eba04ee7ba9ffb9ad5158
Author: Marcus Huewe
Date: Wed Feb 15 01:00:36 2017 +0100
net: neigh: Fix netevent NETEVENT\_DELAY\_PROBE\_TIME\_UPDATE notification
[ Upstream commit 7627ae6030f56a9a91a5b3867b21f35d79c16e64 ]
When setting a neigh related sysctl parameter, we always send a
NETEVENT\_DELAY\_PROBE\_TIME\_UPDATE netevent. For instance, when
executing
sysctl net.ipv6.neigh.wlp3s0.retrans\_time\_ms=2000
a NETEVENT\_DELAY\_PROBE\_TIME\_UPDATE netevent is generated.
This is caused by commit 2a4501ae18b5 ("neigh: Send a
notification when DELAY\_PROBE\_TIME changes"). According to the
commit's description, it was intended to generate such an event
when setting the "delay\_first\_probe\_time" sysctl parameter.
In order to fix this, only generate this event when actually
setting the "delay\_first\_probe\_time" sysctl parameter. This fix
should not have any unintended side-effects, because all but one
registered netevent callbacks check for other netevent event
types (the registered callbacks were obtained by grepping for
"register\_netevent\_notifier"). The only callback that uses the
NETEVENT\_DELAY\_PROBE\_TIME\_UPDATE event is
mlxsw\_sp\_router\_netevent\_event() (in
drivers/net/ethernet/mellanox/mlxsw/spectrum\_router.c): in case
of this event, it only accesses the DELAY\_PROBE\_TIME of the
passed neigh\_parms.
Fixes: 2a4501ae18b5 ("neigh: Send a notification when DELAY\_PROBE\_TIME changes")
Signed-off-by: Marcus Huewe
Reviewed-by: Ido Schimmel
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 9206efc8a1f74e558e3165218fab136b51be848a
Author: Anoob Soman
Date: Wed Feb 15 20:25:39 2017 +0000
packet: Do not call fanout\_release from atomic contexts
[ Upstream commit 2bd624b4611ffee36422782d16e1c944d1351e98 ]
Commit 6664498280cf ("packet: call fanout\_release, while UNREGISTERING a
netdev"), unfortunately, introduced the following issues.
1. calling mutex\_lock(&fanout\_mutex) (fanout\_release()) from inside
rcu\_read-side critical section. rcu\_read\_lock disables preemption, most often,
which prohibits calling sleeping functions.
[ ] include/linux/rcupdate.h:560 Illegal context switch in RCU read-side critical section!
[ ]
[ ] rcu\_scheduler\_active = 1, debug\_locks = 0
[ ] 4 locks held by ovs-vswitchd/1969:
[ ] #0: (cb\_lock){++++++}, at: [] genl\_rcv+0x19/0x40
[ ] #1: (ovs\_mutex){+.+.+.}, at: [] ovs\_vport\_cmd\_del+0x4a/0x100 [openvswitch]
[ ] #2: (rtnl\_mutex){+.+.+.}, at: [] rtnl\_lock+0x17/0x20
[ ] #3: (rcu\_read\_lock){......}, at: [] packet\_notifier+0x5/0x3f0
[ ]
[ ] Call Trace:
[ ] [] dump\_stack+0x85/0xc4
[ ] [] lockdep\_rcu\_suspicious+0x107/0x110
[ ] [] \_\_\_might\_sleep+0x57/0x210
[ ] [] \_\_might\_sleep+0x70/0x90
[ ] [] mutex\_lock\_nested+0x3c/0x3a0
[ ] [] ? vprintk\_default+0x1f/0x30
[ ] [] ? printk+0x4d/0x4f
[ ] [] fanout\_release+0x1d/0xe0
[ ] [] packet\_notifier+0x2f9/0x3f0
2. calling mutex\_lock(&fanout\_mutex) inside spin\_lock(&po->bind\_lock).
"sleeping function called from invalid context"
[ ] BUG: sleeping function called from invalid context at kernel/locking/mutex.c:620
[ ] in\_atomic(): 1, irqs\_disabled(): 0, pid: 1969, name: ovs-vswitchd
[ ] INFO: lockdep is turned off.
[ ] Call Trace:
[ ] [] dump\_stack+0x85/0xc4
[ ] [] \_\_\_might\_sleep+0x202/0x210
[ ] [] \_\_might\_sleep+0x70/0x90
[ ] [] mutex\_lock\_nested+0x3c/0x3a0
[ ] [] fanout\_release+0x1d/0xe0
[ ] [] packet\_notifier+0x2f9/0x3f0
3. calling dev\_remove\_pack(&fanout->prot\_hook), from inside
spin\_lock(&po->bind\_lock) or rcu\_read-side critical-section. dev\_remove\_pack()
-> synchronize\_net(), which might sleep.
[ ] BUG: scheduling while atomic: ovs-vswitchd/1969/0x00000002
[ ] INFO: lockdep is turned off.
[ ] Call Trace:
[ ] [] dump\_stack+0x85/0xc4
[ ] [] \_\_schedule\_bug+0x64/0x73
[ ] [] \_\_schedule+0x6b/0xd10
[ ] [] schedule+0x6b/0x80
[ ] [] schedule\_timeout+0x38d/0x410
[ ] [] synchronize\_sched\_expedited+0x53d/0x810
[ ] [] synchronize\_rcu\_expedited+0xe/0x10
[ ] [] synchronize\_net+0x35/0x50
[ ] [] dev\_remove\_pack+0x13/0x20
[ ] [] fanout\_release+0xbe/0xe0
[ ] [] packet\_notifier+0x2f9/0x3f0
4. fanout\_release() races with calls from different CPU.
To fix the above problems, remove the call to fanout\_release() under
rcu\_read\_lock(). Instead, call \_\_dev\_remove\_pack(&fanout->prot\_hook) and
netdev\_run\_todo will be happy that &dev->ptype\_specific list is empty. In order
to achieve this, I moved dev\_{add,remove}\_pack() out of fanout\_{add,release} to
\_\_fanout\_{link,unlink}. So, call to {,\_\_}unregister\_prot\_hook() will make sure
fanout->prot\_hook is removed as well.
Fixes: 6664498280cf ("packet: call fanout\_release, while UNREGISTERING a netdev")
Reported-by: Eric Dumazet
Signed-off-by: Anoob Soman
Acked-by: Eric Dumazet
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 722737f27774b14be5a1d2d3b9281dcded7c48b2
Author: Eric Dumazet
Date: Tue Feb 14 09:03:51 2017 -0800
packet: fix races in fanout\_add()
[ Upstream commit d199fab63c11998a602205f7ee7ff7c05c97164b ]
Multiple threads can call fanout\_add() at the same time.
We need to grab fanout\_mutex earlier to avoid races that could
lead to one thread freeing po->rollover that was set by another thread.
Do the same in fanout\_release(), for peace of mind, and to help us
finding lockdep issues earlier.
Fixes: dc99f600698d ("packet: Add fanout support.")
Fixes: 0648ab70afe6 ("packet: rollover prepare: per-socket state")
Signed-off-by: Eric Dumazet
Cc: Willem de Bruijn
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit e0cb28247882a90f60b219f335c00d8d578cbe66
Author: Ivan Khoronzhuk
Date: Tue Feb 14 14:42:15 2017 +0200
net: ethernet: ti: cpsw: fix cpsw assignment in resume
[ Upstream commit a60ced990e309666915d21445e95347d12406694 ]
There is a copy-paste error, which hides breaking of resume
for CPSW driver: there was replaced netdev\_priv() to ndev\_to\_cpsw(ndev)
in suspend, but left it unchanged in resume.
Fixes: 606f39939595a4d4540406bfc11f265b2036af6d
(ti: cpsw: move platform data and slaves info to cpsw\_common)
Reported-by: Alexey Starikovskiy
Signed-off-by: Ivan Khoronzhuk
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 42b52783a59cc706c71cdc7096edce4a6f086fd3
Author: Eric Dumazet
Date: Sun Feb 12 14:03:52 2017 -0800
net/llc: avoid BUG\_ON() in skb\_orphan()
[ Upstream commit 8b74d439e1697110c5e5c600643e823eb1dd0762 ]
It seems nobody used LLC since linux-3.12.
Fortunately fuzzers like syzkaller still know how to run this code,
otherwise it would be no fun.
Setting skb->sk without skb->destructor leads to all kinds of
bugs, we now prefer to be very strict about it.
Ideally here we would use skb\_set\_owner() but this helper does not exist yet,
only CAN seems to have a private helper for that.
Fixes: 376c7311bdb6 ("net: add a temporary sanity check in skb\_orphan()")
Signed-off-by: Eric Dumazet
Reported-by: Andrey Konovalov
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 859900c24bff90768e1789bd93e1b51fa726a659
Author: Or Gerlitz
Date: Sun Feb 12 11:21:31 2017 +0200
net/mlx5e: Disable preemption when doing TC statistics upcall
[ Upstream commit fed06ee89b78d3af32e235e0e89ad0d946fcb95d ]
When called by HW offloading drivers, the TC action (e.g
net/sched/act\_mirred.c) code uses this\_cpu logic, e.g
\_bstats\_cpu\_update(this\_cpu\_ptr(a->cpu\_bstats), bytes, packets)
per the kernel documention, preemption should be disabled, add that.
Before the fix, when running with CONFIG\_PREEMPT set, we get a
BUG: using smp\_processor\_id() in preemptible [00000000] code: tc/3793
asserion from the TC action (mirred) stats\_update callback.
Fixes: aad7e08d39bd ('net/mlx5e: Hardware offloaded flower filter statistics support')
Signed-off-by: Or Gerlitz
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 90aa7993d5c7fdc476009189a9b2a65d97fe9350
Author: WANG Cong
Date: Mon Feb 13 11:13:16 2017 -0800
kcm: fix a null pointer dereference in kcm\_sendmsg()
[ Upstream commit cd27b96bc13841ee7af25837a6ae86fee87273d6 ]
In commit 98e3862ca2b1 ("kcm: fix 0-length case for kcm\_sendmsg()")
I tried to avoid skb allocation for 0-length case, but missed
a check for NULL pointer in the non EOR case.
Fixes: 98e3862ca2b1 ("kcm: fix 0-length case for kcm\_sendmsg()")
Reported-by: Dmitry Vyukov
Cc: Tom Herbert
Signed-off-by: Cong Wang
Acked-by: Tom Herbert
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 1409935400aa1faffd9fe1830adb8ea08ea424d2
Author: WANG Cong
Date: Tue Feb 7 12:59:47 2017 -0800
kcm: fix 0-length case for kcm\_sendmsg()
[ Upstream commit 98e3862ca2b1ae595a13805dcab4c3a6d7718f4d ]
Dmitry reported a kernel warning:
WARNING: CPU: 3 PID: 2936 at net/kcm/kcmsock.c:627
kcm\_write\_msgs+0x12e3/0x1b90 net/kcm/kcmsock.c:627
CPU: 3 PID: 2936 Comm: a.out Not tainted 4.10.0-rc6+ #209
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS Bochs 01/01/2011
Call Trace:
\_\_dump\_stack lib/dump\_stack.c:15 [inline]
dump\_stack+0x2ee/0x3ef lib/dump\_stack.c:51
panic+0x1fb/0x412 kernel/panic.c:179
\_\_warn+0x1c4/0x1e0 kernel/panic.c:539
warn\_slowpath\_null+0x2c/0x40 kernel/panic.c:582
kcm\_write\_msgs+0x12e3/0x1b90 net/kcm/kcmsock.c:627
kcm\_sendmsg+0x163a/0x2200 net/kcm/kcmsock.c:1029
sock\_sendmsg\_nosec net/socket.c:635 [inline]
sock\_sendmsg+0xca/0x110 net/socket.c:645
sock\_write\_iter+0x326/0x600 net/socket.c:848
new\_sync\_write fs/read\_write.c:499 [inline]
\_\_vfs\_write+0x483/0x740 fs/read\_write.c:512
vfs\_write+0x187/0x530 fs/read\_write.c:560
SYSC\_write fs/read\_write.c:607 [inline]
SyS\_write+0xfb/0x230 fs/read\_write.c:599
entry\_SYSCALL\_64\_fastpath+0x1f/0xc2
when calling syscall(\_\_NR\_write, sock2, 0x208aaf27ul, 0x0ul) on a KCM
seqpacket socket. It appears that kcm\_sendmsg() does not handle len==0
case correctly, which causes an empty skb is allocated and queued.
Fix this by skipping the skb allocation for len==0 case.
Reported-by: Dmitry Vyukov
Cc: Tom Herbert
Signed-off-by: Cong Wang
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman


=== Content from www.openwall.com_27f248de_20250124_193511.html ===


| [Openwall](/) * [Products](/)   + [Openwall GNU/\*/Linux   *server OS*](/Owl/)+ [Linux Kernel Runtime Guard](/lkrg/)+ [John the Ripper   *password cracker*](/john/)         - [Free & Open Source for any platform](/john/)- [in the cloud](/john/cloud/)- [Pro for Linux](/john/pro/linux/)- [Pro for macOS](/john/pro/macosx/)+ [Wordlists   *for password cracking*](/wordlists/)+ [passwdqc   *policy enforcement*](/passwdqc/)             - [Free & Open Source for Unix](/passwdqc/)- [Pro for Windows (Active Directory)](/passwdqc/windows/)+ [yescrypt   *KDF & password hashing*](/yescrypt/)+ [yespower   *Proof-of-Work (PoW)*](/yespower/)+ [crypt\_blowfish   *password hashing*](/crypt/)+ [phpass   *ditto in PHP*](/phpass/)+ [tcb   *better password shadowing*](/tcb/)+ [Pluggable Authentication Modules](/pam/)+ [scanlogd   *port scan detector*](/scanlogd/)+ [popa3d   *tiny POP3 daemon*](/popa3d/)+ [blists   *web interface to mailing lists*](/blists/)+ [msulogin   *single user mode login*](/msulogin/)+ [php\_mt\_seed   *mt\_rand() cracker*](/php_mt_seed/)* [Services](/services/)* Publications       + [Articles](/articles/)+ [Presentations](/presentations/)* Resources         + [Mailing lists](/lists/)+ [Community wiki](https://openwall.info/wiki/)+ [Source code repositories (GitHub)](https://github.com/openwall)+ [Source code repositories (CVSweb)](https://cvsweb.openwall.com)+ [File archive & mirrors](/mirrors/)+ [How to verify digital signatures](/signatures/)+ [OVE IDs](/ove/)* [What's new](/news) | |
| --- | --- |

| | [Follow @Openwall on Twitter for new release announcements and other news](https://twitter.com/openwall) | | --- | |
| --- | --- |

[[<prev]](3) [[next>]](5) [[day]](.) [[month]](..) [[year]](../..) [[list]](../../..)
```

Message-ID: <20170228162034.qlety2rdz2skpomr@eldamar.local>
Date: Tue, 28 Feb 2017 17:20:34 +0100
From: Salvatore Bonaccorso <carnil@...ian.org>
To: OSS Security Mailinglist <oss-security@...ts.openwall.com>
Subject: Linux: irda: Fix lockdep annotations in hashbin_delete()
 (CVE-2017-6348)

Hi

CVE-2017-6348 was assigned by MITRE to the following (via
<https://cveform.mitre.org/>):

<https://git.kernel.org/linus/4c03b862b12f980456f9de92db6d508a4999b788>

> irda: Fix lockdep annotations in hashbin_delete().
>
> A nested lock depth was added to the hasbin_delete() code but it
> doesn't actually work some well and results in tons of lockdep splats.
>
> Fix the code instead to properly drop the lock around the operation
> and just keep peeking the head of the hashbin queue.

Quoting a note from Ben Hutchins: "This actually changes locking, not just
lockdep annotations. So I think it fixes a potential deadlock."

The fix was as well backported to 4.9.13.

Regards,
Salvatore

```

[Powered by blists](https://www.openwall.com/blists/) - [more mailing lists](https://lists.openwall.net)

Please check out the
[Open Source Software Security Wiki](https://oss-security.openwall.org/wiki/), which is counterpart to this
[mailing list](https://oss-security.openwall.org/wiki/mailing-lists/oss-security).

Confused about [mailing lists](/lists/) and their use?
[Read about mailing lists on Wikipedia](https://en.wikipedia.org/wiki/Electronic_mailing_list)
and check out these
[guidelines on proper formatting of your messages](https://www.complang.tuwien.ac.at/anton/mail-news-errors.html).



=== Content from usn.ubuntu.com_37a1a987_20250124_193512.html ===


Your submission was sent successfully!
*Close*

Thank you for contacting us. A member of our team will be in touch shortly.
*Close*

You have successfully unsubscribed!
*Close*

Thank you for signing up for our newsletter!

In these regular emails you will find the latest updates about
Ubuntu and upcoming events where you can meet our team.*Close*

Your preferences have been successfully updated. *Close*

[Canonical Ubuntu](/)

* [Menu](/navigation)

* [Products](/navigation#products-navigation)
* [Use cases](/navigation#use-case-navigation)
* [Support](/navigation#support-navigation)
* [Community](/navigation#community-navigation)
* [Get Ubuntu](/navigation#get-ubuntu-navigation)

[![](https://assets.ubuntu.com/v1/82818827-CoF_white.svg)

Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

# USN-3754-1: Linux kernel vulnerabilities

24 August 2018

Several security issues were fixed in the Linux kernel.

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Releases

* [Ubuntu 14.04 ESM](/security/notices?release=trusty)

## Packages

* [linux](/security/cves?package=linux) - Linux kernel

## Details

Ralf Spenneberg discovered that the ext4 implementation in the Linux kernel

did not properly validate meta block groups. An attacker with physical

access could use this to specially craft an ext4 image that causes a denial

of service (system crash). ([CVE-2016-10208](/security/CVE-2016-10208))

It was discovered that an information disclosure vulnerability existed in

the ACPI implementation of the Linux kernel. A local attacker could use

this to expose sensitive information (kernel memory addresses).

([CVE-2017-11472](/security/CVE-2017-11472))

It was discovered that a buffer overflow existed in the ACPI table parsing

implementation in the Linux kernel. A local attacker could use this to

construct a malicious ACPI table that, when loaded, caused a denial of

service (system crash) or possibly execute arbitrary code.

([CVE-2017-11473](/security/CVE-2017-11473))

It was discovered that the generic SCSI driver in the Linux kernel did not

properly initialize data returned to user space in some situations. A local

attacker could use this to expose sensitive information (kernel memory).

([CVE-2017-14991](/security/CVE-2017-14991))

It was discovered that a race condition existed in the packet fanout

implementation in the Linux kernel. A local attacker could use this to

cause a denial of service (system crash) or possibly execute arbitrary

code. ([CVE-2017-15649](/security/CVE-2017-15649))

Andrey Konovalov discovered that the Ultra Wide Band driver in the Linux

kernel did not properly check for an error condition. A physically

proximate attacker could use this to cause a denial of service (system

crash) or possibly execute arbitrary code. ([CVE-2017-16526](/security/CVE-2017-16526))

Andrey Konovalov discovered that the ALSA subsystem in the Linux kernel

contained a use-after-free vulnerability. A local attacker could use this

to cause a denial of service (system crash) or possibly execute arbitrary

code. ([CVE-2017-16527](/security/CVE-2017-16527))

Andrey Konovalov discovered that the ALSA subsystem in the Linux kernel did

not properly validate USB audio buffer descriptors. A physically proximate

attacker could use this cause a denial of service (system crash) or

possibly execute arbitrary code. ([CVE-2017-16529](/security/CVE-2017-16529))

Andrey Konovalov discovered that the USB subsystem in the Linux kernel did

not properly validate USB interface association descriptors. A physically

proximate attacker could use this to cause a denial of service (system

crash). ([CVE-2017-16531](/security/CVE-2017-16531))

Andrey Konovalov discovered that the usbtest device driver in the Linux

kernel did not properly validate endpoint metadata. A physically proximate

attacker could use this to cause a denial of service (system crash).

([CVE-2017-16532](/security/CVE-2017-16532))

Andrey Konovalov discovered that the USB subsystem in the Linux kernel did

not properly validate USB HID descriptors. A physically proximate attacker

could use this to cause a denial of service (system crash).

([CVE-2017-16533](/security/CVE-2017-16533))

Andrey Konovalov discovered that the USB subsystem in the Linux kernel did

not properly validate USB BOS metadata. A physically proximate attacker

could use this to cause a denial of service (system crash).

([CVE-2017-16535](/security/CVE-2017-16535))

Andrey Konovalov discovered that the Conexant cx231xx USB video capture

driver in the Linux kernel did not properly validate interface descriptors.

A physically proximate attacker could use this to cause a denial of service

(system crash). ([CVE-2017-16536](/security/CVE-2017-16536))

Andrey Konovalov discovered that the SoundGraph iMON USB driver in the

Linux kernel did not properly validate device metadata. A physically

proximate attacker could use this to cause a denial of service (system

crash). ([CVE-2017-16537](/security/CVE-2017-16537))

It was discovered that the DM04/QQBOX USB driver in the Linux kernel did

not properly handle device attachment and warm-start. A physically

proximate attacker could use this to cause a denial of service (system

crash) or possibly execute arbitrary code. ([CVE-2017-16538](/security/CVE-2017-16538))

Andrey Konovalov discovered an out-of-bounds read in the GTCO digitizer USB

driver for the Linux kernel. A physically proximate attacker could use this

to cause a denial of service (system crash) or possibly execute arbitrary

code. ([CVE-2017-16643](/security/CVE-2017-16643))

Andrey Konovalov discovered that the video4linux driver for Hauppauge HD

PVR USB devices in the Linux kernel did not properly handle some error

conditions. A physically proximate attacker could use this to cause a

denial of service (system crash) or possibly execute arbitrary code.

([CVE-2017-16644](/security/CVE-2017-16644))

Andrey Konovalov discovered that the IMS Passenger Control Unit USB driver

in the Linux kernel did not properly validate device descriptors. A

physically proximate attacker could use this to cause a denial of service

(system crash). ([CVE-2017-16645](/security/CVE-2017-16645))

Andrey Konovalov discovered that the QMI WWAN USB driver did not properly

validate device descriptors. A physically proximate attacker could use this

to cause a denial of service (system crash). ([CVE-2017-16650](/security/CVE-2017-16650))

It was discovered that the USB Virtual Host Controller Interface (VHCI)

driver in the Linux kernel contained an information disclosure

vulnerability. A physically proximate attacker could use this to expose

sensitive information (kernel memory). ([CVE-2017-16911](/security/CVE-2017-16911))

It was discovered that the USB over IP implementation in the Linux kernel

did not validate endpoint numbers. A remote attacker could use this to

cause a denial of service (system crash). ([CVE-2017-16912](/security/CVE-2017-16912))

It was discovered that the USB over IP implementation in the Linux kernel

did not properly validate CMD\_SUBMIT packets. A remote attacker could use

this to cause a denial of service (excessive memory consumption).

([CVE-2017-16913](/security/CVE-2017-16913))

It was discovered that the USB over IP implementation in the Linux kernel

contained a NULL pointer dereference error. A remote attacker could use

this to cause a denial of service (system crash). ([CVE-2017-16914](/security/CVE-2017-16914))

It was discovered that the core USB subsystem in the Linux kernel did not

validate the number of configurations and interfaces in a device. A

physically proximate attacker could use this to cause a denial of service

(system crash). ([CVE-2017-17558](/security/CVE-2017-17558))

It was discovered that an integer overflow existed in the perf subsystem of

the Linux kernel. A local attacker could use this to cause a denial of

service (system crash). ([CVE-2017-18255](/security/CVE-2017-18255))

It was discovered that the keyring subsystem in the Linux kernel did not

properly prevent a user from creating keyrings for other users. A local

attacker could use this cause a denial of service or expose sensitive

information. ([CVE-2017-18270](/security/CVE-2017-18270))

Andy Lutomirski and Willy Tarreau discovered that the KVM implementation in

the Linux kernel did not properly emulate instructions on the SS segment

register. A local attacker in a guest virtual machine could use this to

cause a denial of service (guest OS crash) or possibly gain administrative

privileges in the guest OS. ([CVE-2017-2583](/security/CVE-2017-2583))

Dmitry Vyukov discovered that the KVM implementation in the Linux kernel

improperly emulated certain instructions. A local attacker could use this

to obtain sensitive information (kernel memory). ([CVE-2017-2584](/security/CVE-2017-2584))

It was discovered that the KLSI KL5KUSB105 serial-to-USB device driver in

the Linux kernel did not properly initialize memory related to logging. A

local attacker could use this to expose sensitive information (kernel

memory). ([CVE-2017-5549](/security/CVE-2017-5549))

Andrey Konovalov discovered an out-of-bounds access in the IPv6 Generic

Routing Encapsulation (GRE) tunneling implementation in the Linux kernel.

An attacker could use this to possibly expose sensitive information.

([CVE-2017-5897](/security/CVE-2017-5897))

Andrey Konovalov discovered that the LLC subsytem in the Linux kernel did

not properly set up a destructor in certain situations. A local attacker

could use this to cause a denial of service (system crash). ([CVE-2017-6345](/security/CVE-2017-6345))

Dmitry Vyukov discovered race conditions in the Infrared (IrDA) subsystem

in the Linux kernel. A local attacker could use this to cause a denial of

service (deadlock). ([CVE-2017-6348](/security/CVE-2017-6348))

Andy Lutomirski discovered that the KVM implementation in the Linux kernel

was vulnerable to a debug exception error when single-stepping through a

syscall. A local attacker in a non-Linux guest vm could possibly use this

to gain administrative privileges in the guest vm. ([CVE-2017-7518](/security/CVE-2017-7518))

Tuomas Haanpää and Ari Kauppi discovered that the NFSv2 and NFSv3 server

implementations in the Linux kernel did not properly handle certain long

RPC replies. A remote attacker could use this to cause a denial of service

(system crash). ([CVE-2017-7645](/security/CVE-2017-7645))

Pengfei Wang discovered that a race condition existed in the NXP SAA7164 TV

Decoder driver for the Linux kernel. A local attacker could use this to

cause a denial of service (system crash) or possibly execute arbitrary

code. ([CVE-2017-8831](/security/CVE-2017-8831))

Pengfei Wang discovered that the Turtle Beach MultiSound audio device

driver in the Linux kernel contained race conditions when fetching from the

ring-buffer. A local attacker could use this to cause a denial of service

(infinite loop). ([CVE-2017-9984](/security/CVE-2017-9984), [CVE-2017-9985](/security/CVE-2017-9985))

It was discovered that the wait4() system call in the Linux kernel did not

properly validate its arguments in some situations. A local attacker could

possibly use this to cause a denial of service. ([CVE-2018-10087](/security/CVE-2018-10087))

It was discovered that the kill() system call implementation in the Linux

kernel did not properly validate its arguments in some situations. A local

attacker could possibly use this to cause a denial of service.

([CVE-2018-10124](/security/CVE-2018-10124))

Wen Xu discovered that the XFS filesystem implementation in the Linux

kernel did not properly validate meta-data information. An attacker could

use this to construct a malicious xfs image that, when mounted, could cause

a denial of service (system crash). ([CVE-2018-10323](/security/CVE-2018-10323))

Zhong Jiang discovered that a use-after-free vulnerability existed in the

NUMA memory policy implementation in the Linux kernel. A local attacker

could use this to cause a denial of service (system crash) or possibly

execute arbitrary code. ([CVE-2018-10675](/security/CVE-2018-10675))

Wen Xu discovered that a buffer overflow existed in the ext4 filesystem

implementation in the Linux kernel. An attacker could use this to construct

a malicious ext4 image that, when mounted, could cause a denial of service

(system crash) or possibly execute arbitrary code. ([CVE-2018-10877](/security/CVE-2018-10877))

Wen Xu discovered that the ext4 filesystem implementation in the Linux

kernel did not properly keep meta-data information consistent in some

situations. An attacker could use this to construct a malicious ext4 image

that, when mounted, could cause a denial of service (system crash).

([CVE-2018-10881](/security/CVE-2018-10881))

Wen Xu discovered that the ext4 filesystem implementation in the Linux

kernel did not properly handle corrupted meta data in some situations. An

attacker could use this to specially craft an ext4 filesystem that caused

a denial of service (system crash) when mounted. ([CVE-2018-1092](/security/CVE-2018-1092))

Wen Xu discovered that the ext4 filesystem implementation in the Linux

kernel did not properly handle corrupted meta data in some situations. An

attacker could use this to specially craft an ext4 filesystem that caused a

denial of service (system crash) when mounted. ([CVE-2018-1093](/security/CVE-2018-1093))

It was discovered that the cdrom driver in the Linux kernel contained an

incorrect bounds check. A local attacker could use this to expose sensitive

information (kernel memory). ([CVE-2018-10940](/security/CVE-2018-10940))

Shankara Pailoor discovered that the JFS filesystem implementation in the

Linux kernel contained a buffer overflow when handling extended attributes.

A local attacker could use this to cause a denial of service (system crash)

or possibly execute arbitrary code. ([CVE-2018-12233](/security/CVE-2018-12233))

Wen Xu discovered that the XFS filesystem implementation in the Linux

kernel did not properly handle an error condition with a corrupted xfs

image. An attacker could use this to construct a malicious xfs image that,

when mounted, could cause a denial of service (system crash).

([CVE-2018-13094](/security/CVE-2018-13094))

It was discovered that the Linux kernel did not properly handle setgid file

creation when performed by a non-member of the group. A local attacker

could use this to gain elevated privileges. ([CVE-2018-13405](/security/CVE-2018-13405))

Silvio Cesare discovered that the generic VESA frame buffer driver in the

Linux kernel contained an integer overflow. A local attacker could use this

to cause a denial of service (system crash) or possibly execute arbitrary

code. ([CVE-2018-13406](/security/CVE-2018-13406))

Daniel Jiang discovered that a race condition existed in the ipv4 ping

socket implementation in the Linux kernel. A local privileged attacker

could use this to cause a denial of service (system crash). ([CVE-2017-2671](/security/CVE-2017-2671))

It was discovered that an information leak existed in the generic SCSI

driver in the Linux kernel. A local attacker could use this to expose

sensitive information (kernel memory). ([CVE-2018-1000204](/security/CVE-2018-1000204))

It was discovered that a memory leak existed in the Serial Attached SCSI

(SAS) implementation in the Linux kernel. A physically proximate attacker

could use this to cause a denial of service (memory exhaustion).

([CVE-2018-10021](/security/CVE-2018-10021))

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Update instructions

The problem can be corrected by updating your system to the following package versions:

##### Ubuntu 14.04

* [linux-image-3.13.0-157-generic](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [3.13.0-157.207](https://launchpad.net/ubuntu/%2Bsource/linux/3.13.0-157.207)
* [linux-image-3.13.0-157-generic-lpae](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [3.13.0-157.207](https://launchpad.net/ubuntu/%2Bsource/linux/3.13.0-157.207)
* [linux-image-3.13.0-157-lowlatency](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [3.13.0-157.207](https://launchpad.net/ubuntu/%2Bsource/linux/3.13.0-157.207)
* [linux-image-3.13.0-157-powerpc-e500](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [3.13.0-157.207](https://launchpad.net/ubuntu/%2Bsource/linux/3.13.0-157.207)
* [linux-image-3.13.0-157-powerpc-e500mc](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [3.13.0-157.207](https://launchpad.net/ubuntu/%2Bsource/linux/3.13.0-157.207)
* [linux-image-3.13.0-157-powerpc-smp](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [3.13.0-157.207](https://launchpad.net/ubuntu/%2Bsource/linux/3.13.0-157.207)
* [linux-image-3.13.0-157-powerpc64-emb](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [3.13.0-157.207](https://launchpad.net/ubuntu/%2Bsource/linux/3.13.0-157.207)
* [linux-image-3.13.0-157-powerpc64-smp](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [3.13.0-157.207](https://launchpad.net/ubuntu/%2Bsource/linux/3.13.0-157.207)

After a standard system update you need to reboot your computer to make

all the necessary changes.

ATTENTION: Due to an unavoidable ABI change the kernel updates have

been given a new version number, which requires you to recompile and

reinstall all third party kernel modules you might have installed.

Unless you manually uninstalled the standard kernel metapackages

(e.g. linux-generic, linux-generic-lts-RELEASE, linux-virtual,

linux-powerpc), a standard system upgrade will automatically perform

this as well.

## References

* [CVE-2016-10208](/security/CVE-2016-10208)
* [CVE-2017-11472](/security/CVE-2017-11472)
* [CVE-2017-11473](/security/CVE-2017-11473)
* [CVE-2017-14991](/security/CVE-2017-14991)
* [CVE-2017-15649](/security/CVE-2017-15649)
* [CVE-2017-16526](/security/CVE-2017-16526)
* [CVE-2017-16527](/security/CVE-2017-16527)
* [CVE-2017-16529](/security/CVE-2017-16529)
* [CVE-2017-16531](/security/CVE-2017-16531)
* [CVE-2017-16532](/security/CVE-2017-16532)
* [CVE-2017-16533](/security/CVE-2017-16533)
* [CVE-2017-16535](/security/CVE-2017-16535)
* [CVE-2017-16536](/security/CVE-2017-16536)
* [CVE-2017-16537](/security/CVE-2017-16537)
* [CVE-2017-16538](/security/CVE-2017-16538)
* [CVE-2017-16643](/security/CVE-2017-16643)
* [CVE-2017-16644](/security/CVE-2017-16644)
* [CVE-2017-16645](/security/CVE-2017-16645)
* [CVE-2017-16650](/security/CVE-2017-16650)
* [CVE-2017-16911](/security/CVE-2017-16911)
* [CVE-2017-16912](/security/CVE-2017-16912)
* [CVE-2017-16913](/security/CVE-2017-16913)
* [CVE-2017-16914](/security/CVE-2017-16914)
* [CVE-2017-17558](/security/CVE-2017-17558)
* [CVE-2017-18255](/security/CVE-2017-18255)
* [CVE-2017-18270](/security/CVE-2017-18270)
* [CVE-2017-2583](/security/CVE-2017-2583)
* [CVE-2017-2584](/security/CVE-2017-2584)
* [CVE-2017-2671](/security/CVE-2017-2671)
* [CVE-2017-5549](/security/CVE-2017-5549)
* [CVE-2017-5897](/security/CVE-2017-5897)
* [CVE-2017-6345](/security/CVE-2017-6345)
* [CVE-2017-6348](/security/CVE-2017-6348)
* [CVE-2017-7518](/security/CVE-2017-7518)
* [CVE-2017-7645](/security/CVE-2017-7645)
* [CVE-2017-8831](/security/CVE-2017-8831)
* [CVE-2017-9984](/security/CVE-2017-9984)
* [CVE-2017-9985](/security/CVE-2017-9985)
* [CVE-2018-1000204](/security/CVE-2018-1000204)
* [CVE-2018-10021](/security/CVE-2018-10021)
* [CVE-2018-10087](/security/CVE-2018-10087)
* [CVE-2018-10124](/security/CVE-2018-10124)
* [CVE-2018-10323](/security/CVE-2018-10323)
* [CVE-2018-10675](/security/CVE-2018-10675)
* [CVE-2018-10877](/security/CVE-2018-10877)
* [CVE-2018-10881](/security/CVE-2018-10881)
* [CVE-2018-1092](/security/CVE-2018-1092)
* [CVE-2018-1093](/security/CVE-2018-1093)
* [CVE-2018-10940](/security/CVE-2018-10940)
* [CVE-2018-12233](/security/CVE-2018-12233)
* [CVE-2018-13094](/security/CVE-2018-13094)
* [CVE-2018-13405](/security/CVE-2018-13405)
* [CVE-2018-13406](/security/CVE-2018-13406)

## Related notices

* [USN-3361-1](/security/notices/USN-3361-1)
* [USN-3234-2](/security/notices/USN-3234-2)
* [USN-3234-1](/security/notices/USN-3234-1)
* [USN-3619-2](/security/notices/USN-3619-2)
* [USN-3619-1](/security/notices/USN-3619-1)
* [USN-3469-1](/security/notices/USN-3469-1)
* [USN-3469-2](/security/notices/USN-3469-2)
* [USN-3487-1](/security/notices/USN-3487-1)
* [USN-3485-1](/security/notices/USN-3485-1)
* [USN-3485-3](/security/notices/USN-3485-3)
* [USN-3485-2](/security/notices/USN-3485-2)
* [USN-3617-1](/security/notices/USN-3617-1)
* [USN-3617-3](/security/notices/USN-3617-3)
* [USN-3617-2](/security/notices/USN-3617-2)
* [USN-3507-1](/security/notices/USN-3507-1)
* [USN-3631-2](/security/notices/USN-3631-2)
* [USN-3631-1](/security/notices/USN-3631-1)
* [USN-3509-1](/security/notices/USN-3509-1)
* [USN-3509-2](/security/notices/USN-3509-2)
* [USN-4904-1](/security/notices/USN-4904-1)
* [USN-3696-2](/security/notices/USN-3696-2)
* [USN-3696-1](/security/notices/USN-3696-1)
* [USN-3208-1](/security/notices/USN-3208-1)
* [USN-3208-2](/security/notices/USN-3208-2)
* [USN-3314-1](/security/notices/USN-3314-1)
* [USN-3312-2](/security/notices/USN-3312-2)
* [USN-3312-1](/security/notices/USN-3312-1)
* [USN-3265-1](/security/notices/USN-3265-1)
* [USN-3265-2](/security/notices/USN-3265-2)
* [USN-3420-1](/security/notices/USN-3420-1)
* [USN-3420-2](/security/notices/USN-3420-2)
* [USN-3752-2](/security/notices/USN-3752-2)
* [USN-3752-1](/security/notices/USN-3752-1)
* [USN-3752-3](/security/notices/USN-3752-3)
* [USN-3678-4](/security/notices/USN-3678-4)
* [USN-3678-3](/security/notices/USN-3678-3)
* [USN-3678-1](/security/notices/USN-3678-1)
* [USN-3678-2](/security/notices/USN-3678-2)
* [USN-4486-1](/security/notices/USN-4486-1)
* [USN-3753-1](/security/notices/USN-3753-1)
* [USN-3871-4](/security/notices/USN-3871-4)
* [USN-3871-1](/security/notices/USN-3871-1)
* [USN-3871-5](/security/notices/USN-3871-5)
* [USN-3753-2](/security/notices/USN-3753-2)
* [USN-3871-3](/security/notices/USN-3871-3)
* [USN-3676-1](/security/notices/USN-3676-1)
* [USN-3676-2](/security/notices/USN-3676-2)
* [USN-3677-1](/security/notices/USN-3677-1)
* [USN-3677-2](/security/notices/USN-3677-2)
* [USN-3695-2](/security/notices/USN-3695-2)
* [USN-3695-1](/security/notices/USN-3695-1)

### Join the discussion

* [Ubuntu security updates mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-hardened)
* [Security announcements mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-security-announce)

### Need help with your security needs?

Ubuntu Pro provides up to ten-year security coverage for over 23,000 open-source packages within the Ubuntu Main and Universe repositories.

[Talk to an expert to find out what would work best for you](/contact-us/form?product=pro)

### Further reading

* *Loading...*

---

## [OpenStack](/openstack) [OpenStack](/openstack)

* [What is OpenStack](/openstack/what-is-openstack)
* [Features](/openstack/features)
* [Managed](/openstack/managed)
* [Consulting](/openstack/consulting)
* [Install](/openstack/install)
* [Support](/openstack/support)

---

## [Ceph](/ceph) [Ceph](/ceph)

* [What is Ceph](/ceph/what-is-ceph)
* [Managed](/ceph/managed)
* [Consulting](/ceph/consulting)
* [Docs](/ceph/docs)
* [Install](/ceph/install)

---

## [Kubernetes](/kubernetes) [Kubernetes](/kubernetes)

* [What is Kubernetes](/kubernetes/what-is-kubernetes)
* [Charmed Kubernetes](/kubernetes/charmed-k8s)
* [Managed](/kubernetes/managed)
* [Install](/kubernetes/install)
* [Docs](/kubernetes/docs)
* [Resources](/kubernetes/resources)

---

## [Managed Services](/managed) [Managed Services](/managed)

* [OpenStack](/openstack/managed)
* [Kubernetes](/kubernetes/managed)
* [Ceph](/ceph/managed)
* [Apps](/managed/apps)
* [Observability](/observability/managed)
* [Firefighting](/managed/firefighting-support)

---

## [AI / ML](/ai) [AI / ML](/ai)

* [MLOps](/ai/mlops)
* [Kubeflow](/ai/what-is-kubeflow)
* [MLflow](/ai/mlflow)
* [Consulting](/ai/consulting)
* [Data Science](/ai/data-science)
* [MLOps workshop](/ai/mlops-workshop)

---

## [Robotics](/robotics) [Robotics](/robotics)

* [What is ROS](/robotics/what-is-ros)
* [ROS ESM](/robotics/ros-esm)
* [Community](/robotics/community)
* [Docs](/robotics/docs)

---

## [IoT](/internet-of-things) [IoT](/internet-of-things)

* [App store](/internet-of-things/appstore)
* [Embedded Linux](/embedded)
* [Management](/internet-of-things/management)

---

## [Ubuntu Core](/core) [Ubuntu Core](/core)

* [Features](/core/features)
* [Success stories](/core/stories)
* [Services](/core/services)
* [Docs](/core/docs)

---

## [Ubuntu Desktop](/desktop) [Ubuntu Desktop](/desktop)

* [Organisations](/desktop/organisations)
* [Developers](/desktop/developers)
* [Flavours](/desktop/flavours)
* [WSL](/desktop/wsl)

---

## [Ubuntu Server](/server) [Ubuntu Server](/server)

* [Hyperscale](/server/hyperscale)
* [Docs](/server/docs)

---

## [Cloud](/cloud) [Cloud](/cloud)

* [What is cloud computing](/cloud/cloud-computing)
* [What is private cloud](/cloud/private-cloud)
* [What is hybrid cloud](/cloud/hybrid-cloud)
* [What is multi-cloud](/cloud/multi-cloud)
* [Public cloud](/cloud/public-cloud)

---

## [Security](/security) [Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

---

## [Landscape](/landscape) [Landscape](/landscape)

* [Features](/landscape/features)
* [Managed](/landscape/managed)
* [Compare](/landscape/compare)
* [Install](/landscape/docs/quickstart-deployment)
* [Docs](/landscape/docs)
* [Log in to Landscape](https://landscape.canonical.com/)

---

## [Containers](/containers) [Containers](/containers)

* [What are containers](/containers/what-are-containers)
* [Chiseled Ubuntu](/containers/chiseled)
* [Chiseled and .NET](/containers/chiseled/dotnet)

---

## [Downloads](/download) [Downloads](/download)

* [Desktop](/download/desktop)
* [Server](/download/server)
* [Core](/download/core)
* [Cloud](/download/cloud)

---

## [Support](/support) [Support](/support)

* [Your subscriptions](/pro/dashboard)
* [Account users](/pro/users)
* [Pricing](/pricing/pro)
* [Discourse](https://discourse.ubuntu.com/c/project/ubuntu-pro/116/)

---

## [Observability](/observability) [Observability](/observability)

* [What is observability](/observability/what-is-observability)
* [Managed](/observability/managed)

---

## [Pricing](/pricing) [Pricing](/pricing)

* [Consulting](/pricing/consulting)
* [Desktops](/pricing/desktop)
* [Devices](/pricing/devices)

---

## Solutions

* [AI](https://canonical.com/solutions/ai)
* [Data](https://canonical.com/data)
* [Infrastructure](https://canonical.com/solutions/infrastructure)
* [Secure open source](https://canonical.com/solutions/secure-open-source)

---

## Sectors

* [Automotive](/automotive)
* [Industrial](/industrial)
* [Government](/gov)
* [Telco](/telco)
* [Finance](/financial-services)

---

[Contact us](/contact-us)

* [About us](/about)
* [Community](/community)
* [Careers](https://www.canonical.com/careers)
* [Blog](/blog)
* [Resources](/engage)
* [Press centre](/blog/press-centre)

---

© 2025 Canonical Ltd.

Ubuntu and Canonical are registered trademarks of Canonical Ltd.

---

* [Legal information](/legal)
* [Data privacy](/legal/data-privacy)
* Manage your tracker settings
* [Report a bug on this site](https://github.com/canonical/ubuntu.com/issues/new?template=ISSUE_TEMPLATE.yaml)

Back to top

Go to the top of the page



=== Content from git.kernel.org_16a0d7e2_20250124_193509.html ===


| [cgit logo](/) | [index](/) : [kernel/git/torvalds/linux.git](/pub/scm/linux/kernel/git/torvalds/linux.git/) | for-next master |
| --- | --- | --- |
| Linux kernel source tree | Linus Torvalds |

| [about](/pub/scm/linux/kernel/git/torvalds/linux.git/about/)[summary](/pub/scm/linux/kernel/git/torvalds/linux.git/)[refs](/pub/scm/linux/kernel/git/torvalds/linux.git/refs/?id=4c03b862b12f980456f9de92db6d508a4999b788)[log](/pub/scm/linux/kernel/git/torvalds/linux.git/log/)[tree](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/?id=4c03b862b12f980456f9de92db6d508a4999b788)[commit](/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=4c03b862b12f980456f9de92db6d508a4999b788)[diff](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/?id=4c03b862b12f980456f9de92db6d508a4999b788)[stats](/pub/scm/linux/kernel/git/torvalds/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | David S. Miller <davem@davemloft.net> | 2017-02-17 16:19:39 -0500 |
| --- | --- | --- |
| committer | David S. Miller <davem@davemloft.net> | 2017-02-17 16:19:39 -0500 |
| commit | [4c03b862b12f980456f9de92db6d508a4999b788](/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=4c03b862b12f980456f9de92db6d508a4999b788) ([patch](/pub/scm/linux/kernel/git/torvalds/linux.git/patch/?id=4c03b862b12f980456f9de92db6d508a4999b788)) | |
| tree | [1e04c243957386fbd888c5accf4e88e7cc50bf78](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/?id=4c03b862b12f980456f9de92db6d508a4999b788) | |
| parent | [22f0708a718daea5e79de2d29b4829de016a4ff4](/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=22f0708a718daea5e79de2d29b4829de016a4ff4) ([diff](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/?id=4c03b862b12f980456f9de92db6d508a4999b788&id2=22f0708a718daea5e79de2d29b4829de016a4ff4)) | |
| download | [linux-4c03b862b12f980456f9de92db6d508a4999b788.tar.gz](/pub/scm/linux/kernel/git/torvalds/linux.git/snapshot/linux-4c03b862b12f980456f9de92db6d508a4999b788.tar.gz) | |

irda: Fix lockdep annotations in hashbin\_delete().A nested lock depth was added to the hasbin\_delete() code but it
doesn't actually work some well and results in tons of lockdep splats.
Fix the code instead to properly drop the lock around the operation
and just keep peeking the head of the hashbin queue.
Reported-by: Dmitry Vyukov <dvyukov@google.com>
Tested-by: Dmitry Vyukov <dvyukov@google.com>
Signed-off-by: David S. Miller <davem@davemloft.net>
[Diffstat](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/?id=4c03b862b12f980456f9de92db6d508a4999b788)

| -rw-r--r-- | [net/irda/irqueue.c](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/net/irda/irqueue.c?id=4c03b862b12f980456f9de92db6d508a4999b788) | 34 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 16 insertions, 18 deletions

| diff --git a/net/irda/irqueue.c b/net/irda/irqueue.cindex acbe61c7e68312..160dc89335e207 100644--- a/[net/irda/irqueue.c](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/net/irda/irqueue.c?id=22f0708a718daea5e79de2d29b4829de016a4ff4)+++ b/[net/irda/irqueue.c](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/net/irda/irqueue.c?id=4c03b862b12f980456f9de92db6d508a4999b788)@@ -383,9 +383,6 @@ EXPORT\_SYMBOL(hashbin\_new); \* for deallocating this structure if it's complex. If not the user can \* just supply kfree, which should take care of the job. \*/-#ifdef CONFIG\_LOCKDEP-static int hashbin\_lock\_depth = 0;-#endif int hashbin\_delete( hashbin\_t\* hashbin, FREE\_FUNC free\_func) { irda\_queue\_t\* queue;@@ -396,22 +393,27 @@ int hashbin\_delete( hashbin\_t\* hashbin, FREE\_FUNC free\_func) IRDA\_ASSERT(hashbin->magic == HB\_MAGIC, return -1;);  /\* Synchronize \*/- if ( hashbin->hb\_type & HB\_LOCK ) {- spin\_lock\_irqsave\_nested(&hashbin->hb\_spinlock, flags,- hashbin\_lock\_depth++);- }+ if (hashbin->hb\_type & HB\_LOCK)+ spin\_lock\_irqsave(&hashbin->hb\_spinlock, flags);  /\* \* Free the entries in the hashbin, TODO: use hashbin\_clear when \* it has been shown to work \*/ for (i = 0; i < HASHBIN\_SIZE; i ++ ) {- queue = dequeue\_first((irda\_queue\_t\*\*) &hashbin->hb\_queue[i]);- while (queue ) {- if (free\_func)- (\*free\_func)(queue);- queue = dequeue\_first(- (irda\_queue\_t\*\*) &hashbin->hb\_queue[i]);+ while (1) {+ queue = dequeue\_first((irda\_queue\_t\*\*) &hashbin->hb\_queue[i]);++ if (!queue)+ break;++ if (free\_func) {+ if (hashbin->hb\_type & HB\_LOCK)+ spin\_unlock\_irqrestore(&hashbin->hb\_spinlock, flags);+ free\_func(queue);+ if (hashbin->hb\_type & HB\_LOCK)+ spin\_lock\_irqsave(&hashbin->hb\_spinlock, flags);+ } } } @@ -420,12 +422,8 @@ int hashbin\_delete( hashbin\_t\* hashbin, FREE\_FUNC free\_func) hashbin->magic = ~HB\_MAGIC;  /\* Release lock \*/- if ( hashbin->hb\_type & HB\_LOCK) {+ if (hashbin->hb\_type & HB\_LOCK) spin\_unlock\_irqrestore(&hashbin->hb\_spinlock, flags);-#ifdef CONFIG\_LOCKDEP- hashbin\_lock\_depth--;-#endif- }  /\* \* Free the hashbin structure |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-24 19:33:46 +0000



=== Content from www.debian.org_a4b392c9_20250124_193510.html ===


---

[[Date Prev](msg00058.html)][[Date Next](msg00060.html)]
[[Thread Prev](msg00058.html)][[Thread Next](msg00060.html)]
[[Date Index](maillist.html#00059)]
[[Thread Index](threads.html#00059)]

# [SECURITY] [DSA 3804-1] linux security update

---

* *To*: debian-security-announce@lists.debian.org
* *Subject*: [SECURITY] [DSA 3804-1] linux security update
* *From*: Salvatore Bonaccorso <carnil@debian.org>
* *Date*: Wed, 08 Mar 2017 16:59:59 +0000
* *Message-id*: <[[🔎]](/msgid-search/E1clewR-0006ii-Mp%40master.debian.org) [E1clewR-0006ii-Mp@master.debian.org](msg00059.html)>
* *Reply-to*: debian-security-announce-request@lists.debian.org

---

```
-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA512

- -------------------------------------------------------------------------
Debian Security Advisory DSA-3804-1                   security@debian.org
<https://www.debian.org/security/>                     Salvatore Bonaccorso
March 08, 2017                        <https://www.debian.org/security/faq>
- -------------------------------------------------------------------------

Package        : linux
CVE ID         : CVE-2016-9588 CVE-2017-2636 CVE-2017-5669 CVE-2017-5986
                 CVE-2017-6214 CVE-2017-6345 CVE-2017-6346 CVE-2017-6348
                 CVE-2017-6353

Several vulnerabilities have been discovered in the Linux kernel that
may lead to a privilege escalation, denial of service or have other
impacts.

CVE-2016-9588

    Jim Mattson discovered that the KVM implementation for Intel x86
    processors does not properly handle #BP and #OF exceptions in an
    L2 (nested) virtual machine. A local attacker in an L2 guest VM
    can take advantage of this flaw to cause a denial of service for
    the L1 guest VM.

CVE-2017-2636

    Alexander Popov discovered a race condition flaw in the n_hdlc
    line discipline that can lead to a double free. A local
    unprivileged user can take advantage of this flaw for privilege
    escalation. On systems that do not already have the n_hdlc module
    loaded, this can be mitigated by disabling it:
    echo >> /etc/modprobe.d/disable-n_hdlc.conf install n_hdlc false

CVE-2017-5669

    Gareth Evans reported that privileged users can map memory at
    address 0 through the shmat() system call. This could make it
    easier to exploit other kernel security vulnerabilities via a
    set-UID program.

CVE-2017-5986

    Alexander Popov reported a race condition in the SCTP
    implementation that can be used by local users to cause a
    denial-of-service (crash). The initial fix for this was incorrect
    and introduced further security issues (CVE-2017-6353). This
    update includes a later fix that avoids those. On systems that do
    not already have the sctp module loaded, this can be mitigated by
    disabling it:
    echo >> /etc/modprobe.d/disable-sctp.conf install sctp false

CVE-2017-6214

    Dmitry Vyukov reported a bug in the TCP implementation's handling
    of urgent data in the splice() system call. This can be used by a
    remote attacker for denial-of-service (hang) against applications
    that read from TCP sockets with splice().

CVE-2017-6345

    Andrey Konovalov reported that the LLC type 2 implementation
    incorrectly assigns socket buffer ownership. This can be used
    by a local user to cause a denial-of-service (crash). On systems
    that do not already have the llc2 module loaded, this can be
    mitigated by disabling it:
    echo >> /etc/modprobe.d/disable-llc2.conf install llc2 false

CVE-2017-6346

    Dmitry Vyukov reported a race condition in the raw packet (af_packet)
    fanout feature. Local users with the CAP_NET_RAW capability (in any
    user namespace) can use this for denial-of-service and possibly for
    privilege escalation.

CVE-2017-6348

    Dmitry Vyukov reported that the general queue implementation in
    the IrDA subsystem does not properly manage multiple locks,
    possibly allowing local users to cause a denial-of-service
    (deadlock) via crafted operations on IrDA devices.

For the stable distribution (jessie), these problems have been fixed in
version 3.16.39-1+deb8u2.

We recommend that you upgrade your linux packages.

Further information about Debian Security Advisories, how to apply
these updates to your system and frequently asked questions can be
found at: <https://www.debian.org/security/>

Mailing list: debian-security-announce@lists.debian.org
-----BEGIN PGP SIGNATURE-----

iQKTBAEBCgB9FiEERkRAmAjBceBVMd3uBUy48xNDz0QFAljAOE9fFIAAAAAALgAo
aXNzdWVyLWZwckBub3RhdGlvbnMub3BlbnBncC5maWZ0aGhvcnNlbWFuLm5ldDQ2
NDQ0MDk4MDhDMTcxRTA1NTMxRERFRTA1NENCOEYzMTM0M0NGNDQACgkQBUy48xND
z0Q3Rg/7BAWcn97hmyotDGbm1LQLrRBiyjW66+aT51IHzbKbY8y+dVUodFDOeVpt
EWoisRwmeLj8A79v5GTV9Fdhu86vKt+E7N93KVeNQY8ELLxNEM+v4R0QGFbfzFpz
8CQn3kpZgQP9grMKBiY2quJNgXm18eWBDBdpQwvkOzr5AtKGNnX9nqEx6xWezA79
okdBJM88jETOWWI91njTCJIVYFhJOw1hBV+dYJVZIibR5pvjRLHRkGXhVDvE5erZ
m5VehpBlmdJAuK9JoovzKenEWJmAL775nwWKIyau4P+FsQxkPzuk1sk4MrqC9ZML
KShQP9FX/YbqhBDtIN/8pTK/r0zqn/L0FZc89woqdTCotzrgoRjiSjgTU37WhU66
YxfDNYzJ7EeAWH68UjiMNcABz4tlEr5U8B+eQLJYzgGeF5s37j3l0UqmWJ/6j8fB
gaza8eLvw0/97Cx9Wzp7blbjaQ722z0tfKJ7NiLgGTUJU655R4XtMAcPDc8Dr8mP
ocncMDy76L+B9JdTh3+KK0DsMv0YLnOK/d6LzHkGJtap/UubQZTNHIeAd472Sygm
iBj/R2ZZhZRoMoWjqlmBf4ZjyVgOpofOYSWPJ/AEdgF8zkCMA1ZBmB/WXqLyvOkh
WFR8Cq23dNS+GYtyqqi7jbAhEzqv36fzJ7pymr1/RrikrRwRW3E=
=WOjC
-----END PGP SIGNATURE-----

```

---



=== Content from git.kernel.org_d6265200_20250126_030635.html ===


| [cgit logo](/) | [index](/) : [kernel/git/torvalds/linux.git](/pub/scm/linux/kernel/git/torvalds/linux.git/) | for-next master |
| --- | --- | --- |
| Linux kernel source tree | Linus Torvalds |

| [about](/pub/scm/linux/kernel/git/torvalds/linux.git/about/)[summary](/pub/scm/linux/kernel/git/torvalds/linux.git/)[refs](/pub/scm/linux/kernel/git/torvalds/linux.git/refs/?id=4c03b862b12f980456f9de92db6d508a4999b788)[log](/pub/scm/linux/kernel/git/torvalds/linux.git/log/)[tree](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/?id=4c03b862b12f980456f9de92db6d508a4999b788)[commit](/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=4c03b862b12f980456f9de92db6d508a4999b788)[diff](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/?id=4c03b862b12f980456f9de92db6d508a4999b788)[stats](/pub/scm/linux/kernel/git/torvalds/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | David S. Miller <davem@davemloft.net> | 2017-02-17 16:19:39 -0500 |
| --- | --- | --- |
| committer | David S. Miller <davem@davemloft.net> | 2017-02-17 16:19:39 -0500 |
| commit | [4c03b862b12f980456f9de92db6d508a4999b788](/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=4c03b862b12f980456f9de92db6d508a4999b788) ([patch](/pub/scm/linux/kernel/git/torvalds/linux.git/patch/?id=4c03b862b12f980456f9de92db6d508a4999b788)) | |
| tree | [1e04c243957386fbd888c5accf4e88e7cc50bf78](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/?id=4c03b862b12f980456f9de92db6d508a4999b788) | |
| parent | [22f0708a718daea5e79de2d29b4829de016a4ff4](/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=22f0708a718daea5e79de2d29b4829de016a4ff4) ([diff](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/?id=4c03b862b12f980456f9de92db6d508a4999b788&id2=22f0708a718daea5e79de2d29b4829de016a4ff4)) | |
| download | [linux-4c03b862b12f980456f9de92db6d508a4999b788.tar.gz](/pub/scm/linux/kernel/git/torvalds/linux.git/snapshot/linux-4c03b862b12f980456f9de92db6d508a4999b788.tar.gz) | |

irda: Fix lockdep annotations in hashbin\_delete().A nested lock depth was added to the hasbin\_delete() code but it
doesn't actually work some well and results in tons of lockdep splats.
Fix the code instead to properly drop the lock around the operation
and just keep peeking the head of the hashbin queue.
Reported-by: Dmitry Vyukov <dvyukov@google.com>
Tested-by: Dmitry Vyukov <dvyukov@google.com>
Signed-off-by: David S. Miller <davem@davemloft.net>
[Diffstat](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/?id=4c03b862b12f980456f9de92db6d508a4999b788)

| -rw-r--r-- | [net/irda/irqueue.c](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/net/irda/irqueue.c?id=4c03b862b12f980456f9de92db6d508a4999b788) | 34 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 16 insertions, 18 deletions

| diff --git a/net/irda/irqueue.c b/net/irda/irqueue.cindex acbe61c7e68312..160dc89335e207 100644--- a/[net/irda/irqueue.c](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/net/irda/irqueue.c?id=22f0708a718daea5e79de2d29b4829de016a4ff4)+++ b/[net/irda/irqueue.c](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/net/irda/irqueue.c?id=4c03b862b12f980456f9de92db6d508a4999b788)@@ -383,9 +383,6 @@ EXPORT\_SYMBOL(hashbin\_new); \* for deallocating this structure if it's complex. If not the user can \* just supply kfree, which should take care of the job. \*/-#ifdef CONFIG\_LOCKDEP-static int hashbin\_lock\_depth = 0;-#endif int hashbin\_delete( hashbin\_t\* hashbin, FREE\_FUNC free\_func) { irda\_queue\_t\* queue;@@ -396,22 +393,27 @@ int hashbin\_delete( hashbin\_t\* hashbin, FREE\_FUNC free\_func) IRDA\_ASSERT(hashbin->magic == HB\_MAGIC, return -1;);  /\* Synchronize \*/- if ( hashbin->hb\_type & HB\_LOCK ) {- spin\_lock\_irqsave\_nested(&hashbin->hb\_spinlock, flags,- hashbin\_lock\_depth++);- }+ if (hashbin->hb\_type & HB\_LOCK)+ spin\_lock\_irqsave(&hashbin->hb\_spinlock, flags);  /\* \* Free the entries in the hashbin, TODO: use hashbin\_clear when \* it has been shown to work \*/ for (i = 0; i < HASHBIN\_SIZE; i ++ ) {- queue = dequeue\_first((irda\_queue\_t\*\*) &hashbin->hb\_queue[i]);- while (queue ) {- if (free\_func)- (\*free\_func)(queue);- queue = dequeue\_first(- (irda\_queue\_t\*\*) &hashbin->hb\_queue[i]);+ while (1) {+ queue = dequeue\_first((irda\_queue\_t\*\*) &hashbin->hb\_queue[i]);++ if (!queue)+ break;++ if (free\_func) {+ if (hashbin->hb\_type & HB\_LOCK)+ spin\_unlock\_irqrestore(&hashbin->hb\_spinlock, flags);+ free\_func(queue);+ if (hashbin->hb\_type & HB\_LOCK)+ spin\_lock\_irqsave(&hashbin->hb\_spinlock, flags);+ } } } @@ -420,12 +422,8 @@ int hashbin\_delete( hashbin\_t\* hashbin, FREE\_FUNC free\_func) hashbin->magic = ~HB\_MAGIC;  /\* Release lock \*/- if ( hashbin->hb\_type & HB\_LOCK) {+ if (hashbin->hb\_type & HB\_LOCK) spin\_unlock\_irqrestore(&hashbin->hb\_spinlock, flags);-#ifdef CONFIG\_LOCKDEP- hashbin\_lock\_depth--;-#endif- }  /\* \* Free the hashbin structure |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-26 03:05:12 +0000


