=== Content from jenkins.io_246ce8b2_20250125_232535.html ===


# Jenkins Security Advisory 2017-07-10

|  | This advisory originally recommended upgrading Poll SCM plugin to version 1.4. This was incorrect. Version 1.3.1 contains the fix. |
| --- | --- |

This advisory announces vulnerabilities in these Jenkins plugins:

* [Docker Commons Plugin](https://plugins.jenkins.io/docker-commons)
* [Git Plugin](https://plugins.jenkins.io/git)
* [GitHub Branch Source Plugin](https://plugins.jenkins.io/github-branch-source)
* [Parameterized Trigger Plugin](https://plugins.jenkins.io/parameterized-trigger)
* [Periodic Backup Plugin](https://plugins.jenkins.io/periodicbackup)
* [Pipeline: Build Step Plugin](https://plugins.jenkins.io/pipeline-build-step)
* [Pipeline: Groovy Plugin](https://plugins.jenkins.io/workflow-cps)
* [Poll SCM Plugin](https://plugins.jenkins.io/pollscm)
* [Role-based Authorization Strategy Plugin](https://plugins.jenkins.io/role-strategy)
* [Script Security Plugin](https://plugins.jenkins.io/script-security)
* [Sidebar Link Plugin](https://plugins.jenkins.io/sidebar-link)
* [SSH Plugin](https://plugins.jenkins.io/ssh)
* [Subversion Plugin](https://plugins.jenkins.io/subversion)

## Description

### Parameterized Trigger Plugin fails to check Item/Build permission

**SECURITY-201 / CVE-2017-1000084**

Builds in Jenkins are associated with an authentication that controls the permissions that the build has to interact with other elements in Jenkins.
By default, builds run as SYSTEM and are unconstrained unless plugins implement specific additional permission checks.

Plugins like [Authorize Project Plugin](https://plugins.jenkins.io/authorize-project) allow changing the authentication associated with a build.

The Parameterized Trigger Plugin did not check the build authentication it was running as and allowed triggering any other project in Jenkins.

The plugin has been adapted to now check for Item/Build permission before triggering a downstream build.

## CSRF vulnerability and insufficient permission checks allow capturing credentials in Subversion Plugin

**SECURITY-303 / CVE-2017-1000085**

Subversion Plugin connects to a user-specified Subversion repository as part of form validation (e.g. to retrieve a list of tags).

This functionality improperly checked permissions, allowing any user with Item/Build permission (but not Item/Configure) to connect to any web server or Subversion server and send credentials with a known ID, thereby possibly capturing them.

Additionally, this functionality did not require POST requests be used, thereby allowing the above to be performed without direct access to Jenkins via Cross-Site Request Forgery attacks.

This functionality now properly checks permissions and is only available via POST.

## Missing permission checks in Periodic Backup Plugin allow every user to change settings

**SECURITY-335 / CVE-2017-1000086**

The Periodic Backup Plugin did not perform any permission checks, allowing any user with Overall/Read access to change its settings, trigger backups, restore backups, and also delete all previous backups via log rotation.

Additionally, the plugin was not requiring requests to its API be sent via POST, thereby opening itself to Cross-Site Request Forgery attacks.

The plugin configuration now properly checks permissions and is only available via POST.

## Unprivileged users with Overall/Read access are able to enumerate credential IDs in GitHub Branch Source Plugin

**SECURITY-342 / CVE-2017-1000087**

GitHub Branch Source provides a list of applicable credential IDs to allow users configuring a job to select the one they’d like to use.

This functionality did not check permissions, allowing any user with Overall/Read permission to get a list of valid credentials IDs.
Those could be used as part of an attack to capture the credentials using another vulnerability.

An enumeration of credentials IDs in this plugin now requires the permission to have Extended Read permission (when that permission is enabled; otherwise Configure permission) to the job in whose context credentials are being accessed.
If no job context exists, Overall/Administer permission is required.

## Persisted XSS Vulnerability in Sidebar Link Plugin

**SECURITY-352 / CVE-2017-1000088**

The Sidebar Link plugin allows users able to configure jobs, views, and agents to add entries to the sidebar of these objects.

There was no input validation, which meant users were able to use `javascript:` schemes for these links, a persisted XSS vulnerability.

Now, only a set of approved schemes are allowed by default: `http`, `https`, `ftp`, `ftps`, `mailto`, `news`, `irc, gopher`, `nntp`, `feed`, `telnet`, `mms`, `rtsp`, `svn`, `tel`, `fax`, `xmpp`, as well as relative links.
Sidebar entries configured with prohibited schemes instead redirect to an error page in Jenkins explaining that it’s prohibited.

To add or remove from this list of schemes, provide the Java system property `hudson.plugins.sidebar_link.LinkProtection.whitelistedSchemes` with the complete comma-separated list of schemes to allow.

## Pipeline: Build Step Plugin fails to check Item/Build permission

**SECURITY-433 / CVE-2017-1000089**

Builds in Jenkins are associated with an authentication that controls the permissions that the build has to interact with other elements in Jenkins.
By default, builds run as SYSTEM and are unconstrained unless plugins implement specific additional permission checks.

Plugins like [Authorize Project Plugin](https://plugins.jenkins.io/authorize-project) allow changing the authentication associated with a build.

The Pipeline: Build Step Plugin did not check the build authentication it was running as and allowed triggering any other project in Jenkins.

The plugin has been adapted to now check for Item/Build permission before triggering a downstream build.

## CSRF vulnerability in Role-based Authorization Strategy Plugin configuration

**SECURITY-516 / CVE-2017-1000090**

Role-based Authorization Strategy Plugin was not requiring requests to its API be sent via POST, thereby opening itself to Cross-Site Request Forgery attacks. This allowed attackers to add administrator role to any user, or to remove the authorization configuration, preventing legitimate access to Jenkins.

This functionality is now only available via POST.

## CSRF vulnerability and insufficient permission checks allow capturing credentials in GitHub Branch Source Plugin

**SECURITY-527 / CVE-2017-1000091**

GitHub Branch Source Plugin connects to a user-specified GitHub API URL (e.g. GitHub Enterprise) as part of form validation and completion (e.g. to verify Scan Credentials are correct).

This functionality improperly checked permissions, allowing any user with Overall/Read access to Jenkins to connect to any web server and send credentials with a known ID, thereby possibly capturing them.

Additionally, this functionality did not require POST requests be used, thereby allowing the above to be performed without direct access to Jenkins via Cross-Site Request Forgery.

This functionality now properly checks permissions and is only available via POST.

## CSRF vulnerability in Git plugin allows capturing credentials

**SECURITY-528 / CVE-2017-1000092**

Git Plugin connects to a user-specified Git repository as part of form validation.

An attacker with no direct access to Jenkins but able to guess at a username/password credentials ID could trick a developer with job configuration permissions into following a link with a maliciously crafted Jenkins URL which would result in the Jenkins Git client sending the username and password to an attacker-controlled server.

This functionality now is only available via POST.

## CSRF vulnerability in Poll SCM Plugin allowed unauthorized polling

**SECURITY-529 / CVE-2017-1000093**

Poll SCM Plugin was not requiring requests to its API be sent via POST, thereby opening itself to Cross-Site Request Forgery attacks. This allowed attackers to initiate polling of projects with a known name.

While Jenkins in general does not consider polling to be a protection-worthy action as it’s similar to cache invalidation, the plugin specifically adds a permission to be able to use this functionality, and this issue undermines that permission.

This functionality now is only available via POST.

## Unprivileged users with Overall/Read access are able to enumerate credential IDs in Docker Commons Plugin

**SECURITY-533 / CVE-2017-1000094**

Docker Commons Plugin provides a list of applicable credential IDs to allow users configuring a job to select the one they’d like to use to authenticate with a Docker Registry.

This functionality did not check permissions, allowing any user with Overall/Read permission to get a list of valid credentials IDs.
Those could be used as part of an attack to capture the credentials using another vulnerability.

An enumeration of credentials IDs in this plugin now requires the permission to have Extended Read permission (when that permission is enabled; otherwise Configure permission) to the job in whose context credentials are being accessed.
If no job context exists, Overall/Administer permission is required.

## Unsafe methods in the default list of approved signatures in Script Security Plugin

**SECURITY-538 / CVE-2017-1000095**

The default list of approved signatures included the entries:

```
DefaultGroovyMethods.putAt(Object, String, Object)
DefaultGroovyMethods.getAt(Object, String)
```

These allowed circumventing many of the access restrictions implemented in the script sandbox by using e.g. `currentBuild['rawBuild']` rather than `currentBuild.rawBuild`.

Additionally, the following entries allowed accessing private data that would not be accessible otherwise due to script security:

```
groovy.json.JsonOutput.toJson(Closure)
groovy.json.JsonOutput.toJson(Object)
```

These have now been removed from the list of approved signatures and added to the list of dangerous signatures.

Scripts, such as Pipeline jobs, that integrate with Script Security and use these methods will now fail.
Use of these methods will appear on the In-Process Script Approval page, and it warns administrators that they are unsafe to approve.

## Arbitrary code execution due to incomplete sandbox protection in Pipeline: Groovy Plugin

**SECURITY-551 / CVE-2017-1000096**

Pipelines are subject to *script security*: Either the entire Pipeline needs to be approved, or it runs in a sandbox, with only approved methods etc. allowed to be called.

Constructors, instance variable initializers, and instance initializers in Pipeline scripts were not subject to sandbox protection, and could therefore execute arbitrary code.

This could be exploited e.g. by regular Jenkins users with the permission to configure Pipelines in Jenkins, or by trusted committers to repositories containing Jenkinsfiles.

These language elements are now subject to sandbox protection.

This change may cause existing scripts relying on the incomplete sandbox protection to start failing, and requiring additional script approval.

|  | The fix for this introduced a regression that results in constructors and instance initializers of classes defined in pipeline scripts no longer being able to set `final` fields. Static initializers are no longer able to set `static final` fields. The workaround is to make fields non-final. |
| --- | --- |

## SSH Plugin stored credentials in plain text configuration files

**JENKINS-21436 / CVE-2017-1000245**

The SSH Plugin stores credentials which allow jobs to access remote servers via the SSH protocol.
User passwords and passphrases for encrypted SSH keys are stored in plaintext in a configuration file.

SSH Plugin now integrates with the [Credentials Plugin](https://plugins.jenkins.io/credentials) and existing credentials are migrated.

## Severity

* SECURITY-201: [medium](https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:N/AC:L/PR:L/UI:N/S:U/C:N/I:L/A:N)
* SECURITY-303: [low](https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:N/AC:H/PR:L/UI:N/S:U/C:L/I:N/A:N)
* SECURITY-335: [high](https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:N/AC:L/PR:L/UI:N/S:U/C:H/I:L/A:L)
* SECURITY-342: [medium](https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:N/AC:L/PR:L/UI:N/S:U/C:L/I:N/A:N)
* SECURITY-352: [medium](https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:N/AC:L/PR:L/UI:R/S:C/C:L/I:L/A:N)
* SECURITY-433: [low](https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:N/AC:H/PR:N/UI:N/S:U/C:N/I:L/A:N)
* SECURITY-516: [medium](https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:N/AC:L/PR:N/UI:R/S:U/C:N/I:H/A:N)
* SECURITY-527: [low](https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:N/AC:H/PR:L/UI:N/S:U/C:L/I:N/A:N)
* SECURITY-528: [low](https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:N/AC:H/PR:N/UI:R/S:U/C:L/I:N/A:N)
* SECURITY-529: [low](https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:N/AC:H/PR:N/UI:R/S:U/C:N/I:L/A:N)
* SECURITY-533: [medium](https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:N/AC:L/PR:L/UI:N/S:U/C:L/I:N/A:N)
* SECURITY-538: [high](https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:N/AC:L/PR:L/UI:N/S:U/C:H/I:H/A:H)
* SECURITY-551: [high](https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:N/AC:L/PR:L/UI:N/S:U/C:H/I:H/A:H)
* JENKINS-21436: [medium](https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:L/AC:L/PR:N/UI:N/S:U/C:L/I:N/A:N)

## Affected versions

* Docker Commons Plugin up to and including version 1.7
* Git Plugin up to and including version 3.3.1 and 2.4.0-beta-1
* GitHub Branch Source Plugin up to and including version 2.0.7 and 2.2.0-beta-1
* Parameterized Trigger Plugin up to and including version 2.34
* Periodic Backup Plugin up to and including version 1.4
* Pipeline: Build Step Plugin up to and including version 2.5
* Pipeline: Groovy Plugin up to and including version 2.36
* Poll SCM Plugin up to and including version 1.3
* Role-based Authorization Strategy Plugin up to and including version 2.5.0
* Script Security Plugin up to and including version 1.29
* Sidebar Link Plugin up to and including version 1.8
* SSH Plugin up to and including version 2.4
* Subversion Plugin up to and including version 2.8

## Fix

* Docker Commons Plugin should be updated to version 1.8
* Git Plugin should be updated to version 3.3.2 or 3.4.0-beta-2
* GitHub Branch Source Plugin should be updated to version 2.0.8 or 2.2.0-beta-2
* Parameterized Trigger Plugin should be updated to version 2.35
* Periodic Backup Plugin should be updated to version 1.5
* Pipeline: Build Step Plugin should be updated to version 2.5.1
* Pipeline: Groovy Plugin should be updated to version 2.36.1
* Poll SCM Plugin should be updated to version 1.3.1
* Role-based Authorization Strategy Plugin should be updated to version 2.5.1
* Script Security Plugin should be updated to version 1.29.1
* Sidebar Link Plugin should be updated to version 1.9
* SSH Plugin should be updated to version 2.5
* Subversion Plugin should be updated to version 2.9

These versions include fixes to the vulnerabilities described above.
All prior versions are affected by these vulnerabilities unless otherwise indicated.

## Credit

The Jenkins project would like to thank the reporters for discovering and [reporting](/security/#reporting-vulnerabilities) these vulnerabilities:

* **Daniel Beck, CloudBees, Inc.** for SECURITY-529
* **Jesse Glick, CloudBees, Inc.** for SECURITY-303, SECURITY-342, SECURITY-527, SECURITY-528
* **Karl Shultz, CloudBees, Inc.** for SECURITY-533
* **Nathan Rennie-Waldock** for SECURITY-335
* **Simon St John-Green** for SECURITY-551
* **Steven Christou, CloudBees, Inc.** for SECURITY-201
* **Suhas Sunil Gaikwad @IamSuhasGaikwad** for SECURITY-352



=== Content from plugins.jenkins.io_088c7fc6_20250126_124613.html ===

# SSH

How to installThe Jenkins project announced unresolved security vulnerabilities affecting the current version of this plugin ([why?](https://www.jenkins.io/security/plugins/#unresolved)):

* **[CSRF vulnerability and missing permission checks allow capturing credentials](https://www.jenkins.io/security/advisory/2022-05-17/#SECURITY-2093)**
* **[Missing permission check allows enumerating credentials IDs](https://www.jenkins.io/security/advisory/2022-05-17/#SECURITY-2315)**

* [Documentation](/ssh/)
* [Releases](/ssh/releases/)
* [Issues](/ssh/issues/)
* [Dependencies](/ssh/dependencies/)
* [Health Score](/ssh/healthscore/)

## About

This is a Jenkins plugin that allows for you to run operations with SSH. (I.e. commands, file management etc) This plugin was derived from the very cool [SCP Plugin](https://plugins.jenkins.io/scp/).

## Usage Documentation and Examples

First go to the global configuration page and add a SSH site.

[![](https://cdn.jsdelivr.net/gh/jenkinsci/ssh-plugin@master/docs/images/ssh-global-cfg.png)](https://github.com/jenkinsci/ssh-plugin/blob/master/docs/images/ssh-global-cfg.png)

For your job select a configured site and enter the shell commands that should be executed before and after the build.

[![](https://cdn.jsdelivr.net/gh/jenkinsci/ssh-plugin@master/docs/images/ssh-job-cfg.png)](https://github.com/jenkinsci/ssh-plugin/blob/master/docs/images/ssh-job-cfg.png)

Log will look like this.

[![](https://cdn.jsdelivr.net/gh/jenkinsci/ssh-plugin@master/docs/images/ssh-job-log.png)](https://github.com/jenkinsci/ssh-plugin/blob/master/docs/images/ssh-job-log.png)

## TODO

* i18n
* we also need a post deploy script (ask some of the core team how to do that)
* investigate stop behavior of Hudson jobs using the ssh Plugin
* use same sites as scp plugin (plugin dependencies???)
* ...

## Building this project

```
mvn install
```

## Contribute

Fork and send a pull request (or create an issue on GitHub or in JIRA)

##### Version: 158.ve2a\_e90fb\_7319

Released: 2 months agoRequires Jenkins 2.426.3ID: ssh
##### Installed on 12.5% of controllers

[View detailed version information](https://old.stats.jenkins.io/pluginversions/ssh.html)
##### Links

[GitHub](https://github.com/jenkinsci/ssh-plugin)[Open issues (Jira)](https://issues.jenkins.io/issues/?jql=resolution%20is%20EMPTY%20and%20component%3D16049)[Report an issue (Jira)](https://www.jenkins.io/participate/report-issue/redirect/#16049/ssh)[Javadoc](https://javadoc.jenkins.io/plugin/ssh)
##### Labels

[Build Wrappers](/ui/search/?labels=buildwrapper)
##### Maintainers

[edmund\_wagner](/ui/search/?query=edmund_wagner)[Łukasz Jąder](/ui/search/?query=ljader)
##### Help us improve this page!

To propose a change submit a pull request to [the plugin page](https://github.com/jenkinsci/ssh-plugin) on GitHub.
##### Previous Security Warnings

* ###### [Credentials are stored in unencrypted configuration files](https://jenkins.io/security/advisory/2017-07-10/)

  + Affects version 2.4 and earlier
![tracker](https://jenkins-matomo.do.g4v.dev/piwik.php?idsite=1&rec=1&url=https://plugins.jenkins.io//ssh/)



=== Content from plugins.jenkins.io_e2ea83b9_20250126_124612.html ===

# Subversion

How to install

* [Documentation](/subversion/)
* [Releases](/subversion/releases/)
* [Issues](/subversion/issues/)
* [Dependencies](/subversion/dependencies/)
* [Health Score](/subversion/healthscore/)

# Jenkins Subversion Plugin

[![Jenkins Plugin](https://camo.githubusercontent.com/74aa28fa742950811bdb3f888fdebaaab62c9e2fc21116cfa99d6a5ad0ef27a9/68747470733a2f2f696d672e736869656c64732e696f2f6a656e6b696e732f706c7567696e2f762f73756276657273696f6e2e737667)](https://plugins.jenkins.io/subversion) [![GitHub release](https://camo.githubusercontent.com/010c76795b3c9a18548f7a8fe8cd79d86d0f41970e77e7c6c2557c3301c99706/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f72656c656173652f6a656e6b696e7363692f73756276657273696f6e2d706c7567696e2e7376673f6c6162656c3d72656c65617365)](https://github.com/jenkinsci/subversion-plugin/releases/latest) [![Jenkins Plugin Installs](https://camo.githubusercontent.com/c2f043b2d3d28857114c4241c1dbd03ce1da0d25cf34d65f0c5cd8b2f5082711/68747470733a2f2f696d672e736869656c64732e696f2f6a656e6b696e732f706c7567696e2f692f73756276657273696f6e2e7376673f636f6c6f723d626c7565)](https://plugins.jenkins.io/subversion)

This plugin adds the Subversion support (via SVNKit) to Jenkins.

# Basic Usage

Once this plugin is installed, you'll see Subversion as one of the options in the SCM section of job configurations. See inline help for more information about how to use it.

### Usage with Server Certificates

An important note for those wanting to use client certificates to authenticate to your subversion server. Your PKCS12 cert file must not have a blank passphrase or a blank export password as it will cause authentication to fail. Refer to [SVNKit:0000271](http://issues.tmatesoft.com/issue/SVNOLD-271 "SVNKit:0000271") for more details.

# Advanced Features/Configurations

## Proxy

You can set the proxy in C:/Users/<user>/AppData/Roaming/Subversion/servers (Windows) or ~/.subversion/servers (Linux)

*(Jenkins as a service on Windows : C:\Windows\SysWOW64\config\systemprofile\AppData\Roaming\Subversion\servers)*

> There's a tension between doing this in Jenkins vs following the existing Subversion convention — the former has a benefit of being available on all the agents. In this case, the proxy is a system dependent setting, which might be different between different agents, so I think it makes sense to keep it in ~/.subversion/servers. (See <https://issues.jenkins-ci.org/browse/JENKINS-4041>)

## Post-commit hook

Jenkins can poll Subversion repositories for changes, and while this is reasonably efficient, this can only happen up to every once a minute, so you may still have to wait a full minute before Jenkins detects a change.

To reduce this delay, you can set up [a post commit hook](http://svnbook.red-bean.com/en/1.5/svn.reposadmin.create.html#svn.reposadmin.create.hooks) so the Subversion repository can notify Jenkins whenever a change is made to that repository. To do this, put the following script in your `post-commit` file (in the $REPOSITORY/hooks directory):

```
REPOS="$1"
REV="$2"
UUID=`svnlook uuid $REPOS`
/usr/bin/wget \
  --header "Content-Type:text/plain;charset=UTF-8" \
  --post-data "`svnlook changed --revision $REV $REPOS`" \
  --output-document "-" \
  --timeout=2 \
  http://server/subversion/${UUID}/notifyCommit?rev=$REV

```

Notice the rev=$REV parameter, this tells Jenkins to check out exactly the revision which was reported by the hook. If your job has multiple Subversion module locations defined, this may lead to inconsistent checkouts - so it's recommended to leave out '?rev=$REV' in that case.
 You may also want to leave out the '?rev=$REV' parameter if you are using Maven to release your projects and do not want Jenkins to build the intermediate prepare-release commit (ie: the released artifacts).
 See [JENKINS-14254](https://issues.jenkins-ci.org/browse/JENKINS-14254) for details.

Jobs on Jenkins need to be configured with the SCM polling option to benefit from this behavior. This is so that you can have some jobs that are never triggered by the post-commit hook (in the $REPOSITORY/hooks directory), such as release related tasks, by omitting the SCM polling option. The configured polling can have any schedule (probably infrequent like monthly or yearly). The net effect is as if polling happens out of their usual cycles.

For this to work, your Jenkins has to allow anonymous read access (specifically, "Job > Read" access) to the system. If access control to your Jenkins is more restrictive, you may need to specify the username and password, depending on how your authentication is configured.

If your Jenkins uses the "Prevent Cross Site Request Forgery exploits" security option, the above request will be rejected with 403 errors ("No valid crumb was included"). The crumb needed in this request can be obtained from the URL `http:``//server/crumbIssuer/api/xml` (or `/api/json`). This can be included in the wget call above with something like this:

```
--header `wget -q --output-document - \
  'http://server/crumbIssuer/api/xml?xpath=concat(//crumbRequestField,":",//crumb)'`

```

### Considerations

Since `wget` by default retries up to **20 times** when not succeeding within the given timeout, `--timeout=2` on a slow SVN server may cause Jenkins to scan the repository many more times than needed, further slowing down the SVN Server which after a while makes Jenkins unresponsive.

Possible solutions to this problem are to increase the timeout, to add a lower maximum number of retries using the argument `--retries=3` or to make the `wget` call asynchronous (and thus ignoring any communication errors) by adding `2>&1 &` last on the `wget` call.

Having the timeout too low can also cause your commits to hang and throw either 502 errors if you are behind a proxy, or post-commit errors if not. Increasing the timeout until you no longer see wget retrying should fix the issue.

### More robust \*nix post-commit hook example

The basic script above is fine if your server does not do authentication or you have no problem providing anonymous read access to Jenkins (as well as anonymous read to all the individual jobs you want to trigger if you are using project-based matrix authorization). Here is a script that includes the more robust security concepts hinted at in the basic example.

```
#!/bin/sh
REPOS="$1"
REV="$2"

# No environment is passed to svn hook scripts; set paths to external tools explicitly:
WGET=/usr/bin/wget
SVNLOOK=/usr/bin/svnlook

# If your server requires authentication, it is recommended that you set up a .netrc file to store your username and password
# Better yet, since Jenkins v. 1.426, use the generated API Token in place of the password
# See https://wiki.jenkins-ci.org/display/JENKINS/Authenticating+scripted+clients
# Since no environment is passed to hook scripts, you need to set $HOME (where your .netrc lives)
# By convention, this should be the home dir of whichever user is running the svn process (i.e. apache)
HOME=/var/www/

UUID=`$SVNLOOK uuid $REPOS`
NOTIFY_URL="subversion/${UUID}/notifyCommit?rev=${REV}"
CRUMB_ISSUER_URL='crumbIssuer/api/xml?xpath=concat(//crumbRequestField,":",//crumb)'

function notifyCI {
    # URL to Jenkins server application (with protocol, hostname, port and deployment descriptor if needed)
    CISERVER=$1

    # Check if "[X] Prevent Cross Site Request Forgery exploits" is activated
    # so we can present a valid crumb or a proper header
    CONTENT_TYPE_HEADER="--header Content-Type:text/plain;charset=UTF-8"
    CRUMB=`$WGET --auth-no-challenge --output-document - ${CISERVER}/${CRUMB_ISSUER_URL}`
    if [ "$CRUMB" != "" ]; then CRUMB_HEADER="--header $CRUMB"; fi

    $WGET \
        --auth-no-challenge \
        $CONTENT_TYPE_HEADER \
        $CRUMB_HEADER \
        --post-data "`$SVNLOOK changed --revision $REV $REPOS`" \
        --output-document "-"\
        --timeout=2 \
        ${CISERVER}/${NOTIFY_URL}
}

# The code above was placed in a function so you can easily notify multiple Jenkins servers:
notifyCI "http://myPC.company.local:8080"
notifyCI "http://jenkins.company.com:8080/jenkins"

```

The script above takes care of the Prevent Cross Site Request Forgery exploits option if you have it enabled on your server. If you do not have that option enabled, the extra wget call is harmless, but feel free to remove it if you do not need it. The script above also requires that you set up a .netrc file in the home directory of the user you are running subversion as (either the svnserve process or httpd). For more info on .netrc file syntax, look [here](http://www.mavetju.org/unix/netrc.php). The script above makes it easy to notify multiple Jenkins servers of the same SVN commit. If you have a .netrc file, it keeps it easy even if they have different admin users set up. If you don't want to mess with a .netrc file, you could just hard-code the user and password (or API Token) info in the file and add --username=user and --password="pass" flags to the wget calls.

### Windows specific post-commit hook

The above script is difficult under the Windows command processor seeing as there is no support for backtick output extraction and there is no built in wget command. Instead the following contents can be added to `post-commit.bat` (in the $REPOSITORY/hooks directory):

```
SET REPOS=%1
SET REV=%2
SET CSCRIPT=%windir%\system32\cscript.exe
SET VBSCRIPT=C:\Repositories\post-commit-hook-jenkins.vbs
SET SVNLOOK=C:\Subversion\svnlook.exe
SET JENKINS=http://server/
REM AUTHORIZATION: Set to "" for anonymous acceess
REM AUTHORIZATION: Set to encoded Base64 string, generated from "user_id:api_token"
REM                found on Jenkins under "user/configure/API token"
REM                User needs "Job/Read" permission on Jenkins
SET AUTHORIZATION=""
"%CSCRIPT%" "%VBSCRIPT%" "%REPOS%" %2 "%SVNLOOK%" %JENKINS% %AUTHORIZATION%

```

The batch file relies on the following VBScript being available in the file designated by the `VBSCRIPT` variable above:

```
repos         = WScript.Arguments.Item(0)
rev           = WScript.Arguments.Item(1)
svnlook       = WScript.Arguments.Item(2)
jenkins       = WScript.Arguments.Item(3)
authorization = WScript.Arguments.Item(4)

Set shell = WScript.CreateObject("WScript.Shell")

Set uuidExec = shell.Exec(svnlook & " uuid " & repos)
Do Until uuidExec.StdOut.AtEndOfStream
  uuid = uuidExec.StdOut.ReadLine()
Loop
Wscript.Echo "uuid=" & uuid

Set changedExec = shell.Exec(svnlook & " changed --revision " & rev & " " & repos)
Do Until changedExec.StdOut.AtEndOfStream
  changed = changed + changedExec.StdOut.ReadLine() + Chr(10)
Loop
Wscript.Echo "changed=" & changed

url = jenkins + "crumbIssuer/api/xml?xpath=concat(//crumbRequestField,"":"",//crumb)"
Set http = CreateObject("Microsoft.XMLHTTP")
http.open "GET", url, False
http.setRequestHeader "Content-Type", "text/plain;charset=UTF-8"
if not authorization = "" then
  http.setRequestHeader "Authorization", "Basic " + authorization
end if
http.send
crumb = null
if http.status = 200 then
  crumb = split(http.responseText,":")
end if

url = jenkins + "subversion/" + uuid + "/notifyCommit?rev=" + rev
Wscript.Echo url

Set http = CreateObject("Microsoft.XMLHTTP")
http.open "POST", url, False
http.setRequestHeader "Content-Type", "text/plain;charset=UTF-8"
if not authorization = "" then
  http.setRequestHeader "Authorization", "Basic " + authorization
end if
if not isnull(crumb) then
  http.setRequestHeader crumb(0),crumb(1)
end if
http.send changed
if http.status <> 200 then
  Wscript.Echo "Error. HTTP Status: " & http.status & ". Body: " & http.responseText
end if

```

## Perform Polling from the Controller

JIRA [JENKINS-5413](https://issues.jenkins-ci.org/browse/JENKINS-5413) documents problems with running the SCM polling trigger on agents. Version 1.21 of the Subversion plugin can perform the polling on the Jenkins controller if the hudson.scm.SubversionSCM.pollFromMaster system property is set to true.

## Subversion Revision and URL information as Environment Variables

The Subversion SCM plugin exports the svn revisions and URLs of the build's subversion modules as environment variables. These are $SVN\_REVISION\_n and $SVN\_URL\_n, where n is the 1-based index of the module in the configuration.

For backwards compatibility if there's only a single module, its values are also exported as $SVN\_REVISION and $SVN\_URL.

Note that the revision number exposed is the 'last-changed' revision number of the particular directory and not the current revision of the repository. (See [What are these two revision numbers in svn info?](http://stackoverflow.com/questions/9354877/what-are-these-two-revision-numbers-in-svn-info))

## Kerberos authentication

To connect to a Kerberos authenticated SVN repository see the [Subversion Plugin HTTPS Kerberos authentication](https://wiki.jenkins.io/display/JENKINS/Subversion%2BPlugin%2BHTTPS%2BKerberos%2Bauthentication) page.

# TroubleShooting

Someone suggested in the Jenkins IRC channel that if you are getting an error and a long svnkit stack trace that looks like:

```
 ERROR: svn: authentication cancelled

org.tmatesoft.svn.core.SVNCancelException: svn: authentication cancelled

```

Then,

* Try to delete (back up) the ~/.subversion folder and retry the build. Apparently mixing the command line svn client checkouts with those of your Jenkins jobs messes it up.
* See <http://blog.vinodsingh.com/2009/08/hudson-svn-authentication-cancelled.html> for details.

You could try to enable verbose log over the plugin an SVNKit library, to do that add a logger to those loggers with log level ALL , it is really verbose so just after configure it make the test and change the log level again to ERROR or INFO.

* svnkit
* svnkit-network
* svnkit-wc
* hudson.scm.SubversionSCM

[![](https://cdn.jsdelivr.net/gh/jenkinsci/subversion-plugin@master/docs/images/logger.png)](https://github.com/jenkinsci/subversion-plugin/blob/master/docs/images/logger.png){.confluence-embedded-image height="250"}

## lightweight checkout capability for Subversion on Multibranch Pipeline projects and Externals support

Lightweight checkout capability for Subversion on Multibranch Pipeline projects does not support externals, so in order to use Subversion plugin in a Multibranch Pipeline project with a repository with externals, you should disable the lightweight checkout capability by setting the property `-Djenkins.scm.impl.subversion.SubversionSCMFileSystem.disable=<true/false>`

# Change Log

## Version 2.12.2 and newer

See [GitHub releases](https://github.com/jenkinsci/subversion-plugin/releases).

## Older

See the [old changelog](https://github.com/jenkinsci/subversion-plugin/blob/master/docs/old-changelog.md).

# Trademarks

Apache, Apache Subversion and Subversion are trademarks of the Apache Software Foundation

##### Version: 1283.vfc8b\_92d49a\_06

Released: 4 days agoRequires Jenkins 2.479.1ID: subversion
##### Installed on 28.1% of controllers

[View detailed version information](https://old.stats.jenkins.io/pluginversions/subversion.html)
##### Links

[GitHub](https://github.com/jenkinsci/subversion-plugin)[Open issues (Jira)](https://issues.jenkins.io/issues/?jql=resolution%20is%20EMPTY%20and%20component%3D15485)[Report an issue (Jira)](https://www.jenkins.io/participate/report-issue/redirect/#15485/subversion)[Pipeline Step Reference](https://www.jenkins.io/doc/pipeline/steps/subversion)[Extension Points](https://www.jenkins.io/doc/developer/extensions/subversion)[Javadoc](https://javadoc.jenkins.io/plugin/subversion)
##### Labels

[Source Code Management](/ui/search/?labels=scm)
##### Maintainers

[Diego Díez](/ui/search/?query=didiez)
##### Help us improve this page!

To propose a change submit a pull request to [the plugin page](https://github.com/jenkinsci/subversion-plugin) on GitHub.
##### Previous Security Warnings

* ###### [CSRF vulnerability and insufficient permission checks allow capturing credentials](https://jenkins.io/security/advisory/2017-07-10/)

  + Affects version 2.8 and earlier
* ###### [Users without Overall/Read are able to access lists of user names and node names](https://jenkins.io/security/advisory/2018-02-26/#SECURITY-724)

  + Affects version 2.10.2 and earlier
* ###### [Stored XSS vulnerability](https://jenkins.io/security/advisory/2020-02-12/#SECURITY-1725)

  + Affects version 2.13.0 and earlier
* ###### [XXE vulnerability](https://www.jenkins.io/security/advisory/2020-11-04/#SECURITY-2145)

  + Affects version 2.13.1 and earlier
* ###### [Path traversal vulnerability allows reading arbitrary files](https://www.jenkins.io/security/advisory/2021-11-04/#SECURITY-2506)

  + Affects version 2.15.0 and earlier
* ###### [CSRF vulnerability](https://www.jenkins.io/security/advisory/2022-04-12/#SECURITY-2075)

  + Affects version 2.15.3 and earlier
* ###### [Stored XSS vulnerability](https://www.jenkins.io/security/advisory/2022-04-12/#SECURITY-2617)

  + Affects version 2.15.3 and earlier
![tracker](https://jenkins-matomo.do.g4v.dev/piwik.php?idsite=1&rec=1&url=https://plugins.jenkins.io//subversion/)


