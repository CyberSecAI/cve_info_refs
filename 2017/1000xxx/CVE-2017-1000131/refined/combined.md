=== Content from bugs.launchpad.net_5731a4f0_20250125_040650.html ===

[Log in / Register](https://bugs.launchpad.net/mahara/%2Bbug/1084336/%2Blogin)

[![](https://launchpadlibrarian.net/302557383/mahara_64x64.png)](https://launchpad.net/mahara)

## [Mahara](https://launchpad.net/mahara)

* [Overview](https://launchpad.net/mahara)
* [Code](https://code.launchpad.net/mahara)
* [Bugs](https://bugs.launchpad.net/mahara)
* [Blueprints](https://blueprints.launchpad.net/mahara)
* [Translations](https://translations.launchpad.net/mahara)
* [Answers](https://answers.launchpad.net/mahara)

# mnet: mahara doesn't implement kill\_child which results in not being logged out when logged out from a remote IdP over mnet

Bug #1084336 reported by
[Hugh Davenport](https://launchpad.net/~hugh-davenport)
on 2012-11-29

[278](/%2Bhelp-bugs/bug-heat.html)

This bug affects 3 people

| Affects | | Status | Importance | Assigned to | Milestone |
| --- | --- | --- | --- | --- | --- |
|  | [Mahara](https://bugs.launchpad.net/mahara) | Fix Released | Medium | [Aaron Wells](https://launchpad.net/~u-aaronw) | [Mahara 16.10.0](https://launchpad.net/mahara/%2Bmilestone/16.10.0) |
|  | [15.04](https://bugs.launchpad.net/mahara/15.04) | Fix Released | Medium | Unassigned | [Mahara 15.04.8](https://launchpad.net/mahara/%2Bmilestone/15.04.8) |
|  | [15.10](https://bugs.launchpad.net/mahara/15.10) | Fix Released | Medium | Unassigned | [Mahara 15.10.4](https://launchpad.net/mahara/%2Bmilestone/15.10.4) |
|  | [16.04](https://bugs.launchpad.net/mahara/16.04) | Fix Released | Medium | Unassigned | [Mahara 16.04.2](https://launchpad.net/mahara/%2Bmilestone/16.04.2) |

### Bug Description

When Mahara is doing SSO via MNet, with a remote IdP, it ought to log you out of Mahara when you log out of the IdP. MNet allows for this via the "kill\_child" API method, which the IdP will call for each connected service provider to tell it to log a user out.

Mahara never implemented this method, so it doesn't log you out properly when you log out of the IdP.

To replicate:

1. Set up MNet between a Moodle & Mahara site, with Moodle as the identity provider (i.e. users log in to Moodle and then roam over to Mahara)

2. Log in to Moodle

3. Roam over to Mahara

4. Open up Moodle in another tab.

5. Log out of Moodle.

6. Go back to the tab with Mahara and try to navigate around in the site.

Expected result: You can't navigate around because you're logged out of Mahara

Actual result: You are not logged out of Mahara

See [original description](comments/0)

Tags:

[mnet](/mahara/%2Bbugs?field.tag=mnet)

## CVE References

* [2017-1000131](/bugs/cve/2017-1000131 "Mahara 15.04 before 15.04.8 and 15.10...")

[Hugh Davenport (hugh-davenport)](https://launchpad.net/~hugh-davenport)
on 2012-11-29

| Changed in mahara: | |
| --- | --- |
| **status**: | New → Confirmed |

[Son Nguyen (ngson2000)](https://launchpad.net/~ngson2000)
on 2013-01-28

| Changed in mahara: | |
| --- | --- |
| **assignee**: | nobody → Son Nguyen (ngson2000) |

[Son Nguyen (ngson2000)](https://launchpad.net/~ngson2000)
on 2013-03-14

| Changed in mahara: | |
| --- | --- |
| **milestone**: | 1.7.0 → 1.8.0 |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Aaron Wells (u-aaronw)](https://launchpad.net/~u-aaronw) wrote on 2013-08-19: |  |  | [#1](/mahara/%2Bbug/1084336/comments/1) |
| --- | --- | --- | --- |

If we keep dragging our feet on this one, MNet replacement should solve the problem for us. ;)

If we keep dragging our feet on this one, MNet replacement should solve the problem for us. ;)

| Changed in mahara: | |
| --- | --- |
| **importance**: | High → Medium |
| **milestone**: | 1.8.0rc1 → none |
| **assignee**: | Son Nguyen (ngson2000) → nobody |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Aaron Wells (u-aaronw)](https://launchpad.net/~u-aaronw) wrote on 2016-07-04: |  |  | [#2](/mahara/%2Bbug/1084336/comments/2) |
| --- | --- | --- | --- |

I'm going to take a quick try at fixing this, using the information supplied on the two duplicate bug reports [Bug #1084347](/bugs/1084347) and [Bug #1598664](/bugs/1598664).

I'm going to take a quick try at fixing this, using the information supplied on the two duplicate bug reports Bug #1084347 and Bug #1598664.

| Changed in mahara: | |
| --- | --- |
| **assignee**: | nobody → Aaron Wells (u-aaronw) |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Aaron Wells (u-aaronw)](https://launchpad.net/~u-aaronw) wrote on 2016-07-04: |  |  | [#3](/mahara/%2Bbug/1084336/comments/3) |
| --- | --- | --- | --- |

To replicate:

1. Set up MNet between a Moodle & Mahara site, with Moodle as the identity provider (i.e. users log in to Moodle and then roam over to Mahara)

2. Log in to Moodle

3. Roam over to Mahara

4. Open up Moodle in another tab.

5. Log out of Moodle.

6. Go back to the tab with Mahara and try to navigate around in the site.

Expected result: You can't navigate around because you're logged out of Mahara

Actual result: You are not logged out of Mahara

To replicate:
1. Set up MNet between a Moodle & Mahara site, with Moodle as the identity provider (i.e. users log in to Moodle and then roam over to Mahara)
2. Log in to Moodle
3. Roam over to Mahara
4. Open up Moodle in another tab.
5. Log out of Moodle.
6. Go back to the tab with Mahara and try to navigate around in the site.
Expected result: You can't navigate around because you're logged out of Mahara
Actual result: You are not logged out of Mahara

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Aaron Wells (u-aaronw)](https://launchpad.net/~u-aaronw) wrote on 2016-07-05: |  |  | [#4](/mahara/%2Bbug/1084336/comments/4) |
| --- | --- | --- | --- |

Security patch: <https://reviews.mahara.org/6647>

Security patch: https://reviews.mahara.org/6647

[Aaron Wells (u-aaronw)](https://launchpad.net/~u-aaronw)
on 2016-07-05

| **description**: | updated |
| --- | --- |
| **description**: | updated |
| Changed in mahara: | |
| **milestone**: | none → 16.10.0 |

[Robert Lyon (robertl-9)](https://launchpad.net/~robertl-9)
on 2016-07-11

| Changed in mahara: | |
| --- | --- |
| **status**: | Confirmed → In Progress |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Mahara Bot (dev-mahara)](https://launchpad.net/~dev-mahara) wrote on 2016-07-11:  [**A change has been merged**](/mahara/%2Bbug/1084336/comments/5) |  |  | [#5](/mahara/%2Bbug/1084336/comments/5) |
| --- | --- | --- | --- |

Reviewed: <https://reviews.mahara.org/6647>

Committed: <https://git.mahara.org/mahara/mahara/commit/2837542d07b07e1e43fd1841166af0e7edd7cc0d>

Submitter: Robert Lyon (<email address hidden>)

Branch: master

commit 2837542d07b07e1e43fd1841166af0e7edd7cc0d

Author: Aaron Wells <email address hidden>

Date: Tue Jul 5 12:19:42 2016 +1200

[Bug 1084336](/bugs/1084336): Implement MNet "kill child"

If you're logged in to Mahara via a remote IdP,

when you log out on the IdP it will try to invoke

this method to log you out of Mahara.

Change-Id: Ia11250b408ba594aaa179478cd67d5499cd1e2c8

behatnotneeded: Can't test Mnet in Behat yet

Reviewed: https://reviews.mahara.org/6647
Committed: https://git.mahara.org/mahara/mahara/commit/2837542d07b07e1e43fd1841166af0e7edd7cc0d
Submitter: Robert Lyon (robertl@catalyst.net.nz)
Branch: master
commit 2837542d07b07e1e43fd1841166af0e7edd7cc0d
Author: Aaron Wells <aaronw@catalyst.net.nz>
Date: Tue Jul 5 12:19:42 2016 +1200
Bug 1084336: Implement MNet "kill child"
If you're logged in to Mahara via a remote IdP,
when you log out on the IdP it will try to invoke
this method to log you out of Mahara.
Change-Id: Ia11250b408ba594aaa179478cd67d5499cd1e2c8
behatnotneeded: Can't test Mnet in Behat yet

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Mahara Bot (dev-mahara)](https://launchpad.net/~dev-mahara) wrote on 2016-07-11: |  |  | [#6](/mahara/%2Bbug/1084336/comments/6) |
| --- | --- | --- | --- |

Reviewed: <https://reviews.mahara.org/6698>

Committed: <https://git.mahara.org/mahara/mahara/commit/8654c56dcbe0cd325b9bea4ed914dc869c6ee949>

Submitter: Robert Lyon (<email address hidden>)

Branch: 16.04\_STABLE

commit 8654c56dcbe0cd325b9bea4ed914dc869c6ee949

Author: Aaron Wells <email address hidden>

Date: Tue Jul 5 12:19:42 2016 +1200

[Bug 1084336](/bugs/1084336): Implement MNet "kill child"

If you're logged in to Mahara via a remote IdP,

when you log out on the IdP it will try to invoke

this method to log you out of Mahara.

Change-Id: Ia11250b408ba594aaa179478cd67d5499cd1e2c8

behatnotneeded: Can't test Mnet in Behat yet

Reviewed: https://reviews.mahara.org/6698
Committed: https://git.mahara.org/mahara/mahara/commit/8654c56dcbe0cd325b9bea4ed914dc869c6ee949
Submitter: Robert Lyon (robertl@catalyst.net.nz)
Branch: 16.04\_STABLE
commit 8654c56dcbe0cd325b9bea4ed914dc869c6ee949
Author: Aaron Wells <aaronw@catalyst.net.nz>
Date: Tue Jul 5 12:19:42 2016 +1200
Bug 1084336: Implement MNet "kill child"
If you're logged in to Mahara via a remote IdP,
when you log out on the IdP it will try to invoke
this method to log you out of Mahara.
Change-Id: Ia11250b408ba594aaa179478cd67d5499cd1e2c8
behatnotneeded: Can't test Mnet in Behat yet

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Mahara Bot (dev-mahara)](https://launchpad.net/~dev-mahara) wrote on 2016-07-11: |  |  | [#7](/mahara/%2Bbug/1084336/comments/7) |
| --- | --- | --- | --- |

Reviewed: <https://reviews.mahara.org/6699>

Committed: <https://git.mahara.org/mahara/mahara/commit/c6a72f8145a72d8d20955769c42325da6bffbb3e>

Submitter: Robert Lyon (<email address hidden>)

Branch: 15.10\_STABLE

commit c6a72f8145a72d8d20955769c42325da6bffbb3e

Author: Aaron Wells <email address hidden>

Date: Tue Jul 5 12:19:42 2016 +1200

[Bug 1084336](/bugs/1084336): Implement MNet "kill child"

If you're logged in to Mahara via a remote IdP,

when you log out on the IdP it will try to invoke

this method to log you out of Mahara.

Change-Id: Ia11250b408ba594aaa179478cd67d5499cd1e2c8

behatnotneeded: Can't test Mnet in Behat yet

Reviewed: https://reviews.mahara.org/6699
Committed: https://git.mahara.org/mahara/mahara/commit/c6a72f8145a72d8d20955769c42325da6bffbb3e
Submitter: Robert Lyon (robertl@catalyst.net.nz)
Branch: 15.10\_STABLE
commit c6a72f8145a72d8d20955769c42325da6bffbb3e
Author: Aaron Wells <aaronw@catalyst.net.nz>
Date: Tue Jul 5 12:19:42 2016 +1200
Bug 1084336: Implement MNet "kill child"
If you're logged in to Mahara via a remote IdP,
when you log out on the IdP it will try to invoke
this method to log you out of Mahara.
Change-Id: Ia11250b408ba594aaa179478cd67d5499cd1e2c8
behatnotneeded: Can't test Mnet in Behat yet

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Mahara Bot (dev-mahara)](https://launchpad.net/~dev-mahara) wrote on 2016-07-11: |  |  | [#8](/mahara/%2Bbug/1084336/comments/8) |
| --- | --- | --- | --- |

Reviewed: <https://reviews.mahara.org/6700>

Committed: <https://git.mahara.org/mahara/mahara/commit/4aab3a18cb0b261a4a8074e34b642f18fef91012>

Submitter: Robert Lyon (<email address hidden>)

Branch: 15.04\_STABLE

commit 4aab3a18cb0b261a4a8074e34b642f18fef91012

Author: Aaron Wells <email address hidden>

Date: Tue Jul 5 12:19:42 2016 +1200

[Bug 1084336](/bugs/1084336): Implement MNet "kill child"

If you're logged in to Mahara via a remote IdP,

when you log out on the IdP it will try to invoke

this method to log you out of Mahara.

Change-Id: Ia11250b408ba594aaa179478cd67d5499cd1e2c8

behatnotneeded: Can't test Mnet in Behat yet

Reviewed: https://reviews.mahara.org/6700
Committed: https://git.mahara.org/mahara/mahara/commit/4aab3a18cb0b261a4a8074e34b642f18fef91012
Submitter: Robert Lyon (robertl@catalyst.net.nz)
Branch: 15.04\_STABLE
commit 4aab3a18cb0b261a4a8074e34b642f18fef91012
Author: Aaron Wells <aaronw@catalyst.net.nz>
Date: Tue Jul 5 12:19:42 2016 +1200
Bug 1084336: Implement MNet "kill child"
If you're logged in to Mahara via a remote IdP,
when you log out on the IdP it will try to invoke
this method to log you out of Mahara.
Change-Id: Ia11250b408ba594aaa179478cd67d5499cd1e2c8
behatnotneeded: Can't test Mnet in Behat yet

[Robert Lyon (robertl-9)](https://launchpad.net/~robertl-9)
on 2016-07-11

| Changed in mahara: | |
| --- | --- |
| **status**: | In Progress → Fix Committed |
| **information type**: | Private Security → Public Security |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [William (williamchan19)](https://launchpad.net/~williamchan19) wrote on 2016-07-21: |  |  | [#9](/mahara/%2Bbug/1084336/comments/9) |
| --- | --- | --- | --- |

Dear Sir,

I upgrade Mahara 15.10.4

I also use both Moodle 2.9.x version and 3.1.1 to test this issue

However, same problem is happened and seems mahara isn't still logout after logout in moodle.

Regards,

                   William

Dear Sir,
I upgrade Mahara 15.10.4
I also use both Moodle 2.9.x version and 3.1.1 to test this issue
However, same problem is happened and seems mahara isn't still logout after logout in moodle.
Regards,
William

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Aaron Wells (u-aaronw)](https://launchpad.net/~u-aaronw) wrote on 2016-07-21: |  |  | [#10](/mahara/%2Bbug/1084336/comments/10) |
| --- | --- | --- | --- |

Hi William,

I tested it just now with an installation of Moodle 3.1.1 and a Mahara instance on 15.10.4, and it worked as expected. Specifically, I followed the test case described here, and got the expected result: [https://bugs.launchpad.net/mahara/+bug/1084336/comments/3](https://bugs.launchpad.net/mahara/%2Bbug/1084336/comments/3)

Can you confirm if that test case isn't working for you, or if you're talking about a different test case?

Cheers,

Aaron

Hi William,
I tested it just now with an installation of Moodle 3.1.1 and a Mahara instance on 15.10.4, and it worked as expected. Specifically, I followed the test case described here, and got the expected result: https://bugs.launchpad.net/mahara/+bug/1084336/comments/3
Can you confirm if that test case isn't working for you, or if you're talking about a different test case?
Cheers,
Aaron

[Robert Lyon (robertl-9)](https://launchpad.net/~robertl-9)
on 2016-10-21

| Changed in mahara: | |
| --- | --- |
| **status**: | Fix Committed → Fix Released |

[See full activity log](https://bugs.launchpad.net/mahara/%2Bbug/1084336/%2Bactivity)

To post a comment you must [log in](%2Blogin?comments=all).

* [Report a bug](/mahara/%2Bfilebug)

This report contains
**Public Security**
information

Everyone can see this security related information.

## Duplicates of this bug

* [Bug #1605032](https://bugs.launchpad.net/mahara/%2Bbug/1605032 "still not fix after upgrade to mahara 15.10.4 and moodle 3.1.1")

You are
[not directly subscribed to this bug's notifications.](/mahara/%2Bbug/1084336/%2Bsubscribe)

Subscribing...

* [Edit bug mail](https://bugs.launchpad.net/mahara/%2Bbug/1084336/%2Bsubscriptions "View and change your subscriptions to this bug")

## Other bug subscribers

[Subscribe someone else](https://bugs.launchpad.net/mahara/%2Bbug/1084336/%2Baddsubscriber "Launchpad will email that person whenever this bugs changes")

## Remote bug watches

Bug watches keep track of this bug in other bug trackers.

[![Launchpad](/@@/launchpad-footer-logo.svg)](https://launchpad.net/)
 •
[Take the tour](https://launchpad.net/%2Btour)
 •
[Read the guide](https://help.launchpad.net/)

© 2004
[Canonical Ltd.](http://canonical.com/)
 •
[Terms of use](https://launchpad.net/legal)
 •
[Data privacy](https://www.ubuntu.com/legal/dataprivacy)
 •
[Contact Launchpad Support](/feedback)
 •
[Blog](http://blog.launchpad.net/)
 •
[Careers](https://canonical.com/careers)
 •
[System status](https://ubuntu.social/%40launchpadstatus)
 •
4d55102
([Get the code!](https://dev.launchpad.net/))


