=== Content from webkitgtk.org_2e9c9789_20250124_182819.html ===

[planet.webkitgtk.org](https://planet.webkitgtk.org/)

[webkit.org](https://www.webkit.org/)

[GNOME.org](https://www.gnome.org/)

[WebKitGTK](/)

## WebKitGTK+ Security Advisory WSA-2017-0007

* Date Reported: **August 25, 2017**
* Advisory ID: **WSA-2017-0007**
* CVE identifiers: [CVE-2017-1000121](#CVE-2017-1000121), [CVE-2017-1000122](#CVE-2017-1000122).

Several vulnerabilities were discovered in WebKitGTK+.

* [CVE-2017-1000121](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2017-1000121)
  + Versions affected: WebKitGTK+ before 2.16.3.
  + Credit to Nathan Crandall.
  + Impact: Processing maliciously crafted input may lead to arbitrary
    code execution or application crash. Description: An input
    validation issue on the handling of UNIX IPC messages may allow an
    attacker to trigger an integer overflow. The issue was addressed
    through improved state management.
* [CVE-2017-1000122](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2017-1000122)
  + Versions affected: WebKitGTK+ before 2.16.3.
  + Credit to Nathan Crandall.
  + Impact: Processing maliciously crafted input may lead to application
    crash. Description: An input validation issue on the handling of
    UNIX IPC messages allows an attacker to trigger an application
    crash. The issue was addressed through improved state management.

We recommend updating to the last stable version of WebKitGTK+. It is
the best way of ensuring that you are running a safe version of
WebKitGTK+. Please check our website for information about the last
stable releases.

Further information about WebKitGTK+ Security Advisories can be found at:
<https://webkitgtk.org/security.html>

Latest News

* ‣ [WebKitGTK 2.47.3 released!](/2025/01/21/webkitgtk2.47.3-released.html)

  21 JANUARY 2025
* ‣ [WebKitGTK 2.46.5 released!](/2024/12/18/webkitgtk2.46.5-released.html)

  18 DECEMBER 2024
* ([more](/news.html))

Security Advisories

* ‣ [WebKitGTK and WPE WebKit Security Advisory WSA-2024-0008](/security/WSA-2024-0008.html)

  22 DECEMBER 2024
* ‣ [WebKitGTK and WPE WebKit Security Advisory WSA-2024-0007](/security/WSA-2024-0007.html)

  27 NOVEMBER 2024
* ([more](/security.html))

Releases

* ‣ Stable tarball

  [WebKitGTK 2.46.5](/releases/webkitgtk-2.46.5.tar.xz)
* ‣ Unstable tarball

  [WebKitGTK 2.47.3](/releases/webkitgtk-2.47.3.tar.xz)
* ‣ [All releases](/releases/)
* ‣ [Verifying releases](/verifying.html)

Documentation

* ‣ Stable API Reference

  [WebKit](https://webkitgtk.org/reference/webkitgtk/stable/)

  [WebKitWebProcessExtension](https://webkitgtk.org/reference/webkitgtk-web-process-extension/stable/)

  [JavaScriptCore](https://webkitgtk.org/reference/jsc-glib/stable/)
* ‣ Unstable API Reference

  [WebKit](https://webkitgtk.org/reference/webkitgtk/unstable/)

  [WebKitWebProcessExtension](https://webkitgtk.org/reference/webkitgtk-web-process-extension/unstable/)

  [JavaScriptCore](https://webkitgtk.org/reference/jsc-glib/unstable/)
* ‣ Deprecated API Reference

  [WebKit2](https://webkitgtk.org/reference/webkit2gtk/stable/)

  [WebKit1](https://webkitgtk.org/reference/webkit2gtk/1.10.1/)

Contact

* ‣ Mailing lists

  [webkit-gtk](http://lists.webkit.org/mailman/listinfo/webkit-gtk)

  [webkit-help](http://lists.webkit.org/mailman/listinfo/webkit-help)

  [webkit-dev](http://lists.webkit.org/mailman/listinfo/webkit-dev)
* ‣ [#webkitgtk:matrix.org](https://matrix.to/#/%23webkitgtk:matrix.org)
* ‣ [@WebKitGTK on Mastodon](https://floss.social/%40WebKitGTK)
* ‣ [@WebKitGTK on Twitter](http://www.twitter.com/webkitgtk)

Contribute

* ‣ [File a bug](https://bugs.webkit.org/enter_bug.cgi?assigned_to=webkit-unassigned%40lists.webkit.org&attachurl=&blocked=&bug_file_loc=http://&bug_severity=Normal&bug_status=NEW&comment=&component=WebKit%20Gtk&contenttypeentry=&contenttypemethod=autodetect&contenttypeselection=text/plain&data=&dependson=&description=&flag_type-1=X&flag_type-3=X&flag_type-4=X&form_name=enter_bug&keywords=GTK&maketemplate=Remember%20values%20as%20bookmarkable%20template&op_sys=Linux&priority=P3&product=WebKit&rep_platform=PC&short_desc=%5BGTK%5D%20)
* ‣ [Get the code](https://www.webkit.org/building/checkout.html)
* ‣ [How to build](https://trac.webkit.org/wiki/BuildingGtk)
* ‣ [How to submit code](https://www.webkit.org/coding/contributing.html)
* ‣ [Stable branch](https://trac.webkit.org/wiki/WebKitGTK/StableRelease)

Copyright Â© 2009â2022 The WebKitGTK Team
Hosting kindly provided by [Igalia](https://www.igalia.com/).



=== Content from trac.webkit.org_f496042a_20250124_182819.html ===


[![WebKit Trac](/chrome/site/favicon.png)](http://www.webkit.org/)

Search:

* [Login](/login)
* [Preferences](/prefs)
* [Forgot your password?](/reset_password)

* [Wiki](/wiki)
* [Timeline](/timeline)
* [Browse Source](/browser)
* [Search](/search)

## Context Navigation

* ← [Previous Changeset](/changeset/217205/webkit "Changeset 217205")
* [Next Changeset](/changeset/217207/webkit "Changeset 217207") →

---

# Changeset 217206 in webkit

View differences
inline
side by side

Show
lines around each change

Show the changes in full context

Ignore:

Blank lines

Case changes

White space changes

Timestamp:
May 21, 2017, 11:57:08 PM
([8 years](/timeline?from=2017-05-21T23%3A57%3A08-07%3A00&precision=second "See timeline at May 21, 2017, 11:57:08 PM") ago)
Author:
Carlos Garcia Campos
Message:

Add more input validation in Connection::readBytesFromSocket()

[​https://bugs.webkit.org/show\_bug.cgi?id=171871](https://bugs.webkit.org/show_bug.cgi?id=171871)

Reviewed by Michael Catanzaro.

Check the control message length is in the limits. Credit to Nathan Crandall for reporting this issue and

submitting an equivalent fix.

* Platform/IPC/unix/ConnectionUnix.cpp:

(IPC::readBytesFromSocket):

Location:
[trunk/Source/WebKit2](/browser/webkit/trunk/Source/WebKit2?rev=217206)
Files:

2 edited

* [ChangeLog](/browser/webkit/trunk/Source/WebKit2/ChangeLog?rev=217206 "Show entry in browser")
  (modified)
  ([1 diff](#file0 "Show differences"))
* [Platform/IPC/unix/ConnectionUnix.cpp](/browser/webkit/trunk/Source/WebKit2/Platform/IPC/unix/ConnectionUnix.cpp?rev=217206 "Show entry in browser")
  (modified)
  ([1 diff](#file1 "Show differences"))

### Legend:

Unmodified
Added
Removed

* ## [trunk/Source/WebKit2/ChangeLog](/changeset/217206/webkit/trunk/Source/WebKit2/ChangeLog "Show the changeset 217206 restricted to trunk/Source/WebKit2/ChangeLog")

  | [r217189](/browser/webkit/trunk/Source/WebKit2/ChangeLog?rev=217189#L1 "Show revision 217189 of this file in browser") | [r217206](/browser/webkit/trunk/Source/WebKit2/ChangeLog?rev=217206#L1 "Show revision 217206 of this file in browser") |  |
  | --- | --- | --- |
  |  | 1 | 2017-05-21  Carlos Garcia Campos  <cgarcia@igalia.com> |
  |  | 2 |  |
  |  | 3 | Add more input validation in Connection::readBytesFromSocket() |
  |  | 4 | https://bugs.webkit.org/show\_bug.cgi?id=171871 |
  |  | 5 |  |
  |  | 6 | Reviewed by Michael Catanzaro. |
  |  | 7 |  |
  |  | 8 | Check the control message length is in the limits. Credit to Nathan Crandall for reporting this issue and |
  |  | 9 | submitting an equivalent fix. |
  |  | 10 |  |
  |  | 11 | \* Platform/IPC/unix/ConnectionUnix.cpp: |
  |  | 12 | (IPC::readBytesFromSocket): |
  |  | 13 |  |
  | 1 | 14 | 2017-05-20  Michael Catanzaro  <mcatanzaro@igalia.com> |
  | 2 | 15 |  |
* ## [trunk/Source/WebKit2/Platform/IPC/unix/ConnectionUnix.cpp](/changeset/217206/webkit/trunk/Source/WebKit2/Platform/IPC/unix/ConnectionUnix.cpp "Show the changeset 217206 restricted to trunk/Source/WebKit2/Platform/IPC/unix/ConnectionUnix.cpp")

  | [r217126](/browser/webkit/trunk/Source/WebKit2/Platform/IPC/unix/ConnectionUnix.cpp?rev=217126#L273 "Show revision 217126 of this file in browser") | [r217206](/browser/webkit/trunk/Source/WebKit2/Platform/IPC/unix/ConnectionUnix.cpp?rev=217206#L273 "Show revision 217206 of this file in browser") |  |
  | --- | --- | --- |
  | 273 | 273 | for (controlMessage = CMSG\_FIRSTHDR(&message); controlMessage; controlMessage = CMSG\_NXTHDR(&message, controlMessage)) { |
  | 274 | 274 | if (controlMessage->cmsg\_level == SOL\_SOCKET && controlMessage->cmsg\_type == SCM\_RIGHTS) { |
  |  | 275 | if (controlMessage->cmsg\_len < CMSG\_LEN(0) || controlMessage->cmsg\_len > attachmentMaxAmount) { |
  |  | 276 | ASSERT\_NOT\_REACHED(); |
  |  | 277 | break; |
  |  | 278 | } |
  | 275 | 279 | size\_t previousFileDescriptorsSize = fileDescriptors.size(); |
  | 276 | 280 | size\_t fileDescriptorsCount = (controlMessage->cmsg\_len - CMSG\_LEN(0)) / sizeof(int); |
**Note:**
See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

### Download in other formats:

* [Unified Diff](?format=diff&new=217206)
* [Zip Archive](?format=zip&new=217206)

---

[![Trac Powered](/chrome/common/trac_logo_mini.png)](https://trac.edgewall.org/)

Powered by [**Trac 1.5.4**](/about)

By [Edgewall Software](http://www.edgewall.org/)
.

Hosted by [Apple](http://www.apple.com/)


