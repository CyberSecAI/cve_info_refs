=== Content from github.com_cf4da603_20250124_113436.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FOP-TEE%2Foptee_os%2Fblob%2F2.5.0%2FCHANGELOG.md)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FOP-TEE%2Foptee_os%2Fblob%2F2.5.0%2FCHANGELOG.md)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fblob%2Fshow&source=header-repo&source_repo=OP-TEE%2Foptee_os)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[OP-TEE](/OP-TEE)
/
**[optee\_os](/OP-TEE/optee_os)**
Public

* [Notifications](/login?return_to=%2FOP-TEE%2Foptee_os) You must be signed in to change notification settings
* [Fork
  1.1k](/login?return_to=%2FOP-TEE%2Foptee_os)
* [Star
   1.6k](/login?return_to=%2FOP-TEE%2Foptee_os)

* [Code](/OP-TEE/optee_os/tree/2.5.0)
* [Issues
  27](/OP-TEE/optee_os/issues)
* [Pull requests
  23](/OP-TEE/optee_os/pulls)
* [Actions](/OP-TEE/optee_os/actions)
* [Projects
  0](/OP-TEE/optee_os/projects)
* [Wiki](/OP-TEE/optee_os/wiki)
* [Security](/OP-TEE/optee_os/security)
* [Insights](/OP-TEE/optee_os/pulse)

Additional navigation options

* [Code](/OP-TEE/optee_os/tree/2.5.0)
* [Issues](/OP-TEE/optee_os/issues)
* [Pull requests](/OP-TEE/optee_os/pulls)
* [Actions](/OP-TEE/optee_os/actions)
* [Projects](/OP-TEE/optee_os/projects)
* [Wiki](/OP-TEE/optee_os/wiki)
* [Security](/OP-TEE/optee_os/security)
* [Insights](/OP-TEE/optee_os/pulse)

## Files

 2.5.0
## Breadcrumbs

1. [optee\_os](/OP-TEE/optee_os/tree/2.5.0)
/
# CHANGELOG.md

Copy path Blame  Blame
## Latest commit

## History

[History](/OP-TEE/optee_os/commits/2.5.0/CHANGELOG.md)924 lines (665 loc) · 32.6 KB 2.5.0
## Breadcrumbs

1. [optee\_os](/OP-TEE/optee_os/tree/2.5.0)
/
# CHANGELOG.md

Top
## File metadata and controls

* Preview
* Code
* Blame

924 lines (665 loc) · 32.6 KB[Raw](https://github.com/OP-TEE/optee_os/raw/refs/tags/2.5.0/CHANGELOG.md)
# OP-TEE - version 2.5.0

[Link](https://github.com/OP-TEE/optee_os/compare/2.4.0...2.5.0-rc1) to a list of all commits between this release and
the previous one (2.4.0).

## New features

* New supported platform: i.MX7D ([#1639](https://github.com/OP-TEE/optee_os/pull/1639))
* Secure storage: anti-rollback protection for REE FS using RPMB FS ([#1630](https://github.com/OP-TEE/optee_os/pull/1630))
* Assign non-secure DDR configuration from DT if CFG\_DT=y ([#1623](https://github.com/OP-TEE/optee_os/pull/1623))
* Add new image format: split image into three separate binaries suitable for
  upcoming ARM Trusted Firmware ([#1589](https://github.com/OP-TEE/optee_os/pull/1589)).
* Make alignment check configurable ([#1586](https://github.com/OP-TEE/optee_os/pull/1586))
* drivers: add TZC380 driver ([#1578](https://github.com/OP-TEE/optee_os/pull/1578))
* plat-imx: PSCI CPU off ([#1577](https://github.com/OP-TEE/optee_os/pull/1577))
* 64-bit paging on QEMU v8 and HiKey ([#1575], [#1592](https://github.com/OP-TEE/optee_os/pull/1592))
* Benchmark framework ([#1365](https://github.com/OP-TEE/optee_os/pull/1365))
* Dump call stack of user TAs on abort ([#1552](https://github.com/OP-TEE/optee_os/pull/1552))
* plat-hikey: enable Secure Data Path ([#1440](https://github.com/OP-TEE/optee_os/pull/1440))
* Add interface to load and decrypt/authenticate user TAs ([#1513](https://github.com/OP-TEE/optee_os/pull/1513))
* plat-ti: add secure paging support ([#1493](https://github.com/OP-TEE/optee_os/pull/1493))
* plat-ti: add OTP hardware key support ([#1492](https://github.com/OP-TEE/optee_os/pull/1492))
* Support ARM GICv3 ([#1465](https://github.com/OP-TEE/optee_os/pull/1465))

## Removed features

* stm-orly2 is not supported anymore ([#1650](https://github.com/OP-TEE/optee_os/pull/1650))
* Remove secure storage based on SQL FS (`CFG_SQL_FS=y`) ([#1490](https://github.com/OP-TEE/optee_os/pull/1490))
* Remove support for mapping user TAs with 1 MiB or 2 MiB granularity
  (`CFG_SMALL_PAGE_USER_TA=n`) ([#1559](https://github.com/OP-TEE/optee_os/pull/1559)). TAs are always mapped using small
  pages.

## Bug fixes

* Reduce size of non-pageable code ([#1621](https://github.com/OP-TEE/optee_os/pull/1621))
* Ignore `TA_FLAG_MULTI_SESSION` and `TA_FLAG_INSTANCE_KEEP_ALIVE` when
  `TA_FLAG_SINGLE_INSTANCE` is not set ([#1574](https://github.com/OP-TEE/optee_os/pull/1574))
* libutee: remove buffering for AES GCM (PR#1573) and AES CTR ([#1580](https://github.com/OP-TEE/optee_os/pull/1580))
* Fix ROUNDUP()/ROUNDDOWN() macros ([#1519](https://github.com/OP-TEE/optee_os/pull/1519))
* Do not touch other bits in GICD\_CTLR ([#1508](https://github.com/OP-TEE/optee_os/pull/1508))
* Fix build issue with `DEBUG=y` and `CFG_TEE_CORE_LOG_LEVEL=0` ([#1502](https://github.com/OP-TEE/optee_os/pull/1502))
* crypto: do not restrict hash size when algorithm is ECDSA ([#1497](https://github.com/OP-TEE/optee_os/pull/1497))

## Security fixes or enhancements

* crypto: fix RSA key leakage after fault injection attack
  ([OP-TEE-2016-0003](https://www.op-tee.org/security-advisories/)) ([#1610](https://github.com/OP-TEE/optee_os/pull/1610))

* crypto: fix RSA key leakage after side channel attack
  ([OP-TEE-2016-0002](https://www.op-tee.org/security-advisories/)) ([#1610](https://github.com/OP-TEE/optee_os/pull/1610))
* Make pager aliased pages not always writable ([#1551](https://github.com/OP-TEE/optee_os/pull/1551))
* Support for no-exec RO and RW data ([#1459](https://github.com/OP-TEE/optee_os/pull/1459), [#1550](https://github.com/OP-TEE/optee_os/pull/1550))

## New issues

* armv7: some platform-specific code (`plat_cpu_reset_early()`) overwrites
  SCTLR bits configured by generic code. This affects alignment checks (`SCTLR.A`)
  and write-implies-no-exec (`SCTLR.WXN`, `SCTLR.UWXN`), which can therefore not
  be configured via the compile-time `CFG_` variables.
* armv7: plat-imx: Cortex-A9 cores should enable branch prediction (`SCLTR.Z`)
  for improved performance.
* [#1656](https://github.com/OP-TEE/optee_os/issues/1656) qemu\_armv8a: init hangs when secure data path and pager are both
  enabled.

## Tested on

In the list below, *standard* means that the `xtest` program passed with
its default configuration, while *extended* means it was run successfully
with the additional GlobalPlatform™ TEE Initial Configuration Test Suite
v1.1.0.4.

If a platform is not listed, it means the release was not tested on this
platform.

* d02: extended
* hikey: extended
* imx-mx6ulevk: standard
* imx-mx6ullevk: standard
* imx-mx7dsabresd: standard
* ls-ls1021atwr: standard
* mediatek-mt8173: standard
* rcar-h3: standard
* rpi3: standard
* stm-b2260: extended
* stm-cannes: extended
* ti-am43xx: standard
* ti-am57xx: standard
* ti-dra7xx: standard
* vexpress-fvp: standard
* vexpress-juno: standard
* vexpress-qemu\_armv8a: standard
* vexpress-qemu\_virt: standard

# OP-TEE - version 2.4.0

[Link](https://github.com/OP-TEE/optee_os/compare/2.3.0...2.4.0) to a list of all commits between this release and
the previous one (2.3.0).

Please note: this release is API-compatible with the previous one, but the
Secure Storage internal format for the REE and SQL FS is not compatible due to
commits [a238b74](https://github.com/OP-TEE/optee_os/commit/a238b744b1b3) ("core: REE FS: use the new hash tree
interface") and [44e900e](https://github.com/OP-TEE/optee_os/commit/44e900eabfc1) ("core: SQL FS: use the new hash tree
interface").

## New features

* Add porting guidelines
* Add support for Secure Data Path which allows Client and Trusted Applications
  to share references to secure memory
* New supported platform: Texas Instruments AM57xx (`PLATFORM=ti-am57xx`)
* ARMv7-A: add support for platform services in secure monitor and add these
  services for the DRA7xx platform
* SPI framework and PL022 driver cleanup and improvements
* Use CNTPCT (when available) to add entropy to the software PRNG
* Add GlobalPlatform Socket API for UDP and TCP (IPv4 and IPv6)
* DRA7: add TRNG driver, enable GICv2 driver
* Support load address larger than 4G
* libutee: preserve error code when calling TEE\_Panic() for easier
  troubleshooting
* Support TA profiling with gprof (-pg compiler switch)
* Optimize the ELF loader for TAs when pager is enabled
* Update documentation
* Add paged secure shared memory that can be transferred between TAs as
  needed
* Introduce MOBJ abstraction
* i.MX6: add PSCI "on" function
* arm32: introduce PSCI framework

## Bug fixes

* Secure storage: improve integrity checking of the REE and SQL filesystems by
  adding a hash tree on the internal data structures. Any external modification
  is detected, except full rollback. Fixes [#1188](https://github.com/OP-TEE/optee_os/issues/1188).
* The linux driver will set the 'privileged' flag (TEE\_GEN\_CAP\_PRIVILEGED) on
  the device intended for use by tee-supplicant. Fixes [#1199](https://github.com/OP-TEE/optee_os/issues/1199).
* RPMB: don't try to program the RPMB key by default
* Fix "make clean" error cases
* Fix issue when resetting persistent storage enumerator [#1332](https://github.com/OP-TEE/optee_os/issues/1332)
* Fix TA panic when doing AES CTS with specific buffer sizes
  [#1203](https://github.com/OP-TEE/optee_os/issues/1203).

## Known issues

* On RPi3 xtest sometimes stall (rcu\_sched self-detected stall on CPU) [#1353](https://github.com/OP-TEE/optee_os/issues/1353)
* For multi-core PSCI support is to be added for ls1021atwr in OP-TEE.
* USB keyboard cannot be used to stop the u-boot timeout ([build issue131](https://github.com/OP-TEE/build/issues/131)).
* Travis service (build.git) seems unstable from time to time.

## Tested on

In the list below, *standard* means that the `xtest` program passed with
its default configuration, while *extended* means it was run successfully
with the additional GlobalPlatform™ TEE Initial Configuration Test Suite
v1.1.0.4.

If a platform is not listed, it means the release was not tested on this
platform.

* d02: extended
* hikey: extended
* imx-mx6ulevk: standard
* ls-ls1021atwr: standard (single core)
* mediatek-mt8173: standard
* rcar-h3: standard
* rpi3: standard
* stm-b2260: extended
* ti-dra7xx: standard
* vexpress-fvp: standard
* vexpress-juno: standard
* vexpress-qemu\_armv8a: standard
* vexpress-qemu\_virt: standard
* zynqmp-zc1751\_dc1: standard
* zynqmp-zc1751\_dc2: standard
* zynqmp-zcu102: standard

# OP-TEE - version 2.3.0

[Link](https://github.com/OP-TEE/optee_os/compare/2.2.0...2.3.0) to a list of all commits between this release and
the previous one (2.2.0).

Please note: this release is API-compatible with the previous one, but the
Secure Storage internal format for the REE FS is not compatible due to commit
[361fb3e](https://github.com/OP-TEE/optee_os/commit/361fb3e) ("core: REE FS: use a single file per object").

## New features

* New supported platform: Xilinx Zynq 7000 ZC702 (`PLATFORM=zynq7k-zc702`)
* Add debug assertions to spinlocks and mutexes
* Add more CP15 register access macros for Cortex-A9
* ARMv7-A: redesign secure monitor to make it easier to register services
* ARMv7-A: cleanup boot arguments
* libutee: extend `TEE_CheckMemoryAccessRights()` with
  `TEE_MEMORY_ACCESS_SECURE` and `TEE_MEMORY_ACCESS_NONSECURE`
* plat-hikey: enable SPI by default and add sample test code
* Consider `CFLAGS_ta_arm64` and `CFLAGS_ta_arm32` when building TAs
* Secure storage refactoring

  + Simplify interface with tee-supplicant. Minimize round trips with normal
    world, especially by adding a cache for FS RPC payload data.
  + REE FS: use a single file per object, remove block cache.
* Print call stack in panic()

## Bug fixes

* Fix UUID encoding when communicating with normal world (use big endian
  mode instead of native endianness). Related to this, the string format
  for UUIDs has changed in tee-supplicant, so that TA file names now follow
  the format defined in RFC4122 (a missing hyphen was added). The old format
  is still supported, but deprecated, and will likely be removed with the
  next major release.
* Drop write permission to non-writable ELF segments after TA loading is
  complete.
* mm: fix confusing memory mapping debug traces
* plat-ti: fix issues with MMU mapping
* crypto: fix clearing of big numbers
* build: allow spaces and double quotes in CFG\_ variables
* mm: use paddr\_t to support both 32- and 64-bit architectures properly.
  Resolves 32-bit truncation error when pool is at top of 32 bit address
  space on 64-bit architecture.
* plat-stm: support pager. Fix pager on ARMv7-A SMP boards.
* Fix debug output of Trusted Applications (remove "ERROR: TEE-CORE:" prefix)
* Do not consider TA memref parameters as TA private memory
* crypto: fix `cipher_final()` which would not call `cbc_done()` for CBC\_MAC
  algorithms
* fix for 16-way PL310
* arm32: fix call stack unwinding (`print_stack()`)
* arm32: fix spinlock assembly code
* plat-stm, plat-imx: fix SCR initalization
* Fix user L1 MMU entries calculation (non-LPAE), allowing TTBCR.N values
  other than 7.
* mtk-mt8173: fix panic caused by incorrect size of SHMEM
* plat-stm: fix RNG driver (non-flat mapping)

## Known issues

* New issues open on GitHub
  + [#1203](https://github.com/OP-TEE/optee_os/issues/1203) AES-CTS mode will fail when inlen=0x100, in\_incr=0x80
  + [#1199](https://github.com/OP-TEE/optee_os/issues/1199) Both tee and teepriv reported GlobalPlatform compliant
  + [#1188](https://github.com/OP-TEE/optee_os/issues/1188) Secure storage (SQL FS and REE FS): blocks not tied to
    current meta header
  + [#1172](https://github.com/OP-TEE/optee_os/issues/1172) paddr\_t should be larger than 32 bits when
    CFG\_WITH\_LPAE is enabled

## Tested on

In the list below, *standard* means that the `xtest` program passed with
its default configuration, while *extended* means it was run successfully
with the additional GlobalPlatform™ TEE Initial Configuration Test Suite
v1.1.0.4.

If a platform is not listed, it means the release was not tested on this
platform.

* d02: extended
* hikey: extended
* imx-mx6ulevk: standard
* ls-ls1021atwr: standard
* mediatek-mt8173: standard
* rcar-h3: standard
* rpi3: standard
* stm-b2260: extended
* stm-cannes: extended
* ti-dra7xx: standard
* vexpress-fvp: standard
* vexpress-juno: standard
* vexpress-qemu\_armv8a: standard
* vexpress-qemu\_virt: extended
* zynqmp-zcu102: standard

# OP-TEE - version 2.2.0

[Link](https://github.com/OP-TEE/optee_os/compare/2.1.0...2.2.0) to a list of all commits between this release and
the previous one (2.1.0).

Please note: this release is API-compatible with the previous one, but the
Secure Storage internal format is not compatible due to commit
[fde4a75](https://github.com/OP-TEE/optee_os/commit/fde4a75) ("storage: encrypt the FEK with a TA-specific key").

## New features

* New supported platforms:

  + Freescale i.MX6 Quad SABRE Lite & SD
  + HiSilicon D02
  + Raspberry Pi3
  + Renesas RCAR H3
  + STMicroelectronics b2260 - h410
* Pager: Support paging of read/write pages by encrypting them with AES-GCM.
  Support paging of user TAs. Add global setting for TZSRAM size
  (CFG\_CORE\_TZSRAM\_EMUL\_SIZE), defaults to 300K.
* Support for more than 8 CPU cores
* Added SPI framework and PL022 driver
* GPIO: framework supports multiple instances, PL061 driver now has get/set
  interrupt and mode control functions
* Secure storage: Encrypt the File Encryption Key with a TA-specific key for
  better TA isolation. Add build-time and run-time support for multiple storage
  backends. Add SQLite backend.
* Trusted User Interface: some code is introduced to support the implementation
  of TUI. This includes: a generic framebuffer driver, display and serial
  abstractions, and drivers for PL111 (LCD) / PL050 (KMI) / TZC400 and PS2
  mouse.
* AES acceleration using ARMv8-A Cryptographic Extensions instructions is
  now supported in AArch32 mode
* Add support for GCC flags: -fsanitize=undefined and -fsanitize=kernel-address
* Use a global setting for core heap size (CFG\_CORE\_HEAP\_SIZE), 64K by default.
* Add macros to unwind and print the call stack of TEE core
* Libtomcrypt: sync with the latest `develop` branch.
* The Trusted Application SDK (ta\_dev\_kit.mk) can produce libraries (.a)
* Rework assertions and TEE core panics and properly honor NDEBUG

## Bug fixes

* Fix incorrect algorithm passed to cipher.final()
* scripts: support Python 2.x and 3.x
* Secure storage: Add proper locking to support concurrent access. Fix sign
  extension bug with offset parameter of syscall storage\_obj\_seek which could
  cause errors in Aarch32 mode. Fix reading beyond end of file.
* Aarch64: mask all maskable exceptions before doing a normal return from call.
* Device Tree: add no-map property to OP-TEE node in reserved-memory.
* LibTomcrypt: fix CVE-2016-6129

## Known issues

* New issues open on GitHub
  + [#1093](https://github.com/OP-TEE/optee_os/issues/1093) rcar-h3: xtest 6010 hangs
  + [#1092](https://github.com/OP-TEE/optee_os/issues/1092) rcar-h3: xtest 4010 fails
  + [#1081](https://github.com/OP-TEE/optee_os/issues/1081) Bad mapping of TA secure memref parameters
  + [#1071](https://github.com/OP-TEE/optee_os/issues/1071) \_\_data\_end may not correctly represent text start position when using CFG\_WITH\_PAGER
  + [#1069](https://github.com/OP-TEE/optee_os/issues/1069) armv7/Aarch32: crash in stack unwind (DPRINT\_STACK())

## Tested on

In the list below, *standard* means that the `xtest` program passed with
its default configuration, while *extended* means it was run successfully
with the additional GlobalPlatform™ TEE Initial Configuration Test Suite
v1.1.0.4.

If a platform is not listed, it means the release was not tested on this
platform.

* d02: extended
* hikey: extended
* imx-mx6qsabrelite: standard
* imx-mx6qsabresd: standard
* rcar-h3: standard, pass except issues [#1092](https://github.com/OP-TEE/optee_os/issues/1092) and [#1093](https://github.com/OP-TEE/optee_os/issues/1093)
* rpi3: standard
* stm-b2260: standard
* stm-cannes: standard
* ti-dra7xx: standard
* vexpress-fvp: standard
* vexpress-juno: standard
* vexpress-qemu\_armv8a: standard
* vexpress-qemu\_virt: extended
* zynqmp-zcu102: standard

# OP-TEE - version 2.1.0

## New features

* New supported platforms:

  + Xilinx Zynq UltraScale+ MPSOC
  + Spreadtrum SC9860
* GCC5 support
* Non Linear Mapping support: In OP-TEE kernel mode, the physical to virtual
  addresses was linear until this release, meaning the virtual addresses
  were equal to the physical addresses. This is no more the case in this
  release.
* Font rendering routines have been introduced in order to ease an
  implementation of Trusted UI.
* File Storage: Possibility to use the normal world filesystem and the RPMB
  implementations simultaneously.
* AOSP: There is a [local manifest](https://github.com/linaro-swg/optee_android_manifest) to build OP-TEE into an AOSP build, running on HiKey.
  Please refer to the README in that repo for instructions.
* OpenEmbedded: In addition to the makefile-based build described in the optee\_os README, there is an
  [OpenEmbedded-based build](https://github.com/linaro-swg/oe-optee) that supports Qemu (32-bit), FVP (64-bit), and HiKey (64-bit).
  Please refer to the README in that repo for instructions.
* [Link](https://github.com/OP-TEE/optee_os/compare/2.0.0...2.1.0) to a list of all commits between this and
  previous release.

## Tested on

Definitions:

| Type | Meaning |
| --- | --- |
| Standard tests | The [optee\_test](https://github.com/OP-TEE/optee_test) project. |
| Extended tests | optee\_test with tests from the GlobalPlatform™ TEE Initial Configuration Test Suite v1.1.0.4. |

* ARM Juno Board (vexpress-juno), standard.
* Foundation Models (vexpress-fvp), standard tests + extended tests,
  using FVP ARM V8 Foundation Platformr0p0 (platform build 10.0.37)
* FSL i.MX6 UltraLite EVK (imx), standard.
* FSL ls1021a (ls-ls1021atwr), standard tests.
* HiKey (hikey), standard + extended tests.
* QEMU (vexpress-qemu), standard + extended tests.
* Xilinx Zynq UltraScale+ MPSOC, standard tests

Note that the following platform has not been tested:

* MTK8173-EVB (mediatek-mt8173)

## Known issues

* Issue(s) open on GitHub
  + [#868](https://github.com/OP-TEE/optee_os/issues/868): python-wand font generation sometimes times out
  + [#863](https://github.com/OP-TEE/optee_os/issues/863): "double free or corruption" error when building optee\_os
  + [#858](https://github.com/OP-TEE/optee_os/issues/858): UUIDs in binary format have wrong endinanness
  + [#857](https://github.com/OP-TEE/optee_os/issues/857): Formatting of UUIDs is incorrect
  + [#847](https://github.com/OP-TEE/optee_os/issues/847): optee\_os panic(TEE-CORE: Assertion)
  + [#838](https://github.com/OP-TEE/optee_os/issues/838): TUI font rendering is *very* slow
  + [#814](https://github.com/OP-TEE/optee_os/issues/814): Persistent objects : save informations after close
  + [#665](https://github.com/OP-TEE/optee_os/issues/665): xtest 1013 stalled on HiKey when log levels are 4 and optee\_os is on its own UART
  + [#506](https://github.com/OP-TEE/optee_os/issues/506): tee-supplicant panic & ta panic

# OP-TEE - version 2.0.0

## New features

* Generic driver: A new generic TEE driver is in the process of being
  [upstreamed](https://lkml.org/lkml/2016/4/1/205).
  In this release, [OP-TEE/optee\_linuxdriver](https://github.com/OP-TEE/optee_linuxdriver) is no more used.
  Instead, linux v4.5 is being patched using the proposed Generic TEE Driver,
  as it can be found in <https://github.com/linaro-swg/linux/tree/optee>
* RPMB support: Secure Storage can now use Replay Protected Memory Block (RPMB) partition
  of an eMMC device. Check the [full documentation](https://github.com/OP-TEE/optee_os/blob/master/documentation/secure_storage_rpmb.md)
* Hard-float ABI is now available.
* [Link](https://github.com/OP-TEE/optee_os/compare/1.1.0...2.0.0) to a list of all commits between this and
  previous release.

## Tested on

Definitions:

| Type | Meaning |
| --- | --- |
| Standard tests | The [optee\_test](https://github.com/OP-TEE/optee_test) project. |
| Extended tests | optee\_test with tests from the GlobalPlatform™ TEE Initial Configuration Test Suite v1.1.0.4. |

* ARM Juno Board (vexpress-juno), standard.
* Foundation Models (vexpress-fvp), standard tests + extended tests,
  using FVP ARM V8 Foundation Platformr0p0 (platform build 9.5.40)
* FSL ls1021a (ls-ls1021atwr), standard.
* HiKey (hikey), standard.
* MTK8173-EVB (mediatek-mt8173), standard.
* QEMU (vexpress-qemu), standard + extended tests.
* STM Cannes (stm-cannes), standard + extended tests.

## Known issues

* Issue(s) open on GitHub
  + [#40](https://github.com/OP-TEE/optee_linuxdriver/issues/40) BUG\_ON() when re-using RPC buffer to tee-supplicant
  + [#506](https://github.com/OP-TEE/optee_os/issues/506): tee-supplicant panic & ta panic

# OP-TEE - version 1.1.0

## New features

* Softfloat library: floating point support is now available in 32bits TA.
* Support running 64-bits TA: on ARMv8-A platform, TA can be compiled in
  AArch32 and/or in AArch64 in case the core is compiled in AArch64.
  An example can be found in HiKey configuration file. Using the following
  excerpt code, the user TA libraries are compiled in both AArch32 and
  AArch64, and can be found in `out/arm-plat-hikey/export-ta_arm32` and
  `out/arm-plat-hikey/export-ta_arm64`

```
    ta-targets = ta_arm32
    ta-targets += ta_arm64

```

* Concurrent TA support: multiple TA can run in parallel on
  several cores.
* New tests added in xtest test suite: concurrent TA (xtest 1013),
  floating point tests (xtest 1006 and os\_test TA) and corruption
  file storage (xtest 20000)
* [Link](https://github.com/OP-TEE/optee_os/compare/1.0.1...1.1.0) to a list of all commits between this and
  previous release.

## Tested on

Definitions:

| Type | Meaning |
| --- | --- |
| Standard tests | The [optee\_test](https://github.com/OP-TEE/optee_test) project. |
| Extended tests | optee\_test with tests from the GlobalPlatform™ TEE Initial Configuration Test Suite v1.1.0.4. |
| Hello world test | Plain hello world Trusted Application such as [this](https://github.com/jenswi-linaro/lcu14_optee_hello_world). |

* Foundation Models (vexpress-fvp), standard tests + extended tests,
  using FVP ARM V8 Foundation Platformr0p0 (platform build 9.5.40)
* HiKey (hikey), standard + extended tests.
* MT8173 (mediatek), standard tests.
* QEMU (vexpress-qemu), standard + extended tests.
* STM Cannes (stm-cannes), standard + extended tests.

## Known issues

* Secure Storage is implemented, but note that anti-rollback protection
  is not implemented yet.
* Issue(s) open on GitHub

  + [#40](https://github.com/OP-TEE/optee_linuxdriver/issues/40) BUG\_ON() when re-using RPC buffer to tee-supplicant
  + [#296](https://github.com/OP-TEE/optee_os/issues/296): Connecting RPMB to the storage APIs.
  + [#493](https://github.com/OP-TEE/optee_os/issues/493): setup\_juno\_optee: unable to find pre-built binaries
  + [#506](https://github.com/OP-TEE/optee_os/issues/506): tee-supplicant panic & ta panic

# OP-TEE - version 1.0.0

OP-TEE is now maintained by Linaro. Contributors do not need to
sign a CLA anymore, but must follow the rules of the [DCO](https://github.com/OP-TEE/optee_os/blob/master/Notice.md#contributions)
(Developer Certificate of Origin) instead.

## New features

* Add hardware support for Texas Instruments DRA7xx, ARMv7 (plat-ti)
* GlobalPlatform™ TEE Internal Core API Specification v1.1,
  including ECC algorithms.
* Secure Storage: Files stored by the REE are now encrypted. Operations
  are made atomic in order to prevent inconsistencies in case of errors
  during the storage operations. [Slides](http://www.slideshare.net/linaroorg/sfo15503-secure-storage-in-optee) describing the
  Secure Storage have been presented at the Linaro Connect SFO15.
* Change of format of the Trusted Applications: they follow a
  [signed ELF format](https://github.com/OP-TEE/optee_os/blob/master/documentation/optee_design.md#format)
* Rework thread [synchronization](https://github.com/OP-TEE/optee_os/blob/master/documentation/optee_design.md#4-thread-handling) in optee\_os.
* Use of ARMv8 native cryptographic support.
* [OP-TEE/optee\_test](https://github.com/OP-TEE/optee_test) test suite is released.
* Introduce [OP-TEE/manifest](https://github.com/OP-TEE/manifest) and [OP-TEE/build](https://github.com/OP-TEE/build)
  to setup and build QEMU, FVP, HiKey and Mediatek platforms. Setup scripts
  that used to be in optee\_os have been removed, except for Juno board.
* [Link](https://github.com/OP-TEE/optee_os/compare/0.3.0...1.0.0) to a list of all commits between this and
  previous release.

## Tested on

Definitions:

| Type | Meaning |
| --- | --- |
| Standard tests | The [optee\_test](https://github.com/OP-TEE/optee_test) project. |
| Extended tests | optee\_test with tests from the GlobalPlatform™ TEE Initial Configuration Test Suite v1.1.0.4. |
| Hello world test | Plain hello world Trusted Application such as [this](https://github.com/jenswi-linaro/lcu14_optee_hello_world). |

* ARM Juno Board (vexpress-juno), standard + extended tests.
* Foundation Models (vexpress-fvp), standard tests.
* HiKey (hikey), standard + extended tests.
* MT8173 (mediatek), standard tests.
* QEMU (vexpress-qemu), standard + extended tests.
* STM Cannes (stm-cannes), standard + extended tests.

## Known issues

* Secure Storage is implemented, but note that anti-rollback protection
  is not implemented yet.
* Issue(s) open on GitHub

  + [#210](https://github.com/OP-TEE/optee_os/issues/210): libteec.so 32-bit does not communicate well
    with 64-bit kernel module
  + [#296](https://github.com/OP-TEE/optee_os/issues/296): Connecting RPMB to the storage APIs.
  + [#493](https://github.com/OP-TEE/optee_os/issues/493): setup\_juno\_optee: unable to find pre-built binaries
  + [#494](https://github.com/OP-TEE/optee_os/issues/494): HiKey: xtest 7671 fails (1.0.0-rc2)

# OP-TEE - version 0.3.0

## New features

* Add hardware support for
  + Mediatek MT8173 Board, ARMv8-A (plat-mediatek)
  + Hisilicon HiKey Board, ARMv8-A (plat-hikey)
* AArch64 build of optee\_os is now possible through the configuration `CFG_ARM64_core=y`
* Secure Storage: Data can be encrypted prior to their storage in the non-secure.
  Build is configured using `CFG_ENC_FS=y`
* A generic boot scheme can be used. Boot configuration is commonalized. This helps
  new board support. It is applied on plat-hikey, plat-vexpress, plat-mediatek, plat-stm
  and plat-vexpress.

## Tested on

Definitions:

| Type | Meaning |
| --- | --- |
| Standard tests | The optee\_test project. |
| Extended tests | optee\_test with tests from the GlobalPlatform™ TEE Initial Configuration Test Suite v1.1.0.4. |
| Hello world test | Plain hello world Trusted Application such as [this](https://github.com/jenswi-linaro/lcu14_optee_hello_world). |

* ARM Juno Board (vexpress-juno), standard tests.
* Foundation Models (vexpress-fvp), standard tests.
* HiKey (hikey), standard tests.
* MT8173 (mediatek), standard tests.
* QEMU (vexpress-qemu), standard + extended tests.
* STM Cannes (stm-cannes), standard + extended tests.

---

# OP-TEE - version 0.2.0

## New features

### Linux Driver Refactoring

Linux Driver has been refactored. It is now split in two parts:

* optee.ko, the generic Linux driver. It contains all functionality
  common to all backends.
* optee\_armtz.ko, a specific backend dedicated to the TrustZone optee.
  It depends on optee.ko.

Loading the TrustZone optee linux driver module is now performed using

```
modprobe optee_armtz

```

Thanks to the dependency between the generic and the backend modules, optee.ko is then automatically loaded.

### Misc new features

* support PL310 lock down at TEE boot
* add 64bits support (division / print)

## Tested on

Definitions:

| Type | Meaning |
| --- | --- |
| Standard tests | The optee\_test project. |
| Extended tests | optee\_test with tests from the GlobalPlatform™ TEE Initial Configuration Test Suite v1.1.0.4. |
| Hello world test | Plain hello world Trusted Application such as [this](https://github.com/jenswi-linaro/lcu14_optee_hello_world). |

* ARM Juno Board (vexpress-juno), standard tests + extended tests.
* Foundation Models (vexpress-fvp), standard + extended tests.
* QEMU (vexpress-qemu), standard + extended tests.
* STM Cannes (stm-cannes), standard + extended tests.

## Issues resolved since last release

* Fix user TA trace issue, in order each TA is able to select its own trace level

---

#OP-TEE - version 0.1.0

## New features

Below is a summary of the most important features added, but at the end you will
find a link that present you all commits between the current and previous
release tag.

* GlobalPlatform Client API v1.0 support.
* GlobalPlatform Internal API v1.0 support.
* GlobalPlatform Secure Elements v1.0 support.
* Add hardware support for

  + Allwinner A80, ARMv7-A.
  + ARM Juno Board, ARMv8-A.
  + Foundation Models, ARMv8-A.
  + Fast Models, ARMv8-A.
  + QEMU, ARMv7-A.
  + STM Cannes, ARMv7-A.
  + STM Orly2, ARMv7-A.
* Add LibTomCrypt as the default software cryptographic library.
* Add cryptographic abstraction layer in on secure side to ease the use of
  other cryptographic software libraries or adding support for hardware
  acceleration.
* Extended cryptographic API with support for HKDF, Concat KDF and PBKDF2.
* SHA-1 and SHA-256 ARMv8-A crypto extension implementation.
* Enabled paging support in OP-TEE OS.
* Add support for xtest (both standard and extended) in QEMU and FVP setup
  scripts.
* Add documentation for the OS design, cryptographic abstraction layer, secure
  elements design, the build system, GitHub usage, key derivation extensions,
  ARM-Trusted Firmware usage within OP-TEE and GlobalPlatform usage within
  OP-TEE.
* Integrate support for Travis CI.
* [Link](https://github.com/OP-TEE/optee_os/compare/b01047730e77127c23a36591643eeb8bb0487d68...999e4a6c0f64d3177fd3d0db234107b6fb860884) to a list of all commits between this and
  previous release.

## Tested on

Definitions:

| Type | Meaning |
| --- | --- |
| Standard tests | The optee\_test project. |
| Extended tests | optee\_test with tests from the GlobalPlatform™ TEE Initial Configuration Test Suite v1.0.0. |
| Hello world test | Plain hello world Trusted Application such as [this](https://github.com/jenswi-linaro/lcu14_optee_hello_world). |

* Allwinner A80 (plat-sunxi), hello world test.
* ARM Juno Board (vexpress-juno), standard tests.
* Foundation Models (plat-vexpress-fvp), standard + extended tests
* QEMU (plat-vexpress-qemu), standard + extended tests (and Secure Elements
  tested separately).
* STM Cannes (plat-stm-cannes), standard + extended tests.

## Issues resolved since last release

N/A since this is the first release tag on OP-TEE.

## Known issues

* Storage is implemented, but not "Secure storage", meaning that a client
  needs to do encrypt files on their own before storing the files.
* Issue(s) open on GitHub

  + [#95](https://github.com/OP-TEE/optee_os/issues/95): An error about building the test code of libtomcrypt.
  + [#149](https://github.com/OP-TEE/optee_os/issues/149): when testing optee os with arm trusted firmware (I
    utilized optee os tee.bin as bl32 image) on juno platform, I got an
    error.
  + [#161](https://github.com/OP-TEE/optee_os/issues/161): tee\_svc\_cryp.c lacks accessibility checks on
    user-supplied TEE\_Attributes.

* Global Platform Device Internal Core API v1.1
  + [#230][pr230]: Persistent object corruption support (TEE\_ERROR\_CORRUPT\_OBJECT/\_2)
  + [#230][pr230]: Persistent object access support (TEE\_ERROR\_STORAGE\_NOT\_AVAILABLE/\_2)

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_2ca9c658_20250124_113437.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FOP-TEE%2Foptee_os%2Fpull%2F1610)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FOP-TEE%2Foptee_os%2Fpull%2F1610)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fpull_requests_fragments%2Fpull_request_layout&source=header-repo&source_repo=OP-TEE%2Foptee_os)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[OP-TEE](/OP-TEE)
/
**[optee\_os](/OP-TEE/optee_os)**
Public

* [Notifications](/login?return_to=%2FOP-TEE%2Foptee_os) You must be signed in to change notification settings
* [Fork
  1.1k](/login?return_to=%2FOP-TEE%2Foptee_os)
* [Star
   1.6k](/login?return_to=%2FOP-TEE%2Foptee_os)

* [Code](/OP-TEE/optee_os)
* [Issues
  27](/OP-TEE/optee_os/issues)
* [Pull requests
  23](/OP-TEE/optee_os/pulls)
* [Actions](/OP-TEE/optee_os/actions)
* [Projects
  0](/OP-TEE/optee_os/projects)
* [Wiki](/OP-TEE/optee_os/wiki)
* [Security](/OP-TEE/optee_os/security)
* [Insights](/OP-TEE/optee_os/pulse)

Additional navigation options

* [Code](/OP-TEE/optee_os)
* [Issues](/OP-TEE/optee_os/issues)
* [Pull requests](/OP-TEE/optee_os/pulls)
* [Actions](/OP-TEE/optee_os/actions)
* [Projects](/OP-TEE/optee_os/projects)
* [Wiki](/OP-TEE/optee_os/wiki)
* [Security](/OP-TEE/optee_os/security)
* [Insights](/OP-TEE/optee_os/pulse)

New issue

**Have a question about this project?** Sign up for a free GitHub account to open an issue and contact its maintainers and the community.

 [Sign up for GitHub](/signup?return_to=%2FOP-TEE%2Foptee_os%2Fissues%2Fnew%2Fchoose)

By clicking “Sign up for GitHub”, you agree to our [terms of service](https://docs.github.com/terms) and
[privacy statement](https://docs.github.com/privacy). We’ll occasionally send you account related emails.

Already on GitHub?
[Sign in](/login?return_to=%2FOP-TEE%2Foptee_os%2Fissues%2Fnew%2Fchoose)
to your account

[Jump to bottom](#issue-comment-box)

# Rsa for 2.5.0 #1610

 Merged

[jforissier](/jforissier)
merged 5 commits into
[OP-TEE:master](/OP-TEE/optee_os/tree/master "OP-TEE/optee_os:master")
from
[jbech-linaro:rsa-for-2.5.0](/jbech-linaro/optee_os/tree/rsa-for-2.5.0 "jbech-linaro/optee_os:rsa-for-2.5.0")

Jun 19, 2017

 Merged

# [Rsa for 2.5.0](#top) #1610

[jforissier](/jforissier)
merged 5 commits into
[OP-TEE:master](/OP-TEE/optee_os/tree/master "OP-TEE/optee_os:master")
from
[jbech-linaro:rsa-for-2.5.0](/jbech-linaro/optee_os/tree/rsa-for-2.5.0 "jbech-linaro/optee_os:rsa-for-2.5.0")

Jun 19, 2017

[Conversation
7](/OP-TEE/optee_os/pull/1610)
[Commits
5](/OP-TEE/optee_os/pull/1610/commits)
[Checks
0](/OP-TEE/optee_os/pull/1610/checks)
[Files changed](/OP-TEE/optee_os/pull/1610/files)

## Conversation

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

[![jbech-linaro](https://avatars.githubusercontent.com/u/6168937?s=60&v=4)](/jbech-linaro)

Copy link

Contributor

### @jbech-linaro **[jbech-linaro](/jbech-linaro)** commented [Jun 15, 2017](#issue-236314666)

Fixes for the security issues that we discussed a while ago. Note that patches has already been reviewed once before this PR, so that is the reason why you already find that in the patches.

```
root@Vexpress:/ xtest -l 15
...
+-----------------------------------------------------
47112 subtests of which 0 failed
78 test cases of which 0 failed
0 test case was skipped
TEE test application done!
root@Vexpress:/
```

Sorry, something went wrong.

All reactions

[![@jforissier](https://avatars.githubusercontent.com/u/8288195?s=80&u=cad952704f30eb680b8f9bfcdcd0ce21ee0b2142&v=4)](/jforissier)

Copy link

Contributor

### **[jforissier](/jforissier)** commented [Jun 15, 2017](#issuecomment-308870689)

| Thanks for creating the PR. I have 2 questions:   * Do we have CVE numbers for the security fixes? If we do, the numbers should be in the commit description, but if we don't it shouldn't stop us from merging the patches of course. * The checkpatch warnings look easy enough to fix (long lines), can you address this please? |
| --- |

All reactions

Sorry, something went wrong.

[![@jbech-linaro](https://avatars.githubusercontent.com/u/6168937?s=80&u=a1db9f2d3412fe65a888acde1db8e1d9cbf24ac3&v=4)](/jbech-linaro)

Copy link

Contributor

Author

### **[jbech-linaro](/jbech-linaro)** commented [Jun 16, 2017](#issuecomment-308969232)

| Do we have CVE numbers for the security fixes? If we do, the numbers should be in the commit description, but if we don't it shouldn't stop us from merging the patches of course.  I've requested CVE's using [this](http://iwantacve.org) (it's actually quite a while ago), but I haven't got them yet. Compared to the first time, we got asked to accept a some legal stuff, which Rob Booth approved and I gave the information to them. But checking [this](https://github.com/distributedweaknessfiling/DWF-Legal-Acceptance/tree/master/Terms-Of-Use) page I still cannot find my own email address there. I can try to get hold of the Mitre people, but I don't think we will get any CVE's in time for the release. Instead I suggest that we update out [Security Advisories](https://www.op-tee.org/security-advisories) page instead when we've actually got the CVE's.  The checkpatch warnings look easy enough to fix (long lines), can you address this please?  Of course, I will fix those. |
| --- |

All reactions

Sorry, something went wrong.

[![@jforissier](https://avatars.githubusercontent.com/u/8288195?s=80&u=cad952704f30eb680b8f9bfcdcd0ce21ee0b2142&v=4)](/jforissier)

Copy link

Contributor

### **[jforissier](/jforissier)** commented [Jun 16, 2017](#issuecomment-308970855)

| [@jbech-linaro](https://github.com/jbech-linaro) sounds good to me, thanks! |
| --- |

All reactions

Sorry, something went wrong.

[![@jforissier](https://avatars.githubusercontent.com/u/8288195?s=80&u=cad952704f30eb680b8f9bfcdcd0ce21ee0b2142&v=4)](/jforissier)

Copy link

Contributor

### **[jforissier](/jforissier)** commented [Jun 16, 2017](#issuecomment-308999983)

| All good, I think you can squash the fixup into the original patch and I'll merge everything. |
| --- |

All reactions

Sorry, something went wrong.

 [jbech-linaro](/jbech-linaro)
added 5 commits
[June 19, 2017 10:04](#commits-pushed-c53ec77)

[![@jbech-linaro](https://avatars.githubusercontent.com/u/6168937?s=40&v=4)](/jbech-linaro)

`[ltc: remove LTC_LINARO_FIX_RSAWITHOUTCRT](/OP-TEE/optee_os/pull/1610/commits/c53ec7708e6f97fabc4a532a48d6099f1202d913 "ltc: remove LTC_LINARO_FIX_RSAWITHOUTCRT

LTC_LINARO_FIX_RSAWITHOUTCRT is used to handle the case where the CRT
optimized algorithm cannot be used because the optimized parameters are
missing. In the official LibTomCrypt tree, there is an official fix for
this.

Please see commits (official LibTomCrypt tree):
    01f184540232 (\"harden RSA CRT by implementing the proposed
                   countermeasure from ch. 1.3 of [1]\")
    a6e89d58d4fb (\"RSA in CRT optimization parameters are empty\")
    2bb3f0246f65 (\"RSA in case CRT optimization parameters are not
                   populated\")

Those patches were brought into OP-TEE with this patch
    a50cb361d9e5 (\"ltc: sync from official develop branch\")

And therefore there is no need to keep the LTC_LINARO_FIX_RSAWITHOUTCRT
any longer, hence this patch removes the flag and the code related to
that particular flag.

Signed-off-by: Joakim Bech <joakim.bech@linaro.org>
Reviewed-by: Jerome Forissier <jerome.forissier@linaro.org>
Reviewed-by: Jens Wiklander <jens.wiklander@linaro.org>
Acked-by: Etienne Carriere <etienne.carriere@linaro.org>
Tested-by: Jerome Forissier <jerome.forissier@linaro.org> (HiKey, GP)
Tested-by: Etienne Carriere <etienne.carriere@linaro.org> (b2260, GP)")`
 …

`[c53ec77](/OP-TEE/optee_os/pull/1610/commits/c53ec7708e6f97fabc4a532a48d6099f1202d913)`

```
LTC_LINARO_FIX_RSAWITHOUTCRT is used to handle the case where the CRT
optimized algorithm cannot be used because the optimized parameters are
missing. In the official LibTomCrypt tree, there is an official fix for
this.

Please see commits (official LibTomCrypt tree):
    01f184540232 ("harden RSA CRT by implementing the proposed
                   countermeasure from ch. 1.3 of [1]")
    a6e89d58d4fb ("RSA in CRT optimization parameters are empty")
    2bb3f0246f65 ("RSA in case CRT optimization parameters are not
                   populated")

Those patches were brought into OP-TEE with this patch
    [a50cb36](https://github.com/jbech-linaro/optee_os/commit/a50cb361d9e5735f197ccc87beb0d24af8315369) ("ltc: sync from official develop branch")

And therefore there is no need to keep the LTC_LINARO_FIX_RSAWITHOUTCRT
any longer, hence this patch removes the flag and the code related to
that particular flag.

Signed-off-by: Joakim Bech <joakim.bech@linaro.org>
Reviewed-by: Jerome Forissier <jerome.forissier@linaro.org>
Reviewed-by: Jens Wiklander <jens.wiklander@linaro.org>
Acked-by: Etienne Carriere <etienne.carriere@linaro.org>
Tested-by: Jerome Forissier <jerome.forissier@linaro.org> (HiKey, GP)
Tested-by: Etienne Carriere <etienne.carriere@linaro.org> (b2260, GP)
```

[![@jbech-linaro](https://avatars.githubusercontent.com/u/6168937?s=40&v=4)](/jbech-linaro)

`[ltc: fix formatting related to exptmod](/OP-TEE/optee_os/pull/1610/commits/63f5467fc36aa3789a7aef9cfe55e477c786c404 "ltc: fix formatting related to exptmod

Signed-off-by: Joakim Bech <joakim.bech@linaro.org>
Reviewed-by: Jerome Forissier <jerome.forissier@linaro.org>
Reviewed-by: Jens Wiklander <jens.wiklander@linaro.org>
Reviewed-by: Etienne Carriere <etienne.carriere@linaro.org>
Tested-by: Jerome Forissier <jerome.forissier@linaro.org> (HiKey, GP)
Tested-by: Etienne Carriere <etienne.carriere@linaro.org> (b2260, GP)")`
 …

`[63f5467](/OP-TEE/optee_os/pull/1610/commits/63f5467fc36aa3789a7aef9cfe55e477c786c404)`

```
Signed-off-by: Joakim Bech <joakim.bech@linaro.org>
Reviewed-by: Jerome Forissier <jerome.forissier@linaro.org>
Reviewed-by: Jens Wiklander <jens.wiklander@linaro.org>
Reviewed-by: Etienne Carriere <etienne.carriere@linaro.org>
Tested-by: Jerome Forissier <jerome.forissier@linaro.org> (HiKey, GP)
Tested-by: Etienne Carriere <etienne.carriere@linaro.org> (b2260, GP)
```

[![@jbech-linaro](https://avatars.githubusercontent.com/u/6168937?s=40&v=4)](/jbech-linaro)

`[ltc: Implement mp_rand for mpa_desc](/OP-TEE/optee_os/pull/1610/commits/d086014de4e46c9a37b5fd228e71e9861e93cd09 "ltc: Implement mp_rand for mpa_desc

When enabling the flag LTC_RSA_BLINDING the code uses the mp_rand()
function, which isn't implemented for the mpa_desc descriptor. Implement
it as rand() in mpa_desc and mpa_get_random_digits() in libmpa.

Fixes: OP-TEE-2016-0003 which was reported by Applus+ Laboratories.

Signed-off-by: Joakim Bech <joakim.bech@linaro.org>
Reviewed-by: Jerome Forissier <jerome.forissier@linaro.org>
Reviewed-by: Jens Wiklander <jens.wiklander@linaro.org>
Acked-by: Etienne Carriere <etienne.carriere@linaro.org>
Tested-by: Jerome Forissier <jerome.forissier@linaro.org> (HiKey, GP)
Tested-by: Etienne Carriere <etienne.carriere@linaro.org> (b2260, GP)")`
 …

`[d086014](/OP-TEE/optee_os/pull/1610/commits/d086014de4e46c9a37b5fd228e71e9861e93cd09)`

```
When enabling the flag LTC_RSA_BLINDING the code uses the mp_rand()
function, which isn't implemented for the mpa_desc descriptor. Implement
it as rand() in mpa_desc and mpa_get_random_digits() in libmpa.

Fixes: OP-TEE-2016-0003 which was reported by Applus+ Laboratories.

Signed-off-by: Joakim Bech <joakim.bech@linaro.org>
Reviewed-by: Jerome Forissier <jerome.forissier@linaro.org>
Reviewed-by: Jens Wiklander <jens.wiklander@linaro.org>
Acked-by: Etienne Carriere <etienne.carriere@linaro.org>
Tested-by: Jerome Forissier <jerome.forissier@linaro.org> (HiKey, GP)
Tested-by: Etienne Carriere <etienne.carriere@linaro.org> (b2260, GP)
```

[![@jbech-linaro](https://avatars.githubusercontent.com/u/6168937?s=40&v=4)](/jbech-linaro)

`[ltc: Enable RSA_CRT_HARDENING and RSA_CRT_BLINDING](/OP-TEE/optee_os/pull/1610/commits/e23868cfaab904ffaa9138adfe727fdb502935c8 "ltc: Enable RSA_CRT_HARDENING and RSA_CRT_BLINDING

Enable the hardening flags by default. This should make it robust to the
Bellcore attack when using RSA with CRT.

Fixes: OP-TEE-2016-0003 which was reported by Applus+ Laboratories.

Signed-off-by: Joakim Bech <joakim.bech@linaro.org>
Reviewed-by: Jerome Forissier <jerome.forissier@linaro.org>
Reviewed-by: Jens Wiklander <jens.wiklander@linaro.org>
Acked-by: Etienne Carriere <etienne.carriere@linaro.org>
Tested-by: Jerome Forissier <jerome.forissier@linaro.org> (HiKey, GP)
Tested-by: Etienne Carriere <etienne.carriere@linaro.org> (b2260, GP)")`
 …

`[e23868c](/OP-TEE/optee_os/pull/1610/commits/e23868cfaab904ffaa9138adfe727fdb502935c8)`

```
Enable the hardening flags by default. This should make it robust to the
Bellcore attack when using RSA with CRT.

Fixes: OP-TEE-2016-0003 which was reported by Applus+ Laboratories.

Signed-off-by: Joakim Bech <joakim.bech@linaro.org>
Reviewed-by: Jerome Forissier <jerome.forissier@linaro.org>
Reviewed-by: Jens Wiklander <jens.wiklander@linaro.org>
Acked-by: Etienne Carriere <etienne.carriere@linaro.org>
Tested-by: Jerome Forissier <jerome.forissier@linaro.org> (HiKey, GP)
Tested-by: Etienne Carriere <etienne.carriere@linaro.org> (b2260, GP)
```

[![@jbech-linaro](https://avatars.githubusercontent.com/u/6168937?s=40&v=4)](/jbech-linaro)

`[libmpa: Implement Montgomery ladder](/OP-TEE/optee_os/pull/1610/commits/2421876859008ac498de722511f3b105b496ac56 "libmpa: Implement Montgomery ladder

The mpa_exp_mod() function implements a LtoR algorithm. The LtoR
algorithm is sensitive to timing attacks since it leaks information
about the exponent since it's doing a different amount of work in each
loop when doing the modular exponentiation. It will always do a square
in each loop, but it will also do an additional multiply when the
exponent bit k=1.

This patch implements the Montgomery ladder (and thereby replaces the
old LtoR implementation), which always does the same amount of
operations in each loop and thereby make it more robust to timing
attacks.

Fixes: OP-TEE-2016-0002 which was reported by Applus+ Laboratories.

Signed-off-by: Joakim Bech <joakim.bech@linaro.org>
Acked-by: Jerome Forissier <jerome.forissier@linaro.org>
Acked-by: Jens Wiklander <jens.wiklander@linaro.org>
Acked-by: Etienne Carriere <etienne.carriere@linaro.org>
Tested-by: Jerome Forissier <jerome.forissier@linaro.org> (HiKey, GP)
Tested-by: Etienne Carriere <etienne.carriere@linaro.org> (b2260, GP)")`
 …

`[2421876](/OP-TEE/optee_os/pull/1610/commits/2421876859008ac498de722511f3b105b496ac56)`

```
The mpa_exp_mod() function implements a LtoR algorithm. The LtoR
algorithm is sensitive to timing attacks since it leaks information
about the exponent since it's doing a different amount of work in each
loop when doing the modular exponentiation. It will always do a square
in each loop, but it will also do an additional multiply when the
exponent bit k=1.

This patch implements the Montgomery ladder (and thereby replaces the
old LtoR implementation), which always does the same amount of
operations in each loop and thereby make it more robust to timing
attacks.

Fixes: OP-TEE-2016-0002 which was reported by Applus+ Laboratories.

Signed-off-by: Joakim Bech <joakim.bech@linaro.org>
Acked-by: Jerome Forissier <jerome.forissier@linaro.org>
Acked-by: Jens Wiklander <jens.wiklander@linaro.org>
Acked-by: Etienne Carriere <etienne.carriere@linaro.org>
Tested-by: Jerome Forissier <jerome.forissier@linaro.org> (HiKey, GP)
Tested-by: Etienne Carriere <etienne.carriere@linaro.org> (b2260, GP)
```

 [![@jbech-linaro](https://avatars.githubusercontent.com/u/6168937?s=40&u=a1db9f2d3412fe65a888acde1db8e1d9cbf24ac3&v=4)](/jbech-linaro)
[jbech-linaro](/jbech-linaro)
[force-pushed](/OP-TEE/optee_os/compare/13242ce253da4fd351d81dda3200dc602068bd14..2421876859008ac498de722511f3b105b496ac56)
the
rsa-for-2.5.0

branch
from
[`13242ce`](/OP-TEE/optee_os/commit/13242ce253da4fd351d81dda3200dc602068bd14) to
[`2421876`](/OP-TEE/optee_os/commit/2421876859008ac498de722511f3b105b496ac56)  [Compare](/OP-TEE/optee_os/compare/13242ce253da4fd351d81dda3200dc602068bd14..2421876859008ac498de722511f3b105b496ac56)
[June 19, 2017 08:04](#event-1128613811)

[![@jbech-linaro](https://avatars.githubusercontent.com/u/6168937?s=80&u=a1db9f2d3412fe65a888acde1db8e1d9cbf24ac3&v=4)](/jbech-linaro)

Copy link

Contributor

Author

### **[jbech-linaro](/jbech-linaro)** commented [Jun 19, 2017](#issuecomment-309368427)

| Squashed, rebased and tag(s) applied (should be) ready for merge! Thanks!  (After rebasing to latest this morning I "Re-tested" with xtest -l 15 on `fe685824 msg_param.h: add` const `qualifier for read-only functions`, but when done I could see another commit has been merged from Etienne). |
| --- |

All reactions

Sorry, something went wrong.

[![@jforissier](https://avatars.githubusercontent.com/u/8288195?s=40&u=cad952704f30eb680b8f9bfcdcd0ce21ee0b2142&v=4)](/jforissier)
[jforissier](/jforissier)
merged commit [`40b1b28`](/OP-TEE/optee_os/commit/40b1b281a6f85f8658be749dc92b57d6a8bd5e78)
into
OP-TEE:master

[Jun 19, 2017](https://github.com/OP-TEE/optee_os/pull/1610#event-1128632248)

[![@jforissier](https://avatars.githubusercontent.com/u/8288195?s=80&u=cad952704f30eb680b8f9bfcdcd0ce21ee0b2142&v=4)](/jforissier)

Copy link

Contributor

### **[jforissier](/jforissier)** commented [Jun 19, 2017](#issuecomment-309370718)

| Merged, thanks.  when done I could see another commit has been merged from Etienne  It's OK. Now I use the "rebase and merge" button to merge the PRs into master, so rebasing to the very latest is not required. |
| --- |

All reactions

Sorry, something went wrong.

[![@jbech-linaro](https://avatars.githubusercontent.com/u/6168937?s=80&u=a1db9f2d3412fe65a888acde1db8e1d9cbf24ac3&v=4)](/jbech-linaro)

Copy link

Contributor

Author

### **[jbech-linaro](/jbech-linaro)** commented [Jun 19, 2017](#issuecomment-309373102)

| It's OK. Now I use the "rebase and merge" button to merge the PRs into master, so rebasing to the very latest is not required.  Thanks Jerome! I did rebase it on Etienne's patch, but I didn't test on his patch! But ... I hardly suspect it will matter. Yeah, the "rebase and merge" is pretty nifty! |
| --- |

All reactions

Sorry, something went wrong.

 [![@jbech-linaro](https://avatars.githubusercontent.com/u/6168937?s=40&u=a1db9f2d3412fe65a888acde1db8e1d9cbf24ac3&v=4)](/jbech-linaro)
[jbech-linaro](/jbech-linaro)
deleted the
rsa-for-2.5.0

branch
[June 19, 2017 08:28](#event-1128648020)

[Sign up for free](/join?source=comment-repo)
**to join this conversation on GitHub**.
Already have an account?
[Sign in to comment](/login?return_to=https%3A%2F%2Fgithub.com%2FOP-TEE%2Foptee_os%2Fpull%2F1610)

Reviewers

No reviews

Assignees

No one assigned

Labels

None yet

Projects

None yet

Milestone

No milestone

Development

Successfully merging this pull request may close these issues.

2 participants

[![@jbech-linaro](https://avatars.githubusercontent.com/u/6168937?s=52&v=4)](/jbech-linaro) [![@jforissier](https://avatars.githubusercontent.com/u/8288195?s=52&v=4)](/jforissier)

Add this suggestion to a batch that can be applied as a single commit.
This suggestion is invalid because no changes were made to the code.
Suggestions cannot be applied while the pull request is closed.
Suggestions cannot be applied while viewing a subset of changes.
Only one suggestion per line can be applied in a batch.
Add this suggestion to a batch that can be applied as a single commit.
Applying suggestions on deleted lines is not supported.
You must change the existing code in this line in order to create a valid suggestion.
Outdated suggestions cannot be applied.
This suggestion has been applied or marked resolved.
Suggestions cannot be applied from pending reviews.
Suggestions cannot be applied on multi-line comments.
Suggestions cannot be applied while the pull request is queued to merge.
Suggestion cannot be applied right now. Please check back later.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.


