=== Content from bugzilla.kernel.org_7a270e46_20250125_181232.html ===


Kernel.org Bugzilla â€“ BugÂ 194061
integer overflow in linux/drivers/scsi/qla2xxx/qla\_attr.c:346
Last modified: 2017-02-07 07:43:18 UTC

* [Home](./)
* | [New](enter_bug.cgi)
* | [Browse](describecomponents.cgi)
* | [Search](query.cgi)
* |

  [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")
* | [Reports](report.cgi)
* |
  [Requests](request.cgi)
* |
  [Help](https://bugzilla.readthedocs.org/en/latest/using/understanding.html)
* |
  [NewÂ Account](createaccount.cgi)
* |
  [Log In](show_bug.cgi?id=194061&GoAheadAndLogIn=1)

  [x]
* |
  [Forgot Password](createaccount.cgi?request_new_password=1)
  Login:

  [x]

[**BugÂ 194061**](show_bug.cgi?id=194061)
- integer overflow in linux/drivers/scsi/qla2xxx/qla\_attr.c:346

[Summary:](page.cgi?id=fields.html#short_desc "The bug summary is a short sentence which succinctly describes what the bug is about.")
integer overflow in linux/drivers/scsi/qla2xxx/qla\_attr.c:346

| | [Status](page.cgi?id=fields.html#bug_status): | NEW | | --- | --- | |  | | | [Alias:](page.cgi?id=fields.html#alias "A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla.") | None | |  | | | [Product:](describecomponents.cgi "Bugs are categorised into Products and Components.") | Drivers | | [Classification:](page.cgi?id=fields.html#classification "Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation.") | Unclassified | | [Component:](describecomponents.cgi?product=Drivers "Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list.") | Other ([show other bugs](buglist.cgi?component=Other&product=Drivers&bug_status=__open__)) | | [Hardware:](page.cgi?id=fields.html#rep_platform "The hardware platform the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | All Linux | |  | | | [Importance](page.cgi?id=fields.html#importance): | P1 high | | [Assignee:](page.cgi?id=fields.html#assigned_to "The person in charge of resolving the bug.") | drivers\_other | |  | | | [URL:](page.cgi?id=fields.html#bug_file_loc "Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen.") |  | | [Keywords:](describekeywords.cgi "You can add keywords from a defined list to bugs, in order to easily identify and group them.") |  | |  | | | [Depends on:](page.cgi?id=fields.html#dependson "The bugs listed here must be resolved before this bug can be resolved.") |  | | [Blocks:](page.cgi?id=fields.html#blocked "This bug must be resolved before the bugs listed in this field can be resolved.") |  | |  | | Reported: | 2017-02-06 09:30 UTC by shqking | | --- | --- | | Modified: | 2017-02-07 07:43 UTC ([History](show_activity.cgi?id=194061)) | | CC List: | 0 users | |  | | | [See Also:](page.cgi?id=fields.html#see_also "This allows you to refer to bugs in other installations. You can enter a URL to a bug in the 'Add Bug URLs' field to note that that bug is related to this one. You can enter multiple URLs at once by separating them with whitespace. You should normally use this field to refer to bugs in other installations. For bugs in this installation, it is better to use the Depends on and Blocks fields.") |  | | [Kernel Version:](page.cgi?id=fields.html#cf_kernel_version "A custom Free Text field in this installation of Bugzilla.") | Linux 4.10-rc7 | | [Subsystem:](page.cgi?id=fields.html#cf_subsystem "The subsystem responsible for this bug (must match MAINTAINERS entry verbatim)") |  | | [Regression:](page.cgi?id=fields.html#cf_regression "A custom Drop Down field in this installation of Bugzilla.") | No | | [Bisected commit-id:](page.cgi?id=fields.html#cf_bisect_commit "Full commit-id of the commit that introduced this regression.") |  | |  | | |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| --- | | |

| | Attachments | | | --- | --- | | [Add an attachment](attachment.cgi?bugid=194061&action=enter) (proposed patch, testcase, etc.) | | |  |
| --- | --- | --- | --- | --- | --- |

| [Description](show_bug.cgi?id=194061#c0)  shqking    2017-02-06 09:30:48 UTC  ``` Hello.  An potential integer overflow is found in linux/drivers/scsi/qla2xxx/qla_attr.c:346.  346 ha->optrom_region_size = start + size > ha->optrom_size ? 347 ha->optrom_size - start : size;  The intention of the conditional expression at line 346 is to guarantee that the result, i.e. "has->optrom_region_size", is no bigger than "ha->optrom_size - start".  It is a fact that "start" is less than "ha->optrom_size" due to the check at line 319. However, there is no range check for "size". An integer overflow for "start + size" would occur, if "size" is set as a very big integer.  For example, assume that "start" is 2, "size" is 0xffffffff and "ha->optrom_size" is 100, "start + size" overflows to 1, invalidating the security check at line 346 and causing the result ("ha->optrom_region_size") to hold the big integer 0xffffffff. This would further lead to huge memory allocation at line 350 and buffer overflow at line 373.   A possible workaround is to add an overflow check at line 346, like below:   ha->optrom_region_size = (start + size < start || start + size > ha->optrom_size) ? ha->optrom_size - start : size;  Thanks. ``` |  |
| --- | --- |

---

| Note You need to [log in](show_bug.cgi?id=194061&GoAheadAndLogIn=1) before you can comment on or make changes to this bug. |
| --- |

---

* [Format For Printing](show_bug.cgi?format=multiple&id=194061)
* -Â [XML](show_bug.cgi?ctype=xml&id=194061)
* -Â [Clone This Bug](enter_bug.cgi?cloned_bug_id=194061)
* -Â Top of page

* + [Home](./)
  + | [New](enter_bug.cgi)
  + | [Browse](describecomponents.cgi)
  + | [Search](query.cgi)
  + |

    [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")
  + | [Reports](report.cgi)
  + |
    [Requests](request.cgi)
  + |
    [Help](https://bugzilla.readthedocs.org/en/latest/using/understanding.html)
  + |
    [NewÂ Account](createaccount.cgi)
  + |
    [Log In](show_bug.cgi?id=194061&GoAheadAndLogIn=1)

    [x]
  + |
    [Forgot Password](createaccount.cgi?request_new_password=1)
    Login:

    [x]



=== Content from lists.debian.org_5bb03dfa_20250125_181232.html ===


---

[[Date Prev](msg00003.html)][[Date Next](msg00005.html)]
[[Thread Prev](msg00003.html)][[Thread Next](msg00005.html)]
[[Date Index](maillist.html#00004)]
[[Thread Index](threads.html#00004)]

# [SECURITY] [DLA 1200-1] linux security update

---

* *To*: debian-lts-announce@lists.debian.org
* *Subject*: [SECURITY] [DLA 1200-1] linux security update
* *From*: Ben Hutchings <benh@debian.org>
* *Date*: Sun, 10 Dec 2017 22:07:05 +0000
* *Message-id*: <[[ðŸ”Ž]](/msgid-search/1512943625.2723.6.camel%40debian.org)Â [1512943625.2723.6.camel@debian.org](msg00004.html)>
* *Mail-followup-to*: debian-lts@lists.debian.org
* *Reply-to*: debian-lts@lists.debian.org

---

```
Package        : linux
Version        : 3.2.96-2
CVE ID         : CVE-2016-10208 CVE-2017-8824 CVE-2017-8831 CVE-2017-12190
                 CVE-2017-13080 CVE-2017-14051 CVE-2017-15115 CVE-2017-15265
                 CVE-2017-15299 CVE-2017-15649 CVE-2017-15868 CVE-2017-16525
                 CVE-2017-16527 CVE-2017-16529 CVE-2017-16531 CVE-2017-16532
                 CVE-2017-16533 CVE-2017-16535 CVE-2017-16536 CVE-2017-16537
                 CVE-2017-16643 CVE-2017-16649 CVE-2017-16939 CVE-2017-1000407
Debian Bug     : 865303 865416

Several vulnerabilities have been discovered in the Linux kernel that
may lead to a privilege escalation, denial of service or information
leaks.

CVE-2016-10208

    Sergej Schumilo and Ralf Spenneberg discovered that a crafted ext4
    filesystem could trigger memory corruption when it is mounted.  A
    user that can provide a device or filesystem image to be mounted
    could use this for denial of service (crash or data corruption) or
    possibly for privilege escalation.

CVE-2017-8824

    Mohamed Ghannam discovered that the DCCP implementation did not
    correctly manage resources when a socket is disconnected and
    reconnected, potentially leading to a use-after-free.  A local
    user could use this for denial of service (crash or data
    corruption) or possibly for privilege escalation.  On systems that
    do not already have the dccp module loaded, this can be mitigated
    by disabling it:
    echo >> /etc/modprobe.d/disable-dccp.conf install dccp false

CVE-2017-8831

    Pengfei Wang discovered that the saa7164 video capture driver
    re-reads data from a PCI device after validating it.  A physically
    present user able to attach a specially designed PCI device could
    use this for privilege escalation.

CVE-2017-12190

    Vitaly Mayatskikh discovered that the block layer did not
    correctly count page references for raw I/O from user-space.  This
    can be exploited by a guest VM with access to a host SCSI device
    for denial of service (memory exhaustion) or potentially for
    privilege escalation.

CVE-2017-13080

    A vulnerability was found in the WPA2 protocol that could lead to
    reinstallation of the same Group Temporal Key (GTK), which
    substantially reduces the security of wifi encryption.  This is
    one of the issues collectively known as "KRACK".

    Updates to GTKs are usually handled by the wpa package, where this
    issue was already fixed (DLA-1150-1).  However, some wifi devices
    can remain active and update GTKs autonomously while the system is
    suspended.  The kernel must also check for and ignore key
    reinstallation.

CVE-2017-14051

    "shqking" reported that the qla2xxx SCSI host driver did not
    correctly validate I/O to the "optrom" sysfs attribute of the
    devices it creates.  This is unlikely to have any security
    impact.

CVE-2017-15115

    Vladis Dronov reported that the SCTP implementation did not
    correctly handle "peel-off" of an association to another net
    namespace.  This leads to a use-after-free, which a local user can
    exploit for denial of service (crash or data corruption) or
    possibly for privilege escalation.  On systems that do not already
    have the sctp module loaded, this can be mitigated by disabling
    it:
    echo >> /etc/modprobe.d/disable-sctp.conf install sctp false

CVE-2017-15265

    Michael23 Yu reported a race condition in the ALSA sequencer
    subsystem involving creation and deletion of ports, which could
    lead to a use-after-free.  A local user with access to an ALSA
    sequencer device can use this for denial of service (crash or data
    loss) or possibly for privilege escalation.

CVE-2017-15299

    Eric Biggers discovered that the KEYS subsystem did not correctly
    handle update of an uninstantiated key, leading to a null
    dereference.  A local user can use this for denial of service
    (crash).

CVE-2017-15649

    "nixioaming" reported a race condition in the packet socket
    (AF_PACKET) implementation involving rebinding to a fanout group,
    which could lead to a use-after-free.  A local user with the
    CAP_NET_RAW capability can use this for denial of service (crash
    or data corruption) or possibly for privilege escalation.

CVE-2017-15868

    Al Viro found that the Bluebooth Network Encapsulation Protocol
    (BNEP) implementation did not validate the type of the second
    socket passed to the BNEPCONNADD ioctl(), which could lead to
    memory corruption.  A local user with the CAP_NET_ADMIN capability
    can use this for denial of service (crash or data corruption) or
    possibly for privilege escalation.

CVE-2017-16525

    Andrey Konovalov reported that the USB serial console
    implementation did not correctly handle disconnection of unusual
    serial devices, leading to a use-after-free.  A similar issue was
    found in the case where setup of a serial console fails.  A
    physically present user with a specially designed USB device can
    use this to cause a denial of service (crash or data corruption)
    or possibly for privilege escalation.

CVE-2017-16527

    Andrey Konovalov reported that the USB sound mixer driver did not
    correctly cancel I/O in case it failed to probe a device, which
    could lead to a use-after-free.  A physically present user with a
    specially designed USB device can use this to cause a denial of
    service (crash or data corruption) or possibly for privilege
    escalation.

CVE-2017-16529

    Andrey Konovalov reported that the USB sound driver did not fully
    validate descriptor lengths, which could lead to a buffer
    over-read.  A physically present user with a specially designed
    USB device may be able to use this to cause a denial of service
    (crash).

CVE-2017-16531

    Andrey Konovalov reported that the USB core did not validate IAD
    lengths, which could lead to a buffer over-read.  A physically
    present user with a specially designed USB device may be able to
    use this to cause a denial of service (crash).

CVE-2017-16532

    Andrey Konovalov reported that the USB test driver did not
    correctly handle devices with specific combinations of endpoints.
    A physically present user with a specially designed USB device can
    use this to cause a denial of service (crash).

CVE-2017-16533

    Andrey Konovalov reported that the USB HID driver did not fully
    validate descriptor lengths, which could lead to a buffer
    over-read.  A physically present user with a specially designed
    USB device may be able to use this to cause a denial of service
    (crash).

CVE-2017-16535

    Andrey Konovalov reported that the USB core did not validate BOS
    descriptor lengths, which could lead to a buffer over-read.  A
    physically present user with a specially designed USB device may
    be able to use this to cause a denial of service (crash).

CVE-2017-16536

    Andrey Konovalov reported that the cx231xx video capture driver
    did not fully validate the device endpoint configuration, which
    could lead to a null dereference.  A physically present user with
    a specially designed USB device can use this to cause a denial of
    service (crash).

CVE-2017-16537

    Andrey Konovalov reported that the imon RC driver did not fully
    validate the device interface configuration, which could lead to a
    null dereference.  A physically present user with a specially
    designed USB device can use this to cause a denial of service
    (crash).

CVE-2017-16643

    Andrey Konovalov reported that the gtco tablet driver did not
    fully validate descriptor lengths, which could lead to a buffer
    over-read.  A physically present user with a specially designed
    USB device may be able to use this to cause a denial of service
    (crash).

CVE-2017-16649

    BjÃ¸rn Mork found that the cdc_ether network driver did not
    validate the device's maximum segment size, potentially leading to
    a division by zero.  A physically present user with a specially
    designed USB device can use this to cause a denial of service
    (crash).

CVE-2017-16939

    Mohamed Ghannam reported (through Beyond Security's SecuriTeam
    Secure Disclosure program) that the IPsec (xfrm) implementation
    did not correctly handle some failure cases when dumping policy
    information through netlink.  A local user with the CAP_NET_ADMIN
    capability can use this for denial of service (crash or data
    corruption) or possibly for privilege escalation.

CVE-2017-1000407

    Andrew Honig reported that the KVM implementation for Intel
    processors allowed direct access to host I/O port 0x80, which
    is not generally safe.  On some systems this allows a guest
    VM to cause a denial of service (crash) of the host.

For Debian 7 "Wheezy", these problems have been fixed in version
3.2.96-2.  This version also includes bug fixes from upstream versions
up to and including 3.2.96.  It also fixes some regressions caused by
the fix for CVE-2017-1000364, which was included in DLA-993-1.

We recommend that you upgrade your linux packages.

Further information about Debian LTS security advisories, how to apply
these updates to your system and frequently asked questions can be
found at: <https://wiki.debian.org/LTS>

--
Ben Hutchings - Debian developer, member of kernel, installer and LTS teams
```

**Attachment:
[signature.asc](pgpkoYyG8yEsC.pgp)**

*Description:* This is a digitally signed message part

---



=== Content from patchwork.kernel.org_b0a6f8b5_20250125_181233.html ===

Toggle navigation

[Patchwork](/)
Discussions and development of Linux SCSI subsystem

* [Patches](/project/linux-scsi/list/)
* [Bundles](/project/linux-scsi/bundles/)
* [About this project](/project/linux-scsi/)

* [Login](/user/login/)
* [Register](/register/)
* [Mail settings](/mail/)

9929625

[diff](/project/linux-scsi/patch/20170830133035.nbkiled5hhdt26ui%40mwanda/raw/ "Download patch diff")
[mbox](/project/linux-scsi/patch/20170830133035.nbkiled5hhdt26ui%40mwanda/mbox/ "Download patch mbox")
# [v2] scsi: qla2xxx: Fix an integer overflow in sysfs code

| Message ID | 20170830133035.nbkiled5hhdt26ui@mwanda ([mailing list archive](https://lore.kernel.org/r/20170830133035.nbkiled5hhdt26ui%40mwanda)) |
| --- | --- |
| State | Accepted |
| Headers | show ``` Return-Path: <linux-scsi-owner@kernel.org> Received: from mail.wl.linuxfoundation.org (pdx-wl-mail.web.codeaurora.org 	[172.30.200.125]) 	by pdx-korg-patchwork.web.codeaurora.org (Postfix) with ESMTP id 	665AB60309 for <patchwork-linux-scsi@patchwork.kernel.org>; 	Wed, 30 Aug 2017 13:31:05 +0000 (UTC) Received: from mail.wl.linuxfoundation.org (localhost [127.0.0.1]) 	by mail.wl.linuxfoundation.org (Postfix) with ESMTP id 4E8D32859E 	for <patchwork-linux-scsi@patchwork.kernel.org>; 	Wed, 30 Aug 2017 13:31:05 +0000 (UTC) Received: by mail.wl.linuxfoundation.org (Postfix, from userid 486) 	id 43746285A3; Wed, 30 Aug 2017 13:31:05 +0000 (UTC) X-Spam-Checker-Version: SpamAssassin 3.3.1 (2010-03-16) on 	pdx-wl-mail.web.codeaurora.org X-Spam-Level:  X-Spam-Status: No, score=-6.9 required=2.0 tests=BAYES_00, RCVD_IN_DNSWL_HI,  	UNPARSEABLE_RELAY autolearn=ham version=3.3.1 Received: from vger.kernel.org (vger.kernel.org [209.132.180.67]) 	by mail.wl.linuxfoundation.org (Postfix) with ESMTP id 3C993285A4 	for <patchwork-linux-scsi@patchwork.kernel.org>; 	Wed, 30 Aug 2017 13:31:04 +0000 (UTC) Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand 	id S1751357AbdH3NbD (ORCPT 	<rfc822;patchwork-linux-scsi@patchwork.kernel.org>); 	Wed, 30 Aug 2017 09:31:03 -0400 Received: from userp1040.oracle.com ([156.151.31.81]:26354 "EHLO 	userp1040.oracle.com" rhost-flags-OK-OK-OK-OK) by vger.kernel.org 	with ESMTP id S1751323AbdH3NbD (ORCPT 	<rfc822; linux-scsi@vger.kernel.org>); Wed, 30 Aug 2017 09:31:03 -0400 Received: from aserv0021.oracle.com (aserv0021.oracle.com [141.146.126.233]) 	by userp1040.oracle.com (Sentrion-MTA-4.3.2/Sentrion-MTA-4.3.2) 	with ESMTP id v7UDUsUe007134 	(version=TLSv1.2 cipher=ECDHE-RSA-AES256-GCM-SHA384 bits=256 	verify=OK); Wed, 30 Aug 2017 13:30:54 GMT Received: from aserv0122.oracle.com (aserv0122.oracle.com [141.146.126.236]) 	by aserv0021.oracle.com (8.14.4/8.14.4) with ESMTP id 	v7UDUs7d013488 	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-GCM-SHA384 bits=256 	verify=OK); Wed, 30 Aug 2017 13:30:54 GMT Received: from abhmp0018.oracle.com (abhmp0018.oracle.com [141.146.116.24]) 	by aserv0122.oracle.com (8.14.4/8.14.4) with ESMTP id 	v7UDUqJg017279; Wed, 30 Aug 2017 13:30:53 GMT Received: from mwanda (/197.157.0.23) 	by default (Oracle Beehive Gateway v4.0) 	with ESMTP ; Wed, 30 Aug 2017 06:30:51 -0700 Date: Wed, 30 Aug 2017 16:30:35 +0300 From: Dan Carpenter <dan.carpenter@oracle.com> To: qla2xxx-upstream@qlogic.com, shqking <shqking@gmail.com>, 	Joe Carnuccio <joe.carnuccio@qlogic.com> Cc: "James E.J. Bottomley" <jejb@linux.vnet.ibm.com>, 	"Martin K. Petersen" <martin.petersen@oracle.com>, 	linux-scsi@vger.kernel.org, security@kernel.org Subject: [PATCH v2] scsi: qla2xxx: Fix an integer overflow in sysfs code Message-ID: <20170830133035.nbkiled5hhdt26ui@mwanda> MIME-Version: 1.0 Content-Type: text/plain; charset=us-ascii Content-Disposition: inline In-Reply-To: <CANn89iJBtAFJjz7wY2=2pO5SdNGhJx8M8_V-dEq81NhsFHeAUA@mail.gmail.com> User-Agent: NeoMutt/20170113 (1.7.2) X-Source-IP: aserv0021.oracle.com [141.146.126.233] Sender: linux-scsi-owner@vger.kernel.org Precedence: bulk List-ID: <linux-scsi.vger.kernel.org> X-Mailing-List: linux-scsi@vger.kernel.org X-Virus-Scanned: ClamAV using ClamSMTP  ``` |

## Commit Message

[Dan Carpenter](/project/linux-scsi/list/?submitter=37111)
Aug. 30, 2017, 1:30 p.m. UTC
```

The value of "size" comes from the user.  When we add "start + size"
it could lead to an integer overflow bug.

It means we vmalloc() a lot more memory than we had intended.  I believe
that on 64 bit systems vmalloc() can succeed even if we ask it to
allocate huge 4GB buffers.  So we would get memory corruption and likely
a crash when we call ha->isp_ops->write_optrom() and ->read_optrom().

Only root can trigger this bug.

Link: https://bugzilla.kernel.org/show_bug.cgi?id=194061

Cc: stable@vger.kernel.org
Fixes: b7cc176c9eb3 ("[SCSI] qla2xxx: Allow region-based flash-part accesses.")
Reported-by: shqking <shqking@gmail.com>
Signed-off-by: Dan Carpenter <dan.carpenter@oracle.com>
---
v2: Add stable and the URL for bugzila

```
## Comments

[Martin K. Petersen](/project/linux-scsi/list/?submitter=270)
Aug. 31, 2017, 2:07 a.m. UTC | [#1](/comment/20883999/)
```

Dan,
> The value of "size" comes from the user.  When we add "start + size"
> it could lead to an integer overflow bug.
>
> It means we vmalloc() a lot more memory than we had intended.  I
> believe that on 64 bit systems vmalloc() can succeed even if we ask it
> to allocate huge 4GB buffers.  So we would get memory corruption and
> likely a crash when we call ha->isp_ops->write_optrom() and
> ->read_optrom().

Applied to 4.13/scsi-fixes. Thank you!

```

9929625

[diff](/project/linux-scsi/patch/20170830133035.nbkiled5hhdt26ui%40mwanda/raw/ "Download patch diff")
[mbox](/project/linux-scsi/patch/20170830133035.nbkiled5hhdt26ui%40mwanda/mbox/ "Download patch mbox")
## Patch

```

diff --git a/drivers/scsi/qla2xxx/qla_attr.c b/drivers/scsi/qla2xxx/qla_attr.c
index 75c4b312645e..9ce28c4f9812 100644
--- a/drivers/scsi/qla2xxx/qla_attr.c
+++ b/drivers/scsi/qla2xxx/qla_attr.c
@@ -318,6 +318,8 @@  qla2x00_sysfs_write_optrom_ctl(struct file *filp, struct kobject *kobj,
 		return -EINVAL;
 	if (start > ha->optrom_size)
 		return -EINVAL;
+	if (size > ha->optrom_size - start)
+		size = ha->optrom_size - start;

 	mutex_lock(&ha->optrom_mutex);
 	switch (val) {
@@ -343,8 +345,7 @@  qla2x00_sysfs_write_optrom_ctl(struct file *filp, struct kobject *kobj,
 		}

 		ha->optrom_region_start = start;
-		ha->optrom_region_size = start + size > ha->optrom_size ?
-		    ha->optrom_size - start : size;
+		ha->optrom_region_size = start + size;

 		ha->optrom_state = QLA_SREADING;
 		ha->optrom_buffer = vmalloc(ha->optrom_region_size);
@@ -417,8 +418,7 @@  qla2x00_sysfs_write_optrom_ctl(struct file *filp, struct kobject *kobj,
 		}

 		ha->optrom_region_start = start;
-		ha->optrom_region_size = start + size > ha->optrom_size ?
-		    ha->optrom_size - start : size;
+		ha->optrom_region_size = start + size;

 		ha->optrom_state = QLA_SWRITING;
 		ha->optrom_buffer = vmalloc(ha->optrom_region_size);

```

[patchwork](http://jk.ozlabs.org/projects/patchwork/)
patch tracking system | version v2.2.6 | [about patchwork](/about/)



=== Content from usn.ubuntu.com_80cb8b1a_20250125_181235.html ===


Your submission was sent successfully!
*Close*

Thank you for contacting us. A member of our team will be in touch shortly.
*Close*

You have successfully unsubscribed!
*Close*

Thank you for signing up for our newsletter!

In these regular emails you will find the latest updates about
Ubuntu and upcoming events where you can meet our team.*Close*

Your preferences have been successfully updated. *Close*

[Canonical Ubuntu](/)

* [Menu](/navigation)

* [Products](/navigation#products-navigation)
* [Use cases](/navigation#use-case-navigation)
* [Support](/navigation#support-navigation)
* [Community](/navigation#community-navigation)
* [Get Ubuntu](/navigation#get-ubuntu-navigation)

[![](https://assets.ubuntu.com/v1/82818827-CoF_white.svg)

Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

# USN-3583-1: Linux kernel vulnerabilities

23 February 2018

Several security issues were fixed in the Linux kernel.

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Releases

* [Ubuntu 14.04 ESM](/security/notices?release=trusty)

## Packages

* [linux](/security/cves?package=linux) - Linux kernel

## Details

It was discovered that an out-of-bounds write vulnerability existed in the

Flash-Friendly File System (f2fs) in the Linux kernel. An attacker could

construct a malicious file system that, when mounted, could cause a denial

of service (system crash) or possibly execute arbitrary code.

([CVE-2017-0750](/security/CVE-2017-0750))

It was discovered that a race condition leading to a use-after-free

vulnerability existed in the ALSA PCM subsystem of the Linux kernel. A

local attacker could use this to cause a denial of service (system crash)

or possibly execute arbitrary code. ([CVE-2017-0861](/security/CVE-2017-0861))

It was discovered that the KVM implementation in the Linux kernel allowed

passthrough of the diagnostic I/O port 0x80. An attacker in a guest VM

could use this to cause a denial of service (system crash) in the host OS.

([CVE-2017-1000407](/security/CVE-2017-1000407))

Bo Zhang discovered that the netlink wireless configuration interface in

the Linux kernel did not properly validate attributes when handling certain

requests. A local attacker with the CAP\_NET\_ADMIN could use this to cause a

denial of service (system crash). ([CVE-2017-12153](/security/CVE-2017-12153))

Vitaly Mayatskikh discovered that the SCSI subsystem in the Linux kernel

did not properly track reference counts when merging buffers. A local

attacker could use this to cause a denial of service (memory exhaustion).

([CVE-2017-12190](/security/CVE-2017-12190))

It was discovered that the key management subsystem in the Linux kernel did

not properly restrict key reads on negatively instantiated keys. A local

attacker could use this to cause a denial of service (system crash).

([CVE-2017-12192](/security/CVE-2017-12192))

It was discovered that an integer overflow existed in the sysfs interface

for the QLogic 24xx+ series SCSI driver in the Linux kernel. A local

privileged attacker could use this to cause a denial of service (system

crash). ([CVE-2017-14051](/security/CVE-2017-14051))

Otto Ebeling discovered that the memory manager in the Linux kernel did not

properly check the effective UID in some situations. A local attacker could

use this to expose sensitive information. ([CVE-2017-14140](/security/CVE-2017-14140))

It was discovered that the ATI Radeon framebuffer driver in the Linux

kernel did not properly initialize a data structure returned to user space.

A local attacker could use this to expose sensitive information (kernel

memory). ([CVE-2017-14156](/security/CVE-2017-14156))

ChunYu Wang discovered that the iSCSI transport implementation in the Linux

kernel did not properly validate data structures. A local attacker could

use this to cause a denial of service (system crash). ([CVE-2017-14489](/security/CVE-2017-14489))

James Patrick-Evans discovered a race condition in the LEGO USB Infrared

Tower driver in the Linux kernel. A physically proximate attacker could use

this to cause a denial of service (system crash) or possibly execute

arbitrary code. ([CVE-2017-15102](/security/CVE-2017-15102))

ChunYu Wang discovered that a use-after-free vulnerability existed in the

SCTP protocol implementation in the Linux kernel. A local attacker could

use this to cause a denial of service (system crash) or possibly execute

arbitrary code, ([CVE-2017-15115](/security/CVE-2017-15115))

It was discovered that the key management subsystem in the Linux kernel did

not properly handle NULL payloads with non-zero length values. A local

attacker could use this to cause a denial of service (system crash).

([CVE-2017-15274](/security/CVE-2017-15274))

It was discovered that the Bluebooth Network Encapsulation Protocol (BNEP)

implementation in the Linux kernel did not validate the type of socket

passed in the BNEPCONNADD ioctl(). A local attacker with the CAP\_NET\_ADMIN

privilege could use this to cause a denial of service (system crash) or

possibly execute arbitrary code. ([CVE-2017-15868](/security/CVE-2017-15868))

Andrey Konovalov discovered a use-after-free vulnerability in the USB

serial console driver in the Linux kernel. A physically proximate attacker

could use this to cause a denial of service (system crash) or possibly

execute arbitrary code. ([CVE-2017-16525](/security/CVE-2017-16525))

It was discovered that the netfilter passive OS fingerprinting (xt\_osf)

module did not properly perform access control checks. A local attacker

could improperly modify the system-wide OS fingerprint list.

([CVE-2017-17450](/security/CVE-2017-17450))

It was discovered that the HMAC implementation did not validate the state

of the underlying cryptographic hash algorithm. A local attacker could use

this to cause a denial of service (system crash) or possibly execute

arbitrary code. ([CVE-2017-17806](/security/CVE-2017-17806))

Denys Fedoryshchenko discovered a use-after-free vulnerability in the

netfilter xt\_TCPMSS filter of the Linux kernel. A remote attacker could use

this to cause a denial of service (system crash). ([CVE-2017-18017](/security/CVE-2017-18017))

Gareth Evans discovered that the shm IPC subsystem in the Linux kernel did

not properly restrict mapping page zero. A local privileged attacker could

use this to execute arbitrary code. ([CVE-2017-5669](/security/CVE-2017-5669))

It was discovered that an integer overflow vulnerability existing in the

IPv6 implementation in the Linux kernel. A local attacker could use this to

cause a denial of service (infinite loop). ([CVE-2017-7542](/security/CVE-2017-7542))

Tommi Rantala and Brad Spengler discovered that the memory manager in the

Linux kernel did not properly enforce the CONFIG\_STRICT\_DEVMEM protection

mechanism. A local attacker with access to /dev/mem could use this to

expose sensitive information or possibly execute arbitrary code.

([CVE-2017-7889](/security/CVE-2017-7889))

Mohamed Ghannam discovered a use-after-free vulnerability in the DCCP

protocol implementation in the Linux kernel. A local attacker could use

this to cause a denial of service (system crash) or possibly execute

arbitrary code. ([CVE-2017-8824](/security/CVE-2017-8824))

Mohamed Ghannam discovered a null pointer dereference in the RDS (Reliable

Datagram Sockets) protocol implementation of the Linux kernel. A local

attacker could use this to cause a denial of service (system crash).

([CVE-2018-5333](/security/CVE-2018-5333))

èŒƒé¾™é£ž discovered that a race condition existed in loop block device

implementation in the Linux kernel. A local attacker could use this to

cause a denial of service (system crash) or possibly execute arbitrary

code. ([CVE-2018-5344](/security/CVE-2018-5344))

USN-3524-1 mitigated [CVE-2017-5754](/security/CVE-2017-5754) (Meltdown) for the amd64

architecture in Ubuntu 14.04 LTS. This update provides the

corresponding mitigations for the ppc64el architecture. Original

advisory details:

Jann Horn discovered that microprocessors utilizing speculative execution

and indirect branch prediction may allow unauthorized memory reads via

sidechannel attacks. This flaw is known as Meltdown. A local attacker could

use this to expose sensitive information, including kernel memory.

([CVE-2017-5754](/security/CVE-2017-5754))

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Update instructions

The problem can be corrected by updating your system to the following package versions:

##### Ubuntu 14.04

* [linux-image-3.13.0-142-generic](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [3.13.0-142.191](https://launchpad.net/ubuntu/%2Bsource/linux/3.13.0-142.191)
* [linux-image-3.13.0-142-generic-lpae](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [3.13.0-142.191](https://launchpad.net/ubuntu/%2Bsource/linux/3.13.0-142.191)
* [linux-image-3.13.0-142-lowlatency](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [3.13.0-142.191](https://launchpad.net/ubuntu/%2Bsource/linux/3.13.0-142.191)
* [linux-image-3.13.0-142-powerpc-e500](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [3.13.0-142.191](https://launchpad.net/ubuntu/%2Bsource/linux/3.13.0-142.191)
* [linux-image-3.13.0-142-powerpc-e500mc](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [3.13.0-142.191](https://launchpad.net/ubuntu/%2Bsource/linux/3.13.0-142.191)
* [linux-image-3.13.0-142-powerpc-smp](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [3.13.0-142.191](https://launchpad.net/ubuntu/%2Bsource/linux/3.13.0-142.191)
* [linux-image-3.13.0-142-powerpc64-emb](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [3.13.0-142.191](https://launchpad.net/ubuntu/%2Bsource/linux/3.13.0-142.191)
* [linux-image-3.13.0-142-powerpc64-smp](https://launchpad.net/ubuntu/%2Bsource/linux)
  -
  [3.13.0-142.191](https://launchpad.net/ubuntu/%2Bsource/linux/3.13.0-142.191)

After a standard system update you need to reboot your computer to make

all the necessary changes.

ATTENTION: Due to an unavoidable ABI change the kernel updates have

been given a new version number, which requires you to recompile and

reinstall all third party kernel modules you might have installed.

Unless you manually uninstalled the standard kernel metapackages

(e.g. linux-generic, linux-generic-lts-RELEASE, linux-virtual,

linux-powerpc), a standard system upgrade will automatically perform

this as well.

## References

* [CVE-2017-0750](/security/CVE-2017-0750)
* [CVE-2017-0861](/security/CVE-2017-0861)
* [CVE-2017-1000407](/security/CVE-2017-1000407)
* [CVE-2017-12153](/security/CVE-2017-12153)
* [CVE-2017-12190](/security/CVE-2017-12190)
* [CVE-2017-12192](/security/CVE-2017-12192)
* [CVE-2017-14051](/security/CVE-2017-14051)
* [CVE-2017-14140](/security/CVE-2017-14140)
* [CVE-2017-14156](/security/CVE-2017-14156)
* [CVE-2017-14489](/security/CVE-2017-14489)
* [CVE-2017-15102](/security/CVE-2017-15102)
* [CVE-2017-15115](/security/CVE-2017-15115)
* [CVE-2017-15274](/security/CVE-2017-15274)
* [CVE-2017-15868](/security/CVE-2017-15868)
* [CVE-2017-16525](/security/CVE-2017-16525)
* [CVE-2017-17450](/security/CVE-2017-17450)
* [CVE-2017-17806](/security/CVE-2017-17806)
* [CVE-2017-18017](/security/CVE-2017-18017)
* [CVE-2017-5669](/security/CVE-2017-5669)
* [CVE-2017-5754](/security/CVE-2017-5754)
* [CVE-2017-7542](/security/CVE-2017-7542)
* [CVE-2017-7889](/security/CVE-2017-7889)
* [CVE-2017-8824](/security/CVE-2017-8824)
* [CVE-2018-5333](/security/CVE-2018-5333)
* [CVE-2018-5344](/security/CVE-2018-5344)

## Related notices

* [USN-3583-2](/security/notices/USN-3583-2)
* [USN-3619-2](/security/notices/USN-3619-2)
* [USN-3617-1](/security/notices/USN-3617-1)
* [USN-3619-1](/security/notices/USN-3619-1)
* [USN-3617-3](/security/notices/USN-3617-3)
* [USN-3617-2](/security/notices/USN-3617-2)
* [USN-3632-1](/security/notices/USN-3632-1)
* [USN-3487-1](/security/notices/USN-3487-1)
* [USN-3469-1](/security/notices/USN-3469-1)
* [USN-3469-2](/security/notices/USN-3469-2)
* [USN-3582-2](/security/notices/USN-3582-2)
* [USN-3582-1](/security/notices/USN-3582-1)
* [USN-3444-2](/security/notices/USN-3444-2)
* [USN-3444-1](/security/notices/USN-3444-1)
* [USN-3581-1](/security/notices/USN-3581-1)
* [USN-3581-3](/security/notices/USN-3581-3)
* [USN-3581-2](/security/notices/USN-3581-2)
* [USN-3485-1](/security/notices/USN-3485-1)
* [USN-3485-3](/security/notices/USN-3485-3)
* [USN-3485-2](/security/notices/USN-3485-2)
* [USN-3361-1](/security/notices/USN-3361-1)
* [USN-3265-1](/security/notices/USN-3265-1)
* [USN-3265-2](/security/notices/USN-3265-2)
* [USN-3541-2](/security/notices/USN-3541-2)
* [USN-3523-2](/security/notices/USN-3523-2)
* [USN-3540-1](/security/notices/USN-3540-1)
* [USN-3540-2](/security/notices/USN-3540-2)
* [USN-3522-1](/security/notices/USN-3522-1)
* [USN-3522-2](/security/notices/USN-3522-2)
* [USN-3524-2](/security/notices/USN-3524-2)
* [USN-3524-1](/security/notices/USN-3524-1)
* [USN-3597-2](/security/notices/USN-3597-2)
* [USN-3516-1](/security/notices/USN-3516-1)
* [USN-3541-1](/security/notices/USN-3541-1)
* [USN-3597-1](/security/notices/USN-3597-1)
* [USN-3523-1](/security/notices/USN-3523-1)
* [USN-3525-1](/security/notices/USN-3525-1)
* [USN-3314-1](/security/notices/USN-3314-1)
* [USN-3312-2](/security/notices/USN-3312-2)
* [USN-3312-1](/security/notices/USN-3312-1)

### Join the discussion

* [Ubuntu security updates mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-hardened)
* [Security announcements mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-security-announce)

### Need help with your security needs?

Ubuntu Pro provides up to ten-year security coverage for over 23,000 open-source packages within the Ubuntu Main and Universe repositories.

[Talk to an expert to find out what would work best for you](/contact-us/form?product=pro)

### Further reading

* *Loading...*

---

## [OpenStack](/openstack) [OpenStack](/openstack)

* [What is OpenStack](/openstack/what-is-openstack)
* [Features](/openstack/features)
* [Managed](/openstack/managed)
* [Consulting](/openstack/consulting)
* [Install](/openstack/install)
* [Support](/openstack/support)

---

## [Ceph](/ceph) [Ceph](/ceph)

* [What is Ceph](/ceph/what-is-ceph)
* [Managed](/ceph/managed)
* [Consulting](/ceph/consulting)
* [Docs](/ceph/docs)
* [Install](/ceph/install)

---

## [Kubernetes](/kubernetes) [Kubernetes](/kubernetes)

* [What is Kubernetes](/kubernetes/what-is-kubernetes)
* [Charmed Kubernetes](/kubernetes/charmed-k8s)
* [Managed](/kubernetes/managed)
* [Install](/kubernetes/install)
* [Docs](/kubernetes/docs)
* [Resources](/kubernetes/resources)

---

## [Managed Services](/managed) [Managed Services](/managed)

* [OpenStack](/openstack/managed)
* [Kubernetes](/kubernetes/managed)
* [Ceph](/ceph/managed)
* [Apps](/managed/apps)
* [Observability](/observability/managed)
* [Firefighting](/managed/firefighting-support)

---

## [AI / ML](/ai) [AI / ML](/ai)

* [MLOps](/ai/mlops)
* [Kubeflow](/ai/what-is-kubeflow)
* [MLflow](/ai/mlflow)
* [Consulting](/ai/consulting)
* [Data Science](/ai/data-science)
* [MLOps workshop](/ai/mlops-workshop)

---

## [Robotics](/robotics) [Robotics](/robotics)

* [What is ROS](/robotics/what-is-ros)
* [ROS ESM](/robotics/ros-esm)
* [Community](/robotics/community)
* [Docs](/robotics/docs)

---

## [IoT](/internet-of-things) [IoT](/internet-of-things)

* [App store](/internet-of-things/appstore)
* [Embedded Linux](/embedded)
* [Management](/internet-of-things/management)

---

## [Ubuntu Core](/core) [Ubuntu Core](/core)

* [Features](/core/features)
* [Success stories](/core/stories)
* [Services](/core/services)
* [Docs](/core/docs)

---

## [Ubuntu Desktop](/desktop) [Ubuntu Desktop](/desktop)

* [Organisations](/desktop/organisations)
* [Developers](/desktop/developers)
* [Flavours](/desktop/flavours)
* [WSL](/desktop/wsl)

---

## [Ubuntu Server](/server) [Ubuntu Server](/server)

* [Hyperscale](/server/hyperscale)
* [Docs](/server/docs)

---

## [Cloud](/cloud) [Cloud](/cloud)

* [What is cloud computing](/cloud/cloud-computing)
* [What is private cloud](/cloud/private-cloud)
* [What is hybrid cloud](/cloud/hybrid-cloud)
* [What is multi-cloud](/cloud/multi-cloud)
* [Public cloud](/cloud/public-cloud)

---

## [Security](/security) [Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

---

## [Landscape](/landscape) [Landscape](/landscape)

* [Features](/landscape/features)
* [Managed](/landscape/managed)
* [Compare](/landscape/compare)
* [Install](/landscape/docs/quickstart-deployment)
* [Docs](/landscape/docs)
* [Log in to Landscape](https://landscape.canonical.com/)

---

## [Containers](/containers) [Containers](/containers)

* [What are containers](/containers/what-are-containers)
* [Chiseled Ubuntu](/containers/chiseled)
* [Chiseled and .NET](/containers/chiseled/dotnet)

---

## [Downloads](/download) [Downloads](/download)

* [Desktop](/download/desktop)
* [Server](/download/server)
* [Core](/download/core)
* [Cloud](/download/cloud)

---

## [Support](/support) [Support](/support)

* [Your subscriptions](/pro/dashboard)
* [Account users](/pro/users)
* [Pricing](/pricing/pro)
* [Discourse](https://discourse.ubuntu.com/c/project/ubuntu-pro/116/)

---

## [Observability](/observability) [Observability](/observability)

* [What is observability](/observability/what-is-observability)
* [Managed](/observability/managed)

---

## [Pricing](/pricing) [Pricing](/pricing)

* [Consulting](/pricing/consulting)
* [Desktops](/pricing/desktop)
* [Devices](/pricing/devices)

---

## Solutions

* [AI](https://canonical.com/solutions/ai)
* [Data](https://canonical.com/data)
* [Infrastructure](https://canonical.com/solutions/infrastructure)
* [Secure open source](https://canonical.com/solutions/secure-open-source)

---

## Sectors

* [Automotive](/automotive)
* [Industrial](/industrial)
* [Government](/gov)
* [Telco](/telco)
* [Finance](/financial-services)

---

[Contact us](/contact-us)

* [About us](/about)
* [Community](/community)
* [Careers](https://www.canonical.com/careers)
* [Blog](/blog)
* [Resources](/engage)
* [Press centre](/blog/press-centre)

---

Â© 2025 Canonical Ltd.

Ubuntu and Canonical are registered trademarks of Canonical Ltd.

---

* [Legal information](/legal)
* [Data privacy](/legal/data-privacy)
* Manage your tracker settings
* [Report a bug on this site](https://github.com/canonical/ubuntu.com/issues/new?template=ISSUE_TEMPLATE.yaml)

Back to top

Go to the top of the page


