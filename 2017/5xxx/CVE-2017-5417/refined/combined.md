=== Content from bugzilla.mozilla.org_23509b82_20250126_044802.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summary▾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View ▾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/1328121)
* [XML](/show_bug.cgi?ctype=xml&id=1328121)

Closed
[Bug 1328121](/show_bug.cgi?id=1328121)
(CVE-2017-5416)

Opened 8 years ago
Closed 8 years ago

# nightly crash when using ebay/paypal [@ nsDocumentOpenInfo::OnStartRequest ]

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

nightly crash when using ebay/paypal [@ nsDocumentOpenInfo::OnStartRequest ]

## Categories

### (Core :: Networking, defect)

[Product:](/describecomponents.cgi?product=Core)

Core
▾

Core
Shared components used by Firefox and other Mozilla software, including handling of Web content; Gecko, HTML, CSS, layout, DOM, scripts, images, networking, etc. Issues with web page layout probably go here, while Firefox user interface issues belong in the [Firefox](https://bugzilla.mozilla.org/describecomponents.cgi?product=Firefox) product. ([More info](https://wiki.mozilla.org/Modules/All#Core))
[See Open Bugs in This Product](/buglist.cgi?product=Core&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Core)
Watch This Product

[Component:](/describecomponents.cgi?product=Core&component=Networking#Networking)

Networking
▾

Core :: Networking
For bugs in Mozilla's modular networking library (aka "Netlib" or "Necko".) The networking library supplies the software interface that Mozilla uses to access physical transports (e.g. the Internet and local drives), perform URL resolutions, and handle a variety of networking protocols.

Examples of appropriate bugs: URLs with backslash not fetched; URLs starting with a single slash turn into http:///; Cannot access authenticated FTP site.

[See Open Bugs in This Component](/buglist.cgi?product=Core&component=Networking&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Core&component=Networking&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Core&component=Networking)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

Trunk

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

Unspecified

Unspecified

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

*Not set*

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

normal

Points:

---

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

mozilla53

Iteration:

---

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| Accessibility Severity | --- |
| --- | --- |
| Performance Impact | --- |
| Webcompat Priority | --- |
| Webcompat Score | --- |
| a11y-review | --- |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox-esr45 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox_esr45&o1=equals&v1=wontfix) |
| firefox50 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox50&o1=equals&v1=wontfix) |
| firefox51 | [+](/buglist.cgi?f1=cf_tracking_firefox51&o1=equals&v1=%2B) | [wontfix](/buglist.cgi?f1=cf_status_firefox51&o1=equals&v1=wontfix) |
| firefox52 | [+](/buglist.cgi?f1=cf_tracking_firefox52&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox52&o1=equals&v1=fixed) |
| firefox53 | [+](/buglist.cgi?f1=cf_tracking_firefox53&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox53&o1=equals&v1=fixed) |

|  | Tracking | Status |
| --- | --- | --- |
| firefox-esr45 |  | wontfix |
| relnote-firefox |  | --- |
| thunderbird\_esr115 | --- | --- |
| thunderbird\_esr128 | --- | --- |
| firefox50 |  | wontfix |
| firefox51 | + | wontfix |
| firefox52 | + | fixed |
| firefox53 | + | fixed |
| firefox-esr115 | --- | --- |
| firefox-esr128 | --- | --- |
| firefox134 | --- | --- |
| firefox135 | --- | --- |
| firefox136 | --- | --- |

## People

### (Reporter: syskin2, Assigned: mcmanus)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/2b0de973c803f192309b00777c594202?d=mm&size=40)  [mcmanus](/user_profile?user_id=32546)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](https://secure.gravatar.com/avatar/55aa9967d24511a979432eb356be23f6?d=mm&size=40)  [syskin2](/user_profile?user_id=135453)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

![](https://secure.gravatar.com/avatar/608e04ebca94be52b05c003d51d43e07?d=mm&size=40)  [kershaw](/user_profile?user_id=505624)

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

10 people

## References

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

---

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

---

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

---

## Details

### (Keywords: sec-moderate, Whiteboard: [post-critsmash-triage][adv-main52+])

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

CVE-2017-5416

[Keywords:](/describekeywords.cgi)

[sec-moderate](/buglist.cgi?keywords=sec-moderate&resolution=---)

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[post-critsmash-triage][adv-main52+]

QA Whiteboard:

---

Has STR:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

| [kjozwiak](/user_profile?user_id=455785) | [qe-verify](#a4630216_455785 "8 years ago") | - |
| --- | --- | --- |
| [kjozwiak](/user_profile?user_id=455785) | qe-verify | - |
| --- | --- | --- |
|  | behind-pref |  |
| --- | --- | --- |
|  | firefox-backlog |  |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | in-testsuite |  |

## Crash Data

Signature:

*None*

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (1 file, 1 obsolete file)

| [hold ref on mlistener when calling onstartrequest](/attachment.cgi?id=8823419)  [8 years ago](#c7)  [Patrick McManus [:mcmanus]](/user_profile?user_id=32546)   1.13 KB, patch | smaug : [review+](#c9 "8 years ago")  jduell.mcbugs : [review+](#a244830_334931 "8 years ago") | [Details](/attachment.cgi?id=8823419&action=edit) | [Diff](/attachment.cgi?id=8823419&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1328121&attachment=8823419) |
| --- | --- | --- |
| [hold ref on mlistener when calling onstartrequest](/attachment.cgi?id=8824210)  [8 years ago](#c16)  [Patrick McManus [:mcmanus]](/user_profile?user_id=32546)   1.20 KB, patch | mcmanus : [review+](#c17 "8 years ago")  jcristau : [approval-mozilla-aurora+](#c22 "8 years ago") | [Details](/attachment.cgi?id=8824210&action=edit) | [Diff](/attachment.cgi?id=8824210&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1328121&attachment=8824210) |

Show Obsolete

Bottom ↓
Tags ▾

* Reset

Timeline ▾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [Radek 'sysKin' Czyz](/user_profile?user_id=135453)  Reporter |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=1328121#c0)• 8 years ago |
|  | |

Crash id: <https://crash-stats.mozilla.com/report/index/d2771913-daf5-4266-8e79-f62142170102>
What I did:
Buy a thing using ebay.com.au
Select PayPal payment method
Enter your Paypal details
It spins for a few seconds, then crashes.
Crash was 100% reproducible and I've made ~6 identical crash reports. I have made the payment since, so now I can no longer try (such as without addons), sorry.

|  | [Olli Pettay [:smaug][bugs@pettay.fi]](/user_profile?user_id=39966) |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=1328121#c1)• 8 years ago |
|  | |

Do you have links to also other crash reports?

|  | [Olli Pettay [:smaug][bugs@pettay.fi]](/user_profile?user_id=39966) |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=1328121#c2)• 8 years ago |
|  | |

(initially this looks like an issue in the caller)Component: DOM → Networking

|  | [Olli Pettay [:smaug][bugs@pettay.fi]](/user_profile?user_id=39966) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1328121#a14870_39966)• 8 years ago |

Group: core-security

|  | [Olli Pettay [:smaug][bugs@pettay.fi]](/user_profile?user_id=39966) |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=1328121#c3)• 8 years ago |
|  | |

I don't see HttpChannel to follow COM rules here when doing OnStartRequest callFlags: needinfo?(mcmanus)

|  | [Radek 'sysKin' Czyz](/user_profile?user_id=135453)  Reporter |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=1328121#c4)• 8 years ago |
|  | |

(In reply to Olli Pettay [:smaug] from [comment #1](/show_bug.cgi?id=1328121#c1 "RESOLVED FIXED - nightly crash when using ebay/paypal [@ nsDocumentOpenInfo::OnStartRequest ]"))
> Do you have links to also other crash reports?
Here they are:
<https://crash-stats.mozilla.com/report/index/be06cf6d-89d0-49d6-9b8f-384182170102>
<https://crash-stats.mozilla.com/report/index/4764c0da-bbe6-4f71-a208-958d02170102>
<https://crash-stats.mozilla.com/report/index/64cf9507-3818-4d6a-b35c-b3bd62170102>
<https://crash-stats.mozilla.com/report/index/f8b34630-29d7-4e74-9242-61dad2170102>

|  | [Patrick McManus [:mcmanus]](/user_profile?user_id=32546)  Assignee |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=1328121#c5)• 8 years ago |
|  | |

this is a null deref - dan can you clear the security flag?Flags: needinfo?(dveditz)

|  | [Patrick McManus [:mcmanus]](/user_profile?user_id=32546)  Assignee |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=1328121#c6)• 8 years ago |
|  | |

(In reply to Olli Pettay [:smaug] from [comment #3](/show_bug.cgi?id=1328121#c3 "RESOLVED FIXED - nightly crash when using ebay/paypal [@ nsDocumentOpenInfo::OnStartRequest ]"))
> I don't see HttpChannel to follow COM rules here when doing OnStartRequest
> call
are you suggesting that the stream listener is null, or that the references are short, or ??Flags: needinfo?(mcmanus)

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1328121#a126693_406194)• 8 years ago |

Group: core-securityFlags: needinfo?(dveditz)

|  | [Patrick McManus [:mcmanus]](/user_profile?user_id=32546)  Assignee |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=1328121#c7)• 8 years ago |
|  | |

Attached patch

[hold ref on mlistener when calling onstartrequest](attachment.cgi?id=8823419&action=diff) (obsolete)
— [Details](attachment.cgi?id=8823419&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1328121&attachment=8823419)

|  | [Patrick McManus [:mcmanus]](/user_profile?user_id=32546)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1328121#a132577_32546)• 8 years ago |

Assignee: nobody → mcmanusStatus: UNCONFIRMED → ASSIGNEDEver confirmed: true

|  | [Patrick McManus [:mcmanus]](/user_profile?user_id=32546)  Assignee |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=1328121#c8)• 8 years ago |
|  | |

<https://treeherder.mozilla.org/#/jobs?repo=try&revision=6d7e339a3c36>

|  | [Patrick McManus [:mcmanus]](/user_profile?user_id=32546)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1328121#a132744_32546)• 8 years ago |

[Attachment #8823419](/attachment.cgi?id=8823419&action=edit "hold ref on mlistener when calling onstartrequest") -
Flags: review?(jduell.mcbugs)
[Attachment #8823419](/attachment.cgi?id=8823419&action=edit "hold ref on mlistener when calling onstartrequest") -
Flags: review?(bugs)

|  | [Olli Pettay [:smaug][bugs@pettay.fi]](/user_profile?user_id=39966) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1328121#a142995_39966)• 8 years ago |

Group: core-security

|  | [Olli Pettay [:smaug][bugs@pettay.fi]](/user_profile?user_id=39966) |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=1328121#c9)• 8 years ago |
|  | |

Comment on [attachment 8823419](/attachment.cgi?id=8823419 "hold ref on mlistener when calling onstartrequest") [[details]](/attachment.cgi?id=8823419&action=edit "hold ref on mlistener when calling onstartrequest") [[diff]](/attachment.cgi?id=8823419&action=diff "hold ref on mlistener when calling onstartrequest") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1328121&attachment=8823419)
hold ref on mlistener when calling onstartrequest
This is a guess fix, but is Necko in general protected from this kind of issues?
I'm definitely not familiar enough with its callback call handling.
[Attachment #8823419](/attachment.cgi?id=8823419&action=edit "hold ref on mlistener when calling onstartrequest") -
Flags: review?(bugs) → review+

|  | [Jason Duell](/user_profile?user_id=334931) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1328121#a244830_334931)• 8 years ago |

[Attachment #8823419](/attachment.cgi?id=8823419&action=edit "hold ref on mlistener when calling onstartrequest") -
Flags: review?(jduell.mcbugs) → review+

|  | [Patrick McManus [:mcmanus]](/user_profile?user_id=32546)  Assignee |  |
| --- | --- | --- |
| [Comment 10](/show_bug.cgi?id=1328121#c10)• 8 years ago |
|  | |

(In reply to Olli Pettay [:smaug] from [comment #9](/show_bug.cgi?id=1328121#c9 "RESOLVED FIXED - nightly crash when using ebay/paypal [@ nsDocumentOpenInfo::OnStartRequest ]"))
> Comment on [attachment 8823419](/attachment.cgi?id=8823419 "hold ref on mlistener when calling onstartrequest") [[details]](/attachment.cgi?id=8823419&action=edit "hold ref on mlistener when calling onstartrequest") [[diff]](/attachment.cgi?id=8823419&action=diff "hold ref on mlistener when calling onstartrequest") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1328121&attachment=8823419)
> hold ref on mlistener when calling onstartrequest
>
> This is a guess fix, but is Necko in general protected from this kind of
> issues?
> I'm definitely not familiar enough with its callback call handling.
I haven't gone looking for this class of bug, though the surface area of where the stream listeners are called is not large. Interesting that this crash is recent - nothing has changed in that call chain that I can think of in a long time.

|  | [Patrick McManus [:mcmanus]](/user_profile?user_id=32546)  Assignee |  |
| --- | --- | --- |
| [Comment 11](/show_bug.cgi?id=1328121#c11)• 8 years ago |
|  | |

<https://hg.mozilla.org/integration/mozilla-inbound/rev/5593f1b533da70ca22628d8461ebc75273fbc2e6>
[Bug 1328121](/show_bug.cgi?id=1328121 "RESOLVED FIXED - nightly crash when using ebay/paypal [@ nsDocumentOpenInfo::OnStartRequest ]") - hold ref on mlistener when calling onstartrequest r=smaug r=jduell

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 12](/show_bug.cgi?id=1328121#c12)• 8 years ago |
|  | |

Iris had to back this out for bustage.
<https://hg.mozilla.org/integration/mozilla-inbound/rev/813099b24bf5>
<https://treeherder.mozilla.org/logviewer.html#?job_id=66454558&repo=mozilla-inbound&lineNumber=15609>
netwerk/protocol/http/nsHttpChannel.cpp:1319:9: error: Unused "kungFuDeathGrip" 'nsCOMPtr<nsIStreamListener>' objects constructed from members are prohibited
nsCOMPtr<nsIStreamListener> deleteProtector(mListener);
netwerk/protocol/http/nsHttpChannel.cpp:1319:53: note: Please switch all accesses to this member to go through 'deleteProtector', or explicitly pass 'deleteProtector' to `mozilla::Unused`
nsCOMPtr<nsIStreamListener> deleteProtector(mListener);
Also, Patrick, can you please help assign a security rating here? And what other branches are affected (a cursory glance at crash-stats for this signature suggests at least 49-53)? And possibly a retroactive security approval request depending on the answers to those first 2 questions :). Thanks!
[status-firefox50](/buglist.cgi?f1=cf_status_firefox50&o1=isnotempty):
--- → [wontfix](/buglist.cgi?f1=cf_status_firefox50&o1=equals&v1=wontfix)
[status-firefox51](/buglist.cgi?f1=cf_status_firefox51&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox51&o1=equals&v1=affected)
[status-firefox52](/buglist.cgi?f1=cf_status_firefox52&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox52&o1=equals&v1=affected)
[status-firefox53](/buglist.cgi?f1=cf_status_firefox53&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox53&o1=equals&v1=affected)
[tracking-firefox51](/buglist.cgi?f1=cf_tracking_firefox51&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_tracking_firefox51&o1=equals&v1=%3F)
[tracking-firefox52](/buglist.cgi?f1=cf_tracking_firefox52&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_tracking_firefox52&o1=equals&v1=%3F)
[tracking-firefox53](/buglist.cgi?f1=cf_tracking_firefox53&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_tracking_firefox53&o1=equals&v1=%3F)Flags: needinfo?(mcmanus)

|  | [Patrick McManus [:mcmanus]](/user_profile?user_id=32546)  Assignee |  |
| --- | --- | --- |
| [Comment 13](/show_bug.cgi?id=1328121#c13)• 8 years ago |
|  | |

sorry - I thought I labeled this as sec-moderate. apparently that didn't happen. Its a zero-page deref in practice.
[status-firefox-esr45](/buglist.cgi?f1=cf_status_firefox_esr45&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox_esr45&o1=equals&v1=affected)Flags: needinfo?(mcmanus)Keywords: [sec-moderate](/buglist.cgi?keywords=sec-moderate&resolution=---)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Comment 14](/show_bug.cgi?id=1328121#c14)• 8 years ago |
|  | |

The patch looks like it's fixing a UAF, but the crashes we're seeing are null derefs. If it's always guaranteed to be a null deref we can call this a DOS (not sec-moderate) and unhide itGroup: core-security → network-core-security

|  | [Patrick McManus [:mcmanus]](/user_profile?user_id=32546)  Assignee |  |
| --- | --- | --- |
| [Comment 15](/show_bug.cgi?id=1328121#c15)• 8 years ago |
|  | |

its a little unclear exactly how this happens - the fix is speculative. I'd rather assume sec-moderate.

|  | [Patrick McManus [:mcmanus]](/user_profile?user_id=32546)  Assignee |  |
| --- | --- | --- |
| [Comment 16](/show_bug.cgi?id=1328121#c16)• 8 years ago |
|  | |

Attached patch

[hold ref on mlistener when calling onstartrequest](attachment.cgi?id=8824210&action=diff)
— [Details](attachment.cgi?id=8824210&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1328121&attachment=8824210)

|  | [Patrick McManus [:mcmanus]](/user_profile?user_id=32546)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1328121#a306675_32546)• 8 years ago |

[Attachment #8823419](/attachment.cgi?id=8823419&action=edit "hold ref on mlistener when calling onstartrequest") -
Attachment is obsolete: true

|  | [Patrick McManus [:mcmanus]](/user_profile?user_id=32546)  Assignee |  |
| --- | --- | --- |
| [Comment 17](/show_bug.cgi?id=1328121#c17)• 8 years ago |
|  | |

Comment on [attachment 8824210](/attachment.cgi?id=8824210 "hold ref on mlistener when calling onstartrequest") [[details]](/attachment.cgi?id=8824210&action=edit "hold ref on mlistener when calling onstartrequest") [[diff]](/attachment.cgi?id=8824210&action=diff "hold ref on mlistener when calling onstartrequest") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1328121&attachment=8824210)
hold ref on mlistener when calling onstartrequest
fix the static analysis unused complaint
[Attachment #8824210](/attachment.cgi?id=8824210&action=edit "hold ref on mlistener when calling onstartrequest") -
Flags: review+

|  | [Patrick McManus [:mcmanus]](/user_profile?user_id=32546)  Assignee |  |
| --- | --- | --- |
| [Comment 18](/show_bug.cgi?id=1328121#c18)• 8 years ago |
|  | |

<https://hg.mozilla.org/integration/mozilla-inbound/rev/cd03cacfcdddb92b40e259af83abdaaeaabc00b4>
[Bug 1328121](/show_bug.cgi?id=1328121 "RESOLVED FIXED - nightly crash when using ebay/paypal [@ nsDocumentOpenInfo::OnStartRequest ]") - hold ref on mlistener when calling onstartrequest r=smaug r=jduell

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 19](/show_bug.cgi?id=1328121#c19)• 8 years ago |
|  | |

<https://hg.mozilla.org/mozilla-central/rev/cd03cacfcddd>
Please request Aurora/Beta approval on this when you feel comfortable doing so.Status: ASSIGNED → RESOLVEDClosed: 8 years ago
[status-firefox53](/buglist.cgi?f1=cf_status_firefox53&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox53&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox53&o1=equals&v1=fixed)
[status-firefox-esr45](/buglist.cgi?f1=cf_status_firefox_esr45&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox_esr45&o1=equals&v1=affected) → [wontfix](/buglist.cgi?f1=cf_status_firefox_esr45&o1=equals&v1=wontfix)Flags: needinfo?(mcmanus)Resolution: --- → FIXEDTarget Milestone: --- → mozilla53

|  | [Liz Henry (:lizzard) (relman/hg->git project)](/user_profile?user_id=451704) |  |
| --- | --- | --- |
| [Comment 20](/show_bug.cgi?id=1328121#c20)• 8 years ago |
|  | |

Tracking this for 51 and up. We still have the beta 13 build today, beta 14 later and then the RC build next week, if you want to uplift as far as beta.
[tracking-firefox51](/buglist.cgi?f1=cf_tracking_firefox51&o1=isnotempty):
[?](/buglist.cgi?f1=cf_tracking_firefox51&o1=equals&v1=%3F) → [+](/buglist.cgi?f1=cf_tracking_firefox51&o1=equals&v1=%2B)
[tracking-firefox52](/buglist.cgi?f1=cf_tracking_firefox52&o1=isnotempty):
[?](/buglist.cgi?f1=cf_tracking_firefox52&o1=equals&v1=%3F) → [+](/buglist.cgi?f1=cf_tracking_firefox52&o1=equals&v1=%2B)
[tracking-firefox53](/buglist.cgi?f1=cf_tracking_firefox53&o1=isnotempty):
[?](/buglist.cgi?f1=cf_tracking_firefox53&o1=equals&v1=%3F) → [+](/buglist.cgi?f1=cf_tracking_firefox53&o1=equals&v1=%2B)

|  | [Patrick McManus [:mcmanus]](/user_profile?user_id=32546)  Assignee |  |
| --- | --- | --- |
| [Comment 21](/show_bug.cgi?id=1328121#c21)• 8 years ago |
|  | |

Comment on [attachment 8824210](/attachment.cgi?id=8824210 "hold ref on mlistener when calling onstartrequest") [[details]](/attachment.cgi?id=8824210&action=edit "hold ref on mlistener when calling onstartrequest") [[diff]](/attachment.cgi?id=8824210&action=diff "hold ref on mlistener when calling onstartrequest") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1328121&attachment=8824210)
hold ref on mlistener when calling onstartrequest
Approval Request Comment
[Feature/Bug causing the regression]: unknown
[User impact if declined]: crash
[Is this code covered by automated tests?]: trigger unknown - inspection fix
[Has the fix been verified in Nightly?]: tested in nightly, but crash too low to verify
[Needs manual test from QE? If yes, steps to reproduce]: no
[List of other uplifts needed for the feature/fix]: no
[Is the change risky?]: no
[Why is the change risky/not risky?]: holds a ref with a smart pointer - very small and safe change
[String changes made/needed]: none
the volume here is too low to verify - and given the lateness of the beta I don't think, on balance, it is right to place it there.Flags: needinfo?(mcmanus)
[Attachment #8824210](/attachment.cgi?id=8824210&action=edit "hold ref on mlistener when calling onstartrequest") -
Flags: approval-mozilla-aurora?

|  | [Julien Cristau [:jcristau]](/user_profile?user_id=580382) |  |
| --- | --- | --- |
| [Comment 22](/show_bug.cgi?id=1328121#c22)• 8 years ago |
|  | |

Comment on [attachment 8824210](/attachment.cgi?id=8824210 "hold ref on mlistener when calling onstartrequest") [[details]](/attachment.cgi?id=8824210&action=edit "hold ref on mlistener when calling onstartrequest") [[diff]](/attachment.cgi?id=8824210&action=diff "hold ref on mlistener when calling onstartrequest") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1328121&attachment=8824210)
hold ref on mlistener when calling onstartrequest
sec-moderate fix for aurora52
[Attachment #8824210](/attachment.cgi?id=8824210&action=edit "hold ref on mlistener when calling onstartrequest") -
Flags: approval-mozilla-aurora? → approval-mozilla-aurora+

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 23](/show_bug.cgi?id=1328121#c23)• 8 years ago |
| uplift | |

<https://hg.mozilla.org/releases/mozilla-aurora/rev/0146e1addf31>
[status-firefox51](/buglist.cgi?f1=cf_status_firefox51&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox51&o1=equals&v1=affected) → [wontfix](/buglist.cgi?f1=cf_status_firefox51&o1=equals&v1=wontfix)
[status-firefox52](/buglist.cgi?f1=cf_status_firefox52&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox52&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox52&o1=equals&v1=fixed)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1328121#a838318_1689)• 8 years ago |

Group: network-core-security → core-security-release

|  | [Radek 'sysKin' Czyz](/user_profile?user_id=135453)  Reporter |  |
| --- | --- | --- |
| [Comment 24](/show_bug.cgi?id=1328121#c24)• 8 years ago |
|  | |

Is there any chance that this fix transformed the crash into a (non-main-thread) freeze?
I had an opportunity to pay with paypal again, with current nightly, and this time instead of crashing it was just spinning forever and ever.
After a few attempts I disabled all my addons and everything went smoothly so it's clearly my addons that are causing it....

|  | [Patrick McManus [:mcmanus]](/user_profile?user_id=32546)  Assignee |  |
| --- | --- | --- |
| [Comment 25](/show_bug.cgi?id=1328121#c25)• 8 years ago |
|  | |

(In reply to Radek 'sysKin' Czyz from [comment #24](/show_bug.cgi?id=1328121#c24 "RESOLVED FIXED - nightly crash when using ebay/paypal [@ nsDocumentOpenInfo::OnStartRequest ]"))
> Is there any chance that this fix transformed the crash into a
> (non-main-thread) freeze?
>
I guess its possible, but not because of anything directly in the fix.. you were clearly in some kind of error code path and with the fix you'll avoid a crash and go farther down it.. but ther is nothing actionable. fwiw I would expect any hang to be on the main thread in this case.

|  | [Kamil Jozwiak [:kjozwiak]](/user_profile?user_id=455785) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1328121#a4630216_455785)• 8 years ago |

Flags: qe-verify-Whiteboard: [post-critsmash-triage]

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1328121#a4982544_280903)• 8 years ago |

Whiteboard: [post-critsmash-triage] → [post-critsmash-triage][adv-main52+]

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1328121#a5054249_280903)• 8 years ago |

Alias: CVE-2017-5416

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1328121#a25724033_1689)• 7 years ago |

Group: core-security-release
You need to [log in](/show_bug.cgi?id=1328121&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top ↑

## Attachment

Hide Details

### General

Creator:  [Patrick McManus [:mcmanus]](/user_profile?user_id=32546)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review



=== Content from bugzilla.mozilla.org_9d16241d_20250125_002840.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summary▾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View ▾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/791597)
* [XML](/show_bug.cgi?ctype=xml&id=791597)

Closed
[Bug 791597](/show_bug.cgi?id=791597)
(CVE-2017-5417)

Opened 12 years ago
Closed 8 years ago

# Dragging and dropping URLs leads to address bar spoofing

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

Dragging and dropping URLs leads to address bar spoofing

## Categories

### (Firefox :: Address Bar, defect)

[Product:](/describecomponents.cgi?product=Firefox)

Firefox
▾

Firefox
For bugs in Firefox Desktop, the Mozilla Foundation's web browser. For Firefox user interface issues in menus, bookmarks, location bar, and preferences. Many Firefox bugs will either be filed here or in the [Core](https://bugzilla.mozilla.org/describecomponents.cgi?product=Core) product. Bugs for developer tools (F12) should be filed in the [DevTools](https://bugzilla.mozilla.org/describecomponents.cgi?product=DevTools) product. ([more info](https://wiki.mozilla.org/Modules/All#Firefox))
[See Open Bugs in This Product](/buglist.cgi?product=Firefox&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Firefox)
Watch This Product

[Component:](/describecomponents.cgi?product=Firefox&component=Address%20Bar#Address%20Bar)

Address Bar
▾

Firefox :: Address Bar
For bugs in the Firefox "Smart Location Bar" (aka Awesome Bar) UI element, including the bookmark and history autocomplete matching behavior.
[See Open Bugs in This Component](/buglist.cgi?product=Firefox&component=Address%20Bar&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Firefox&component=Address%20Bar&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Firefox&component=Address%20Bar)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

unspecified

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

All

All

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

*Not set*

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

normal

Points:

---

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

VERIFIED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

VERIFIED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

Firefox 53

Iteration:

---

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| a11y-review | --- |
| --- | --- |
| Performance Impact | --- |
| Webcompat Priority | --- |
| Webcompat Score | --- |
| Accessibility Severity | --- |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox52 | --- | [verified](/buglist.cgi?f1=cf_status_firefox52&o1=equals&v1=verified) |
| firefox-esr52 | --- | [fixed](/buglist.cgi?f1=cf_status_firefox_esr52&o1=equals&v1=fixed) |
| firefox53 | --- | [verified](/buglist.cgi?f1=cf_status_firefox53&o1=equals&v1=verified) |

|  | Tracking | Status |
| --- | --- | --- |
| relnote-firefox |  | --- |
| firefox52 |  | verified |
| firefox-esr52 |  | fixed |
| firefox53 |  | verified |
| firefox-esr115 | --- | --- |
| firefox-esr128 | --- | --- |
| firefox134 | --- | --- |
| firefox135 | --- | --- |
| firefox136 | --- | --- |

## People

### (Reporter: lcamtuf, Assigned: Gijs)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/66445733c06687eafa2978764675104f?d=mm&size=40)  [Gijs](/user_profile?user_id=159069)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](https://secure.gravatar.com/avatar/2ffdf44e5f0f5d0391e4631d41e3c956?d=mm&size=40)  [lcamtuf](/user_profile?user_id=253619)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

![](https://secure.gravatar.com/avatar/d949a35ad3900bd0ee47938b23a0cbee?d=mm&size=40)  [dao](/user_profile?user_id=219124)

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

18 people

## References

### ( [URL](http://lcamtuf.coredump.cx/urldrag/ "http://lcamtuf.coredump.cx/urldrag/") )

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

---

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

[CVE-2018-5111](/show_bug.cgi?id=1321619 "RESOLVED FIXED - URL bar spoof using drag and drop (dnd) and unicode-lookalike protocol to drag plaintext that \"looks like\" a valid URL")

Dependency [tree](/showdependencytree.cgi?id=791597&hide_resolved=1)
/ [graph](/showdependencygraph.cgi?id=791597)

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[Duplicates:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#duplicates)

[1296837](/show_bug.cgi?id=1296837 "RESOLVED DUPLICATE - Address Bar Spoofing via Drag And Drop"), [1313759](/show_bug.cgi?id=1313759 "RESOLVED DUPLICATE - Temporary addressbar spoof on sites with long response time")

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[lcamtuf.coredump.cx/urldrag](http://lcamtuf.coredump.cx/urldrag/ "http://lcamtuf.coredump.cx/urldrag/")

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

[1323452](/show_bug.cgi?id=1323452 "NEW - Consider whether to revert the URL bar straight after 'paste and go' usage")

## Details

### (Keywords: csectype-spoof, sec-moderate, Whiteboard: [adv-main52+])

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

CVE-2017-5417

[Keywords:](/describekeywords.cgi)

[csectype-spoof](/buglist.cgi?keywords=csectype-spoof&resolution=---),
[sec-moderate](/buglist.cgi?keywords=sec-moderate&resolution=---)

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[adv-main52+]

QA Whiteboard:

---

Has STR:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

|  | behind-pref |  |
| --- | --- | --- |
|  | blocking-fx-sync1.7 | ? |
|  | firefox-backlog |  |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | in-testsuite |  |
|  | qe-verify |  |

## Crash Data

Signature:

*None*

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (2 files)

| [Patch v0.1](/attachment.cgi?id=8811210)  [8 years ago](#c6)  [:Gijs (he/him)](/user_profile?user_id=159069)   1.22 KB, patch | mak : [review+](#c7 "8 years ago") | [Details](/attachment.cgi?id=8811210&action=edit) | [Diff](/attachment.cgi?id=8811210&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=791597&attachment=8811210) |
| --- | --- | --- |
| [Patch for beta](/attachment.cgi?id=8834370)  [8 years ago](#c14)  [:Gijs (he/him)](/user_profile?user_id=159069)   2.86 KB, patch | Gijs : [review+](#c14 "8 years ago")  jcristau : [approval-mozilla-beta+](#c15 "8 years ago") | [Details](/attachment.cgi?id=8834370&action=edit) | [Diff](/attachment.cgi?id=8834370&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=791597&attachment=8834370) |

Bottom ↓
Tags ▾

* Reset

Timeline ▾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [Michal Zalewski](/user_profile?user_id=253619)  Reporter |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=791597#c0)• 12 years ago |
|  | |

Demo: <http://lcamtuf.coredump.cx/urldrag/>

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=791597#c1)• 12 years ago |
|  | |

This seems to be related to other bugs that arise because we show the in-progress URL in the addressbar while still showing the old content. Except in this case the old content actually changed (visually) in the meanwhile.
If we did something like Safari's in-urlbar progress meter it would show that the new page was not yet loaded. Or maybe we could hook any page events after the navigation started and revert the URL if any script runs?URL: <http://lcamtuf.coredump.cx/urldrag/>

|  | [Michal Zalewski](/user_profile?user_id=253619)  Reporter |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=791597#c2)• 12 years ago |
|  | |

The Safari approach seems half-assed too, to be honest (though it's better than nothing).
Perhaps some sort of a more explicit "transitional" indicator would make sense (e.g., explicitly show "Navigating from <origin\_a> to <origin\_b>..." in the address bar)?
FWIW, for most other types of navigation, you defer updating the address bar until you ditch the old document and are ready to start rendering the new one. This can still be abused to some extent (\*), but at least, there is no point at which the scripts from the old page are still running and control the docuemnt, and the address bar is showing an unrelated origin.
(\*) The already-rendered view stays on the screen until you have some HTML to speculatively render instead. An evil server that sleeps at the right moment can result in the old but non-working page being shown while the new URL appears above. But other than scaring the user and doing some far-fetched phishing attacks, that doesn't seem too bad.

|  | [Michal Zalewski](/user_profile?user_id=253619)  Reporter |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=791597#c3)• 12 years ago |
|  | |

Also note that the transitional indicator as described above would fix a lot of the UI awkwardness that resulted from previous security fixes - for example, that clicking on a link or hitting "back" provides almost no UI feedback, but entering an URL in the address bar does.

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=791597#a1444952_1689)• 12 years ago |

Keywords: [sec-moderate](/buglist.cgi?keywords=sec-moderate&resolution=---)

|  | [BMO Automation](/user_profile?user_id=546015) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=791597#a93335927_546015)• 9 years ago |

Group: core-security → firefox-core-security

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=791597#a131062690_1689)• 8 years ago |

Keywords: [csectype-spoof](/buglist.cgi?keywords=csectype-spoof&resolution=---)

|  | [:Gijs (he/him)](/user_profile?user_id=159069)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=791597#a131457247_159069)• 8 years ago |

Component: Security → Location Bar

|  | [:Gijs (he/him)](/user_profile?user_id=159069)  Assignee |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=791597#c6)• 8 years ago |
|  | |

Attached patch

[Patch v0.1](attachment.cgi?id=8811210&action=diff)
— [Details](attachment.cgi?id=8811210&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=791597&attachment=8811210)

This is a bit evil, but we can't call this.handleRevert() because at the point where we run this code, we've started loading new things and so it doesn't work.
This represents a pretty significant change in behaviour, but per the discussion in [bug 1296837](/show_bug.cgi?id=1296837 "RESOLVED DUPLICATE - Address Bar Spoofing via Drag And Drop"), I don't see any other reasonable way of fixing this. Having an "activity" indicator in the URL bar as suggested in the comments here feels like a kludge if the URL bar display is still clearly lying and not something the user actually typed and intentionally wanted to load.
Obviously, this fix doesn't address the same vulnerability when manually typing out (or copy-pasting) a URL (instead of drag/drop), but it feels to me like that would be a lot harder to make work, both because (a) it's more actions for the user, so fewer users will complete the 'funnel', and (b) it seems more explicit about what is going on (ie the user is more likely to be suspicious).
I don't think we want to wholesale shift to the IE behaviour because it entails losing the user's typing until the new page starts loading, which we already do sometimes (because bugs) and has been a source of frustration for power users. I'm kind of nervous about making that trade-off here because of the predictable backlash, but I don't see anything else that's reasonable (short of wontfixing this entirely).
[Attachment #8811210](/attachment.cgi?id=8811210&action=edit "Patch v0.1") -
Flags: review?(mak77)

|  | [Marco Bonardo [:mak]](/user_profile?user_id=240353) |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=791597#c7)• 8 years ago |
|  | |

Comment on [attachment 8811210](/attachment.cgi?id=8811210 "Patch v0.1") [[details]](/attachment.cgi?id=8811210&action=edit "Patch v0.1") [[diff]](/attachment.cgi?id=8811210&action=diff "Patch v0.1") [[review]](/page.cgi?id=splinter.html&ignore=&bug=791597&attachment=8811210)
Patch v0.1
Review of [attachment 8811210](/attachment.cgi?id=8811210 "Patch v0.1") [[details]](/attachment.cgi?id=8811210&action=edit "Patch v0.1") [[diff]](/attachment.cgi?id=8811210&action=diff "Patch v0.1") [[review]](/page.cgi?id=splinter.html&ignore=&bug=791597&attachment=8811210):
-----------------------------------------------------------------
RE: the paste case. I agree it's not as bad as the D&D case, should probably be evaluated by the security team though. It's definitely more work for the user and less likely to mislead someone, but we have paste&go that removes some of the steps. FWIW fixing paste&go would not be different than fixing this one (<http://searchfox.org/mozilla-central/rev/904bf9addd03b03d4cad11b82f19f43d875b7f27/browser/base/content/urlbarBindings.xml#112>) so maybe we could evaluate doing that now as a bonus?
Could you write a very simple test here? I'm not blocking on that, but it should not take a lot of time (if it does, just ditch it and land this).
I think It should be feasible by using something like the test-case in [bug 1296837](/show_bug.cgi?id=1296837 "RESOLVED DUPLICATE - Address Bar Spoofing via Drag And Drop") (or an sjs file), synthtesizeDrop and checking the urlbar inputfield value. Just remember our harness cannot reach into the outside world, so it should point to a non-existing example.com:randomport.
Regardless, r=me cause the idea looks simple and valid.
[Attachment #8811210](/attachment.cgi?id=8811210&action=edit "Patch v0.1") -
Flags: review?(mak77) → review+

|  | [:Gijs (he/him)](/user_profile?user_id=159069)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=791597#a131971967_159069)• 8 years ago |

Assignee: nobody → gijskruitbosch+bugsStatus: NEW → ASSIGNED

|  | [:Gijs (he/him)](/user_profile?user_id=159069)  Assignee |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=791597#c8)• 8 years ago |
|  | |

(In reply to Marco Bonardo [::mak] from [comment #7](/show_bug.cgi?id=791597#c7 "VERIFIED FIXED - Dragging and dropping URLs leads to address bar spoofing"))
> Comment on [attachment 8811210](/attachment.cgi?id=8811210 "Patch v0.1") [[details]](/attachment.cgi?id=8811210&action=edit "Patch v0.1") [[diff]](/attachment.cgi?id=8811210&action=diff "Patch v0.1") [[review]](/page.cgi?id=splinter.html&ignore=&bug=791597&attachment=8811210)
> Patch v0.1
>
> Review of [attachment 8811210](/attachment.cgi?id=8811210 "Patch v0.1") [[details]](/attachment.cgi?id=8811210&action=edit "Patch v0.1") [[diff]](/attachment.cgi?id=8811210&action=diff "Patch v0.1") [[review]](/page.cgi?id=splinter.html&ignore=&bug=791597&attachment=8811210):
> -----------------------------------------------------------------
>
> RE: the paste case. I agree it's not as bad as the D&D case, should probably
> be evaluated by the security team though. It's definitely more work for the
> user and less likely to mislead someone, but we have paste&go that removes
> some of the steps. FWIW fixing paste&go would not be different than fixing
> this one
> (<http://searchfox.org/mozilla-central/rev/>
> 904bf9addd03b03d4cad11b82f19f43d875b7f27/browser/base/content/urlbarBindings.
> xml#112) so maybe we could evaluate doing that now as a bonus?
I looked at this, but I'm worried about there being effectively no visual response to the user that something new loads. In particular, you won't know \*what\* you pasted in, so if your clipboard had something other than what you thought, you're going to be confused. Given that there are now web clipboard APIs as well, that might open up other avenues for exploits instead of this one?
(for mitigation, I looked at a way to know when the "old" document is removed in favour of the thing we're loading so we can set the URL ASAP if userTypedValue is still null, but I couldn't find a good notification for that...)Flags: needinfo?(mak77)

|  | [Marco Bonardo [:mak]](/user_profile?user_id=240353) |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=791597#c9)• 8 years ago |
|  | |

(In reply to :Gijs Kruitbosch from [comment #8](/show_bug.cgi?id=791597#c8 "VERIFIED FIXED - Dragging and dropping URLs leads to address bar spoofing"))
> I looked at this, but I'm worried about there being effectively no visual
> response to the user that something new loads. In particular, you won't know
> \*what\* you pasted in, so if your clipboard had something other than what you
> thought, you're going to be confused.
If I understand correctly, your concern is that in the dnd case you see what you are dragging and in any case is a non-interruptible operation. Instead in the D&D case, being by its own nature async and interruptible, you may not be able to tell what you are pasting.
In any case, you would see the old address and the throbber, right? so you would know "something" is loading. You wouldn't know what.
Actually when dragging a link the only indicator of what you are dragging may be the "statusbar" tooltip url. but I see how the 2 operations have different timelines and thus d&d looks less confusing.
I'm fine leaving the paste case separate, probably worth filing its own bug and if we don't want to handle it, should just be wontfixed.Flags: needinfo?(mak77)

|  | [:Gijs (he/him)](/user_profile?user_id=159069)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=791597#a132871673_159069)• 8 years ago |

Flags: needinfo?(gijskruitbosch+bugs)

|  | [:Gijs (he/him)](/user_profile?user_id=159069)  Assignee |  |
| --- | --- | --- |
| [Comment 10](/show_bug.cgi?id=791597#c10)• 8 years ago |
|  | |

(In reply to Marco Bonardo [::mak] from [comment #9](/show_bug.cgi?id=791597#c9 "VERIFIED FIXED - Dragging and dropping URLs leads to address bar spoofing"))
> (In reply to :Gijs Kruitbosch from [comment #8](/show_bug.cgi?id=791597#c8 "VERIFIED FIXED - Dragging and dropping URLs leads to address bar spoofing"))
> > I looked at this, but I'm worried about there being effectively no visual
> > response to the user that something new loads. In particular, you won't know
> > \*what\* you pasted in, so if your clipboard had something other than what you
> > thought, you're going to be confused.
>
> If I understand correctly, your concern is that in the dnd case you see what
> you are dragging and in any case is a non-interruptible operation. Instead
> in the D&D case, being by its own nature async and interruptible, you may
> not be able to tell what you are pasting.
Correct, though the page can manipulate the drag data...
> In any case, you would see the old address and the throbber, right? so you
> would know "something" is loading. You wouldn't know what.
Yes.
> Actually when dragging a link the only indicator of what you are dragging
> may be the "statusbar" tooltip url. but I see how the 2 operations have
> different timelines and thus d&d looks less confusing.
Right. I'm also less concerned with there being less feedback, I guess.
> I'm fine leaving the paste case separate, probably worth filing its own bug
> and if we don't want to handle it, should just be wontfixed.
Will do.
<https://hg.mozilla.org/integration/mozilla-inbound/rev/3f6036fb9dca03914f3c6466e34d70d231487108>Flags: needinfo?(gijskruitbosch+bugs)

|  | [:Gijs (he/him)](/user_profile?user_id=159069)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=791597#a133887380_159069)• 8 years ago |

See Also: → [1323452](/show_bug.cgi?id=1323452 "NEW - Consider whether to revert the URL bar straight after 'paste and go' usage")

|  | [:Gijs (he/him)](/user_profile?user_id=159069)  Assignee |  |
| --- | --- | --- |
| [Comment 11](/show_bug.cgi?id=791597#c11)• 8 years ago |
|  | |

Filed [bug 1323452](/show_bug.cgi?id=1323452 "NEW - Consider whether to revert the URL bar straight after 'paste and go' usage") for the paste and go case (which has many more steps to exploit and is stranger than "drag this thing", so marked it sec-low and left open).

|  | [Wes Kocher (:KWierso) (Not reading bugmail; email directly if needed)](/user_profile?user_id=308534) |  |
| --- | --- | --- |
| [Comment 12](/show_bug.cgi?id=791597#c12)• 8 years ago |
|  | |

<https://hg.mozilla.org/mozilla-central/rev/3f6036fb9dca>
<https://hg.mozilla.org/mozilla-central/rev/b52932a0811b>Status: ASSIGNED → RESOLVEDClosed: 8 years ago
[status-firefox53](/buglist.cgi?f1=cf_status_firefox53&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_firefox53&o1=equals&v1=fixed)Resolution: --- → FIXEDTarget Milestone: --- → Firefox 53

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=791597#a133944301_1689)• 8 years ago |

Group: firefox-core-security → core-security-release

|  | [:Gijs (he/him)](/user_profile?user_id=159069)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=791597#a133984709_159069)• 8 years ago |

Depends on: [CVE-2018-5111](/show_bug.cgi?id=1321619 "RESOLVED FIXED - URL bar spoof using drag and drop (dnd) and unicode-lookalike protocol to drag plaintext that \"looks like\" a valid URL")

|  | [:Gijs (he/him)](/user_profile?user_id=159069)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=791597#a133984742_159069)• 8 years ago |

Blocks: [CVE-2018-5111](/show_bug.cgi?id=1321619 "RESOLVED FIXED - URL bar spoof using drag and drop (dnd) and unicode-lookalike protocol to drag plaintext that \"looks like\" a valid URL")No longer depends on: [CVE-2018-5111](/show_bug.cgi?id=1321619 "RESOLVED FIXED - URL bar spoof using drag and drop (dnd) and unicode-lookalike protocol to drag plaintext that \"looks like\" a valid URL")

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 13](/show_bug.cgi?id=791597#c13)• 8 years ago |
|  | |

Is this something we should consider taking on 52 ahead of the next ESR as well?
[status-firefox52](/buglist.cgi?f1=cf_status_firefox52&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox52&o1=equals&v1=affected)Flags: needinfo?(gijskruitbosch+bugs)

|  | [:Gijs (he/him)](/user_profile?user_id=159069)  Assignee |  |
| --- | --- | --- |
| [Comment 14](/show_bug.cgi?id=791597#c14)• 8 years ago |
|  | |

Attached patch

[Patch for beta](attachment.cgi?id=8834370&action=diff)
— [Details](attachment.cgi?id=8834370&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=791597&attachment=8834370)

Approval Request Comment
[Feature/Bug causing the regression]: n/a
[User impact if declined]: it's possible to spoof users by convincing them to drag and drop URLs into the location bar that take a long time to load.
[Is this code covered by automated tests?]: yes
[Has the fix been verified in Nightly?]: not yet, but this should be straightforward
[Needs manual test from QE? If yes, steps to reproduce]: Up to QE. There are automated tests, but if we want a manual test, it's pretty easy:
1. open <http://lcamtuf.coredump.cx/urldrag/>
2. drag the link in that page to the address bar and drop it there
Expected: url bar reverts to the URL on the lcamtuf.coredump.cx domain, rather than showing the dropped link (which is a custom port on a google.com domain)
[List of other uplifts needed for the feature/fix]: n/a
[Is the change risky?]: it's reasonably low-risk
[Why is the change risky/not risky?]: it's a minor JS change (2 lines of code), comes with automated tests, and I'm not aware of any regression bugs having been filed about it, and we still have ample betas left to test it and back it out if we do find problems.
[String changes made/needed]: nopeFlags: needinfo?(gijskruitbosch+bugs)
[Attachment #8834370](/attachment.cgi?id=8834370&action=edit "Patch for beta") -
Flags: review+
[Attachment #8834370](/attachment.cgi?id=8834370&action=edit "Patch for beta") -
Flags: approval-mozilla-beta?

|  | [Julien Cristau [:jcristau]](/user_profile?user_id=580382) |  |
| --- | --- | --- |
| [Comment 15](/show_bug.cgi?id=791597#c15)• 8 years ago |
|  | |

Comment on [attachment 8834370](/attachment.cgi?id=8834370 "Patch for beta") [[details]](/attachment.cgi?id=8834370&action=edit "Patch for beta") [[diff]](/attachment.cgi?id=8834370&action=diff "Patch for beta") [[review]](/page.cgi?id=splinter.html&ignore=&bug=791597&attachment=8834370)
Patch for beta
fix address bar spoofing issue in beta52
[Attachment #8834370](/attachment.cgi?id=8834370&action=edit "Patch for beta") -
Flags: approval-mozilla-beta? → approval-mozilla-beta+

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 16](/show_bug.cgi?id=791597#c16)• 8 years ago |
|  | |

<https://hg.mozilla.org/releases/mozilla-beta/rev/b180354560dd>
[status-firefox52](/buglist.cgi?f1=cf_status_firefox52&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox52&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox52&o1=equals&v1=fixed)

|  | [Andrei Vaida [:avaida]](/user_profile?user_id=488993) |  |
| --- | --- | --- |
| [Comment 17](/show_bug.cgi?id=791597#c17)• 8 years ago |
|  | |

Flagging this for verification, instructions in [Comment 14](/show_bug.cgi?id=791597#c14 "VERIFIED FIXED - Dragging and dropping URLs leads to address bar spoofing").Flags: qe-verify+

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 18](/show_bug.cgi?id=791597#c18)• 8 years ago |
|  | |

<https://hg.mozilla.org/releases/mozilla-esr52/rev/b180354560dd>
[status-firefox-esr52](/buglist.cgi?f1=cf_status_firefox_esr52&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_firefox_esr52&o1=equals&v1=fixed)

|  | [Andrei Vaida [:avaida]](/user_profile?user_id=488993) |  |
| --- | --- | --- |
| [Comment 19](/show_bug.cgi?id=791597#c19)• 8 years ago |
|  | |

Reproduced the issue on an affected build (50.1.0, 20161208153507) using the str from [Comment 14](/show_bug.cgi?id=791597#c14 "VERIFIED FIXED - Dragging and dropping URLs leads to address bar spoofing") on Ubuntu 16.04 x64.
This is verified fixed on Ubuntu 16.04 x64, Windows 10 x64 and macOS 10.12.3 using:
- 52.0b8-build1 (20170220070057),
- 53.0a2 (2017-02-23),
the Location Bar displays lcamtuf.coredump.cx domain after drag and drop.Status: RESOLVED → VERIFIED
[status-firefox52](/buglist.cgi?f1=cf_status_firefox52&o1=isnotempty):
[fixed](/buglist.cgi?f1=cf_status_firefox52&o1=equals&v1=fixed) → [verified](/buglist.cgi?f1=cf_status_firefox52&o1=equals&v1=verified)
[status-firefox53](/buglist.cgi?f1=cf_status_firefox53&o1=isnotempty):
[fixed](/buglist.cgi?f1=cf_status_firefox53&o1=equals&v1=fixed) → [verified](/buglist.cgi?f1=cf_status_firefox53&o1=equals&v1=verified)Flags: qe-verify+

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=791597#a140488375_280903)• 8 years ago |

Whiteboard: [adv-main52+]

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=791597#a140558252_280903)• 8 years ago |

Alias: CVE-2017-5417

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=791597#a161228026_1689)• 7 years ago |

Group: core-security-release
You need to [log in](/show_bug.cgi?id=791597&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top ↑

## Attachment

Hide Details

### General

Creator:  [:Gijs (he/him)](/user_profile?user_id=159069)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review



=== Content from www.mozilla.org_087ffa14_20250125_002842.html ===


## Help us improve your Mozilla experience

In addition to Cookies necessary for this site to function, we’d like your permission to set some additional Cookies to better understand your browsing needs and improve your experience. Rest assured — we value your privacy.

Accept All Additional Cookies

Reject All Additional Cookies

[Cookie settings](/en-US/privacy/websites/cookie-settings/)

Menu
[![Mozilla](https://www.mozilla.org/media/img/logos/m24/lockup-black.f2ddba3f0724.svg)](/en-US/)

* [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
  Firefox browsers](/en-US/firefox/)
  Close Firefox browsers menu
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
    ## Firefox for Desktop](/en-US/firefox/new/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
    ## Firefox for iOS](/en-US/firefox/browsers/mobile/ios/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
    ## Firefox for Android](/en-US/firefox/browsers/mobile/android/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/focus/logo.aac3e33175cb.svg)
    ## Firefox Focus](/en-US/firefox/browsers/mobile/focus/)
  + [## Firefox blog](https://blog.mozilla.org/firefox/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=firefox)
* [Products](/en-US/products/)
  Close Products menu
  + [![](https://www.mozilla.org/media/protocol/img/logos/mozilla/vpn/logo.c648f487bfb8.svg)
    ## Mozilla VPN](/en-US/products/vpn/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/monitor/logo.d97e5516f9e6.svg)
    ## Mozilla Monitor](https://monitor.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/relay/logo-white.d42a8b52e44c.svg)
    ## Firefox Relay](https://relay.firefox.com/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/protocol/img/logos/pocket/logo.17446bc33a5d.svg)
    ## Pocket](https://getpocket.com/firefox_learnmore/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/img/nav/icons/icon-mdn-plus.f54475f980ab.svg)
    ## MDN Plus](https://developer.mozilla.org/plus?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/img/logos/fakespot/logo-blue.3973b8fe9631.svg)
    ## Fakespot](https://fakespot.com/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/img/logos/thunderbird/logo-thunderbird.121e9c0fed45.svg)
    ## Thunderbird](https://www.thunderbird.net/)

  [All products](/en-US/products/)
* [About us](/en-US/about/)
  Close About us menu

  Our Mission

  + [## About Mozilla](/en-US/about/)
  + [## The Mozilla Manifesto](/en-US/about/manifesto/)
  + [## Get Involved](/en-US/contribute/)
  + [## Innovation Projects](https://future.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [## Blog](https://blog.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)

  Our Work

  + [## Mozilla Foundation](https://foundation.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [## Mozilla.ai](https://www.mozilla.ai/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [## Mozilla Ventures](https://mozilla.vc/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [## Mozilla Advertising](/en-US/advertising/)

## Menu

* Mozilla Security

## [Mozilla Security](/en-US/security/)

* [Advisories](/en-US/security/advisories/)
* [Known Vulnerabilities](/en-US/security/known-vulnerabilities/)
* [Mozilla Security Blog](https://blog.mozilla.com/security/)
* [Security Bug Bounty](/en-US/security/bug-bounty/)
* [Third-party Injection Policy](/en-US/security/third-party-software-injection/)

## [Client Bug Bounty](/en-US/security/client-bug-bounty/)

* [Frequently Asked Questions](/en-US/security/bug-bounty/faq/)
* [Hall of Fame](/en-US/security/bug-bounty/hall-of-fame/)

## [Web Bug Bounty](/en-US/security/web-bug-bounty/)

* [Eligible Websites](/en-US/security/bug-bounty/web-eligible-sites/)
* [Frequently Asked Questions](/en-US/security/bug-bounty/faq-webapp/)
* [Hall of Fame](/en-US/security/bug-bounty/web-hall-of-fame/)

# Mozilla Foundation Security Advisory 2017-05

## Security vulnerabilities fixed in Firefox 52

Announced
March 7, 2017
Impact
critical
Products
Firefox
Fixed in

* Firefox 52

#### [#CVE-2017-5400: asm.js JIT-spray bypass of ASLR and DEP](#CVE-2017-5400)

Reporter
Rh0
Impact
critical
##### Description

JIT-spray targeting asm.js combined with a heap spray allows for a bypass of ASLR and DEP protections leading to potential memory corruption attacks.

##### References

* [Bug 1334933](https://bugzilla.mozilla.org/show_bug.cgi?id=1334933)

#### [#CVE-2017-5401: Memory Corruption when handling ErrorResult](#CVE-2017-5401)

Reporter
Anton Eliasson
Impact
critical
##### Description

A crash triggerable by web content in which an `ErrorResult` references unassigned memory due to a logic error. The resulting crash may be exploitable.

##### References

* [Bug 1328861](https://bugzilla.mozilla.org/show_bug.cgi?id=1328861)

#### [#CVE-2017-5402: Use-after-free working with events in FontFace objects](#CVE-2017-5402)

Reporter
Nils
Impact
critical
##### Description

A use-after-free can occur when events are fired for a `FontFace` object after the object has been already been destroyed while working with fonts. This results in a potentially exploitable crash.

##### References

* [Bug 1334876](https://bugzilla.mozilla.org/show_bug.cgi?id=1334876)

#### [#CVE-2017-5403: Use-after-free using addRange to add range to an incorrect root object](#CVE-2017-5403)

Reporter
Nils
Impact
critical
##### Description

When adding a range to an object in the DOM, it is possible to use `addRange` to add the range to an incorrect root object. This triggers a use-after-free, resulting in a potentially exploitable crash.

##### References

* [Bug 1340186](https://bugzilla.mozilla.org/show_bug.cgi?id=1340186)

#### [#CVE-2017-5404: Use-after-free working with ranges in selections](#CVE-2017-5404)

Reporter
Ivan Fratric of Google Project Zero
Impact
critical
##### Description

A use-after-free error can occur when manipulating ranges in selections with one node inside a native anonymous tree and one node outside of it. This results in a potentially exploitable crash.

##### References

* [Bug 1340138](https://bugzilla.mozilla.org/show_bug.cgi?id=1340138)

#### [#CVE-2017-5406: Segmentation fault in Skia with canvas operations](#CVE-2017-5406)

Reporter
Atte Kettunen
Impact
high
##### Description

A segmentation fault can occur in the Skia graphics library during some canvas operations due to issues with mask/clip intersection and empty masks.

##### References

* [Bug 1306890](https://bugzilla.mozilla.org/show_bug.cgi?id=1306890)

#### [#CVE-2017-5407: Pixel and history stealing via floating-point timing side channel with SVG filters](#CVE-2017-5407)

Reporter
David Kohlbrenner
Impact
high
##### Description

Using SVG filters that don't use the fixed point math implementation on a target iframe, a malicious page can extract pixel values from a targeted user. This can be used to extract history information and read text values across domains. This violates same-origin policy and leads to information disclosure.

##### References

* [Bug 1336622](https://bugzilla.mozilla.org/show_bug.cgi?id=1336622)

#### [#CVE-2017-5410: Memory corruption during JavaScript garbage collection incremental sweeping](#CVE-2017-5410)

Reporter
Jerri Rice
Impact
high
##### Description

Memory corruption resulting in a potentially exploitable crash during garbage collection of JavaScript due errors in how incremental sweeping is managed for memory cleanup.

##### References

* [Bug 1330687](https://bugzilla.mozilla.org/show_bug.cgi?id=1330687)

#### [#CVE-2017-5411: Use-after-free in Buffer Storage in libGLES](#CVE-2017-5411)

Reporter
Looben Yang
Impact
high
##### Description

A use-after-free can occur during buffer storage operations within the ANGLE graphics library, used for WebGL content. The buffer storage can be freed while still in use in some circumstances, leading to a potentially exploitable crash.
*Note: This issue is in `libGLES`, which is only in use on Windows. Other operating systems are not affected.*

##### References

* [Bug 1325511](https://bugzilla.mozilla.org/show_bug.cgi?id=1325511)

#### [#CVE-2017-5409: File deletion via callback parameter in Mozilla Windows Updater and Maintenance Service](#CVE-2017-5409)

Reporter
Holger Fuhrmannek
Impact
moderate
##### Description

The Mozilla Windows updater can be called by a non-privileged user to delete an arbitrary local file by passing a special path to the callback parameter through the Mozilla Maintenance Service, which has privileged access.
*Note: This attack requires local system access and only affects Windows. Other operating systems are not affected.*

##### References

* [Bug 1321814](https://bugzilla.mozilla.org/show_bug.cgi?id=1321814)

#### [#CVE-2017-5408: Cross-origin reading of video captions in violation of CORS](#CVE-2017-5408)

Reporter
Eric Lawrence of Chrome Security
Impact
moderate
##### Description

Video files loaded video captions cross-origin without checking for the presence of CORS headers permitting such cross-origin use, leading to potential information disclosure for video captions.

##### References

* [Bug 1313711](https://bugzilla.mozilla.org/show_bug.cgi?id=1313711)

#### [#CVE-2017-5412: Buffer overflow read in SVG filters](#CVE-2017-5412)

Reporter
Atte Kettunen
Impact
moderate
##### Description

A buffer overflow read during SVG filter color value operations, resulting in data exposure.

##### References

* [Bug 1328323](https://bugzilla.mozilla.org/show_bug.cgi?id=1328323)

#### [#CVE-2017-5413: Segmentation fault during bidirectional operations](#CVE-2017-5413)

Reporter
Atte Kettunen
Impact
moderate
##### Description

A segmentation fault can occur during some bidirectional layout operations.

##### References

* [Bug 1337504](https://bugzilla.mozilla.org/show_bug.cgi?id=1337504)

#### [#CVE-2017-5414: File picker can choose incorrect default directory](#CVE-2017-5414)

Reporter
Abdulrahman Alqabandi
Impact
moderate
##### Description

The file picker dialog can choose and display the wrong local default directory when instantiated. On some operating systems, this can lead to information disclosure, such as the operating system or the local account name.

##### References

* [Bug 1319370](https://bugzilla.mozilla.org/show_bug.cgi?id=1319370)

#### [#CVE-2017-5415: Addressbar spoofing through blob URL](#CVE-2017-5415)

Reporter
Abdulrahman Alqabandi
Impact
moderate
##### Description

An attack can use a blob URL and script to spoof an arbitrary addressbar URL prefaced by `blob:` as the protocol, leading to user confusion and further spoofing attacks.

##### References

* [Bug 1321719](https://bugzilla.mozilla.org/show_bug.cgi?id=1321719)

#### [#CVE-2017-5416: Null dereference crash in HttpChannel](#CVE-2017-5416)

Reporter
Radek 'sysKin' Czyz
Impact
moderate
##### Description

In certain circumstances a networking event listener can be prematurely released. This appears to result in a null dereference in practice.

##### References

* [Bug 1328121](https://bugzilla.mozilla.org/show_bug.cgi?id=1328121)

#### [#CVE-2017-5417: Addressbar spoofing by draging and dropping URLs](#CVE-2017-5417)

Reporter
Michal Zalewski
Impact
moderate
##### Description

When dragging content from the primary browser pane to the addressbar on a malicious site, it is possible to change the addressbar so that the displayed location following navigation does not match the URL of the newly loaded page. This allows for spoofing attacks.

##### References

* [Bug 791597](https://bugzilla.mozilla.org/show_bug.cgi?id=791597)

#### [#CVE-2017-5425: Overly permissive Gecko Media Plugin sandbox regular expression access](#CVE-2017-5425)

Reporter
Haik Aftandilian
Impact
moderate
##### Description

The Gecko Media Plugin sandbox allows access to local files that match specific regular expressions. On OS OX, this matching allows access to some data in subdirectories of `/private/var` that could expose personal or temporary data. This has been updated to not allow access to `/private/var` and its subdirectories.
*Note: this issue only affects OS X. Other operating systems are not affected.*

##### References

* [Bug 1322716](https://bugzilla.mozilla.org/show_bug.cgi?id=1322716)

#### [#CVE-2017-5426: Gecko Media Plugin sandbox is not started if seccomp-bpf filter is running](#CVE-2017-5426)

Reporter
Jed Davis
Impact
moderate
##### Description

On Linux, if the secure computing mode BPF (seccomp-bpf) filter is running when the Gecko Media Plugin sandbox is started, the sandbox fails to be applied and items that would run within the sandbox are run protected only by the running filter which is typically weak compared to the sandbox.
*Note: this issue only affects Linux. Other operating systems are not affected.*

##### References

* [Bug 1257361](https://bugzilla.mozilla.org/show_bug.cgi?id=1257361)

#### [#CVE-2017-5427: Non-existent chrome.manifest file loaded during startup](#CVE-2017-5427)

Reporter
Mike Kaply
Impact
moderate
##### Description

A non-existent chrome.manifest file will attempt to be loaded during startup from the primary installation directory. If a malicious user with local access puts chrome.manifest and other referenced files in this directory, they will be loaded and activated during startup. This could result in malicious software being added without consent or modification of referenced installed files.

##### References

* [Bug 1295542](https://bugzilla.mozilla.org/show_bug.cgi?id=1295542)

#### [#CVE-2017-5418: Out of bounds read when parsing HTTP digest authorization responses](#CVE-2017-5418)

Reporter
Anonymous
Impact
low
##### Description

An out of bounds read error occurs when parsing some HTTP digest authorization responses, resulting in information leakage through the reading of random memory containing matches to specifically set patterns.

##### References

* [Bug 1338876](https://bugzilla.mozilla.org/show_bug.cgi?id=1338876)

#### [#CVE-2017-5419: Repeated authentication prompts lead to DOS attack](#CVE-2017-5419)

Reporter
Chris Hamono
Impact
low
##### Description

If a malicious site repeatedly triggers a modal authentication prompt, eventually the browser UI will become non-responsive, requiring shutdown through the operating system. This is a denial of service (DOS) attack.

##### References

* [Bug 1312243](https://bugzilla.mozilla.org/show_bug.cgi?id=1312243)

#### [#CVE-2017-5420: Javascript: URLs can obfuscate addressbar location](#CVE-2017-5420)

Reporter
Abdulrahman Alqabandi
Impact
low
##### Description

A `javascript:` url loaded by a malicious page can obfuscate its location by blanking the URL displayed in the addressbar, allowing for an attacker to spoof an existing page without the malicious page's address being displayed correctly.

##### References

* [Bug 1284395](https://bugzilla.mozilla.org/show_bug.cgi?id=1284395)

#### [#CVE-2017-5405: FTP response codes can cause use of uninitialized values for ports](#CVE-2017-5405)

Reporter
Anonymous
Impact
low
##### Description

Certain response codes in FTP connections can result in the use of uninitialized values for ports in FTP operations.

##### References

* [Bug 1336699](https://bugzilla.mozilla.org/show_bug.cgi?id=1336699)

#### [#CVE-2017-5421: Print preview spoofing](#CVE-2017-5421)

Reporter
Abdulrahman Alqabandi
Impact
low
##### Description

A malicious site could spoof the contents of the print preview window if popup windows are enabled, resulting in user confusion of what site is currently loaded.

##### References

* [Bug 1301876](https://bugzilla.mozilla.org/show_bug.cgi?id=1301876)

#### [#CVE-2017-5422: DOS attack by using view-source: protocol repeatedly in one hyperlink](#CVE-2017-5422)

Reporter
Alex Bolton
Impact
low
##### Description

If a malicious site uses the `view-source:` protocol in a series within a single hyperlink, it can trigger a non-exploitable browser crash when the hyperlink is selected. This was fixed by no longer making `view-source:` linkable.

##### References

* [Bug 1295002](https://bugzilla.mozilla.org/show_bug.cgi?id=1295002)

#### [#CVE-2017-5399: Memory safety bugs fixed in Firefox 52](#CVE-2017-5399)

Reporter
Mozilla developers and community
Impact
critical
##### Description

Mozilla developers and community members Carsten Book, Calixte Denizet, Christian Holler, Andrew McCreight, David Bolter, David Keeler, Jon Coppeard, Tyson Smith, Ronald Crane, Tooru Fujisawa, Ben Kelly, Bob Owen, Jed Davis, Julian Seward, Julian Hector, Philipp, Markus Stange, and André Bargull reported memory safety bugs present in Firefox 51. Some of these bugs showed evidence of memory corruption and we presume that with enough effort that some of these could be exploited to run arbitrary code.

##### References

* [Memory safety bugs fixed in Firefox 52](https://bugzilla.mozilla.org/buglist.cgi?bug_id=1332569%2C1315248%2C1261335%2C1321038%2C1331771%2C1339566%2C1339591%2C1240893%2C1341905%2C1323241%2C1336467%2C1270288%2C1295299%2C1296024%2C1304201%2C1306142%2C1307557%2C1308036%2C1334246%2C1334290%2C1317085%2C1339116%2C1324000%2C1323150%2C1332501%2C1320894%2C1333752%2C1303713%2C1321566%2C1264053%2C1343513)

#### [#CVE-2017-5398: Memory safety bugs fixed in Firefox 52 and Firefox ESR 45.8](#CVE-2017-5398)

Reporter
Mozilla developers and community
Impact
critical
##### Description

Mozilla developers and community members Boris Zbarsky, Christian Holler, Honza Bambas, Jon Coppeard, Randell Jesup, André Bargull, Kan-Ru Chen, and Nathan Froyd reported memory safety bugs present in Firefox 51 and Firefox ESR 45.7. Some of these bugs showed evidence of memory corruption and we presume that with enough effort that some of these could be exploited to run arbitrary code.

##### References

* [Memory safety bugs fixed in Firefox 52 and Firefox ESR 45.8](https://bugzilla.mozilla.org/buglist.cgi?bug_id=1332550%2C1332597%2C1338383%2C1321612%2C1322971%2C1333568%2C1333887%2C1335450%2C1325052%2C1324379%2C1336510)

## Company

* [Leadership](/about/leadership/)
* [Press Center](https://blog.mozilla.org/category/mozilla/news/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=company)
* [Careers](/en-US/careers/)
* [Contact](/en-US/contact/)

## Support

* [Product Help](https://support.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=support)
* [File a Bug](https://bugzilla.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=support)
* [Localize Mozilla](https://pontoon.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=support)

## Resources

* [Advertise with Mozilla](/en-US/advertising/)
* [Firefox Release Notes](/firefox/134.0.2/releasenotes/)

## Developers

* [Developer Edition](/en-US/firefox/developer/)
* [Enterprise](/en-US/firefox/enterprise/)
* [Tools](https://firefox-source-docs.mozilla.org/devtools-user/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=developers)
* [MDN](https://developer.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer)

## Follow @Mozilla

* [X (formerly Twitter) (@mozilla)](https://twitter.com/mozilla)
* [Instagram (@mozilla)](https://www.instagram.com/mozilla/)
* [LinkedIn (@mozilla)](https://www.linkedin.com/company/mozilla-corporation/)
* [TikTok (@mozilla)](https://www.tiktok.com/%40mozilla)
* [Spotify (@mozilla)](https://open.spotify.com/show/0vT7LJMeVDxyQ2ZamHKu08?si=_uDRD6bRR_6M5YZyISGXgA)

## Follow @Firefox

* [X (formerly Twitter) (@firefox)](https://twitter.com/firefox)
* [Instagram (@firefox)](https://www.instagram.com/firefox/)
* [YouTube (@firefoxchannel)](https://www.youtube.com/user/firefoxchannel)
* [TikTok (@firefox)](https://www.tiktok.com/%40firefox)

[Donate](https://foundation.mozilla.org/?form=moco-donate-footer)

Visit [Mozilla Corporation’s](/en-US/) not-for-profit parent, the [Mozilla Foundation](https://foundation.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer).

Portions of this content are ©1998–2025 by individual mozilla.org contributors. Content available under a [Creative Commons license](/en-US/foundation/licensing/website-content/).

* [Website Privacy Notice](/en-US/privacy/websites/)
* [Cookies](/en-US/privacy/websites/cookie-settings/)
* [Legal](/en-US/about/legal/)
* [Community Participation Guidelines](/en-US/about/governance/policies/participation/)
* [About this site](/en-US/about/this-site/)

![](https://www.mozilla.org/media/img/logos/m24/wordmark-white.2d673bb5b33a.svg)



=== Content from wiki.mozilla.org_73f8d6fa_20250126_044750.html ===


# BMO/UserGuide/BugFields

From MozillaWiki
< [BMO](/BMO "BMO")‎ | [UserGuide](/BMO/UserGuide "BMO/UserGuide")

[Jump to navigation](#mw-head)
[Jump to search](#searchInput)
## Bugzilla Field Descriptions

Alias
A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla.Assignee
This is the person in charge of resolving the bug. Every time this field changes, the status changes to NEW to make it easy to see which new bugs have appeared on a person's list.Blocks
This bug must be resolved before the bugs listed in this field can be resolved.Bug ID
The numeric id of a bug, unique within this entire installation of Bugzilla.CC
Users who may not have a direct role to play on this bug, but who are interested in its progress.Changed
When this bug was last updated.Classification
Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorization.Comment
Bugs have comments added to them by Bugzilla users. You can search for some text in those comments.Comment Tag
Comments can have arbitrary tags added to them to help with filtering as well as mark comments as spam or abusive.Component
Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list.Creation date
When the bug was filed.Depends on
The bugs listed here must be resolved before this bug can be resolved.Duplicates
List of bugs that have been marked a duplicate of the bug currently being viewed.Keywords
Keywords are a controlled vocabulary for characterizing bugs across Products and Components. Examples of this field are `regression`, `sec-high`, and `topcrash`. Bugzilla administrators manage [the list of keywords](https://bugzilla.mozilla.org/describekeywords.cgi). If you believe you need a new keyword, [please contact the administrators to discuss](https://bugzilla.mozilla.org/enter_bug.cgi?product=bugzilla.mozilla.org&component=Administration).Mentors
Mentors are users who have offered to help the bug owner with such tasks as setting up a development environment, finding relevant information to fixing the bug, how to submit a patch for review, and finally how to get the fix committed.Needinfo
More information has been requested from specific individuals, or anyone, to move the bug forward to completion.OS
This is the operating system against which the bug was reported.Platform
This is the hardware platform against which the bug was reported (ARM, ARM64, x86, x86\_64, etc).Priority

| Priority | Description |
| --- | --- |
| **--** | No decision |
| **P1** | Fix in the current release cycle |
| **P2** | Fix in the next release cycle or the following (nightly + 1 or nightly + 2) |
| **P3** | Backlog |
| **P4** | Do not use. This priority is for the Web Platform Test bot. |
| **P5** | Will not fix, but will accept a patch |

This field describes the importance and order in which a bug should be fixed compared to other bugs. This field is utilized by the programmers/engineers/release managers/managers to prioritize the work to be done. See the Firefox [triage documentation](https://firefox-source-docs.mozilla.org/bug-mgmt/policies/triage-bugzilla.html) and [priority definitions](https://firefox-source-docs.mozilla.org/bug-mgmt/guides/priority.html), or for the main Bugzilla project, [Bugzilla:Priority\_System](/Bugzilla%3APriority_System "Bugzilla:Priority System").Product
Bugs are categorised into Products and Components. Select a Classification to narrow down this list.QA Contact
The person responsible for confirming this bug if it is unconfirmed, and for verifying the fix once the bug has been resolved.Rank
Used by some groups to provide finer-grained ordering for working on bugs than afforded by the Priority field. Use of this field is restricted to the `rank-setters` group.Regressed by
This bug has been introduced by the bugs listed here.Regressions
This bug has introduced the bugs listed here.Reporter
The person who filed this bug.See Also
This allows you to refer to bugs in other bug tracker installations. You can enter a URL to a bug in the 'Add Bug URLs' field to note that that bug is related to this one. You can enter multiple URLs at once by separating them with a comma. You should normally use this field to refer to bugs in other bug tracker installations, or bugs which are related to, but not known to be duplicates of the bug. Bugs which are regressions should be listed in the Regressed by field (above)Severity
This field describes the impact of a bug. This field is utilized by the programmers/engineers/release managers/managers to determine the severity of issues and used as input for the priority of the bug. It should not be set by people filing bugs. See the Firefox [triage documentation](https://firefox-source-docs.mozilla.org/bug-mgmt/policies/triage-bugzilla.html) and [severity documentation](https://firefox-source-docs.mozilla.org/bug-mgmt/guides/severity.html).

| Severity | Description |
| --- | --- |
| **--** | Default value for new bugs; bug triagers for components (ie engineers and other core project folks) are expected to update the bug's severity from this value. To avoid them missing new bugs for triage, do not alter this default when filing bugs. |
| **S1** | (Catastrophic) Blocks development/testing, may impact more than 25% of users, causes data loss, likely dot release driver, and no workaround available |
| **S2** | (Serious) Major functionality/product severely impaired or a high impact issue and a satisfactory workaround does not exist |
| **S3** | (Normal) Blocks non-critical functionality or a work around exists |
| **S4** | (Small/Trivial) minor significance, cosmetic issues, low or no impact to users |
| **N/A** | (Not Applicable) The above definitions do not apply to this bug; this value is reserved for bugs of type Task or Enhancement |

Summary
The bug summary is a short sentence which succinctly describes what the bug is about.Target Milestone
For Firefox-related bugs, when a change set (patch) lands in Mozilla-Central, the [sheriffs](/Sheriffing "Sheriffing") will set this field to the corresponding release value for the current Nightly.
Release status and tracking flags are used to mark intentions for when a fix or other patch should land.
If you need to track a bug against a set of milestones other than upcoming versions of Firefox, please tell the Bugzilla team, you may want a custom status flag.Triage Owner
User that is responsible [for triaging bugs in a specific component](https://firefox-source-docs.mozilla.org/bug-mgmt/policies/triage-bugzilla.html).Type
This field describes the [type of a bug](https://firefox-source-docs.mozilla.org/bug-mgmt/guides/bug-types.html).

| Type | Description |
| --- | --- |
| **defect** | regression, crash, hang, security vulnerability and any other general issue. |
| **enhancement** | new feature, improvement in UI, performance, etc. and any other request for user-facing changes and enhancements in the product; not engineering changes |
| **task** | refactoring, removal, replacement, enabling or disabling of functionality and any other engineering task |

URL
Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen.Version
The version field defines the version of the software the bug was found in.Votes
Some bugs can be voted for, and you can limit your search to bugs with more than a certain number of votes. Votes are not used by Mozilla developers to set priorities.Whiteboard
Each bug has a free-form single line text entry box for adding tags and status information

Retrieved from "<https://wiki.mozilla.org/index.php?title=BMO/UserGuide/BugFields&oldid=1250790>"

## Navigation menu

### Personal tools

* [Log in](/index.php?title=Special:UserLogin&returnto=BMO%2FUserGuide%2FBugFields "You are encouraged to log in; however, it is not mandatory [o]")
* [Request account](/Special%3ARequestAccount "You are encouraged to create an account and log in; however, it is not mandatory")

### Namespaces

* [Page](/BMO/UserGuide/BugFields "View the content page [c]")
* [Discussion](/index.php?title=Talk:BMO/UserGuide/BugFields&action=edit&redlink=1 "Discussion about the content page (page does not exist) [t]")

English

### Views

* [Read](/BMO/UserGuide/BugFields)
* [View source](/index.php?title=BMO/UserGuide/BugFields&action=edit "This page is protected.
  You can view its source [e]")
* [View history](/index.php?title=BMO/UserGuide/BugFields&action=history "Past revisions of this page [h]")

More

### Search

### Navigation

* [Main page](/Main_Page "Visit the main page [z]")
* [Product releases](/Releases)
* [New pages](/Special%3ANewPages)
* [Recent changes](/Special%3ARecentChanges "A list of recent changes in the wiki [r]")
* [Recent uploads](/Special%3ANewFiles)
* [Random page](/Special%3ARandom "Load a random page [x]")
* [Help](/MozillaWiki%3AHelp "The place to find out")

### How to Contribute

* [All-hands meeting](/WeeklyUpdates)
* [Other meetings](/Community_Calendar)
* [Contribute to Mozilla](/Contribute)
* [Community Portal](//community.mozilla.org)
* [Community Participation Guidelines](//www.mozilla.org/en-US/about/governance/policies/participation/)

### MozillaWiki

* [About](/MozillaWiki%3AAbout)
* [Team](/MozillaWiki%3ATeam)
* [Policies](/MozillaWiki%3APolicies)
* [Report a wiki bug](//bugzilla.mozilla.org/enter_bug.cgi?product=Websites&component=wiki.mozilla.org)

### Around Mozilla

* [Mozilla Support](//support.mozilla.org/)
* [Mozilla Developer Network](//developer.mozilla.org/)
* [Planet Mozilla](//planet.mozilla.org/)
* [Mozilla Blog](//blog.mozilla.org/)
* [Research](//www.mozilla.org/research/)

### Tools

* [What links here](/Special%3AWhatLinksHere/BMO/UserGuide/BugFields "A list of all wiki pages that link here [j]")
* [Related changes](/Special%3ARecentChangesLinked/BMO/UserGuide/BugFields "Recent changes in pages linked from this page [k]")
* [Special pages](/Special%3ASpecialPages "A list of all special pages [q]")
* Printable version
* [Permanent link](/index.php?title=BMO/UserGuide/BugFields&oldid=1250790 "Permanent link to this revision of this page")
* [Page information](/index.php?title=BMO/UserGuide/BugFields&action=info "More information about this page")

* This page was last edited on 14 May 2024, at 14:22.

* [Privacy policy](/MozillaWiki%3APrivacy_policy)
* [About MozillaWiki](/MozillaWiki%3AAbout)
* [Mobile view](https://wiki.mozilla.org/index.php?title=BMO/UserGuide/BugFields&mobileaction=toggle_view_mobile)

* [![Powered by MediaWiki](/resources/assets/poweredby_mediawiki_88x31.png)](https://www.mediawiki.org/)



=== Content from wiki.mozilla.org_3659d679_20250126_044749.html ===


# BMO/UserGuide/BugFields

From MozillaWiki
< [BMO](/BMO "BMO")‎ | [UserGuide](/BMO/UserGuide "BMO/UserGuide")

[Jump to navigation](#mw-head)
[Jump to search](#searchInput)
## Bugzilla Field Descriptions

Alias
A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla.Assignee
This is the person in charge of resolving the bug. Every time this field changes, the status changes to NEW to make it easy to see which new bugs have appeared on a person's list.Blocks
This bug must be resolved before the bugs listed in this field can be resolved.Bug ID
The numeric id of a bug, unique within this entire installation of Bugzilla.CC
Users who may not have a direct role to play on this bug, but who are interested in its progress.Changed
When this bug was last updated.Classification
Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorization.Comment
Bugs have comments added to them by Bugzilla users. You can search for some text in those comments.Comment Tag
Comments can have arbitrary tags added to them to help with filtering as well as mark comments as spam or abusive.Component
Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list.Creation date
When the bug was filed.Depends on
The bugs listed here must be resolved before this bug can be resolved.Duplicates
List of bugs that have been marked a duplicate of the bug currently being viewed.Keywords
Keywords are a controlled vocabulary for characterizing bugs across Products and Components. Examples of this field are `regression`, `sec-high`, and `topcrash`. Bugzilla administrators manage [the list of keywords](https://bugzilla.mozilla.org/describekeywords.cgi). If you believe you need a new keyword, [please contact the administrators to discuss](https://bugzilla.mozilla.org/enter_bug.cgi?product=bugzilla.mozilla.org&component=Administration).Mentors
Mentors are users who have offered to help the bug owner with such tasks as setting up a development environment, finding relevant information to fixing the bug, how to submit a patch for review, and finally how to get the fix committed.Needinfo
More information has been requested from specific individuals, or anyone, to move the bug forward to completion.OS
This is the operating system against which the bug was reported.Platform
This is the hardware platform against which the bug was reported (ARM, ARM64, x86, x86\_64, etc).Priority

| Priority | Description |
| --- | --- |
| **--** | No decision |
| **P1** | Fix in the current release cycle |
| **P2** | Fix in the next release cycle or the following (nightly + 1 or nightly + 2) |
| **P3** | Backlog |
| **P4** | Do not use. This priority is for the Web Platform Test bot. |
| **P5** | Will not fix, but will accept a patch |

This field describes the importance and order in which a bug should be fixed compared to other bugs. This field is utilized by the programmers/engineers/release managers/managers to prioritize the work to be done. See the Firefox [triage documentation](https://firefox-source-docs.mozilla.org/bug-mgmt/policies/triage-bugzilla.html) and [priority definitions](https://firefox-source-docs.mozilla.org/bug-mgmt/guides/priority.html), or for the main Bugzilla project, [Bugzilla:Priority\_System](/Bugzilla%3APriority_System "Bugzilla:Priority System").Product
Bugs are categorised into Products and Components. Select a Classification to narrow down this list.QA Contact
The person responsible for confirming this bug if it is unconfirmed, and for verifying the fix once the bug has been resolved.Rank
Used by some groups to provide finer-grained ordering for working on bugs than afforded by the Priority field. Use of this field is restricted to the `rank-setters` group.Regressed by
This bug has been introduced by the bugs listed here.Regressions
This bug has introduced the bugs listed here.Reporter
The person who filed this bug.See Also
This allows you to refer to bugs in other bug tracker installations. You can enter a URL to a bug in the 'Add Bug URLs' field to note that that bug is related to this one. You can enter multiple URLs at once by separating them with a comma. You should normally use this field to refer to bugs in other bug tracker installations, or bugs which are related to, but not known to be duplicates of the bug. Bugs which are regressions should be listed in the Regressed by field (above)Severity
This field describes the impact of a bug. This field is utilized by the programmers/engineers/release managers/managers to determine the severity of issues and used as input for the priority of the bug. It should not be set by people filing bugs. See the Firefox [triage documentation](https://firefox-source-docs.mozilla.org/bug-mgmt/policies/triage-bugzilla.html) and [severity documentation](https://firefox-source-docs.mozilla.org/bug-mgmt/guides/severity.html).

| Severity | Description |
| --- | --- |
| **--** | Default value for new bugs; bug triagers for components (ie engineers and other core project folks) are expected to update the bug's severity from this value. To avoid them missing new bugs for triage, do not alter this default when filing bugs. |
| **S1** | (Catastrophic) Blocks development/testing, may impact more than 25% of users, causes data loss, likely dot release driver, and no workaround available |
| **S2** | (Serious) Major functionality/product severely impaired or a high impact issue and a satisfactory workaround does not exist |
| **S3** | (Normal) Blocks non-critical functionality or a work around exists |
| **S4** | (Small/Trivial) minor significance, cosmetic issues, low or no impact to users |
| **N/A** | (Not Applicable) The above definitions do not apply to this bug; this value is reserved for bugs of type Task or Enhancement |

Summary
The bug summary is a short sentence which succinctly describes what the bug is about.Target Milestone
For Firefox-related bugs, when a change set (patch) lands in Mozilla-Central, the [sheriffs](/Sheriffing "Sheriffing") will set this field to the corresponding release value for the current Nightly.
Release status and tracking flags are used to mark intentions for when a fix or other patch should land.
If you need to track a bug against a set of milestones other than upcoming versions of Firefox, please tell the Bugzilla team, you may want a custom status flag.Triage Owner
User that is responsible [for triaging bugs in a specific component](https://firefox-source-docs.mozilla.org/bug-mgmt/policies/triage-bugzilla.html).Type
This field describes the [type of a bug](https://firefox-source-docs.mozilla.org/bug-mgmt/guides/bug-types.html).

| Type | Description |
| --- | --- |
| **defect** | regression, crash, hang, security vulnerability and any other general issue. |
| **enhancement** | new feature, improvement in UI, performance, etc. and any other request for user-facing changes and enhancements in the product; not engineering changes |
| **task** | refactoring, removal, replacement, enabling or disabling of functionality and any other engineering task |

URL
Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen.Version
The version field defines the version of the software the bug was found in.Votes
Some bugs can be voted for, and you can limit your search to bugs with more than a certain number of votes. Votes are not used by Mozilla developers to set priorities.Whiteboard
Each bug has a free-form single line text entry box for adding tags and status information

Retrieved from "<https://wiki.mozilla.org/index.php?title=BMO/UserGuide/BugFields&oldid=1250790>"

## Navigation menu

### Personal tools

* [Log in](/index.php?title=Special:UserLogin&returnto=BMO%2FUserGuide%2FBugFields "You are encouraged to log in; however, it is not mandatory [o]")
* [Request account](/Special%3ARequestAccount "You are encouraged to create an account and log in; however, it is not mandatory")

### Namespaces

* [Page](/BMO/UserGuide/BugFields "View the content page [c]")
* [Discussion](/index.php?title=Talk:BMO/UserGuide/BugFields&action=edit&redlink=1 "Discussion about the content page (page does not exist) [t]")

English

### Views

* [Read](/BMO/UserGuide/BugFields)
* [View source](/index.php?title=BMO/UserGuide/BugFields&action=edit "This page is protected.
  You can view its source [e]")
* [View history](/index.php?title=BMO/UserGuide/BugFields&action=history "Past revisions of this page [h]")

More

### Search

### Navigation

* [Main page](/Main_Page "Visit the main page [z]")
* [Product releases](/Releases)
* [New pages](/Special%3ANewPages)
* [Recent changes](/Special%3ARecentChanges "A list of recent changes in the wiki [r]")
* [Recent uploads](/Special%3ANewFiles)
* [Random page](/Special%3ARandom "Load a random page [x]")
* [Help](/MozillaWiki%3AHelp "The place to find out")

### How to Contribute

* [All-hands meeting](/WeeklyUpdates)
* [Other meetings](/Community_Calendar)
* [Contribute to Mozilla](/Contribute)
* [Community Portal](//community.mozilla.org)
* [Community Participation Guidelines](//www.mozilla.org/en-US/about/governance/policies/participation/)

### MozillaWiki

* [About](/MozillaWiki%3AAbout)
* [Team](/MozillaWiki%3ATeam)
* [Policies](/MozillaWiki%3APolicies)
* [Report a wiki bug](//bugzilla.mozilla.org/enter_bug.cgi?product=Websites&component=wiki.mozilla.org)

### Around Mozilla

* [Mozilla Support](//support.mozilla.org/)
* [Mozilla Developer Network](//developer.mozilla.org/)
* [Planet Mozilla](//planet.mozilla.org/)
* [Mozilla Blog](//blog.mozilla.org/)
* [Research](//www.mozilla.org/research/)

### Tools

* [What links here](/Special%3AWhatLinksHere/BMO/UserGuide/BugFields "A list of all wiki pages that link here [j]")
* [Related changes](/Special%3ARecentChangesLinked/BMO/UserGuide/BugFields "Recent changes in pages linked from this page [k]")
* [Special pages](/Special%3ASpecialPages "A list of all special pages [q]")
* Printable version
* [Permanent link](/index.php?title=BMO/UserGuide/BugFields&oldid=1250790 "Permanent link to this revision of this page")
* [Page information](/index.php?title=BMO/UserGuide/BugFields&action=info "More information about this page")

* This page was last edited on 14 May 2024, at 14:22.

* [Privacy policy](/MozillaWiki%3APrivacy_policy)
* [About MozillaWiki](/MozillaWiki%3AAbout)
* [Mobile view](https://wiki.mozilla.org/index.php?title=BMO/UserGuide/BugFields&mobileaction=toggle_view_mobile)

* [![Powered by MediaWiki](/resources/assets/poweredby_mediawiki_88x31.png)](https://www.mediawiki.org/)


