=== Content from wiki.mozilla.org_ef8238f3_20250126_043925.html ===


# BMO/UserGuide/Whiteboard

From MozillaWiki
< [BMO](/BMO "BMO")‎ | [UserGuide](/BMO/UserGuide "BMO/UserGuide")

[Jump to navigation](#mw-head)
[Jump to search](#searchInput)

Each bug has a free-form single line text entry box for adding tags and status information. This wiki page is dedicated to collect a comprehensive list of whiteboard tags used in the Mozilla project.

## Contents

* [1 Whiteboard considered harmful](#Whiteboard_considered_harmful)
* [2 Contributor mentoring](#Contributor_mentoring)
* [3 Automated Testing](#Automated_Testing)
* [4 Autonag](#Autonag)
* [5 Release Engineering](#Release_Engineering)
* [6 Sheriffing](#Sheriffing)
* [7 Firefox](#Firefox)
* [8 Community reported bugs](#Community_reported_bugs)
* [9 Firefox OS](#Firefox_OS)
* [10 Tor](#Tor)
* [11 Web Compatibility](#Web_Compatibility)
* [12 Scrum Development](#Scrum_Development)
* [13 What does this whiteboard keyword mean?](#What_does_this_whiteboard_keyword_mean?)
## Whiteboard considered harmful

It is recommended that you request alternative metadata instead of using whiteboard tagging.

* Updating whiteboards tags through the API is non-trivial
* There is no global auto-suggest for whiteboard tags
* There is no verification of whiteboard tags; typos will not be caught and prevented
* Renaming a whiteboard tag requires writing a script to update every bug with that tag, changing its last modified timestamp and generating bugmail; other solutions involve a simple change by administrators
* Whiteboard tags cannot be disabled; people might continue to provide them after they are no longer relevant thinking they still apply
* If desired it's possible to restrict who can set flags to particular values; it will never be possible to prevent accidental or other changes to the whiteboard from any user with editbugs or the bug's reporter

Consider using a keyword, a flag, or a status flag. You can request this on [Bugzilla](https://bugzilla.mozilla.org/enter_bug.cgi?product=bugzilla.mozilla.org&component=Administration).

## Contributor mentoring

For more information, see [Mentors](/Mentors "Mentors").

* `[lang=]`: The programming language involved for this bug.
* `[mentor-lang=]`: (human/natural) language other than English the mentor will be able to communicate to the contributor with.

## Automated Testing

* `[test disabled]`: Indicates an automated test has been disabled. Typically used in bugs filed for intermittent test failures, to indicate that the absence of new failures in the bug is due to the test being disabled - as well as remind module owners that the test needs fixing and re-enabling.

## Autonag

`[no-nag]`: Indicates that a bug should not be modified or commented in by our [Autonag](/Release_Management/autonag "Release Management/autonag") scripts.

## Release Engineering

* `[capacity]`: This bug will help increase (or free up) capacity for our automated build & test machines.

## Sheriffing

* `[leave open]`: This has [been deprecated](https://groups.google.com/forum/#!topic/mozilla.dev.platform/Ie9OXcWbTSs) in favour of the 'leave-open' keyword. Used to ensure that the bug updating tool mcMerge does not close the bug when commits referencing it are merged into mozilla-central.
* `[retriggered]`: Used by sheriffs when investigating Fresh Oranges [[1]](https://charts.mozilla.org/FreshOranges/index.html) to find where a failure started from, using backfills and retriggers

## Firefox

* `dupeme`, `dupme`, or `DUPEME`: we're pretty sure this bug report is a duplicate of another bug, but cannot recall which one or cannot find it.
* `[qa-]`: QE (Quality Engineering) verification not required - superseded by the qe-verify flag.
* `[adv-mainNN+]` (where `NN` is some number): a security advisory about this bug for the release `NN` will be (has been) written.
* `[MemShrink]`: [a project](/Performance/MemShrink "Performance/MemShrink") to reduce memory consumption.

## Community reported bugs

* `[nightly-community]`: This bug was reported by a member of the Firefox Nightly community. Used to triage community-reported bugs and measure the impact of our core community on product quality.
* `[mozfr-community]`: This bug was reported by a member of the MozFR French-speaking community. Used to evaluate the impact of the mozfr.org community on product quality.

## Firefox OS

[Template:Note: This project is no longer active, but we leave these definitions for bug tracker historian purposes](/index.php?title=Template:Note:_This_project_is_no_longer_active,_but_we_leave_these_definitions_for_bug_tracker_historian_purposes&action=edit&redlink=1 "Template:Note: This project is no longer active, but we leave these definitions for bug tracker historian purposes (page does not exist)")

* `[POVB]`: Part of vendor build; the fix of this bug is not in the Mozilla codebase, but it's in our interest to track it.
* `[priority]`: Indicates we are asked by a partner to address this issue with priority.
* `[tarako_only]`: Special pref or feature that only lands on branch for Tarako (low memory phone), i.e. 1.3T branch of Gaia and Gecko. To be picked up on future releases.
* `[p=]/[u=]/[c=]/[s=]`: See [Scrum Development](/BMO/Whiteboard#Scrum_Development "BMO/Whiteboard"). Firefox OS uses the u= tag as the milestone instead, see [Firefox OS Performance Triage](/FirefoxOS/Performance/Triage#Scrumbugs_Tags "FirefoxOS/Performance/Triage")
* `[ft:<name of the team>]`, `[systemsfe]`, etc: Bugs identified to be owned by a "functional team" within B2G engineering. Each team owns a specific set of Bugzilla components, and tags are used to denote owned bugs outside of these components.

## Tor

* `[tor ###]` Part of the [Tor uplift project](/Security/Tor_Uplift/Tracking "Security/Tor Uplift/Tracking"). For example, `[tor 16620]` indicates a corresponding ticket at <https://trac.torproject.org/16620>. See also <https://torpat.ch/uplift>

## Web Compatibility

[Our whiteboard keywords](/Compatibility/BugsGuide "Compatibility/BugsGuide") are already described.

## Scrum Development

The following flags are used by tools like [scrumbu.gs](https://scrumbu.gs/help/) for managing sprints using the scrum development framework:

* `[p=]`: A rough estimate from engineer on how long the bug is going to take.
* `[u=]`: The user (in the scrum sense) that this story affects
* `[c=]`: The component (in the scrum sense) that this story affects
* `[s=]`: An explicit sprint slug this bug should belong to.

If you are not managing a product, you probably don't have to set these.

## What does this whiteboard keyword mean?

If you know what one of the following whiteboard keywords means, please describe it and put it into one of the above categories above (or create a new one):

* `[2.0-FL-bug-bash]` (example: <https://bugzilla.mozilla.org/show_bug.cgi?id=1021384>)
* `[games]` (example: <https://bugzilla.mozilla.org/show_bug.cgi?id=1017892>)
* `[reserve-photon-structure]` ([examples](https://bugzilla.mozilla.org/buglist.cgi?list_id=14108939&status_whiteboard_type=substring&status_whiteboard=%5Breserve-photon-structure%5D&order=Bug%20Number&query_format=advanced))
* `[TCP]` (example: <https://bugzilla.mozilla.org/show_bug.cgi?id=920036>)
  + my guess: Tablet Contribution Program?

Retrieved from "<https://wiki.mozilla.org/index.php?title=BMO/UserGuide/Whiteboard&oldid=1245932>"

## Navigation menu

### Personal tools

* [Log in](/index.php?title=Special:UserLogin&returnto=BMO%2FUserGuide%2FWhiteboard "You are encouraged to log in; however, it is not mandatory [o]")
* [Request account](/Special%3ARequestAccount "You are encouraged to create an account and log in; however, it is not mandatory")

### Namespaces

* [Page](/BMO/UserGuide/Whiteboard "View the content page [c]")
* [Discussion](/index.php?title=Talk:BMO/UserGuide/Whiteboard&action=edit&redlink=1 "Discussion about the content page (page does not exist) [t]")

English

### Views

* [Read](/BMO/UserGuide/Whiteboard)
* [View source](/index.php?title=BMO/UserGuide/Whiteboard&action=edit "This page is protected.
  You can view its source [e]")
* [View history](/index.php?title=BMO/UserGuide/Whiteboard&action=history "Past revisions of this page [h]")

More

### Search

### Navigation

* [Main page](/Main_Page "Visit the main page [z]")
* [Product releases](/Releases)
* [New pages](/Special%3ANewPages)
* [Recent changes](/Special%3ARecentChanges "A list of recent changes in the wiki [r]")
* [Recent uploads](/Special%3ANewFiles)
* [Random page](/Special%3ARandom "Load a random page [x]")
* [Help](/MozillaWiki%3AHelp "The place to find out")

### How to Contribute

* [All-hands meeting](/WeeklyUpdates)
* [Other meetings](/Community_Calendar)
* [Contribute to Mozilla](/Contribute)
* [Community Portal](//community.mozilla.org)
* [Community Participation Guidelines](//www.mozilla.org/en-US/about/governance/policies/participation/)

### MozillaWiki

* [About](/MozillaWiki%3AAbout)
* [Team](/MozillaWiki%3ATeam)
* [Policies](/MozillaWiki%3APolicies)
* [Report a wiki bug](//bugzilla.mozilla.org/enter_bug.cgi?product=Websites&component=wiki.mozilla.org)

### Around Mozilla

* [Mozilla Support](//support.mozilla.org/)
* [Mozilla Developer Network](//developer.mozilla.org/)
* [Planet Mozilla](//planet.mozilla.org/)
* [Mozilla Blog](//blog.mozilla.org/)
* [Research](//www.mozilla.org/research/)

### Tools

* [What links here](/Special%3AWhatLinksHere/BMO/UserGuide/Whiteboard "A list of all wiki pages that link here [j]")
* [Related changes](/Special%3ARecentChangesLinked/BMO/UserGuide/Whiteboard "Recent changes in pages linked from this page [k]")
* [Special pages](/Special%3ASpecialPages "A list of all special pages [q]")
* Printable version
* [Permanent link](/index.php?title=BMO/UserGuide/Whiteboard&oldid=1245932 "Permanent link to this revision of this page")
* [Page information](/index.php?title=BMO/UserGuide/Whiteboard&action=info "More information about this page")

* This page was last edited on 27 March 2023, at 15:08.

* [Privacy policy](/MozillaWiki%3APrivacy_policy)
* [About MozillaWiki](/MozillaWiki%3AAbout)
* [Mobile view](https://wiki.mozilla.org/index.php?title=BMO/UserGuide/Whiteboard&mobileaction=toggle_view_mobile)

* [![Powered by MediaWiki](/resources/assets/poweredby_mediawiki_88x31.png)](https://www.mediawiki.org/)



=== Content from www.mozilla.org_087ffa14_20250125_000024.html ===


## Help us improve your Mozilla experience

In addition to Cookies necessary for this site to function, we’d like your permission to set some additional Cookies to better understand your browsing needs and improve your experience. Rest assured — we value your privacy.

Accept All Additional Cookies

Reject All Additional Cookies

[Cookie settings](/en-US/privacy/websites/cookie-settings/)

Menu
[![Mozilla](https://www.mozilla.org/media/img/logos/m24/lockup-black.f2ddba3f0724.svg)](/en-US/)

* [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
  Firefox browsers](/en-US/firefox/)
  Close Firefox browsers menu
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
    ## Firefox for Desktop](/en-US/firefox/new/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
    ## Firefox for iOS](/en-US/firefox/browsers/mobile/ios/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
    ## Firefox for Android](/en-US/firefox/browsers/mobile/android/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/focus/logo.aac3e33175cb.svg)
    ## Firefox Focus](/en-US/firefox/browsers/mobile/focus/)
  + [## Firefox blog](https://blog.mozilla.org/firefox/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=firefox)
* [Products](/en-US/products/)
  Close Products menu
  + [![](https://www.mozilla.org/media/protocol/img/logos/mozilla/vpn/logo.c648f487bfb8.svg)
    ## Mozilla VPN](/en-US/products/vpn/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/monitor/logo.d97e5516f9e6.svg)
    ## Mozilla Monitor](https://monitor.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/relay/logo-white.d42a8b52e44c.svg)
    ## Firefox Relay](https://relay.firefox.com/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/protocol/img/logos/pocket/logo.17446bc33a5d.svg)
    ## Pocket](https://getpocket.com/firefox_learnmore/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/img/nav/icons/icon-mdn-plus.f54475f980ab.svg)
    ## MDN Plus](https://developer.mozilla.org/plus?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/img/logos/fakespot/logo-blue.3973b8fe9631.svg)
    ## Fakespot](https://fakespot.com/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/img/logos/thunderbird/logo-thunderbird.121e9c0fed45.svg)
    ## Thunderbird](https://www.thunderbird.net/)

  [All products](/en-US/products/)
* [About us](/en-US/about/)
  Close About us menu

  Our Mission

  + [## About Mozilla](/en-US/about/)
  + [## The Mozilla Manifesto](/en-US/about/manifesto/)
  + [## Get Involved](/en-US/contribute/)
  + [## Innovation Projects](https://future.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [## Blog](https://blog.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)

  Our Work

  + [## Mozilla Foundation](https://foundation.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [## Mozilla.ai](https://www.mozilla.ai/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [## Mozilla Ventures](https://mozilla.vc/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [## Mozilla Advertising](/en-US/advertising/)

## Menu

* Mozilla Security

## [Mozilla Security](/en-US/security/)

* [Advisories](/en-US/security/advisories/)
* [Known Vulnerabilities](/en-US/security/known-vulnerabilities/)
* [Mozilla Security Blog](https://blog.mozilla.com/security/)
* [Security Bug Bounty](/en-US/security/bug-bounty/)
* [Third-party Injection Policy](/en-US/security/third-party-software-injection/)

## [Client Bug Bounty](/en-US/security/client-bug-bounty/)

* [Frequently Asked Questions](/en-US/security/bug-bounty/faq/)
* [Hall of Fame](/en-US/security/bug-bounty/hall-of-fame/)

## [Web Bug Bounty](/en-US/security/web-bug-bounty/)

* [Eligible Websites](/en-US/security/bug-bounty/web-eligible-sites/)
* [Frequently Asked Questions](/en-US/security/bug-bounty/faq-webapp/)
* [Hall of Fame](/en-US/security/bug-bounty/web-hall-of-fame/)

# Mozilla Foundation Security Advisory 2017-05

## Security vulnerabilities fixed in Firefox 52

Announced
March 7, 2017
Impact
critical
Products
Firefox
Fixed in

* Firefox 52

#### [#CVE-2017-5400: asm.js JIT-spray bypass of ASLR and DEP](#CVE-2017-5400)

Reporter
Rh0
Impact
critical
##### Description

JIT-spray targeting asm.js combined with a heap spray allows for a bypass of ASLR and DEP protections leading to potential memory corruption attacks.

##### References

* [Bug 1334933](https://bugzilla.mozilla.org/show_bug.cgi?id=1334933)

#### [#CVE-2017-5401: Memory Corruption when handling ErrorResult](#CVE-2017-5401)

Reporter
Anton Eliasson
Impact
critical
##### Description

A crash triggerable by web content in which an `ErrorResult` references unassigned memory due to a logic error. The resulting crash may be exploitable.

##### References

* [Bug 1328861](https://bugzilla.mozilla.org/show_bug.cgi?id=1328861)

#### [#CVE-2017-5402: Use-after-free working with events in FontFace objects](#CVE-2017-5402)

Reporter
Nils
Impact
critical
##### Description

A use-after-free can occur when events are fired for a `FontFace` object after the object has been already been destroyed while working with fonts. This results in a potentially exploitable crash.

##### References

* [Bug 1334876](https://bugzilla.mozilla.org/show_bug.cgi?id=1334876)

#### [#CVE-2017-5403: Use-after-free using addRange to add range to an incorrect root object](#CVE-2017-5403)

Reporter
Nils
Impact
critical
##### Description

When adding a range to an object in the DOM, it is possible to use `addRange` to add the range to an incorrect root object. This triggers a use-after-free, resulting in a potentially exploitable crash.

##### References

* [Bug 1340186](https://bugzilla.mozilla.org/show_bug.cgi?id=1340186)

#### [#CVE-2017-5404: Use-after-free working with ranges in selections](#CVE-2017-5404)

Reporter
Ivan Fratric of Google Project Zero
Impact
critical
##### Description

A use-after-free error can occur when manipulating ranges in selections with one node inside a native anonymous tree and one node outside of it. This results in a potentially exploitable crash.

##### References

* [Bug 1340138](https://bugzilla.mozilla.org/show_bug.cgi?id=1340138)

#### [#CVE-2017-5406: Segmentation fault in Skia with canvas operations](#CVE-2017-5406)

Reporter
Atte Kettunen
Impact
high
##### Description

A segmentation fault can occur in the Skia graphics library during some canvas operations due to issues with mask/clip intersection and empty masks.

##### References

* [Bug 1306890](https://bugzilla.mozilla.org/show_bug.cgi?id=1306890)

#### [#CVE-2017-5407: Pixel and history stealing via floating-point timing side channel with SVG filters](#CVE-2017-5407)

Reporter
David Kohlbrenner
Impact
high
##### Description

Using SVG filters that don't use the fixed point math implementation on a target iframe, a malicious page can extract pixel values from a targeted user. This can be used to extract history information and read text values across domains. This violates same-origin policy and leads to information disclosure.

##### References

* [Bug 1336622](https://bugzilla.mozilla.org/show_bug.cgi?id=1336622)

#### [#CVE-2017-5410: Memory corruption during JavaScript garbage collection incremental sweeping](#CVE-2017-5410)

Reporter
Jerri Rice
Impact
high
##### Description

Memory corruption resulting in a potentially exploitable crash during garbage collection of JavaScript due errors in how incremental sweeping is managed for memory cleanup.

##### References

* [Bug 1330687](https://bugzilla.mozilla.org/show_bug.cgi?id=1330687)

#### [#CVE-2017-5411: Use-after-free in Buffer Storage in libGLES](#CVE-2017-5411)

Reporter
Looben Yang
Impact
high
##### Description

A use-after-free can occur during buffer storage operations within the ANGLE graphics library, used for WebGL content. The buffer storage can be freed while still in use in some circumstances, leading to a potentially exploitable crash.
*Note: This issue is in `libGLES`, which is only in use on Windows. Other operating systems are not affected.*

##### References

* [Bug 1325511](https://bugzilla.mozilla.org/show_bug.cgi?id=1325511)

#### [#CVE-2017-5409: File deletion via callback parameter in Mozilla Windows Updater and Maintenance Service](#CVE-2017-5409)

Reporter
Holger Fuhrmannek
Impact
moderate
##### Description

The Mozilla Windows updater can be called by a non-privileged user to delete an arbitrary local file by passing a special path to the callback parameter through the Mozilla Maintenance Service, which has privileged access.
*Note: This attack requires local system access and only affects Windows. Other operating systems are not affected.*

##### References

* [Bug 1321814](https://bugzilla.mozilla.org/show_bug.cgi?id=1321814)

#### [#CVE-2017-5408: Cross-origin reading of video captions in violation of CORS](#CVE-2017-5408)

Reporter
Eric Lawrence of Chrome Security
Impact
moderate
##### Description

Video files loaded video captions cross-origin without checking for the presence of CORS headers permitting such cross-origin use, leading to potential information disclosure for video captions.

##### References

* [Bug 1313711](https://bugzilla.mozilla.org/show_bug.cgi?id=1313711)

#### [#CVE-2017-5412: Buffer overflow read in SVG filters](#CVE-2017-5412)

Reporter
Atte Kettunen
Impact
moderate
##### Description

A buffer overflow read during SVG filter color value operations, resulting in data exposure.

##### References

* [Bug 1328323](https://bugzilla.mozilla.org/show_bug.cgi?id=1328323)

#### [#CVE-2017-5413: Segmentation fault during bidirectional operations](#CVE-2017-5413)

Reporter
Atte Kettunen
Impact
moderate
##### Description

A segmentation fault can occur during some bidirectional layout operations.

##### References

* [Bug 1337504](https://bugzilla.mozilla.org/show_bug.cgi?id=1337504)

#### [#CVE-2017-5414: File picker can choose incorrect default directory](#CVE-2017-5414)

Reporter
Abdulrahman Alqabandi
Impact
moderate
##### Description

The file picker dialog can choose and display the wrong local default directory when instantiated. On some operating systems, this can lead to information disclosure, such as the operating system or the local account name.

##### References

* [Bug 1319370](https://bugzilla.mozilla.org/show_bug.cgi?id=1319370)

#### [#CVE-2017-5415: Addressbar spoofing through blob URL](#CVE-2017-5415)

Reporter
Abdulrahman Alqabandi
Impact
moderate
##### Description

An attack can use a blob URL and script to spoof an arbitrary addressbar URL prefaced by `blob:` as the protocol, leading to user confusion and further spoofing attacks.

##### References

* [Bug 1321719](https://bugzilla.mozilla.org/show_bug.cgi?id=1321719)

#### [#CVE-2017-5416: Null dereference crash in HttpChannel](#CVE-2017-5416)

Reporter
Radek 'sysKin' Czyz
Impact
moderate
##### Description

In certain circumstances a networking event listener can be prematurely released. This appears to result in a null dereference in practice.

##### References

* [Bug 1328121](https://bugzilla.mozilla.org/show_bug.cgi?id=1328121)

#### [#CVE-2017-5417: Addressbar spoofing by draging and dropping URLs](#CVE-2017-5417)

Reporter
Michal Zalewski
Impact
moderate
##### Description

When dragging content from the primary browser pane to the addressbar on a malicious site, it is possible to change the addressbar so that the displayed location following navigation does not match the URL of the newly loaded page. This allows for spoofing attacks.

##### References

* [Bug 791597](https://bugzilla.mozilla.org/show_bug.cgi?id=791597)

#### [#CVE-2017-5425: Overly permissive Gecko Media Plugin sandbox regular expression access](#CVE-2017-5425)

Reporter
Haik Aftandilian
Impact
moderate
##### Description

The Gecko Media Plugin sandbox allows access to local files that match specific regular expressions. On OS OX, this matching allows access to some data in subdirectories of `/private/var` that could expose personal or temporary data. This has been updated to not allow access to `/private/var` and its subdirectories.
*Note: this issue only affects OS X. Other operating systems are not affected.*

##### References

* [Bug 1322716](https://bugzilla.mozilla.org/show_bug.cgi?id=1322716)

#### [#CVE-2017-5426: Gecko Media Plugin sandbox is not started if seccomp-bpf filter is running](#CVE-2017-5426)

Reporter
Jed Davis
Impact
moderate
##### Description

On Linux, if the secure computing mode BPF (seccomp-bpf) filter is running when the Gecko Media Plugin sandbox is started, the sandbox fails to be applied and items that would run within the sandbox are run protected only by the running filter which is typically weak compared to the sandbox.
*Note: this issue only affects Linux. Other operating systems are not affected.*

##### References

* [Bug 1257361](https://bugzilla.mozilla.org/show_bug.cgi?id=1257361)

#### [#CVE-2017-5427: Non-existent chrome.manifest file loaded during startup](#CVE-2017-5427)

Reporter
Mike Kaply
Impact
moderate
##### Description

A non-existent chrome.manifest file will attempt to be loaded during startup from the primary installation directory. If a malicious user with local access puts chrome.manifest and other referenced files in this directory, they will be loaded and activated during startup. This could result in malicious software being added without consent or modification of referenced installed files.

##### References

* [Bug 1295542](https://bugzilla.mozilla.org/show_bug.cgi?id=1295542)

#### [#CVE-2017-5418: Out of bounds read when parsing HTTP digest authorization responses](#CVE-2017-5418)

Reporter
Anonymous
Impact
low
##### Description

An out of bounds read error occurs when parsing some HTTP digest authorization responses, resulting in information leakage through the reading of random memory containing matches to specifically set patterns.

##### References

* [Bug 1338876](https://bugzilla.mozilla.org/show_bug.cgi?id=1338876)

#### [#CVE-2017-5419: Repeated authentication prompts lead to DOS attack](#CVE-2017-5419)

Reporter
Chris Hamono
Impact
low
##### Description

If a malicious site repeatedly triggers a modal authentication prompt, eventually the browser UI will become non-responsive, requiring shutdown through the operating system. This is a denial of service (DOS) attack.

##### References

* [Bug 1312243](https://bugzilla.mozilla.org/show_bug.cgi?id=1312243)

#### [#CVE-2017-5420: Javascript: URLs can obfuscate addressbar location](#CVE-2017-5420)

Reporter
Abdulrahman Alqabandi
Impact
low
##### Description

A `javascript:` url loaded by a malicious page can obfuscate its location by blanking the URL displayed in the addressbar, allowing for an attacker to spoof an existing page without the malicious page's address being displayed correctly.

##### References

* [Bug 1284395](https://bugzilla.mozilla.org/show_bug.cgi?id=1284395)

#### [#CVE-2017-5405: FTP response codes can cause use of uninitialized values for ports](#CVE-2017-5405)

Reporter
Anonymous
Impact
low
##### Description

Certain response codes in FTP connections can result in the use of uninitialized values for ports in FTP operations.

##### References

* [Bug 1336699](https://bugzilla.mozilla.org/show_bug.cgi?id=1336699)

#### [#CVE-2017-5421: Print preview spoofing](#CVE-2017-5421)

Reporter
Abdulrahman Alqabandi
Impact
low
##### Description

A malicious site could spoof the contents of the print preview window if popup windows are enabled, resulting in user confusion of what site is currently loaded.

##### References

* [Bug 1301876](https://bugzilla.mozilla.org/show_bug.cgi?id=1301876)

#### [#CVE-2017-5422: DOS attack by using view-source: protocol repeatedly in one hyperlink](#CVE-2017-5422)

Reporter
Alex Bolton
Impact
low
##### Description

If a malicious site uses the `view-source:` protocol in a series within a single hyperlink, it can trigger a non-exploitable browser crash when the hyperlink is selected. This was fixed by no longer making `view-source:` linkable.

##### References

* [Bug 1295002](https://bugzilla.mozilla.org/show_bug.cgi?id=1295002)

#### [#CVE-2017-5399: Memory safety bugs fixed in Firefox 52](#CVE-2017-5399)

Reporter
Mozilla developers and community
Impact
critical
##### Description

Mozilla developers and community members Carsten Book, Calixte Denizet, Christian Holler, Andrew McCreight, David Bolter, David Keeler, Jon Coppeard, Tyson Smith, Ronald Crane, Tooru Fujisawa, Ben Kelly, Bob Owen, Jed Davis, Julian Seward, Julian Hector, Philipp, Markus Stange, and André Bargull reported memory safety bugs present in Firefox 51. Some of these bugs showed evidence of memory corruption and we presume that with enough effort that some of these could be exploited to run arbitrary code.

##### References

* [Memory safety bugs fixed in Firefox 52](https://bugzilla.mozilla.org/buglist.cgi?bug_id=1332569%2C1315248%2C1261335%2C1321038%2C1331771%2C1339566%2C1339591%2C1240893%2C1341905%2C1323241%2C1336467%2C1270288%2C1295299%2C1296024%2C1304201%2C1306142%2C1307557%2C1308036%2C1334246%2C1334290%2C1317085%2C1339116%2C1324000%2C1323150%2C1332501%2C1320894%2C1333752%2C1303713%2C1321566%2C1264053%2C1343513)

#### [#CVE-2017-5398: Memory safety bugs fixed in Firefox 52 and Firefox ESR 45.8](#CVE-2017-5398)

Reporter
Mozilla developers and community
Impact
critical
##### Description

Mozilla developers and community members Boris Zbarsky, Christian Holler, Honza Bambas, Jon Coppeard, Randell Jesup, André Bargull, Kan-Ru Chen, and Nathan Froyd reported memory safety bugs present in Firefox 51 and Firefox ESR 45.7. Some of these bugs showed evidence of memory corruption and we presume that with enough effort that some of these could be exploited to run arbitrary code.

##### References

* [Memory safety bugs fixed in Firefox 52 and Firefox ESR 45.8](https://bugzilla.mozilla.org/buglist.cgi?bug_id=1332550%2C1332597%2C1338383%2C1321612%2C1322971%2C1333568%2C1333887%2C1335450%2C1325052%2C1324379%2C1336510)

## Company

* [Leadership](/about/leadership/)
* [Press Center](https://blog.mozilla.org/category/mozilla/news/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=company)
* [Careers](/en-US/careers/)
* [Contact](/en-US/contact/)

## Support

* [Product Help](https://support.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=support)
* [File a Bug](https://bugzilla.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=support)
* [Localize Mozilla](https://pontoon.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=support)

## Resources

* [Advertise with Mozilla](/en-US/advertising/)
* [Firefox Release Notes](/firefox/134.0.2/releasenotes/)

## Developers

* [Developer Edition](/en-US/firefox/developer/)
* [Enterprise](/en-US/firefox/enterprise/)
* [Tools](https://firefox-source-docs.mozilla.org/devtools-user/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=developers)
* [MDN](https://developer.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer)

## Follow @Mozilla

* [X (formerly Twitter) (@mozilla)](https://twitter.com/mozilla)
* [Instagram (@mozilla)](https://www.instagram.com/mozilla/)
* [LinkedIn (@mozilla)](https://www.linkedin.com/company/mozilla-corporation/)
* [TikTok (@mozilla)](https://www.tiktok.com/%40mozilla)
* [Spotify (@mozilla)](https://open.spotify.com/show/0vT7LJMeVDxyQ2ZamHKu08?si=_uDRD6bRR_6M5YZyISGXgA)

## Follow @Firefox

* [X (formerly Twitter) (@firefox)](https://twitter.com/firefox)
* [Instagram (@firefox)](https://www.instagram.com/firefox/)
* [YouTube (@firefoxchannel)](https://www.youtube.com/user/firefoxchannel)
* [TikTok (@firefox)](https://www.tiktok.com/%40firefox)

[Donate](https://foundation.mozilla.org/?form=moco-donate-footer)

Visit [Mozilla Corporation’s](/en-US/) not-for-profit parent, the [Mozilla Foundation](https://foundation.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer).

Portions of this content are ©1998–2025 by individual mozilla.org contributors. Content available under a [Creative Commons license](/en-US/foundation/licensing/website-content/).

* [Website Privacy Notice](/en-US/privacy/websites/)
* [Cookies](/en-US/privacy/websites/cookie-settings/)
* [Legal](/en-US/about/legal/)
* [Community Participation Guidelines](/en-US/about/governance/policies/participation/)
* [About this site](/en-US/about/this-site/)

![](https://www.mozilla.org/media/img/logos/m24/wordmark-white.2d673bb5b33a.svg)



=== Content from wiki.mozilla.org_73f8d6fa_20250126_043925.html ===


# BMO/UserGuide/BugFields

From MozillaWiki
< [BMO](/BMO "BMO")‎ | [UserGuide](/BMO/UserGuide "BMO/UserGuide")

[Jump to navigation](#mw-head)
[Jump to search](#searchInput)
## Bugzilla Field Descriptions

Alias
A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla.Assignee
This is the person in charge of resolving the bug. Every time this field changes, the status changes to NEW to make it easy to see which new bugs have appeared on a person's list.Blocks
This bug must be resolved before the bugs listed in this field can be resolved.Bug ID
The numeric id of a bug, unique within this entire installation of Bugzilla.CC
Users who may not have a direct role to play on this bug, but who are interested in its progress.Changed
When this bug was last updated.Classification
Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorization.Comment
Bugs have comments added to them by Bugzilla users. You can search for some text in those comments.Comment Tag
Comments can have arbitrary tags added to them to help with filtering as well as mark comments as spam or abusive.Component
Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list.Creation date
When the bug was filed.Depends on
The bugs listed here must be resolved before this bug can be resolved.Duplicates
List of bugs that have been marked a duplicate of the bug currently being viewed.Keywords
Keywords are a controlled vocabulary for characterizing bugs across Products and Components. Examples of this field are `regression`, `sec-high`, and `topcrash`. Bugzilla administrators manage [the list of keywords](https://bugzilla.mozilla.org/describekeywords.cgi). If you believe you need a new keyword, [please contact the administrators to discuss](https://bugzilla.mozilla.org/enter_bug.cgi?product=bugzilla.mozilla.org&component=Administration).Mentors
Mentors are users who have offered to help the bug owner with such tasks as setting up a development environment, finding relevant information to fixing the bug, how to submit a patch for review, and finally how to get the fix committed.Needinfo
More information has been requested from specific individuals, or anyone, to move the bug forward to completion.OS
This is the operating system against which the bug was reported.Platform
This is the hardware platform against which the bug was reported (ARM, ARM64, x86, x86\_64, etc).Priority

| Priority | Description |
| --- | --- |
| **--** | No decision |
| **P1** | Fix in the current release cycle |
| **P2** | Fix in the next release cycle or the following (nightly + 1 or nightly + 2) |
| **P3** | Backlog |
| **P4** | Do not use. This priority is for the Web Platform Test bot. |
| **P5** | Will not fix, but will accept a patch |

This field describes the importance and order in which a bug should be fixed compared to other bugs. This field is utilized by the programmers/engineers/release managers/managers to prioritize the work to be done. See the Firefox [triage documentation](https://firefox-source-docs.mozilla.org/bug-mgmt/policies/triage-bugzilla.html) and [priority definitions](https://firefox-source-docs.mozilla.org/bug-mgmt/guides/priority.html), or for the main Bugzilla project, [Bugzilla:Priority\_System](/Bugzilla%3APriority_System "Bugzilla:Priority System").Product
Bugs are categorised into Products and Components. Select a Classification to narrow down this list.QA Contact
The person responsible for confirming this bug if it is unconfirmed, and for verifying the fix once the bug has been resolved.Rank
Used by some groups to provide finer-grained ordering for working on bugs than afforded by the Priority field. Use of this field is restricted to the `rank-setters` group.Regressed by
This bug has been introduced by the bugs listed here.Regressions
This bug has introduced the bugs listed here.Reporter
The person who filed this bug.See Also
This allows you to refer to bugs in other bug tracker installations. You can enter a URL to a bug in the 'Add Bug URLs' field to note that that bug is related to this one. You can enter multiple URLs at once by separating them with a comma. You should normally use this field to refer to bugs in other bug tracker installations, or bugs which are related to, but not known to be duplicates of the bug. Bugs which are regressions should be listed in the Regressed by field (above)Severity
This field describes the impact of a bug. This field is utilized by the programmers/engineers/release managers/managers to determine the severity of issues and used as input for the priority of the bug. It should not be set by people filing bugs. See the Firefox [triage documentation](https://firefox-source-docs.mozilla.org/bug-mgmt/policies/triage-bugzilla.html) and [severity documentation](https://firefox-source-docs.mozilla.org/bug-mgmt/guides/severity.html).

| Severity | Description |
| --- | --- |
| **--** | Default value for new bugs; bug triagers for components (ie engineers and other core project folks) are expected to update the bug's severity from this value. To avoid them missing new bugs for triage, do not alter this default when filing bugs. |
| **S1** | (Catastrophic) Blocks development/testing, may impact more than 25% of users, causes data loss, likely dot release driver, and no workaround available |
| **S2** | (Serious) Major functionality/product severely impaired or a high impact issue and a satisfactory workaround does not exist |
| **S3** | (Normal) Blocks non-critical functionality or a work around exists |
| **S4** | (Small/Trivial) minor significance, cosmetic issues, low or no impact to users |
| **N/A** | (Not Applicable) The above definitions do not apply to this bug; this value is reserved for bugs of type Task or Enhancement |

Summary
The bug summary is a short sentence which succinctly describes what the bug is about.Target Milestone
For Firefox-related bugs, when a change set (patch) lands in Mozilla-Central, the [sheriffs](/Sheriffing "Sheriffing") will set this field to the corresponding release value for the current Nightly.
Release status and tracking flags are used to mark intentions for when a fix or other patch should land.
If you need to track a bug against a set of milestones other than upcoming versions of Firefox, please tell the Bugzilla team, you may want a custom status flag.Triage Owner
User that is responsible [for triaging bugs in a specific component](https://firefox-source-docs.mozilla.org/bug-mgmt/policies/triage-bugzilla.html).Type
This field describes the [type of a bug](https://firefox-source-docs.mozilla.org/bug-mgmt/guides/bug-types.html).

| Type | Description |
| --- | --- |
| **defect** | regression, crash, hang, security vulnerability and any other general issue. |
| **enhancement** | new feature, improvement in UI, performance, etc. and any other request for user-facing changes and enhancements in the product; not engineering changes |
| **task** | refactoring, removal, replacement, enabling or disabling of functionality and any other engineering task |

URL
Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen.Version
The version field defines the version of the software the bug was found in.Votes
Some bugs can be voted for, and you can limit your search to bugs with more than a certain number of votes. Votes are not used by Mozilla developers to set priorities.Whiteboard
Each bug has a free-form single line text entry box for adding tags and status information

Retrieved from "<https://wiki.mozilla.org/index.php?title=BMO/UserGuide/BugFields&oldid=1250790>"

## Navigation menu

### Personal tools

* [Log in](/index.php?title=Special:UserLogin&returnto=BMO%2FUserGuide%2FBugFields "You are encouraged to log in; however, it is not mandatory [o]")
* [Request account](/Special%3ARequestAccount "You are encouraged to create an account and log in; however, it is not mandatory")

### Namespaces

* [Page](/BMO/UserGuide/BugFields "View the content page [c]")
* [Discussion](/index.php?title=Talk:BMO/UserGuide/BugFields&action=edit&redlink=1 "Discussion about the content page (page does not exist) [t]")

English

### Views

* [Read](/BMO/UserGuide/BugFields)
* [View source](/index.php?title=BMO/UserGuide/BugFields&action=edit "This page is protected.
  You can view its source [e]")
* [View history](/index.php?title=BMO/UserGuide/BugFields&action=history "Past revisions of this page [h]")

More

### Search

### Navigation

* [Main page](/Main_Page "Visit the main page [z]")
* [Product releases](/Releases)
* [New pages](/Special%3ANewPages)
* [Recent changes](/Special%3ARecentChanges "A list of recent changes in the wiki [r]")
* [Recent uploads](/Special%3ANewFiles)
* [Random page](/Special%3ARandom "Load a random page [x]")
* [Help](/MozillaWiki%3AHelp "The place to find out")

### How to Contribute

* [All-hands meeting](/WeeklyUpdates)
* [Other meetings](/Community_Calendar)
* [Contribute to Mozilla](/Contribute)
* [Community Portal](//community.mozilla.org)
* [Community Participation Guidelines](//www.mozilla.org/en-US/about/governance/policies/participation/)

### MozillaWiki

* [About](/MozillaWiki%3AAbout)
* [Team](/MozillaWiki%3ATeam)
* [Policies](/MozillaWiki%3APolicies)
* [Report a wiki bug](//bugzilla.mozilla.org/enter_bug.cgi?product=Websites&component=wiki.mozilla.org)

### Around Mozilla

* [Mozilla Support](//support.mozilla.org/)
* [Mozilla Developer Network](//developer.mozilla.org/)
* [Planet Mozilla](//planet.mozilla.org/)
* [Mozilla Blog](//blog.mozilla.org/)
* [Research](//www.mozilla.org/research/)

### Tools

* [What links here](/Special%3AWhatLinksHere/BMO/UserGuide/BugFields "A list of all wiki pages that link here [j]")
* [Related changes](/Special%3ARecentChangesLinked/BMO/UserGuide/BugFields "Recent changes in pages linked from this page [k]")
* [Special pages](/Special%3ASpecialPages "A list of all special pages [q]")
* Printable version
* [Permanent link](/index.php?title=BMO/UserGuide/BugFields&oldid=1250790 "Permanent link to this revision of this page")
* [Page information](/index.php?title=BMO/UserGuide/BugFields&action=info "More information about this page")

* This page was last edited on 14 May 2024, at 14:22.

* [Privacy policy](/MozillaWiki%3APrivacy_policy)
* [About MozillaWiki](/MozillaWiki%3AAbout)
* [Mobile view](https://wiki.mozilla.org/index.php?title=BMO/UserGuide/BugFields&mobileaction=toggle_view_mobile)

* [![Powered by MediaWiki](/resources/assets/poweredby_mediawiki_88x31.png)](https://www.mediawiki.org/)



=== Content from bugzilla.mozilla.org_b207992b_20250125_000023.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summary▾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View ▾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/1295542)
* [XML](/show_bug.cgi?ctype=xml&id=1295542)

Closed
[Bug 1295542](/show_bug.cgi?id=1295542)
(CVE-2017-5427)

Opened 8 years ago
Closed 8 years ago

# Firefox tries to read a non existent chrome.manifest from install directory.

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

Firefox tries to read a non existent chrome.manifest from install directory.

## Categories

### (Toolkit :: Startup and Profile System, defect)

[Product:](/describecomponents.cgi?product=Toolkit)

Toolkit
▾

Toolkit
The Mozilla Toolkit is a set of APIs, built on top of Gecko, which provide advanced services to XUL applications. These services include Profile Management, Chrome Registration, Browsing History, Extension and Theme Management, Application Update Service, and Safe Mode. ([More info](https://wiki.mozilla.org/Modules/Toolkit))
[See Open Bugs in This Product](/buglist.cgi?product=Toolkit&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Toolkit)
Watch This Product

[Component:](/describecomponents.cgi?product=Toolkit&component=Startup%20and%20Profile%20System#Startup%20and%20Profile%20System)

Startup and Profile System
▾

Toolkit :: Startup and Profile System
New applications startup system - including shared AppRunner, AppStartup, and profile system.
[See Open Bugs in This Component](/buglist.cgi?product=Toolkit&component=Startup%20and%20Profile%20System&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Toolkit&component=Startup%20and%20Profile%20System&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Toolkit&component=Startup%20and%20Profile%20System)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

49 Branch

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

Unspecified

Unspecified

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

*Not set*

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

normal

Points:

---

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

mozilla52

Iteration:

---

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| Accessibility Severity | --- |
| --- | --- |
| Performance Impact | --- |
| Webcompat Priority | --- |
| Webcompat Score | --- |
| a11y-review | --- |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox52 | --- | [fixed](/buglist.cgi?f1=cf_status_firefox52&o1=equals&v1=fixed) |

|  | Tracking | Status |
| --- | --- | --- |
| relnote-firefox |  | --- |
| thunderbird\_esr115 | --- | --- |
| thunderbird\_esr128 | --- | --- |
| firefox52 |  | fixed |
| firefox-esr115 | --- | --- |
| firefox-esr128 | --- | --- |
| firefox134 | --- | --- |
| firefox135 | --- | --- |
| firefox136 | --- | --- |

## People

### (Reporter: mkaply, Assigned: glandium)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/5d5f37905f36ca9989f88861a702cff3?d=mm&size=40)  [glandium](/user_profile?user_id=47192)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](https://secure.gravatar.com/avatar/dc84c7d304a23e0a62a86580dd08c587?d=mm&size=40)  [mkaply](/user_profile?user_id=7313)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

![](https://secure.gravatar.com/avatar/8f56e46f0120d9477f8f320991a2196a?d=mm&size=40)  [mossop](/user_profile?user_id=91159)

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

12 people

## References

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

---

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

---

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

[1292444](/show_bug.cgi?id=1292444 "RESOLVED DUPLICATE - add-on signing override via config-prefs.js")

[1590693](/show_bug.cgi?id=1590693 "RESOLVED FIXED - Unship empty chrome.manifest filles")

## Details

### (Keywords: sec-moderate, Whiteboard: [post-critsmash-triage][adv-main52+])

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

CVE-2017-5427

[Keywords:](/describekeywords.cgi)

[sec-moderate](/buglist.cgi?keywords=sec-moderate&resolution=---)

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[post-critsmash-triage][adv-main52+]

QA Whiteboard:

---

Has STR:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

| [kjozwiak](/user_profile?user_id=455785) | [qe-verify](#a16638235_455785 "8 years ago") | - |
| --- | --- | --- |
| [kjozwiak](/user_profile?user_id=455785) | qe-verify | - |
| --- | --- | --- |
|  | behind-pref |  |
| --- | --- | --- |
|  | firefox-backlog |  |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | in-testsuite |  |

## Crash Data

Signature:

*None*

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (3 files, 3 obsolete files)

| [Remove log message](/attachment.cgi?id=8787505)  [8 years ago](#c7)  [Stephen A Pohl [:spohl]](/user_profile?user_id=456485)   1005 bytes, patch | benjamin : [review-](#c8 "8 years ago") | [Details](/attachment.cgi?id=8787505&action=edit) | [Diff](/attachment.cgi?id=8787505&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1295542&attachment=8787505) |
| --- | --- | --- |
| [Patch](/attachment.cgi?id=8788746)  [8 years ago](#c9)  [Stephen A Pohl [:spohl]](/user_profile?user_id=456485)   2.25 KB, patch | benjamin : [review+](#c10 "8 years ago")  glandium : [review-](#c11 "8 years ago") | [Details](/attachment.cgi?id=8788746&action=edit) | [Diff](/attachment.cgi?id=8788746&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1295542&attachment=8788746) |
| [Ensure at least an empty chrome.manifest next to each omnijar file](/attachment.cgi?id=8790608)  [8 years ago](#c17)  [Mike Hommey [:glandium]](/user_profile?user_id=47192)   2.39 KB, patch | gps : [review+](#a2627560_420446 "8 years ago")  benjamin : [feedback+](#a2447939_7044 "8 years ago") | [Details](/attachment.cgi?id=8790608&action=edit) | [Diff](/attachment.cgi?id=8790608&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1295542&attachment=8790608) |
| [Don't remove chrome.manifest on upgrades](/attachment.cgi?id=8791027)  [8 years ago](#c20)  [Mike Hommey [:glandium]](/user_profile?user_id=47192)   1.33 KB, patch | robert.strong.bugs : [review-](#c21 "8 years ago") | [Details](/attachment.cgi?id=8791027&action=edit) | [Diff](/attachment.cgi?id=8791027&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1295542&attachment=8791027) |
| [Don't remove chrome.manifest on upgrades](/attachment.cgi?id=8791042)  [8 years ago](#c22)  [Mike Hommey [:glandium]](/user_profile?user_id=47192)   2.71 KB, patch | robert.strong.bugs : [review+](#c23 "8 years ago") | [Details](/attachment.cgi?id=8791042&action=edit) | [Diff](/attachment.cgi?id=8791042&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1295542&attachment=8791042) |
| [patch for update packaging](/attachment.cgi?id=8791783)  [8 years ago](#c25)  [Robert Strong (they/them - no direct email)](/user_profile?user_id=141755)   2.58 KB, patch | bhearsum : [review+](#a2684736_259016 "8 years ago") | [Details](/attachment.cgi?id=8791783&action=edit) | [Diff](/attachment.cgi?id=8791783&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1295542&attachment=8791783) |

Show Obsolete

Bottom ↓
Tags ▾

* Reset

Timeline ▾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [Mike Kaply [:mkaply]](/user_profile?user_id=7313)  Reporter |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=1295542#c0)• 8 years ago |
|  | |

When you open Firefox, you'll see this message on the console:
Could not read chrome manifest 'file:///Applications/Firefox.app/Contents/Resources/chrome.manifest'.
Because of this, you can drop a chrome.manifest file and a Javascript component into the Firefox install directory and have it loaded at startup without modifying any existing files.
I've verified this on Windows.

|  | [:Gijs (he/him)](/user_profile?user_id=159069) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1295542#a4744_159069)• 8 years ago |

Component: General → Startup and Profile SystemProduct: Firefox → ToolkitSee Also: → [1292444](/show_bug.cgi?id=1292444 "RESOLVED DUPLICATE - add-on signing override via config-prefs.js")

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=1295542#c1)• 8 years ago |
|  | |

If you could drop a chrome.manifest there you could modify/replace omni.ja, correct? Although that would get overwritten at the next update and the extra chrome.manifest might not.Keywords: [sec-moderate](/buglist.cgi?keywords=sec-moderate&resolution=---)

|  | [Mike Kaply [:mkaply]](/user_profile?user_id=7313)  Reporter |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=1295542#c2)• 8 years ago |
|  | |

> If you could drop a chrome.manifest there you could modify/replace omni.ja, correct? Although that would get overwritten at the next update and the extra chrome.manifest might not.
Per Gijs, there are different permissions for adding files versus modifying/replacing files. So this would be an easier thing per say than replacing omni.ja.
I honestly don't know enough about it.Flags: needinfo?(gijskruitbosch+bugs)

|  | [:Gijs (he/him)](/user_profile?user_id=159069) |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=1295542#c3)• 8 years ago |
|  | |

(In reply to Mike Kaply [:mkaply] from [comment #2](/show_bug.cgi?id=1295542#c2 "RESOLVED FIXED - Firefox tries to read a non existent chrome.manifest from install directory."))
> > If you could drop a chrome.manifest there you could modify/replace omni.ja, correct? Although that would get overwritten at the next update and the extra chrome.manifest might not.
>
> Per Gijs, there are different permissions for adding files versus
> modifying/replacing files.
Well, there could be. I don't know what our installers and the osx dmg (and linux distros) do here. Either way, the update argument from [comment #1](/show_bug.cgi?id=1295542#c1 "RESOLVED FIXED - Firefox tries to read a non existent chrome.manifest from install directory.") still also applies.Flags: needinfo?(gijskruitbosch+bugs)

|  | [Benjamin Smedberg](/user_profile?user_id=7044) |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=1295542#c4)• 8 years ago |
|  | |

spohl, can you look into this since I don't have a mac? I remember when we did mac signing work we moved a bunch of stuff from Contents/MacOS to Contents/Resources, but if we really don't need to read this it should be easy to just stop.Flags: needinfo?(spohl.mozilla.bugs)

|  | [Mike Kaply [:mkaply]](/user_profile?user_id=7313)  Reporter |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=1295542#c5)• 8 years ago |
|  | |

This works on Windows as well (that's where I tested it). Basically we try to load a chrome.manifest from the EXE location.

|  | [Stephen A Pohl [:spohl]](/user_profile?user_id=456485) |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=1295542#c6)• 8 years ago |
|  | |

Sure, I'll take a look.
We started printing this message on 3/18/2013, but nothing jumps out at me. But this does confirm that it's unrelated to Mac v2 signing:
<http://hg.mozilla.org/mozilla-central/pushloghtml?fromchange=b03bb3ce8cee&tochange=e23e43a2c14e>
I believe that based on [1], we remove a dropped chrome.manifest during updates. So we might have the same severity as replacing omni.ja ([comment 1](/show_bug.cgi?id=1295542#c1 "RESOLVED FIXED - Firefox tries to read a non existent chrome.manifest from install directory.")) here.
[1] <https://hg.mozilla.org/mozilla-central/annotate/b7f7ae14590aced450bb0b0469dfb38edd2c0ace/browser/installer/removed-files.in#l78>Assignee: nobody → spohl.mozilla.bugsStatus: NEW → ASSIGNEDFlags: needinfo?(spohl.mozilla.bugs)

|  | [Stephen A Pohl [:spohl]](/user_profile?user_id=456485) |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=1295542#c7)• 8 years ago |
|  | |

Attached patch

[Remove log message](attachment.cgi?id=8787505&action=diff) (obsolete)
— [Details](attachment.cgi?id=8787505&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1295542&attachment=8787505)

[Bug 1063052](/show_bug.cgi?id=1063052 "VERIFIED FIXED - Firefox 32+ startup crash in nsFrame::BoxReflow") and [bug 1059567](/show_bug.cgi?id=1059567 "RESOLVED FIXED - Packaging changes for the move of removed-files file from Contents/MacOS to Contents/Resources") made it so that we remove chrome.manifest files in appDir and greDir during updates. So the risk here is equivalent to someone replacing omni.ja. Also, note that mucking with any of the contents in the Firefox.app dir on OSX will break the signature on the .app bundle.
I don't think we want to remove the ability to read chrome.manifest files from these locations directly though, since (at least on OSX) we don't build the omni.ja during local builds. It is only the |make package| step that actually creates these.
Since the security risk here is not greater than having the omni.ja replaced, the log message in the console is expected on all but local builds, and because the log message is therefore confusing, I suggest that we remove this log message (this patch). Another option is to rewrite the |else if| condition for the log message to:
> else if (aType != NS\_BOOTSTRAPPED\_LOCATION && aType != NS\_APP\_LOCATION)
or the equivalent:
> else if (aType == NS\_EXTENSION\_LOCATION || aType == NS\_SKIN\_LOCATION)
I couldn't figure out how helpful the log message is when aType is set to either NS\_EXTENSION\_LOCATION or NS\_SKIN\_LOCATION, so I'm not sure if we gain anything in keeping the log message for these.
[Attachment #8787505](/attachment.cgi?id=8787505&action=edit "Remove log message") -
Flags: review?(benjamin)

|  | [Benjamin Smedberg](/user_profile?user_id=7044) |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=1295542#c8)• 8 years ago |
|  | |

Comment on [attachment 8787505](/attachment.cgi?id=8787505 "Remove log message") [[details]](/attachment.cgi?id=8787505&action=edit "Remove log message") [[diff]](/attachment.cgi?id=8787505&action=diff "Remove log message") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1295542&attachment=8787505)
Remove log message
That doesn't solve the bug being reported here with a security flag. If we were going to take this patch, we might as well WONTFIX the bug.
If the reason we're reading chrome.manifest is for non-omnijarred builds only, can we make it so that we only read one or the other? That way file-injection attacks will fail properly.
[Attachment #8787505](/attachment.cgi?id=8787505&action=edit "Remove log message") -
Flags: review?(benjamin) → review-

|  | [Stephen A Pohl [:spohl]](/user_profile?user_id=456485) |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=1295542#c9)• 8 years ago |
|  | |

Attached patch

[Patch](attachment.cgi?id=8788746&action=diff) (obsolete)
— [Details](attachment.cgi?id=8788746&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1295542&attachment=8788746)

(In reply to Benjamin Smedberg [:bsmedberg] from [comment #8](/show_bug.cgi?id=1295542#c8 "RESOLVED FIXED - Firefox tries to read a non existent chrome.manifest from install directory."))
> That doesn't solve the bug being reported here with a security flag.
Right, since we clean out injected greDir/chrome.manifest files the same way we do with greDir/omni.ja files during updates, I don't think there is much of a security bug here.
> If we were going to take this patch, we might as well WONTFIX the bug.
This would leave us with the confusing console message, which I was trying to fix.
> If the reason we're reading chrome.manifest is for non-omnijarred builds
> only, can we make it so that we only read one or the other? That way
> file-injection attacks will fail properly.
This new patch reverses the order in which we read files in greDir, and makes one conditional on the other. We now try to read greDir's omni.ja first. If greDir's omni.ja (typically a release build) could not be found, we try to read greDir's chrome.manifest (typically a local build). And we keep the console message in place in case neither omni.ja nor chrome.manifest could be found (which is a legitimate problem to display in the console).
Note that I did not change the read order for appDir's chrome.manifest and appDir's omni.ja, since both are currently used by release builds and we don't print a confusing console message.
For reference, on OSX:
greDir: Firefox.app/Contents/Resources/
appDir: Firefox.app/Contents/Resources/browser/
[Attachment #8787505](/attachment.cgi?id=8787505&action=edit "Remove log message") -
Attachment is obsolete: true
[Attachment #8788746](/attachment.cgi?id=8788746&action=edit "Patch") -
Flags: review?(benjamin)

|  | [Benjamin Smedberg](/user_profile?user_id=7044) |  |
| --- | --- | --- |
| [Comment 10](/show_bug.cgi?id=1295542#c10)• 8 years ago |
|  | |

Comment on [attachment 8788746](/attachment.cgi?id=8788746 "Patch") [[details]](/attachment.cgi?id=8788746&action=edit "Patch") [[diff]](/attachment.cgi?id=8788746&action=diff "Patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1295542&attachment=8788746)
Patch
Mike, I think this looks righteous. Do you forsee any problems with this?
[Attachment #8788746](/attachment.cgi?id=8788746&action=edit "Patch") -
Flags: review?(mh+mozilla)
[Attachment #8788746](/attachment.cgi?id=8788746&action=edit "Patch") -
Flags: review?(benjamin)
[Attachment #8788746](/attachment.cgi?id=8788746&action=edit "Patch") -
Flags: review+

|  | [Mike Hommey [:glandium]](/user_profile?user_id=47192)  Assignee |  |
| --- | --- | --- |
| [Comment 11](/show_bug.cgi?id=1295542#c11)• 8 years ago |
|  | |

Comment on [attachment 8788746](/attachment.cgi?id=8788746 "Patch") [[details]](/attachment.cgi?id=8788746&action=edit "Patch") [[diff]](/attachment.cgi?id=8788746&action=diff "Patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1295542&attachment=8788746)
Patch
Review of [attachment 8788746](/attachment.cgi?id=8788746 "Patch") [[details]](/attachment.cgi?id=8788746&action=edit "Patch") [[diff]](/attachment.cgi?id=8788746&action=diff "Patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1295542&attachment=8788746):
-----------------------------------------------------------------
This will undoubtedly break Thunderbird and Seamonkey (and third-party gecko-based apps) because their top-level non-omni.ja chrome.manifest contains "manifest components/components.manifest", and components/components.manifest contains the registration of their binary components. (actually checking, it's only theoretical for Thunderbird, it surprisingly doesn't have binary components at the moment ; it's still true for Seamonkey)
I'll reiterate here what I suggested a long time ago: we could entirely remove the code that "manually" reads chrome.manifest from omni.ja, and add "manifest jar:omni.ja!/chrome.manifest" in the top-level chrome.manifest. That would make chrome.manifest always exist.
I probably even have half a patch somewhere for that. I can dig it out or reimplement it from scratch if we decide to go with this proposal.
[Attachment #8788746](/attachment.cgi?id=8788746&action=edit "Patch") -
Flags: review?(mh+mozilla) → review-

|  | [Stephen A Pohl [:spohl]](/user_profile?user_id=456485) |  |
| --- | --- | --- |
| [Comment 12](/show_bug.cgi?id=1295542#c12)• 8 years ago |
|  | |

So, to summarize: there is not really a security issue here (i.e. no greater than other security issues that we're willing to live with like injecting omni.ja files until an update cleans them out). We do have a confusing log message in the console.
We can either:
1. Remove the confusing log message ([comment 7](/show_bug.cgi?id=1295542#c7 "RESOLVED FIXED - Firefox tries to read a non existent chrome.manifest from install directory.")).
2. Implement the solution suggested by Mike in [comment 11](/show_bug.cgi?id=1295542#c11 "RESOLVED FIXED - Firefox tries to read a non existent chrome.manifest from install directory.").
3. Do nothing.
Benjamin, do you have a preferred path forward here?Flags: needinfo?(benjamin)

|  | [Mike Kaply [:mkaply]](/user_profile?user_id=7313)  Reporter |  |
| --- | --- | --- |
| [Comment 13](/show_bug.cgi?id=1295542#c13)• 8 years ago |
|  | |

The reason this is marked as a security issue is because apparently adding files on some OSes can be a different (lesser) permission than replacing files.
So being able to drop files in is "easier" than replacing files.
So by dropping two files into the directory, you can turn off extension signing.
Whereas replacing omni.ja requires more permissions.
The reason this came up is because you can use autoconfig to turn off signing by dropping in two files and my response was "you can also drop a chrome manifest and a JS file in to turn off signing".

|  | [Benjamin Smedberg](/user_profile?user_id=7044) |  |
| --- | --- | --- |
| [Comment 14](/show_bug.cgi?id=1295542#c14)• 8 years ago |
|  | |

I feel like we should fix bugs where drop-in files can be used to own Firefox. I'm happy for glandium's suggestion or other reasonable technical ways to accomplish this. I don't think we should suppress the log message because it points to something real.Flags: needinfo?(benjamin)

|  | [Stephen A Pohl [:spohl]](/user_profile?user_id=456485) |  |
| --- | --- | --- |
| [Comment 15](/show_bug.cgi?id=1295542#c15)• 8 years ago |
|  | |

Mike, do you still have that partial patch that you were referring to?Flags: needinfo?(mh+mozilla)

|  | [Mike Hommey [:glandium]](/user_profile?user_id=47192)  Assignee |  |
| --- | --- | --- |
| [Comment 16](/show_bug.cgi?id=1295542#c16)• 8 years ago |
|  | |

I don't, but I have a simpler and less risky idea. I'll attach a patch shortly.Flags: needinfo?(mh+mozilla)

|  | [Mike Hommey [:glandium]](/user_profile?user_id=47192)  Assignee |  |
| --- | --- | --- |
| [Comment 17](/show_bug.cgi?id=1295542#c17)• 8 years ago |
|  | |

Attached patch

[Ensure at least an empty chrome.manifest next to each omnijar file](attachment.cgi?id=8790608&action=diff)
— [Details](attachment.cgi?id=8790608&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1295542&attachment=8790608)

My proposal in [comment 11](/show_bug.cgi?id=1295542#c11 "RESOLVED FIXED - Firefox tries to read a non existent chrome.manifest from install directory.") is something that might be desirable long term[1], but it requires modifications to C++ code as well as changes to the packager code.
This alternative approach only requires smaller changes to the packager code, by just creating an empty chrome.manifest (and filling it if it needs to be filled), so that there's always a chrome.manifest file. Simpler, and less risky.
Note: This patch doesn't cover the updater, which may or may not remove the file (I actually don't know ; who does or can check?).
1. Actually, if we do end up folding browsercomps into libxul, that's actually not very desirable, except maybe for comm-central and other apps.
[Attachment #8788746](/attachment.cgi?id=8788746&action=edit "Patch") -
Attachment is obsolete: true
[Attachment #8790608](/attachment.cgi?id=8790608&action=edit "Ensure at least an empty chrome.manifest next to each omnijar file") -
Flags: feedback?(benjamin)

|  | [Stephen A Pohl [:spohl]](/user_profile?user_id=456485) |  |
| --- | --- | --- |
| [Comment 18](/show_bug.cgi?id=1295542#c18)• 8 years ago |
|  | |

(In reply to Mike Hommey [:glandium] from [comment #17](/show_bug.cgi?id=1295542#c17 "RESOLVED FIXED - Firefox tries to read a non existent chrome.manifest from install directory."))
> Created [attachment 8790608](/attachment.cgi?id=8790608 "Ensure at least an empty chrome.manifest next to each omnijar file") [[details]](/attachment.cgi?id=8790608&action=edit "Ensure at least an empty chrome.manifest next to each omnijar file") [[diff]](/attachment.cgi?id=8790608&action=diff "Ensure at least an empty chrome.manifest next to each omnijar file") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1295542&attachment=8790608)
> This alternative approach only requires smaller changes to the packager
> code, by just creating an empty chrome.manifest (and filling it if it needs
> to be filled), so that there's always a chrome.manifest file. Simpler, and
> less risky.
We will have to make sure to not regress [bug 1063052](/show_bug.cgi?id=1063052 "VERIFIED FIXED - Firefox 32+ startup crash in nsFrame::BoxReflow").
> Note: This patch doesn't cover the updater, which may or may not remove the
> file (I actually don't know ; who does or can check?).
[Bug 1063052](/show_bug.cgi?id=1063052 "VERIFIED FIXED - Firefox 32+ startup crash in nsFrame::BoxReflow") and [bug 1059567](/show_bug.cgi?id=1059567 "RESOLVED FIXED - Packaging changes for the move of removed-files file from Contents/MacOS to Contents/Resources") made it so we do remove chrome.manifest from greDir. Also see [comment 7](/show_bug.cgi?id=1295542#c7 "RESOLVED FIXED - Firefox tries to read a non existent chrome.manifest from install directory."), but note that I was mistaken about removing chrome.manifest from appDir. The meaning of greDir has changed, so we're removing chrome.manifest from the old and the new greDir location during update. But that's independent of appDir.Assignee: spohl.mozilla.bugs → mh+mozilla

|  | [Benjamin Smedberg](/user_profile?user_id=7044) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1295542#a2447939_7044)• 8 years ago |

[Attachment #8790608](/attachment.cgi?id=8790608&action=edit "Ensure at least an empty chrome.manifest next to each omnijar file") -
Flags: feedback?(benjamin) → feedback+

|  | [Mike Hommey [:glandium]](/user_profile?user_id=47192)  Assignee |  |
| --- | --- | --- |
| [Comment 19](/show_bug.cgi?id=1295542#c19)• 8 years ago |
|  | |

(In reply to Stephen A Pohl [:spohl] from [comment #18](/show_bug.cgi?id=1295542#c18 "RESOLVED FIXED - Firefox tries to read a non existent chrome.manifest from install directory."))
> (In reply to Mike Hommey [:glandium] from [comment #17](/show_bug.cgi?id=1295542#c17 "RESOLVED FIXED - Firefox tries to read a non existent chrome.manifest from install directory."))
> > Created [attachment 8790608](/attachment.cgi?id=8790608 "Ensure at least an empty chrome.manifest next to each omnijar file") [[details]](/attachment.cgi?id=8790608&action=edit "Ensure at least an empty chrome.manifest next to each omnijar file") [[diff]](/attachment.cgi?id=8790608&action=diff "Ensure at least an empty chrome.manifest next to each omnijar file") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1295542&attachment=8790608)
> > This alternative approach only requires smaller changes to the packager
> > code, by just creating an empty chrome.manifest (and filling it if it needs
> > to be filled), so that there's always a chrome.manifest file. Simpler, and
> > less risky.
>
> We will have to make sure to not regress [bug 1063052](/show_bug.cgi?id=1063052 "VERIFIED FIXED - Firefox 32+ startup crash in nsFrame::BoxReflow").
[Bug 1063052](/show_bug.cgi?id=1063052 "VERIFIED FIXED - Firefox 32+ startup crash in nsFrame::BoxReflow") was caused by the lack of a chrome.manifest file in the first place. People who would unpack omni.ja would then get a chrome.manifest that would be used forever. Here, we would ship an empty chrome.manifest. If people unpack omni.ja, they would overwrite it, and an upgrade would re-overwrite that with a new empty file.

|  | [Mike Hommey [:glandium]](/user_profile?user_id=47192)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1295542#a2472087_47192)• 8 years ago |

[Attachment #8790608](/attachment.cgi?id=8790608&action=edit "Ensure at least an empty chrome.manifest next to each omnijar file") -
Flags: review?(gps)

|  | [Mike Hommey [:glandium]](/user_profile?user_id=47192)  Assignee |  |
| --- | --- | --- |
| [Comment 20](/show_bug.cgi?id=1295542#c20)• 8 years ago |
|  | |

Attached patch

[Don't remove chrome.manifest on upgrades](attachment.cgi?id=8791027&action=diff) (obsolete)
— [Details](attachment.cgi?id=8791027&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1295542&attachment=8791027)

The other patch in this bug makes it to that a chrome.manifest file always exists, even empty. [Bug 1063052](/show_bug.cgi?id=1063052 "VERIFIED FIXED - Firefox 32+ startup crash in nsFrame::BoxReflow") was caused by a chrome.manifest file not existing in the first place but being used by Firefox when it existed, so the workaround was to delete it on upgrade. But now that upgrades are always going to provide a chrome.manifest, there is no need to remove it on upgrade.
[Attachment #8791027](/attachment.cgi?id=8791027&action=edit "Don't remove chrome.manifest on upgrades") -
Flags: review?(robert.strong.bugs)

|  | [Robert Strong (they/them - no direct email)](/user_profile?user_id=141755) |  |
| --- | --- | --- |
| [Comment 21](/show_bug.cgi?id=1295542#c21)• 8 years ago |
|  | |

Comment on [attachment 8791027](/attachment.cgi?id=8791027 "Don't remove chrome.manifest on upgrades") [[details]](/attachment.cgi?id=8791027&action=edit "Don't remove chrome.manifest on upgrades") [[diff]](/attachment.cgi?id=8791027&action=diff "Don't remove chrome.manifest on upgrades") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1295542&attachment=8791027)
Don't remove chrome.manifest on upgrades
The following should also be removed
<https://dxr.mozilla.org/mozilla-central/source/browser/installer/windows/nsis/shared.nsh#806>
[Attachment #8791027](/attachment.cgi?id=8791027&action=edit "Don't remove chrome.manifest on upgrades") -
Flags: review?(robert.strong.bugs) → review-

|  | [Mike Hommey [:glandium]](/user_profile?user_id=47192)  Assignee |  |
| --- | --- | --- |
| [Comment 22](/show_bug.cgi?id=1295542#c22)• 8 years ago |
|  | |

Attached patch

[Don't remove chrome.manifest on upgrades](attachment.cgi?id=8791042&action=diff)
— [Details](attachment.cgi?id=8791042&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1295542&attachment=8791042)

[Attachment #8791027](/attachment.cgi?id=8791027&action=edit "Don't remove chrome.manifest on upgrades") -
Attachment is obsolete: true
[Attachment #8791042](/attachment.cgi?id=8791042&action=edit "Don't remove chrome.manifest on upgrades") -
Flags: review?(robert.strong.bugs)

|  | [Robert Strong (they/them - no direct email)](/user_profile?user_id=141755) |  |
| --- | --- | --- |
| [Comment 23](/show_bug.cgi?id=1295542#c23)• 8 years ago |
|  | |

Comment on [attachment 8791042](/attachment.cgi?id=8791042 "Don't remove chrome.manifest on upgrades") [[details]](/attachment.cgi?id=8791042&action=edit "Don't remove chrome.manifest on upgrades") [[diff]](/attachment.cgi?id=8791042&action=diff "Don't remove chrome.manifest on upgrades") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1295542&attachment=8791042)
Don't remove chrome.manifest on upgrades
Thanks and I like this fix!
[Attachment #8791042](/attachment.cgi?id=8791042&action=edit "Don't remove chrome.manifest on upgrades") -
Flags: review?(robert.strong.bugs) → review+

|  | [Gregory Szorc [:gps]](/user_profile?user_id=420446) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1295542#a2627560_420446)• 8 years ago |

[Attachment #8790608](/attachment.cgi?id=8790608&action=edit "Ensure at least an empty chrome.manifest next to each omnijar file") -
Flags: review?(gps) → review+

|  | [Robert Strong (they/them - no direct email)](/user_profile?user_id=141755) |  |
| --- | --- | --- |
| [Comment 24](/show_bug.cgi?id=1295542#c24)• 8 years ago |
|  | |

So, for partial updates the empty chrome.manifest should always be added vs. patched. I'll submit a patch for this in a couple.

|  | [Robert Strong (they/them - no direct email)](/user_profile?user_id=141755) |  |
| --- | --- | --- |
| [Comment 25](/show_bug.cgi?id=1295542#c25)• 8 years ago |
|  | |

Attached patch

[patch for update packaging](attachment.cgi?id=8791783&action=diff)
— [Details](attachment.cgi?id=8791783&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1295542&attachment=8791783)

Ben, I think this is all that needs to be done for update packaging though I have no idea if anything needs to be done to the funsize code.
[Attachment #8791783](/attachment.cgi?id=8791783&action=edit "patch for update packaging") -
Flags: review?(bhearsum)

|  | [bhearsum@mozilla.com (:bhearsum)](/user_profile?user_id=259016) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1295542#a2684736_259016)• 8 years ago |

[Attachment #8791783](/attachment.cgi?id=8791783&action=edit "patch for update packaging") -
Flags: review?(bhearsum) → review+

|  | [bhearsum@mozilla.com (:bhearsum)](/user_profile?user_id=259016) |  |
| --- | --- | --- |
| [Comment 26](/show_bug.cgi?id=1295542#c26)• 8 years ago |
|  | |

(In reply to Robert Strong [:rstrong] (use needinfo to contact me) from [comment #25](/show_bug.cgi?id=1295542#c25 "RESOLVED FIXED - Firefox tries to read a non existent chrome.manifest from install directory."))
> Created [attachment 8791783](/attachment.cgi?id=8791783 "patch for update packaging") [[details]](/attachment.cgi?id=8791783&action=edit "patch for update packaging") [[diff]](/attachment.cgi?id=8791783&action=diff "patch for update packaging") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1295542&attachment=8791783)
> patch for update packaging
>
> Ben, I think this is all that needs to be done for update packaging though I
> have no idea if anything needs to be done to the funsize code.
I \_think\_ Funsize grabs these files from whatever branch it is generating partials for. Rail, can you confirm? If Funsize has its own special handling of forced files, it will need to be updated.Flags: needinfo?(rail)

|  | [Rail Aliiev [:rail]](/user_profile?user_id=328504) |  |
| --- | --- | --- |
| [Comment 27](/show_bug.cgi?id=1295542#c27)• 8 years ago |
|  | |

(In reply to Ben Hearsum (:bhearsum) from [comment #26](/show_bug.cgi?id=1295542#c26 "RESOLVED FIXED - Firefox tries to read a non existent chrome.manifest from install directory."))
> (In reply to Robert Strong [:rstrong] (use needinfo to contact me) from
> [comment #25](/show_bug.cgi?id=1295542#c25 "RESOLVED FIXED - Firefox tries to read a non existent chrome.manifest from install directory."))
> > Created [attachment 8791783](/attachment.cgi?id=8791783 "patch for update packaging") [[details]](/attachment.cgi?id=8791783&action=edit "patch for update packaging") [[diff]](/attachment.cgi?id=8791783&action=diff "patch for update packaging") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1295542&attachment=8791783)
> > patch for update packaging
> >
> > Ben, I think this is all that needs to be done for update packaging though I
> > have no idea if anything needs to be done to the funsize code.
>
> I \_think\_ Funsize grabs these files from whatever branch it is generating
> partials for. Rail, can you confirm? If Funsize has its own special handling
> of forced files, it will need to be updated.
Correct, we fetch those files per branch: <https://dxr.mozilla.org/mozilla-central/source/release/docker/funsize-update-generator/scripts/funsize.py#132-137>Flags: needinfo?(rail)

|  | [Mike Hommey [:glandium]](/user_profile?user_id=47192)  Assignee |  |
| --- | --- | --- |
| [Comment 28](/show_bug.cgi?id=1295542#c28)• 8 years ago |
|  | |

<https://hg.mozilla.org/integration/mozilla-inbound/rev/ccf231e054b5>
<https://hg.mozilla.org/integration/mozilla-inbound/rev/bc66eae9b55b>
<https://hg.mozilla.org/integration/mozilla-inbound/rev/e84554cb1201>

|  | [Carsten Book [:Tomcat]](/user_profile?user_id=277293) |  |
| --- | --- | --- |
| [Comment 29](/show_bug.cgi?id=1295542#c29)• 8 years ago |
|  | |

<https://hg.mozilla.org/mozilla-central/rev/ccf231e054b5>
<https://hg.mozilla.org/mozilla-central/rev/bc66eae9b55b>
<https://hg.mozilla.org/mozilla-central/rev/e84554cb1201>Status: ASSIGNED → RESOLVEDClosed: 8 years ago
[status-firefox52](/buglist.cgi?f1=cf_status_firefox52&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_firefox52&o1=equals&v1=fixed)Resolution: --- → FIXEDTarget Milestone: --- → mozilla52

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1295542#a3233073_1689)• 8 years ago |

Group: firefox-core-security → core-security-release

|  | [Kamil Jozwiak [:kjozwiak]](/user_profile?user_id=455785) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1295542#a16638235_455785)• 8 years ago |

Flags: qe-verify-Whiteboard: [post-critsmash-triage]

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1295542#a16984887_280903)• 8 years ago |

Whiteboard: [post-critsmash-triage] → [post-critsmash-triage][adv-main52+]

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1295542#a17054935_280903)• 8 years ago |

Alias: CVE-2017-5427

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1295542#a37724354_1689)• 7 years ago |

Group: core-security-release

|  | [Masatoshi Kimura [:emk]](/user_profile?user_id=5842) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1295542#a100483351_5842)• 5 years ago |

See Also: → [1590693](/show_bug.cgi?id=1590693 "RESOLVED FIXED - Unship empty chrome.manifest filles")
You need to [log in](/show_bug.cgi?id=1295542&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top ↑

## Attachment

Hide Details

### General

Creator:  [Stephen A Pohl [:spohl]](/user_profile?user_id=456485)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review



=== Content from wiki.mozilla.org_3659d679_20250126_043924.html ===


# BMO/UserGuide/BugFields

From MozillaWiki
< [BMO](/BMO "BMO")‎ | [UserGuide](/BMO/UserGuide "BMO/UserGuide")

[Jump to navigation](#mw-head)
[Jump to search](#searchInput)
## Bugzilla Field Descriptions

Alias
A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla.Assignee
This is the person in charge of resolving the bug. Every time this field changes, the status changes to NEW to make it easy to see which new bugs have appeared on a person's list.Blocks
This bug must be resolved before the bugs listed in this field can be resolved.Bug ID
The numeric id of a bug, unique within this entire installation of Bugzilla.CC
Users who may not have a direct role to play on this bug, but who are interested in its progress.Changed
When this bug was last updated.Classification
Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorization.Comment
Bugs have comments added to them by Bugzilla users. You can search for some text in those comments.Comment Tag
Comments can have arbitrary tags added to them to help with filtering as well as mark comments as spam or abusive.Component
Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list.Creation date
When the bug was filed.Depends on
The bugs listed here must be resolved before this bug can be resolved.Duplicates
List of bugs that have been marked a duplicate of the bug currently being viewed.Keywords
Keywords are a controlled vocabulary for characterizing bugs across Products and Components. Examples of this field are `regression`, `sec-high`, and `topcrash`. Bugzilla administrators manage [the list of keywords](https://bugzilla.mozilla.org/describekeywords.cgi). If you believe you need a new keyword, [please contact the administrators to discuss](https://bugzilla.mozilla.org/enter_bug.cgi?product=bugzilla.mozilla.org&component=Administration).Mentors
Mentors are users who have offered to help the bug owner with such tasks as setting up a development environment, finding relevant information to fixing the bug, how to submit a patch for review, and finally how to get the fix committed.Needinfo
More information has been requested from specific individuals, or anyone, to move the bug forward to completion.OS
This is the operating system against which the bug was reported.Platform
This is the hardware platform against which the bug was reported (ARM, ARM64, x86, x86\_64, etc).Priority

| Priority | Description |
| --- | --- |
| **--** | No decision |
| **P1** | Fix in the current release cycle |
| **P2** | Fix in the next release cycle or the following (nightly + 1 or nightly + 2) |
| **P3** | Backlog |
| **P4** | Do not use. This priority is for the Web Platform Test bot. |
| **P5** | Will not fix, but will accept a patch |

This field describes the importance and order in which a bug should be fixed compared to other bugs. This field is utilized by the programmers/engineers/release managers/managers to prioritize the work to be done. See the Firefox [triage documentation](https://firefox-source-docs.mozilla.org/bug-mgmt/policies/triage-bugzilla.html) and [priority definitions](https://firefox-source-docs.mozilla.org/bug-mgmt/guides/priority.html), or for the main Bugzilla project, [Bugzilla:Priority\_System](/Bugzilla%3APriority_System "Bugzilla:Priority System").Product
Bugs are categorised into Products and Components. Select a Classification to narrow down this list.QA Contact
The person responsible for confirming this bug if it is unconfirmed, and for verifying the fix once the bug has been resolved.Rank
Used by some groups to provide finer-grained ordering for working on bugs than afforded by the Priority field. Use of this field is restricted to the `rank-setters` group.Regressed by
This bug has been introduced by the bugs listed here.Regressions
This bug has introduced the bugs listed here.Reporter
The person who filed this bug.See Also
This allows you to refer to bugs in other bug tracker installations. You can enter a URL to a bug in the 'Add Bug URLs' field to note that that bug is related to this one. You can enter multiple URLs at once by separating them with a comma. You should normally use this field to refer to bugs in other bug tracker installations, or bugs which are related to, but not known to be duplicates of the bug. Bugs which are regressions should be listed in the Regressed by field (above)Severity
This field describes the impact of a bug. This field is utilized by the programmers/engineers/release managers/managers to determine the severity of issues and used as input for the priority of the bug. It should not be set by people filing bugs. See the Firefox [triage documentation](https://firefox-source-docs.mozilla.org/bug-mgmt/policies/triage-bugzilla.html) and [severity documentation](https://firefox-source-docs.mozilla.org/bug-mgmt/guides/severity.html).

| Severity | Description |
| --- | --- |
| **--** | Default value for new bugs; bug triagers for components (ie engineers and other core project folks) are expected to update the bug's severity from this value. To avoid them missing new bugs for triage, do not alter this default when filing bugs. |
| **S1** | (Catastrophic) Blocks development/testing, may impact more than 25% of users, causes data loss, likely dot release driver, and no workaround available |
| **S2** | (Serious) Major functionality/product severely impaired or a high impact issue and a satisfactory workaround does not exist |
| **S3** | (Normal) Blocks non-critical functionality or a work around exists |
| **S4** | (Small/Trivial) minor significance, cosmetic issues, low or no impact to users |
| **N/A** | (Not Applicable) The above definitions do not apply to this bug; this value is reserved for bugs of type Task or Enhancement |

Summary
The bug summary is a short sentence which succinctly describes what the bug is about.Target Milestone
For Firefox-related bugs, when a change set (patch) lands in Mozilla-Central, the [sheriffs](/Sheriffing "Sheriffing") will set this field to the corresponding release value for the current Nightly.
Release status and tracking flags are used to mark intentions for when a fix or other patch should land.
If you need to track a bug against a set of milestones other than upcoming versions of Firefox, please tell the Bugzilla team, you may want a custom status flag.Triage Owner
User that is responsible [for triaging bugs in a specific component](https://firefox-source-docs.mozilla.org/bug-mgmt/policies/triage-bugzilla.html).Type
This field describes the [type of a bug](https://firefox-source-docs.mozilla.org/bug-mgmt/guides/bug-types.html).

| Type | Description |
| --- | --- |
| **defect** | regression, crash, hang, security vulnerability and any other general issue. |
| **enhancement** | new feature, improvement in UI, performance, etc. and any other request for user-facing changes and enhancements in the product; not engineering changes |
| **task** | refactoring, removal, replacement, enabling or disabling of functionality and any other engineering task |

URL
Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen.Version
The version field defines the version of the software the bug was found in.Votes
Some bugs can be voted for, and you can limit your search to bugs with more than a certain number of votes. Votes are not used by Mozilla developers to set priorities.Whiteboard
Each bug has a free-form single line text entry box for adding tags and status information

Retrieved from "<https://wiki.mozilla.org/index.php?title=BMO/UserGuide/BugFields&oldid=1250790>"

## Navigation menu

### Personal tools

* [Log in](/index.php?title=Special:UserLogin&returnto=BMO%2FUserGuide%2FBugFields "You are encouraged to log in; however, it is not mandatory [o]")
* [Request account](/Special%3ARequestAccount "You are encouraged to create an account and log in; however, it is not mandatory")

### Namespaces

* [Page](/BMO/UserGuide/BugFields "View the content page [c]")
* [Discussion](/index.php?title=Talk:BMO/UserGuide/BugFields&action=edit&redlink=1 "Discussion about the content page (page does not exist) [t]")

English

### Views

* [Read](/BMO/UserGuide/BugFields)
* [View source](/index.php?title=BMO/UserGuide/BugFields&action=edit "This page is protected.
  You can view its source [e]")
* [View history](/index.php?title=BMO/UserGuide/BugFields&action=history "Past revisions of this page [h]")

More

### Search

### Navigation

* [Main page](/Main_Page "Visit the main page [z]")
* [Product releases](/Releases)
* [New pages](/Special%3ANewPages)
* [Recent changes](/Special%3ARecentChanges "A list of recent changes in the wiki [r]")
* [Recent uploads](/Special%3ANewFiles)
* [Random page](/Special%3ARandom "Load a random page [x]")
* [Help](/MozillaWiki%3AHelp "The place to find out")

### How to Contribute

* [All-hands meeting](/WeeklyUpdates)
* [Other meetings](/Community_Calendar)
* [Contribute to Mozilla](/Contribute)
* [Community Portal](//community.mozilla.org)
* [Community Participation Guidelines](//www.mozilla.org/en-US/about/governance/policies/participation/)

### MozillaWiki

* [About](/MozillaWiki%3AAbout)
* [Team](/MozillaWiki%3ATeam)
* [Policies](/MozillaWiki%3APolicies)
* [Report a wiki bug](//bugzilla.mozilla.org/enter_bug.cgi?product=Websites&component=wiki.mozilla.org)

### Around Mozilla

* [Mozilla Support](//support.mozilla.org/)
* [Mozilla Developer Network](//developer.mozilla.org/)
* [Planet Mozilla](//planet.mozilla.org/)
* [Mozilla Blog](//blog.mozilla.org/)
* [Research](//www.mozilla.org/research/)

### Tools

* [What links here](/Special%3AWhatLinksHere/BMO/UserGuide/BugFields "A list of all wiki pages that link here [j]")
* [Related changes](/Special%3ARecentChangesLinked/BMO/UserGuide/BugFields "Recent changes in pages linked from this page [k]")
* [Special pages](/Special%3ASpecialPages "A list of all special pages [q]")
* Printable version
* [Permanent link](/index.php?title=BMO/UserGuide/BugFields&oldid=1250790 "Permanent link to this revision of this page")
* [Page information](/index.php?title=BMO/UserGuide/BugFields&action=info "More information about this page")

* This page was last edited on 14 May 2024, at 14:22.

* [Privacy policy](/MozillaWiki%3APrivacy_policy)
* [About MozillaWiki](/MozillaWiki%3AAbout)
* [Mobile view](https://wiki.mozilla.org/index.php?title=BMO/UserGuide/BugFields&mobileaction=toggle_view_mobile)

* [![Powered by MediaWiki](/resources/assets/poweredby_mediawiki_88x31.png)](https://www.mediawiki.org/)



=== Content from bugzilla.mozilla.org_c3c71738_20250126_043923.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summary▾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View ▾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/1257361)
* [XML](/show_bug.cgi?ctype=xml&id=1257361)

Closed
[Bug 1257361](/show_bug.cgi?id=1257361)
(CVE-2017-5426)

Opened 9 years ago
Closed 8 years ago

# Firefox doesn't actually enable GMP sandboxing if started with a seccomp-bpf filter already applied

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

Firefox doesn't actually enable GMP sandboxing if started with a seccomp-bpf filter already applied

## Categories

### (Core :: Security: Process Sandboxing, defect)

[Product:](/describecomponents.cgi?product=Core)

Core
▾

Core
Shared components used by Firefox and other Mozilla software, including handling of Web content; Gecko, HTML, CSS, layout, DOM, scripts, images, networking, etc. Issues with web page layout probably go here, while Firefox user interface issues belong in the [Firefox](https://bugzilla.mozilla.org/describecomponents.cgi?product=Firefox) product. ([More info](https://wiki.mozilla.org/Modules/All#Core))
[See Open Bugs in This Product](/buglist.cgi?product=Core&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Core)
Watch This Product

[Component:](/describecomponents.cgi?product=Core&component=Security%3A%20Process%20Sandboxing#Security%3A%20Process%20Sandboxing)

Security: Process Sandboxing
▾

Core :: Security: Process Sandboxing
For process sandboxing bugs. Generally this covers code under the security/sandbox/ source directory, but there is code elsewhere to hook the different platform process sandboxes into Gecko etc.
[See Open Bugs in This Component](/buglist.cgi?product=Core&component=Security%3A%20Process%20Sandboxing&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Core&component=Security%3A%20Process%20Sandboxing&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Core&component=Security%3A%20Process%20Sandboxing)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

Trunk

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

Unspecified

Linux

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

*Not set*

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

normal

Points:

---

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

mozilla53

Iteration:

---

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| Webcompat Score | --- |
| --- | --- |
| Accessibility Severity | --- |
| Performance Impact | --- |
| a11y-review | --- |
| Webcompat Priority | --- |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox50 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox50&o1=equals&v1=wontfix) |
| firefox51 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox51&o1=equals&v1=wontfix) |
| firefox52 | --- | [fixed](/buglist.cgi?f1=cf_status_firefox52&o1=equals&v1=fixed) |
| firefox-esr52 | --- | [fixed](/buglist.cgi?f1=cf_status_firefox_esr52&o1=equals&v1=fixed) |
| firefox53 | --- | [fixed](/buglist.cgi?f1=cf_status_firefox53&o1=equals&v1=fixed) |

|  | Tracking | Status |
| --- | --- | --- |
| relnote-firefox |  | --- |
| thunderbird\_esr115 | --- | --- |
| thunderbird\_esr128 | --- | --- |
| firefox50 |  | wontfix |
| firefox51 |  | wontfix |
| firefox52 |  | fixed |
| firefox-esr52 |  | fixed |
| firefox53 |  | fixed |
| firefox-esr115 | --- | --- |
| firefox-esr128 | --- | --- |
| firefox134 | --- | --- |
| firefox135 | --- | --- |
| firefox136 | --- | --- |

## People

### (Reporter: jld, Assigned: jld)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/0e698ba5145076e93cadb50d6e22edcf?d=mm&size=40)  [jld](/user_profile?user_id=462836)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](https://secure.gravatar.com/avatar/0e698ba5145076e93cadb50d6e22edcf?d=mm&size=40)  [jld](/user_profile?user_id=462836)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

![](https://secure.gravatar.com/avatar/6ad7e6f8a605ca81446ea4c83d819fb2?d=mm&size=40)  [gcp](/user_profile?user_id=151147)

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

12 people

## References

### (Blocks 1 open bug)

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

---

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

[1744849](/show_bug.cgi?id=1744849 "NEW - PR_GET_SECCOMP doesn't need to be allowed")

Dependency [tree](/showdependencytree.cgi?id=1257361&hide_resolved=1)
/ [graph](/showdependencygraph.cgi?id=1257361)

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

[1098428](/show_bug.cgi?id=1098428 "RESOLVED FIXED - Add Linux sandboxing information to Telemetry"), [1621808](/show_bug.cgi?id=1621808 "RESOLVED FIXED - Crash messages for failing to apply seccomp-bpf policy are backwards for tsync vs. not")

## Details

### (Keywords: sec-moderate, Whiteboard: [post-critsmash-triage][adv-main52+] sb+)

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

CVE-2017-5426

[Keywords:](/describekeywords.cgi)

[sec-moderate](/buglist.cgi?keywords=sec-moderate&resolution=---)

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[post-critsmash-triage][adv-main52+] sb+

QA Whiteboard:

---

Has STR:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

| [kjozwiak](/user_profile?user_id=455785) | [qe-verify](#a29815147_455785 "8 years ago") | - |
| --- | --- | --- |
| [kjozwiak](/user_profile?user_id=455785) | qe-verify | - |
| --- | --- | --- |
|  | behind-pref |  |
| --- | --- | --- |
|  | firefox-backlog |  |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | in-testsuite |  |

## Crash Data

Signature:

*None*

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (2 files)

| [Patch: intercept PR\_SET\_NO\_NEW\_PRIVS](/attachment.cgi?id=8815444)  [8 years ago](#c10)  [Jed Davis [:jld] ⟨⏰|UTC-8⟩ ⟦he/him⟧](/user_profile?user_id=462836)   7.20 KB, patch | tedd : [review+](#c12 "8 years ago")  gcp : [review+](#a22376383_151147 "8 years ago")  jcristau : [approval-mozilla-beta+](#c18 "8 years ago") | [Details](/attachment.cgi?id=8815444&action=edit) | [Diff](/attachment.cgi?id=8815444&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1257361&attachment=8815444) |
| --- | --- | --- |
| [C program that applies an allow-all seccomp-bpf policy](/attachment.cgi?id=8835232)  [8 years ago](#c17)  [Jed Davis [:jld] ⟨⏰|UTC-8⟩ ⟦he/him⟧](/user_profile?user_id=462836)   573 bytes, text/plain |  | [Details](/attachment.cgi?id=8835232&action=edit) |

Bottom ↓
Tags ▾

* Reset

Timeline ▾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [Jed Davis [:jld] ⟨⏰|UTC-8⟩ ⟦he/him⟧](/user_profile?user_id=462836)  Assignee |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=1257361#c0)• 9 years ago |
|  | |

Back in [bug 969040](/show_bug.cgi?id=969040 "RESOLVED FIXED - seccomp sandboxing doesn't affect non-main threads already started") / [bug 970676](/show_bug.cgi?id=970676 "RESOLVED FIXED - bionic doesn't setuid() on threads"), I dealt with needing to start seccomp-bpf after the process is already multithreaded by sending a signal to each thread to do the prctl() call for itself, because seccomp state is (like most things in Linux) per-thread. And, because threads could clone themselves while this is happening, I had the signal pseudo-broadcast repeat until all threads found themselves already sandboxed.
Problem is, I used PR\_GET\_SECCOMP, which returns 2 if the thread has one or more seccomp-bpf filters applied, which is not the same as whether it has \*our\* filter applied. If Firefox is started with a seccomp-bpf filter already applied, that's inherited by child processes/threads, and the plugin-container threads will all think they have nothing to do and leave threads unsandboxed. (I haven't tested this yet, but I'm pretty sure that's what will happen.)
In particular, LXC apparently runs containers with a seccomp-bpf filter applied to everything. I don't know if this applies to all uses of containers -- it would be useful to know what the Docker containers we're using for TaskCluster do, in particular.
This shouldn't be a problem on kernels that have thread sync support ([bug 1004011](/show_bug.cgi?id=1004011 "RESOLVED FIXED - Support SECCOMP_FILTER_TSYNC if available")), but that conjecture is also not tested yet.
If unprivileged user namespaces are available… probably GeckoMediaPlugins will completely break, because we'll chroot to a deleted directory before calling dlopen(), and without seccomp-bpf to intercept the open() call it will fail.
Possible approaches:
\* Keep a global std::set of tids signalled: not quite perfect, because tid reuse is theoretically possible, unless we do something like block each thread in the signal handler (more DIY futex()ing? read()ing a pipe that the main thread closes?) until everything is done.
\* Thread local storage isn't async signal safe, so that won't work.
\* Take another signal and use its blocked bit as a per-thread boolean. That's kind of messy.
glibc does the same thing to implement setuid() and similar, but it doesn't have this problem because it can take a libc-internal lock that prevents concurrent thread creation/destruction.

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1257361#a428556_1689)• 9 years ago |

Group: core-security → dom-core-security

|  | [Jim Mathies [:jimm]](/user_profile?user_id=279663) |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=1257361#c1)• 9 years ago |
|  | |

How prevalent of an issue is this? Sounds like it only affect hosting solutions that use something LXC? Basically, a non-user for desktop users though.Flags: needinfo?(jld)Whiteboard: sb?

|  | [Jim Mathies [:jimm]](/user_profile?user_id=279663) |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=1257361#c2)• 9 years ago |
|  | |

(In reply to Jim Mathies [:jimm] from [comment #1](/show_bug.cgi?id=1257361#c1 "RESOLVED FIXED - Firefox doesn't actually enable GMP sandboxing if started with a seccomp-bpf filter already applied"))
> How prevalent of an issue is this? Sounds like it only affect hosting
> solutions that use something LXC? Basically, a non-user for desktop users
> though.
s/non-user/non-issue

|  | [Jed Davis [:jld] ⟨⏰|UTC-8⟩ ⟦he/him⟧](/user_profile?user_id=462836)  Assignee |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=1257361#c3)• 9 years ago |
|  | |

Probably a non-issue for typical use cases? There's probably \*someone\* running desktop apps inside containers, but I'd tend to suspect it's not common. I only found out about this because someone was trying to get started with desktop sandboxing and was working inside a container (and was looking at the seccomp-bpf state as reported in /proc).
With that in mind, since it seems hard to justify actually fixing this, a simpler approach would be to at least make it fail closed instead of open: adjust the feature tests in SandboxInfo.cpp to report no seccomp-bpf support if the initial state isn't 0 and there's no tsync support. (This would want a log message and a pointer back to this bug so it's not just silently disabling things.)Flags: needinfo?(jld)

|  | [Matt Wobensmith [:mwobensmith][:matt:]](/user_profile?user_id=452604) |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=1257361#c4)• 9 years ago |
|  | |

Hi Jed, based on [comment 3](/show_bug.cgi?id=1257361#c3 "RESOLVED FIXED - Firefox doesn't actually enable GMP sandboxing if started with a seccomp-bpf filter already applied"), it's unclear if you feel this should be addressed. On one hand, you mention this might be hard to justify fixing, but then suggest a code change. That would qualify, to me, as a potential fix that we'd want (and possibly file a new bug for). Can you shed more light? Thank you.Flags: needinfo?(jld)

|  | [Haik Aftandilian [:haik]](/user_profile?user_id=558190) |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=1257361#c5)• 9 years ago |
|  | |

Assuming we don't have this problem with SECCOMP\_FILTER\_FLAG\_TSYNC-enabled kernels, the question is how important is it for the sandbox to work correctly on older kernels where an exist seccomp filter has been applied.
From what Jed explained and what I can see in the code, although not proven, this problem shouldn't occur on kernel's that support SECCOMP\_FILTER\_FLAG\_TSYNC which allows a filter to be reliably applied to all threads in a process. Given that, I think this is low priority. I'd agree that it's probably a non-issue for most users, but we never know how much LXC or environments where Firefox runs with an existing filter will be used in the future. Once we have 1098428, we should know what percentage of our Linux users run kernels with SECCOMP\_FILTER\_FLAG\_TSYNC.
Which kernels have SECCOMP\_FILTER\_FLAG\_TSYNC? That support appears to have gone into Linux kernel version 3.17 [1]. From wikipedia, all supported versions of Ubuntu have kernel 3.2 or newer [2]. Though Debian stable appears to be on 3.16 without this feature [3].
As far as resolving this, could we go along way by just changing SetThreadSandbox to call InstallSyscallFilter even when a filter is already applied yet still return false? It's not perfect, but it seems to me it would solve the LXC problem for older kernels leaving just a small window where threads could be created without our policy applied.
[1] <https://github.com/torvalds/linux/commit/c2e1f2e30daa551db3c670c0ccfeab20a540b9e1>
[2] <https://en.wikipedia.org/wiki/List_of_Ubuntu_releases#Table_of_versions>
[3] <https://www.debian.org/News/2015/20150426>See Also: → [1098428](/show_bug.cgi?id=1098428 "RESOLVED FIXED - Add Linux sandboxing information to Telemetry")

|  | [Jed Davis [:jld] ⟨⏰|UTC-8⟩ ⟦he/him⟧](/user_profile?user_id=462836)  Assignee |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=1257361#c6)• 9 years ago |
|  | |

(In reply to Matt Wobensmith [:mwobensmith][:matt] from [comment #4](/show_bug.cgi?id=1257361#c4 "RESOLVED FIXED - Firefox doesn't actually enable GMP sandboxing if started with a seccomp-bpf filter already applied"))
> Hi Jed, based on [comment 3](/show_bug.cgi?id=1257361#c3 "RESOLVED FIXED - Firefox doesn't actually enable GMP sandboxing if started with a seccomp-bpf filter already applied"), it's unclear if you feel this should be
> addressed. On one hand, you mention this might be hard to justify fixing,
> but then suggest a code change. That would qualify, to me, as a potential
> fix that we'd want (and possibly file a new bug for). Can you shed more
> light? Thank you.
The thing I'd like to see fixed (and had been trying to avoid volunteering to do, because at least at first it seemed like a lot of work) is having a case where sandboxing seems to be enabled but actually isn't. So, that could be fixed either by making sandboxing work in that case or by correctly reporting that it won't work. The latter is relatively easy, and the former might be much easier than I thought (see the end of this comment).
(In reply to Haik Aftandilian [:haik] from [comment #5](/show_bug.cgi?id=1257361#c5 "RESOLVED FIXED - Firefox doesn't actually enable GMP sandboxing if started with a seccomp-bpf filter already applied"))
> Which kernels have SECCOMP\_FILTER\_FLAG\_TSYNC? That support appears to have
> gone into Linux kernel version 3.17 [1]. From wikipedia, all supported
> versions of Ubuntu have kernel 3.2 or newer [2]. Though Debian stable
> appears to be on 3.16 without this feature [3].
Ubuntu's 3.13 branch has it. That means Ubuntu 14.04 “Trusty Tahr”, and according to <https://wiki.ubuntu.com/Kernel/LTSEnablementStack> should also include 12.04 “Precise Pangolin” iff it was installed as 12.04.2 or newer (but not 12.04.[01] systems upgraded to the same newer patchlevels; yes, this is confusing). It's the same set of Ubuntu instances as unprivileged user namespaces, I think (see [bug 1041885](/show_bug.cgi?id=1041885 "RESOLVED DUPLICATE - Import Chromium setuid sandbox"), but some of the early comments there are wrong and superseded by later ones).
> As far as resolving this, could we go along way by just changing
> SetThreadSandbox to call InstallSyscallFilter even when a filter is already
> applied yet still return false? It's not perfect, but it seems to me it
> would solve the LXC problem for older kernels leaving just a small window
> where threads could be created without our policy applied.
Wouldn't that try to apply the filter twice to every thread under normal circumstances? And that would raise SIGSYS, because our filter doesn't allow… oh.
So here's another idea: the filter can make prctl(PR\_SET\_SECCOMP, 2, \_) return an error that wouldn't normally happen, and then the threads can just go ahead and call it and see if it succeeds.Flags: needinfo?(jld)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1257361#a1709675_1689)• 9 years ago |

Keywords: [sec-moderate](/buglist.cgi?keywords=sec-moderate&resolution=---)

|  | [Haik Aftandilian [:haik]](/user_profile?user_id=558190) |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=1257361#c7)• 9 years ago |
|  | |

(In reply to Jed Davis [:jld] from [comment #6](/show_bug.cgi?id=1257361#c6 "RESOLVED FIXED - Firefox doesn't actually enable GMP sandboxing if started with a seccomp-bpf filter already applied"))
> > As far as resolving this, could we go along way by just changing
> > SetThreadSandbox to call InstallSyscallFilter even when a filter is already
> > applied yet still return false? It's not perfect, but it seems to me it
> > would solve the LXC problem for older kernels leaving just a small window
> > where threads could be created without our policy applied.
>
> Wouldn't that try to apply the filter twice to every thread under normal
> circumstances? And that would raise SIGSYS, because our filter doesn't
> allow… oh.
>
> So here's another idea: the filter can make prctl(PR\_SET\_SECCOMP, 2, \_)
> return an error that wouldn't normally happen, and then the threads can just
> go ahead and call it and see if it succeeds.
I think that's a cool idea. It's slightly imperfect because the existing policy could also have prctl return whatever value is chosen by us, but as a workaround for lack of SECCOMP\_FILTER\_FLAG\_TSYNC, it is probably good enough.

|  | [Jim Mathies [:jimm]](/user_profile?user_id=279663) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1257361#a1875307_279663)• 9 years ago |

Whiteboard: sb? → sb+

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1257361#a21276442_75935)• 8 years ago |

[status-firefox48](/buglist.cgi?f1=cf_status_firefox48&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox48&o1=equals&v1=affected) → ---
[status-firefox50](/buglist.cgi?f1=cf_status_firefox50&o1=isnotempty):
--- → [wontfix](/buglist.cgi?f1=cf_status_firefox50&o1=equals&v1=wontfix)
[status-firefox51](/buglist.cgi?f1=cf_status_firefox51&o1=isnotempty):
--- → [fix-optional](/buglist.cgi?f1=cf_status_firefox51&o1=equals&v1=fix-optional)
[status-firefox52](/buglist.cgi?f1=cf_status_firefox52&o1=isnotempty):
--- → [fix-optional](/buglist.cgi?f1=cf_status_firefox52&o1=equals&v1=fix-optional)
[status-firefox53](/buglist.cgi?f1=cf_status_firefox53&o1=isnotempty):
--- → [fix-optional](/buglist.cgi?f1=cf_status_firefox53&o1=equals&v1=fix-optional)

|  | [Jed Davis [:jld] ⟨⏰|UTC-8⟩ ⟦he/him⟧](/user_profile?user_id=462836)  Assignee |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=1257361#c8)• 8 years ago |
|  | |

I have a patch; it's relatively simple.Assignee: nobody → jld

|  | [Jed Davis [:jld] ⟨⏰|UTC-8⟩ ⟦he/him⟧](/user_profile?user_id=462836)  Assignee |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=1257361#c9)• 8 years ago |
|  | |

It's both less and more simple than I thought. Intercepting PR\_SET\_SECCOMP can be done, and I can even use statically allocate the `struct sock\_fprog` so the filter can excuse only our own seccomp-bpf filter but still trap any library that tries to use seccomp-bpf on its own, which is useful.
But the first thing we do is prctl(PR\_SET\_NO\_NEW\_PRIVS, 1, 0, 0, 0) — a prerequisite for being allowed to use seccomp-bpf — so (1) my first patch broke GMP because we have a default-deny policy for prctl there, and (2) the double-filter prevention can just catch the PR\_SET\_NO\_NEW\_PRIVS instead.

|  | [Jed Davis [:jld] ⟨⏰|UTC-8⟩ ⟦he/him⟧](/user_profile?user_id=462836)  Assignee |  |
| --- | --- | --- |
| [Comment 10](/show_bug.cgi?id=1257361#c10)• 8 years ago |
|  | |

Attached patch

[Patch: intercept PR\_SET\_NO\_NEW\_PRIVS](attachment.cgi?id=8815444&action=diff)
— [Details](attachment.cgi?id=8815444&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1257361&attachment=8815444)

[Attachment #8815444](/attachment.cgi?id=8815444&action=edit "Patch: intercept PR_SET_NO_NEW_PRIVS") -
Flags: review?(julian.r.hector)
[Attachment #8815444](/attachment.cgi?id=8815444&action=edit "Patch: intercept PR_SET_NO_NEW_PRIVS") -
Flags: review?(gpascutto)

|  | [Gian-Carlo Pascutto [:gcp]](/user_profile?user_id=151147) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1257361#a22376383_151147)• 8 years ago |

[Attachment #8815444](/attachment.cgi?id=8815444&action=edit "Patch: intercept PR_SET_NO_NEW_PRIVS") -
Flags: review?(gpascutto) → review+

|  | [Jed Davis [:jld] ⟨⏰|UTC-8⟩ ⟦he/him⟧](/user_profile?user_id=462836)  Assignee |  |
| --- | --- | --- |
| [Comment 11](/show_bug.cgi?id=1257361#c11)• 8 years ago |
|  | |

Comment on [attachment 8815444](/attachment.cgi?id=8815444 "Patch: intercept PR_SET_NO_NEW_PRIVS") [[details]](/attachment.cgi?id=8815444&action=edit "Patch: intercept PR_SET_NO_NEW_PRIVS") [[diff]](/attachment.cgi?id=8815444&action=diff "Patch: intercept PR_SET_NO_NEW_PRIVS") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1257361&attachment=8815444)
Patch: intercept PR\_SET\_NO\_NEW\_PRIVS
Review of [attachment 8815444](/attachment.cgi?id=8815444 "Patch: intercept PR_SET_NO_NEW_PRIVS") [[details]](/attachment.cgi?id=8815444&action=edit "Patch: intercept PR_SET_NO_NEW_PRIVS") [[diff]](/attachment.cgi?id=8815444&action=diff "Patch: intercept PR_SET_NO_NEW_PRIVS") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1257361&attachment=8815444):
-----------------------------------------------------------------
::: security/sandbox/linux/Sandbox.cpp
@@ -274,5 @@
> // already was enabled. Crashes if sandboxing could not be enabled.
> static bool
> SetThreadSandbox()
> {
> - if (prctl(PR\_GET\_SECCOMP, 0, 0, 0, 0) == 0) {
Something I noticed after I wrote this patch: the sandbox rule that allows PR\_GET\_SECCOMP can be removed now. It's probably harmless, but no need to allow it if nothing is using it.

|  | [Julian Hector [:tedd] [:jhector]](/user_profile?user_id=506410) |  |
| --- | --- | --- |
| [Comment 12](/show_bug.cgi?id=1257361#c12)• 8 years ago |
|  | |

Comment on [attachment 8815444](/attachment.cgi?id=8815444 "Patch: intercept PR_SET_NO_NEW_PRIVS") [[details]](/attachment.cgi?id=8815444&action=edit "Patch: intercept PR_SET_NO_NEW_PRIVS") [[diff]](/attachment.cgi?id=8815444&action=diff "Patch: intercept PR_SET_NO_NEW_PRIVS") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1257361&attachment=8815444)
Patch: intercept PR\_SET\_NO\_NEW\_PRIVS
Review of [attachment 8815444](/attachment.cgi?id=8815444 "Patch: intercept PR_SET_NO_NEW_PRIVS") [[details]](/attachment.cgi?id=8815444&action=edit "Patch: intercept PR_SET_NO_NEW_PRIVS") [[diff]](/attachment.cgi?id=8815444&action=diff "Patch: intercept PR_SET_NO_NEW_PRIVS") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1257361&attachment=8815444):
-----------------------------------------------------------------
lgtm.
[Attachment #8815444](/attachment.cgi?id=8815444&action=edit "Patch: intercept PR_SET_NO_NEW_PRIVS") -
Flags: review?(julian.r.hector) → review+

|  | [Jed Davis [:jld] ⟨⏰|UTC-8⟩ ⟦he/him⟧](/user_profile?user_id=462836)  Assignee |  |
| --- | --- | --- |
| [Comment 13](/show_bug.cgi?id=1257361#c13)• 8 years ago |
|  | |

<https://hg.mozilla.org/integration/mozilla-inbound/rev/26025c7f0d298872c5fe88739c9897254da6fc75>

|  | [Carsten Book [:Tomcat]](/user_profile?user_id=277293) |  |
| --- | --- | --- |
| [Comment 14](/show_bug.cgi?id=1257361#c14)• 8 years ago |
|  | |

<https://hg.mozilla.org/mozilla-central/rev/26025c7f0d29>Status: NEW → RESOLVEDClosed: 8 years ago
[status-firefox53](/buglist.cgi?f1=cf_status_firefox53&o1=isnotempty):
[fix-optional](/buglist.cgi?f1=cf_status_firefox53&o1=equals&v1=fix-optional) → [fixed](/buglist.cgi?f1=cf_status_firefox53&o1=equals&v1=fixed)Resolution: --- → FIXEDTarget Milestone: --- → mozilla53

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1257361#a23617247_1689)• 8 years ago |

Group: dom-core-security → core-security-release

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 15](/show_bug.cgi?id=1257361#c15)• 8 years ago |
|  | |

Should we consider uplifting this to 52 for the next ESR?
[status-firefox51](/buglist.cgi?f1=cf_status_firefox51&o1=isnotempty):
[fix-optional](/buglist.cgi?f1=cf_status_firefox51&o1=equals&v1=fix-optional) → [wontfix](/buglist.cgi?f1=cf_status_firefox51&o1=equals&v1=wontfix)Flags: needinfo?(jld)

|  | [Jed Davis [:jld] ⟨⏰|UTC-8⟩ ⟦he/him⟧](/user_profile?user_id=462836)  Assignee |  |
| --- | --- | --- |
| [Comment 16](/show_bug.cgi?id=1257361#c16)• 8 years ago |
|  | |

Comment on [attachment 8815444](/attachment.cgi?id=8815444 "Patch: intercept PR_SET_NO_NEW_PRIVS") [[details]](/attachment.cgi?id=8815444&action=edit "Patch: intercept PR_SET_NO_NEW_PRIVS") [[diff]](/attachment.cgi?id=8815444&action=diff "Patch: intercept PR_SET_NO_NEW_PRIVS") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1257361&attachment=8815444)
Patch: intercept PR\_SET\_NO\_NEW\_PRIVS
Yes, let's try to get this on 52 for ESR.
Approval Request Comment
[Feature/Bug causing the regression]: This bug goes back to the original seccomp-bpf sandboxing in the B2G era; specifically, [bug 970676](/show_bug.cgi?id=970676 "RESOLVED FIXED - bionic doesn't setuid() on threads").
[User impact if declined]: A silent lack of sandboxing for media plugins. Limited to users running Linux Firefox inside certain kinds of containers (or something that applies a seccomp-bpf policy); this may be more common on ESR than regular Release.
[Is this code covered by automated tests?]: Media plugin tests will cover it.
[Has the fix been verified in Nightly?]: Yes; it's been on Nightly since 2016-12-12.
[Needs manual test from QE? If yes, steps to reproduce]: I've manually tested; I don't think QE needs to verify. (There is STR, but it's complicated and uses a small C program that I haven't attached to this bug yet.)
[List of other uplifts needed for the feature/fix]: None.
[Is the change risky?]: Not particularly.
[Why is the change risky/not risky?]: The patch is subtle, but (1) in the absolute worst case the damage is limited to media plugins (OpenH264 and EME) on Linux, and (2) this patch has been on Nightly for ~2 months now, and on Aurora since the last merge.
[String changes made/needed]: None.
Incidentally, this patch was uplifted to the 52 branch and then immediately backed out. I'm not quite sure what was going on there, but see <https://treeherder.mozilla.org/#/jobs?repo=mozilla-aurora&revision=2f4972fb62ed> and <https://treeherder.mozilla.org/#/jobs?repo=mozilla-aurora&revision=b54a7014e03d>. (The build breakages were caused by the patch that mentions minidump-analyzer, not this one.) I mention this in case there are tools that would get confused by those earlier commits.Flags: needinfo?(jld)
[Attachment #8815444](/attachment.cgi?id=8815444&action=edit "Patch: intercept PR_SET_NO_NEW_PRIVS") -
Flags: approval-mozilla-beta?

|  | [Jed Davis [:jld] ⟨⏰|UTC-8⟩ ⟦he/him⟧](/user_profile?user_id=462836)  Assignee |  |
| --- | --- | --- |
| [Comment 17](/show_bug.cgi?id=1257361#c17)• 8 years ago |
|  | |

Attached file
[C program that applies an allow-all seccomp-bpf policy](attachment.cgi?id=8835232)
— [Details](attachment.cgi?id=8835232&action=edit)

STR, for the record:
1. Compile this program ("cc -Wall -o seccomp-null seccomp-null.c" or similar)
2. MOZ\_FAKE\_NO\_SECCOMP\_TSYNC=1 MOZ\_ASSUME\_USER\_NS=0 /path/to/seccomp-null ./mach run
(The env vars disable using features of newer kernels that will, respectively, make the bug not reproduce or make it completely break GMP instead of silently lowering security.)
3. Launch a media plugin:
3a. Wait for OpenH264 to download if it isn't already (check about:addons)
3b. Go to <https://mozilla.github.io/webrtc-landing/pc_test.html>
3c. Check “Require H.264”
3d. Start a chat
3e. Make sure the video loopback is working
4. gdb -p $(pgrep -f geckomediaplugin) --batch -ex 'call reboot(1)'
(This assumes there's only Gecko media plugin running anywhere on the system; if not, find the right one's pid and use it directly. I'm also assuming that any system security features that restrict debugging are disabled.)
4a. Expected result: plugin crash, "sandbox violation" message on terminal (after a few seconds of frozen video while gdb starts up)
4b. Bad result: gdb says "$1 = -1", plugin continues running
4c. Inconclusive result: gdb prints errors and immediately exits

|  | [Julien Cristau [:jcristau]](/user_profile?user_id=580382) |  |
| --- | --- | --- |
| [Comment 18](/show_bug.cgi?id=1257361#c18)• 8 years ago |
|  | |

Comment on [attachment 8815444](/attachment.cgi?id=8815444 "Patch: intercept PR_SET_NO_NEW_PRIVS") [[details]](/attachment.cgi?id=8815444&action=edit "Patch: intercept PR_SET_NO_NEW_PRIVS") [[diff]](/attachment.cgi?id=8815444&action=diff "Patch: intercept PR_SET_NO_NEW_PRIVS") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1257361&attachment=8815444)
Patch: intercept PR\_SET\_NO\_NEW\_PRIVS
seccomp sandboxing fix, beta52+
[Attachment #8815444](/attachment.cgi?id=8815444&action=edit "Patch: intercept PR_SET_NO_NEW_PRIVS") -
Flags: approval-mozilla-beta? → approval-mozilla-beta+

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 19](/show_bug.cgi?id=1257361#c19)• 8 years ago |
|  | |

<https://hg.mozilla.org/releases/mozilla-beta/rev/52318ef46d8b>
[status-firefox52](/buglist.cgi?f1=cf_status_firefox52&o1=isnotempty):
[fix-optional](/buglist.cgi?f1=cf_status_firefox52&o1=equals&v1=fix-optional) → [fixed](/buglist.cgi?f1=cf_status_firefox52&o1=equals&v1=fixed)

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 20](/show_bug.cgi?id=1257361#c20)• 8 years ago |
|  | |

<https://hg.mozilla.org/releases/mozilla-esr52/rev/52318ef46d8b>
[status-firefox-esr52](/buglist.cgi?f1=cf_status_firefox_esr52&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_firefox_esr52&o1=equals&v1=fixed)

|  | [Kamil Jozwiak [:kjozwiak]](/user_profile?user_id=455785) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1257361#a29815147_455785)• 8 years ago |

Flags: qe-verify-Whiteboard: sb+ → [post-critsmash-triage] sb+

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1257361#a30160919_280903)• 8 years ago |

Whiteboard: [post-critsmash-triage] sb+ → [post-critsmash-triage][adv-main52+] sb+

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1257361#a30231525_280903)• 8 years ago |

Alias: CVE-2017-5426

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1257361#a50900964_1689)• 7 years ago |

Group: core-security-release

|  | [Jed Davis [:jld] ⟨⏰|UTC-8⟩ ⟦he/him⟧](/user_profile?user_id=462836)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1257361#a125799554_462836)• 5 years ago |

See Also: → [1621808](/show_bug.cgi?id=1621808 "RESOLVED FIXED - Crash messages for failing to apply seccomp-bpf policy are backwards for tsync vs. not")

|  | [Jed Davis [:jld] ⟨⏰|UTC-8⟩ ⟦he/him⟧](/user_profile?user_id=462836)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1257361#a180746024_462836)• 3 years ago |

Blocks: [1744849](/show_bug.cgi?id=1744849 "NEW - PR_GET_SECCOMP doesn't need to be allowed")
You need to [log in](/show_bug.cgi?id=1257361&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top ↑

## Attachment

Hide Details

### General

Creator:  [Jed Davis [:jld] ⟨⏰|UTC-8⟩ ⟦he/him⟧](/user_profile?user_id=462836)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review


