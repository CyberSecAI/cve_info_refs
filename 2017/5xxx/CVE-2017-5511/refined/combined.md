=== Content from security-tracker.debian.org_035ab12a_20250126_101139.html ===

# CVE-2017-5510

| **Name** | CVE-2017-5510 |
| --- | --- |
| **Description** | coders/psd.c in ImageMagick allows remote attackers to have unspecified impact via a crafted PSD file, which triggers an out-of-bounds write. |
| **Source** | [CVE](https://www.cve.org/CVERecord?id=CVE-2017-5510) (at [NVD](https://nvd.nist.gov/vuln/detail/CVE-2017-5510); [CERT](https://www.kb.cert.org/vuls/byid?searchview=&query=CVE-2017-5510), [LWN](https://lwn.net/Search/DoSearch?words=CVE-2017-5510), [oss-sec](https://marc.info/?l=oss-security&s=CVE-2017-5510), [fulldisc](https://marc.info/?l=full-disclosure&s=CVE-2017-5510), [Red Hat](https://bugzilla.redhat.com/show_bug.cgi?id=CVE-2017-5510), [Ubuntu](https://people.canonical.com/~ubuntu-security/cve/CVE-2017-5510), [Gentoo](https://bugs.gentoo.org/show_bug.cgi?id=CVE-2017-5510), SUSE [bugzilla](https://bugzilla.suse.com/show_bug.cgi?id=CVE-2017-5510)/[CVE](https://www.suse.com/security/cve/CVE-2017-5510/), GitHub [advisories](https://github.com/advisories?query=CVE-2017-5510)/[code](https://github.com/search?type=Code&q=%22CVE-2017-5510%22)/[issues](https://github.com/search?type=Issues&q=%22CVE-2017-5510%22), [web search](https://duckduckgo.com/html?q=%22CVE-2017-5510%22), [more](https://oss-security.openwall.org/wiki/vendors)) |
| **References** | [DLA-807-1](/tracker/DLA-807-1), [DSA-3799-1](/tracker/DSA-3799-1) |
| **Debian Bugs** | [851376](https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=851376) |

## Vulnerable and fixed packages

The table below lists information on source packages.

| Source Package | Release | Version | Status |
| --- | --- | --- | --- |
| [imagemagick](/tracker/source-package/imagemagick) ([PTS](https://tracker.debian.org/pkg/imagemagick)) | bullseye | 8:6.9.11.60+dfsg-1.3+deb11u4 | fixed |
|  | bullseye (security) | 8:6.9.11.60+dfsg-1.3+deb11u3 | fixed |
|  | bookworm | 8:6.9.11.60+dfsg-1.6+deb12u2 | fixed |
|  | bookworm (security) | 8:6.9.11.60+dfsg-1.6+deb12u1 | fixed |
|  | sid, trixie | 8:7.1.1.43+dfsg1-1 | fixed |

The information below is based on the following data on fixed versions.

| Package | Type | Release | Fixed Version | Urgency | Origin | Debian Bugs |
| --- | --- | --- | --- | --- | --- | --- |
| [imagemagick](/tracker/source-package/imagemagick) | source | wheezy | 8:6.7.7.10-5+deb7u11 |  | [DLA-807-1](/tracker/DLA-807-1) |  |
| [imagemagick](/tracker/source-package/imagemagick) | source | jessie | 8:6.8.9.9-5+deb8u7 |  | [DSA-3799-1](/tracker/DSA-3799-1) |  |
| [imagemagick](/tracker/source-package/imagemagick) | source | (unstable) | 8:6.9.7.4+dfsg-1 |  |  | [851376](https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=851376) |

## Notes

```
<https://github.com/ImageMagick/ImageMagick/issues/348>
<https://www.openwall.com/lists/oss-security/2017/01/16/6>
<https://github.com/ImageMagick/ImageMagick/commit/e87af64b1ff1635a32d9b6162f1b0e260fb54ed9>

```

---

Search for package or bug name:  [Reporting problems](/tracker/data/report)

[Home](/tracker/) - [Debian Security](https://www.debian.org/security/) - [Source](https://salsa.debian.org/security-tracker-team/security-tracker/blob/master/bin/tracker_service.py) [(Git)](https://salsa.debian.org/security-tracker-team/security-tracker)



=== Content from bugs.debian.org_2c2b80d8_20250126_101127.html ===

# Debian Bug report logs - #851374 imagemagick: CVE-2017-5511: coders/psd.c: memory corruption heap overflow

[![version graph](version.cgi?absolute=0;fixed=imagemagick%2F8%3A6.9.7.4%2Bdfsg-1;fixed=imagemagick%2F8%3A6.8.9.9-5%2Bdeb8u7;width=2;package=imagemagick;found=8%3A6.9.6.6%2Bdfsg-2;found=imagemagick%2F8%3A6.8.9.9-5%2Bdeb8u6;found=imagemagick%2F8%3A6.8.9.9-5;found=imagemagick%2F8%3A6.9.6.6%2Bdfsg-1;found=imagemagick%2F8%3A6.7.7.10-5;height=2;collapse=1)](version.cgi?info=1;absolute=0;collapse=1;found=8%3A6.9.6.6%2Bdfsg-2;found=imagemagick%2F8%3A6.8.9.9-5%2Bdeb8u6;found=imagemagick%2F8%3A6.8.9.9-5;found=imagemagick%2F8%3A6.9.6.6%2Bdfsg-1;found=imagemagick%2F8%3A6.7.7.10-5;package=imagemagick;fixed=imagemagick%2F8%3A6.9.7.4%2Bdfsg-1;fixed=imagemagick%2F8%3A6.8.9.9-5%2Bdeb8u7)

Package:
[imagemagick](pkgreport.cgi?package=imagemagick);
Maintainer for [imagemagick](pkgreport.cgi?package=imagemagick) is [ImageMagick Packaging Team <pkg-gmagick-im-team@lists.alioth.debian.org>](pkgreport.cgi?maint=pkg-gmagick-im-team%40lists.alioth.debian.org); Source for [imagemagick](pkgreport.cgi?package=imagemagick) is [src:imagemagick](pkgreport.cgi?src=imagemagick) ([PTS](https://tracker.debian.org/pkg/imagemagick), [buildd](https://buildd.debian.org/imagemagick), [popcon](https://qa.debian.org/popcon.php?package=imagemagick)).

Reported by: [Bastien ROUCARIÈS <roucaries.bastien+debian@gmail.com>](pkgreport.cgi?submitter=roucaries.bastien%2Bdebian%40gmail.com)

Date: Sat, 14 Jan 2017 13:27:05 UTC

Severity: *serious*

Tags: fixed-upstream, patch, security

Found in versions 8:6.9.6.6+dfsg-2, imagemagick/8:6.8.9.9-5+deb8u6, imagemagick/8:6.8.9.9-5, imagemagick/8:6.9.6.6+dfsg-1, imagemagick/8:6.7.7.10-5

Fixed in versions imagemagick/8:6.9.7.4+dfsg-1, imagemagick/8:6.8.9.9-5+deb8u7

**Done:** Bastien Roucariès <roucaries.bastien+debian@gmail.com>

Bug is archived. No further changes may be made.

Forwarded to <https://github.com/ImageMagick/ImageMagick/issues/347>

Display info messages

View this report as an [mbox folder](bugreport.cgi?bug=851374;mbox=yes), [status mbox](bugreport.cgi?bug=851374;mbox=yes;mboxstatus=yes), [maintainer mbox](bugreport.cgi?bug=851374;mbox=yes;mboxmaint=yes)

---

**Report forwarded**
to `debian-bugs-dist@lists.debian.org, secure-testing-team@lists.alioth.debian.org, ImageMagick Packaging Team <pkg-gmagick-im-team@lists.alioth.debian.org>`:

`Bug#851374`; Package `imagemagick`.
(Sat, 14 Jan 2017 13:27:07 GMT) ([full text](bugreport.cgi?bug=851374;msg=2), [mbox](bugreport.cgi?bug=851374;mbox=yes;msg=2), [link](#1)).

---

**Acknowledgement sent**
to `Bastien ROUCARIÈS <roucaries.bastien+debian@gmail.com>`:

New Bug report received and forwarded. Copy sent to `secure-testing-team@lists.alioth.debian.org, ImageMagick Packaging Team <pkg-gmagick-im-team@lists.alioth.debian.org>`.
(Sat, 14 Jan 2017 13:27:08 GMT) ([full text](bugreport.cgi?bug=851374;msg=4), [mbox](bugreport.cgi?bug=851374;mbox=yes;msg=4), [link](#3)).

---

[Message #5](#5) received at submit@bugs.debian.org ([full text](bugreport.cgi?bug=851374;msg=5), [mbox](bugreport.cgi?bug=851374;mbox=yes;msg=5), reply):

![](/cgi-bin/libravatar.cgi?email=roucaries.bastien%2Bdebian%40gmail.com)
From: Bastien ROUCARIÈS <roucaries.bastien+debian@gmail.com>
To: submit@bugs.debian.org
Subject: [imagemagick] memory corruption heap overflow
Date: Sat, 14 Jan 2017 14:25:12 +0100
```
[[Message part 1](bugreport.cgi?att=0;bug=851374;msg=5) (text/plain, inline)]
```
```
Package: imagemagick
Version:  8:6.7.7.10-5
Severity: serious
Tags: patch security fixed-upstream
X-Debbugs-CC: secure-testing-team@lists.alioth.debian.org
forwarded: <https://github.com/ImageMagick/ImageMagick/issues/347>

Specially crafted PSB file create a memory corruption.

Please open a CVE

```
```
[[signature.asc](bugreport.cgi?att=1;bug=851374;filename=signature.asc;msg=5) (application/pgp-signature, inline)]
```

---

**Added tag(s) pending.**
Request was from `roucaries.bastien@gmail.com`
to `control@bugs.debian.org`.
(Sun, 15 Jan 2017 14:27:04 GMT) ([full text](bugreport.cgi?bug=851374;msg=7), [mbox](bugreport.cgi?bug=851374;mbox=yes;msg=7), [link](#6)).

---

**Information forwarded**
to `debian-bugs-dist@lists.debian.org, ImageMagick Packaging Team <pkg-gmagick-im-team@lists.alioth.debian.org>`:

`Bug#851374`; Package `imagemagick`.
(Sun, 15 Jan 2017 17:54:02 GMT) ([full text](bugreport.cgi?bug=851374;msg=9), [mbox](bugreport.cgi?bug=851374;mbox=yes;msg=9), [link](#8)).

---

**Acknowledgement sent**
to `Bastien ROUCARIÈS <roucaries.bastien+debian@gmail.com>`:

Extra info received and forwarded to list. Copy sent to `ImageMagick Packaging Team <pkg-gmagick-im-team@lists.alioth.debian.org>`.
(Sun, 15 Jan 2017 17:54:02 GMT) ([full text](bugreport.cgi?bug=851374;msg=11), [mbox](bugreport.cgi?bug=851374;mbox=yes;msg=11), [link](#10)).

---

[Message #12](#12) received at 851374@bugs.debian.org ([full text](bugreport.cgi?bug=851374;msg=12), [mbox](bugreport.cgi?bug=851374;mbox=yes;msg=12), reply):

![](/cgi-bin/libravatar.cgi?email=roucaries.bastien%2Bdebian%40gmail.com)
From: Bastien ROUCARIÈS <roucaries.bastien+debian@gmail.com>
Subject: found in stable and unstable
Date: Sun, 15 Jan 2017 18:51:56 +0100
```
[[Message part 1](bugreport.cgi?att=0;bug=851374;msg=12) (text/plain, inline)]
```
```
control: found -1 8:6.8.9.9-5+deb8u6
control: found -1 8:6.8.9.9-5
control: found -1 8:6.9.6.6+dfsg-1
control: found -1  8:6.9.6.6+dfsg-2
```
```
[[signature.asc](bugreport.cgi?att=1;bug=851374;filename=signature.asc;msg=12) (application/pgp-signature, inline)]
```

---

**Marked as found in versions imagemagick/8:6.8.9.9-5+deb8u6.**
Request was from `Bastien ROUCARIÈS <roucaries.bastien+debian@gmail.com>`
to `851374-submit@bugs.debian.org`.
(Sun, 15 Jan 2017 17:54:03 GMT) ([full text](bugreport.cgi?bug=851374;msg=14), [mbox](bugreport.cgi?bug=851374;mbox=yes;msg=14), [link](#13)).

---

**Marked as found in versions imagemagick/8:6.8.9.9-5.**
Request was from `Bastien ROUCARIÈS <roucaries.bastien+debian@gmail.com>`
to `851374-submit@bugs.debian.org`.
(Sun, 15 Jan 2017 17:54:03 GMT) ([full text](bugreport.cgi?bug=851374;msg=16), [mbox](bugreport.cgi?bug=851374;mbox=yes;msg=16), [link](#15)).

---

**Marked as found in versions imagemagick/8:6.9.6.6+dfsg-1.**
Request was from `Bastien ROUCARIÈS <roucaries.bastien+debian@gmail.com>`
to `851374-submit@bugs.debian.org`.
(Sun, 15 Jan 2017 17:54:04 GMT) ([full text](bugreport.cgi?bug=851374;msg=18), [mbox](bugreport.cgi?bug=851374;mbox=yes;msg=18), [link](#17)).

---

**Marked as found in versions 8:6.9.6.6+dfsg-2.**
Request was from `Bastien ROUCARIÈS <roucaries.bastien+debian@gmail.com>`
to `851374-submit@bugs.debian.org`.
(Sun, 15 Jan 2017 17:54:04 GMT) ([full text](bugreport.cgi?bug=851374;msg=20), [mbox](bugreport.cgi?bug=851374;mbox=yes;msg=20), [link](#19)).

---

**Changed Bug title to 'imagemagick: CVE-2017-5511: coders/psd.c: memory corruption heap overflow' from '[imagemagick] memory corruption heap overflow'.**
Request was from `Salvatore Bonaccorso <carnil@debian.org>`
to `control@bugs.debian.org`.
(Tue, 17 Jan 2017 06:24:07 GMT) ([full text](bugreport.cgi?bug=851374;msg=22), [mbox](bugreport.cgi?bug=851374;mbox=yes;msg=22), [link](#21)).

---

**Reply sent**
to `Bastien Roucariès <roucaries.bastien+debian@gmail.com>`:

You have taken responsibility.
(Fri, 20 Jan 2017 19:21:24 GMT) ([full text](bugreport.cgi?bug=851374;msg=24), [mbox](bugreport.cgi?bug=851374;mbox=yes;msg=24), [link](#23)).

---

**Notification sent**
to `Bastien ROUCARIÈS <roucaries.bastien+debian@gmail.com>`:

Bug acknowledged by developer.
(Fri, 20 Jan 2017 19:21:24 GMT) ([full text](bugreport.cgi?bug=851374;msg=26), [mbox](bugreport.cgi?bug=851374;mbox=yes;msg=26), [link](#25)).

---

[Message #27](#27) received at 851374-close@bugs.debian.org ([full text](bugreport.cgi?bug=851374;msg=27), [mbox](bugreport.cgi?bug=851374;mbox=yes;msg=27), reply):

![](/cgi-bin/libravatar.cgi?email=roucaries.bastien%2Bdebian%40gmail.com)
From: Bastien Roucariès <roucaries.bastien+debian@gmail.com>
To: 851374-close@bugs.debian.org
Subject: Bug#851374: fixed in imagemagick 8:6.9.7.4+dfsg-1
Date: Fri, 20 Jan 2017 19:18:54 +0000
```
Source: imagemagick
Source-Version: 8:6.9.7.4+dfsg-1

We believe that the bug you reported is fixed in the latest version of
imagemagick, which is due to be installed in the Debian FTP archive.

A summary of the changes between this version and the previous one is
attached.

Thank you for reporting the bug, which will now be closed.  If you
have further comments please address them to 851374@bugs.debian.org,
and the maintainer will reopen the bug report if appropriate.

Debian distribution maintenance software
pp.
Bastien Roucariès <roucaries.bastien+debian@gmail.com> (supplier of updated imagemagick package)

(This message was generated automatically at their request; if you
believe that there is a problem with it please contact the archive
administrators by mailing ftpmaster@ftp-master.debian.org)

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA512

Format: 1.8
Date: Sun, 15 Jan 2017 16:38:03 +0100
Source: imagemagick
Binary: imagemagick-6-common imagemagick-6-doc libmagickcore-6-headers libmagickwand-6-headers libmagick++-6-headers libimage-magick-perl libmagickcore-6-arch-config imagemagick-6.q16 libmagickcore-6.q16-3 libmagickcore-6.q16-3-extra libmagickcore-6.q16-dev libmagickwand-6.q16-3 libmagickwand-6.q16-dev libmagick++-6.q16-7 libmagick++-6.q16-dev libimage-magick-q16-perl imagemagick-6.q16hdri libmagickcore-6.q16hdri-3 libmagickcore-6.q16hdri-3-extra libmagickcore-6.q16hdri-dev libmagickwand-6.q16hdri-3 libmagickwand-6.q16hdri-dev libmagick++-6.q16hdri-7 libmagick++-6.q16hdri-dev libimage-magick-q16hdri-perl imagemagick-common imagemagick-doc perlmagick libmagickcore-dev libmagickwand-dev libmagick++-dev imagemagick
Architecture: source
Version: 8:6.9.7.4+dfsg-1
Distribution: unstable
Urgency: high
Maintainer: ImageMagick Packaging Team <pkg-gmagick-im-team@lists.alioth.debian.org>
Changed-By: Bastien Roucariès <roucaries.bastien+debian@gmail.com>
Description:
 imagemagick - image manipulation programs -- binaries
 imagemagick-6-common - image manipulation programs -- infrastructure
 imagemagick-6-doc - document files of ImageMagick
 imagemagick-6.q16 - image manipulation programs -- quantum depth Q16
 imagemagick-6.q16hdri - image manipulation programs -- quantum depth Q16HDRI
 imagemagick-common - image manipulation programs -- infrastructure dummy package
 imagemagick-doc - document files of ImageMagick -- dummy package
 libimage-magick-perl - Perl interface to the ImageMagick graphics routines
 libimage-magick-q16-perl - Perl interface to the ImageMagick graphics routines -- Q16 versio
 libimage-magick-q16hdri-perl - Perl interface to the ImageMagick graphics routines -- Q16HDRI ve
 libmagick++-6-headers - object-oriented C++ interface to ImageMagick - header files
 libmagick++-6.q16-7 - C++ interface to ImageMagick -- quantum depth Q16
 libmagick++-6.q16-dev - C++ interface to ImageMagick - development files (Q16)
 libmagick++-6.q16hdri-7 - C++ interface to ImageMagick -- quantum depth Q16HDRI
 libmagick++-6.q16hdri-dev - C++ interface to ImageMagick - development files (Q16HDRI)
 libmagick++-dev - object-oriented C++ interface to ImageMagick -- dummy package
 libmagickcore-6-arch-config - low-level image manipulation library - architecture header files
 libmagickcore-6-headers - low-level image manipulation library - header files
 libmagickcore-6.q16-3 - low-level image manipulation library -- quantum depth Q16
 libmagickcore-6.q16-3-extra - low-level image manipulation library - extra codecs (Q16)
 libmagickcore-6.q16-dev - low-level image manipulation library - development files (Q16)
 libmagickcore-6.q16hdri-3 - low-level image manipulation library -- quantum depth Q16HDRI
 libmagickcore-6.q16hdri-3-extra - low-level image manipulation library - extra codecs (Q16HDRI)
 libmagickcore-6.q16hdri-dev - low-level image manipulation library - development files (Q16HDRI
 libmagickcore-dev - low-level image manipulation library -- dummy package
 libmagickwand-6-headers - image manipulation library - headers files
 libmagickwand-6.q16-3 - image manipulation library -- quantum depth Q16
 libmagickwand-6.q16-dev - image manipulation library - development files (Q16)
 libmagickwand-6.q16hdri-3 - image manipulation library -- quantum depth Q16HDRI
 libmagickwand-6.q16hdri-dev - image manipulation library - development files (Q16HDRI)
 libmagickwand-dev - image manipulation library -- dummy package
 perlmagick - Perl interface to ImageMagick -- dummy package
Closes: [773426](bugreport.cgi?bug=773426) [791460](bugreport.cgi?bug=791460) [793629](bugreport.cgi?bug=793629) [849439](bugreport.cgi?bug=849439) [849507](bugreport.cgi?bug=849507) [851374](bugreport.cgi?bug=851374) [851376](bugreport.cgi?bug=851376) [851377](bugreport.cgi?bug=851377) [851381](bugreport.cgi?bug=851381) [851382](bugreport.cgi?bug=851382) [851383](bugreport.cgi?bug=851383) [851483](bugreport.cgi?bug=851483) [851485](bugreport.cgi?bug=851485)
Changes:
 imagemagick (8:6.9.7.4+dfsg-1) unstable; urgency=high
 .
   * New upstream version:
     + Fix display -loop option not working/missing (Closes: #[793629](bugreport.cgi?bug=793629)).
     + Honor $TMPDIR (Closes: #[791460](bugreport.cgi?bug=791460)).
     + Fix inverted colors for monochrome images (Closes: #[849507](bugreport.cgi?bug=849507)).
     + Fix imagemagick not run from menu in Mate (Closes: #[773426](bugreport.cgi?bug=773426)).
   * Fix a few security bugs:
     + off-by-one string copy in wpg file handling (Closes: #[851483](bugreport.cgi?bug=851483)).
     + check return of memory allocation in ipl file handling.
       (Closes: #[851485](bugreport.cgi?bug=851485))
     + Fix a heap overflow in psb file handling (Closes: #[851374](bugreport.cgi?bug=851374)).
     + Fix  Crash - PushQuantumPixel - Heap-Buffer-Overflow in tiff file
       handling (Closes: #[851381](bugreport.cgi?bug=851381)).
     + Fix a memory corruption in psb file (Closes: #[851376](bugreport.cgi?bug=851376)).
     + Fix an out of bound in psd file handling (Closes: #[851377](bugreport.cgi?bug=851377)).
     + Check fwrite by using ferror (Closes: #[849439](bugreport.cgi?bug=849439)). Fix
       [CVE-2016-10062](https://security-tracker.debian.org/tracker/CVE-2016-10062).
     + Avoid double free in profile.c (Closes:  #[851383](bugreport.cgi?bug=851383)).
     + Fix memory leak in MPC image format. (Closes: #[851382](bugreport.cgi?bug=851382)).
   * update copyright years in debian/copyright.
   * Relax ${source:Version} depends for imagemagick-6-common.
   * Add more security POC
Checksums-Sha1:
 6b03fe7ec17ec266111f644a084123eeddadb7a2 5151 imagemagick_6.9.7.4+dfsg-1.dsc
 8b59ad4ca982549cdc3910ae1312c9c7681989f8 8929800 imagemagick_6.9.7.4+dfsg.orig.tar.xz
 f651f106d82a713b265553ae58ab293eb60390a1 202620 imagemagick_6.9.7.4+dfsg-1.debian.tar.xz
Checksums-Sha256:
 65bf234b8252fc05d85bf79b7452ff3f91d68dc7140be30b824ff085cb4734f9 5151 imagemagick_6.9.7.4+dfsg-1.dsc
 47fb2cdd26f5913318c4504f16ea363e04d1f400dda9ec52e461ab661d724026 8929800 imagemagick_6.9.7.4+dfsg.orig.tar.xz
 c911a588c6a758dfe489325d524ae70f7824f504753d352a17c027f3f0bc1c56 202620 imagemagick_6.9.7.4+dfsg-1.debian.tar.xz
Files:
 53dab66432c5965790676594f8b8989e 5151 graphics optional imagemagick_6.9.7.4+dfsg-1.dsc
 a43e39ad84d37e9ffcec5346bf12e446 8929800 graphics optional imagemagick_6.9.7.4+dfsg.orig.tar.xz
 e80a63af99ff999cd924526debd43f13 202620 graphics optional imagemagick_6.9.7.4+dfsg-1.debian.tar.xz

-----BEGIN PGP SIGNATURE-----

iQIzBAEBCgAdFiEEXQGHuUCiRbrXsPVqADoaLapBCF8FAlh82I0ACgkQADoaLapB
CF+yhw/9FXbQBD7llG1NyX04f9+lO0xQM6Ex454vMO1R61EuKV7NAJRB5lxw5XgT
hk59EWeSkBumy376DUNRurhr8B3zu9FNLsSduxKY39TzwNTOwaaEkVPoC7ZQndaS
dE+5bo8ARl+bXSnUtGhE96hOK66odw0Z5FU38VCi/fe7qhMhqZjYrrS/+AOAxSbw
rZkGX5tObLaLOnissfVGABLoHrGVxIYYXVi3mlnD3z4D0uAAM/2KtkUhoYqzBXYT
Yzb51kcmYycXImVe7iZq/CBpHM/2cZgcPgAJsoxCL93m1ZCwB5KuJKL4NLZj6GHR
f0xojgckobelnf/Ix+N+0oX3ttpmZ49C7zVAUEoyJS9s3M0mx9oJtRUid5XSrGuR
cK8sERxgWpTokYMxfpxmdwuX2ML0sAWZCKGqhzZYVHz14EIY740SUQr3MxZSEqO5
ecE64zT1EDtDOfhHjrsQjO1rH/1BJeLmaOzCb7jXs4s6FkDAUCuaY6Lx1TI9VrS8
OY1AptPoKxt9C69muvPj7A7Jui1zSeSGVTX3FER2wmcjIKlvLO83sfsGRTa3UJ3J
ZqrW9EmtD9KMTdKMgeAcURQgm0+VK1TT6JOyhMNOJr0v9inrbUAuo2C5ms3A5a9B
fCXd7WuG2vWt+BQNZY9uKgT60F333b++EAv4psWQDemN83l5bE0=
=Elbq
-----END PGP SIGNATURE-----

```

---

**Reply sent**
to `Bastien Roucariès <roucaries.bastien+debian@gmail.com>`:

You have taken responsibility.
(Thu, 09 Mar 2017 23:21:08 GMT) ([full text](bugreport.cgi?bug=851374;msg=29), [mbox](bugreport.cgi?bug=851374;mbox=yes;msg=29), [link](#28)).

---

**Notification sent**
to `Bastien ROUCARIÈS <roucaries.bastien+debian@gmail.com>`:

Bug acknowledged by developer.
(Thu, 09 Mar 2017 23:21:08 GMT) ([full text](bugreport.cgi?bug=851374;msg=31), [mbox](bugreport.cgi?bug=851374;mbox=yes;msg=31), [link](#30)).

---

[Message #32](#32) received at 851374-close@bugs.debian.org ([full text](bugreport.cgi?bug=851374;msg=32), [mbox](bugreport.cgi?bug=851374;mbox=yes;msg=32), reply):

![](/cgi-bin/libravatar.cgi?email=roucaries.bastien%2Bdebian%40gmail.com)
From: Bastien Roucariès <roucaries.bastien+debian@gmail.com>
To: 851374-close@bugs.debian.org
Subject: Bug#851374: fixed in imagemagick 8:6.8.9.9-5+deb8u7
Date: Thu, 09 Mar 2017 23:17:47 +0000
```
Source: imagemagick
Source-Version: 8:6.8.9.9-5+deb8u7

We believe that the bug you reported is fixed in the latest version of
imagemagick, which is due to be installed in the Debian FTP archive.

A summary of the changes between this version and the previous one is
attached.

Thank you for reporting the bug, which will now be closed.  If you
have further comments please address them to 851374@bugs.debian.org,
and the maintainer will reopen the bug report if appropriate.

Debian distribution maintenance software
pp.
Bastien Roucariès <roucaries.bastien+debian@gmail.com> (supplier of updated imagemagick package)

(This message was generated automatically at their request; if you
believe that there is a problem with it please contact the archive
administrators by mailing ftpmaster@ftp-master.debian.org)

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA512

Format: 1.8
Date: Sun, 12 Feb 2017 22:08:25 +0100
Source: imagemagick
Binary: imagemagick-common imagemagick-doc libmagickcore-6-headers libmagickwand-6-headers libmagick++-6-headers imagemagick libimage-magick-perl libmagickcore-6-arch-config imagemagick-6.q16 libmagickcore-6.q16-2 libmagickcore-6.q16-2-extra libmagickcore-6.q16-dev libmagickwand-6.q16-2 libmagickwand-6.q16-dev libmagick++-6.q16-5 libmagick++-6.q16-dev imagemagick-dbg libimage-magick-q16-perl perlmagick libmagickcore-dev libmagickwand-dev libmagick++-dev
Architecture: source all amd64
Version: 8:6.8.9.9-5+deb8u7
Distribution: jessie-security
Urgency: medium
Maintainer: ImageMagick Packaging Team <pkg-gmagick-im-team@lists.alioth.debian.org>
Changed-By: Bastien Roucariès <roucaries.bastien+debian@gmail.com>
Description:
 imagemagick - image manipulation programs -- binaries
 imagemagick-6.q16 - image manipulation programs -- quantum depth Q16
 imagemagick-common - image manipulation programs -- infrastructure
 imagemagick-dbg - debugging symbols for ImageMagick
 imagemagick-doc - document files of ImageMagick
 libimage-magick-perl - Perl interface to the ImageMagick graphics routines
 libimage-magick-q16-perl - Perl interface to the ImageMagick graphics routines -- Q16 versio
 libmagick++-6-headers - object-oriented C++ interface to ImageMagick - header files
 libmagick++-6.q16-5 - object-oriented C++ interface to ImageMagick
 libmagick++-6.q16-dev - object-oriented C++ interface to ImageMagick - development files
 libmagick++-dev - object-oriented C++ interface to ImageMagick
 libmagickcore-6-arch-config - low-level image manipulation library - architecture header files
 libmagickcore-6-headers - low-level image manipulation library - header files
 libmagickcore-6.q16-2 - low-level image manipulation library -- quantum depth Q16
 libmagickcore-6.q16-2-extra - low-level image manipulation library - extra codecs (Q16)
 libmagickcore-6.q16-dev - low-level image manipulation library - development files (Q16)
 libmagickcore-dev - low-level image manipulation library -- transition package
 libmagickwand-6-headers - image manipulation library - headers files
 libmagickwand-6.q16-2 - image manipulation library
 libmagickwand-6.q16-dev - image manipulation library - development files
 libmagickwand-dev - image manipulation library - transition for development files
 perlmagick - Perl interface to ImageMagick -- transition package
Closes: [848139](bugreport.cgi?bug=848139) [849439](bugreport.cgi?bug=849439) [851374](bugreport.cgi?bug=851374) [851376](bugreport.cgi?bug=851376) [851380](bugreport.cgi?bug=851380) [851381](bugreport.cgi?bug=851381) [851382](bugreport.cgi?bug=851382) [851383](bugreport.cgi?bug=851383) [851483](bugreport.cgi?bug=851483)
Changes:
 imagemagick (8:6.8.9.9-5+deb8u7) jessie-security; urgency=medium
 .
   * Fix Ipl file missing malloc check (Closes: #[851483](bugreport.cgi?bug=851483)).
     Fix [CVE-2016-10145](https://security-tracker.debian.org/tracker/CVE-2016-10145).
   * Fix wpg file off by one (Closes: #[851483](bugreport.cgi?bug=851483)).
     Fix [CVE-2016-10145](https://security-tracker.debian.org/tracker/CVE-2016-10145).
   * Fix a memory leak in caption coders (Closes: #[851380](bugreport.cgi?bug=851380)).
     Fix [CVE-2016-10146](https://security-tracker.debian.org/tracker/CVE-2016-10146).
   * Fix possible buffer overflow when writing compressed TIFFS.
     (Closes: #[848139](bugreport.cgi?bug=848139)). Fix [CVE-2016-8707](https://security-tracker.debian.org/tracker/CVE-2016-8707).
   * Fix a double free in profile due to overflow
     (Closes: #[851383](bugreport.cgi?bug=851383)). Fix [CVE-2017-5506](https://security-tracker.debian.org/tracker/CVE-2017-5506).
   * Fix memory leak in MPC file handling (Closes: #[851382](bugreport.cgi?bug=851382)).
     Fix [CVE-2017-5507](https://security-tracker.debian.org/tracker/CVE-2017-5507)
   * Fix Heap-Buffer-Overflow in TIFF coder (Closes: #[851381](bugreport.cgi?bug=851381)).
     Fix [CVE-2017-5508](https://security-tracker.debian.org/tracker/CVE-2017-5508)
   * Fix improper cast that could cause an overflow. (Closes: #[851374](bugreport.cgi?bug=851374)).
     Fix [CVE-2017-5511](https://security-tracker.debian.org/tracker/CVE-2017-5511).
   * Fix memory corruption heap overflow in psb file. (Closes: #[851376](bugreport.cgi?bug=851376)).
     Fix [CVE-2017-5510](https://security-tracker.debian.org/tracker/CVE-2017-5510).
   * Detect write error in ReadGROUP4Image. (Closes: #[849439](bugreport.cgi?bug=849439)).
     Fix [CVE-2016-10062](https://security-tracker.debian.org/tracker/CVE-2016-10062)
Checksums-Sha1:
 c633df230fc93e33ff812832aa04e5df0703bd8c 4242 imagemagick_6.8.9.9-5+deb8u7.dsc
 261284d5a1be12c8f536554d27b0fcfce1130234 262124 imagemagick_6.8.9.9-5+deb8u7.debian.tar.xz
 e598c929f7a1a2328d4acae7d6ffd97f6946dfa3 151388 imagemagick-common_6.8.9.9-5+deb8u7_all.deb
 dc10cfaabcfd57f8795d81118d9921b09d45a69e 7538144 imagemagick-doc_6.8.9.9-5+deb8u7_all.deb
 07e6a3f17e9cdc6948e090d93a6d06296724e2a0 169860 libmagickcore-6-headers_6.8.9.9-5+deb8u7_all.deb
 d5a6051df4bae36d66121ff38c64f2f79e62670b 132036 libmagickwand-6-headers_6.8.9.9-5+deb8u7_all.deb
 e647306470b11810cb4ff655af058ae9a7358f2b 168548 libmagick++-6-headers_6.8.9.9-5+deb8u7_all.deb
 5bc591fadca7d1258b9eb31828b6baeb872a1976 156816 imagemagick_6.8.9.9-5+deb8u7_amd64.deb
 64fe3f440d44cd645fe50f578bfa031ee7bc663a 176028 libimage-magick-perl_6.8.9.9-5+deb8u7_all.deb
 ec9538a9d52ccc945ee1e44543719c6baa8c8747 130842 libmagickcore-6-arch-config_6.8.9.9-5+deb8u7_amd64.deb
 06458102b6f3881f8b3a89a7f50cd6d6042a7ddd 510040 imagemagick-6.q16_6.8.9.9-5+deb8u7_amd64.deb
 f9a6283be0687db735624a9295de3aa97d1769dc 1693554 libmagickcore-6.q16-2_6.8.9.9-5+deb8u7_amd64.deb
 b73acd25a97204dce48afdfdfded71c34864b515 172196 libmagickcore-6.q16-2-extra_6.8.9.9-5+deb8u7_amd64.deb
 bf5afcdc8a9fc58ddd7b2e1aa4b12edf4daee77e 1029416 libmagickcore-6.q16-dev_6.8.9.9-5+deb8u7_amd64.deb
 aa2296b2a2df0b20c0b149b774f9bec15ebe3987 407454 libmagickwand-6.q16-2_6.8.9.9-5+deb8u7_amd64.deb
 1bd7094340e7d9687aedb9ef114ecce0abae92fb 394394 libmagickwand-6.q16-dev_6.8.9.9-5+deb8u7_amd64.deb
 b4d58dad72efb17f50f5309fa0267ef438767928 255792 libmagick++-6.q16-5_6.8.9.9-5+deb8u7_amd64.deb
 de8e5e22063d3c32849b577eefa833483bb28d03 223542 libmagick++-6.q16-dev_6.8.9.9-5+deb8u7_amd64.deb
 4ea62407dddb00a0352ed3ee345e90f4d0f040bc 5006502 imagemagick-dbg_6.8.9.9-5+deb8u7_amd64.deb
 617ede36b0dc926a37bb8b9646567790ad1a79cc 223222 libimage-magick-q16-perl_6.8.9.9-5+deb8u7_amd64.deb
 e650037546902cb4e464428b408f8d6b32475f0f 123304 perlmagick_6.8.9.9-5+deb8u7_all.deb
 386e59053065ceb46d050b9ac164b9ac8147fbe7 123290 libmagickcore-dev_6.8.9.9-5+deb8u7_all.deb
 06a59769587d7896883a3243c83213154ab81a53 123272 libmagickwand-dev_6.8.9.9-5+deb8u7_all.deb
 8b7a27a49de0f99cef3d1cae1f3bb16266a17f96 123306 libmagick++-dev_6.8.9.9-5+deb8u7_all.deb
Checksums-Sha256:
 18191ffb8c3b11919f87f6b85651f647cf0d1cfbef4c9ae35c02df45d96c3c49 4242 imagemagick_6.8.9.9-5+deb8u7.dsc
 9d3b82f2e39a6c16c8f3a7479bda7f617b56644c1c39801424bec1b3dde62f46 262124 imagemagick_6.8.9.9-5+deb8u7.debian.tar.xz
 4cadbb022e80b175b0c39d0b4f2df1db05e0d755e8c2e807799af7d24b5545f4 151388 imagemagick-common_6.8.9.9-5+deb8u7_all.deb
 1e6ef8cef7cddf899b6679b038b8d3166759967c0d48fa8940dfe50b65cc3faf 7538144 imagemagick-doc_6.8.9.9-5+deb8u7_all.deb
 8118cbbb088a2d14915778dc865bb907ad09e3c8757c37c7a349099f242a1b7b 169860 libmagickcore-6-headers_6.8.9.9-5+deb8u7_all.deb
 084a12b0c01c5a6a868913d68a9345eb859ab01763fe58766504671b54b5844d 132036 libmagickwand-6-headers_6.8.9.9-5+deb8u7_all.deb
 5e3404e9e9043af6b3a2bcf6aaa6d87053081d68273b771c1597c2cc8fd2e5d6 168548 libmagick++-6-headers_6.8.9.9-5+deb8u7_all.deb
 0f00dbd8ade07bab8eceda1dc071217825dd69cf191d2df1cbac826aaaf61ad0 156816 imagemagick_6.8.9.9-5+deb8u7_amd64.deb
 74045c656999249532f4bc5dcd7799753a3f45a0bee7ac50ee1178cfd05dfd77 176028 libimage-magick-perl_6.8.9.9-5+deb8u7_all.deb
 b64dfd671bc6c4572b7f5fb6f9fcb7bf464c042cf608ff79aee400270a6c9710 130842 libmagickcore-6-arch-config_6.8.9.9-5+deb8u7_amd64.deb
 3f6ee9af954328db1d0c37c87ce672d628efb9c1d80bda70c5362d8b1f0aa375 510040 imagemagick-6.q16_6.8.9.9-5+deb8u7_amd64.deb
 9168f66915e482d0290fd77350ece446cb1f5072055b0fcd560e9e694ec2cfbb 1693554 libmagickcore-6.q16-2_6.8.9.9-5+deb8u7_amd64.deb
 619df326d4e3b34e0d5a09115ac97e13468b7e6a194fb2baab8f6382198c2bb8 172196 libmagickcore-6.q16-2-extra_6.8.9.9-5+deb8u7_amd64.deb
 7aa9f67b90311220dbd6025158898e1f0befbe1f514fc3c053fba6afc6148f8a 1029416 libmagickcore-6.q16-dev_6.8.9.9-5+deb8u7_amd64.deb
 5262ea5d4d17abc2ea998bd9d481ccc5f25c8e5ba6b73ce15663a9e1053197cb 407454 libmagickwand-6.q16-2_6.8.9.9-5+deb8u7_amd64.deb
 97e95b5e6ece7f56a10637d74ff4245f9556be245a5e4408ec14d3d1d0221d72 394394 libmagickwand-6.q16-dev_6.8.9.9-5+deb8u7_amd64.deb
 7e469ad34f9861901a0c927332abf7d1636147c572049e38c894a4651f3f4ee9 255792 libmagick++-6.q16-5_6.8.9.9-5+deb8u7_amd64.deb
 6ec2b1fe253fd0cbce81d0983c28bab398558030a867e654f5f22eb25d216ea9 223542 libmagick++-6.q16-dev_6.8.9.9-5+deb8u7_amd64.deb
 95b6f29b4eb606e3afa4c5d667b3564cf81c44c6541ce8e568d7c1bf0ab76498 5006502 imagemagick-dbg_6.8.9.9-5+deb8u7_amd64.deb
 ebd45719c3ec75ee307ddba48eb8de185114cc5d8cf4d5e5d3e745cc61c4aa12 223222 libimage-magick-q16-perl_6.8.9.9-5+deb8u7_amd64.deb
 3f4f7564c9b25a859d9977655824a609b8face7a6e7744b9e48f82dd609a2402 123304 perlmagick_6.8.9.9-5+deb8u7_all.deb
 69237d793d5e5fa43cc4968f4efb4f335e35f819756fd42cca3da818602a7bf0 123290 libmagickcore-dev_6.8.9.9-5+deb8u7_all.deb
 19c90881356a4c4afeb5a94add612cd5739f197a72f44ddaa6925f725cf5c66c 123272 libmagickwand-dev_6.8.9.9-5+deb8u7_all.deb
 2adeff458de336f750935db1fdb242e264aaf9a41f2c0b5674e835ec1b628330 123306 libmagick++-dev_6.8.9.9-5+deb8u7_all.deb
Files:
 36afc3dca2cc7e713128e9c0fbd9e673 4242 graphics optional imagemagick_6.8.9.9-5+deb8u7.dsc
 6faa0dc084164b9877edaea4309fe965 262124 graphics optional imagemagick_6.8.9.9-5+deb8u7.debian.tar.xz
 68e23e9594b1b013abb52d5ba833e707 151388 graphics optional imagemagick-common_6.8.9.9-5+deb8u7_all.deb
 ecce1f9b4b5e143fd37482094bd086eb 7538144 doc optional imagemagick-doc_6.8.9.9-5+deb8u7_all.deb
 3bdde186e2a6a220c323218723e0f8a8 169860 libdevel optional libmagickcore-6-headers_6.8.9.9-5+deb8u7_all.deb
 94d2425fb14baf9fa6d53ec385f92b4e 132036 libdevel optional libmagickwand-6-headers_6.8.9.9-5+deb8u7_all.deb
 84c55325f584a8df92ed3b41139850dc 168548 libdevel optional libmagick++-6-headers_6.8.9.9-5+deb8u7_all.deb
 5e876e38d068572d80f6babbf2454381 156816 graphics optional imagemagick_6.8.9.9-5+deb8u7_amd64.deb
 3c935a3f1b3f3efe3469b516b80a066d 176028 perl optional libimage-magick-perl_6.8.9.9-5+deb8u7_all.deb
 5811cf393479c604b9ff1e009d2a9340 130842 libdevel optional libmagickcore-6-arch-config_6.8.9.9-5+deb8u7_amd64.deb
 f3fe301eaf1290ac1f8c679249f26146 510040 graphics optional imagemagick-6.q16_6.8.9.9-5+deb8u7_amd64.deb
 018c21004bbb3f20c07a69077e6fb841 1693554 libs optional libmagickcore-6.q16-2_6.8.9.9-5+deb8u7_amd64.deb
 d8b4b2e017c2346cf5a5e99ae7b56ba9 172196 libs optional libmagickcore-6.q16-2-extra_6.8.9.9-5+deb8u7_amd64.deb
 1a29791cc60cfef704a954c7dbbdef3c 1029416 libdevel optional libmagickcore-6.q16-dev_6.8.9.9-5+deb8u7_amd64.deb
 aed3276c28dfebfb69787138a4c84011 407454 libs optional libmagickwand-6.q16-2_6.8.9.9-5+deb8u7_amd64.deb
 f2fc904dbea283d754df43e973a24107 394394 libdevel optional libmagickwand-6.q16-dev_6.8.9.9-5+deb8u7_amd64.deb
 67d9789ed9f16915a019ffc174e95dca 255792 libs optional libmagick++-6.q16-5_6.8.9.9-5+deb8u7_amd64.deb
 82ab179ef1e19c4ee7466b8a88c7ab26 223542 libdevel optional libmagick++-6.q16-dev_6.8.9.9-5+deb8u7_amd64.deb
 df2190491eb9f90183e8bf9a18d096ae 5006502 debug extra imagemagick-dbg_6.8.9.9-5+deb8u7_amd64.deb
 565aa24b1cb3d14a3c760ccedf0f679b 223222 perl optional libimage-magick-q16-perl_6.8.9.9-5+deb8u7_amd64.deb
 cc18c59708f72ad9c6f95840aaa504dd 123304 oldlibs extra perlmagick_6.8.9.9-5+deb8u7_all.deb
 0a869a2731aab097b9fa420c5d4f7632 123290 oldlibs extra libmagickcore-dev_6.8.9.9-5+deb8u7_all.deb
 3a8aa1025e16f2ab61a38d2f5c97bf8a 123272 oldlibs extra libmagickwand-dev_6.8.9.9-5+deb8u7_all.deb
 35583e8c46ca77bf7567ae7326f4aaef 123306 oldlibs extra libmagick++-dev_6.8.9.9-5+deb8u7_all.deb

-----BEGIN PGP SIGNATURE-----

iQIzBAEBCgAdFiEEXQGHuUCiRbrXsPVqADoaLapBCF8FAli0SgIACgkQADoaLapB
CF+rfA//aCdU8Vr1DCMMn3o9VpqUWZbiyZhIw85fNrQVeVd/3RPeotbMqVhlcwp3
tJcYjNH1XjG8bt6ljF8G5yhteEv5fLQYBFQd5EDzIIRB4Y7rlpv4od7EG4AlRLnU
fVYKJhodZ3pkooxkoDHSXjN/ra+sROA2TL7JjFVjBUdwk0NcaSkspyyCQgk0/gnP
wSu14wZsvufGnBODcFKuHtAg9HrJbHlWovE2W/9tAswhmRLqoBgYCrpKJPcJDRRD
9g14VV6ySyEGOjSL2xIyuokPBESPd/NlJxtwHj2vf3A+7W+9KpCIN+r1SOFBCUYv
sigHS4W6n8q/UGrQhapFG5xH7jifULB+1p0D1hQAQ1/HD1uzFau5bxPmEUr2pcji
nIDK/eZgVSbLfWINKPcCWvXA44r4iPhurFzVzrn2J6IVGDJkRJZCncV6XIYwC9XB
0EOeZtAkKCNa9RM1y3mTsEJ36l1WZcwN1eKzAUQZCKJPBsPdw5/Ti94CPXsoM3KM
k2mSEtGiPlJHNyvMe0/nStLRFgh25QCxuDihInm1BXBALzsDqdkqTA98RMGNNlrG
0l/txGtSVfD9kxeQ8ePNK3ZO/ty4pH+nHKCQ5v7Asj6vt2FkXOvalmdgqFMiI56E
CUMR4XslBrsowNqOSUc/nVuXW78GcH87L4cDg/XDhSbmnp1lgWo=
=3VIo
-----END PGP SIGNATURE-----

```

---

**Bug archived.**
Request was from `Debbugs Internal Request <owner@bugs.debian.org>`
to `internal_control@bugs.debian.org`.
(Sun, 07 May 2017 07:30:41 GMT) ([full text](bugreport.cgi?bug=851374;msg=34), [mbox](bugreport.cgi?bug=851374;mbox=yes;msg=34), [link](#33)).

---

Send a report that [this bug log contains spam](https://bugs.debian.org/cgi-bin/bugspam.cgi?bug=851374).

---

Debian bug tracking system administrator <owner@bugs.debian.org>.
Last modified:
Sun Jan 26 10:11:27 2025;
Machine Name:
buxtehude

[Debian Bug tracking system](https://www.debian.org/Bugs/)

Debbugs is free software and licensed under the terms of the GNU General
Public License version 2. The current version can be obtained
from <https://bugs.debian.org/debbugs-source/>.

Copyright © 1999 Darren O. Benham,
1997,2003 nCipher Corporation Ltd,
1994-97 Ian Jackson,
2005-2017 Don Armstrong, and many other contributors.



=== Content from bugs.gentoo.org_0a0abf2a_20250126_101129.html ===

[![Gentoo Websites Logo](extensions/Gentoo/web/gentoo_org.png)](/ "Go to the Gentoo Bugzilla homepage")
Go to:
[Gentoo Home](https://www.gentoo.org/)
[Documentation](https://www.gentoo.org/support/documentation/)
[Forums](https://forums.gentoo.org/)
[Lists](https://www.gentoo.org/get-involved/mailing-lists/)
[Bugs](/)
[Planet](https://planet.gentoo.org/)
[Store](https://www.gentoo.org/inside-gentoo/stores/)
[Wiki](https://wiki.gentoo.org/)
**[Get Gentoo!](https://www.gentoo.org/downloads/)**

Gentoo's Bugzilla – Search by bug number

* [Home](./)
* | [New](enter_bug.cgi?format=guided)–[[Ex]](enter_bug.cgi)
* | [Browse](describecomponents.cgi)
* | [Search](query.cgi)
* | [Privacy Policy](https://wiki.gentoo.org/wiki/Foundation%3APrivacy_Policy)
* |

  [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")
* | [Reports](report.cgi)
* |
  [Requests](request.cgi)
* |
  [New Account](createaccount.cgi)
* |
  [Log In](show_bug.cgi?GoAheadAndLogIn=1)

  [x]
* |
  [Forgot Password](show_bug.cgi?GoAheadAndLogIn=1#forgot)
  Login:

  [x]

You may find a single bug by entering its bug id here:

* + [Home](./)
  + | [New](enter_bug.cgi?format=guided)–[[Ex]](enter_bug.cgi)
  + | [Browse](describecomponents.cgi)
  + | [Search](query.cgi)
  + | [Privacy Policy](https://wiki.gentoo.org/wiki/Foundation%3APrivacy_Policy)
  + |

    [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")
  + | [Reports](report.cgi)
  + |
    [Requests](request.cgi)
  + |
    [New Account](createaccount.cgi)
  + |
    [Log In](show_bug.cgi?GoAheadAndLogIn=1)

    [x]
  + |
    [Forgot Password](show_bug.cgi?GoAheadAndLogIn=1#forgot)
    Login:

    [x]



=== Content from github.com_6d0889e3_20250125_161319.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FImageMagick%2FImageMagick%2Fcommit%2Fc8c6a0f123d5e35c173125365c97e2c0fc7eca42)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FImageMagick%2FImageMagick%2Fcommit%2Fc8c6a0f123d5e35c173125365c97e2c0fc7eca42)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fcommit_fragments%2Frepo_layout&source=header-repo&source_repo=ImageMagick%2FImageMagick)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[ImageMagick](/ImageMagick)
/
**[ImageMagick](/ImageMagick/ImageMagick)**
Public

* [Notifications](/login?return_to=%2FImageMagick%2FImageMagick) You must be signed in to change notification settings
* [Fork
  1.4k](/login?return_to=%2FImageMagick%2FImageMagick)
* [Star
   12.7k](/login?return_to=%2FImageMagick%2FImageMagick)

* [Code](/ImageMagick/ImageMagick)
* [Issues
  123](/ImageMagick/ImageMagick/issues)
* [Pull requests
  4](/ImageMagick/ImageMagick/pulls)
* [Discussions](/ImageMagick/ImageMagick/discussions)
* [Actions](/ImageMagick/ImageMagick/actions)
* [Security](/ImageMagick/ImageMagick/security)
* [Insights](/ImageMagick/ImageMagick/pulse)

Additional navigation options

* [Code](/ImageMagick/ImageMagick)
* [Issues](/ImageMagick/ImageMagick/issues)
* [Pull requests](/ImageMagick/ImageMagick/pulls)
* [Discussions](/ImageMagick/ImageMagick/discussions)
* [Actions](/ImageMagick/ImageMagick/actions)
* [Security](/ImageMagick/ImageMagick/security)
* [Insights](/ImageMagick/ImageMagick/pulse)

## Commit

[Permalink](/ImageMagick/ImageMagick/commit/c8c6a0f123d5e35c173125365c97e2c0fc7eca42)

This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository.

Fix improper cast that could cause an overflow as demonstrated in [#347](https://github.com/ImageMagick/ImageMagick/issues/347).

[Browse files](/ImageMagick/ImageMagick/tree/c8c6a0f123d5e35c173125365c97e2c0fc7eca42)
Browse the repository at this point in the history

* Loading branch information

Dirk Lemstra
committed
Jan 7, 2017

1 parent
[930ca78](/ImageMagick/ImageMagick/commit/930ca78e72e4ce4e8b85d893717e65f88337bd08)

commit c8c6a0f

Showing
**1 changed file**
with
**1 addition**
and
**1 deletion**.

* Whitespace
* Ignore whitespace

* Split
* Unified

## There are no files selected for viewing

2 changes: 1 addition & 1 deletion

2
[coders/psd.c](#diff-d0b844bac7bd98aabf1ed668e87f44d5b6bf7db3061a95f6b09e3f38d3aef233 "coders/psd.c")

Show comments

[View file](/ImageMagick/ImageMagick/blob/c8c6a0f123d5e35c173125365c97e2c0fc7eca42/coders/psd.c)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -1691,7 +1691,7 @@ ModuleExport MagickBooleanType ReadPSDLayers(Image \*image, |
|  |  | /\* |
|  |  | Layer name. |
|  |  | \*/ |
|  |  | length=(MagickSizeType) ReadBlobByte(image); |
|  |  | length=(MagickSizeType) (unsigned char) ReadBlobByte(image); |
|  |  | combined\_length+=length+1; |
|  |  | if (length > 0) |
|  |  | (void) ReadBlob(image,(size\_t) length++,layer\_info[i].name); |
| Expand Down | |  |

Toggle all file notes
Toggle all file annotations

### 0 comments on commit `c8c6a0f`

Please
[sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FImageMagick%2FImageMagick%2Fcommit%2Fc8c6a0f123d5e35c173125365c97e2c0fc7eca42) to comment.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from security-tracker.debian.org_3d59ac0a_20250126_101129.html ===

# CVE-2017-5511

| **Name** | CVE-2017-5511 |
| --- | --- |
| **Description** | coders/psd.c in ImageMagick allows remote attackers to have unspecified impact by leveraging an improper cast, which triggers a heap-based buffer overflow. |
| **Source** | [CVE](https://www.cve.org/CVERecord?id=CVE-2017-5511) (at [NVD](https://nvd.nist.gov/vuln/detail/CVE-2017-5511); [CERT](https://www.kb.cert.org/vuls/byid?searchview=&query=CVE-2017-5511), [LWN](https://lwn.net/Search/DoSearch?words=CVE-2017-5511), [oss-sec](https://marc.info/?l=oss-security&s=CVE-2017-5511), [fulldisc](https://marc.info/?l=full-disclosure&s=CVE-2017-5511), [Red Hat](https://bugzilla.redhat.com/show_bug.cgi?id=CVE-2017-5511), [Ubuntu](https://people.canonical.com/~ubuntu-security/cve/CVE-2017-5511), [Gentoo](https://bugs.gentoo.org/show_bug.cgi?id=CVE-2017-5511), SUSE [bugzilla](https://bugzilla.suse.com/show_bug.cgi?id=CVE-2017-5511)/[CVE](https://www.suse.com/security/cve/CVE-2017-5511/), GitHub [advisories](https://github.com/advisories?query=CVE-2017-5511)/[code](https://github.com/search?type=Code&q=%22CVE-2017-5511%22)/[issues](https://github.com/search?type=Issues&q=%22CVE-2017-5511%22), [web search](https://duckduckgo.com/html?q=%22CVE-2017-5511%22), [more](https://oss-security.openwall.org/wiki/vendors)) |
| **References** | [DLA-807-1](/tracker/DLA-807-1), [DSA-3799-1](/tracker/DSA-3799-1) |
| **Debian Bugs** | [851374](https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=851374) |

## Vulnerable and fixed packages

The table below lists information on source packages.

| Source Package | Release | Version | Status |
| --- | --- | --- | --- |
| [imagemagick](/tracker/source-package/imagemagick) ([PTS](https://tracker.debian.org/pkg/imagemagick)) | bullseye | 8:6.9.11.60+dfsg-1.3+deb11u4 | fixed |
|  | bullseye (security) | 8:6.9.11.60+dfsg-1.3+deb11u3 | fixed |
|  | bookworm | 8:6.9.11.60+dfsg-1.6+deb12u2 | fixed |
|  | bookworm (security) | 8:6.9.11.60+dfsg-1.6+deb12u1 | fixed |
|  | sid, trixie | 8:7.1.1.43+dfsg1-1 | fixed |

The information below is based on the following data on fixed versions.

| Package | Type | Release | Fixed Version | Urgency | Origin | Debian Bugs |
| --- | --- | --- | --- | --- | --- | --- |
| [imagemagick](/tracker/source-package/imagemagick) | source | wheezy | 8:6.7.7.10-5+deb7u11 |  | [DLA-807-1](/tracker/DLA-807-1) |  |
| [imagemagick](/tracker/source-package/imagemagick) | source | jessie | 8:6.8.9.9-5+deb8u7 |  | [DSA-3799-1](/tracker/DSA-3799-1) |  |
| [imagemagick](/tracker/source-package/imagemagick) | source | (unstable) | 8:6.9.7.4+dfsg-1 |  |  | [851374](https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=851374) |

## Notes

```
<https://github.com/ImageMagick/ImageMagick/issues/347>
<https://www.openwall.com/lists/oss-security/2017/01/16/6>
<https://github.com/ImageMagick/ImageMagick/commit/7d65a814ac76bd04760072c33e452371692ee790>

```

---

Search for package or bug name:  [Reporting problems](/tracker/data/report)

[Home](/tracker/) - [Debian Security](https://www.debian.org/security/) - [Source](https://salsa.debian.org/security-tracker-team/security-tracker/blob/master/bin/tracker_service.py) [(Git)](https://salsa.debian.org/security-tracker-team/security-tracker)



=== Content from security-tracker.debian.org_6577a843_20250126_101140.html ===

# CVE-2017-5508

| **Name** | CVE-2017-5508 |
| --- | --- |
| **Description** | Heap-based buffer overflow in the PushQuantumPixel function in ImageMagick before 6.9.7-3 and 7.x before 7.0.4-3 allows remote attackers to cause a denial of service (application crash) via a crafted TIFF file. |
| **Source** | [CVE](https://www.cve.org/CVERecord?id=CVE-2017-5508) (at [NVD](https://nvd.nist.gov/vuln/detail/CVE-2017-5508); [CERT](https://www.kb.cert.org/vuls/byid?searchview=&query=CVE-2017-5508), [LWN](https://lwn.net/Search/DoSearch?words=CVE-2017-5508), [oss-sec](https://marc.info/?l=oss-security&s=CVE-2017-5508), [fulldisc](https://marc.info/?l=full-disclosure&s=CVE-2017-5508), [Red Hat](https://bugzilla.redhat.com/show_bug.cgi?id=CVE-2017-5508), [Ubuntu](https://people.canonical.com/~ubuntu-security/cve/CVE-2017-5508), [Gentoo](https://bugs.gentoo.org/show_bug.cgi?id=CVE-2017-5508), SUSE [bugzilla](https://bugzilla.suse.com/show_bug.cgi?id=CVE-2017-5508)/[CVE](https://www.suse.com/security/cve/CVE-2017-5508/), GitHub [advisories](https://github.com/advisories?query=CVE-2017-5508)/[code](https://github.com/search?type=Code&q=%22CVE-2017-5508%22)/[issues](https://github.com/search?type=Issues&q=%22CVE-2017-5508%22), [web search](https://duckduckgo.com/html?q=%22CVE-2017-5508%22), [more](https://oss-security.openwall.org/wiki/vendors)) |
| **References** | [DLA-807-1](/tracker/DLA-807-1), [DSA-3799-1](/tracker/DSA-3799-1) |
| **Debian Bugs** | [851381](https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=851381) |

## Vulnerable and fixed packages

The table below lists information on source packages.

| Source Package | Release | Version | Status |
| --- | --- | --- | --- |
| [imagemagick](/tracker/source-package/imagemagick) ([PTS](https://tracker.debian.org/pkg/imagemagick)) | bullseye | 8:6.9.11.60+dfsg-1.3+deb11u4 | fixed |
|  | bullseye (security) | 8:6.9.11.60+dfsg-1.3+deb11u3 | fixed |
|  | bookworm | 8:6.9.11.60+dfsg-1.6+deb12u2 | fixed |
|  | bookworm (security) | 8:6.9.11.60+dfsg-1.6+deb12u1 | fixed |
|  | sid, trixie | 8:7.1.1.43+dfsg1-1 | fixed |

The information below is based on the following data on fixed versions.

| Package | Type | Release | Fixed Version | Urgency | Origin | Debian Bugs |
| --- | --- | --- | --- | --- | --- | --- |
| [imagemagick](/tracker/source-package/imagemagick) | source | wheezy | 8:6.7.7.10-5+deb7u11 |  | [DLA-807-1](/tracker/DLA-807-1) |  |
| [imagemagick](/tracker/source-package/imagemagick) | source | jessie | 8:6.8.9.9-5+deb8u7 |  | [DSA-3799-1](/tracker/DSA-3799-1) |  |
| [imagemagick](/tracker/source-package/imagemagick) | source | (unstable) | 8:6.9.7.4+dfsg-1 |  |  | [851381](https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=851381) |

## Notes

```
<https://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=31161>
<https://www.openwall.com/lists/oss-security/2017/01/16/6>
<https://github.com/ImageMagick/ImageMagick/commit/379e21cd32483df6e128147af3bc4ce1f82eb9c4>

```

---

Search for package or bug name:  [Reporting problems](/tracker/data/report)

[Home](/tracker/) - [Debian Security](https://www.debian.org/security/) - [Source](https://salsa.debian.org/security-tracker-team/security-tracker/blob/master/bin/tracker_service.py) [(Git)](https://salsa.debian.org/security-tracker-team/security-tracker)



=== Content from github.com_8debd574_20250125_161317.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FImageMagick%2FImageMagick%2Fcommit%2F7d65a814ac76bd04760072c33e452371692ee790)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FImageMagick%2FImageMagick%2Fcommit%2F7d65a814ac76bd04760072c33e452371692ee790)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fcommit_fragments%2Frepo_layout&source=header-repo&source_repo=ImageMagick%2FImageMagick)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[ImageMagick](/ImageMagick)
/
**[ImageMagick](/ImageMagick/ImageMagick)**
Public

* [Notifications](/login?return_to=%2FImageMagick%2FImageMagick) You must be signed in to change notification settings
* [Fork
  1.4k](/login?return_to=%2FImageMagick%2FImageMagick)
* [Star
   12.7k](/login?return_to=%2FImageMagick%2FImageMagick)

* [Code](/ImageMagick/ImageMagick)
* [Issues
  123](/ImageMagick/ImageMagick/issues)
* [Pull requests
  4](/ImageMagick/ImageMagick/pulls)
* [Discussions](/ImageMagick/ImageMagick/discussions)
* [Actions](/ImageMagick/ImageMagick/actions)
* [Security](/ImageMagick/ImageMagick/security)
* [Insights](/ImageMagick/ImageMagick/pulse)

Additional navigation options

* [Code](/ImageMagick/ImageMagick)
* [Issues](/ImageMagick/ImageMagick/issues)
* [Pull requests](/ImageMagick/ImageMagick/pulls)
* [Discussions](/ImageMagick/ImageMagick/discussions)
* [Actions](/ImageMagick/ImageMagick/actions)
* [Security](/ImageMagick/ImageMagick/security)
* [Insights](/ImageMagick/ImageMagick/pulse)

## Commit

[Permalink](/ImageMagick/ImageMagick/commit/7d65a814ac76bd04760072c33e452371692ee790)

This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository.

Fix improper cast that could cause an overflow as demonstrated in [#347](https://github.com/ImageMagick/ImageMagick/issues/347).

[Browse files](/ImageMagick/ImageMagick/tree/7d65a814ac76bd04760072c33e452371692ee790)
Browse the repository at this point in the history

* Loading branch information

Dirk Lemstra
committed
Jan 7, 2017

1 parent
[31690df](/ImageMagick/ImageMagick/commit/31690dfca5d7886c93bf48939e503b2d1f177171)

commit 7d65a81

Showing
**1 changed file**
with
**1 addition**
and
**1 deletion**.

* Whitespace
* Ignore whitespace

* Split
* Unified

## There are no files selected for viewing

2 changes: 1 addition & 1 deletion

2
[coders/psd.c](#diff-d0b844bac7bd98aabf1ed668e87f44d5b6bf7db3061a95f6b09e3f38d3aef233 "coders/psd.c")

Show comments

[View file](/ImageMagick/ImageMagick/blob/7d65a814ac76bd04760072c33e452371692ee790/coders/psd.c)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -1671,7 +1671,7 @@ ModuleExport MagickBooleanType ReadPSDLayers(Image \*image, |
|  |  | /\* |
|  |  | Layer name. |
|  |  | \*/ |
|  |  | length=(MagickSizeType) ReadBlobByte(image); |
|  |  | length=(MagickSizeType) (unsigned char) ReadBlobByte(image); |
|  |  | combined\_length+=length+1; |
|  |  | if (length > 0) |
|  |  | (void) ReadBlob(image,(size\_t) length++,layer\_info[i].name); |
| Expand Down | |  |

Toggle all file notes
Toggle all file annotations

### 0 comments on commit `7d65a81`

Please
[sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FImageMagick%2FImageMagick%2Fcommit%2F7d65a814ac76bd04760072c33e452371692ee790) to comment.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_cc9d634c_20250125_161321.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FImageMagick%2FImageMagick%2Fissues%2F347)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FImageMagick%2FImageMagick%2Fissues%2F347)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fissues%2Fshow&source=header-repo&source_repo=ImageMagick%2FImageMagick)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[ImageMagick](/ImageMagick)
/
**[ImageMagick](/ImageMagick/ImageMagick)**
Public

* [Notifications](/login?return_to=%2FImageMagick%2FImageMagick) You must be signed in to change notification settings
* [Fork
  1.4k](/login?return_to=%2FImageMagick%2FImageMagick)
* [Star
   12.7k](/login?return_to=%2FImageMagick%2FImageMagick)

* [Code](/ImageMagick/ImageMagick)
* [Issues
  123](/ImageMagick/ImageMagick/issues)
* [Pull requests
  4](/ImageMagick/ImageMagick/pulls)
* [Discussions](/ImageMagick/ImageMagick/discussions)
* [Actions](/ImageMagick/ImageMagick/actions)
* [Security](/ImageMagick/ImageMagick/security)
* [Insights](/ImageMagick/ImageMagick/pulse)

Additional navigation options

* [Code](/ImageMagick/ImageMagick)
* [Issues](/ImageMagick/ImageMagick/issues)
* [Pull requests](/ImageMagick/ImageMagick/pulls)
* [Discussions](/ImageMagick/ImageMagick/discussions)
* [Actions](/ImageMagick/ImageMagick/actions)
* [Security](/ImageMagick/ImageMagick/security)
* [Insights](/ImageMagick/ImageMagick/pulse)

# Memory corruption via PSB file #347

[New issue](/login?return_to=)[Jump to bottom](#comment-composer-heading)Copy link[New issue](/login?return_to=)[Jump to bottom](#comment-composer-heading)Copy linkClosedClosed[Memory corruption via PSB file](#top)#347Copy linkLabels[bug](https://github.com/ImageMagick/ImageMagick/issues?q=state%3Aopen%20label%3A%22bug%22)[![@Miladbr](https://avatars.githubusercontent.com/u/1457288?u=baac9b47c27b6d40506f7d09f99713636507efae&v=4&size=80)](/Miladbr)
## Description

[![@Miladbr](https://avatars.githubusercontent.com/u/1457288?u=baac9b47c27b6d40506f7d09f99713636507efae&v=4&size=48)](/Miladbr)[Miladbr](https://github.com/Miladbr)opened [on Jan 7, 2017](https://github.com/ImageMagick/ImageMagick/issues/347#issue-199363078)
```
$ /home/milad/ImageMagick/utilities/magick 7.psb /dev/null
[1]    22665 segmentation fault (core dumped)   /home/milad/ImageMagick/utilities/magick 7.psb /dev/null

```

Valgrind output:

```
$ valgrind /home/milad/ImageMagick/utilities/magick 7.psb /dev/null
==22694== Memcheck, a memory error detector
==22694== Copyright (C) 2002-2015, and GNU GPL'd, by Julian Seward et al.
==22694== Using Valgrind-3.11.0 and LibVEX; rerun with -h for copyright info
==22694== Command: /home/milad/ImageMagick/utilities/magick 7.psb /dev/null
==22694==
==22694== Syscall param read(buf) points to unaddressable byte(s)
==22694==    at 0x588E680: __read_nocancel (syscall-template.S:84)
==22694==    by 0x5810F78: _IO_file_xsgetn (fileops.c:1434)
==22694==    by 0x5806235: fread (iofread.c:38)
==22694==    by 0x837756: ReadPSDLayers (psd.c:1697)
==22694==    by 0x83EF66: ReadPSDImage (psd.c:2113)
==22694==    by 0xA103CF: ReadImage (constitute.c:555)
==22694==    by 0xA131FA: ReadImages (constitute.c:852)
==22694==    by 0x1103F8C: CLINoImageOperator (operation.c:4743)
==22694==    by 0x1107338: CLIOption (operation.c:5238)
==22694==    by 0xF8612A: ProcessCommandOptions (magick-cli.c:421)
==22694==    by 0xF87FC2: MagickImageCommand (magick-cli.c:791)
==22694==    by 0xF90DE9: MagickCommandGenesis (mogrify.c:183)
==22694==  Address 0x5e4b2f8 is 0 bytes after a block of size 1,288 alloc'd
==22694==    at 0x4C2DB8F: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)
==22694==    by 0x834250: ReadPSDLayers (psd.c:1539)
==22694==    by 0x83EF66: ReadPSDImage (psd.c:2113)
==22694==    by 0xA103CF: ReadImage (constitute.c:555)
==22694==    by 0xA131FA: ReadImages (constitute.c:852)
==22694==    by 0x1103F8C: CLINoImageOperator (operation.c:4743)
==22694==    by 0x1107338: CLIOption (operation.c:5238)
==22694==    by 0xF8612A: ProcessCommandOptions (magick-cli.c:421)
==22694==    by 0xF87FC2: MagickImageCommand (magick-cli.c:791)
==22694==    by 0xF90DE9: MagickCommandGenesis (mogrify.c:183)
==22694==    by 0x419D10: MagickMain (magick.c:149)
==22694==    by 0x57B882F: (below main) (libc-start.c:291)
==22694==
==22694== Invalid write of size 1
==22694==    at 0xCD97C0: PopQuantumPixel (quantum-export.c:196)
==22694==    by 0xCD97C0: ExportRedQuantum (quantum-export.c:3069)
==22694==    by 0xCD97C0: ExportQuantumPixels (quantum-export.c:4045)
==22694==    by 0x81F40D: WritePSDChannel (psd.c:2545)
==22694==    by 0x82E6B8: WritePSDChannels (psd.c:2683)
==22694==    by 0x82E6B8: WritePSDImage (psd.c:3359)
==22694==    by 0xA148B7: WriteImage (constitute.c:1101)
==22694==    by 0xA16605: WriteImages (constitute.c:1320)
==22694==    by 0x11043F3: CLINoImageOperator (operation.c:4778)
==22694==    by 0x1107338: CLIOption (operation.c:5238)
==22694==    by 0xF86894: ProcessCommandOptions (magick-cli.c:526)
==22694==    by 0xF87FC2: MagickImageCommand (magick-cli.c:791)
==22694==    by 0xF90DE9: MagickCommandGenesis (mogrify.c:183)
==22694==    by 0x419D10: MagickMain (magick.c:149)
==22694==    by 0x57B882F: (below main) (libc-start.c:291)
==22694==  Address 0x5e5c1af is 0 bytes after a block of size 511 alloc'd
==22694==    at 0x4C2DB8F: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)
==22694==    by 0xC94D0C: AcquireQuantumPixels (quantum.c:175)
==22694==    by 0xC94D0C: SetQuantumDepth (quantum.c:693)
==22694==    by 0xC9571A: AcquireQuantumInfo (quantum.c:125)
==22694==    by 0x81F2E0: WritePSDChannel (psd.c:2514)
==22694==    by 0x82E6B8: WritePSDChannels (psd.c:2683)
==22694==    by 0x82E6B8: WritePSDImage (psd.c:3359)
==22694==    by 0xA148B7: WriteImage (constitute.c:1101)
==22694==    by 0xA16605: WriteImages (constitute.c:1320)
==22694==    by 0x11043F3: CLINoImageOperator (operation.c:4778)
==22694==    by 0x1107338: CLIOption (operation.c:5238)
==22694==    by 0xF86894: ProcessCommandOptions (magick-cli.c:526)
==22694==    by 0xF87FC2: MagickImageCommand (magick-cli.c:791)
==22694==    by 0xF90DE9: MagickCommandGenesis (mogrify.c:183)
==22694==
==22694== Invalid read of size 1
==22694==    at 0xCD9660: PopQuantumPixel (quantum-export.c:198)
==22694==    by 0xCD9660: ExportRedQuantum (quantum-export.c:3069)
==22694==    by 0xCD9660: ExportQuantumPixels (quantum-export.c:4045)
==22694==    by 0x81F40D: WritePSDChannel (psd.c:2545)
==22694==    by 0x82E6B8: WritePSDChannels (psd.c:2683)
==22694==    by 0x82E6B8: WritePSDImage (psd.c:3359)
==22694==    by 0xA148B7: WriteImage (constitute.c:1101)
==22694==    by 0xA16605: WriteImages (constitute.c:1320)
==22694==    by 0x11043F3: CLINoImageOperator (operation.c:4778)
==22694==    by 0x1107338: CLIOption (operation.c:5238)
==22694==    by 0xF86894: ProcessCommandOptions (magick-cli.c:526)
==22694==    by 0xF87FC2: MagickImageCommand (magick-cli.c:791)
==22694==    by 0xF90DE9: MagickCommandGenesis (mogrify.c:183)
==22694==    by 0x419D10: MagickMain (magick.c:149)
==22694==    by 0x57B882F: (below main) (libc-start.c:291)
==22694==  Address 0x5e5c1af is 0 bytes after a block of size 511 alloc'd
==22694==    at 0x4C2DB8F: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)
==22694==    by 0xC94D0C: AcquireQuantumPixels (quantum.c:175)
==22694==    by 0xC94D0C: SetQuantumDepth (quantum.c:693)
==22694==    by 0xC9571A: AcquireQuantumInfo (quantum.c:125)
==22694==    by 0x81F2E0: WritePSDChannel (psd.c:2514)
==22694==    by 0x82E6B8: WritePSDChannels (psd.c:2683)
==22694==    by 0x82E6B8: WritePSDImage (psd.c:3359)
==22694==    by 0xA148B7: WriteImage (constitute.c:1101)
==22694==    by 0xA16605: WriteImages (constitute.c:1320)
==22694==    by 0x11043F3: CLINoImageOperator (operation.c:4778)
==22694==    by 0x1107338: CLIOption (operation.c:5238)
==22694==    by 0xF86894: ProcessCommandOptions (magick-cli.c:526)
==22694==    by 0xF87FC2: MagickImageCommand (magick-cli.c:791)
==22694==    by 0xF90DE9: MagickCommandGenesis (mogrify.c:183)
==22694==
==22694== Invalid write of size 8
==22694==    at 0x81FFE2: WritePSDChannel (psd.c:2549)
==22694==    by 0x82E6B8: WritePSDChannels (psd.c:2683)
==22694==    by 0x82E6B8: WritePSDImage (psd.c:3359)
==22694==    by 0xA148B7: WriteImage (constitute.c:1101)
==22694==    by 0xA16605: WriteImages (constitute.c:1320)
==22694==    by 0x11043F3: CLINoImageOperator (operation.c:4778)
==22694==    by 0x1107338: CLIOption (operation.c:5238)
==22694==    by 0xF86894: ProcessCommandOptions (magick-cli.c:526)
==22694==    by 0xF87FC2: MagickImageCommand (magick-cli.c:791)
==22694==    by 0xF90DE9: MagickCommandGenesis (mogrify.c:183)
==22694==    by 0x419D10: MagickMain (magick.c:149)
==22694==    by 0x57B882F: (below main) (libc-start.c:291)
==22694==  Address 0x5e5c1a8 is 504 bytes inside a block of size 511 alloc'd
==22694==    at 0x4C2DB8F: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)
==22694==    by 0xC94D0C: AcquireQuantumPixels (quantum.c:175)
==22694==    by 0xC94D0C: SetQuantumDepth (quantum.c:693)
==22694==    by 0xC9571A: AcquireQuantumInfo (quantum.c:125)
==22694==    by 0x81F2E0: WritePSDChannel (psd.c:2514)
==22694==    by 0x82E6B8: WritePSDChannels (psd.c:2683)
==22694==    by 0x82E6B8: WritePSDImage (psd.c:3359)
==22694==    by 0xA148B7: WriteImage (constitute.c:1101)
==22694==    by 0xA16605: WriteImages (constitute.c:1320)
==22694==    by 0x11043F3: CLINoImageOperator (operation.c:4778)
==22694==    by 0x1107338: CLIOption (operation.c:5238)
==22694==    by 0xF86894: ProcessCommandOptions (magick-cli.c:526)
==22694==    by 0xF87FC2: MagickImageCommand (magick-cli.c:791)
==22694==    by 0xF90DE9: MagickCommandGenesis (mogrify.c:183)
==22694==
==22694== Invalid read of size 16
==22694==    at 0x81FFF1: WritePSDChannel (psd.c:2549)
==22694==    by 0x82E6B8: WritePSDChannels (psd.c:2683)
==22694==    by 0x82E6B8: WritePSDImage (psd.c:3359)
==22694==    by 0xA148B7: WriteImage (constitute.c:1101)
==22694==    by 0xA16605: WriteImages (constitute.c:1320)
==22694==    by 0x11043F3: CLINoImageOperator (operation.c:4778)
==22694==    by 0x1107338: CLIOption (operation.c:5238)
==22694==    by 0xF86894: ProcessCommandOptions (magick-cli.c:526)
==22694==    by 0xF87FC2: MagickImageCommand (magick-cli.c:791)
==22694==    by 0xF90DE9: MagickCommandGenesis (mogrify.c:183)
==22694==    by 0x419D10: MagickMain (magick.c:149)
==22694==    by 0x57B882F: (below main) (libc-start.c:291)
==22694==  Address 0x5e5c1b0 is 1 bytes after a block of size 511 alloc'd
==22694==    at 0x4C2DB8F: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)
==22694==    by 0xC94D0C: AcquireQuantumPixels (quantum.c:175)
==22694==    by 0xC94D0C: SetQuantumDepth (quantum.c:693)
==22694==    by 0xC9571A: AcquireQuantumInfo (quantum.c:125)
==22694==    by 0x81F2E0: WritePSDChannel (psd.c:2514)
==22694==    by 0x82E6B8: WritePSDChannels (psd.c:2683)
==22694==    by 0x82E6B8: WritePSDImage (psd.c:3359)
==22694==    by 0xA148B7: WriteImage (constitute.c:1101)
==22694==    by 0xA16605: WriteImages (constitute.c:1320)
==22694==    by 0x11043F3: CLINoImageOperator (operation.c:4778)
==22694==    by 0x1107338: CLIOption (operation.c:5238)
==22694==    by 0xF86894: ProcessCommandOptions (magick-cli.c:526)
==22694==    by 0xF87FC2: MagickImageCommand (magick-cli.c:791)
==22694==    by 0xF90DE9: MagickCommandGenesis (mogrify.c:183)
==22694==
==22694== Invalid write of size 8
==22694==    at 0x81FFF8: WritePSDChannel (psd.c:2549)
==22694==    by 0x82E6B8: WritePSDChannels (psd.c:2683)
==22694==    by 0x82E6B8: WritePSDImage (psd.c:3359)
==22694==    by 0xA148B7: WriteImage (constitute.c:1101)
==22694==    by 0xA16605: WriteImages (constitute.c:1320)
==22694==    by 0x11043F3: CLINoImageOperator (operation.c:4778)
==22694==    by 0x1107338: CLIOption (operation.c:5238)
==22694==    by 0xF86894: ProcessCommandOptions (magick-cli.c:526)
==22694==    by 0xF87FC2: MagickImageCommand (magick-cli.c:791)
==22694==    by 0xF90DE9: MagickCommandGenesis (mogrify.c:183)
==22694==    by 0x419D10: MagickMain (magick.c:149)
==22694==    by 0x57B882F: (below main) (libc-start.c:291)
==22694==  Address 0x5e5c1b0 is 1 bytes after a block of size 511 alloc'd
==22694==    at 0x4C2DB8F: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)
==22694==    by 0xC94D0C: AcquireQuantumPixels (quantum.c:175)
==22694==    by 0xC94D0C: SetQuantumDepth (quantum.c:693)
==22694==    by 0xC9571A: AcquireQuantumInfo (quantum.c:125)
==22694==    by 0x81F2E0: WritePSDChannel (psd.c:2514)
==22694==    by 0x82E6B8: WritePSDChannels (psd.c:2683)
==22694==    by 0x82E6B8: WritePSDImage (psd.c:3359)
==22694==    by 0xA148B7: WriteImage (constitute.c:1101)
==22694==    by 0xA16605: WriteImages (constitute.c:1320)
==22694==    by 0x11043F3: CLINoImageOperator (operation.c:4778)
==22694==    by 0x1107338: CLIOption (operation.c:5238)
==22694==    by 0xF86894: ProcessCommandOptions (magick-cli.c:526)
==22694==    by 0xF87FC2: MagickImageCommand (magick-cli.c:791)
==22694==    by 0xF90DE9: MagickCommandGenesis (mogrify.c:183)
==22694==
==22694== Invalid read of size 16
==22694==    at 0x81FF59: WritePSDChannel (psd.c:2549)
==22694==    by 0x82E6B8: WritePSDChannels (psd.c:2683)
==22694==    by 0x82E6B8: WritePSDImage (psd.c:3359)
==22694==    by 0xA148B7: WriteImage (constitute.c:1101)
==22694==    by 0xA16605: WriteImages (constitute.c:1320)
==22694==    by 0x11043F3: CLINoImageOperator (operation.c:4778)
==22694==    by 0x1107338: CLIOption (operation.c:5238)
==22694==    by 0xF86894: ProcessCommandOptions (magick-cli.c:526)
==22694==    by 0xF87FC2: MagickImageCommand (magick-cli.c:791)
==22694==    by 0xF90DE9: MagickCommandGenesis (mogrify.c:183)
==22694==    by 0x419D10: MagickMain (magick.c:149)
==22694==    by 0x57B882F: (below main) (libc-start.c:291)
==22694==  Address 0x5e5c1c0 is 17 bytes after a block of size 511 alloc'd
==22694==    at 0x4C2DB8F: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)
==22694==    by 0xC94D0C: AcquireQuantumPixels (quantum.c:175)
==22694==    by 0xC94D0C: SetQuantumDepth (quantum.c:693)
==22694==    by 0xC9571A: AcquireQuantumInfo (quantum.c:125)
==22694==    by 0x81F2E0: WritePSDChannel (psd.c:2514)
==22694==    by 0x82E6B8: WritePSDChannels (psd.c:2683)
==22694==    by 0x82E6B8: WritePSDImage (psd.c:3359)
==22694==    by 0xA148B7: WriteImage (constitute.c:1101)
==22694==    by 0xA16605: WriteImages (constitute.c:1320)
==22694==    by 0x11043F3: CLINoImageOperator (operation.c:4778)
==22694==    by 0x1107338: CLIOption (operation.c:5238)
==22694==    by 0xF86894: ProcessCommandOptions (magick-cli.c:526)
==22694==    by 0xF87FC2: MagickImageCommand (magick-cli.c:791)
==22694==    by 0xF90DE9: MagickCommandGenesis (mogrify.c:183)
==22694==
==22694== Invalid write of size 8
==22694==    at 0x81FF5F: WritePSDChannel (psd.c:2549)
==22694==    by 0x82E6B8: WritePSDChannels (psd.c:2683)
==22694==    by 0x82E6B8: WritePSDImage (psd.c:3359)
==22694==    by 0xA148B7: WriteImage (constitute.c:1101)
==22694==    by 0xA16605: WriteImages (constitute.c:1320)
==22694==    by 0x11043F3: CLINoImageOperator (operation.c:4778)
==22694==    by 0x1107338: CLIOption (operation.c:5238)
==22694==    by 0xF86894: ProcessCommandOptions (magick-cli.c:526)
==22694==    by 0xF87FC2: MagickImageCommand (magick-cli.c:791)
==22694==    by 0xF90DE9: MagickCommandGenesis (mogrify.c:183)
==22694==    by 0x419D10: MagickMain (magick.c:149)
==22694==    by 0x57B882F: (below main) (libc-start.c:291)
==22694==  Address 0x5e5c1c0 is 17 bytes after a block of size 511 alloc'd
==22694==    at 0x4C2DB8F: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)
==22694==    by 0xC94D0C: AcquireQuantumPixels (quantum.c:175)
==22694==    by 0xC94D0C: SetQuantumDepth (quantum.c:693)
==22694==    by 0xC9571A: AcquireQuantumInfo (quantum.c:125)
==22694==    by 0x81F2E0: WritePSDChannel (psd.c:2514)
==22694==    by 0x82E6B8: WritePSDChannels (psd.c:2683)
==22694==    by 0x82E6B8: WritePSDImage (psd.c:3359)
==22694==    by 0xA148B7: WriteImage (constitute.c:1101)
==22694==    by 0xA16605: WriteImages (constitute.c:1320)
==22694==    by 0x11043F3: CLINoImageOperator (operation.c:4778)
==22694==    by 0x1107338: CLIOption (operation.c:5238)
==22694==    by 0xF86894: ProcessCommandOptions (magick-cli.c:526)
==22694==    by 0xF87FC2: MagickImageCommand (magick-cli.c:791)
==22694==    by 0xF90DE9: MagickCommandGenesis (mogrify.c:183)
==22694==

valgrind: m_mallocfree.c:303 (get_bszB_as_is): Assertion 'bszB_lo == bszB_hi' failed.
valgrind: Heap block lo/hi size mismatch: lo = 576, hi = 0.
This is probably caused by your program erroneously writing past the
end of a heap block and corrupting heap metadata.  If you fix any
invalid writes reported by Memcheck, this assertion failure will
probably go away.  Please try that before reporting this as a bug.

host stacktrace:
==22694==    at 0x38083F48: ??? (in /usr/lib/valgrind/memcheck-amd64-linux)
==22694==    by 0x38084064: ??? (in /usr/lib/valgrind/memcheck-amd64-linux)
==22694==    by 0x380841F1: ??? (in /usr/lib/valgrind/memcheck-amd64-linux)
==22694==    by 0x38091A9C: ??? (in /usr/lib/valgrind/memcheck-amd64-linux)
==22694==    by 0x3807D673: ??? (in /usr/lib/valgrind/memcheck-amd64-linux)
==22694==    by 0x3807BF03: ??? (in /usr/lib/valgrind/memcheck-amd64-linux)
==22694==    by 0x380800DA: ??? (in /usr/lib/valgrind/memcheck-amd64-linux)
==22694==    by 0x3807B49A: ??? (in /usr/lib/valgrind/memcheck-amd64-linux)
==22694==    by 0x8045DDEC5: ???

sched status:
  running_tid=1

Thread 1: status = VgTs_Runnable (lwpid 22694)
==22694==    at 0x81FF6D: WritePSDChannel (psd.c:2549)
==22694==    by 0x82E6B8: WritePSDChannels (psd.c:2683)
==22694==    by 0x82E6B8: WritePSDImage (psd.c:3359)
==22694==    by 0xA148B7: WriteImage (constitute.c:1101)
==22694==    by 0xA16605: WriteImages (constitute.c:1320)
==22694==    by 0x11043F3: CLINoImageOperator (operation.c:4778)
==22694==    by 0x1107338: CLIOption (operation.c:5238)
==22694==    by 0xF86894: ProcessCommandOptions (magick-cli.c:526)
==22694==    by 0xF87FC2: MagickImageCommand (magick-cli.c:791)
==22694==    by 0xF90DE9: MagickCommandGenesis (mogrify.c:183)
==22694==    by 0x419D10: MagickMain (magick.c:149)
==22694==    by 0x57B882F: (below main) (libc-start.c:291)

Thread 2: status = VgTs_WaitSys (lwpid 22695)
==22694==    at 0x4E4BD22: ??? (in /usr/lib/x86_64-linux-gnu/libgomp.so.1.0.0)
==22694==    by 0x4E49449: ??? (in /usr/lib/x86_64-linux-gnu/libgomp.so.1.0.0)
==22694==    by 0x55826B9: start_thread (pthread_create.c:333)
==22694==    by 0x589E82C: clone (clone.S:109)

```

Backtrace:

```
(gdb) bt
#0  ExportRedQuantum (exception=0x2, q=<optimized out>, p=<optimized out>, number_pixels=196856, quantum_info=0x1547990, image=0x1577dd0)
    at MagickCore/quantum-export.c:3069
#1  ExportQuantumPixels (image=image@entry=0x1577dd0, image_view=image_view@entry=0x0, quantum_info=quantum_info@entry=0x1547990,
    quantum_type=quantum_type@entry=RedQuantum, pixels=<optimized out>, pixels@entry=0x1570440 '\377' <repeats 200 times>..., exception=exception@entry=0x154a350)
    at MagickCore/quantum-export.c:4045
#2  0x000000000081f40e in WritePSDChannel (psd_info=psd_info@entry=0x7fffffff7c60, image_info=image_info@entry=0x154d700, image=image@entry=0x1706c60,
    next_image=next_image@entry=0x1577dd0, quantum_type=quantum_type@entry=RedQuantum, compact_pixels=compact_pixels@entry=0x0, size_offset=144, separate=MagickTrue,
    exception=0x154a350) at coders/psd.c:2545
#3  0x000000000082e6b9 in WritePSDChannels (separate=MagickTrue, exception=<optimized out>, size_offset=92, next_image=0x1577dd0, image=<optimized out>,
    image_info=<optimized out>, psd_info=0x7fffffff7c60) at coders/psd.c:2683
#4  WritePSDImage (image_info=0x154d700, image=<optimized out>, exception=0x154a350) at coders/psd.c:3359
#5  0x0000000000a148b8 in WriteImage (image_info=image_info@entry=0x1565f40, image=image@entry=0x1706c60, exception=exception@entry=0x154a350)
    at MagickCore/constitute.c:1101
#6  0x0000000000a16606 in WriteImages (image_info=image_info@entry=0x1572b80, images=<optimized out>, images@entry=0x1706c60, filename=<optimized out>,
    exception=0x154a350) at MagickCore/constitute.c:1320
#7  0x00000000011043f4 in CLINoImageOperator (cli_wand=cli_wand@entry=0x1548b70, option=option@entry=0x11e4361 "-write", arg1n=arg1n@entry=0x7fffffffe6e8 "/dev/null",
    arg2n=arg2n@entry=0x0) at MagickWand/operation.c:4778
#8  0x0000000001107339 in CLIOption (cli_wand=cli_wand@entry=0x1548b70, option=option@entry=0x11e4361 "-write") at MagickWand/operation.c:5238
#9  0x0000000000f86895 in ProcessCommandOptions (cli_wand=cli_wand@entry=0x1548b70, argc=argc@entry=3, argv=argv@entry=0x7fffffffe428, index=index@entry=1)
    at MagickWand/magick-cli.c:526
#10 0x0000000000f87fc3 in MagickImageCommand (image_info=image_info@entry=0x154a4d0, argc=argc@entry=3, argv=argv@entry=0x7fffffffe428,
    metadata=metadata@entry=0x7fffffffc0d0, exception=exception@entry=0x154a350) at MagickWand/magick-cli.c:791
#11 0x0000000000f90dea in MagickCommandGenesis (image_info=image_info@entry=0x154a4d0, command=command@entry=0xf86bf0 <MagickImageCommand>, argc=argc@entry=3,
    argv=argv@entry=0x7fffffffe428, metadata=0x0, exception=exception@entry=0x154a350) at MagickWand/mogrify.c:183
#12 0x0000000000419d11 in MagickMain (argc=3, argv=0x7fffffffe428) at utilities/magick.c:149
#13 0x00007ffff70d0830 in __libc_start_main (main=0x4060d0 <main>, argc=3, argv=0x7fffffffe428, init=<optimized out>, fini=<optimized out>, rtld_fini=<optimized out>,
    stack_end=0x7fffffffe418) at ../csu/libc-start.c:291
#14 0x00000000004198a9 in _start ()

```

PoC:

<https://github.com/Miladbr/public-poc/blob/master/imagemagick/7.psb>

## Metadata

### Assignees

No one assigned

### Labels

[bug](https://github.com/ImageMagick/ImageMagick/issues?q=state%3Aopen%20label%3A%22bug%22)
### Type

No type
### Projects

No projects
### Milestone

No milestone

### Relationships

None yet
### Development

No branches or pull requests
## Issue actions

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from www.openwall.com_ffa5cb0e_20250125_161309.html ===


| [Openwall](/) * [Products](/)   + [Openwall GNU/\*/Linux   *server OS*](/Owl/)+ [Linux Kernel Runtime Guard](/lkrg/)+ [John the Ripper   *password cracker*](/john/)         - [Free & Open Source for any platform](/john/)- [in the cloud](/john/cloud/)- [Pro for Linux](/john/pro/linux/)- [Pro for macOS](/john/pro/macosx/)+ [Wordlists   *for password cracking*](/wordlists/)+ [passwdqc   *policy enforcement*](/passwdqc/)             - [Free & Open Source for Unix](/passwdqc/)- [Pro for Windows (Active Directory)](/passwdqc/windows/)+ [yescrypt   *KDF & password hashing*](/yescrypt/)+ [yespower   *Proof-of-Work (PoW)*](/yespower/)+ [crypt\_blowfish   *password hashing*](/crypt/)+ [phpass   *ditto in PHP*](/phpass/)+ [tcb   *better password shadowing*](/tcb/)+ [Pluggable Authentication Modules](/pam/)+ [scanlogd   *port scan detector*](/scanlogd/)+ [popa3d   *tiny POP3 daemon*](/popa3d/)+ [blists   *web interface to mailing lists*](/blists/)+ [msulogin   *single user mode login*](/msulogin/)+ [php\_mt\_seed   *mt\_rand() cracker*](/php_mt_seed/)* [Services](/services/)* Publications       + [Articles](/articles/)+ [Presentations](/presentations/)* Resources         + [Mailing lists](/lists/)+ [Community wiki](https://openwall.info/wiki/)+ [Source code repositories (GitHub)](https://github.com/openwall)+ [Source code repositories (CVSweb)](https://cvsweb.openwall.com)+ [File archive & mirrors](/mirrors/)+ [How to verify digital signatures](/signatures/)+ [OVE IDs](/ove/)* [What's new](/news) | |
| --- | --- |

| | [Follow @Openwall on Twitter for new release announcements and other news](https://twitter.com/openwall) | | --- | |
| --- | --- |

[[<prev]](4) [[next>]](6) [[<thread-prev]](../../../2017/01/16/6) [[day]](.) [[month]](..) [[year]](../..) [[list]](../../..)
```

Message-ID: <95cf924f96704145a7123025342907fa@imshyb01.MITRE.ORG>
Date: Mon, 16 Jan 2017 19:13:04 -0500
From: <cve-assign@...re.org>
To: <carnil@...ian.org>
CC: <cve-assign@...re.org>, <oss-security@...ts.openwall.com>,
	<roucaries.bastien+debian@...il.com>
Subject: Re: CVE Request: Imagemagick: various flaws: memory corruption, out-of-bounds writes, memory leaks, double-frees, off-by-one errors

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA256

> [] coders/ipl.c: "ipl file missing malloc check"
> Debian Bug: <https://bugs.debian.org/851485>
> Fixed by: <https://github.com/ImageMagick/ImageMagick/commit/97566cf2806c0a5a86e884c96831a0c3b1ec6c20>

Use CVE-2016-10144.

> [] coders/wpg.c: off-by-one error
> Debian Bug: <https://bugs.debian.org/851483>
> Fixed by: <https://github.com/ImageMagick/ImageMagick/commit/d23beebe7b1179fb75db1e85fbca3100e49593d9>

Use CVE-2016-10145.

> [] magick/profile.c: double-free memory corruption
> Debian Bug: <https://bugs.debian.org/851383>
> Upstream Bug: <https://github.com/ImageMagick/ImageMagick/issues/354>
> Fixed by: <https://github.com/ImageMagick/ImageMagick/commit/6235f1f7a9f7b0f83b197f6cd0073dbb6602d0fb>

Use CVE-2017-5506.

> [] coders/mpc.c: memory leak in mpc file handling
> Debian Bug: <https://bugs.debian.org/851382>
> Fixed by: <https://github.com/ImageMagick/ImageMagick/commit/4493d9ca1124564da17f9b628ef9d0f1a6be9738>

Use CVE-2017-5507.

> [] PushQuantumPixel heap buffer-overflow
> Debian Bug: <https://bugs.debian.org/851381>
> Upstream report: <https://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=31161>
> <https://github.com/ImageMagick/ImageMagick/commit/c073a7712d82476b5fbee74856c46b88af9c3175>

Use CVE-2017-5508.

> [] memory leak in caption and label handling
> Debian Bug: <https://bugs.debian.org/851380>
> Fixed by: <https://github.com/ImageMagick/ImageMagick/commit/aeff00de228bc5a158c2a975ab47845d8a1db456>

Use CVE-2016-10146.

> [] coders/psd.c: out-of-bounds write flaw in psd file handling
> Debian Bug: <https://bugs.debian.org/851377>
> Upstream report: <https://github.com/ImageMagick/ImageMagick/issues/350>

Use CVE-2017-5509.

> [] coders/psd.c: out-of-bounds write flaw in psd file handling
> (different issue from the above)
> Debian Bug: <https://bugs.debian.org/851376>
> Upstream report: <https://github.com/ImageMagick/ImageMagick/issues/348>

Use CVE-2017-5510.

> [] coders/psd.c: memory corruption heap overflow
> Debian Bug: <https://bugs.debian.org/851374>
> Upstream report: <https://github.com/ImageMagick/ImageMagick/issues/347>

Use CVE-2017-5511.

- --
CVE Assignment Team
M/S M300, 202 Burlington Road, Bedford, MA 01730 USA
[ A PGP key is available for encrypted communications at
  <http://cve.mitre.org/cve/request_id.html> ]
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1

iQIcBAEBCAAGBQJYfV+eAAoJEHb/MwWLVhi2QIcQALYMUMbHIVzC/24Y52Ew+i4A
r5V0YSNAC0vPdKoF4zbpOeeOfQjrvPhdM4t0cvcRZnzNvlig81CyB4O72791d6Gz
g6HJ0Gnmkl9evckmw4vT9zVknf1FZ+q3bMe1rRR2b8JfhI4ZMLaPQcc9r7KapN9C
pMh/Am+PT+h3OZN+GQQnPj5MHgr2znYROM1tiqi9roj4E5HTBJmGoDypd503TTI8
ljbje8cmCykJsy+te/qft5avhYujLkiVABu/jOgfxL+8lWXPWS8rRjgspgpt34Hl
S7J+L5FX5U2AAutwLxmzTM7sI+eyLWZtAJOBJ0tS0/mhQ236F1T7zwQRzSlhKxBY
1u/SbXLckTlXaeKqzxglSUUgJCFeCFLdMfT0jwlrP7wbMD8BxhHBAuiEulNRJOFA
JOrZAClEJv4toG2+Cd9CxDFosqaih2PB0uDIantimLB50zWBrytcNel7UMxrpH1K
QXYxUpuzc/Odr7KvuFS0n1QislNiRzdEIt9VnvF8RWrgBwYe/Xh78YGFgB8K0GdW
9gHoI9FOAAqP1g/+6Rwh2NJvIAraEthQQzPNNvazCKrCYeyCflMlc4uypAkFxyQS
Pw6B5RNiWcH1UewKJnglJpgMboXkEFMRjZg3ccLYTet9qn4M4bbn5m2iQGJQYzwn
6HF+uhc12KUYrnrDbJp2
=Io2X
-----END PGP SIGNATURE-----

```

[Powered by blists](https://www.openwall.com/blists/) - [more mailing lists](https://lists.openwall.net)

Please check out the
[Open Source Software Security Wiki](https://oss-security.openwall.org/wiki/), which is counterpart to this
[mailing list](https://oss-security.openwall.org/wiki/mailing-lists/oss-security).

Confused about [mailing lists](/lists/) and their use?
[Read about mailing lists on Wikipedia](https://en.wikipedia.org/wiki/Electronic_mailing_list)
and check out these
[guidelines on proper formatting of your messages](https://www.complang.tuwien.ac.at/anton/mail-news-errors.html).



=== Content from security.gentoo.org_5c5c72c7_20250125_161321.html ===

[![Gentoo](https://assets.gentoo.org/tyrian/v2/site-logo.png)](/ "Back to the homepage")
Security

[**Get Gentoo!**](https://get.gentoo.org/)
gentoo.org sites
[gentoo.org](https://www.gentoo.org/ "Main Gentoo website")
[Wiki](https://wiki.gentoo.org/ "Find and contribute documentation")
[Bugs](https://bugs.gentoo.org/ "Report issues and find common issues")
[Forums](https://forums.gentoo.org/ "Discuss with the community")
[Packages](https://packages.gentoo.org/ "Find software for your Gentoo")

[Planet](https://planet.gentoo.org/ "Find out what's going on in the developer community")
[Archives](https://archives.gentoo.org/ "Read up on past discussions")
[Sources](https://sources.gentoo.org/ "Browse our source code")

[Infra Status](https://infra-status.gentoo.org/ "Get updates on the services provided by Gentoo")

* [Home](/)
* [Stay informed](/subscribe)
* [Advisories](/glsa)

# ImageMagick: Multiple vulnerabilities — GLSA **201702-09**

Multiple vulnerabilities have been found in ImageMagick, the worst
of which allows remote attackers to execute arbitrary code.

### Affected packages

| Package | **media-gfx/imagemagick** on all architectures |
| --- | --- |
| Affected versions | < **6.9.7.4** |
| Unaffected versions | >= **6.9.7.4** |

### Background

ImageMagick is a collection of tools and libraries for many image
formats.

### Description

Multiple vulnerabilities have been discovered in ImageMagick. Please
review the CVE identifiers referenced below for details.

### Impact

A remote attacker, by enticing a user to process a specially crafted
image file, could execute arbitrary code with the privileges of the
process or cause a Denial of Service condition.

### Workaround

There is no known workaround at this time.

### Resolution

All ImageMagick users should upgrade to the latest version:

```
 # emerge --sync
 # emerge --ask --oneshot --verbose ">=media-gfx/imagemagick-6.9.7.4"

```
### References

* [CVE-2016-10144](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2016-10144)
* [CVE-2016-10145](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2016-10145)
* [CVE-2016-10146](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2016-10146)
* [CVE-2016-9298](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2016-9298)
* [CVE-2017-5506](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2017-5506)
* [CVE-2017-5507](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2017-5507)
* [CVE-2017-5508](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2017-5508)
* [CVE-2017-5509](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2017-5509)
* [CVE-2017-5510](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2017-5510)
* [CVE-2017-5511](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2017-5511)

**Release date**

February 17, 2017

**Latest revision**

February 17, 2017: 2

**Severity**

normal

**Exploitable**

remote

**Bugzilla entries**

* [599744](https://bugs.gentoo.org/show_bug.cgi?id=599744)
* [606654](https://bugs.gentoo.org/show_bug.cgi?id=606654)

### Questions or comments?

Please feel free to contact us.

**© 2001–2020 Gentoo Foundation, Inc.**



=== Content from www.openwall.com_e7eb88d5_20250125_161308.html ===


| [Openwall](/) * [Products](/)   + [Openwall GNU/\*/Linux   *server OS*](/Owl/)+ [Linux Kernel Runtime Guard](/lkrg/)+ [John the Ripper   *password cracker*](/john/)         - [Free & Open Source for any platform](/john/)- [in the cloud](/john/cloud/)- [Pro for Linux](/john/pro/linux/)- [Pro for macOS](/john/pro/macosx/)+ [Wordlists   *for password cracking*](/wordlists/)+ [passwdqc   *policy enforcement*](/passwdqc/)             - [Free & Open Source for Unix](/passwdqc/)- [Pro for Windows (Active Directory)](/passwdqc/windows/)+ [yescrypt   *KDF & password hashing*](/yescrypt/)+ [yespower   *Proof-of-Work (PoW)*](/yespower/)+ [crypt\_blowfish   *password hashing*](/crypt/)+ [phpass   *ditto in PHP*](/phpass/)+ [tcb   *better password shadowing*](/tcb/)+ [Pluggable Authentication Modules](/pam/)+ [scanlogd   *port scan detector*](/scanlogd/)+ [popa3d   *tiny POP3 daemon*](/popa3d/)+ [blists   *web interface to mailing lists*](/blists/)+ [msulogin   *single user mode login*](/msulogin/)+ [php\_mt\_seed   *mt\_rand() cracker*](/php_mt_seed/)* [Services](/services/)* Publications       + [Articles](/articles/)+ [Presentations](/presentations/)* Resources         + [Mailing lists](/lists/)+ [Community wiki](https://openwall.info/wiki/)+ [Source code repositories (GitHub)](https://github.com/openwall)+ [Source code repositories (CVSweb)](https://cvsweb.openwall.com)+ [File archive & mirrors](/mirrors/)+ [How to verify digital signatures](/signatures/)+ [OVE IDs](/ove/)* [What's new](/news) | |
| --- | --- |

| | [Hash Suite - Windows password security audit tool. GUI, reports in PDF.](https://hashsuite.openwall.net) | | --- | |
| --- | --- |

[[<prev]](5) [[next>]](../../../2017/01/17/1) [[thread-next>]](../../../2017/01/17/5) [[day]](.) [[month]](..) [[year]](../..) [[list]](../../..)
```

Message-ID: <20170116201621.h7ywb7fa6t72jcpc@eldamar.local>
Date: Mon, 16 Jan 2017 21:16:21 +0100
From: Salvatore Bonaccorso <carnil@...ian.org>
To: OSS Security Mailinglist <oss-security@...ts.openwall.com>
Cc: Bastien ROUCARIÈS <roucaries.bastien+debian@...il.com>
Subject: CVE Request: Imagemagick: various flaws: memory corruption,
 out-of-bounds writes, memory leaks, double-frees, off-by-one errors

Hi

The Debian package maintainer for ImageMagick reported several flaws
in the Debian bugtracker, which might warrant an identifier. It is
planned to fix those at least for the unstable distribution. I'm
listing those with the given references by Bastien. Please include him
in case of questions needed.

- coders/ipl.c: "ipl file missing malloc check"
Debian Bug: <https://bugs.debian.org/851485>
Fixed by: <https://github.com/ImageMagick/ImageMagick/commit/97566cf2806c0a5a86e884c96831a0c3b1ec6c20>

- coders/wpg.c: off-by-one error
Debian Bug: <https://bugs.debian.org/851483>
Fixed by: <https://github.com/ImageMagick/ImageMagick/commit/d23beebe7b1179fb75db1e85fbca3100e49593d9>

- magick/profile.c: double-free memory corruption
Debian Bug: <https://bugs.debian.org/851383>
Upstream Bug: <https://github.com/ImageMagick/ImageMagick/issues/354>
Fixed by: <https://github.com/ImageMagick/ImageMagick/commit/6235f1f7a9f7b0f83b197f6cd0073dbb6602d0fb>

- coders/mpc.c: memory leak in mpc file handling
Debian Bug: <https://bugs.debian.org/851382>
Fixed by: <https://github.com/ImageMagick/ImageMagick/commit/4493d9ca1124564da17f9b628ef9d0f1a6be9738>

- PushQuantumPixel heap buffer-overflow
Debian Bug: <https://bugs.debian.org/851381>
Upstream report: <https://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=31161>

- memory leak in caption and label handling
Debian Bug: <https://bugs.debian.org/851380>
Fixed by: <https://github.com/ImageMagick/ImageMagick/commit/aeff00de228bc5a158c2a975ab47845d8a1db456>

- coders/psd.c: out-of-bounds write flaw in psd file handling
Debian Bug: <https://bugs.debian.org/851377>
Upstream report: <https://github.com/ImageMagick/ImageMagick/issues/350>

- coders/psd.c: out-of-bounds write flaw in psd file handling
(different issue from the above)
Debian Bug: <https://bugs.debian.org/851376>
Upstream report: <https://github.com/ImageMagick/ImageMagick/issues/348>

- coders/psd.c: memory corruption heap overflow
Debian Bug: <https://bugs.debian.org/851374>
Upstream report: <https://github.com/ImageMagick/ImageMagick/issues/347>

Could you assign identifiers for those issues?

Regards,
Salvatore

```

[Powered by blists](https://www.openwall.com/blists/) - [more mailing lists](https://lists.openwall.net)

Please check out the
[Open Source Software Security Wiki](https://oss-security.openwall.org/wiki/), which is counterpart to this
[mailing list](https://oss-security.openwall.org/wiki/mailing-lists/oss-security).

Confused about [mailing lists](/lists/) and their use?
[Read about mailing lists on Wikipedia](https://en.wikipedia.org/wiki/Electronic_mailing_list)
and check out these
[guidelines on proper formatting of your messages](https://www.complang.tuwien.ac.at/anton/mail-news-errors.html).



=== Content from www.debian.org_3c25ee49_20250125_161308.html ===


---

[[Date Prev](msg00051.html)][[Date Next](msg00053.html)]
[[Thread Prev](msg00051.html)][[Thread Next](msg00053.html)]
[[Date Index](maillist.html#00052)]
[[Thread Index](threads.html#00052)]

# [SECURITY] [DSA 3799-1] imagemagick security update

---

* *To*: debian-security-announce@lists.debian.org
* *Subject*: [SECURITY] [DSA 3799-1] imagemagick security update
* *From*: Moritz Muehlenhoff <jmm@debian.org>
* *Date*: Wed, 1 Mar 2017 23:06:44 +0100
* *Message-id*: <[[🔎]](/msgid-search/20170301220644.yhbgjxmvbxmdrvfb%40pisco.westfalen.local) [20170301220644.yhbgjxmvbxmdrvfb@pisco.westfalen.local](msg00052.html)>
* *Reply-to*: debian-security-announce-request@lists.debian.org

---

```
-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA256

- -------------------------------------------------------------------------
Debian Security Advisory DSA-3799-1                   security@debian.org
<https://www.debian.org/security/>                       Moritz Muehlenhoff
March 01, 2017                        <https://www.debian.org/security/faq>
- -------------------------------------------------------------------------

Package        : imagemagick
CVE ID         : CVE-2016-8707 CVE-2016-10062 CVE-2016-10144
                 CVE-2016-10145 CVE-2016-10146 CVE-2017-5506
		 CVE-2017-5507 CVE-2017-5508 CVE-2017-5510 CVE-2017-5511
Debian Bug     : 851485 851483 851380 848139 851383 851382 851381
                 851374 851376 849439

This update fixes several vulnerabilities in imagemagick: Various
memory handling problems and cases of missing or incomplete input
sanitising may result in denial of service or the execution of arbitrary
code if malformed TIFF, WPG, IPL, MPC or PSB files are processed.

For the stable distribution (jessie), these problems have been fixed in
version 8:6.8.9.9-5+deb8u7.

For the testing distribution (stretch), these problems have been fixed
in version 8:6.9.7.4+dfsg-1.

For the unstable distribution (sid), these problems have been fixed in
version 8:6.9.7.4+dfsg-1.

We recommend that you upgrade your imagemagick packages.

Further information about Debian Security Advisories, how to apply
these updates to your system and frequently asked questions can be
found at: <https://www.debian.org/security/>

Mailing list: debian-security-announce@lists.debian.org
-----BEGIN PGP SIGNATURE-----

iQIzBAEBCAAdFiEEtuYvPRKsOElcDakFEMKTtsN8TjYFAli3Rc0ACgkQEMKTtsN8
TjaZyBAAvpqXuKYu/KCtgEPVX5GBced2jpfnF4lwtloM4IEyyKu1z7ov44VyXxJp
mUtgNGQ6HjOW+xSRZyVuGTscxbp4RNZWopJof2Et+/Y4cs3K/yBhatLqeg9qQpeu
IaqsqFQaDK2CYeNgyvLfvlbvjy4Bt4s88RE34SdYulDeinCIsMbF6sEIII1gnchz
5G0GpAL3J0GSu0Lxy1TddW6JboAGVa+nJ/qZAFKAMQq0OLDkoyzpEt3M0ctjV2C4
e1pi4h1h2LXsWeETDkQrTR/q722CGCbPcl4jjLuh6b3EA/+dHu4n3TJ9/HTOoM5u
DtezRsDmCWJ7jwRjpXVu2D5Wjk0XwE6QH2+M9eoJ0jXYfkz64t/FXG5sa6VWd7cN
EUZSAzEuo2cGBBfiDxwvsMbLs3jwCqnf41fTGlS3fVB/Vwn9q4uTO6wZmfWuOP15
s/+vUe65AVH7tGDOtqTxoZLI2tXyutu3AfTie4U84G1KiaKHVg1d33GzKpp7j2m4
+TE8Iv6tnHSfM9VtlS/xvCV42HyjDPYx+A0q/bnKfHlHQupLUAQfArnag+2NpDvz
jUyIaDlxzPq+n42+iYPsf13yIj87B4uHasv50UDemY5j+GWMXbjr/dCb6p61asQU
OcCSNDz0665rlGfqxEo0gsi5B166ui3TMqwNxskDzZnIlIs3H38=
=N9q7
-----END PGP SIGNATURE-----

```

---



=== Content from bugs.debian.org_111e9289_20250125_161312.html ===

# Debian Bug report logs - #851374 imagemagick: CVE-2017-5511: coders/psd.c: memory corruption heap overflow

[![version graph](version.cgi?found=8%3A6.9.6.6%2Bdfsg-2;found=imagemagick%2F8%3A6.8.9.9-5%2Bdeb8u6;found=imagemagick%2F8%3A6.8.9.9-5;found=imagemagick%2F8%3A6.9.6.6%2Bdfsg-1;found=imagemagick%2F8%3A6.7.7.10-5;collapse=1;absolute=0;width=2;fixed=imagemagick%2F8%3A6.9.7.4%2Bdfsg-1;fixed=imagemagick%2F8%3A6.8.9.9-5%2Bdeb8u7;package=imagemagick;height=2)](version.cgi?absolute=0;found=8%3A6.9.6.6%2Bdfsg-2;found=imagemagick%2F8%3A6.8.9.9-5%2Bdeb8u6;found=imagemagick%2F8%3A6.8.9.9-5;found=imagemagick%2F8%3A6.9.6.6%2Bdfsg-1;found=imagemagick%2F8%3A6.7.7.10-5;collapse=1;package=imagemagick;info=1;fixed=imagemagick%2F8%3A6.9.7.4%2Bdfsg-1;fixed=imagemagick%2F8%3A6.8.9.9-5%2Bdeb8u7)

Package:
[imagemagick](pkgreport.cgi?package=imagemagick);
Maintainer for [imagemagick](pkgreport.cgi?package=imagemagick) is [ImageMagick Packaging Team <pkg-gmagick-im-team@lists.alioth.debian.org>](pkgreport.cgi?maint=pkg-gmagick-im-team%40lists.alioth.debian.org); Source for [imagemagick](pkgreport.cgi?package=imagemagick) is [src:imagemagick](pkgreport.cgi?src=imagemagick) ([PTS](https://tracker.debian.org/pkg/imagemagick), [buildd](https://buildd.debian.org/imagemagick), [popcon](https://qa.debian.org/popcon.php?package=imagemagick)).

Reported by: [Bastien ROUCARIÈS <roucaries.bastien+debian@gmail.com>](pkgreport.cgi?submitter=roucaries.bastien%2Bdebian%40gmail.com)

Date: Sat, 14 Jan 2017 13:27:05 UTC

Severity: *serious*

Tags: fixed-upstream, patch, security

Found in versions 8:6.9.6.6+dfsg-2, imagemagick/8:6.8.9.9-5+deb8u6, imagemagick/8:6.8.9.9-5, imagemagick/8:6.9.6.6+dfsg-1, imagemagick/8:6.7.7.10-5

Fixed in versions imagemagick/8:6.9.7.4+dfsg-1, imagemagick/8:6.8.9.9-5+deb8u7

**Done:** Bastien Roucariès <roucaries.bastien+debian@gmail.com>

Bug is archived. No further changes may be made.

Forwarded to <https://github.com/ImageMagick/ImageMagick/issues/347>

Display info messages

View this report as an [mbox folder](bugreport.cgi?bug=851374;mbox=yes), [status mbox](bugreport.cgi?bug=851374;mbox=yes;mboxstatus=yes), [maintainer mbox](bugreport.cgi?bug=851374;mbox=yes;mboxmaint=yes)

---

**Report forwarded**
to `debian-bugs-dist@lists.debian.org, secure-testing-team@lists.alioth.debian.org, ImageMagick Packaging Team <pkg-gmagick-im-team@lists.alioth.debian.org>`:

`Bug#851374`; Package `imagemagick`.
(Sat, 14 Jan 2017 13:27:07 GMT) ([full text](bugreport.cgi?bug=851374;msg=2), [mbox](bugreport.cgi?bug=851374;mbox=yes;msg=2), [link](#1)).

---

**Acknowledgement sent**
to `Bastien ROUCARIÈS <roucaries.bastien+debian@gmail.com>`:

New Bug report received and forwarded. Copy sent to `secure-testing-team@lists.alioth.debian.org, ImageMagick Packaging Team <pkg-gmagick-im-team@lists.alioth.debian.org>`.
(Sat, 14 Jan 2017 13:27:08 GMT) ([full text](bugreport.cgi?bug=851374;msg=4), [mbox](bugreport.cgi?bug=851374;mbox=yes;msg=4), [link](#3)).

---

[Message #5](#5) received at submit@bugs.debian.org ([full text](bugreport.cgi?bug=851374;msg=5), [mbox](bugreport.cgi?bug=851374;mbox=yes;msg=5), reply):

![](/cgi-bin/libravatar.cgi?email=roucaries.bastien%2Bdebian%40gmail.com)
From: Bastien ROUCARIÈS <roucaries.bastien+debian@gmail.com>
To: submit@bugs.debian.org
Subject: [imagemagick] memory corruption heap overflow
Date: Sat, 14 Jan 2017 14:25:12 +0100
```
[[Message part 1](bugreport.cgi?att=0;bug=851374;msg=5) (text/plain, inline)]
```
```
Package: imagemagick
Version:  8:6.7.7.10-5
Severity: serious
Tags: patch security fixed-upstream
X-Debbugs-CC: secure-testing-team@lists.alioth.debian.org
forwarded: <https://github.com/ImageMagick/ImageMagick/issues/347>

Specially crafted PSB file create a memory corruption.

Please open a CVE

```
```
[[signature.asc](bugreport.cgi?att=1;bug=851374;filename=signature.asc;msg=5) (application/pgp-signature, inline)]
```

---

**Added tag(s) pending.**
Request was from `roucaries.bastien@gmail.com`
to `control@bugs.debian.org`.
(Sun, 15 Jan 2017 14:27:04 GMT) ([full text](bugreport.cgi?bug=851374;msg=7), [mbox](bugreport.cgi?bug=851374;mbox=yes;msg=7), [link](#6)).

---

**Information forwarded**
to `debian-bugs-dist@lists.debian.org, ImageMagick Packaging Team <pkg-gmagick-im-team@lists.alioth.debian.org>`:

`Bug#851374`; Package `imagemagick`.
(Sun, 15 Jan 2017 17:54:02 GMT) ([full text](bugreport.cgi?bug=851374;msg=9), [mbox](bugreport.cgi?bug=851374;mbox=yes;msg=9), [link](#8)).

---

**Acknowledgement sent**
to `Bastien ROUCARIÈS <roucaries.bastien+debian@gmail.com>`:

Extra info received and forwarded to list. Copy sent to `ImageMagick Packaging Team <pkg-gmagick-im-team@lists.alioth.debian.org>`.
(Sun, 15 Jan 2017 17:54:02 GMT) ([full text](bugreport.cgi?bug=851374;msg=11), [mbox](bugreport.cgi?bug=851374;mbox=yes;msg=11), [link](#10)).

---

[Message #12](#12) received at 851374@bugs.debian.org ([full text](bugreport.cgi?bug=851374;msg=12), [mbox](bugreport.cgi?bug=851374;mbox=yes;msg=12), reply):

![](/cgi-bin/libravatar.cgi?email=roucaries.bastien%2Bdebian%40gmail.com)
From: Bastien ROUCARIÈS <roucaries.bastien+debian@gmail.com>
Subject: found in stable and unstable
Date: Sun, 15 Jan 2017 18:51:56 +0100
```
[[Message part 1](bugreport.cgi?att=0;bug=851374;msg=12) (text/plain, inline)]
```
```
control: found -1 8:6.8.9.9-5+deb8u6
control: found -1 8:6.8.9.9-5
control: found -1 8:6.9.6.6+dfsg-1
control: found -1  8:6.9.6.6+dfsg-2
```
```
[[signature.asc](bugreport.cgi?att=1;bug=851374;filename=signature.asc;msg=12) (application/pgp-signature, inline)]
```

---

**Marked as found in versions imagemagick/8:6.8.9.9-5+deb8u6.**
Request was from `Bastien ROUCARIÈS <roucaries.bastien+debian@gmail.com>`
to `851374-submit@bugs.debian.org`.
(Sun, 15 Jan 2017 17:54:03 GMT) ([full text](bugreport.cgi?bug=851374;msg=14), [mbox](bugreport.cgi?bug=851374;mbox=yes;msg=14), [link](#13)).

---

**Marked as found in versions imagemagick/8:6.8.9.9-5.**
Request was from `Bastien ROUCARIÈS <roucaries.bastien+debian@gmail.com>`
to `851374-submit@bugs.debian.org`.
(Sun, 15 Jan 2017 17:54:03 GMT) ([full text](bugreport.cgi?bug=851374;msg=16), [mbox](bugreport.cgi?bug=851374;mbox=yes;msg=16), [link](#15)).

---

**Marked as found in versions imagemagick/8:6.9.6.6+dfsg-1.**
Request was from `Bastien ROUCARIÈS <roucaries.bastien+debian@gmail.com>`
to `851374-submit@bugs.debian.org`.
(Sun, 15 Jan 2017 17:54:04 GMT) ([full text](bugreport.cgi?bug=851374;msg=18), [mbox](bugreport.cgi?bug=851374;mbox=yes;msg=18), [link](#17)).

---

**Marked as found in versions 8:6.9.6.6+dfsg-2.**
Request was from `Bastien ROUCARIÈS <roucaries.bastien+debian@gmail.com>`
to `851374-submit@bugs.debian.org`.
(Sun, 15 Jan 2017 17:54:04 GMT) ([full text](bugreport.cgi?bug=851374;msg=20), [mbox](bugreport.cgi?bug=851374;mbox=yes;msg=20), [link](#19)).

---

**Changed Bug title to 'imagemagick: CVE-2017-5511: coders/psd.c: memory corruption heap overflow' from '[imagemagick] memory corruption heap overflow'.**
Request was from `Salvatore Bonaccorso <carnil@debian.org>`
to `control@bugs.debian.org`.
(Tue, 17 Jan 2017 06:24:07 GMT) ([full text](bugreport.cgi?bug=851374;msg=22), [mbox](bugreport.cgi?bug=851374;mbox=yes;msg=22), [link](#21)).

---

**Reply sent**
to `Bastien Roucariès <roucaries.bastien+debian@gmail.com>`:

You have taken responsibility.
(Fri, 20 Jan 2017 19:21:24 GMT) ([full text](bugreport.cgi?bug=851374;msg=24), [mbox](bugreport.cgi?bug=851374;mbox=yes;msg=24), [link](#23)).

---

**Notification sent**
to `Bastien ROUCARIÈS <roucaries.bastien+debian@gmail.com>`:

Bug acknowledged by developer.
(Fri, 20 Jan 2017 19:21:24 GMT) ([full text](bugreport.cgi?bug=851374;msg=26), [mbox](bugreport.cgi?bug=851374;mbox=yes;msg=26), [link](#25)).

---

[Message #27](#27) received at 851374-close@bugs.debian.org ([full text](bugreport.cgi?bug=851374;msg=27), [mbox](bugreport.cgi?bug=851374;mbox=yes;msg=27), reply):

![](/cgi-bin/libravatar.cgi?email=roucaries.bastien%2Bdebian%40gmail.com)
From: Bastien Roucariès <roucaries.bastien+debian@gmail.com>
To: 851374-close@bugs.debian.org
Subject: Bug#851374: fixed in imagemagick 8:6.9.7.4+dfsg-1
Date: Fri, 20 Jan 2017 19:18:54 +0000
```
Source: imagemagick
Source-Version: 8:6.9.7.4+dfsg-1

We believe that the bug you reported is fixed in the latest version of
imagemagick, which is due to be installed in the Debian FTP archive.

A summary of the changes between this version and the previous one is
attached.

Thank you for reporting the bug, which will now be closed.  If you
have further comments please address them to 851374@bugs.debian.org,
and the maintainer will reopen the bug report if appropriate.

Debian distribution maintenance software
pp.
Bastien Roucariès <roucaries.bastien+debian@gmail.com> (supplier of updated imagemagick package)

(This message was generated automatically at their request; if you
believe that there is a problem with it please contact the archive
administrators by mailing ftpmaster@ftp-master.debian.org)

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA512

Format: 1.8
Date: Sun, 15 Jan 2017 16:38:03 +0100
Source: imagemagick
Binary: imagemagick-6-common imagemagick-6-doc libmagickcore-6-headers libmagickwand-6-headers libmagick++-6-headers libimage-magick-perl libmagickcore-6-arch-config imagemagick-6.q16 libmagickcore-6.q16-3 libmagickcore-6.q16-3-extra libmagickcore-6.q16-dev libmagickwand-6.q16-3 libmagickwand-6.q16-dev libmagick++-6.q16-7 libmagick++-6.q16-dev libimage-magick-q16-perl imagemagick-6.q16hdri libmagickcore-6.q16hdri-3 libmagickcore-6.q16hdri-3-extra libmagickcore-6.q16hdri-dev libmagickwand-6.q16hdri-3 libmagickwand-6.q16hdri-dev libmagick++-6.q16hdri-7 libmagick++-6.q16hdri-dev libimage-magick-q16hdri-perl imagemagick-common imagemagick-doc perlmagick libmagickcore-dev libmagickwand-dev libmagick++-dev imagemagick
Architecture: source
Version: 8:6.9.7.4+dfsg-1
Distribution: unstable
Urgency: high
Maintainer: ImageMagick Packaging Team <pkg-gmagick-im-team@lists.alioth.debian.org>
Changed-By: Bastien Roucariès <roucaries.bastien+debian@gmail.com>
Description:
 imagemagick - image manipulation programs -- binaries
 imagemagick-6-common - image manipulation programs -- infrastructure
 imagemagick-6-doc - document files of ImageMagick
 imagemagick-6.q16 - image manipulation programs -- quantum depth Q16
 imagemagick-6.q16hdri - image manipulation programs -- quantum depth Q16HDRI
 imagemagick-common - image manipulation programs -- infrastructure dummy package
 imagemagick-doc - document files of ImageMagick -- dummy package
 libimage-magick-perl - Perl interface to the ImageMagick graphics routines
 libimage-magick-q16-perl - Perl interface to the ImageMagick graphics routines -- Q16 versio
 libimage-magick-q16hdri-perl - Perl interface to the ImageMagick graphics routines -- Q16HDRI ve
 libmagick++-6-headers - object-oriented C++ interface to ImageMagick - header files
 libmagick++-6.q16-7 - C++ interface to ImageMagick -- quantum depth Q16
 libmagick++-6.q16-dev - C++ interface to ImageMagick - development files (Q16)
 libmagick++-6.q16hdri-7 - C++ interface to ImageMagick -- quantum depth Q16HDRI
 libmagick++-6.q16hdri-dev - C++ interface to ImageMagick - development files (Q16HDRI)
 libmagick++-dev - object-oriented C++ interface to ImageMagick -- dummy package
 libmagickcore-6-arch-config - low-level image manipulation library - architecture header files
 libmagickcore-6-headers - low-level image manipulation library - header files
 libmagickcore-6.q16-3 - low-level image manipulation library -- quantum depth Q16
 libmagickcore-6.q16-3-extra - low-level image manipulation library - extra codecs (Q16)
 libmagickcore-6.q16-dev - low-level image manipulation library - development files (Q16)
 libmagickcore-6.q16hdri-3 - low-level image manipulation library -- quantum depth Q16HDRI
 libmagickcore-6.q16hdri-3-extra - low-level image manipulation library - extra codecs (Q16HDRI)
 libmagickcore-6.q16hdri-dev - low-level image manipulation library - development files (Q16HDRI
 libmagickcore-dev - low-level image manipulation library -- dummy package
 libmagickwand-6-headers - image manipulation library - headers files
 libmagickwand-6.q16-3 - image manipulation library -- quantum depth Q16
 libmagickwand-6.q16-dev - image manipulation library - development files (Q16)
 libmagickwand-6.q16hdri-3 - image manipulation library -- quantum depth Q16HDRI
 libmagickwand-6.q16hdri-dev - image manipulation library - development files (Q16HDRI)
 libmagickwand-dev - image manipulation library -- dummy package
 perlmagick - Perl interface to ImageMagick -- dummy package
Closes: [773426](bugreport.cgi?bug=773426) [791460](bugreport.cgi?bug=791460) [793629](bugreport.cgi?bug=793629) [849439](bugreport.cgi?bug=849439) [849507](bugreport.cgi?bug=849507) [851374](bugreport.cgi?bug=851374) [851376](bugreport.cgi?bug=851376) [851377](bugreport.cgi?bug=851377) [851381](bugreport.cgi?bug=851381) [851382](bugreport.cgi?bug=851382) [851383](bugreport.cgi?bug=851383) [851483](bugreport.cgi?bug=851483) [851485](bugreport.cgi?bug=851485)
Changes:
 imagemagick (8:6.9.7.4+dfsg-1) unstable; urgency=high
 .
   * New upstream version:
     + Fix display -loop option not working/missing (Closes: #[793629](bugreport.cgi?bug=793629)).
     + Honor $TMPDIR (Closes: #[791460](bugreport.cgi?bug=791460)).
     + Fix inverted colors for monochrome images (Closes: #[849507](bugreport.cgi?bug=849507)).
     + Fix imagemagick not run from menu in Mate (Closes: #[773426](bugreport.cgi?bug=773426)).
   * Fix a few security bugs:
     + off-by-one string copy in wpg file handling (Closes: #[851483](bugreport.cgi?bug=851483)).
     + check return of memory allocation in ipl file handling.
       (Closes: #[851485](bugreport.cgi?bug=851485))
     + Fix a heap overflow in psb file handling (Closes: #[851374](bugreport.cgi?bug=851374)).
     + Fix  Crash - PushQuantumPixel - Heap-Buffer-Overflow in tiff file
       handling (Closes: #[851381](bugreport.cgi?bug=851381)).
     + Fix a memory corruption in psb file (Closes: #[851376](bugreport.cgi?bug=851376)).
     + Fix an out of bound in psd file handling (Closes: #[851377](bugreport.cgi?bug=851377)).
     + Check fwrite by using ferror (Closes: #[849439](bugreport.cgi?bug=849439)). Fix
       [CVE-2016-10062](https://security-tracker.debian.org/tracker/CVE-2016-10062).
     + Avoid double free in profile.c (Closes:  #[851383](bugreport.cgi?bug=851383)).
     + Fix memory leak in MPC image format. (Closes: #[851382](bugreport.cgi?bug=851382)).
   * update copyright years in debian/copyright.
   * Relax ${source:Version} depends for imagemagick-6-common.
   * Add more security POC
Checksums-Sha1:
 6b03fe7ec17ec266111f644a084123eeddadb7a2 5151 imagemagick_6.9.7.4+dfsg-1.dsc
 8b59ad4ca982549cdc3910ae1312c9c7681989f8 8929800 imagemagick_6.9.7.4+dfsg.orig.tar.xz
 f651f106d82a713b265553ae58ab293eb60390a1 202620 imagemagick_6.9.7.4+dfsg-1.debian.tar.xz
Checksums-Sha256:
 65bf234b8252fc05d85bf79b7452ff3f91d68dc7140be30b824ff085cb4734f9 5151 imagemagick_6.9.7.4+dfsg-1.dsc
 47fb2cdd26f5913318c4504f16ea363e04d1f400dda9ec52e461ab661d724026 8929800 imagemagick_6.9.7.4+dfsg.orig.tar.xz
 c911a588c6a758dfe489325d524ae70f7824f504753d352a17c027f3f0bc1c56 202620 imagemagick_6.9.7.4+dfsg-1.debian.tar.xz
Files:
 53dab66432c5965790676594f8b8989e 5151 graphics optional imagemagick_6.9.7.4+dfsg-1.dsc
 a43e39ad84d37e9ffcec5346bf12e446 8929800 graphics optional imagemagick_6.9.7.4+dfsg.orig.tar.xz
 e80a63af99ff999cd924526debd43f13 202620 graphics optional imagemagick_6.9.7.4+dfsg-1.debian.tar.xz

-----BEGIN PGP SIGNATURE-----

iQIzBAEBCgAdFiEEXQGHuUCiRbrXsPVqADoaLapBCF8FAlh82I0ACgkQADoaLapB
CF+yhw/9FXbQBD7llG1NyX04f9+lO0xQM6Ex454vMO1R61EuKV7NAJRB5lxw5XgT
hk59EWeSkBumy376DUNRurhr8B3zu9FNLsSduxKY39TzwNTOwaaEkVPoC7ZQndaS
dE+5bo8ARl+bXSnUtGhE96hOK66odw0Z5FU38VCi/fe7qhMhqZjYrrS/+AOAxSbw
rZkGX5tObLaLOnissfVGABLoHrGVxIYYXVi3mlnD3z4D0uAAM/2KtkUhoYqzBXYT
Yzb51kcmYycXImVe7iZq/CBpHM/2cZgcPgAJsoxCL93m1ZCwB5KuJKL4NLZj6GHR
f0xojgckobelnf/Ix+N+0oX3ttpmZ49C7zVAUEoyJS9s3M0mx9oJtRUid5XSrGuR
cK8sERxgWpTokYMxfpxmdwuX2ML0sAWZCKGqhzZYVHz14EIY740SUQr3MxZSEqO5
ecE64zT1EDtDOfhHjrsQjO1rH/1BJeLmaOzCb7jXs4s6FkDAUCuaY6Lx1TI9VrS8
OY1AptPoKxt9C69muvPj7A7Jui1zSeSGVTX3FER2wmcjIKlvLO83sfsGRTa3UJ3J
ZqrW9EmtD9KMTdKMgeAcURQgm0+VK1TT6JOyhMNOJr0v9inrbUAuo2C5ms3A5a9B
fCXd7WuG2vWt+BQNZY9uKgT60F333b++EAv4psWQDemN83l5bE0=
=Elbq
-----END PGP SIGNATURE-----

```

---

**Reply sent**
to `Bastien Roucariès <roucaries.bastien+debian@gmail.com>`:

You have taken responsibility.
(Thu, 09 Mar 2017 23:21:08 GMT) ([full text](bugreport.cgi?bug=851374;msg=29), [mbox](bugreport.cgi?bug=851374;mbox=yes;msg=29), [link](#28)).

---

**Notification sent**
to `Bastien ROUCARIÈS <roucaries.bastien+debian@gmail.com>`:

Bug acknowledged by developer.
(Thu, 09 Mar 2017 23:21:08 GMT) ([full text](bugreport.cgi?bug=851374;msg=31), [mbox](bugreport.cgi?bug=851374;mbox=yes;msg=31), [link](#30)).

---

[Message #32](#32) received at 851374-close@bugs.debian.org ([full text](bugreport.cgi?bug=851374;msg=32), [mbox](bugreport.cgi?bug=851374;mbox=yes;msg=32), reply):

![](/cgi-bin/libravatar.cgi?email=roucaries.bastien%2Bdebian%40gmail.com)
From: Bastien Roucariès <roucaries.bastien+debian@gmail.com>
To: 851374-close@bugs.debian.org
Subject: Bug#851374: fixed in imagemagick 8:6.8.9.9-5+deb8u7
Date: Thu, 09 Mar 2017 23:17:47 +0000
```
Source: imagemagick
Source-Version: 8:6.8.9.9-5+deb8u7

We believe that the bug you reported is fixed in the latest version of
imagemagick, which is due to be installed in the Debian FTP archive.

A summary of the changes between this version and the previous one is
attached.

Thank you for reporting the bug, which will now be closed.  If you
have further comments please address them to 851374@bugs.debian.org,
and the maintainer will reopen the bug report if appropriate.

Debian distribution maintenance software
pp.
Bastien Roucariès <roucaries.bastien+debian@gmail.com> (supplier of updated imagemagick package)

(This message was generated automatically at their request; if you
believe that there is a problem with it please contact the archive
administrators by mailing ftpmaster@ftp-master.debian.org)

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA512

Format: 1.8
Date: Sun, 12 Feb 2017 22:08:25 +0100
Source: imagemagick
Binary: imagemagick-common imagemagick-doc libmagickcore-6-headers libmagickwand-6-headers libmagick++-6-headers imagemagick libimage-magick-perl libmagickcore-6-arch-config imagemagick-6.q16 libmagickcore-6.q16-2 libmagickcore-6.q16-2-extra libmagickcore-6.q16-dev libmagickwand-6.q16-2 libmagickwand-6.q16-dev libmagick++-6.q16-5 libmagick++-6.q16-dev imagemagick-dbg libimage-magick-q16-perl perlmagick libmagickcore-dev libmagickwand-dev libmagick++-dev
Architecture: source all amd64
Version: 8:6.8.9.9-5+deb8u7
Distribution: jessie-security
Urgency: medium
Maintainer: ImageMagick Packaging Team <pkg-gmagick-im-team@lists.alioth.debian.org>
Changed-By: Bastien Roucariès <roucaries.bastien+debian@gmail.com>
Description:
 imagemagick - image manipulation programs -- binaries
 imagemagick-6.q16 - image manipulation programs -- quantum depth Q16
 imagemagick-common - image manipulation programs -- infrastructure
 imagemagick-dbg - debugging symbols for ImageMagick
 imagemagick-doc - document files of ImageMagick
 libimage-magick-perl - Perl interface to the ImageMagick graphics routines
 libimage-magick-q16-perl - Perl interface to the ImageMagick graphics routines -- Q16 versio
 libmagick++-6-headers - object-oriented C++ interface to ImageMagick - header files
 libmagick++-6.q16-5 - object-oriented C++ interface to ImageMagick
 libmagick++-6.q16-dev - object-oriented C++ interface to ImageMagick - development files
 libmagick++-dev - object-oriented C++ interface to ImageMagick
 libmagickcore-6-arch-config - low-level image manipulation library - architecture header files
 libmagickcore-6-headers - low-level image manipulation library - header files
 libmagickcore-6.q16-2 - low-level image manipulation library -- quantum depth Q16
 libmagickcore-6.q16-2-extra - low-level image manipulation library - extra codecs (Q16)
 libmagickcore-6.q16-dev - low-level image manipulation library - development files (Q16)
 libmagickcore-dev - low-level image manipulation library -- transition package
 libmagickwand-6-headers - image manipulation library - headers files
 libmagickwand-6.q16-2 - image manipulation library
 libmagickwand-6.q16-dev - image manipulation library - development files
 libmagickwand-dev - image manipulation library - transition for development files
 perlmagick - Perl interface to ImageMagick -- transition package
Closes: [848139](bugreport.cgi?bug=848139) [849439](bugreport.cgi?bug=849439) [851374](bugreport.cgi?bug=851374) [851376](bugreport.cgi?bug=851376) [851380](bugreport.cgi?bug=851380) [851381](bugreport.cgi?bug=851381) [851382](bugreport.cgi?bug=851382) [851383](bugreport.cgi?bug=851383) [851483](bugreport.cgi?bug=851483)
Changes:
 imagemagick (8:6.8.9.9-5+deb8u7) jessie-security; urgency=medium
 .
   * Fix Ipl file missing malloc check (Closes: #[851483](bugreport.cgi?bug=851483)).
     Fix [CVE-2016-10145](https://security-tracker.debian.org/tracker/CVE-2016-10145).
   * Fix wpg file off by one (Closes: #[851483](bugreport.cgi?bug=851483)).
     Fix [CVE-2016-10145](https://security-tracker.debian.org/tracker/CVE-2016-10145).
   * Fix a memory leak in caption coders (Closes: #[851380](bugreport.cgi?bug=851380)).
     Fix [CVE-2016-10146](https://security-tracker.debian.org/tracker/CVE-2016-10146).
   * Fix possible buffer overflow when writing compressed TIFFS.
     (Closes: #[848139](bugreport.cgi?bug=848139)). Fix [CVE-2016-8707](https://security-tracker.debian.org/tracker/CVE-2016-8707).
   * Fix a double free in profile due to overflow
     (Closes: #[851383](bugreport.cgi?bug=851383)). Fix [CVE-2017-5506](https://security-tracker.debian.org/tracker/CVE-2017-5506).
   * Fix memory leak in MPC file handling (Closes: #[851382](bugreport.cgi?bug=851382)).
     Fix [CVE-2017-5507](https://security-tracker.debian.org/tracker/CVE-2017-5507)
   * Fix Heap-Buffer-Overflow in TIFF coder (Closes: #[851381](bugreport.cgi?bug=851381)).
     Fix [CVE-2017-5508](https://security-tracker.debian.org/tracker/CVE-2017-5508)
   * Fix improper cast that could cause an overflow. (Closes: #[851374](bugreport.cgi?bug=851374)).
     Fix [CVE-2017-5511](https://security-tracker.debian.org/tracker/CVE-2017-5511).
   * Fix memory corruption heap overflow in psb file. (Closes: #[851376](bugreport.cgi?bug=851376)).
     Fix [CVE-2017-5510](https://security-tracker.debian.org/tracker/CVE-2017-5510).
   * Detect write error in ReadGROUP4Image. (Closes: #[849439](bugreport.cgi?bug=849439)).
     Fix [CVE-2016-10062](https://security-tracker.debian.org/tracker/CVE-2016-10062)
Checksums-Sha1:
 c633df230fc93e33ff812832aa04e5df0703bd8c 4242 imagemagick_6.8.9.9-5+deb8u7.dsc
 261284d5a1be12c8f536554d27b0fcfce1130234 262124 imagemagick_6.8.9.9-5+deb8u7.debian.tar.xz
 e598c929f7a1a2328d4acae7d6ffd97f6946dfa3 151388 imagemagick-common_6.8.9.9-5+deb8u7_all.deb
 dc10cfaabcfd57f8795d81118d9921b09d45a69e 7538144 imagemagick-doc_6.8.9.9-5+deb8u7_all.deb
 07e6a3f17e9cdc6948e090d93a6d06296724e2a0 169860 libmagickcore-6-headers_6.8.9.9-5+deb8u7_all.deb
 d5a6051df4bae36d66121ff38c64f2f79e62670b 132036 libmagickwand-6-headers_6.8.9.9-5+deb8u7_all.deb
 e647306470b11810cb4ff655af058ae9a7358f2b 168548 libmagick++-6-headers_6.8.9.9-5+deb8u7_all.deb
 5bc591fadca7d1258b9eb31828b6baeb872a1976 156816 imagemagick_6.8.9.9-5+deb8u7_amd64.deb
 64fe3f440d44cd645fe50f578bfa031ee7bc663a 176028 libimage-magick-perl_6.8.9.9-5+deb8u7_all.deb
 ec9538a9d52ccc945ee1e44543719c6baa8c8747 130842 libmagickcore-6-arch-config_6.8.9.9-5+deb8u7_amd64.deb
 06458102b6f3881f8b3a89a7f50cd6d6042a7ddd 510040 imagemagick-6.q16_6.8.9.9-5+deb8u7_amd64.deb
 f9a6283be0687db735624a9295de3aa97d1769dc 1693554 libmagickcore-6.q16-2_6.8.9.9-5+deb8u7_amd64.deb
 b73acd25a97204dce48afdfdfded71c34864b515 172196 libmagickcore-6.q16-2-extra_6.8.9.9-5+deb8u7_amd64.deb
 bf5afcdc8a9fc58ddd7b2e1aa4b12edf4daee77e 1029416 libmagickcore-6.q16-dev_6.8.9.9-5+deb8u7_amd64.deb
 aa2296b2a2df0b20c0b149b774f9bec15ebe3987 407454 libmagickwand-6.q16-2_6.8.9.9-5+deb8u7_amd64.deb
 1bd7094340e7d9687aedb9ef114ecce0abae92fb 394394 libmagickwand-6.q16-dev_6.8.9.9-5+deb8u7_amd64.deb
 b4d58dad72efb17f50f5309fa0267ef438767928 255792 libmagick++-6.q16-5_6.8.9.9-5+deb8u7_amd64.deb
 de8e5e22063d3c32849b577eefa833483bb28d03 223542 libmagick++-6.q16-dev_6.8.9.9-5+deb8u7_amd64.deb
 4ea62407dddb00a0352ed3ee345e90f4d0f040bc 5006502 imagemagick-dbg_6.8.9.9-5+deb8u7_amd64.deb
 617ede36b0dc926a37bb8b9646567790ad1a79cc 223222 libimage-magick-q16-perl_6.8.9.9-5+deb8u7_amd64.deb
 e650037546902cb4e464428b408f8d6b32475f0f 123304 perlmagick_6.8.9.9-5+deb8u7_all.deb
 386e59053065ceb46d050b9ac164b9ac8147fbe7 123290 libmagickcore-dev_6.8.9.9-5+deb8u7_all.deb
 06a59769587d7896883a3243c83213154ab81a53 123272 libmagickwand-dev_6.8.9.9-5+deb8u7_all.deb
 8b7a27a49de0f99cef3d1cae1f3bb16266a17f96 123306 libmagick++-dev_6.8.9.9-5+deb8u7_all.deb
Checksums-Sha256:
 18191ffb8c3b11919f87f6b85651f647cf0d1cfbef4c9ae35c02df45d96c3c49 4242 imagemagick_6.8.9.9-5+deb8u7.dsc
 9d3b82f2e39a6c16c8f3a7479bda7f617b56644c1c39801424bec1b3dde62f46 262124 imagemagick_6.8.9.9-5+deb8u7.debian.tar.xz
 4cadbb022e80b175b0c39d0b4f2df1db05e0d755e8c2e807799af7d24b5545f4 151388 imagemagick-common_6.8.9.9-5+deb8u7_all.deb
 1e6ef8cef7cddf899b6679b038b8d3166759967c0d48fa8940dfe50b65cc3faf 7538144 imagemagick-doc_6.8.9.9-5+deb8u7_all.deb
 8118cbbb088a2d14915778dc865bb907ad09e3c8757c37c7a349099f242a1b7b 169860 libmagickcore-6-headers_6.8.9.9-5+deb8u7_all.deb
 084a12b0c01c5a6a868913d68a9345eb859ab01763fe58766504671b54b5844d 132036 libmagickwand-6-headers_6.8.9.9-5+deb8u7_all.deb
 5e3404e9e9043af6b3a2bcf6aaa6d87053081d68273b771c1597c2cc8fd2e5d6 168548 libmagick++-6-headers_6.8.9.9-5+deb8u7_all.deb
 0f00dbd8ade07bab8eceda1dc071217825dd69cf191d2df1cbac826aaaf61ad0 156816 imagemagick_6.8.9.9-5+deb8u7_amd64.deb
 74045c656999249532f4bc5dcd7799753a3f45a0bee7ac50ee1178cfd05dfd77 176028 libimage-magick-perl_6.8.9.9-5+deb8u7_all.deb
 b64dfd671bc6c4572b7f5fb6f9fcb7bf464c042cf608ff79aee400270a6c9710 130842 libmagickcore-6-arch-config_6.8.9.9-5+deb8u7_amd64.deb
 3f6ee9af954328db1d0c37c87ce672d628efb9c1d80bda70c5362d8b1f0aa375 510040 imagemagick-6.q16_6.8.9.9-5+deb8u7_amd64.deb
 9168f66915e482d0290fd77350ece446cb1f5072055b0fcd560e9e694ec2cfbb 1693554 libmagickcore-6.q16-2_6.8.9.9-5+deb8u7_amd64.deb
 619df326d4e3b34e0d5a09115ac97e13468b7e6a194fb2baab8f6382198c2bb8 172196 libmagickcore-6.q16-2-extra_6.8.9.9-5+deb8u7_amd64.deb
 7aa9f67b90311220dbd6025158898e1f0befbe1f514fc3c053fba6afc6148f8a 1029416 libmagickcore-6.q16-dev_6.8.9.9-5+deb8u7_amd64.deb
 5262ea5d4d17abc2ea998bd9d481ccc5f25c8e5ba6b73ce15663a9e1053197cb 407454 libmagickwand-6.q16-2_6.8.9.9-5+deb8u7_amd64.deb
 97e95b5e6ece7f56a10637d74ff4245f9556be245a5e4408ec14d3d1d0221d72 394394 libmagickwand-6.q16-dev_6.8.9.9-5+deb8u7_amd64.deb
 7e469ad34f9861901a0c927332abf7d1636147c572049e38c894a4651f3f4ee9 255792 libmagick++-6.q16-5_6.8.9.9-5+deb8u7_amd64.deb
 6ec2b1fe253fd0cbce81d0983c28bab398558030a867e654f5f22eb25d216ea9 223542 libmagick++-6.q16-dev_6.8.9.9-5+deb8u7_amd64.deb
 95b6f29b4eb606e3afa4c5d667b3564cf81c44c6541ce8e568d7c1bf0ab76498 5006502 imagemagick-dbg_6.8.9.9-5+deb8u7_amd64.deb
 ebd45719c3ec75ee307ddba48eb8de185114cc5d8cf4d5e5d3e745cc61c4aa12 223222 libimage-magick-q16-perl_6.8.9.9-5+deb8u7_amd64.deb
 3f4f7564c9b25a859d9977655824a609b8face7a6e7744b9e48f82dd609a2402 123304 perlmagick_6.8.9.9-5+deb8u7_all.deb
 69237d793d5e5fa43cc4968f4efb4f335e35f819756fd42cca3da818602a7bf0 123290 libmagickcore-dev_6.8.9.9-5+deb8u7_all.deb
 19c90881356a4c4afeb5a94add612cd5739f197a72f44ddaa6925f725cf5c66c 123272 libmagickwand-dev_6.8.9.9-5+deb8u7_all.deb
 2adeff458de336f750935db1fdb242e264aaf9a41f2c0b5674e835ec1b628330 123306 libmagick++-dev_6.8.9.9-5+deb8u7_all.deb
Files:
 36afc3dca2cc7e713128e9c0fbd9e673 4242 graphics optional imagemagick_6.8.9.9-5+deb8u7.dsc
 6faa0dc084164b9877edaea4309fe965 262124 graphics optional imagemagick_6.8.9.9-5+deb8u7.debian.tar.xz
 68e23e9594b1b013abb52d5ba833e707 151388 graphics optional imagemagick-common_6.8.9.9-5+deb8u7_all.deb
 ecce1f9b4b5e143fd37482094bd086eb 7538144 doc optional imagemagick-doc_6.8.9.9-5+deb8u7_all.deb
 3bdde186e2a6a220c323218723e0f8a8 169860 libdevel optional libmagickcore-6-headers_6.8.9.9-5+deb8u7_all.deb
 94d2425fb14baf9fa6d53ec385f92b4e 132036 libdevel optional libmagickwand-6-headers_6.8.9.9-5+deb8u7_all.deb
 84c55325f584a8df92ed3b41139850dc 168548 libdevel optional libmagick++-6-headers_6.8.9.9-5+deb8u7_all.deb
 5e876e38d068572d80f6babbf2454381 156816 graphics optional imagemagick_6.8.9.9-5+deb8u7_amd64.deb
 3c935a3f1b3f3efe3469b516b80a066d 176028 perl optional libimage-magick-perl_6.8.9.9-5+deb8u7_all.deb
 5811cf393479c604b9ff1e009d2a9340 130842 libdevel optional libmagickcore-6-arch-config_6.8.9.9-5+deb8u7_amd64.deb
 f3fe301eaf1290ac1f8c679249f26146 510040 graphics optional imagemagick-6.q16_6.8.9.9-5+deb8u7_amd64.deb
 018c21004bbb3f20c07a69077e6fb841 1693554 libs optional libmagickcore-6.q16-2_6.8.9.9-5+deb8u7_amd64.deb
 d8b4b2e017c2346cf5a5e99ae7b56ba9 172196 libs optional libmagickcore-6.q16-2-extra_6.8.9.9-5+deb8u7_amd64.deb
 1a29791cc60cfef704a954c7dbbdef3c 1029416 libdevel optional libmagickcore-6.q16-dev_6.8.9.9-5+deb8u7_amd64.deb
 aed3276c28dfebfb69787138a4c84011 407454 libs optional libmagickwand-6.q16-2_6.8.9.9-5+deb8u7_amd64.deb
 f2fc904dbea283d754df43e973a24107 394394 libdevel optional libmagickwand-6.q16-dev_6.8.9.9-5+deb8u7_amd64.deb
 67d9789ed9f16915a019ffc174e95dca 255792 libs optional libmagick++-6.q16-5_6.8.9.9-5+deb8u7_amd64.deb
 82ab179ef1e19c4ee7466b8a88c7ab26 223542 libdevel optional libmagick++-6.q16-dev_6.8.9.9-5+deb8u7_amd64.deb
 df2190491eb9f90183e8bf9a18d096ae 5006502 debug extra imagemagick-dbg_6.8.9.9-5+deb8u7_amd64.deb
 565aa24b1cb3d14a3c760ccedf0f679b 223222 perl optional libimage-magick-q16-perl_6.8.9.9-5+deb8u7_amd64.deb
 cc18c59708f72ad9c6f95840aaa504dd 123304 oldlibs extra perlmagick_6.8.9.9-5+deb8u7_all.deb
 0a869a2731aab097b9fa420c5d4f7632 123290 oldlibs extra libmagickcore-dev_6.8.9.9-5+deb8u7_all.deb
 3a8aa1025e16f2ab61a38d2f5c97bf8a 123272 oldlibs extra libmagickwand-dev_6.8.9.9-5+deb8u7_all.deb
 35583e8c46ca77bf7567ae7326f4aaef 123306 oldlibs extra libmagick++-dev_6.8.9.9-5+deb8u7_all.deb

-----BEGIN PGP SIGNATURE-----

iQIzBAEBCgAdFiEEXQGHuUCiRbrXsPVqADoaLapBCF8FAli0SgIACgkQADoaLapB
CF+rfA//aCdU8Vr1DCMMn3o9VpqUWZbiyZhIw85fNrQVeVd/3RPeotbMqVhlcwp3
tJcYjNH1XjG8bt6ljF8G5yhteEv5fLQYBFQd5EDzIIRB4Y7rlpv4od7EG4AlRLnU
fVYKJhodZ3pkooxkoDHSXjN/ra+sROA2TL7JjFVjBUdwk0NcaSkspyyCQgk0/gnP
wSu14wZsvufGnBODcFKuHtAg9HrJbHlWovE2W/9tAswhmRLqoBgYCrpKJPcJDRRD
9g14VV6ySyEGOjSL2xIyuokPBESPd/NlJxtwHj2vf3A+7W+9KpCIN+r1SOFBCUYv
sigHS4W6n8q/UGrQhapFG5xH7jifULB+1p0D1hQAQ1/HD1uzFau5bxPmEUr2pcji
nIDK/eZgVSbLfWINKPcCWvXA44r4iPhurFzVzrn2J6IVGDJkRJZCncV6XIYwC9XB
0EOeZtAkKCNa9RM1y3mTsEJ36l1WZcwN1eKzAUQZCKJPBsPdw5/Ti94CPXsoM3KM
k2mSEtGiPlJHNyvMe0/nStLRFgh25QCxuDihInm1BXBALzsDqdkqTA98RMGNNlrG
0l/txGtSVfD9kxeQ8ePNK3ZO/ty4pH+nHKCQ5v7Asj6vt2FkXOvalmdgqFMiI56E
CUMR4XslBrsowNqOSUc/nVuXW78GcH87L4cDg/XDhSbmnp1lgWo=
=3VIo
-----END PGP SIGNATURE-----

```

---

**Bug archived.**
Request was from `Debbugs Internal Request <owner@bugs.debian.org>`
to `internal_control@bugs.debian.org`.
(Sun, 07 May 2017 07:30:41 GMT) ([full text](bugreport.cgi?bug=851374;msg=34), [mbox](bugreport.cgi?bug=851374;mbox=yes;msg=34), [link](#33)).

---

Send a report that [this bug log contains spam](https://bugs.debian.org/cgi-bin/bugspam.cgi?bug=851374).

---

Debian bug tracking system administrator <owner@bugs.debian.org>.
Last modified:
Sat Jan 25 16:13:11 2025;
Machine Name:
bembo

[Debian Bug tracking system](https://www.debian.org/Bugs/)

Debbugs is free software and licensed under the terms of the GNU General
Public License version 2. The current version can be obtained
from <https://bugs.debian.org/debbugs-source/>.

Copyright © 1999 Darren O. Benham,
1997,2003 nCipher Corporation Ltd,
1994-97 Ian Jackson,
2005-2017 Don Armstrong, and many other contributors.



=== Content from github.com_cc9d634c_20250126_101125.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FImageMagick%2FImageMagick%2Fissues%2F347)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FImageMagick%2FImageMagick%2Fissues%2F347)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fissues_fragments%2Fissue_layout&source=header-repo&source_repo=ImageMagick%2FImageMagick)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[ImageMagick](/ImageMagick)
/
**[ImageMagick](/ImageMagick/ImageMagick)**
Public

* [Notifications](/login?return_to=%2FImageMagick%2FImageMagick) You must be signed in to change notification settings
* [Fork
  1.4k](/login?return_to=%2FImageMagick%2FImageMagick)
* [Star
   12.7k](/login?return_to=%2FImageMagick%2FImageMagick)

* [Code](/ImageMagick/ImageMagick)
* [Issues
  123](/ImageMagick/ImageMagick/issues)
* [Pull requests
  4](/ImageMagick/ImageMagick/pulls)
* [Discussions](/ImageMagick/ImageMagick/discussions)
* [Actions](/ImageMagick/ImageMagick/actions)
* [Security](/ImageMagick/ImageMagick/security)
* [Insights](/ImageMagick/ImageMagick/pulse)

Additional navigation options

* [Code](/ImageMagick/ImageMagick)
* [Issues](/ImageMagick/ImageMagick/issues)
* [Pull requests](/ImageMagick/ImageMagick/pulls)
* [Discussions](/ImageMagick/ImageMagick/discussions)
* [Actions](/ImageMagick/ImageMagick/actions)
* [Security](/ImageMagick/ImageMagick/security)
* [Insights](/ImageMagick/ImageMagick/pulse)

# Memory corruption via PSB file #347

[New issue](/login?return_to=)[Jump to bottom](#comment-composer-heading)Copy link[New issue](/login?return_to=)[Jump to bottom](#comment-composer-heading)Copy linkClosedClosed[Memory corruption via PSB file](#top)#347Copy linkLabels[bug](https://github.com/ImageMagick/ImageMagick/issues?q=state%3Aopen%20label%3A%22bug%22)[![@Miladbr](https://avatars.githubusercontent.com/u/1457288?u=baac9b47c27b6d40506f7d09f99713636507efae&v=4&size=80)](/Miladbr)
## Description

[![@Miladbr](https://avatars.githubusercontent.com/u/1457288?u=baac9b47c27b6d40506f7d09f99713636507efae&v=4&size=48)](/Miladbr)[Miladbr](https://github.com/Miladbr)opened [on Jan 7, 2017](https://github.com/ImageMagick/ImageMagick/issues/347#issue-199363078)
```
$ /home/milad/ImageMagick/utilities/magick 7.psb /dev/null
[1]    22665 segmentation fault (core dumped)   /home/milad/ImageMagick/utilities/magick 7.psb /dev/null

```

Valgrind output:

```
$ valgrind /home/milad/ImageMagick/utilities/magick 7.psb /dev/null
==22694== Memcheck, a memory error detector
==22694== Copyright (C) 2002-2015, and GNU GPL'd, by Julian Seward et al.
==22694== Using Valgrind-3.11.0 and LibVEX; rerun with -h for copyright info
==22694== Command: /home/milad/ImageMagick/utilities/magick 7.psb /dev/null
==22694==
==22694== Syscall param read(buf) points to unaddressable byte(s)
==22694==    at 0x588E680: __read_nocancel (syscall-template.S:84)
==22694==    by 0x5810F78: _IO_file_xsgetn (fileops.c:1434)
==22694==    by 0x5806235: fread (iofread.c:38)
==22694==    by 0x837756: ReadPSDLayers (psd.c:1697)
==22694==    by 0x83EF66: ReadPSDImage (psd.c:2113)
==22694==    by 0xA103CF: ReadImage (constitute.c:555)
==22694==    by 0xA131FA: ReadImages (constitute.c:852)
==22694==    by 0x1103F8C: CLINoImageOperator (operation.c:4743)
==22694==    by 0x1107338: CLIOption (operation.c:5238)
==22694==    by 0xF8612A: ProcessCommandOptions (magick-cli.c:421)
==22694==    by 0xF87FC2: MagickImageCommand (magick-cli.c:791)
==22694==    by 0xF90DE9: MagickCommandGenesis (mogrify.c:183)
==22694==  Address 0x5e4b2f8 is 0 bytes after a block of size 1,288 alloc'd
==22694==    at 0x4C2DB8F: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)
==22694==    by 0x834250: ReadPSDLayers (psd.c:1539)
==22694==    by 0x83EF66: ReadPSDImage (psd.c:2113)
==22694==    by 0xA103CF: ReadImage (constitute.c:555)
==22694==    by 0xA131FA: ReadImages (constitute.c:852)
==22694==    by 0x1103F8C: CLINoImageOperator (operation.c:4743)
==22694==    by 0x1107338: CLIOption (operation.c:5238)
==22694==    by 0xF8612A: ProcessCommandOptions (magick-cli.c:421)
==22694==    by 0xF87FC2: MagickImageCommand (magick-cli.c:791)
==22694==    by 0xF90DE9: MagickCommandGenesis (mogrify.c:183)
==22694==    by 0x419D10: MagickMain (magick.c:149)
==22694==    by 0x57B882F: (below main) (libc-start.c:291)
==22694==
==22694== Invalid write of size 1
==22694==    at 0xCD97C0: PopQuantumPixel (quantum-export.c:196)
==22694==    by 0xCD97C0: ExportRedQuantum (quantum-export.c:3069)
==22694==    by 0xCD97C0: ExportQuantumPixels (quantum-export.c:4045)
==22694==    by 0x81F40D: WritePSDChannel (psd.c:2545)
==22694==    by 0x82E6B8: WritePSDChannels (psd.c:2683)
==22694==    by 0x82E6B8: WritePSDImage (psd.c:3359)
==22694==    by 0xA148B7: WriteImage (constitute.c:1101)
==22694==    by 0xA16605: WriteImages (constitute.c:1320)
==22694==    by 0x11043F3: CLINoImageOperator (operation.c:4778)
==22694==    by 0x1107338: CLIOption (operation.c:5238)
==22694==    by 0xF86894: ProcessCommandOptions (magick-cli.c:526)
==22694==    by 0xF87FC2: MagickImageCommand (magick-cli.c:791)
==22694==    by 0xF90DE9: MagickCommandGenesis (mogrify.c:183)
==22694==    by 0x419D10: MagickMain (magick.c:149)
==22694==    by 0x57B882F: (below main) (libc-start.c:291)
==22694==  Address 0x5e5c1af is 0 bytes after a block of size 511 alloc'd
==22694==    at 0x4C2DB8F: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)
==22694==    by 0xC94D0C: AcquireQuantumPixels (quantum.c:175)
==22694==    by 0xC94D0C: SetQuantumDepth (quantum.c:693)
==22694==    by 0xC9571A: AcquireQuantumInfo (quantum.c:125)
==22694==    by 0x81F2E0: WritePSDChannel (psd.c:2514)
==22694==    by 0x82E6B8: WritePSDChannels (psd.c:2683)
==22694==    by 0x82E6B8: WritePSDImage (psd.c:3359)
==22694==    by 0xA148B7: WriteImage (constitute.c:1101)
==22694==    by 0xA16605: WriteImages (constitute.c:1320)
==22694==    by 0x11043F3: CLINoImageOperator (operation.c:4778)
==22694==    by 0x1107338: CLIOption (operation.c:5238)
==22694==    by 0xF86894: ProcessCommandOptions (magick-cli.c:526)
==22694==    by 0xF87FC2: MagickImageCommand (magick-cli.c:791)
==22694==    by 0xF90DE9: MagickCommandGenesis (mogrify.c:183)
==22694==
==22694== Invalid read of size 1
==22694==    at 0xCD9660: PopQuantumPixel (quantum-export.c:198)
==22694==    by 0xCD9660: ExportRedQuantum (quantum-export.c:3069)
==22694==    by 0xCD9660: ExportQuantumPixels (quantum-export.c:4045)
==22694==    by 0x81F40D: WritePSDChannel (psd.c:2545)
==22694==    by 0x82E6B8: WritePSDChannels (psd.c:2683)
==22694==    by 0x82E6B8: WritePSDImage (psd.c:3359)
==22694==    by 0xA148B7: WriteImage (constitute.c:1101)
==22694==    by 0xA16605: WriteImages (constitute.c:1320)
==22694==    by 0x11043F3: CLINoImageOperator (operation.c:4778)
==22694==    by 0x1107338: CLIOption (operation.c:5238)
==22694==    by 0xF86894: ProcessCommandOptions (magick-cli.c:526)
==22694==    by 0xF87FC2: MagickImageCommand (magick-cli.c:791)
==22694==    by 0xF90DE9: MagickCommandGenesis (mogrify.c:183)
==22694==    by 0x419D10: MagickMain (magick.c:149)
==22694==    by 0x57B882F: (below main) (libc-start.c:291)
==22694==  Address 0x5e5c1af is 0 bytes after a block of size 511 alloc'd
==22694==    at 0x4C2DB8F: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)
==22694==    by 0xC94D0C: AcquireQuantumPixels (quantum.c:175)
==22694==    by 0xC94D0C: SetQuantumDepth (quantum.c:693)
==22694==    by 0xC9571A: AcquireQuantumInfo (quantum.c:125)
==22694==    by 0x81F2E0: WritePSDChannel (psd.c:2514)
==22694==    by 0x82E6B8: WritePSDChannels (psd.c:2683)
==22694==    by 0x82E6B8: WritePSDImage (psd.c:3359)
==22694==    by 0xA148B7: WriteImage (constitute.c:1101)
==22694==    by 0xA16605: WriteImages (constitute.c:1320)
==22694==    by 0x11043F3: CLINoImageOperator (operation.c:4778)
==22694==    by 0x1107338: CLIOption (operation.c:5238)
==22694==    by 0xF86894: ProcessCommandOptions (magick-cli.c:526)
==22694==    by 0xF87FC2: MagickImageCommand (magick-cli.c:791)
==22694==    by 0xF90DE9: MagickCommandGenesis (mogrify.c:183)
==22694==
==22694== Invalid write of size 8
==22694==    at 0x81FFE2: WritePSDChannel (psd.c:2549)
==22694==    by 0x82E6B8: WritePSDChannels (psd.c:2683)
==22694==    by 0x82E6B8: WritePSDImage (psd.c:3359)
==22694==    by 0xA148B7: WriteImage (constitute.c:1101)
==22694==    by 0xA16605: WriteImages (constitute.c:1320)
==22694==    by 0x11043F3: CLINoImageOperator (operation.c:4778)
==22694==    by 0x1107338: CLIOption (operation.c:5238)
==22694==    by 0xF86894: ProcessCommandOptions (magick-cli.c:526)
==22694==    by 0xF87FC2: MagickImageCommand (magick-cli.c:791)
==22694==    by 0xF90DE9: MagickCommandGenesis (mogrify.c:183)
==22694==    by 0x419D10: MagickMain (magick.c:149)
==22694==    by 0x57B882F: (below main) (libc-start.c:291)
==22694==  Address 0x5e5c1a8 is 504 bytes inside a block of size 511 alloc'd
==22694==    at 0x4C2DB8F: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)
==22694==    by 0xC94D0C: AcquireQuantumPixels (quantum.c:175)
==22694==    by 0xC94D0C: SetQuantumDepth (quantum.c:693)
==22694==    by 0xC9571A: AcquireQuantumInfo (quantum.c:125)
==22694==    by 0x81F2E0: WritePSDChannel (psd.c:2514)
==22694==    by 0x82E6B8: WritePSDChannels (psd.c:2683)
==22694==    by 0x82E6B8: WritePSDImage (psd.c:3359)
==22694==    by 0xA148B7: WriteImage (constitute.c:1101)
==22694==    by 0xA16605: WriteImages (constitute.c:1320)
==22694==    by 0x11043F3: CLINoImageOperator (operation.c:4778)
==22694==    by 0x1107338: CLIOption (operation.c:5238)
==22694==    by 0xF86894: ProcessCommandOptions (magick-cli.c:526)
==22694==    by 0xF87FC2: MagickImageCommand (magick-cli.c:791)
==22694==    by 0xF90DE9: MagickCommandGenesis (mogrify.c:183)
==22694==
==22694== Invalid read of size 16
==22694==    at 0x81FFF1: WritePSDChannel (psd.c:2549)
==22694==    by 0x82E6B8: WritePSDChannels (psd.c:2683)
==22694==    by 0x82E6B8: WritePSDImage (psd.c:3359)
==22694==    by 0xA148B7: WriteImage (constitute.c:1101)
==22694==    by 0xA16605: WriteImages (constitute.c:1320)
==22694==    by 0x11043F3: CLINoImageOperator (operation.c:4778)
==22694==    by 0x1107338: CLIOption (operation.c:5238)
==22694==    by 0xF86894: ProcessCommandOptions (magick-cli.c:526)
==22694==    by 0xF87FC2: MagickImageCommand (magick-cli.c:791)
==22694==    by 0xF90DE9: MagickCommandGenesis (mogrify.c:183)
==22694==    by 0x419D10: MagickMain (magick.c:149)
==22694==    by 0x57B882F: (below main) (libc-start.c:291)
==22694==  Address 0x5e5c1b0 is 1 bytes after a block of size 511 alloc'd
==22694==    at 0x4C2DB8F: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)
==22694==    by 0xC94D0C: AcquireQuantumPixels (quantum.c:175)
==22694==    by 0xC94D0C: SetQuantumDepth (quantum.c:693)
==22694==    by 0xC9571A: AcquireQuantumInfo (quantum.c:125)
==22694==    by 0x81F2E0: WritePSDChannel (psd.c:2514)
==22694==    by 0x82E6B8: WritePSDChannels (psd.c:2683)
==22694==    by 0x82E6B8: WritePSDImage (psd.c:3359)
==22694==    by 0xA148B7: WriteImage (constitute.c:1101)
==22694==    by 0xA16605: WriteImages (constitute.c:1320)
==22694==    by 0x11043F3: CLINoImageOperator (operation.c:4778)
==22694==    by 0x1107338: CLIOption (operation.c:5238)
==22694==    by 0xF86894: ProcessCommandOptions (magick-cli.c:526)
==22694==    by 0xF87FC2: MagickImageCommand (magick-cli.c:791)
==22694==    by 0xF90DE9: MagickCommandGenesis (mogrify.c:183)
==22694==
==22694== Invalid write of size 8
==22694==    at 0x81FFF8: WritePSDChannel (psd.c:2549)
==22694==    by 0x82E6B8: WritePSDChannels (psd.c:2683)
==22694==    by 0x82E6B8: WritePSDImage (psd.c:3359)
==22694==    by 0xA148B7: WriteImage (constitute.c:1101)
==22694==    by 0xA16605: WriteImages (constitute.c:1320)
==22694==    by 0x11043F3: CLINoImageOperator (operation.c:4778)
==22694==    by 0x1107338: CLIOption (operation.c:5238)
==22694==    by 0xF86894: ProcessCommandOptions (magick-cli.c:526)
==22694==    by 0xF87FC2: MagickImageCommand (magick-cli.c:791)
==22694==    by 0xF90DE9: MagickCommandGenesis (mogrify.c:183)
==22694==    by 0x419D10: MagickMain (magick.c:149)
==22694==    by 0x57B882F: (below main) (libc-start.c:291)
==22694==  Address 0x5e5c1b0 is 1 bytes after a block of size 511 alloc'd
==22694==    at 0x4C2DB8F: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)
==22694==    by 0xC94D0C: AcquireQuantumPixels (quantum.c:175)
==22694==    by 0xC94D0C: SetQuantumDepth (quantum.c:693)
==22694==    by 0xC9571A: AcquireQuantumInfo (quantum.c:125)
==22694==    by 0x81F2E0: WritePSDChannel (psd.c:2514)
==22694==    by 0x82E6B8: WritePSDChannels (psd.c:2683)
==22694==    by 0x82E6B8: WritePSDImage (psd.c:3359)
==22694==    by 0xA148B7: WriteImage (constitute.c:1101)
==22694==    by 0xA16605: WriteImages (constitute.c:1320)
==22694==    by 0x11043F3: CLINoImageOperator (operation.c:4778)
==22694==    by 0x1107338: CLIOption (operation.c:5238)
==22694==    by 0xF86894: ProcessCommandOptions (magick-cli.c:526)
==22694==    by 0xF87FC2: MagickImageCommand (magick-cli.c:791)
==22694==    by 0xF90DE9: MagickCommandGenesis (mogrify.c:183)
==22694==
==22694== Invalid read of size 16
==22694==    at 0x81FF59: WritePSDChannel (psd.c:2549)
==22694==    by 0x82E6B8: WritePSDChannels (psd.c:2683)
==22694==    by 0x82E6B8: WritePSDImage (psd.c:3359)
==22694==    by 0xA148B7: WriteImage (constitute.c:1101)
==22694==    by 0xA16605: WriteImages (constitute.c:1320)
==22694==    by 0x11043F3: CLINoImageOperator (operation.c:4778)
==22694==    by 0x1107338: CLIOption (operation.c:5238)
==22694==    by 0xF86894: ProcessCommandOptions (magick-cli.c:526)
==22694==    by 0xF87FC2: MagickImageCommand (magick-cli.c:791)
==22694==    by 0xF90DE9: MagickCommandGenesis (mogrify.c:183)
==22694==    by 0x419D10: MagickMain (magick.c:149)
==22694==    by 0x57B882F: (below main) (libc-start.c:291)
==22694==  Address 0x5e5c1c0 is 17 bytes after a block of size 511 alloc'd
==22694==    at 0x4C2DB8F: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)
==22694==    by 0xC94D0C: AcquireQuantumPixels (quantum.c:175)
==22694==    by 0xC94D0C: SetQuantumDepth (quantum.c:693)
==22694==    by 0xC9571A: AcquireQuantumInfo (quantum.c:125)
==22694==    by 0x81F2E0: WritePSDChannel (psd.c:2514)
==22694==    by 0x82E6B8: WritePSDChannels (psd.c:2683)
==22694==    by 0x82E6B8: WritePSDImage (psd.c:3359)
==22694==    by 0xA148B7: WriteImage (constitute.c:1101)
==22694==    by 0xA16605: WriteImages (constitute.c:1320)
==22694==    by 0x11043F3: CLINoImageOperator (operation.c:4778)
==22694==    by 0x1107338: CLIOption (operation.c:5238)
==22694==    by 0xF86894: ProcessCommandOptions (magick-cli.c:526)
==22694==    by 0xF87FC2: MagickImageCommand (magick-cli.c:791)
==22694==    by 0xF90DE9: MagickCommandGenesis (mogrify.c:183)
==22694==
==22694== Invalid write of size 8
==22694==    at 0x81FF5F: WritePSDChannel (psd.c:2549)
==22694==    by 0x82E6B8: WritePSDChannels (psd.c:2683)
==22694==    by 0x82E6B8: WritePSDImage (psd.c:3359)
==22694==    by 0xA148B7: WriteImage (constitute.c:1101)
==22694==    by 0xA16605: WriteImages (constitute.c:1320)
==22694==    by 0x11043F3: CLINoImageOperator (operation.c:4778)
==22694==    by 0x1107338: CLIOption (operation.c:5238)
==22694==    by 0xF86894: ProcessCommandOptions (magick-cli.c:526)
==22694==    by 0xF87FC2: MagickImageCommand (magick-cli.c:791)
==22694==    by 0xF90DE9: MagickCommandGenesis (mogrify.c:183)
==22694==    by 0x419D10: MagickMain (magick.c:149)
==22694==    by 0x57B882F: (below main) (libc-start.c:291)
==22694==  Address 0x5e5c1c0 is 17 bytes after a block of size 511 alloc'd
==22694==    at 0x4C2DB8F: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)
==22694==    by 0xC94D0C: AcquireQuantumPixels (quantum.c:175)
==22694==    by 0xC94D0C: SetQuantumDepth (quantum.c:693)
==22694==    by 0xC9571A: AcquireQuantumInfo (quantum.c:125)
==22694==    by 0x81F2E0: WritePSDChannel (psd.c:2514)
==22694==    by 0x82E6B8: WritePSDChannels (psd.c:2683)
==22694==    by 0x82E6B8: WritePSDImage (psd.c:3359)
==22694==    by 0xA148B7: WriteImage (constitute.c:1101)
==22694==    by 0xA16605: WriteImages (constitute.c:1320)
==22694==    by 0x11043F3: CLINoImageOperator (operation.c:4778)
==22694==    by 0x1107338: CLIOption (operation.c:5238)
==22694==    by 0xF86894: ProcessCommandOptions (magick-cli.c:526)
==22694==    by 0xF87FC2: MagickImageCommand (magick-cli.c:791)
==22694==    by 0xF90DE9: MagickCommandGenesis (mogrify.c:183)
==22694==

valgrind: m_mallocfree.c:303 (get_bszB_as_is): Assertion 'bszB_lo == bszB_hi' failed.
valgrind: Heap block lo/hi size mismatch: lo = 576, hi = 0.
This is probably caused by your program erroneously writing past the
end of a heap block and corrupting heap metadata.  If you fix any
invalid writes reported by Memcheck, this assertion failure will
probably go away.  Please try that before reporting this as a bug.

host stacktrace:
==22694==    at 0x38083F48: ??? (in /usr/lib/valgrind/memcheck-amd64-linux)
==22694==    by 0x38084064: ??? (in /usr/lib/valgrind/memcheck-amd64-linux)
==22694==    by 0x380841F1: ??? (in /usr/lib/valgrind/memcheck-amd64-linux)
==22694==    by 0x38091A9C: ??? (in /usr/lib/valgrind/memcheck-amd64-linux)
==22694==    by 0x3807D673: ??? (in /usr/lib/valgrind/memcheck-amd64-linux)
==22694==    by 0x3807BF03: ??? (in /usr/lib/valgrind/memcheck-amd64-linux)
==22694==    by 0x380800DA: ??? (in /usr/lib/valgrind/memcheck-amd64-linux)
==22694==    by 0x3807B49A: ??? (in /usr/lib/valgrind/memcheck-amd64-linux)
==22694==    by 0x8045DDEC5: ???

sched status:
  running_tid=1

Thread 1: status = VgTs_Runnable (lwpid 22694)
==22694==    at 0x81FF6D: WritePSDChannel (psd.c:2549)
==22694==    by 0x82E6B8: WritePSDChannels (psd.c:2683)
==22694==    by 0x82E6B8: WritePSDImage (psd.c:3359)
==22694==    by 0xA148B7: WriteImage (constitute.c:1101)
==22694==    by 0xA16605: WriteImages (constitute.c:1320)
==22694==    by 0x11043F3: CLINoImageOperator (operation.c:4778)
==22694==    by 0x1107338: CLIOption (operation.c:5238)
==22694==    by 0xF86894: ProcessCommandOptions (magick-cli.c:526)
==22694==    by 0xF87FC2: MagickImageCommand (magick-cli.c:791)
==22694==    by 0xF90DE9: MagickCommandGenesis (mogrify.c:183)
==22694==    by 0x419D10: MagickMain (magick.c:149)
==22694==    by 0x57B882F: (below main) (libc-start.c:291)

Thread 2: status = VgTs_WaitSys (lwpid 22695)
==22694==    at 0x4E4BD22: ??? (in /usr/lib/x86_64-linux-gnu/libgomp.so.1.0.0)
==22694==    by 0x4E49449: ??? (in /usr/lib/x86_64-linux-gnu/libgomp.so.1.0.0)
==22694==    by 0x55826B9: start_thread (pthread_create.c:333)
==22694==    by 0x589E82C: clone (clone.S:109)

```

Backtrace:

```
(gdb) bt
#0  ExportRedQuantum (exception=0x2, q=<optimized out>, p=<optimized out>, number_pixels=196856, quantum_info=0x1547990, image=0x1577dd0)
    at MagickCore/quantum-export.c:3069
#1  ExportQuantumPixels (image=image@entry=0x1577dd0, image_view=image_view@entry=0x0, quantum_info=quantum_info@entry=0x1547990,
    quantum_type=quantum_type@entry=RedQuantum, pixels=<optimized out>, pixels@entry=0x1570440 '\377' <repeats 200 times>..., exception=exception@entry=0x154a350)
    at MagickCore/quantum-export.c:4045
#2  0x000000000081f40e in WritePSDChannel (psd_info=psd_info@entry=0x7fffffff7c60, image_info=image_info@entry=0x154d700, image=image@entry=0x1706c60,
    next_image=next_image@entry=0x1577dd0, quantum_type=quantum_type@entry=RedQuantum, compact_pixels=compact_pixels@entry=0x0, size_offset=144, separate=MagickTrue,
    exception=0x154a350) at coders/psd.c:2545
#3  0x000000000082e6b9 in WritePSDChannels (separate=MagickTrue, exception=<optimized out>, size_offset=92, next_image=0x1577dd0, image=<optimized out>,
    image_info=<optimized out>, psd_info=0x7fffffff7c60) at coders/psd.c:2683
#4  WritePSDImage (image_info=0x154d700, image=<optimized out>, exception=0x154a350) at coders/psd.c:3359
#5  0x0000000000a148b8 in WriteImage (image_info=image_info@entry=0x1565f40, image=image@entry=0x1706c60, exception=exception@entry=0x154a350)
    at MagickCore/constitute.c:1101
#6  0x0000000000a16606 in WriteImages (image_info=image_info@entry=0x1572b80, images=<optimized out>, images@entry=0x1706c60, filename=<optimized out>,
    exception=0x154a350) at MagickCore/constitute.c:1320
#7  0x00000000011043f4 in CLINoImageOperator (cli_wand=cli_wand@entry=0x1548b70, option=option@entry=0x11e4361 "-write", arg1n=arg1n@entry=0x7fffffffe6e8 "/dev/null",
    arg2n=arg2n@entry=0x0) at MagickWand/operation.c:4778
#8  0x0000000001107339 in CLIOption (cli_wand=cli_wand@entry=0x1548b70, option=option@entry=0x11e4361 "-write") at MagickWand/operation.c:5238
#9  0x0000000000f86895 in ProcessCommandOptions (cli_wand=cli_wand@entry=0x1548b70, argc=argc@entry=3, argv=argv@entry=0x7fffffffe428, index=index@entry=1)
    at MagickWand/magick-cli.c:526
#10 0x0000000000f87fc3 in MagickImageCommand (image_info=image_info@entry=0x154a4d0, argc=argc@entry=3, argv=argv@entry=0x7fffffffe428,
    metadata=metadata@entry=0x7fffffffc0d0, exception=exception@entry=0x154a350) at MagickWand/magick-cli.c:791
#11 0x0000000000f90dea in MagickCommandGenesis (image_info=image_info@entry=0x154a4d0, command=command@entry=0xf86bf0 <MagickImageCommand>, argc=argc@entry=3,
    argv=argv@entry=0x7fffffffe428, metadata=0x0, exception=exception@entry=0x154a350) at MagickWand/mogrify.c:183
#12 0x0000000000419d11 in MagickMain (argc=3, argv=0x7fffffffe428) at utilities/magick.c:149
#13 0x00007ffff70d0830 in __libc_start_main (main=0x4060d0 <main>, argc=3, argv=0x7fffffffe428, init=<optimized out>, fini=<optimized out>, rtld_fini=<optimized out>,
    stack_end=0x7fffffffe418) at ../csu/libc-start.c:291
#14 0x00000000004198a9 in _start ()

```

PoC:

<https://github.com/Miladbr/public-poc/blob/master/imagemagick/7.psb>

## Metadata

### Assignees

No one assigned

### Labels

[bug](https://github.com/ImageMagick/ImageMagick/issues?q=state%3Aopen%20label%3A%22bug%22)
### Type

No type
### Projects

No projects
### Milestone

No milestone

### Relationships

None yet
### Development

No branches or pull requests
## Issue actions

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.


