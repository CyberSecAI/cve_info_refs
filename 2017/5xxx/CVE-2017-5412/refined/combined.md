=== Content from wiki.mozilla.org_3659d679_20250126_115001.html ===


# BMO/UserGuide/BugFields

From MozillaWiki
< [BMO](/BMO "BMO")‎ | [UserGuide](/BMO/UserGuide "BMO/UserGuide")

[Jump to navigation](#mw-head)
[Jump to search](#searchInput)
## Bugzilla Field Descriptions

Alias
A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla.Assignee
This is the person in charge of resolving the bug. Every time this field changes, the status changes to NEW to make it easy to see which new bugs have appeared on a person's list.Blocks
This bug must be resolved before the bugs listed in this field can be resolved.Bug ID
The numeric id of a bug, unique within this entire installation of Bugzilla.CC
Users who may not have a direct role to play on this bug, but who are interested in its progress.Changed
When this bug was last updated.Classification
Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorization.Comment
Bugs have comments added to them by Bugzilla users. You can search for some text in those comments.Comment Tag
Comments can have arbitrary tags added to them to help with filtering as well as mark comments as spam or abusive.Component
Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list.Creation date
When the bug was filed.Depends on
The bugs listed here must be resolved before this bug can be resolved.Duplicates
List of bugs that have been marked a duplicate of the bug currently being viewed.Keywords
Keywords are a controlled vocabulary for characterizing bugs across Products and Components. Examples of this field are `regression`, `sec-high`, and `topcrash`. Bugzilla administrators manage [the list of keywords](https://bugzilla.mozilla.org/describekeywords.cgi). If you believe you need a new keyword, [please contact the administrators to discuss](https://bugzilla.mozilla.org/enter_bug.cgi?product=bugzilla.mozilla.org&component=Administration).Mentors
Mentors are users who have offered to help the bug owner with such tasks as setting up a development environment, finding relevant information to fixing the bug, how to submit a patch for review, and finally how to get the fix committed.Needinfo
More information has been requested from specific individuals, or anyone, to move the bug forward to completion.OS
This is the operating system against which the bug was reported.Platform
This is the hardware platform against which the bug was reported (ARM, ARM64, x86, x86\_64, etc).Priority

| Priority | Description |
| --- | --- |
| **--** | No decision |
| **P1** | Fix in the current release cycle |
| **P2** | Fix in the next release cycle or the following (nightly + 1 or nightly + 2) |
| **P3** | Backlog |
| **P4** | Do not use. This priority is for the Web Platform Test bot. |
| **P5** | Will not fix, but will accept a patch |

This field describes the importance and order in which a bug should be fixed compared to other bugs. This field is utilized by the programmers/engineers/release managers/managers to prioritize the work to be done. See the Firefox [triage documentation](https://firefox-source-docs.mozilla.org/bug-mgmt/policies/triage-bugzilla.html) and [priority definitions](https://firefox-source-docs.mozilla.org/bug-mgmt/guides/priority.html), or for the main Bugzilla project, [Bugzilla:Priority\_System](/Bugzilla%3APriority_System "Bugzilla:Priority System").Product
Bugs are categorised into Products and Components. Select a Classification to narrow down this list.QA Contact
The person responsible for confirming this bug if it is unconfirmed, and for verifying the fix once the bug has been resolved.Rank
Used by some groups to provide finer-grained ordering for working on bugs than afforded by the Priority field. Use of this field is restricted to the `rank-setters` group.Regressed by
This bug has been introduced by the bugs listed here.Regressions
This bug has introduced the bugs listed here.Reporter
The person who filed this bug.See Also
This allows you to refer to bugs in other bug tracker installations. You can enter a URL to a bug in the 'Add Bug URLs' field to note that that bug is related to this one. You can enter multiple URLs at once by separating them with a comma. You should normally use this field to refer to bugs in other bug tracker installations, or bugs which are related to, but not known to be duplicates of the bug. Bugs which are regressions should be listed in the Regressed by field (above)Severity
This field describes the impact of a bug. This field is utilized by the programmers/engineers/release managers/managers to determine the severity of issues and used as input for the priority of the bug. It should not be set by people filing bugs. See the Firefox [triage documentation](https://firefox-source-docs.mozilla.org/bug-mgmt/policies/triage-bugzilla.html) and [severity documentation](https://firefox-source-docs.mozilla.org/bug-mgmt/guides/severity.html).

| Severity | Description |
| --- | --- |
| **--** | Default value for new bugs; bug triagers for components (ie engineers and other core project folks) are expected to update the bug's severity from this value. To avoid them missing new bugs for triage, do not alter this default when filing bugs. |
| **S1** | (Catastrophic) Blocks development/testing, may impact more than 25% of users, causes data loss, likely dot release driver, and no workaround available |
| **S2** | (Serious) Major functionality/product severely impaired or a high impact issue and a satisfactory workaround does not exist |
| **S3** | (Normal) Blocks non-critical functionality or a work around exists |
| **S4** | (Small/Trivial) minor significance, cosmetic issues, low or no impact to users |
| **N/A** | (Not Applicable) The above definitions do not apply to this bug; this value is reserved for bugs of type Task or Enhancement |

Summary
The bug summary is a short sentence which succinctly describes what the bug is about.Target Milestone
For Firefox-related bugs, when a change set (patch) lands in Mozilla-Central, the [sheriffs](/Sheriffing "Sheriffing") will set this field to the corresponding release value for the current Nightly.
Release status and tracking flags are used to mark intentions for when a fix or other patch should land.
If you need to track a bug against a set of milestones other than upcoming versions of Firefox, please tell the Bugzilla team, you may want a custom status flag.Triage Owner
User that is responsible [for triaging bugs in a specific component](https://firefox-source-docs.mozilla.org/bug-mgmt/policies/triage-bugzilla.html).Type
This field describes the [type of a bug](https://firefox-source-docs.mozilla.org/bug-mgmt/guides/bug-types.html).

| Type | Description |
| --- | --- |
| **defect** | regression, crash, hang, security vulnerability and any other general issue. |
| **enhancement** | new feature, improvement in UI, performance, etc. and any other request for user-facing changes and enhancements in the product; not engineering changes |
| **task** | refactoring, removal, replacement, enabling or disabling of functionality and any other engineering task |

URL
Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen.Version
The version field defines the version of the software the bug was found in.Votes
Some bugs can be voted for, and you can limit your search to bugs with more than a certain number of votes. Votes are not used by Mozilla developers to set priorities.Whiteboard
Each bug has a free-form single line text entry box for adding tags and status information

Retrieved from "<https://wiki.mozilla.org/index.php?title=BMO/UserGuide/BugFields&oldid=1250790>"

## Navigation menu

### Personal tools

* [Log in](/index.php?title=Special:UserLogin&returnto=BMO%2FUserGuide%2FBugFields "You are encouraged to log in; however, it is not mandatory [o]")
* [Request account](/Special%3ARequestAccount "You are encouraged to create an account and log in; however, it is not mandatory")

### Namespaces

* [Page](/BMO/UserGuide/BugFields "View the content page [c]")
* [Discussion](/index.php?title=Talk:BMO/UserGuide/BugFields&action=edit&redlink=1 "Discussion about the content page (page does not exist) [t]")

English

### Views

* [Read](/BMO/UserGuide/BugFields)
* [View source](/index.php?title=BMO/UserGuide/BugFields&action=edit "This page is protected.
  You can view its source [e]")
* [View history](/index.php?title=BMO/UserGuide/BugFields&action=history "Past revisions of this page [h]")

More

### Search

### Navigation

* [Main page](/Main_Page "Visit the main page [z]")
* [Product releases](/Releases)
* [New pages](/Special%3ANewPages)
* [Recent changes](/Special%3ARecentChanges "A list of recent changes in the wiki [r]")
* [Recent uploads](/Special%3ANewFiles)
* [Random page](/Special%3ARandom "Load a random page [x]")
* [Help](/MozillaWiki%3AHelp "The place to find out")

### How to Contribute

* [All-hands meeting](/WeeklyUpdates)
* [Other meetings](/Community_Calendar)
* [Contribute to Mozilla](/Contribute)
* [Community Portal](//community.mozilla.org)
* [Community Participation Guidelines](//www.mozilla.org/en-US/about/governance/policies/participation/)

### MozillaWiki

* [About](/MozillaWiki%3AAbout)
* [Team](/MozillaWiki%3ATeam)
* [Policies](/MozillaWiki%3APolicies)
* [Report a wiki bug](//bugzilla.mozilla.org/enter_bug.cgi?product=Websites&component=wiki.mozilla.org)

### Around Mozilla

* [Mozilla Support](//support.mozilla.org/)
* [Mozilla Developer Network](//developer.mozilla.org/)
* [Planet Mozilla](//planet.mozilla.org/)
* [Mozilla Blog](//blog.mozilla.org/)
* [Research](//www.mozilla.org/research/)

### Tools

* [What links here](/Special%3AWhatLinksHere/BMO/UserGuide/BugFields "A list of all wiki pages that link here [j]")
* [Related changes](/Special%3ARecentChangesLinked/BMO/UserGuide/BugFields "Recent changes in pages linked from this page [k]")
* [Special pages](/Special%3ASpecialPages "A list of all special pages [q]")
* Printable version
* [Permanent link](/index.php?title=BMO/UserGuide/BugFields&oldid=1250790 "Permanent link to this revision of this page")
* [Page information](/index.php?title=BMO/UserGuide/BugFields&action=info "More information about this page")

* This page was last edited on 14 May 2024, at 14:22.

* [Privacy policy](/MozillaWiki%3APrivacy_policy)
* [About MozillaWiki](/MozillaWiki%3AAbout)
* [Mobile view](https://wiki.mozilla.org/index.php?title=BMO/UserGuide/BugFields&mobileaction=toggle_view_mobile)

* [![Powered by MediaWiki](/resources/assets/poweredby_mediawiki_88x31.png)](https://www.mediawiki.org/)



=== Content from bugzilla.mozilla.org_3159aea1_20250125_204448.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summary▾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View ▾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/1328323)
* [XML](/show_bug.cgi?ctype=xml&id=1328323)

Closed
[Bug 1328323](/show_bug.cgi?id=1328323)
(CVE-2017-5412)

Opened 8 years ago
Closed 8 years ago

# Heap-buffer-overflow read in ColorComponentAtPoint

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

Heap-buffer-overflow read in ColorComponentAtPoint

## Categories

### (Core :: Graphics: Color Management, defect)

[Product:](/describecomponents.cgi?product=Core)

Core
▾

Core
Shared components used by Firefox and other Mozilla software, including handling of Web content; Gecko, HTML, CSS, layout, DOM, scripts, images, networking, etc. Issues with web page layout probably go here, while Firefox user interface issues belong in the [Firefox](https://bugzilla.mozilla.org/describecomponents.cgi?product=Firefox) product. ([More info](https://wiki.mozilla.org/Modules/All#Core))
[See Open Bugs in This Product](/buglist.cgi?product=Core&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Core)
Watch This Product

[Component:](/describecomponents.cgi?product=Core&component=Graphics%3A%20Color%20Management#Graphics%3A%20Color%20Management)

Graphics: Color Management
▾

Core :: Graphics: Color Management
qcms and other issues relating to Mozilla's color management
implementation.
[See Open Bugs in This Component](/buglist.cgi?product=Core&component=Graphics%3A%20Color%20Management&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Core&component=Graphics%3A%20Color%20Management&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Core&component=Graphics%3A%20Color%20Management)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

unspecified

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

Unspecified

Unspecified

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

*Not set*

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

normal

Points:

---

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

mozilla53

Iteration:

---

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| Webcompat Score | --- |
| --- | --- |
| Accessibility Severity | --- |
| Webcompat Priority | --- |
| Performance Impact | --- |
| a11y-review | --- |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox-esr45 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox_esr45&o1=equals&v1=wontfix) |
| firefox51 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox51&o1=equals&v1=wontfix) |
| firefox52 | --- | [fixed](/buglist.cgi?f1=cf_status_firefox52&o1=equals&v1=fixed) |
| firefox53 | --- | [fixed](/buglist.cgi?f1=cf_status_firefox53&o1=equals&v1=fixed) |

|  | Tracking | Status |
| --- | --- | --- |
| firefox-esr45 |  | wontfix |
| relnote-firefox |  | --- |
| thunderbird\_esr115 | --- | --- |
| thunderbird\_esr128 | --- | --- |
| firefox51 |  | wontfix |
| firefox52 |  | fixed |
| firefox53 |  | fixed |
| firefox-esr115 | --- | --- |
| firefox-esr128 | --- | --- |
| firefox134 | --- | --- |
| firefox135 | --- | --- |
| firefox136 | --- | --- |

## People

### (Reporter: attekett, Assigned: gw280)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/61d963a63ad71f73060c41020d9b0c6b?d=mm&size=40)  [gw280](/user_profile?user_id=432425)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](https://secure.gravatar.com/avatar/6e1d9fb30a393b4b29162e824f2b7321?d=mm&size=40)  [attekett](/user_profile?user_id=420648)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

![](https://secure.gravatar.com/avatar/ca6a57abf052ac63d917d5dae1cc0f00?d=mm&size=40)  [jgilbert](/user_profile?user_id=419431)

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

9 people

## References

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

---

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

---

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

---

## Details

### (5 keywords, Whiteboard: [post-critsmash-triage][adv-main52+] probably fixed by 1329849)

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

CVE-2017-5412

[Keywords:](/describekeywords.cgi)

[crash](/buglist.cgi?keywords=crash&resolution=---),
[csectype-bounds](/buglist.cgi?keywords=csectype-bounds&resolution=---),
[reporter-external](/buglist.cgi?keywords=reporter-external&resolution=---),
[sec-moderate](/buglist.cgi?keywords=sec-moderate&resolution=---),
[testcase](/buglist.cgi?keywords=testcase&resolution=---)

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[post-critsmash-triage][adv-main52+] probably fixed by 1329849

QA Whiteboard:

---

Has STR:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

| [abillings](/user_profile?user_id=280903) | [sec-bounty](#a2334528_280903 "8 years ago") | + |
| --- | --- | --- |
| [abillings](/user_profile?user_id=280903) | sec-bounty | + |
| --- | --- | --- |
| [kjozwiak](/user_profile?user_id=455785) | [qe-verify](#a4509501_455785 "8 years ago") | - |
| --- | --- | --- |
| [kjozwiak](/user_profile?user_id=455785) | qe-verify | - |
| --- | --- | --- |
|  | behind-pref |  |
| --- | --- | --- |
|  | firefox-backlog |  |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | in-testsuite |  |

## Crash Data

Signature:

*None*

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (1 file)

| [SVG image testcase (CRASHES affected versions)](/attachment.cgi?id=8823357)  [8 years ago](#c0)  [Atte Kettunen](/user_profile?user_id=420648)   356 bytes, image/svg+xml |  | [Details](/attachment.cgi?id=8823357&action=edit) |
| --- | --- | --- |

Bottom ↓
Tags ▾

* Reset

Timeline ▾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [Atte Kettunen](/user_profile?user_id=420648)  Reporter |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=1328323#c0)• 8 years ago |
|  | |

Attached image
[SVG image testcase (CRASHES affected versions)](attachment.cgi?id=8823357)
— [Details](attachment.cgi?id=8823357&action=edit)

Tested on:
OS: Ubuntu 16.04
Firefox: ASAN build of moz\_source\_stamp: 2bd53e4e662bcdd32c53cb4e09ceff088e8f6369
Minimized repro-file as an attachment.
ASAN-trace:
=================================================================
==18497==ERROR: AddressSanitizer: heap-buffer-overflow on address 0x7f2f4ae127ff at pc 0x7f2f82468ba2 bp 0x7ffcbafc13d0 sp 0x7ffcbafc13c8
READ of size 1 at 0x7f2f4ae127ff thread T0
#0 0x7f2f82468ba1 in ColorComponentAtPoint /home/worker/workspace/build/src/gfx/2d/FilterNodeSoftware.cpp:2279:10
#1 0x7f2f82468ba1 in GenerateNormal<int> /home/worker/workspace/build/src/gfx/2d/FilterNodeSoftware.cpp:3439
#2 0x7f2f82468ba1 in DoRender<int> /home/worker/workspace/build/src/gfx/2d/FilterNodeSoftware.cpp:3537
#3 0x7f2f82468ba1 in mozilla::gfx::FilterNodeLightingSoftware<mozilla::gfx::(anonymous namespace)::DistantLightSoftware, mozilla::gfx::(anonymous namespace)::DiffuseLightingSoftware>::Render(mozilla::gfx::IntRectTyped<mozilla::gfx::UnknownUnits> const&) /home/worker/workspace/build/src/gfx/2d/FilterNodeSoftware.cpp:3464
#4 0x7f2f823f2f6a in mozilla::gfx::FilterNodeSoftware::GetOutput(mozilla::gfx::IntRectTyped<mozilla::gfx::UnknownUnits> const&) /home/worker/workspace/build/src/gfx/2d/FilterNodeSoftware.cpp:613:21
#5 0x7f2f823fc34e in mozilla::gfx::FilterNodeSoftware::GetInputDataSourceSurface(unsigned int, mozilla::gfx::IntRectTyped<mozilla::gfx::UnknownUnits> const&, mozilla::gfx::FilterNodeSoftware::FormatHint, mozilla::gfx::ConvolveMatrixEdgeMode, mozilla::gfx::IntRectTyped<mozilla::gfx::UnknownUnits> const\*) /home/worker/workspace/build/src/gfx/2d/FilterNodeSoftware.cpp:714:17
#6 0x7f2f8242b2a4 in mozilla::gfx::FilterNodeCropSoftware::Render(mozilla::gfx::IntRectTyped<mozilla::gfx::UnknownUnits> const&) /home/worker/workspace/build/src/gfx/2d/FilterNodeSoftware.cpp:3126:10
#7 0x7f2f823f2f6a in mozilla::gfx::FilterNodeSoftware::GetOutput(mozilla::gfx::IntRectTyped<mozilla::gfx::UnknownUnits> const&) /home/worker/workspace/build/src/gfx/2d/FilterNodeSoftware.cpp:613:21
#8 0x7f2f823bd6db in mozilla::gfx::FilterNodeSoftware::Draw(mozilla::gfx::DrawTarget\*, mozilla::gfx::RectTyped<mozilla::gfx::UnknownUnits, float> const&, mozilla::gfx::PointTyped<mozilla::gfx::UnknownUnits, float> const&, mozilla::gfx::DrawOptions const&) /home/worker/workspace/build/src/gfx/2d/FilterNodeSoftware.cpp:566:14
#9 0x7f2f824c9f41 in mozilla::gfx::FilterSupport::RenderFilterDescription(mozilla::gfx::DrawTarget\*, mozilla::gfx::FilterDescription const&, mozilla::gfx::RectTyped<mozilla::gfx::UnknownUnits, float> const&, mozilla::gfx::SourceSurface\*, mozilla::gfx::IntRectTyped<mozilla::gfx::UnknownUnits> const&, mozilla::gfx::SourceSurface\*, mozilla::gfx::IntRectTyped<mozilla::gfx::UnknownUnits> const&, mozilla::gfx::SourceSurface\*, mozilla::gfx::IntRectTyped<mozilla::gfx::UnknownUnits> const&, nsTArray<RefPtr<mozilla::gfx::SourceSurface> >&, mozilla::gfx::PointTyped<mozilla::gfx::UnknownUnits, float> const&, mozilla::gfx::DrawOptions const&) /home/worker/workspace/build/src/gfx/src/FilterSupport.cpp:1360:3
#10 0x7f2f876843ce in nsFilterInstance::Render(mozilla::gfx::DrawTarget\*) /home/worker/workspace/build/src/layout/svg/nsFilterInstance.cpp:510:3
#11 0x7f2f876837e0 in nsFilterInstance::PaintFilteredFrame(nsIFrame\*, mozilla::gfx::DrawTarget\*, gfxMatrix const&, nsSVGFilterPaintCallback\*, nsRegion const\*) /home/worker/workspace/build/src/layout/svg/nsFilterInstance.cpp:79:10
.
.
.
0x7f2f4ae127ff is located 1 bytes to the left of 260175-byte region [0x7f2f4ae12800,0x7f2f4ae5204f)
allocated by thread T0 here:
#0 0x4b24ab in malloc /builds/slave/moz-toolchain/src/llvm/projects/compiler-rt/lib/asan/asan\_malloc\_linux.cc:52:3
#1 0x7f2f824a71c3 in Realloc /home/worker/workspace/build/src/gfx/2d/Tools.h:181:41
#2 0x7f2f824a71c3 in mozilla::gfx::SourceSurfaceAlignedRawData::Init(mozilla::gfx::IntSizeTyped<mozilla::gfx::UnknownUnits> const&, mozilla::gfx::SurfaceFormat, bool, unsigned char, int) /home/worker/workspace/build/src/gfx/2d/SourceSurfaceRawData.cpp:66
#3 0x7f2f823875a8 in mozilla::gfx::Factory::CreateDataSourceSurface(mozilla::gfx::IntSizeTyped<mozilla::gfx::UnknownUnits> const&, mozilla::gfx::SurfaceFormat, bool) /home/worker/workspace/build/src/gfx/2d/Factory.cpp:818:7
#4 0x7f2f8240ef08 in mozilla::gfx::FilterProcessing::ExtractAlpha(mozilla::gfx::DataSourceSurface\*) /home/worker/workspace/build/src/gfx/2d/FilterProcessing.cpp:16:37
#5 0x7f2f82466882 in DoRender<int> /home/worker/workspace/build/src/gfx/2d/FilterNodeSoftware.cpp:3503:13
#6 0x7f2f82466882 in mozilla::gfx::FilterNodeLightingSoftware<mozilla::gfx::(anonymous namespace)::DistantLightSoftware, mozilla::gfx::(anonymous namespace)::DiffuseLightingSoftware>::Render(mozilla::gfx::IntRectTyped<mozilla::gfx::UnknownUnits> const&) /home/worker/workspace/build/src/gfx/2d/FilterNodeSoftware.cpp:3464
#7 0x7f2f823f2f6a in mozilla::gfx::FilterNodeSoftware::GetOutput(mozilla::gfx::IntRectTyped<mozilla::gfx::UnknownUnits> const&) /home/worker/workspace/build/src/gfx/2d/FilterNodeSoftware.cpp:613:21
#8 0x7f2f823fc34e in mozilla::gfx::FilterNodeSoftware::GetInputDataSourceSurface(unsigned int, mozilla::gfx::IntRectTyped<mozilla::gfx::UnknownUnits> const&, mozilla::gfx::FilterNodeSoftware::FormatHint, mozilla::gfx::ConvolveMatrixEdgeMode, mozilla::gfx::IntRectTyped<mozilla::gfx::UnknownUnits> const\*) /home/worker/workspace/build/src/gfx/2d/FilterNodeSoftware.cpp:714:17
#9 0x7f2f8242b2a4 in mozilla::gfx::FilterNodeCropSoftware::Render(mozilla::gfx::IntRectTyped<mozilla::gfx::UnknownUnits> const&) /home/worker/workspace/build/src/gfx/2d/FilterNodeSoftware.cpp:3126:10
#10 0x7f2f823f2f6a in mozilla::gfx::FilterNodeSoftware::GetOutput(mozilla::gfx::IntRectTyped<mozilla::gfx::UnknownUnits> const&) /home/worker/workspace/build/src/gfx/2d/FilterNodeSoftware.cpp:613:21
#11 0x7f2f823bd6db in mozilla::gfx::FilterNodeSoftware::Draw(mozilla::gfx::DrawTarget\*, mozilla::gfx::RectTyped<mozilla::gfx::UnknownUnits, float> const&, mozilla::gfx::PointTyped<mozilla::gfx::UnknownUnits, float> const&, mozilla::gfx::DrawOptions const&) /home/worker/workspace/build/src/gfx/2d/FilterNodeSoftware.cpp:566:14
.
.
.

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1328323#a87798_406194)• 8 years ago |

Keywords: [csectype-bounds](/buglist.cgi?keywords=csectype-bounds&resolution=---)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1328323#a175351_1689)• 8 years ago |

[Attachment #8823357](/attachment.cgi?id=8823357&action=edit "SVG image testcase (CRASHES affected versions)") -
Attachment description: firefox-heap-buffer-overflow-ColorComponentAtPoint-min.svg → SVG image testcase (CRASHES affected versions)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=1328323#c1)• 8 years ago |
|  | |

Jeff: what's being read here? I'm assuming something like reading random data and turning into part of the filter and could then be figured out if the image was rendered into a canvas. Is it a big chunk of data read one by one, or is it just an off-by one? The amount of data that could be read in affects the severity.Group: core-security → gfx-core-security

|  | [Tyson Smith [:tsmith] (PTO)](/user_profile?user_id=486634) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1328323#a175665_486634)• 8 years ago |

Keywords: [crash](/buglist.cgi?keywords=crash&resolution=---),
[testcase](/buglist.cgi?keywords=testcase&resolution=---)

|  | [Milan Sreckovic [:milan] (needinfo for best results)](/user_profile?user_id=456486) |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=1328323#c2)• 8 years ago |
|  | |

A lot of bytes accessed one by one, in the neighbourhood of the heap allocated memory we should be accessing.
This asserts in the debug non-asan build, when acceleration is off.

|  | [Milan Sreckovic [:milan] (needinfo for best results)](/user_profile?user_id=456486) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1328323#a177215_456486)• 8 years ago |

Assignee: nobody → gwright

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1328323#a1384922_1689)• 8 years ago |

Flags: sec-bounty?Keywords: [sec-moderate](/buglist.cgi?keywords=sec-moderate&resolution=---)

|  | [George Wright (:gw280) (needinfo me!)](/user_profile?user_id=432425)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1328323#a1385238_432425)• 8 years ago |

Flags: needinfo?(gwright)

|  | [George Wright (:gw280) (needinfo me!)](/user_profile?user_id=432425)  Assignee |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=1328323#c3)• 8 years ago |
|  | |

Looks like this was fixed by [bug 1329849](/show_bug.cgi?id=1329849 "RESOLVED FIXED - crash at null [@DataAtOffset] in gfx/2d/DataSurfaceHelpers.cpp:91"); at least, I can't reproduce with current mozilla-central, but if I back out those patches I hit the assert milan described in [comment 2](/show_bug.cgi?id=1328323#c2 "RESOLVED FIXED - Heap-buffer-overflow read in ColorComponentAtPoint").
Also tried ASAN builds and couldn't get it to crash.Status: NEW → RESOLVEDClosed: 8 years agoFlags: needinfo?(gwright)Resolution: --- → FIXED

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1328323#a1741940_1689)• 8 years ago |

Group: gfx-core-security → core-security-release

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1328323#a1940548_75935)• 8 years ago |

[status-firefox51](/buglist.cgi?f1=cf_status_firefox51&o1=isnotempty):
--- → [wontfix](/buglist.cgi?f1=cf_status_firefox51&o1=equals&v1=wontfix)
[status-firefox52](/buglist.cgi?f1=cf_status_firefox52&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_firefox52&o1=equals&v1=fixed)
[status-firefox53](/buglist.cgi?f1=cf_status_firefox53&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_firefox53&o1=equals&v1=fixed)
[status-firefox-esr45](/buglist.cgi?f1=cf_status_firefox_esr45&o1=isnotempty):
--- → [wontfix](/buglist.cgi?f1=cf_status_firefox_esr45&o1=equals&v1=wontfix)Target Milestone: --- → mozilla53

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1328323#a2334528_280903)• 8 years ago |

Flags: sec-bounty? → sec-bounty+

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1328323#a2334536_1689)• 8 years ago |

Whiteboard: probably fixed by 1329849

|  | [Kamil Jozwiak [:kjozwiak]](/user_profile?user_id=455785) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1328323#a4509501_455785)• 8 years ago |

Flags: qe-verify-Whiteboard: probably fixed by 1329849 → [post-critsmash-triage] probably fixed by 1329849

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1328323#a4862926_280903)• 8 years ago |

Whiteboard: [post-critsmash-triage] probably fixed by 1329849 → [post-critsmash-triage][adv-main52+] probably fixed by 1329849

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1328323#a4933493_280903)• 8 years ago |

Alias: CVE-2017-5412

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1328323#a25603457_1689)• 7 years ago |

Group: core-security-release

|  | [David Lawrence [:dkl]](/user_profile?user_id=5898) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1328323#a233619762_5898)• 8 months ago |

Keywords: [reporter-external](/buglist.cgi?keywords=reporter-external&resolution=---)
You need to [log in](/show_bug.cgi?id=1328323&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top ↑

## Attachment

Hide Details

### General

Creator:  [Atte Kettunen](/user_profile?user_id=420648)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review



=== Content from www.mozilla.org_087ffa14_20250125_204450.html ===


## Help us improve your Mozilla experience

In addition to Cookies necessary for this site to function, we’d like your permission to set some additional Cookies to better understand your browsing needs and improve your experience. Rest assured — we value your privacy.

Accept All Additional Cookies

Reject All Additional Cookies

[Cookie settings](/en-US/privacy/websites/cookie-settings/)

Menu
[![Mozilla](https://www.mozilla.org/media/img/logos/m24/lockup-black.f2ddba3f0724.svg)](/en-US/)

* [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
  Firefox browsers](/en-US/firefox/)
  Close Firefox browsers menu
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
    ## Firefox for Desktop](/en-US/firefox/new/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
    ## Firefox for iOS](/en-US/firefox/browsers/mobile/ios/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
    ## Firefox for Android](/en-US/firefox/browsers/mobile/android/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/focus/logo.aac3e33175cb.svg)
    ## Firefox Focus](/en-US/firefox/browsers/mobile/focus/)
  + [## Firefox blog](https://blog.mozilla.org/firefox/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=firefox)
* [Products](/en-US/products/)
  Close Products menu
  + [![](https://www.mozilla.org/media/protocol/img/logos/mozilla/vpn/logo.c648f487bfb8.svg)
    ## Mozilla VPN](/en-US/products/vpn/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/monitor/logo.d97e5516f9e6.svg)
    ## Mozilla Monitor](https://monitor.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/relay/logo-white.d42a8b52e44c.svg)
    ## Firefox Relay](https://relay.firefox.com/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/protocol/img/logos/pocket/logo.17446bc33a5d.svg)
    ## Pocket](https://getpocket.com/firefox_learnmore/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/img/nav/icons/icon-mdn-plus.f54475f980ab.svg)
    ## MDN Plus](https://developer.mozilla.org/plus?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/img/logos/fakespot/logo-blue.3973b8fe9631.svg)
    ## Fakespot](https://fakespot.com/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/img/logos/thunderbird/logo-thunderbird.121e9c0fed45.svg)
    ## Thunderbird](https://www.thunderbird.net/)

  [All products](/en-US/products/)
* [About us](/en-US/about/)
  Close About us menu

  Our Mission

  + [## About Mozilla](/en-US/about/)
  + [## The Mozilla Manifesto](/en-US/about/manifesto/)
  + [## Get Involved](/en-US/contribute/)
  + [## Innovation Projects](https://future.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [## Blog](https://blog.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)

  Our Work

  + [## Mozilla Foundation](https://foundation.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [## Mozilla.ai](https://www.mozilla.ai/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [## Mozilla Ventures](https://mozilla.vc/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [## Mozilla Advertising](/en-US/advertising/)

## Menu

* Mozilla Security

## [Mozilla Security](/en-US/security/)

* [Advisories](/en-US/security/advisories/)
* [Known Vulnerabilities](/en-US/security/known-vulnerabilities/)
* [Mozilla Security Blog](https://blog.mozilla.com/security/)
* [Security Bug Bounty](/en-US/security/bug-bounty/)
* [Third-party Injection Policy](/en-US/security/third-party-software-injection/)

## [Client Bug Bounty](/en-US/security/client-bug-bounty/)

* [Frequently Asked Questions](/en-US/security/bug-bounty/faq/)
* [Hall of Fame](/en-US/security/bug-bounty/hall-of-fame/)

## [Web Bug Bounty](/en-US/security/web-bug-bounty/)

* [Eligible Websites](/en-US/security/bug-bounty/web-eligible-sites/)
* [Frequently Asked Questions](/en-US/security/bug-bounty/faq-webapp/)
* [Hall of Fame](/en-US/security/bug-bounty/web-hall-of-fame/)

# Mozilla Foundation Security Advisory 2017-05

## Security vulnerabilities fixed in Firefox 52

Announced
March 7, 2017
Impact
critical
Products
Firefox
Fixed in

* Firefox 52

#### [#CVE-2017-5400: asm.js JIT-spray bypass of ASLR and DEP](#CVE-2017-5400)

Reporter
Rh0
Impact
critical
##### Description

JIT-spray targeting asm.js combined with a heap spray allows for a bypass of ASLR and DEP protections leading to potential memory corruption attacks.

##### References

* [Bug 1334933](https://bugzilla.mozilla.org/show_bug.cgi?id=1334933)

#### [#CVE-2017-5401: Memory Corruption when handling ErrorResult](#CVE-2017-5401)

Reporter
Anton Eliasson
Impact
critical
##### Description

A crash triggerable by web content in which an `ErrorResult` references unassigned memory due to a logic error. The resulting crash may be exploitable.

##### References

* [Bug 1328861](https://bugzilla.mozilla.org/show_bug.cgi?id=1328861)

#### [#CVE-2017-5402: Use-after-free working with events in FontFace objects](#CVE-2017-5402)

Reporter
Nils
Impact
critical
##### Description

A use-after-free can occur when events are fired for a `FontFace` object after the object has been already been destroyed while working with fonts. This results in a potentially exploitable crash.

##### References

* [Bug 1334876](https://bugzilla.mozilla.org/show_bug.cgi?id=1334876)

#### [#CVE-2017-5403: Use-after-free using addRange to add range to an incorrect root object](#CVE-2017-5403)

Reporter
Nils
Impact
critical
##### Description

When adding a range to an object in the DOM, it is possible to use `addRange` to add the range to an incorrect root object. This triggers a use-after-free, resulting in a potentially exploitable crash.

##### References

* [Bug 1340186](https://bugzilla.mozilla.org/show_bug.cgi?id=1340186)

#### [#CVE-2017-5404: Use-after-free working with ranges in selections](#CVE-2017-5404)

Reporter
Ivan Fratric of Google Project Zero
Impact
critical
##### Description

A use-after-free error can occur when manipulating ranges in selections with one node inside a native anonymous tree and one node outside of it. This results in a potentially exploitable crash.

##### References

* [Bug 1340138](https://bugzilla.mozilla.org/show_bug.cgi?id=1340138)

#### [#CVE-2017-5406: Segmentation fault in Skia with canvas operations](#CVE-2017-5406)

Reporter
Atte Kettunen
Impact
high
##### Description

A segmentation fault can occur in the Skia graphics library during some canvas operations due to issues with mask/clip intersection and empty masks.

##### References

* [Bug 1306890](https://bugzilla.mozilla.org/show_bug.cgi?id=1306890)

#### [#CVE-2017-5407: Pixel and history stealing via floating-point timing side channel with SVG filters](#CVE-2017-5407)

Reporter
David Kohlbrenner
Impact
high
##### Description

Using SVG filters that don't use the fixed point math implementation on a target iframe, a malicious page can extract pixel values from a targeted user. This can be used to extract history information and read text values across domains. This violates same-origin policy and leads to information disclosure.

##### References

* [Bug 1336622](https://bugzilla.mozilla.org/show_bug.cgi?id=1336622)

#### [#CVE-2017-5410: Memory corruption during JavaScript garbage collection incremental sweeping](#CVE-2017-5410)

Reporter
Jerri Rice
Impact
high
##### Description

Memory corruption resulting in a potentially exploitable crash during garbage collection of JavaScript due errors in how incremental sweeping is managed for memory cleanup.

##### References

* [Bug 1330687](https://bugzilla.mozilla.org/show_bug.cgi?id=1330687)

#### [#CVE-2017-5411: Use-after-free in Buffer Storage in libGLES](#CVE-2017-5411)

Reporter
Looben Yang
Impact
high
##### Description

A use-after-free can occur during buffer storage operations within the ANGLE graphics library, used for WebGL content. The buffer storage can be freed while still in use in some circumstances, leading to a potentially exploitable crash.
*Note: This issue is in `libGLES`, which is only in use on Windows. Other operating systems are not affected.*

##### References

* [Bug 1325511](https://bugzilla.mozilla.org/show_bug.cgi?id=1325511)

#### [#CVE-2017-5409: File deletion via callback parameter in Mozilla Windows Updater and Maintenance Service](#CVE-2017-5409)

Reporter
Holger Fuhrmannek
Impact
moderate
##### Description

The Mozilla Windows updater can be called by a non-privileged user to delete an arbitrary local file by passing a special path to the callback parameter through the Mozilla Maintenance Service, which has privileged access.
*Note: This attack requires local system access and only affects Windows. Other operating systems are not affected.*

##### References

* [Bug 1321814](https://bugzilla.mozilla.org/show_bug.cgi?id=1321814)

#### [#CVE-2017-5408: Cross-origin reading of video captions in violation of CORS](#CVE-2017-5408)

Reporter
Eric Lawrence of Chrome Security
Impact
moderate
##### Description

Video files loaded video captions cross-origin without checking for the presence of CORS headers permitting such cross-origin use, leading to potential information disclosure for video captions.

##### References

* [Bug 1313711](https://bugzilla.mozilla.org/show_bug.cgi?id=1313711)

#### [#CVE-2017-5412: Buffer overflow read in SVG filters](#CVE-2017-5412)

Reporter
Atte Kettunen
Impact
moderate
##### Description

A buffer overflow read during SVG filter color value operations, resulting in data exposure.

##### References

* [Bug 1328323](https://bugzilla.mozilla.org/show_bug.cgi?id=1328323)

#### [#CVE-2017-5413: Segmentation fault during bidirectional operations](#CVE-2017-5413)

Reporter
Atte Kettunen
Impact
moderate
##### Description

A segmentation fault can occur during some bidirectional layout operations.

##### References

* [Bug 1337504](https://bugzilla.mozilla.org/show_bug.cgi?id=1337504)

#### [#CVE-2017-5414: File picker can choose incorrect default directory](#CVE-2017-5414)

Reporter
Abdulrahman Alqabandi
Impact
moderate
##### Description

The file picker dialog can choose and display the wrong local default directory when instantiated. On some operating systems, this can lead to information disclosure, such as the operating system or the local account name.

##### References

* [Bug 1319370](https://bugzilla.mozilla.org/show_bug.cgi?id=1319370)

#### [#CVE-2017-5415: Addressbar spoofing through blob URL](#CVE-2017-5415)

Reporter
Abdulrahman Alqabandi
Impact
moderate
##### Description

An attack can use a blob URL and script to spoof an arbitrary addressbar URL prefaced by `blob:` as the protocol, leading to user confusion and further spoofing attacks.

##### References

* [Bug 1321719](https://bugzilla.mozilla.org/show_bug.cgi?id=1321719)

#### [#CVE-2017-5416: Null dereference crash in HttpChannel](#CVE-2017-5416)

Reporter
Radek 'sysKin' Czyz
Impact
moderate
##### Description

In certain circumstances a networking event listener can be prematurely released. This appears to result in a null dereference in practice.

##### References

* [Bug 1328121](https://bugzilla.mozilla.org/show_bug.cgi?id=1328121)

#### [#CVE-2017-5417: Addressbar spoofing by draging and dropping URLs](#CVE-2017-5417)

Reporter
Michal Zalewski
Impact
moderate
##### Description

When dragging content from the primary browser pane to the addressbar on a malicious site, it is possible to change the addressbar so that the displayed location following navigation does not match the URL of the newly loaded page. This allows for spoofing attacks.

##### References

* [Bug 791597](https://bugzilla.mozilla.org/show_bug.cgi?id=791597)

#### [#CVE-2017-5425: Overly permissive Gecko Media Plugin sandbox regular expression access](#CVE-2017-5425)

Reporter
Haik Aftandilian
Impact
moderate
##### Description

The Gecko Media Plugin sandbox allows access to local files that match specific regular expressions. On OS OX, this matching allows access to some data in subdirectories of `/private/var` that could expose personal or temporary data. This has been updated to not allow access to `/private/var` and its subdirectories.
*Note: this issue only affects OS X. Other operating systems are not affected.*

##### References

* [Bug 1322716](https://bugzilla.mozilla.org/show_bug.cgi?id=1322716)

#### [#CVE-2017-5426: Gecko Media Plugin sandbox is not started if seccomp-bpf filter is running](#CVE-2017-5426)

Reporter
Jed Davis
Impact
moderate
##### Description

On Linux, if the secure computing mode BPF (seccomp-bpf) filter is running when the Gecko Media Plugin sandbox is started, the sandbox fails to be applied and items that would run within the sandbox are run protected only by the running filter which is typically weak compared to the sandbox.
*Note: this issue only affects Linux. Other operating systems are not affected.*

##### References

* [Bug 1257361](https://bugzilla.mozilla.org/show_bug.cgi?id=1257361)

#### [#CVE-2017-5427: Non-existent chrome.manifest file loaded during startup](#CVE-2017-5427)

Reporter
Mike Kaply
Impact
moderate
##### Description

A non-existent chrome.manifest file will attempt to be loaded during startup from the primary installation directory. If a malicious user with local access puts chrome.manifest and other referenced files in this directory, they will be loaded and activated during startup. This could result in malicious software being added without consent or modification of referenced installed files.

##### References

* [Bug 1295542](https://bugzilla.mozilla.org/show_bug.cgi?id=1295542)

#### [#CVE-2017-5418: Out of bounds read when parsing HTTP digest authorization responses](#CVE-2017-5418)

Reporter
Anonymous
Impact
low
##### Description

An out of bounds read error occurs when parsing some HTTP digest authorization responses, resulting in information leakage through the reading of random memory containing matches to specifically set patterns.

##### References

* [Bug 1338876](https://bugzilla.mozilla.org/show_bug.cgi?id=1338876)

#### [#CVE-2017-5419: Repeated authentication prompts lead to DOS attack](#CVE-2017-5419)

Reporter
Chris Hamono
Impact
low
##### Description

If a malicious site repeatedly triggers a modal authentication prompt, eventually the browser UI will become non-responsive, requiring shutdown through the operating system. This is a denial of service (DOS) attack.

##### References

* [Bug 1312243](https://bugzilla.mozilla.org/show_bug.cgi?id=1312243)

#### [#CVE-2017-5420: Javascript: URLs can obfuscate addressbar location](#CVE-2017-5420)

Reporter
Abdulrahman Alqabandi
Impact
low
##### Description

A `javascript:` url loaded by a malicious page can obfuscate its location by blanking the URL displayed in the addressbar, allowing for an attacker to spoof an existing page without the malicious page's address being displayed correctly.

##### References

* [Bug 1284395](https://bugzilla.mozilla.org/show_bug.cgi?id=1284395)

#### [#CVE-2017-5405: FTP response codes can cause use of uninitialized values for ports](#CVE-2017-5405)

Reporter
Anonymous
Impact
low
##### Description

Certain response codes in FTP connections can result in the use of uninitialized values for ports in FTP operations.

##### References

* [Bug 1336699](https://bugzilla.mozilla.org/show_bug.cgi?id=1336699)

#### [#CVE-2017-5421: Print preview spoofing](#CVE-2017-5421)

Reporter
Abdulrahman Alqabandi
Impact
low
##### Description

A malicious site could spoof the contents of the print preview window if popup windows are enabled, resulting in user confusion of what site is currently loaded.

##### References

* [Bug 1301876](https://bugzilla.mozilla.org/show_bug.cgi?id=1301876)

#### [#CVE-2017-5422: DOS attack by using view-source: protocol repeatedly in one hyperlink](#CVE-2017-5422)

Reporter
Alex Bolton
Impact
low
##### Description

If a malicious site uses the `view-source:` protocol in a series within a single hyperlink, it can trigger a non-exploitable browser crash when the hyperlink is selected. This was fixed by no longer making `view-source:` linkable.

##### References

* [Bug 1295002](https://bugzilla.mozilla.org/show_bug.cgi?id=1295002)

#### [#CVE-2017-5399: Memory safety bugs fixed in Firefox 52](#CVE-2017-5399)

Reporter
Mozilla developers and community
Impact
critical
##### Description

Mozilla developers and community members Carsten Book, Calixte Denizet, Christian Holler, Andrew McCreight, David Bolter, David Keeler, Jon Coppeard, Tyson Smith, Ronald Crane, Tooru Fujisawa, Ben Kelly, Bob Owen, Jed Davis, Julian Seward, Julian Hector, Philipp, Markus Stange, and André Bargull reported memory safety bugs present in Firefox 51. Some of these bugs showed evidence of memory corruption and we presume that with enough effort that some of these could be exploited to run arbitrary code.

##### References

* [Memory safety bugs fixed in Firefox 52](https://bugzilla.mozilla.org/buglist.cgi?bug_id=1332569%2C1315248%2C1261335%2C1321038%2C1331771%2C1339566%2C1339591%2C1240893%2C1341905%2C1323241%2C1336467%2C1270288%2C1295299%2C1296024%2C1304201%2C1306142%2C1307557%2C1308036%2C1334246%2C1334290%2C1317085%2C1339116%2C1324000%2C1323150%2C1332501%2C1320894%2C1333752%2C1303713%2C1321566%2C1264053%2C1343513)

#### [#CVE-2017-5398: Memory safety bugs fixed in Firefox 52 and Firefox ESR 45.8](#CVE-2017-5398)

Reporter
Mozilla developers and community
Impact
critical
##### Description

Mozilla developers and community members Boris Zbarsky, Christian Holler, Honza Bambas, Jon Coppeard, Randell Jesup, André Bargull, Kan-Ru Chen, and Nathan Froyd reported memory safety bugs present in Firefox 51 and Firefox ESR 45.7. Some of these bugs showed evidence of memory corruption and we presume that with enough effort that some of these could be exploited to run arbitrary code.

##### References

* [Memory safety bugs fixed in Firefox 52 and Firefox ESR 45.8](https://bugzilla.mozilla.org/buglist.cgi?bug_id=1332550%2C1332597%2C1338383%2C1321612%2C1322971%2C1333568%2C1333887%2C1335450%2C1325052%2C1324379%2C1336510)

## Company

* [Leadership](/about/leadership/)
* [Press Center](https://blog.mozilla.org/category/mozilla/news/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=company)
* [Careers](/en-US/careers/)
* [Contact](/en-US/contact/)

## Support

* [Product Help](https://support.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=support)
* [File a Bug](https://bugzilla.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=support)
* [Localize Mozilla](https://pontoon.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=support)

## Resources

* [Advertise with Mozilla](/en-US/advertising/)
* [Firefox Release Notes](/firefox/134.0.2/releasenotes/)

## Developers

* [Developer Edition](/en-US/firefox/developer/)
* [Enterprise](/en-US/firefox/enterprise/)
* [Tools](https://firefox-source-docs.mozilla.org/devtools-user/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=developers)
* [MDN](https://developer.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer)

## Follow @Mozilla

* [X (formerly Twitter) (@mozilla)](https://twitter.com/mozilla)
* [Instagram (@mozilla)](https://www.instagram.com/mozilla/)
* [LinkedIn (@mozilla)](https://www.linkedin.com/company/mozilla-corporation/)
* [TikTok (@mozilla)](https://www.tiktok.com/%40mozilla)
* [Spotify (@mozilla)](https://open.spotify.com/show/0vT7LJMeVDxyQ2ZamHKu08?si=_uDRD6bRR_6M5YZyISGXgA)

## Follow @Firefox

* [X (formerly Twitter) (@firefox)](https://twitter.com/firefox)
* [Instagram (@firefox)](https://www.instagram.com/firefox/)
* [YouTube (@firefoxchannel)](https://www.youtube.com/user/firefoxchannel)
* [TikTok (@firefox)](https://www.tiktok.com/%40firefox)

[Donate](https://foundation.mozilla.org/?form=moco-donate-footer)

Visit [Mozilla Corporation’s](/en-US/) not-for-profit parent, the [Mozilla Foundation](https://foundation.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer).

Portions of this content are ©1998–2025 by individual mozilla.org contributors. Content available under a [Creative Commons license](/en-US/foundation/licensing/website-content/).

* [Website Privacy Notice](/en-US/privacy/websites/)
* [Cookies](/en-US/privacy/websites/cookie-settings/)
* [Legal](/en-US/about/legal/)
* [Community Participation Guidelines](/en-US/about/governance/policies/participation/)
* [About this site](/en-US/about/this-site/)

![](https://www.mozilla.org/media/img/logos/m24/wordmark-white.2d673bb5b33a.svg)



=== Content from bugzilla.mozilla.org_8ce3b2bc_20250126_115023.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summary▾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View ▾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/1313711)
* [XML](/show_bug.cgi?ctype=xml&id=1313711)

Closed
[Bug 1313711](/show_bug.cgi?id=1313711)
(CVE-2017-5408)

Opened 8 years ago
Closed 8 years ago

# Same-Origin-Policy violation via Text Track

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

Same-Origin-Policy violation via Text Track

## Categories

### (Core :: Audio/Video: Playback, defect, P1)

[Product:](/describecomponents.cgi?product=Core)

Core
▾

Core
Shared components used by Firefox and other Mozilla software, including handling of Web content; Gecko, HTML, CSS, layout, DOM, scripts, images, networking, etc. Issues with web page layout probably go here, while Firefox user interface issues belong in the [Firefox](https://bugzilla.mozilla.org/describecomponents.cgi?product=Firefox) product. ([More info](https://wiki.mozilla.org/Modules/All#Core))
[See Open Bugs in This Product](/buglist.cgi?product=Core&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Core)
Watch This Product

[Component:](/describecomponents.cgi?product=Core&component=Audio%2FVideo%3A%20Playback#Audio%2FVideo%3A%20Playback)

Audio/Video: Playback
▾

Core :: Audio/Video: Playback
For problems related to the HTML 5 media elements (<video> and <audio>) -- including WebM, MP4, MSE and EME issues. This would also typically include decoding problems in the codecs themselves (e.g. VP8, VP9, H.264, AAC) experienced during playback.
[See Open Bugs in This Component](/buglist.cgi?product=Core&component=Audio%2FVideo%3A%20Playback&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Core&component=Audio%2FVideo%3A%20Playback&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Core&component=Audio%2FVideo%3A%20Playback)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

52 Branch

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

Unspecified

Unspecified

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

P1

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

normal

Points:

---

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

VERIFIED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

VERIFIED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

mozilla54

Iteration:

---

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| Performance Impact | --- |
| --- | --- |
| Webcompat Score | --- |
| a11y-review | --- |
| Webcompat Priority | --- |
| Accessibility Severity | --- |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox-esr45 | [52+](/buglist.cgi?f1=cf_tracking_firefox_esr45&o1=equals&v1=52%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox_esr45&o1=equals&v1=fixed) |
| firefox51 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox51&o1=equals&v1=wontfix) |
| firefox52 | [+](/buglist.cgi?f1=cf_tracking_firefox52&o1=equals&v1=%2B) | [verified](/buglist.cgi?f1=cf_status_firefox52&o1=equals&v1=verified) |
| firefox-esr52 | --- | [fixed](/buglist.cgi?f1=cf_status_firefox_esr52&o1=equals&v1=fixed) |
| firefox53 | [+](/buglist.cgi?f1=cf_tracking_firefox53&o1=equals&v1=%2B) | [verified](/buglist.cgi?f1=cf_status_firefox53&o1=equals&v1=verified) |
| firefox54 | [+](/buglist.cgi?f1=cf_tracking_firefox54&o1=equals&v1=%2B) | [verified](/buglist.cgi?f1=cf_status_firefox54&o1=equals&v1=verified) |

|  | Tracking | Status |
| --- | --- | --- |
| firefox-esr45 | 52+ | fixed |
| relnote-firefox |  | --- |
| thunderbird\_esr115 | --- | --- |
| thunderbird\_esr128 | --- | --- |
| firefox51 |  | wontfix |
| firefox52 | + | verified |
| firefox-esr52 |  | fixed |
| firefox53 | + | verified |
| firefox-esr115 | --- | --- |
| firefox54 | + | verified |
| firefox-esr128 | --- | --- |
| firefox134 | --- | --- |
| firefox135 | --- | --- |
| firefox136 | --- | --- |

## People

### (Reporter: ericlaw1979, Assigned: hchang)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/6ac62ddf7772ca7a2662464121b21370?d=mm&size=40)  [hchang](/user_profile?user_id=475800)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](https://secure.gravatar.com/avatar/fef2d3dd7f5bef0d6f9a439f73c55de1?d=mm&size=40)  [ericlaw1979](/user_profile?user_id=245301)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

![](extensions/Gravatar/web/default.jpg)  [jimm](/user_profile?user_id=279663)

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

33 people

## References

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

[973384](/show_bug.cgi?id=973384 "RESOLVED FIXED - Assertion failure when <track src> is a URL that redirects"), [1464012](/show_bug.cgi?id=1464012 "RESOLVED FIXED - [webvtt] Video element does not load subtitles track if initialized with preload attribute set to none")

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

---

Dependency [tree](/showdependencytree.cgi?id=1313711&hide_resolved=1)
/ [graph](/showdependencygraph.cgi?id=1313711)

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

[1337242](/show_bug.cgi?id=1337242 "NEW - Fix web-platform tests for track element cors"), [1396916](/show_bug.cgi?id=1396916 "NEW - [WebVTT] HTML5 VIDEO element - Child TRACK elements CORS validation")

## Details

### (Keywords: csectype-sop, sec-moderate, Whiteboard: [adv-main52+][adv-esr45.8+])

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

CVE-2017-5408

[Keywords:](/describekeywords.cgi)

[csectype-sop](/buglist.cgi?keywords=csectype-sop&resolution=---),
[sec-moderate](/buglist.cgi?keywords=sec-moderate&resolution=---)

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[adv-main52+][adv-esr45.8+]

QA Whiteboard:

---

Has STR:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

| [RyanVM](/user_profile?user_id=75935) | [in-testsuite](#c73 "8 years ago") | + |
| --- | --- | --- |
| [RyanVM](/user_profile?user_id=75935) | in-testsuite | + |
| --- | --- | --- |
|  | behind-pref |  |
| --- | --- | --- |
|  | firefox-backlog |  |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | qe-verify |  |

## Crash Data

Signature:

*None*

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (2 files, 9 obsolete files)

| [Bug1313711.patch](/attachment.cgi?id=8829356)  [8 years ago](#c14)  [Henry Chang [:hchang]](/user_profile?user_id=475800)   2.37 KB, patch |  | [Details](/attachment.cgi?id=8829356&action=edit) | [Diff](/attachment.cgi?id=8829356&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1313711&attachment=8829356) |
| --- | --- | --- |
| [Bug1313711\_v2.patch](/attachment.cgi?id=8829430)  [8 years ago](#c18)  [Henry Chang [:hchang]](/user_profile?user_id=475800)   9.81 KB, patch | bechen : [review+](#c21 "8 years ago") | [Details](/attachment.cgi?id=8829430&action=edit) | [Diff](/attachment.cgi?id=8829430&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1313711&attachment=8829430) |
| [Bug1313711\_Part1.patch](/attachment.cgi?id=8829804)  [8 years ago](#c22)  [Henry Chang [:hchang]](/user_profile?user_id=475800)   2.93 KB, patch | dveditz : [review+](#c34 "8 years ago") | [Details](/attachment.cgi?id=8829804&action=edit) | [Diff](/attachment.cgi?id=8829804&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1313711&attachment=8829804) |
| [Bug1313711\_Part2.patch](/attachment.cgi?id=8829805)  [8 years ago](#c23)  [Henry Chang [:hchang]](/user_profile?user_id=475800)   7.25 KB, patch | dveditz : [review+](#c35 "8 years ago") | [Details](/attachment.cgi?id=8829805&action=edit) | [Diff](/attachment.cgi?id=8829805&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1313711&attachment=8829805) |
| [Bug1313711\_Part3.patch](/attachment.cgi?id=8829806)  [8 years ago](#c24)  [Henry Chang [:hchang]](/user_profile?user_id=475800)   272.39 KB, patch | francois : [review+](#a7609948_303427 "8 years ago") | [Details](/attachment.cgi?id=8829806&action=edit) | [Diff](/attachment.cgi?id=8829806&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1313711&attachment=8829806) |
| [WebVTT\_redirection\_fix.patch](/attachment.cgi?id=8832728)  [8 years ago](#c40)  [Henry Chang [:hchang]](/user_profile?user_id=475800)   1.64 KB, patch | rillian : [review+](#c45 "8 years ago") | [Details](/attachment.cgi?id=8832728&action=edit) | [Diff](/attachment.cgi?id=8832728&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1313711&attachment=8832728) |
| [Init\_HTMLMediaElement\_mCORSMode\_early.patch](/attachment.cgi?id=8832729)  [8 years ago](#c41)  [Henry Chang [:hchang]](/user_profile?user_id=475800)   1.19 KB, patch | jwwang : [review+](#c47 "8 years ago") | [Details](/attachment.cgi?id=8832729&action=edit) | [Diff](/attachment.cgi?id=8832729&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1313711&attachment=8832729) |
| [All\_web-platform\_tests\_fix.patch](/attachment.cgi?id=8832730)  [8 years ago](#c42)  [Henry Chang [:hchang]](/user_profile?user_id=475800)   27.04 KB, patch | dveditz : [review+](#a8700886_1689 "8 years ago") | [Details](/attachment.cgi?id=8832730&action=edit) | [Diff](/attachment.cgi?id=8832730&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1313711&attachment=8832730) |
| [Bug1313711\_for\_sec-approval.patch](/attachment.cgi?id=8836719)  [8 years ago](#c49)  [Henry Chang [:hchang]](/user_profile?user_id=475800)   283.01 KB, patch | abillings : [sec-approval+](#a9358234_280903 "8 years ago") | [Details](/attachment.cgi?id=8836719&action=edit) | [Diff](/attachment.cgi?id=8836719&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1313711&attachment=8836719) |
| [Bug1313711\_sec-approval.patch](/attachment.cgi?id=8836981)  [8 years ago](#c56)  [Henry Chang [:hchang]](/user_profile?user_id=475800)   274.76 KB, patch | gchang : [approval-mozilla-aurora+](#c70 "8 years ago")  jcristau : [approval-mozilla-beta+](#c71 "8 years ago")  abillings : [sec-approval+](#c60 "8 years ago") | [Details](/attachment.cgi?id=8836981&action=edit) | [Diff](/attachment.cgi?id=8836981&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1313711&attachment=8836981) |
| [Bug1313711\_backport\_for\_esr45.patch](/attachment.cgi?id=8840285)  [8 years ago](#c74)  [Henry Chang [:hchang]](/user_profile?user_id=475800)   2.82 KB, patch | gchang : [approval-mozilla-esr45+](#c77 "8 years ago") | [Details](/attachment.cgi?id=8840285&action=edit) | [Diff](/attachment.cgi?id=8840285&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1313711&attachment=8840285) |

Show Obsolete

Bottom ↓
Tags ▾

* Reset

Timeline ▾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [Eric Lawrence (@ericlaw)](/user_profile?user_id=245301)  Reporter |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=1313711#c0)• 8 years ago |
| str | |

User Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:52.0) Gecko/20100101 Firefox/52.0
Build ID: 20161024030205
Steps to reproduce:
Repro at <https://whytls.com/test/crossorigin/index.html>
Actual results:
The video refers to a cross-origin text track file; the text tracks are used in the video despite no CORS header permitting cross-origin use. JavaScript can steal the content of the VTT text using <trackId>.track.cues[i].getCueAsHTML().
Expected results:
Captions should not be loaded unless a CORS directive on the VTT response permits cross-origin read access.

|  | [Eric Lawrence (@ericlaw)](/user_profile?user_id=245301)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1313711#a100_245301)• 8 years ago |

Component: Untriaged → Security

|  | [:Gijs (he/him)](/user_profile?user_id=159069) |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=1313711#c1)• 8 years ago |
|  | |

Radar'ing this to some folks who work on audio/video/vtt code.
Christoph, I would have expected triggering/loadingPrincipal stuff to prevent this - do we need another load type, are we using the wrong one, or... worse?Group: firefox-core-security → core-securityComponent: Security → Audio/Video: PlaybackFlags: needinfo?(ckerschb)Flags: needinfo?(alwu)Flags: needinfo?(ajones)Product: Firefox → Core

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=1313711#c2)• 8 years ago |
|  | |

Relevant spec section seems to be
<https://www.w3.org/TR/html5/embedded-content-0.html#sourcing-out-of-band-text-tracks>
Can <track> be used (read) on its own? the element itself (§4.7.9) doesn't have a crossorigin attribute and the section above only gets CORS based on the setting of it's media parent.
We seem to block VTT when there's a redirect: <https://whytls.com/test/crossorigin/index-302.html>Keywords: [csectype-sop](/buglist.cgi?keywords=csectype-sop&resolution=---),
[sec-high](/buglist.cgi?keywords=sec-high&resolution=---)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1313711#a4594_1689)• 8 years ago |

Group: core-security → media-core-security

|  | [Anthony Jones (:ajones, :kentuckyfriedtakahe, :k17e)](/user_profile?user_id=443088) |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=1313711#c3)• 8 years ago |
|  | |

Passing this onto Blake to follow up on.Flags: needinfo?(ajones) → needinfo?(bwu)

|  | [Blake Wu [:bwu][:blakewu]](/user_profile?user_id=488943) |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=1313711#c4)• 8 years ago |
|  | |

Assigned to Benjamin since he is the expert of WebVTT in my team!Assignee: nobody → bechenFlags: needinfo?(bwu)Flags: needinfo?(alwu)

|  | [Anthony Jones (:ajones, :kentuckyfriedtakahe, :k17e)](/user_profile?user_id=443088) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1313711#a291294_443088)• 8 years ago |

Priority: -- → P1

|  | [Benjamin Chen [:bechen]](/user_profile?user_id=453463) |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=1313711#c5)• 8 years ago |
|  | |

I would prefer when playback, we still load the vtt crossorigin. Then not allow crossorigin at getCueAsHTML().

|  | [Benjamin Chen [:bechen]](/user_profile?user_id=453463) |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=1313711#c6)• 8 years ago |
|  | |

<https://www.w3.org/TR/html5/embedded-content-0.html#sourcing-out-of-band-text-tracks>
Spec says:
"If the track element's parent is a media element then let CORS mode be the state of the parent media element's crossorigin content attribute. Otherwise, let CORS mode be No CORS."
===
It is easy to get the MediaElement's CORSmode value from TrackElement.
===
"If URL is not the empty string, perform a potentially CORS-enabled fetch of URL, with the mode being CORS mode, the origin being the origin of the track element's Document, and the default origin behaviour set to fail."
==
I guess we need to consider the CORSmode value and the "default origin behaviour", then find a proper
security flag in nsILoadInfo.idl for NS\_NewChannel() in HTMLTrackElement::LoadResource().
<https://dxr.mozilla.org/mozilla-central/source/dom/html/HTMLTrackElement.cpp#298>
<https://dxr.mozilla.org/mozilla-central/source/netwerk/base/nsILoadInfo.idl#53>
==
"The resource obtained in this fashion, if any, contains the text track data. If any data is obtained, it is by definition CORS-same-origin (cross-origin resources that are not suitably CORS-enabled do not get this far)."
==
hmm, I don't understand this paragraph...
==

|  | [Christoph Kerschbaumer [:ckerschb]](/user_profile?user_id=363267) |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=1313711#c7)• 8 years ago |
|  | |

(In reply to :Gijs Kruitbosch from [comment #1](/show_bug.cgi?id=1313711#c1 "VERIFIED FIXED - Same-Origin-Policy violation via Text Track"))
> Radar'ing this to some folks who work on audio/video/vtt code.
>
> Christoph, I would have expected triggering/loadingPrincipal stuff to
> prevent this - do we need another load type, are we using the wrong one,
> or... worse?
Sorry for the lag of response on this bug and unfortunately I will not be able to look at this bug for quite some time. To avoid any further delays I am hoping that Tanvi could take a look and provide some pointers. Sorry for loading this off onto you Tanvi :-(Flags: needinfo?(ckerschb) → needinfo?(tanvi)

|  | [Tanvi Vyas[:tanvi]](/user_profile?user_id=430652) |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=1313711#c8)• 8 years ago |
|  | |

Adding dveditz and we will look at this tomorrow.Flags: needinfo?(tanvi) → needinfo?(dveditz)

|  | [Tanvi Vyas[:tanvi]](/user_profile?user_id=430652) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1313711#a1574864_430652)• 8 years ago |

Flags: needinfo?(tanvi)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1313711#a1574997_1689)• 8 years ago |

Flags: needinfo?(tanvi)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1313711#a1575027_1689)• 8 years ago |

Flags: needinfo?(tanvi)

|  | [Tanvi Vyas[:tanvi]](/user_profile?user_id=430652) |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=1313711#c9)• 8 years ago |
|  | |

Dan and I discussed during triage and he said he will take a closer look, so clearing my needinfo.Flags: needinfo?(tanvi)

|  | [Blake Wu [:bwu][:blakewu]](/user_profile?user_id=488943) |  |
| --- | --- | --- |
| [Comment 10](/show_bug.cgi?id=1313711#c10)• 8 years ago |
|  | |

Un-assign Benjamin since he cannot help on this bug much.
CC Ethan as well to see if we could work together on this bug in Taipei.Assignee: bechen → nobody

|  | [Randell Jesup [:jesup] (needinfo me)](/user_profile?user_id=11539) |  |
| --- | --- | --- |
| [Comment 11](/show_bug.cgi?id=1313711#c11)• 8 years ago |
|  | |

Blake - can you find another owner for this?
Dan - have you looked at this per [comment 9](/show_bug.cgi?id=1313711#c9 "VERIFIED FIXED - Same-Origin-Policy violation via Text Track")?
Thanks!Flags: needinfo?(bwu)

|  | [Blake Wu [:bwu][:blakewu]](/user_profile?user_id=488943) |  |
| --- | --- | --- |
| [Comment 12](/show_bug.cgi?id=1313711#c12)• 8 years ago |
|  | |

Per previous discussion with Benjamin, this is more related to security.
Ni Ethan, TPE security manager, to see if any of his team member can work with Benjamin to move this bug forward.Flags: needinfo?(bwu) → needinfo?(ettseng)

|  | [Ethan Tseng [:ethan]](/user_profile?user_id=473897) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1313711#a7222933_473897)• 8 years ago |

Flags: needinfo?(ettseng)

|  | [Ethan Tseng [:ethan]](/user_profile?user_id=473897) |  |
| --- | --- | --- |
| [Comment 13](/show_bug.cgi?id=1313711#c13)• 8 years ago |
|  | |

Henry, please look into this bug to see if we can do anything on it, thanks.Assignee: nobody → hchang

|  | [Henry Chang [:hchang]](/user_profile?user_id=475800)  Assignee |  |
| --- | --- | --- |
| [Comment 14](/show_bug.cgi?id=1313711#c14)• 8 years ago |
|  | |

Attached patch

[Bug1313711.patch](attachment.cgi?id=8829356&action=diff) (obsolete)
— [Details](attachment.cgi?id=8829356&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1313711&attachment=8829356)

|  | [Henry Chang [:hchang]](/user_profile?user_id=475800)  Assignee |  |
| --- | --- | --- |
| [Comment 15](/show_bug.cgi?id=1313711#c15)• 8 years ago |
|  | |

:bechen has explained very well in [comment 6](/show_bug.cgi?id=1313711#c6 "VERIFIED FIXED - Same-Origin-Policy violation via Text Track"), the solution is so straightforward:
- if the track has no parent element, use "No CORS"
- if the parent element is a media element, use its CORS mode
Unlike <img>, the default cross origin behavior of <track> is "fail".
The patch is still required a test case but at least the attached link has been
verified to behaves as expected.

|  | [Henry Chang [:hchang]](/user_profile?user_id=475800)  Assignee |  |
| --- | --- | --- |
| [Comment 16](/show_bug.cgi?id=1313711#c16)• 8 years ago |
|  | |

Comment on [attachment 8829356](/attachment.cgi?id=8829356 "Bug1313711.patch") [[details]](/attachment.cgi?id=8829356&action=edit "Bug1313711.patch") [[diff]](/attachment.cgi?id=8829356&action=diff "Bug1313711.patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1313711&attachment=8829356)
[Bug1313711](/show_bug.cgi?id=1313711 "VERIFIED FIXED - Same-Origin-Policy violation via Text Track").patch
Hi :dveditz,
Could you please review my solution to this issue?
I still have no idea how to write a test case from scratch
but I believe there have been bunch of CORS test case
templates I can learn from so it shouldn't be a big deal.
Thanks!Flags: needinfo?(dveditz)
[Attachment #8829356](/attachment.cgi?id=8829356&action=edit "Bug1313711.patch") -
Flags: review?(dveditz)

|  | [Henry Chang [:hchang]](/user_profile?user_id=475800)  Assignee |  |
| --- | --- | --- |
| [Comment 17](/show_bug.cgi?id=1313711#c17)• 8 years ago |
|  | |

<https://dxr.mozilla.org/mozilla-central/source/dom/canvas/test/crossorigin/test_canvas2d_crossorigin.html>
may be a perfect template which I can use to test all CORS mode behaviors.

|  | [Henry Chang [:hchang]](/user_profile?user_id=475800)  Assignee |  |
| --- | --- | --- |
| [Comment 18](/show_bug.cgi?id=1313711#c18)• 8 years ago |
|  | |

Attached patch

[Bug1313711\_v2.patch](attachment.cgi?id=8829430&action=diff) (obsolete)
— [Details](attachment.cgi?id=8829430&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1313711&attachment=8829430)

Updated the patch:
1) Test case added.
2) If AnsyncOpen2 failed, call "SetReadyState" to obtain an onerror event.
3) Fixed security flag determination issue in the previous patch.
[Attachment #8829356](/attachment.cgi?id=8829356&action=edit "Bug1313711.patch") -
Attachment is obsolete: true
[Attachment #8829356](/attachment.cgi?id=8829356&action=edit "Bug1313711.patch") -
Flags: review?(dveditz)

|  | [Henry Chang [:hchang]](/user_profile?user_id=475800)  Assignee |  |
| --- | --- | --- |
| [Comment 19](/show_bug.cgi?id=1313711#c19)• 8 years ago |
|  | |

Comment on [attachment 8829430](/attachment.cgi?id=8829430 "Bug1313711_v2.patch") [[details]](/attachment.cgi?id=8829430&action=edit "Bug1313711_v2.patch") [[diff]](/attachment.cgi?id=8829430&action=diff "Bug1313711_v2.patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1313711&attachment=8829430)
[Bug1313711](/show_bug.cgi?id=1313711 "VERIFIED FIXED - Same-Origin-Policy violation via Text Track")\_v2.patch
Hi :dveditz,
Could you please review the entire patch including the test case?
The main purpose of the test case is not to re-test our CORS implementation
but to verify if the security flag is properly set in different CORS mode.
Hi :bechen,
Could you review or feedback the part where we call SetReadyState
after AsyncOpen2 failed? I don't know what's the possible downside
if not putting the element into a ready state but I or the web developer
should need "onerror" event (triggered in SetReadyState) for
error handling.
Thanks you two :)
[Attachment #8829430](/attachment.cgi?id=8829430&action=edit "Bug1313711_v2.patch") -
Flags: review?(dveditz)
[Attachment #8829430](/attachment.cgi?id=8829430&action=edit "Bug1313711_v2.patch") -
Flags: review?(bechen)

|  | [Henry Chang [:hchang]](/user_profile?user_id=475800)  Assignee |  |
| --- | --- | --- |
| [Comment 20](/show_bug.cgi?id=1313711#c20)• 8 years ago |
|  | |

<https://treeherder.mozilla.org/#/jobs?repo=try&revision=1025b55d0249>

|  | [Benjamin Chen [:bechen]](/user_profile?user_id=453463) |  |
| --- | --- | --- |
| [Comment 21](/show_bug.cgi?id=1313711#c21)• 8 years ago |
|  | |

Comment on [attachment 8829430](/attachment.cgi?id=8829430 "Bug1313711_v2.patch") [[details]](/attachment.cgi?id=8829430&action=edit "Bug1313711_v2.patch") [[diff]](/attachment.cgi?id=8829430&action=diff "Bug1313711_v2.patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1313711&attachment=8829430)
[Bug1313711](/show_bug.cgi?id=1313711 "VERIFIED FIXED - Same-Origin-Policy violation via Text Track")\_v2.patch
r+, please fix/figure out the mochitest fail and run the web-platform-tests at tryserver.
[Attachment #8829430](/attachment.cgi?id=8829430&action=edit "Bug1313711_v2.patch") -
Flags: review?(bechen) → review+

|  | [Henry Chang [:hchang]](/user_profile?user_id=475800)  Assignee |  |
| --- | --- | --- |
| [Comment 22](/show_bug.cgi?id=1313711#c22)• 8 years ago |
|  | |

Attached patch

[Bug1313711\_Part1.patch](attachment.cgi?id=8829804&action=diff) (obsolete)
— [Details](attachment.cgi?id=8829804&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1313711&attachment=8829804)

[Attachment #8829430](/attachment.cgi?id=8829430&action=edit "Bug1313711_v2.patch") -
Attachment is obsolete: true
[Attachment #8829430](/attachment.cgi?id=8829430&action=edit "Bug1313711_v2.patch") -
Flags: review?(dveditz)

|  | [Henry Chang [:hchang]](/user_profile?user_id=475800)  Assignee |  |
| --- | --- | --- |
| [Comment 23](/show_bug.cgi?id=1313711#c23)• 8 years ago |
|  | |

Attached patch

[Bug1313711\_Part2.patch](attachment.cgi?id=8829805&action=diff) (obsolete)
— [Details](attachment.cgi?id=8829805&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1313711&attachment=8829805)

|  | [Henry Chang [:hchang]](/user_profile?user_id=475800)  Assignee |  |
| --- | --- | --- |
| [Comment 24](/show_bug.cgi?id=1313711#c24)• 8 years ago |
|  | |

Attached patch

[Bug1313711\_Part3.patch](attachment.cgi?id=8829806&action=diff) (obsolete)
— [Details](attachment.cgi?id=8829806&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1313711&attachment=8829806)

|  | [Henry Chang [:hchang]](/user_profile?user_id=475800)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1313711#a7581473_475800)• 8 years ago |

[Attachment #8829804](/attachment.cgi?id=8829804&action=edit "Bug1313711_Part1.patch") -
Flags: review?(dveditz)

|  | [Henry Chang [:hchang]](/user_profile?user_id=475800)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1313711#a7582136_475800)• 8 years ago |

[Attachment #8829806](/attachment.cgi?id=8829806&action=edit "Bug1313711_Part3.patch") -
Flags: review?(francois)

|  | [Henry Chang [:hchang]](/user_profile?user_id=475800)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1313711#a7582306_475800)• 8 years ago |

[Attachment #8829805](/attachment.cgi?id=8829805&action=edit "Bug1313711_Part2.patch") -
Flags: review?(dveditz)

|  | [Henry Chang [:hchang]](/user_profile?user_id=475800)  Assignee |  |
| --- | --- | --- |
| [Comment 25](/show_bug.cgi?id=1313711#c25)• 8 years ago |
|  | |

<https://treeherder.mozilla.org/#/jobs?repo=try&revision=f767f69fd7792127a677adb1b8341c7088eb2d98>
All the failed test cases in the previous push should have been fixed. Let's wait and see.

|  | [:Gijs (he/him)](/user_profile?user_id=159069) |  |
| --- | --- | --- |
| [Comment 26](/show_bug.cgi?id=1313711#c26)• 8 years ago |
|  | |

Henry, his is rated sec-high and you pushed to try (which is public) with bug number, commit messages, and additional tests, all describing exactly what the problem is. Please don't do that. :-(
Do we need to hold 51 over this given that this has happened? (I don't know how strict our VTT parsing is, if we are strict about the mimetype, and if you could abuse this to steal arbitrary data, or not.)Flags: needinfo?(dveditz)Flags: needinfo?(abillings)

|  | [François Marier [:francois]](/user_profile?user_id=303427) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1313711#a7609948_303427)• 8 years ago |

[Attachment #8829806](/attachment.cgi?id=8829806&action=edit "Bug1313711_Part3.patch") -
Flags: review?(francois) → review+

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Comment 27](/show_bug.cgi?id=1313711#c27)• 8 years ago |
|  | |

We can't hold 51. It is already built and out the door. It shipped this morning and was in process yesterday. I'll defer to Dan if we need to do anything here but I suspect that if we do a point release, we should try to get this in.Flags: needinfo?(abillings)

|  | [:Gijs (he/him)](/user_profile?user_id=159069) |  |
| --- | --- | --- |
| [Comment 28](/show_bug.cgi?id=1313711#c28)• 8 years ago |
|  | |

(In reply to Al Billings [:abillings] from [comment #27](/show_bug.cgi?id=1313711#c27 "VERIFIED FIXED - Same-Origin-Policy violation via Text Track"))
> We can't hold 51. It is already built and out the door. It shipped this
> morning and was in process yesterday. I'll defer to Dan if we need to do
> anything here but I suspect that if we do a point release, we should try to
> get this in.
We're currently doing a point release for the geolocation/safebrowsing bustage in [bug 1333516](/show_bug.cgi?id=1333516 "VERIFIED FIXED - geolocation not working in Firefox 51 release"), but I don't think this is ready to make release. :-\

|  | [Henry Chang [:hchang]](/user_profile?user_id=475800)  Assignee |  |
| --- | --- | --- |
| [Comment 29](/show_bug.cgi?id=1313711#c29)• 8 years ago |
|  | |

(In reply to :Gijs from [comment #26](/show_bug.cgi?id=1313711#c26 "VERIFIED FIXED - Same-Origin-Policy violation via Text Track"))
> Henry, his is rated sec-high and you pushed to try (which is public) with
> bug number, commit messages, and additional tests, all describing exactly
> what the problem is. Please don't do that. :-(
>
Sorry about that :( Is there any other guideline that I can find while fixing
sec-high bugs?

|  | [Henry Chang [:hchang]](/user_profile?user_id=475800)  Assignee |  |
| --- | --- | --- |
| [Comment 30](/show_bug.cgi?id=1313711#c30)• 8 years ago |
|  | |

(In reply to Henry Chang [:henry][:hchang] from [comment #29](/show_bug.cgi?id=1313711#c29 "VERIFIED FIXED - Same-Origin-Policy violation via Text Track"))
> (In reply to :Gijs from [comment #26](/show_bug.cgi?id=1313711#c26 "VERIFIED FIXED - Same-Origin-Policy violation via Text Track"))
> > Henry, his is rated sec-high and you pushed to try (which is public) with
> > bug number, commit messages, and additional tests, all describing exactly
> > what the problem is. Please don't do that. :-(
> >
>
> Sorry about that :( Is there any other guideline that I can find while fixing
> sec-high bugs?
For example, do I also have to leave no bug number and any message when I
actually land the patch? People can learn something by reading the
commit message in mozilla-central and get to know the vulnerability
of the current release.

|  | [Henry Chang [:hchang]](/user_profile?user_id=475800)  Assignee |  |
| --- | --- | --- |
| [Comment 31](/show_bug.cgi?id=1313711#c31)• 8 years ago |
|  | |

Hi Jon,
Since you are the one who implemented HTMLMediaElement's CORS mode,
do you know if there is any reason that we initialize mCORSMode
only when loading a resource? When trying to re-enable track element's
CORS web-platform test cases, I found we have to either
1) Initialize |mCORSMode| without having to load a resource or
2) Modify the test case [2] to set a dummy "video.src" to
force HTMLMediaElement::LoadResource() to be called
to get a correct track element's CORS behavior.
For your information, track element's CORS mode is decided by
its parent's CORS mode (what specification says). Given that
loading a track resource is independent of its parent media element [3],
(i.e. tracks can be loaded even if their parent media element
has nothing to load.), we have to know a track element's
parent element's CORS mode no matter if its parent has
loaded any resource.
[1] <https://hg.mozilla.org/mozilla-central/diff/05316b7ecf15/content/html/content/src/nsHTMLMediaElement.cpp#l1.12>
[2] <https://dxr.mozilla.org/mozilla-central/source/testing/web-platform/tests/html/semantics/embedded-content/media-elements/track/track-element/cors/support/common.js#44>
[3] It's how we implemented it. Not sure if it's in the spec.Flags: needinfo?(jon)

|  | [:Gijs (he/him)](/user_profile?user_id=159069) |  |
| --- | --- | --- |
| [Comment 32](/show_bug.cgi?id=1313711#c32)• 8 years ago |
|  | |

(In reply to Henry Chang [:henry][:hchang] from [comment #29](/show_bug.cgi?id=1313711#c29 "VERIFIED FIXED - Same-Origin-Policy violation via Text Track"))
> (In reply to :Gijs from [comment #26](/show_bug.cgi?id=1313711#c26 "VERIFIED FIXED - Same-Origin-Policy violation via Text Track"))
> > Henry, his is rated sec-high and you pushed to try (which is public) with
> > bug number, commit messages, and additional tests, all describing exactly
> > what the problem is. Please don't do that. :-(
> >
>
> Sorry about that :( Is there any other guideline that I can find while fixing
> sec-high bugs?
<https://wiki.mozilla.org/Security/Bug_Approval_Process>
(In reply to Henry Chang [:henry][:hchang] from [comment #30](/show_bug.cgi?id=1313711#c30 "VERIFIED FIXED - Same-Origin-Policy violation via Text Track"))
> (In reply to Henry Chang [:henry][:hchang] from [comment #29](/show_bug.cgi?id=1313711#c29 "VERIFIED FIXED - Same-Origin-Policy violation via Text Track"))
> > (In reply to :Gijs from [comment #26](/show_bug.cgi?id=1313711#c26 "VERIFIED FIXED - Same-Origin-Policy violation via Text Track"))
> > > Henry, his is rated sec-high and you pushed to try (which is public) with
> > > bug number, commit messages, and additional tests, all describing exactly
> > > what the problem is. Please don't do that. :-(
> > >
> >
> > Sorry about that :( Is there any other guideline that I can find while fixing
> > sec-high bugs?
>
> For example, do I also have to leave no bug number and any message when I
> actually land the patch? People can learn something by reading the
> commit message in mozilla-central and get to know the vulnerability
> of the current release.
As noted in the wiki (and in a note underneath the attachments on bugzilla!), you would need to ask for sec-approval before landing on mozilla-central, and then the security team will coordinate with you when patches land where (e.g. they might suggest landing only 2 weeks before release, to reduce the time period between when we 'reveal' the bug via checkins and when we ship a fix on all affected branches). Security patches often land with only a bug number and reviewers, but no description in the commit message, and we sometimes delay landing relevant automated tests (until after the fix has shipped everywhere) if they give a clear indication of what the problem is.

|  | [Anne (:annevk)](/user_profile?user_id=102998) |  |
| --- | --- | --- |
| [Comment 33](/show_bug.cgi?id=1313711#c33)• 8 years ago |
|  | |

Going forward, please use the WHATWG HTML Standard as reference: <https://html.spec.whatwg.org/multipage/embedded-content.html#start-the-track-processing-model>. That's what we're attempting to follow and implement.

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Comment 34](/show_bug.cgi?id=1313711#c34)• 8 years ago |
|  | |

Comment on [attachment 8829804](/attachment.cgi?id=8829804 "Bug1313711_Part1.patch") [[details]](/attachment.cgi?id=8829804&action=edit "Bug1313711_Part1.patch") [[diff]](/attachment.cgi?id=8829804&action=diff "Bug1313711_Part1.patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1313711&attachment=8829804)
[Bug1313711](/show_bug.cgi?id=1313711 "VERIFIED FIXED - Same-Origin-Policy violation via Text Track")\_Part1.patch
Review of [attachment 8829804](/attachment.cgi?id=8829804 "Bug1313711_Part1.patch") [[details]](/attachment.cgi?id=8829804&action=edit "Bug1313711_Part1.patch") [[diff]](/attachment.cgi?id=8829804&action=diff "Bug1313711_Part1.patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1313711&attachment=8829804):
-----------------------------------------------------------------
r=dveditz
[Attachment #8829804](/attachment.cgi?id=8829804&action=edit "Bug1313711_Part1.patch") -
Flags: review?(dveditz) → review+

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Comment 35](/show_bug.cgi?id=1313711#c35)• 8 years ago |
|  | |

Comment on [attachment 8829805](/attachment.cgi?id=8829805 "Bug1313711_Part2.patch") [[details]](/attachment.cgi?id=8829805&action=edit "Bug1313711_Part2.patch") [[diff]](/attachment.cgi?id=8829805&action=diff "Bug1313711_Part2.patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1313711&attachment=8829805)
[Bug1313711](/show_bug.cgi?id=1313711 "VERIFIED FIXED - Same-Origin-Policy violation via Text Track")\_Part2.patch
Review of [attachment 8829805](/attachment.cgi?id=8829805 "Bug1313711_Part2.patch") [[details]](/attachment.cgi?id=8829805&action=edit "Bug1313711_Part2.patch") [[diff]](/attachment.cgi?id=8829805&action=diff "Bug1313711_Part2.patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1313711&attachment=8829805):
-----------------------------------------------------------------
r=dveditz
::: dom/media/test/test\_trackelement\_cors.html
@@ +13,5 @@
> +<pre id="test">
> +<script class="testbody" type="text/javascript">
> +SimpleTest.waitForExplicitFinish();
> +
> +const TRACK\_CORSS\_ORIGIN\_PATH\_PREFIX = "<http://example.org/tests/dom/media/test/>";
CROSS\_ORIGIN typo? or a pun? Same here and elsewhere so it'll work; if it's intentional I'm fine with it.
[Attachment #8829805](/attachment.cgi?id=8829805&action=edit "Bug1313711_Part2.patch") -
Flags: review?(dveditz) → review+

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Comment 36](/show_bug.cgi?id=1313711#c36)• 8 years ago |
|  | |

(In reply to :Gijs from [comment #26](/show_bug.cgi?id=1313711#c26 "VERIFIED FIXED - Same-Origin-Policy violation via Text Track"))
> this is rated sec-high
I didn't find enforcement that the Content-Type must be text/vtt (required by the version of the spec I found), but the parser does enforce that the file must start with the WEBVTT line. That limits this SOP violation to things intended to be text tracks, and while those might be private I don't think there's enough of it deployed for this to be respin-worthy. We can catch it in 52. Please request sec-approval before landing, and we're going to want to uplift to aurora and beta.
When did we start supporting WebVTT? do we need to patch ESR-45 as well?
[status-firefox51](/buglist.cgi?f1=cf_status_firefox51&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox51&o1=equals&v1=affected)
[status-firefox52](/buglist.cgi?f1=cf_status_firefox52&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox52&o1=equals&v1=affected)
[status-firefox53](/buglist.cgi?f1=cf_status_firefox53&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox53&o1=equals&v1=affected)
[status-firefox54](/buglist.cgi?f1=cf_status_firefox54&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox54&o1=equals&v1=affected)
[status-firefox-esr45](/buglist.cgi?f1=cf_status_firefox_esr45&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_status_firefox_esr45&o1=equals&v1=%3F)Flags: needinfo?(dveditz)

|  | [Randell Jesup [:jesup] (needinfo me)](/user_profile?user_id=11539) |  |
| --- | --- | --- |
| [Comment 37](/show_bug.cgi?id=1313711#c37)• 8 years ago |
|  | |

cc Ralph who worked on WebVTT; he can probably answer [comment 36](/show_bug.cgi?id=1313711#c36 "VERIFIED FIXED - Same-Origin-Policy violation via Text Track")'s questionFlags: needinfo?(giles)

|  | [Ralph Giles (:rillian)](/user_profile?user_id=170965) |  |
| --- | --- | --- |
| [Comment 38](/show_bug.cgi?id=1313711#c38)• 8 years ago |
|  | |

Basic WebVTT/HTMLTrackElement support landed in Firefox 24, according to mdn and [bug 833382](/show_bug.cgi?id=833382 "RESOLVED FIXED - [webvtt] Implement WebVTTParser to manage the libwebvtt parser"). It looks like the last major change to the policy (possibly a no-op, I'm unclear) was [bug 1182540](/show_bug.cgi?id=1182540 "RESOLVED FIXED - Use channel->ascynOpen2 in dom/html/HTMLTrackElement.cpp") landing in Firefox 42 so I expect esr releases to behave the same. May need rebasing past [bug 1262406](/show_bug.cgi?id=1262406 "RESOLVED FIXED - Track element doesn't use the URL classifier") which added the url classifier.
IIRC text tracks were one of the last things which slipped in before we started enforcing CORS on new features.
[status-firefox-esr45](/buglist.cgi?f1=cf_status_firefox_esr45&o1=isnotempty):
[?](/buglist.cgi?f1=cf_status_firefox_esr45&o1=equals&v1=%3F) → [affected](/buglist.cgi?f1=cf_status_firefox_esr45&o1=equals&v1=affected)Flags: needinfo?(giles)

|  | [Henry Chang [:hchang]](/user_profile?user_id=475800)  Assignee |  |
| --- | --- | --- |
| [Comment 39](/show_bug.cgi?id=1313711#c39)• 8 years ago |
|  | |

(In reply to Daniel Veditz [:dveditz] from [comment #35](/show_bug.cgi?id=1313711#c35 "VERIFIED FIXED - Same-Origin-Policy violation via Text Track"))
> Comment on [attachment 8829805](/attachment.cgi?id=8829805 "Bug1313711_Part2.patch") [[details]](/attachment.cgi?id=8829805&action=edit "Bug1313711_Part2.patch") [[diff]](/attachment.cgi?id=8829805&action=diff "Bug1313711_Part2.patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1313711&attachment=8829805)
> [Bug1313711](/show_bug.cgi?id=1313711 "VERIFIED FIXED - Same-Origin-Policy violation via Text Track")\_Part2.patch
>
> Review of [attachment 8829805](/attachment.cgi?id=8829805 "Bug1313711_Part2.patch") [[details]](/attachment.cgi?id=8829805&action=edit "Bug1313711_Part2.patch") [[diff]](/attachment.cgi?id=8829805&action=diff "Bug1313711_Part2.patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1313711&attachment=8829805):
> -----------------------------------------------------------------
>
> r=dveditz
>
> ::: dom/media/test/test\_trackelement\_cors.html
> @@ +13,5 @@
> > +<pre id="test">
> > +<script class="testbody" type="text/javascript">
> > +SimpleTest.waitForExplicitFinish();
> > +
> > +const TRACK\_CORSS\_ORIGIN\_PATH\_PREFIX = "<http://example.org/tests/dom/media/test/>";
>
> CROSS\_ORIGIN typo? or a pun? Same here and elsewhere so it'll work; if it's
> intentional I'm fine with it.
It's typo. Sorry for that :(
BTW, I have fixed all the web-platform-test, which requires 3 more patches
1) is a fix for WebVTT redirection [1]. It has nothing to do with this bug but
leads some web-platform tests to fail. |cb| has to be called before return
according to [2].
2) is to initialize HTMLMediaElement::mCORSMode in a different way
as I mentioned in [comment 31](/show_bug.cgi?id=1313711#c31 "VERIFIED FIXED - Same-Origin-Policy violation via Text Track").
3) is to fix all "expected PASS" for most of the web-platform-tests. Some tests
still got FAIL because deciding whether "Same origin" or not on redirection
seems to behave different from what web-platform-test expects [3].
However, given that we might need to uplift the patches all the way to 51 (as well as esr 45),
I wonder what's the best way to deal with this bug:
1) Fix everything including the web-platform-test
2) Only fix the change where we use proper security flag ([attachment 8829804](/attachment.cgi?id=8829804 "Bug1313711_Part1.patch") [[details]](/attachment.cgi?id=8829804&action=edit "Bug1313711_Part1.patch") [[diff]](/attachment.cgi?id=8829804&action=diff "Bug1313711_Part1.patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1313711&attachment=8829804))
plus the test case I added.
3) Only fix the change where we use proper security flag ([attachment 8829804](/attachment.cgi?id=8829804 "Bug1313711_Part1.patch") [[details]](/attachment.cgi?id=8829804&action=edit "Bug1313711_Part1.patch") [[diff]](/attachment.cgi?id=8829804&action=diff "Bug1313711_Part1.patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1313711&attachment=8829804)) w/o the test case.
If we take (2) and (3), I'll create separate bugs for what's unresolved in this bug.
p.s. I'd like to have a try push with all web-platform-test fixes. Is it okay or
I'd better do that later? Thanks!
[1] <https://dxr.mozilla.org/mozilla-central/rev/1d025ac534a6333a8170a59a95a8a3673d4028ee/dom/media/WebVTTListener.cpp#72>
[2] <https://dxr.mozilla.org/mozilla-central/rev/1d025ac534a6333a8170a59a95a8a3673d4028ee/netwerk/base/nsIChannelEventSink.idl#73>
[3] [https://bugzilla.mozilla.org/show\_bug.cgi?id=814141](/show_bug.cgi?id=814141 "RESOLVED FIXED - Cross-site redirects of a CORS request should null out the source origin, per spec")Flags: needinfo?(dveditz)

|  | [Henry Chang [:hchang]](/user_profile?user_id=475800)  Assignee |  |
| --- | --- | --- |
| [Comment 40](/show_bug.cgi?id=1313711#c40)• 8 years ago |
|  | |

Attached patch

[WebVTT\_redirection\_fix.patch](attachment.cgi?id=8832728&action=diff) (obsolete)
— [Details](attachment.cgi?id=8832728&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1313711&attachment=8832728)

|  | [Henry Chang [:hchang]](/user_profile?user_id=475800)  Assignee |  |
| --- | --- | --- |
| [Comment 41](/show_bug.cgi?id=1313711#c41)• 8 years ago |
|  | |

Attached patch

[Init\_HTMLMediaElement\_mCORSMode\_early.patch](attachment.cgi?id=8832729&action=diff) (obsolete)
— [Details](attachment.cgi?id=8832729&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1313711&attachment=8832729)

|  | [Henry Chang [:hchang]](/user_profile?user_id=475800)  Assignee |  |
| --- | --- | --- |
| [Comment 42](/show_bug.cgi?id=1313711#c42)• 8 years ago |
|  | |

Attached patch

[All\_web-platform\_tests\_fix.patch](attachment.cgi?id=8832730&action=diff) (obsolete)
— [Details](attachment.cgi?id=8832730&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1313711&attachment=8832730)

|  | [Henry Chang [:hchang]](/user_profile?user_id=475800)  Assignee |  |
| --- | --- | --- |
| [Comment 43](/show_bug.cgi?id=1313711#c43)• 8 years ago |
|  | |

Comment on [attachment 8832728](/attachment.cgi?id=8832728 "WebVTT_redirection_fix.patch") [[details]](/attachment.cgi?id=8832728&action=edit "WebVTT_redirection_fix.patch") [[diff]](/attachment.cgi?id=8832728&action=diff "WebVTT_redirection_fix.patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1313711&attachment=8832728)
WebVTT\_redirection\_fix.patch
Hi Ralph,
Could you please review this fix for WebVTT redirection issue?
Without this patch, the vtt redirection will fail silently in release
build and crash (assertion) in debug build. I found this issue when
I was trying to fix web-platform tests.
I haven't had a idea whether I can land this patch for this bug yet
but I wonder if you can have it a review first. Thanks :)
[Attachment #8832728](/attachment.cgi?id=8832728&action=edit "WebVTT_redirection_fix.patch") -
Flags: review?(giles)

|  | [Henry Chang [:hchang]](/user_profile?user_id=475800)  Assignee |  |
| --- | --- | --- |
| [Comment 44](/show_bug.cgi?id=1313711#c44)• 8 years ago |
|  | |

Comment on [attachment 8832729](/attachment.cgi?id=8832729 "Init_HTMLMediaElement_mCORSMode_early.patch") [[details]](/attachment.cgi?id=8832729&action=edit "Init_HTMLMediaElement_mCORSMode_early.patch") [[diff]](/attachment.cgi?id=8832729&action=diff "Init_HTMLMediaElement_mCORSMode_early.patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1313711&attachment=8832729)
Init\_HTMLMediaElement\_mCORSMode\_early.patch
Hi JW,
Could you review this patch for initializing HTMLMediaElement::mCORSMode
before loading resource? It makes sense to initialize mCORSMode right before
loading resource without embedded track. However, since the embedded track
will use its parent media element's CORS mode, we should keep
HTMLMediaElement::mCORSMode update-to-date at all time. As other patch,
I don't know I am going to land this patch for this bug but do
you mind having it a review first for web-platform tests? Thanks!
[Attachment #8832729](/attachment.cgi?id=8832729&action=edit "Init_HTMLMediaElement_mCORSMode_early.patch") -
Flags: review?(jwwang)

|  | [Ralph Giles (:rillian)](/user_profile?user_id=170965) |  |
| --- | --- | --- |
| [Comment 45](/show_bug.cgi?id=1313711#c45)• 8 years ago |
|  | |

Comment on [attachment 8832728](/attachment.cgi?id=8832728 "WebVTT_redirection_fix.patch") [[details]](/attachment.cgi?id=8832728&action=edit "WebVTT_redirection_fix.patch") [[diff]](/attachment.cgi?id=8832728&action=diff "WebVTT_redirection_fix.patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1313711&attachment=8832728)
WebVTT\_redirection\_fix.patch
Review of [attachment 8832728](/attachment.cgi?id=8832728 "WebVTT_redirection_fix.patch") [[details]](/attachment.cgi?id=8832728&action=edit "WebVTT_redirection_fix.patch") [[diff]](/attachment.cgi?id=8832728&action=diff "WebVTT_redirection_fix.patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1313711&attachment=8832728):
-----------------------------------------------------------------
Thanks. If this fixes [bug 973384](/show_bug.cgi?id=973384 "RESOLVED FIXED - Assertion failure when <track src> is a URL that redirects"), you could land this change there without needing to wait for security review.
[Attachment #8832728](/attachment.cgi?id=8832728&action=edit "WebVTT_redirection_fix.patch") -
Flags: review?(giles) → review+

|  | [Henry Chang [:hchang]](/user_profile?user_id=475800)  Assignee |  |
| --- | --- | --- |
| [Comment 46](/show_bug.cgi?id=1313711#c46)• 8 years ago |
|  | |

(In reply to Ralph Giles (:rillian) | needinfo me from [comment #45](/show_bug.cgi?id=1313711#c45 "VERIFIED FIXED - Same-Origin-Policy violation via Text Track"))
> Comment on [attachment 8832728](/attachment.cgi?id=8832728 "WebVTT_redirection_fix.patch") [[details]](/attachment.cgi?id=8832728&action=edit "WebVTT_redirection_fix.patch") [[diff]](/attachment.cgi?id=8832728&action=diff "WebVTT_redirection_fix.patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1313711&attachment=8832728)
> WebVTT\_redirection\_fix.patch
>
> Review of [attachment 8832728](/attachment.cgi?id=8832728 "WebVTT_redirection_fix.patch") [[details]](/attachment.cgi?id=8832728&action=edit "WebVTT_redirection_fix.patch") [[diff]](/attachment.cgi?id=8832728&action=diff "WebVTT_redirection_fix.patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1313711&attachment=8832728):
> -----------------------------------------------------------------
>
> Thanks. If this fixes [bug 973384](/show_bug.cgi?id=973384 "RESOLVED FIXED - Assertion failure when <track src> is a URL that redirects"), you could land this change there without
> needing to wait for security review.
Awesome! I believe it will fix [Bug 973384](/show_bug.cgi?id=973384 "RESOLVED FIXED - Assertion failure when <track src> is a URL that redirects") since that assertion is
exactly what I hit, too. I'll directly work on that bug.
Thanks!

|  | [JW Wang [:jwwang] [:jw\_wang]](/user_profile?user_id=469171) |  |
| --- | --- | --- |
| [Comment 47](/show_bug.cgi?id=1313711#c47)• 8 years ago |
|  | |

Comment on [attachment 8832729](/attachment.cgi?id=8832729 "Init_HTMLMediaElement_mCORSMode_early.patch") [[details]](/attachment.cgi?id=8832729&action=edit "Init_HTMLMediaElement_mCORSMode_early.patch") [[diff]](/attachment.cgi?id=8832729&action=diff "Init_HTMLMediaElement_mCORSMode_early.patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1313711&attachment=8832729)
Init\_HTMLMediaElement\_mCORSMode\_early.patch
Review of [attachment 8832729](/attachment.cgi?id=8832729 "Init_HTMLMediaElement_mCORSMode_early.patch") [[details]](/attachment.cgi?id=8832729&action=edit "Init_HTMLMediaElement_mCORSMode_early.patch") [[diff]](/attachment.cgi?id=8832729&action=diff "Init_HTMLMediaElement_mCORSMode_early.patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1313711&attachment=8832729):
-----------------------------------------------------------------
::: dom/html/HTMLMediaElement.cpp
@@ +4217,5 @@
> }
> }
>
> + if (aNameSpaceID == kNameSpaceID\_None && aName == nsGkAtoms::crossorigin) {
> + mCORSMode = AttrValueToCORSMode(aValue);
2-space indent.
[Attachment #8832729](/attachment.cgi?id=8832729&action=edit "Init_HTMLMediaElement_mCORSMode_early.patch") -
Flags: review?(jwwang) → review+

|  | [Henry Chang [:hchang]](/user_profile?user_id=475800)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1313711#a8421792_475800)• 8 years ago |

[Attachment #8832730](/attachment.cgi?id=8832730&action=edit "All_web-platform_tests_fix.patch") -
Flags: review?(dveditz)

|  | [Henry Chang [:hchang]](/user_profile?user_id=475800)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1313711#a8429109_475800)• 8 years ago |

Flags: needinfo?(jon)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1313711#a8700886_1689)• 8 years ago |

[Attachment #8832730](/attachment.cgi?id=8832730&action=edit "All_web-platform_tests_fix.patch") -
Flags: review?(dveditz) → review+

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Comment 48](/show_bug.cgi?id=1313711#c48)• 8 years ago |
|  | |

(In reply to Henry Chang [:henry][:hchang] from [comment #39](/show_bug.cgi?id=1313711#c39 "VERIFIED FIXED - Same-Origin-Policy violation via Text Track"))
> 1) Fix everything including the web-platform-test
> 2) Only fix the change where we use proper security flag ([attachment 8829804](/attachment.cgi?id=8829804 "Bug1313711_Part1.patch") [[details]](/attachment.cgi?id=8829804&action=edit "Bug1313711_Part1.patch") [[diff]](/attachment.cgi?id=8829804&action=diff "Bug1313711_Part1.patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1313711&attachment=8829804)
> [details] [diff] [review])
> plus the test case I added.
> 3) Only fix the change where we use proper security flag ([attachment 8829804](/attachment.cgi?id=8829804 "Bug1313711_Part1.patch") [[details]](/attachment.cgi?id=8829804&action=edit "Bug1313711_Part1.patch") [[diff]](/attachment.cgi?id=8829804&action=diff "Bug1313711_Part1.patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1313711&attachment=8829804)
> [details] [diff] [review]) w/o the test case.
When we land this fix on older branches we can't turn the trees red. We don't need to add the new testcase but we need to fix up everything that's going to be a new failure, and in that case we might as well add the new test.
> p.s. I'd like to have a try push with all web-platform-test fixes. Is it
> okay or
> I'd better do that later? Thanks!
That will be fine for this bug.Flags: needinfo?(dveditz)

|  | [Henry Chang [:hchang]](/user_profile?user_id=475800)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1313711#a8759696_475800)• 8 years ago |

Depends on: [973384](/show_bug.cgi?id=973384 "RESOLVED FIXED - Assertion failure when <track src> is a URL that redirects")

|  | [Henry Chang [:hchang]](/user_profile?user_id=475800)  Assignee |  |
| --- | --- | --- |
| [Comment 49](/show_bug.cgi?id=1313711#c49)• 8 years ago |
|  | |

Attached patch

[Bug1313711\_for\_sec-approval.patch](attachment.cgi?id=8836719&action=diff) (obsolete)
— [Details](attachment.cgi?id=8836719&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1313711&attachment=8836719)

Squash all patches to one. Some of the r+'ed patches are not picked since
we disable all track element CORS related wpt.
[Attachment #8829804](/attachment.cgi?id=8829804&action=edit "Bug1313711_Part1.patch") -
Attachment is obsolete: true
[Attachment #8829805](/attachment.cgi?id=8829805&action=edit "Bug1313711_Part2.patch") -
Attachment is obsolete: true
[Attachment #8829806](/attachment.cgi?id=8829806&action=edit "Bug1313711_Part3.patch") -
Attachment is obsolete: true
[Attachment #8832728](/attachment.cgi?id=8832728&action=edit "WebVTT_redirection_fix.patch") -
Attachment is obsolete: true
[Attachment #8832729](/attachment.cgi?id=8832729&action=edit "Init_HTMLMediaElement_mCORSMode_early.patch") -
Attachment is obsolete: true
[Attachment #8832730](/attachment.cgi?id=8832730&action=edit "All_web-platform_tests_fix.patch") -
Attachment is obsolete: true

|  | [Henry Chang [:hchang]](/user_profile?user_id=475800)  Assignee |  |
| --- | --- | --- |
| [Comment 50](/show_bug.cgi?id=1313711#c50)• 8 years ago |
|  | |

Try result for [Bug1313711](/show_bug.cgi?id=1313711 "VERIFIED FIXED - Same-Origin-Policy violation via Text Track")\_for\_sec-approval.patch
<https://treeherder.mozilla.org/#/jobs?repo=try&revision=4afbbcd190744dd2da7c754656f622c4d183c2bd&selectedJob=76757833>

|  | [Henry Chang [:hchang]](/user_profile?user_id=475800)  Assignee |  |
| --- | --- | --- |
| [Comment 51](/show_bug.cgi?id=1313711#c51)• 8 years ago |
|  | |

Comment on [attachment 8836719](/attachment.cgi?id=8836719 "Bug1313711_for_sec-approval.patch") [[details]](/attachment.cgi?id=8836719&action=edit "Bug1313711_for_sec-approval.patch") [[diff]](/attachment.cgi?id=8836719&action=diff "Bug1313711_for_sec-approval.patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1313711&attachment=8836719)
[Bug1313711](/show_bug.cgi?id=1313711 "VERIFIED FIXED - Same-Origin-Policy violation via Text Track")\_for\_sec-approval.patch
[Security approval request comment]
How easily could an exploit be constructed based on the patch?
A: The patch reveals we didn't implement track element's CORS behavior correctly
so it's easy to construct an exploit to load cross origin track.
Do comments in the patch, the check-in comment, or tests included in the patch paint a bulls-eye on the security problem?
A: Yes.
Which older supported branches are affected by this flaw?
A: All.
If not all supported branches, which bug introduced the flaw?
Do you have backports for the affected branches? If not, how different, hard to create, and risky will they be?
A: Yes. Just same as this patch.
How likely is this patch to cause regressions; how much testing does it need?
A: Very less likely since this is a simple fix. Try loading a track in a parent media element.
The track should follow the its parent media element's CORS behavior.
[Attachment #8836719](/attachment.cgi?id=8836719&action=edit "Bug1313711_for_sec-approval.patch") -
Flags: sec-approval?

|  | [Randell Jesup [:jesup] (needinfo me)](/user_profile?user_id=11539) |  |
| --- | --- | --- |
| [Comment 52](/show_bug.cgi?id=1313711#c52)• 8 years ago |
|  | |

(In reply to Henry Chang [:henry][:hchang] from [comment #50](/show_bug.cgi?id=1313711#c50 "VERIFIED FIXED - Same-Origin-Policy violation via Text Track"))
> Try result for [Bug1313711](/show_bug.cgi?id=1313711 "VERIFIED FIXED - Same-Origin-Policy violation via Text Track")\_for\_sec-approval.patch
>
> <https://treeherder.mozilla.org/#/>
> jobs?repo=try&revision=4afbbcd190744dd2da7c754656f622c4d183c2bd&selectedJob=7
> 6757833
and even worse:
> Do comments in the patch, the check-in comment, or tests included in the patch paint a bulls-eye on the security problem?
> A: Yes.
Sigh. Please be very careful about pushing sec-bug patches, especially with new tests, to Try. In general, don't push patches for sec-high or sec-critical to Try. On occasions where it must be done, and local tests don't suffice, obscuring the purpose of the Try and tests may be warranted, and checking with someone on sec-team before pushing is smart (or ask for approval first, and ask about running a Try).
NI to abillings/deveditz to deal with the fallout
We're still waiting to have a sec-bug Try/treeherder instance.... :-(Flags: needinfo?(dveditz)Flags: needinfo?(abillings)

|  | [Randell Jesup [:jesup] (needinfo me)](/user_profile?user_id=11539) |  |
| --- | --- | --- |
| [Comment 53](/show_bug.cgi?id=1313711#c53)• 8 years ago |
|  | |

Also note [comment 26](/show_bug.cgi?id=1313711#c26 "VERIFIED FIXED - Same-Origin-Policy violation via Text Track"), which pointed out the same mistake earlier

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Comment 54](/show_bug.cgi?id=1313711#c54)• 8 years ago |
|  | |

We shouldn't even be pushing tests anywhere (or checking them in) before a bug is fixed and that fix is released to the public unless we have no choice.
I'll give sec-approval+ for the patch WITHOUT any tests. Do not check in these tests, Henry.
We're going to need Aurora, Beta, and ESR45 patches made and nominated as well.
[status-firefox51](/buglist.cgi?f1=cf_status_firefox51&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox51&o1=equals&v1=affected) → [wontfix](/buglist.cgi?f1=cf_status_firefox51&o1=equals&v1=wontfix)
[status-firefox-esr52](/buglist.cgi?f1=cf_status_firefox_esr52&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox_esr52&o1=equals&v1=affected)
[tracking-firefox52](/buglist.cgi?f1=cf_tracking_firefox52&o1=isnotempty):
--- → [+](/buglist.cgi?f1=cf_tracking_firefox52&o1=equals&v1=%2B)
[tracking-firefox53](/buglist.cgi?f1=cf_tracking_firefox53&o1=isnotempty):
--- → [+](/buglist.cgi?f1=cf_tracking_firefox53&o1=equals&v1=%2B)
[tracking-firefox54](/buglist.cgi?f1=cf_tracking_firefox54&o1=isnotempty):
--- → [+](/buglist.cgi?f1=cf_tracking_firefox54&o1=equals&v1=%2B)
[tracking-firefox-esr45](/buglist.cgi?f1=cf_tracking_firefox_esr45&o1=isnotempty):
--- → [52+](/buglist.cgi?f1=cf_tracking_firefox_esr45&o1=equals&v1=52%2B)Flags: needinfo?(abillings)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1313711#a9358234_280903)• 8 years ago |

[Attachment #8836719](/attachment.cgi?id=8836719&action=edit "Bug1313711_for_sec-approval.patch") -
Flags: sec-approval? → sec-approval+

|  | [Henry Chang [:hchang]](/user_profile?user_id=475800)  Assignee |  |
| --- | --- | --- |
| [Comment 55](/show_bug.cgi?id=1313711#c55)• 8 years ago |
|  | |

(In reply to Randell Jesup [:jesup] from [comment #52](/show_bug.cgi?id=1313711#c52 "VERIFIED FIXED - Same-Origin-Policy violation via Text Track"))
> (In reply to Henry Chang [:henry][:hchang] from [comment #50](/show_bug.cgi?id=1313711#c50 "VERIFIED FIXED - Same-Origin-Policy violation via Text Track"))
> > Try result for [Bug1313711](/show_bug.cgi?id=1313711 "VERIFIED FIXED - Same-Origin-Policy violation via Text Track")\_for\_sec-approval.patch
> >
> > <https://treeherder.mozilla.org/#/>
> > jobs?repo=try&revision=4afbbcd190744dd2da7c754656f622c4d183c2bd&selectedJob=7
> > 6757833
>
> and even worse:
>
> > Do comments in the patch, the check-in comment, or tests included in the patch paint a bulls-eye on the security problem?
> > A: Yes.
>
>
> Sigh. Please be very careful about pushing sec-bug patches, especially with
> new tests, to Try. In general, don't push patches for sec-high or
> sec-critical to Try. On occasions where it must be done, and local tests
> don't suffice, obscuring the purpose of the Try and tests may be warranted,
> and checking with someone on sec-team before pushing is smart (or ask for
> approval first, and ask about running a Try).
>
I thought I was granted to push try with test cases in [comment 48](/show_bug.cgi?id=1313711#c48 "VERIFIED FIXED - Same-Origin-Policy violation via Text Track").
Maybe the grant was for "web-platform-test" but not all tests.
(At that time we already have a bunch of web-platform test cases specifically
for this bug and this bug will change some expected value of those tests
if [Bug 973384](/show_bug.cgi?id=973384 "RESOLVED FIXED - Assertion failure when <track src> is a URL that redirects") didn't disable all those tests first)
Anyways, sorry about that :(
> NI to abillings/deveditz to deal with the fallout
>
> We're still waiting to have a sec-bug Try/treeherder instance.... :-(

|  | [Henry Chang [:hchang]](/user_profile?user_id=475800)  Assignee |  |
| --- | --- | --- |
| [Comment 56](/show_bug.cgi?id=1313711#c56)• 8 years ago |
|  | |

Attached patch

[Bug1313711\_sec-approval.patch](attachment.cgi?id=8836981&action=diff)
— [Details](attachment.cgi?id=8836981&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1313711&attachment=8836981)

Asking for sec-approval again since I have no idea how to deal with
a required change in the existed test case. (test\_classify\_track.html)
[Attachment #8836719](/attachment.cgi?id=8836719&action=edit "Bug1313711_for_sec-approval.patch") -
Attachment is obsolete: true
[Attachment #8836981](/attachment.cgi?id=8836981&action=edit "Bug1313711_sec-approval.patch") -
Flags: sec-approval?

|  | [Henry Chang [:hchang]](/user_profile?user_id=475800)  Assignee |  |
| --- | --- | --- |
| [Comment 57](/show_bug.cgi?id=1313711#c57)• 8 years ago |
|  | |

(In reply to Henry Chang [:henry][:hchang] from [comment #56](/show_bug.cgi?id=1313711#c56 "VERIFIED FIXED - Same-Origin-Policy violation via Text Track"))
> Created [attachment 8836981](/attachment.cgi?id=8836981 "Bug1313711_sec-approval.patch") [[details]](/attachment.cgi?id=8836981&action=edit "Bug1313711_sec-approval.patch") [[diff]](/attachment.cgi?id=8836981&action=diff "Bug1313711_sec-approval.patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1313711&attachment=8836981)
> [Bug1313711](/show_bug.cgi?id=1313711 "VERIFIED FIXED - Same-Origin-Policy violation via Text Track")\_sec-approval.patch
>
> Asking for sec-approval again since I have no idea how to deal with
> a required change in the existed test case. (test\_classify\_track.html)
Also, not sure if the check-in comment is appropriate.

|  | [Randell Jesup [:jesup] (needinfo me)](/user_profile?user_id=11539) |  |
| --- | --- | --- |
| [Comment 58](/show_bug.cgi?id=1313711#c58)• 8 years ago |
|  | |

> I thought I was granted to push try with test cases in [comment 48](/show_bug.cgi?id=1313711#c48 "VERIFIED FIXED - Same-Origin-Policy violation via Text Track").
> Maybe the grant was for "web-platform-test" but not all tests.
It appears you were given the go-ahead to push tests to Try - I didn't go back and read the entire history of the bug -- it might not hurt when pushing a try to note in the bug that it was approved to do so. And I'm not clear if dveditz was approving just pushing some test fixes to Try, separately from the patch here, or both - you indicate in [comment 39](/show_bug.cgi?id=1313711#c39 "VERIFIED FIXED - Same-Origin-Policy violation via Text Track") that some of the tests are wrong regardless of this patch. He's right that if we're uplifting, and the uplift will break tests, we have to at least fix those, and in that case we may simply add tests if they don't expose anything beyond what may be obvious already, but this is a case-by-case thing.
We do want to avoid painting bullseyes on sec bugs in Try pushes (or inbound/etc pushes), which is why we often hold new tests from landing, and may avoid immediately adding comments pointing out the flaw. (We then would schedule landing tests and comments after the fix is in release for a reasonable period.)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Comment 59](/show_bug.cgi?id=1313711#c59)• 8 years ago |
|  | |

(In reply to Henry Chang [:henry][:hchang] from [comment #55](/show_bug.cgi?id=1313711#c55 "VERIFIED FIXED - Same-Origin-Policy violation via Text Track"))
> I thought I was granted to push try with test cases in [comment 48](/show_bug.cgi?id=1313711#c48 "VERIFIED FIXED - Same-Origin-Policy violation via Text Track").
> Maybe the grant was for "web-platform-test" but not all tests.
No, it was "for this bug" because we already blew it earlier ([comment 26](/show_bug.cgi?id=1313711#c26 "VERIFIED FIXED - Same-Origin-Policy violation via Text Track")).
In general we want to have a separate testcase patch for sec-high/sec-critical security bugs, and don't land that patch--or push to try!--until after the security bug is fixed. People have different strategies for remembering. I strongly urge filing a "Land testcase for bug XXXX after release YY" hidden bug assigned to yourself. Some people set the in-testsuite flag to "?" and then later set it to "in-testsuite+" when the tests are landed, but that's usually harder to remember unless you do this regularly and check often.Flags: needinfo?(dveditz)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Comment 60](/show_bug.cgi?id=1313711#c60)• 8 years ago |
|  | |

Comment on [attachment 8836981](/attachment.cgi?id=8836981 "Bug1313711_sec-approval.patch") [[details]](/attachment.cgi?id=8836981&action=edit "Bug1313711_sec-approval.patch") [[diff]](/attachment.cgi?id=8836981&action=diff "Bug1313711_sec-approval.patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1313711&attachment=8836981)
[Bug1313711](/show_bug.cgi?id=1313711 "VERIFIED FIXED - Same-Origin-Policy violation via Text Track")\_sec-approval.patch
sec-approval+ for the patch but \*not\* for tests. Do not check in tests.
[Attachment #8836981](/attachment.cgi?id=8836981&action=edit "Bug1313711_sec-approval.patch") -
Flags: sec-approval? → sec-approval+

|  | [Henry Chang [:hchang]](/user_profile?user_id=475800)  Assignee |  |
| --- | --- | --- |
| [Comment 61](/show_bug.cgi?id=1313711#c61)• 8 years ago |
|  | |

(In reply to Al Billings [:abillings] from [comment #60](/show_bug.cgi?id=1313711#c60 "VERIFIED FIXED - Same-Origin-Policy violation via Text Track"))
> Comment on [attachment 8836981](/attachment.cgi?id=8836981 "Bug1313711_sec-approval.patch") [[details]](/attachment.cgi?id=8836981&action=edit "Bug1313711_sec-approval.patch") [[diff]](/attachment.cgi?id=8836981&action=diff "Bug1313711_sec-approval.patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1313711&attachment=8836981)
> [Bug1313711](/show_bug.cgi?id=1313711 "VERIFIED FIXED - Same-Origin-Policy violation via Text Track")\_sec-approval.patch
>
> sec-approval+ for the patch but \*not\* for tests. Do not check in tests.
Thanks for the approval but I have to either modify the "existed" tests or
remove it. The reason is the existed test has to load a track from a
foreign origin to do safebrowsing test and we disallow loading track from
foreign site with no CORS mode inherited from its parent media element.Flags: needinfo?(abillings)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Comment 62](/show_bug.cgi?id=1313711#c62)• 8 years ago |
|  | |

Ok. Just modify the tests then.Flags: needinfo?(abillings)

|  | [Henry Chang [:hchang]](/user_profile?user_id=475800)  Assignee |  |
| --- | --- | --- |
| [Comment 63](/show_bug.cgi?id=1313711#c63)• 8 years ago |
|  | |

Thanks Al! I am flagging "checkin-needed" but not sure if the patch comment is proper.Keywords: [checkin-needed](/buglist.cgi?keywords=checkin-needed&resolution=---)

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 64](/show_bug.cgi?id=1313711#c64)• 8 years ago |
|  | |

<https://hg.mozilla.org/integration/mozilla-inbound/rev/0b21c30d0edcf2b8eb5a352acdc451d433316366>
[tracking-firefox-esr52](/buglist.cgi?f1=cf_tracking_firefox_esr52&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_tracking_firefox_esr52&o1=equals&v1=%3F)Keywords: [checkin-needed](/buglist.cgi?keywords=checkin-needed&resolution=---)

|  | [Carsten Book [:Tomcat]](/user_profile?user_id=277293) |  |
| --- | --- | --- |
| [Comment 65](/show_bug.cgi?id=1313711#c65)• 8 years ago |
|  | |

<https://hg.mozilla.org/mozilla-central/rev/0b21c30d0edc>Status: NEW → RESOLVEDClosed: 8 years ago
[status-firefox54](/buglist.cgi?f1=cf_status_firefox54&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox54&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox54&o1=equals&v1=fixed)Resolution: --- → FIXEDTarget Milestone: --- → mozilla54

|  | [Randell Jesup [:jesup] (needinfo me)](/user_profile?user_id=11539) |  |
| --- | --- | --- |
| [Comment 66](/show_bug.cgi?id=1313711#c66)• 8 years ago |
|  | |

We really need uplift requests on this bug ASAP (and variant patches if needed), since it's already landed on inbound/central.Flags: needinfo?(hchang)

|  | [Henry Chang [:hchang]](/user_profile?user_id=475800)  Assignee |  |
| --- | --- | --- |
| [Comment 67](/show_bug.cgi?id=1313711#c67)• 8 years ago |
|  | |

Comment on [attachment 8836981](/attachment.cgi?id=8836981 "Bug1313711_sec-approval.patch") [[details]](/attachment.cgi?id=8836981&action=edit "Bug1313711_sec-approval.patch") [[diff]](/attachment.cgi?id=8836981&action=diff "Bug1313711_sec-approval.patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1313711&attachment=8836981)
[Bug1313711](/show_bug.cgi?id=1313711 "VERIFIED FIXED - Same-Origin-Policy violation via Text Track")\_sec-approval.patch
Approval Request Comment
[Feature/Bug causing the regression]: WebVTT
[User impact if declined]: Cross origin track can be loaded even if its parent doesn't allow.
[Is this code covered by automated tests?]: No.
[Has the fix been verified in Nightly?]: Yes.
[Needs manual test from QE? If yes, steps to reproduce]: Yes. STR is in [comment 0](/show_bug.cgi?id=1313711#c0 "VERIFIED FIXED - Same-Origin-Policy violation via Text Track").
[List of other uplifts needed for the feature/fix]: no.
[Is the change risky?]: no.
[Why is the change risky/not risky?]: It's a simple fix.
[String changes made/needed]: No.
Should I request beta/release/esrs individually?
I am sure the patch cannot directly apply on esr45 so I have to make
a specific patch esr 45 at least.Flags: needinfo?(hchang)
[Attachment #8836981](/attachment.cgi?id=8836981&action=edit "Bug1313711_sec-approval.patch") -
Flags: approval-mozilla-aurora?

|  | [Ralph Giles (:rillian)](/user_profile?user_id=170965) |  |
| --- | --- | --- |
| [Comment 68](/show_bug.cgi?id=1313711#c68)• 8 years ago |
|  | |

(In reply to Henry Chang [:henry][:hchang] from [comment #67](/show_bug.cgi?id=1313711#c67 "VERIFIED FIXED - Same-Origin-Policy violation via Text Track"))
> Should I request beta/release/esrs individually?
You should request every branch the patch applies to, and can do so in a single step. Approvals will be granted (or not) individually based on the review schedule for each branch.
Please check if it applies to beta and esr45 and if not, prepare backports asap.

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 69](/show_bug.cgi?id=1313711#c69)• 8 years ago |
|  | |

Comment on [attachment 8836981](/attachment.cgi?id=8836981 "Bug1313711_sec-approval.patch") [[details]](/attachment.cgi?id=8836981&action=edit "Bug1313711_sec-approval.patch") [[diff]](/attachment.cgi?id=8836981&action=diff "Bug1313711_sec-approval.patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1313711&attachment=8836981)
[Bug1313711](/show_bug.cgi?id=1313711 "VERIFIED FIXED - Same-Origin-Policy violation via Text Track")\_sec-approval.patch
Other than a trivial mochitest manifest conflict, this grafts cleanly to Beta too.
[Attachment #8836981](/attachment.cgi?id=8836981&action=edit "Bug1313711_sec-approval.patch") -
Flags: approval-mozilla-beta?

|  | [Gerry Chang [:gchang]](/user_profile?user_id=506302) |  |
| --- | --- | --- |
| [Comment 70](/show_bug.cgi?id=1313711#c70)• 8 years ago |
|  | |

Comment on [attachment 8836981](/attachment.cgi?id=8836981 "Bug1313711_sec-approval.patch") [[details]](/attachment.cgi?id=8836981&action=edit "Bug1313711_sec-approval.patch") [[diff]](/attachment.cgi?id=8836981&action=diff "Bug1313711_sec-approval.patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1313711&attachment=8836981)
[Bug1313711](/show_bug.cgi?id=1313711 "VERIFIED FIXED - Same-Origin-Policy violation via Text Track")\_sec-approval.patch
Fix a sec-high. Aurora53+.
[Attachment #8836981](/attachment.cgi?id=8836981&action=edit "Bug1313711_sec-approval.patch") -
Flags: approval-mozilla-aurora? → approval-mozilla-aurora+

|  | [Julien Cristau [:jcristau]](/user_profile?user_id=580382) |  |
| --- | --- | --- |
| [Comment 71](/show_bug.cgi?id=1313711#c71)• 8 years ago |
|  | |

Comment on [attachment 8836981](/attachment.cgi?id=8836981 "Bug1313711_sec-approval.patch") [[details]](/attachment.cgi?id=8836981&action=edit "Bug1313711_sec-approval.patch") [[diff]](/attachment.cgi?id=8836981&action=diff "Bug1313711_sec-approval.patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1313711&attachment=8836981)
[Bug1313711](/show_bug.cgi?id=1313711 "VERIFIED FIXED - Same-Origin-Policy violation via Text Track")\_sec-approval.patch
fix cross-origin bug with subtitles in beta52
[Attachment #8836981](/attachment.cgi?id=8836981&action=edit "Bug1313711_sec-approval.patch") -
Flags: approval-mozilla-beta? → approval-mozilla-beta+

|  | [Carsten Book [:Tomcat]](/user_profile?user_id=277293) |  |
| --- | --- | --- |
| [Comment 72](/show_bug.cgi?id=1313711#c72)• 8 years ago |
| uplift | |

<https://hg.mozilla.org/releases/mozilla-aurora/rev/8adddacf6103>
[status-firefox53](/buglist.cgi?f1=cf_status_firefox53&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox53&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox53&o1=equals&v1=fixed)

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 73](/show_bug.cgi?id=1313711#c73)• 8 years ago |
| uplift | |

<https://hg.mozilla.org/releases/mozilla-beta/rev/37d108f28d69>
[status-firefox52](/buglist.cgi?f1=cf_status_firefox52&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox52&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox52&o1=equals&v1=fixed)Flags: in-testsuite+

|  | [Henry Chang [:hchang]](/user_profile?user_id=475800)  Assignee |  |
| --- | --- | --- |
| [Comment 74](/show_bug.cgi?id=1313711#c74)• 8 years ago |
|  | |

Attached patch

[Bug1313711\_backport\_for\_esr45.patch](attachment.cgi?id=8840285&action=diff)
— [Details](attachment.cgi?id=8840285&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1313711&attachment=8840285)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1313711#a10160536_1689)• 8 years ago |

Group: media-core-security → core-security-release

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 75](/show_bug.cgi?id=1313711#c75)• 8 years ago |
| uplift | |

<https://hg.mozilla.org/releases/mozilla-esr52/rev/37d108f28d69>
[status-firefox-esr52](/buglist.cgi?f1=cf_status_firefox_esr52&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox_esr52&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox_esr52&o1=equals&v1=fixed)

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 76](/show_bug.cgi?id=1313711#c76)• 8 years ago |
|  | |

Comment on [attachment 8840285](/attachment.cgi?id=8840285 "Bug1313711_backport_for_esr45.patch") [[details]](/attachment.cgi?id=8840285&action=edit "Bug1313711_backport_for_esr45.patch") [[diff]](/attachment.cgi?id=8840285&action=diff "Bug1313711_backport_for_esr45.patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1313711&attachment=8840285)
[Bug1313711](/show_bug.cgi?id=1313711 "VERIFIED FIXED - Same-Origin-Policy violation via Text Track")\_backport\_for\_esr45.patch
Looks like the same basic patch as what landed on the other branches minus the pile of test-only changes. See [comment 67](/show_bug.cgi?id=1313711#c67 "VERIFIED FIXED - Same-Origin-Policy violation via Text Track") for approval request comments.
[Attachment #8840285](/attachment.cgi?id=8840285&action=edit "Bug1313711_backport_for_esr45.patch") -
Flags: approval-mozilla-esr45?

|  | [Gerry Chang [:gchang]](/user_profile?user_id=506302) |  |
| --- | --- | --- |
| [Comment 77](/show_bug.cgi?id=1313711#c77)• 8 years ago |
|  | |

Comment on [attachment 8840285](/attachment.cgi?id=8840285 "Bug1313711_backport_for_esr45.patch") [[details]](/attachment.cgi?id=8840285&action=edit "Bug1313711_backport_for_esr45.patch") [[diff]](/attachment.cgi?id=8840285&action=diff "Bug1313711_backport_for_esr45.patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1313711&attachment=8840285)
[Bug1313711](/show_bug.cgi?id=1313711 "VERIFIED FIXED - Same-Origin-Policy violation via Text Track")\_backport\_for\_esr45.patch
Fix a sec-high. This patch matches the ESR criteria. ESR45+.
[Attachment #8840285](/attachment.cgi?id=8840285&action=edit "Bug1313711_backport_for_esr45.patch") -
Flags: approval-mozilla-esr45? → approval-mozilla-esr45+

|  | [Andrei Vaida [:avaida]](/user_profile?user_id=488993) |  |
| --- | --- | --- |
| [Comment 78](/show_bug.cgi?id=1313711#c78)• 8 years ago |
|  | |

Reproduced the issue with an affected build (50.1.0, 20161208153507) using the instructions from [Comment 0](/show_bug.cgi?id=1313711#c0 "VERIFIED FIXED - Same-Origin-Policy violation via Text Track") on Ubuntu 16.04 x64. WebVTT captions were being displayed.
This is verified fixed on Ubuntu 16.04 x64, Windows 10 x64 and macOS 10.12.3 using:
- 52.0b9-build2 (20170223185858)
- 53.0a2 (2017-02-24)
- 54.0a1 (2017-02-24)
The test page now no longer shows WebVTT captions.Status: RESOLVED → VERIFIED
[status-firefox52](/buglist.cgi?f1=cf_status_firefox52&o1=isnotempty):
[fixed](/buglist.cgi?f1=cf_status_firefox52&o1=equals&v1=fixed) → [verified](/buglist.cgi?f1=cf_status_firefox52&o1=equals&v1=verified)
[status-firefox53](/buglist.cgi?f1=cf_status_firefox53&o1=isnotempty):
[fixed](/buglist.cgi?f1=cf_status_firefox53&o1=equals&v1=fixed) → [verified](/buglist.cgi?f1=cf_status_firefox53&o1=equals&v1=verified)
[status-firefox54](/buglist.cgi?f1=cf_status_firefox54&o1=isnotempty):
[fixed](/buglist.cgi?f1=cf_status_firefox54&o1=equals&v1=fixed) → [verified](/buglist.cgi?f1=cf_status_firefox54&o1=equals&v1=verified)

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 79](/show_bug.cgi?id=1313711#c79)• 8 years ago |
| uplift | |

<https://hg.mozilla.org/releases/mozilla-esr45/rev/403d2300adc2>
[status-firefox-esr45](/buglist.cgi?f1=cf_status_firefox_esr45&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox_esr45&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox_esr45&o1=equals&v1=fixed)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1313711#a10570424_280903)• 8 years ago |

[tracking-firefox-esr52](/buglist.cgi?f1=cf_tracking_firefox_esr52&o1=isnotempty):
[?](/buglist.cgi?f1=cf_tracking_firefox_esr52&o1=equals&v1=%3F) → ---Whiteboard: [adv-main52+][adv-esr45.8+]

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1313711#a10727673_280903)• 8 years ago |

Alias: CVE-2017-5408

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Comment 80](/show_bug.cgi?id=1313711#c80)• 8 years ago |
|  | |

Although we reflexively rate SOP violations "sec-high", in this particular case that seems to overstate the risk (e.g. given the limitations mentioned in [comment 36](/show_bug.cgi?id=1313711#c36 "VERIFIED FIXED - Same-Origin-Policy violation via Text Track")).Keywords: [sec-high](/buglist.cgi?keywords=sec-high&resolution=---) → [sec-moderate](/buglist.cgi?keywords=sec-moderate&resolution=---)

|  | [Ethan Tseng [:ethan]](/user_profile?user_id=473897) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1313711#a24056346_473897)• 7 years ago |

See Also: → [1337242](/show_bug.cgi?id=1337242 "NEW - Fix web-platform tests for track element cors")

|  | [Benjamin Chen [:bechen]](/user_profile?user_id=453463) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1313711#a28804821_453463)• 7 years ago |

See Also: → [1396916](/show_bug.cgi?id=1396916 "NEW - [WebVTT] HTML5 VIDEO element - Child TRACK elements CORS validation")

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1313711#a31397769_1689)• 7 years ago |

Group: core-security-release

|  | [Alice0775 White](/user_profile?user_id=293623) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1313711#a49524192_293623)• 7 years ago |

Depends on: [1464012](/show_bug.cgi?id=1464012 "RESOLVED FIXED - [webvtt] Video element does not load subtitles track if initialized with preload attribute set to none")
You need to [log in](/show_bug.cgi?id=1313711&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top ↑

## Attachment

Hide Details

### General

Creator:  [Henry Chang [:hchang]](/user_profile?user_id=475800)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review



=== Content from www.mozilla.org_22c9f265_20250125_204453.html ===


## Help us improve your Mozilla experience

In addition to Cookies necessary for this site to function, we’d like your permission to set some additional Cookies to better understand your browsing needs and improve your experience. Rest assured — we value your privacy.

Accept All Additional Cookies

Reject All Additional Cookies

[Cookie settings](/en-US/privacy/websites/cookie-settings/)

Menu
[![Mozilla](https://www.mozilla.org/media/img/logos/m24/lockup-black.f2ddba3f0724.svg)](/en-US/)

* [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
  Firefox browsers](/en-US/firefox/)
  Close Firefox browsers menu
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
    ## Firefox for Desktop](/en-US/firefox/new/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
    ## Firefox for iOS](/en-US/firefox/browsers/mobile/ios/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
    ## Firefox for Android](/en-US/firefox/browsers/mobile/android/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/focus/logo.aac3e33175cb.svg)
    ## Firefox Focus](/en-US/firefox/browsers/mobile/focus/)
  + [## Firefox blog](https://blog.mozilla.org/firefox/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=firefox)
* [Products](/en-US/products/)
  Close Products menu
  + [![](https://www.mozilla.org/media/protocol/img/logos/mozilla/vpn/logo.c648f487bfb8.svg)
    ## Mozilla VPN](/en-US/products/vpn/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/monitor/logo.d97e5516f9e6.svg)
    ## Mozilla Monitor](https://monitor.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/relay/logo-white.d42a8b52e44c.svg)
    ## Firefox Relay](https://relay.firefox.com/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/protocol/img/logos/pocket/logo.17446bc33a5d.svg)
    ## Pocket](https://getpocket.com/firefox_learnmore/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/img/nav/icons/icon-mdn-plus.f54475f980ab.svg)
    ## MDN Plus](https://developer.mozilla.org/plus?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/img/logos/fakespot/logo-blue.3973b8fe9631.svg)
    ## Fakespot](https://fakespot.com/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/img/logos/thunderbird/logo-thunderbird.121e9c0fed45.svg)
    ## Thunderbird](https://www.thunderbird.net/)

  [All products](/en-US/products/)
* [About us](/en-US/about/)
  Close About us menu

  Our Mission

  + [## About Mozilla](/en-US/about/)
  + [## The Mozilla Manifesto](/en-US/about/manifesto/)
  + [## Get Involved](/en-US/contribute/)
  + [## Innovation Projects](https://future.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [## Blog](https://blog.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)

  Our Work

  + [## Mozilla Foundation](https://foundation.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [## Mozilla.ai](https://www.mozilla.ai/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [## Mozilla Ventures](https://mozilla.vc/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [## Mozilla Advertising](/en-US/advertising/)

## Menu

* Mozilla Security

## [Mozilla Security](/en-US/security/)

* [Advisories](/en-US/security/advisories/)
* [Known Vulnerabilities](/en-US/security/known-vulnerabilities/)
* [Mozilla Security Blog](https://blog.mozilla.com/security/)
* [Security Bug Bounty](/en-US/security/bug-bounty/)
* [Third-party Injection Policy](/en-US/security/third-party-software-injection/)

## [Client Bug Bounty](/en-US/security/client-bug-bounty/)

* [Frequently Asked Questions](/en-US/security/bug-bounty/faq/)
* [Hall of Fame](/en-US/security/bug-bounty/hall-of-fame/)

## [Web Bug Bounty](/en-US/security/web-bug-bounty/)

* [Eligible Websites](/en-US/security/bug-bounty/web-eligible-sites/)
* [Frequently Asked Questions](/en-US/security/bug-bounty/faq-webapp/)
* [Hall of Fame](/en-US/security/bug-bounty/web-hall-of-fame/)

# Mozilla Foundation Security Advisory 2017-09

## Security vulnerabilities fixed in - Thunderbird 52

Announced
April 5, 2017
Impact
critical
Products
Thunderbird
Fixed in

* Thunderbird 52

*In general, these flaws cannot be exploited through email in the Thunderbird product because scripting is disabled when reading mail, but are potentially risks in browser or browser-like contexts.*

#### [#CVE-2017-5400: asm.js JIT-spray bypass of ASLR and DEP](#CVE-2017-5400)

Reporter
Rh0
Impact
critical
##### Description

JIT-spray targeting asm.js combined with a heap spray allows for a bypass of ASLR and DEP protections leading to potential memory corruption attacks.

##### References

* [Bug 1334933](https://bugzilla.mozilla.org/show_bug.cgi?id=1334933)

#### [#CVE-2017-5401: Memory Corruption when handling ErrorResult](#CVE-2017-5401)

Reporter
Anton Eliasson
Impact
critical
##### Description

A crash triggerable by web content in which an `ErrorResult` references unassigned memory due to a logic error. The resulting crash may be exploitable.

##### References

* [Bug 1328861](https://bugzilla.mozilla.org/show_bug.cgi?id=1328861)

#### [#CVE-2017-5402: Use-after-free working with events in FontFace objects](#CVE-2017-5402)

Reporter
Nils
Impact
critical
##### Description

A use-after-free can occur when events are fired for a `FontFace` object after the object has been already been destroyed while working with fonts. This results in a potentially exploitable crash.

##### References

* [Bug 1334876](https://bugzilla.mozilla.org/show_bug.cgi?id=1334876)

#### [#CVE-2017-5403: Use-after-free using addRange to add range to an incorrect root object](#CVE-2017-5403)

Reporter
Nils
Impact
critical
##### Description

When adding a range to an object in the DOM, it is possible to use `addRange` to add the range to an incorrect root object. This triggers a use-after-free, resulting in a potentially exploitable crash.

##### References

* [Bug 1340186](https://bugzilla.mozilla.org/show_bug.cgi?id=1340186)

#### [#CVE-2017-5404: Use-after-free working with ranges in selections](#CVE-2017-5404)

Reporter
Ivan Fratric of Google Project Zero
Impact
critical
##### Description

A use-after-free error can occur when manipulating ranges in selections with one node inside a native anonymous tree and one node outside of it. This results in a potentially exploitable crash.

##### References

* [Bug 1340138](https://bugzilla.mozilla.org/show_bug.cgi?id=1340138)

#### [#CVE-2017-5406: Segmentation fault in Skia with canvas operations](#CVE-2017-5406)

Reporter
Atte Kettunen
Impact
high
##### Description

A segmentation fault can occur in the Skia graphics library during some canvas operations due to issues with mask/clip intersection and empty masks.

##### References

* [Bug 1306890](https://bugzilla.mozilla.org/show_bug.cgi?id=1306890)

#### [#CVE-2017-5407: Pixel and history stealing via floating-point timing side channel with SVG filters](#CVE-2017-5407)

Reporter
David Kohlbrenner
Impact
high
##### Description

Using SVG filters that don't use the fixed point math implementation on a target iframe, a malicious page can extract pixel values from a targeted user. This can be used to extract history information and read text values across domains. This violates same-origin policy and leads to information disclosure.

##### References

* [Bug 1336622](https://bugzilla.mozilla.org/show_bug.cgi?id=1336622)

#### [#CVE-2017-5410: Memory corruption during JavaScript garbage collection incremental sweeping](#CVE-2017-5410)

Reporter
Jerri Rice
Impact
high
##### Description

Memory corruption resulting in a potentially exploitable crash during garbage collection of JavaScript due errors in how incremental sweeping is managed for memory cleanup.

##### References

* [Bug 1330687](https://bugzilla.mozilla.org/show_bug.cgi?id=1330687)

#### [#CVE-2017-5411: Use-after-free in Buffer Storage in libGLES](#CVE-2017-5411)

Reporter
Looben Yang
Impact
high
##### Description

A use-after-free can occur during buffer storage operations within the ANGLE graphics library, used for WebGL content. The buffer storage can be freed while still in use in some circumstances, leading to a potentially exploitable crash.
*Note: This issue is in `libGLES`, which is only in use on Windows. Other operating systems are not affected.*

##### References

* [Bug 1325511](https://bugzilla.mozilla.org/show_bug.cgi?id=1325511)

#### [#CVE-2017-5408: Cross-origin reading of video captions in violation of CORS](#CVE-2017-5408)

Reporter
Eric Lawrence of Chrome Security
Impact
moderate
##### Description

Video files loaded video captions cross-origin without checking for the presence of CORS headers permitting such cross-origin use, leading to potential information disclosure for video captions.

##### References

* [Bug 1313711](https://bugzilla.mozilla.org/show_bug.cgi?id=1313711)

#### [#CVE-2017-5412: Buffer overflow read in SVG filters](#CVE-2017-5412)

Reporter
Atte Kettunen
Impact
moderate
##### Description

A buffer overflow read during SVG filter color value operations, resulting in data exposure.

##### References

* [Bug 1328323](https://bugzilla.mozilla.org/show_bug.cgi?id=1328323)

#### [#CVE-2017-5413: Segmentation fault during bidirectional operations](#CVE-2017-5413)

Reporter
Atte Kettunen
Impact
moderate
##### Description

A segmentation fault can occur during some bidirectional layout operations.

##### References

* [Bug 1337504](https://bugzilla.mozilla.org/show_bug.cgi?id=1337504)

#### [#CVE-2017-5414: File picker can choose incorrect default directory](#CVE-2017-5414)

Reporter
Abdulrahman Alqabandi
Impact
moderate
##### Description

The file picker dialog can choose and display the wrong local default directory when instantiated. On some operating systems, this can lead to information disclosure, such as the operating system or the local account name.

##### References

* [Bug 1319370](https://bugzilla.mozilla.org/show_bug.cgi?id=1319370)

#### [#CVE-2017-5416: Null dereference crash in HttpChannel](#CVE-2017-5416)

Reporter
Radek 'sysKin' Czyz
Impact
moderate
##### Description

In certain circumstances a networking event listener can be prematurely released. This appears to result in a null dereference in practice.

##### References

* [Bug 1328121](https://bugzilla.mozilla.org/show_bug.cgi?id=1328121)

#### [#CVE-2017-5425: Overly permissive Gecko Media Plugin sandbox regular expression access](#CVE-2017-5425)

Reporter
Haik Aftandilian
Impact
moderate
##### Description

The Gecko Media Plugin sandbox allows access to local files that match specific regular expressions. On OS OX, this matching allows access to some data in subdirectories of `/private/var` that could expose personal or temporary data. This has been updated to not allow access to `/private/var` and its subdirectories.
*Note: this issue only affects OS X. Other operating systems are not affected.*

##### References

* [Bug 1322716](https://bugzilla.mozilla.org/show_bug.cgi?id=1322716)

#### [#CVE-2017-5426: Gecko Media Plugin sandbox is not started if seccomp-bpf filter is running](#CVE-2017-5426)

Reporter
Jed Davis
Impact
moderate
##### Description

On Linux, if the secure computing mode BPF (seccomp-bpf) filter is running when the Gecko Media Plugin sandbox is started, the sandbox fails to be applied and items that would run within the sandbox are run protected only by the running filter which is typically weak compared to the sandbox.
*Note: this issue only affects Linux. Other operating systems are not affected.*

##### References

* [Bug 1257361](https://bugzilla.mozilla.org/show_bug.cgi?id=1257361)

#### [#CVE-2017-5418: Out of bounds read when parsing HTTP digest authorization responses](#CVE-2017-5418)

Reporter
Anonymous
Impact
low
##### Description

An out of bounds read error occurs when parsing some HTTP digest authorization responses, resulting in information leakage through the reading of random memory containing matches to specifically set patterns.

##### References

* [Bug 1338876](https://bugzilla.mozilla.org/show_bug.cgi?id=1338876)

#### [#CVE-2017-5419: Repeated authentication prompts lead to DOS attack](#CVE-2017-5419)

Reporter
Chris Hamono
Impact
low
##### Description

If a malicious site repeatedly triggers a modal authentication prompt, eventually the browser UI will become non-responsive, requiring shutdown through the operating system. This is a denial of service (DOS) attack.

##### References

* [Bug 1312243](https://bugzilla.mozilla.org/show_bug.cgi?id=1312243)

#### [#CVE-2017-5405: FTP response codes can cause use of uninitialized values for ports](#CVE-2017-5405)

Reporter
Anonymous
Impact
low
##### Description

Certain response codes in FTP connections can result in the use of uninitialized values for ports in FTP operations.

##### References

* [Bug 1336699](https://bugzilla.mozilla.org/show_bug.cgi?id=1336699)

#### [#CVE-2017-5421: Print preview spoofing](#CVE-2017-5421)

Reporter
Abdulrahman Alqabandi
Impact
low
##### Description

A malicious site could spoof the contents of the print preview window if popup windows are enabled, resulting in user confusion of what site is currently loaded.

##### References

* [Bug 1301876](https://bugzilla.mozilla.org/show_bug.cgi?id=1301876)

#### [#CVE-2017-5422: DOS attack by using view-source: protocol repeatedly in one hyperlink](#CVE-2017-5422)

Reporter
Alex Bolton
Impact
low
##### Description

If a malicious site uses the `view-source:` protocol in a series within a single hyperlink, it can trigger a non-exploitable browser crash when the hyperlink is selected. This was fixed by no longer making `view-source:` linkable.

##### References

* [Bug 1295002](https://bugzilla.mozilla.org/show_bug.cgi?id=1295002)

#### [#CVE-2017-5399: Memory safety bugs fixed in Thunderbird 52](#CVE-2017-5399)

Reporter
Mozilla developers and community
Impact
critical
##### Description

Mozilla developers and community members Carsten Book, Calixte Denizet, Christian Holler, Andrew McCreight, David Bolter, David Keeler, Jon Coppeard, Tyson Smith, Ronald Crane, Tooru Fujisawa, Ben Kelly, Bob Owen, Jed Davis, Julian Seward, Julian Hector, Philipp, Markus Stange, and André Bargull reported memory safety bugs present in Firefox 51. Some of these bugs showed evidence of memory corruption and we presume that with enough effort that some of these could be exploited to run arbitrary code.

##### References

* [Memory safety bugs fixed in Thunderbird 52](https://bugzilla.mozilla.org/buglist.cgi?bug_id=1332569%2C1315248%2C1261335%2C1321038%2C1331771%2C1339566%2C1339591%2C1240893%2C1341905%2C1323241%2C1336467%2C1270288%2C1295299%2C1296024%2C1304201%2C1306142%2C1307557%2C1308036%2C1334246%2C1334290%2C1317085%2C1339116%2C1324000%2C1323150%2C1332501%2C1320894%2C1333752%2C1303713%2C1321566%2C1264053%2C1343513)

#### [#CVE-2017-5398: Memory safety bugs fixed in Thunderbird 52 and Thunderbird 45.8](#CVE-2017-5398)

Reporter
Mozilla developers and community
Impact
critical
##### Description

Mozilla developers and community members Boris Zbarsky, Christian Holler, Honza Bambas, Jon Coppeard, Randell Jesup, André Bargull, Kan-Ru Chen, and Nathan Froyd reported memory safety bugs present in Firefox 51 and Firefox ESR 45.7. Some of these bugs showed evidence of memory corruption and we presume that with enough effort that some of these could be exploited to run arbitrary code.

##### References

* [Memory safety bugs fixed in Thunderbird 52 and Thunderbird ESR 45.8](https://bugzilla.mozilla.org/buglist.cgi?bug_id=1332550%2C1332597%2C1338383%2C1321612%2C1322971%2C1333568%2C1333887%2C1335450%2C1325052%2C1324379%2C1336510)

## Company

* [Leadership](/about/leadership/)
* [Press Center](https://blog.mozilla.org/category/mozilla/news/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=company)
* [Careers](/en-US/careers/)
* [Contact](/en-US/contact/)

## Support

* [Product Help](https://support.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=support)
* [File a Bug](https://bugzilla.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=support)
* [Localize Mozilla](https://pontoon.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=support)

## Resources

* [Advertise with Mozilla](/en-US/advertising/)
* [Firefox Release Notes](/firefox/134.0.2/releasenotes/)

## Developers

* [Developer Edition](/en-US/firefox/developer/)
* [Enterprise](/en-US/firefox/enterprise/)
* [Tools](https://firefox-source-docs.mozilla.org/devtools-user/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=developers)
* [MDN](https://developer.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer)

## Follow @Mozilla

* [X (formerly Twitter) (@mozilla)](https://twitter.com/mozilla)
* [Instagram (@mozilla)](https://www.instagram.com/mozilla/)
* [LinkedIn (@mozilla)](https://www.linkedin.com/company/mozilla-corporation/)
* [TikTok (@mozilla)](https://www.tiktok.com/%40mozilla)
* [Spotify (@mozilla)](https://open.spotify.com/show/0vT7LJMeVDxyQ2ZamHKu08?si=_uDRD6bRR_6M5YZyISGXgA)

## Follow @Firefox

* [X (formerly Twitter) (@firefox)](https://twitter.com/firefox)
* [Instagram (@firefox)](https://www.instagram.com/firefox/)
* [YouTube (@firefoxchannel)](https://www.youtube.com/user/firefoxchannel)
* [TikTok (@firefox)](https://www.tiktok.com/%40firefox)

[Donate](https://foundation.mozilla.org/?form=moco-donate-footer)

Visit [Mozilla Corporation’s](/en-US/) not-for-profit parent, the [Mozilla Foundation](https://foundation.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer).

Portions of this content are ©1998–2025 by individual mozilla.org contributors. Content available under a [Creative Commons license](/en-US/foundation/licensing/website-content/).

* [Website Privacy Notice](/en-US/privacy/websites/)
* [Cookies](/en-US/privacy/websites/cookie-settings/)
* [Legal](/en-US/about/legal/)
* [Community Participation Guidelines](/en-US/about/governance/policies/participation/)
* [About this site](/en-US/about/this-site/)

![](https://www.mozilla.org/media/img/logos/m24/wordmark-white.2d673bb5b33a.svg)



=== Content from wiki.mozilla.org_73f8d6fa_20250126_115002.html ===


# BMO/UserGuide/BugFields

From MozillaWiki
< [BMO](/BMO "BMO")‎ | [UserGuide](/BMO/UserGuide "BMO/UserGuide")

[Jump to navigation](#mw-head)
[Jump to search](#searchInput)
## Bugzilla Field Descriptions

Alias
A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla.Assignee
This is the person in charge of resolving the bug. Every time this field changes, the status changes to NEW to make it easy to see which new bugs have appeared on a person's list.Blocks
This bug must be resolved before the bugs listed in this field can be resolved.Bug ID
The numeric id of a bug, unique within this entire installation of Bugzilla.CC
Users who may not have a direct role to play on this bug, but who are interested in its progress.Changed
When this bug was last updated.Classification
Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorization.Comment
Bugs have comments added to them by Bugzilla users. You can search for some text in those comments.Comment Tag
Comments can have arbitrary tags added to them to help with filtering as well as mark comments as spam or abusive.Component
Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list.Creation date
When the bug was filed.Depends on
The bugs listed here must be resolved before this bug can be resolved.Duplicates
List of bugs that have been marked a duplicate of the bug currently being viewed.Keywords
Keywords are a controlled vocabulary for characterizing bugs across Products and Components. Examples of this field are `regression`, `sec-high`, and `topcrash`. Bugzilla administrators manage [the list of keywords](https://bugzilla.mozilla.org/describekeywords.cgi). If you believe you need a new keyword, [please contact the administrators to discuss](https://bugzilla.mozilla.org/enter_bug.cgi?product=bugzilla.mozilla.org&component=Administration).Mentors
Mentors are users who have offered to help the bug owner with such tasks as setting up a development environment, finding relevant information to fixing the bug, how to submit a patch for review, and finally how to get the fix committed.Needinfo
More information has been requested from specific individuals, or anyone, to move the bug forward to completion.OS
This is the operating system against which the bug was reported.Platform
This is the hardware platform against which the bug was reported (ARM, ARM64, x86, x86\_64, etc).Priority

| Priority | Description |
| --- | --- |
| **--** | No decision |
| **P1** | Fix in the current release cycle |
| **P2** | Fix in the next release cycle or the following (nightly + 1 or nightly + 2) |
| **P3** | Backlog |
| **P4** | Do not use. This priority is for the Web Platform Test bot. |
| **P5** | Will not fix, but will accept a patch |

This field describes the importance and order in which a bug should be fixed compared to other bugs. This field is utilized by the programmers/engineers/release managers/managers to prioritize the work to be done. See the Firefox [triage documentation](https://firefox-source-docs.mozilla.org/bug-mgmt/policies/triage-bugzilla.html) and [priority definitions](https://firefox-source-docs.mozilla.org/bug-mgmt/guides/priority.html), or for the main Bugzilla project, [Bugzilla:Priority\_System](/Bugzilla%3APriority_System "Bugzilla:Priority System").Product
Bugs are categorised into Products and Components. Select a Classification to narrow down this list.QA Contact
The person responsible for confirming this bug if it is unconfirmed, and for verifying the fix once the bug has been resolved.Rank
Used by some groups to provide finer-grained ordering for working on bugs than afforded by the Priority field. Use of this field is restricted to the `rank-setters` group.Regressed by
This bug has been introduced by the bugs listed here.Regressions
This bug has introduced the bugs listed here.Reporter
The person who filed this bug.See Also
This allows you to refer to bugs in other bug tracker installations. You can enter a URL to a bug in the 'Add Bug URLs' field to note that that bug is related to this one. You can enter multiple URLs at once by separating them with a comma. You should normally use this field to refer to bugs in other bug tracker installations, or bugs which are related to, but not known to be duplicates of the bug. Bugs which are regressions should be listed in the Regressed by field (above)Severity
This field describes the impact of a bug. This field is utilized by the programmers/engineers/release managers/managers to determine the severity of issues and used as input for the priority of the bug. It should not be set by people filing bugs. See the Firefox [triage documentation](https://firefox-source-docs.mozilla.org/bug-mgmt/policies/triage-bugzilla.html) and [severity documentation](https://firefox-source-docs.mozilla.org/bug-mgmt/guides/severity.html).

| Severity | Description |
| --- | --- |
| **--** | Default value for new bugs; bug triagers for components (ie engineers and other core project folks) are expected to update the bug's severity from this value. To avoid them missing new bugs for triage, do not alter this default when filing bugs. |
| **S1** | (Catastrophic) Blocks development/testing, may impact more than 25% of users, causes data loss, likely dot release driver, and no workaround available |
| **S2** | (Serious) Major functionality/product severely impaired or a high impact issue and a satisfactory workaround does not exist |
| **S3** | (Normal) Blocks non-critical functionality or a work around exists |
| **S4** | (Small/Trivial) minor significance, cosmetic issues, low or no impact to users |
| **N/A** | (Not Applicable) The above definitions do not apply to this bug; this value is reserved for bugs of type Task or Enhancement |

Summary
The bug summary is a short sentence which succinctly describes what the bug is about.Target Milestone
For Firefox-related bugs, when a change set (patch) lands in Mozilla-Central, the [sheriffs](/Sheriffing "Sheriffing") will set this field to the corresponding release value for the current Nightly.
Release status and tracking flags are used to mark intentions for when a fix or other patch should land.
If you need to track a bug against a set of milestones other than upcoming versions of Firefox, please tell the Bugzilla team, you may want a custom status flag.Triage Owner
User that is responsible [for triaging bugs in a specific component](https://firefox-source-docs.mozilla.org/bug-mgmt/policies/triage-bugzilla.html).Type
This field describes the [type of a bug](https://firefox-source-docs.mozilla.org/bug-mgmt/guides/bug-types.html).

| Type | Description |
| --- | --- |
| **defect** | regression, crash, hang, security vulnerability and any other general issue. |
| **enhancement** | new feature, improvement in UI, performance, etc. and any other request for user-facing changes and enhancements in the product; not engineering changes |
| **task** | refactoring, removal, replacement, enabling or disabling of functionality and any other engineering task |

URL
Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen.Version
The version field defines the version of the software the bug was found in.Votes
Some bugs can be voted for, and you can limit your search to bugs with more than a certain number of votes. Votes are not used by Mozilla developers to set priorities.Whiteboard
Each bug has a free-form single line text entry box for adding tags and status information

Retrieved from "<https://wiki.mozilla.org/index.php?title=BMO/UserGuide/BugFields&oldid=1250790>"

## Navigation menu

### Personal tools

* [Log in](/index.php?title=Special:UserLogin&returnto=BMO%2FUserGuide%2FBugFields "You are encouraged to log in; however, it is not mandatory [o]")
* [Request account](/Special%3ARequestAccount "You are encouraged to create an account and log in; however, it is not mandatory")

### Namespaces

* [Page](/BMO/UserGuide/BugFields "View the content page [c]")
* [Discussion](/index.php?title=Talk:BMO/UserGuide/BugFields&action=edit&redlink=1 "Discussion about the content page (page does not exist) [t]")

English

### Views

* [Read](/BMO/UserGuide/BugFields)
* [View source](/index.php?title=BMO/UserGuide/BugFields&action=edit "This page is protected.
  You can view its source [e]")
* [View history](/index.php?title=BMO/UserGuide/BugFields&action=history "Past revisions of this page [h]")

More

### Search

### Navigation

* [Main page](/Main_Page "Visit the main page [z]")
* [Product releases](/Releases)
* [New pages](/Special%3ANewPages)
* [Recent changes](/Special%3ARecentChanges "A list of recent changes in the wiki [r]")
* [Recent uploads](/Special%3ANewFiles)
* [Random page](/Special%3ARandom "Load a random page [x]")
* [Help](/MozillaWiki%3AHelp "The place to find out")

### How to Contribute

* [All-hands meeting](/WeeklyUpdates)
* [Other meetings](/Community_Calendar)
* [Contribute to Mozilla](/Contribute)
* [Community Portal](//community.mozilla.org)
* [Community Participation Guidelines](//www.mozilla.org/en-US/about/governance/policies/participation/)

### MozillaWiki

* [About](/MozillaWiki%3AAbout)
* [Team](/MozillaWiki%3ATeam)
* [Policies](/MozillaWiki%3APolicies)
* [Report a wiki bug](//bugzilla.mozilla.org/enter_bug.cgi?product=Websites&component=wiki.mozilla.org)

### Around Mozilla

* [Mozilla Support](//support.mozilla.org/)
* [Mozilla Developer Network](//developer.mozilla.org/)
* [Planet Mozilla](//planet.mozilla.org/)
* [Mozilla Blog](//blog.mozilla.org/)
* [Research](//www.mozilla.org/research/)

### Tools

* [What links here](/Special%3AWhatLinksHere/BMO/UserGuide/BugFields "A list of all wiki pages that link here [j]")
* [Related changes](/Special%3ARecentChangesLinked/BMO/UserGuide/BugFields "Recent changes in pages linked from this page [k]")
* [Special pages](/Special%3ASpecialPages "A list of all special pages [q]")
* Printable version
* [Permanent link](/index.php?title=BMO/UserGuide/BugFields&oldid=1250790 "Permanent link to this revision of this page")
* [Page information](/index.php?title=BMO/UserGuide/BugFields&action=info "More information about this page")

* This page was last edited on 14 May 2024, at 14:22.

* [Privacy policy](/MozillaWiki%3APrivacy_policy)
* [About MozillaWiki](/MozillaWiki%3AAbout)
* [Mobile view](https://wiki.mozilla.org/index.php?title=BMO/UserGuide/BugFields&mobileaction=toggle_view_mobile)

* [![Powered by MediaWiki](/resources/assets/poweredby_mediawiki_88x31.png)](https://www.mediawiki.org/)


