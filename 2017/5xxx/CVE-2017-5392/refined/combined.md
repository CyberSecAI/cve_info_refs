=== Content from www.mozilla.org_cb308383_20250125_154336.html ===


## Help us improve your Mozilla experience

In addition to Cookies necessary for this site to function, we’d like your permission to set some additional Cookies to better understand your browsing needs and improve your experience. Rest assured — we value your privacy.

Accept All Additional Cookies

Reject All Additional Cookies

[Cookie settings](/en-US/privacy/websites/cookie-settings/)

Menu
[![Mozilla](https://www.mozilla.org/media/img/logos/m24/lockup-black.f2ddba3f0724.svg)](/en-US/)

* [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
  Firefox browsers](/en-US/firefox/)
  Close Firefox browsers menu
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
    ## Firefox for Desktop](/en-US/firefox/new/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
    ## Firefox for iOS](/en-US/firefox/browsers/mobile/ios/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
    ## Firefox for Android](/en-US/firefox/browsers/mobile/android/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/focus/logo.aac3e33175cb.svg)
    ## Firefox Focus](/en-US/firefox/browsers/mobile/focus/)
  + [## Firefox blog](https://blog.mozilla.org/firefox/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=firefox)
* [Products](/en-US/products/)
  Close Products menu
  + [![](https://www.mozilla.org/media/protocol/img/logos/mozilla/vpn/logo.c648f487bfb8.svg)
    ## Mozilla VPN](/en-US/products/vpn/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/monitor/logo.d97e5516f9e6.svg)
    ## Mozilla Monitor](https://monitor.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/relay/logo-white.d42a8b52e44c.svg)
    ## Firefox Relay](https://relay.firefox.com/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/protocol/img/logos/pocket/logo.17446bc33a5d.svg)
    ## Pocket](https://getpocket.com/firefox_learnmore/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/img/nav/icons/icon-mdn-plus.f54475f980ab.svg)
    ## MDN Plus](https://developer.mozilla.org/plus?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/img/logos/fakespot/logo-blue.3973b8fe9631.svg)
    ## Fakespot](https://fakespot.com/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/img/logos/thunderbird/logo-thunderbird.121e9c0fed45.svg)
    ## Thunderbird](https://www.thunderbird.net/)

  [All products](/en-US/products/)
* [About us](/en-US/about/)
  Close About us menu

  Our Mission

  + [## About Mozilla](/en-US/about/)
  + [## The Mozilla Manifesto](/en-US/about/manifesto/)
  + [## Get Involved](/en-US/contribute/)
  + [## Innovation Projects](https://future.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [## Blog](https://blog.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)

  Our Work

  + [## Mozilla Foundation](https://foundation.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [## Mozilla.ai](https://www.mozilla.ai/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [## Mozilla Ventures](https://mozilla.vc/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [## Mozilla Advertising](/en-US/advertising/)

## Menu

* Mozilla Security

## [Mozilla Security](/en-US/security/)

* [Advisories](/en-US/security/advisories/)
* [Known Vulnerabilities](/en-US/security/known-vulnerabilities/)
* [Mozilla Security Blog](https://blog.mozilla.com/security/)
* [Security Bug Bounty](/en-US/security/bug-bounty/)
* [Third-party Injection Policy](/en-US/security/third-party-software-injection/)

## [Client Bug Bounty](/en-US/security/client-bug-bounty/)

* [Frequently Asked Questions](/en-US/security/bug-bounty/faq/)
* [Hall of Fame](/en-US/security/bug-bounty/hall-of-fame/)

## [Web Bug Bounty](/en-US/security/web-bug-bounty/)

* [Eligible Websites](/en-US/security/bug-bounty/web-eligible-sites/)
* [Frequently Asked Questions](/en-US/security/bug-bounty/faq-webapp/)
* [Hall of Fame](/en-US/security/bug-bounty/web-hall-of-fame/)

# Mozilla Foundation Security Advisory 2017-01

## Security vulnerabilities fixed in Firefox 51

Announced
January 24, 2017
Impact
critical
Products
Firefox
Fixed in

* Firefox 51

#### [#CVE-2017-5375: Excessive JIT code allocation allows bypass of ASLR and DEP](#CVE-2017-5375)

Reporter
Rh0
Impact
critical
##### Description

JIT code allocation can allow for a bypass of ASLR and DEP protections leading to potential memory corruption attacks.

##### References

* [Bug 1325200](https://bugzilla.mozilla.org/show_bug.cgi?id=1325200)

#### [#CVE-2017-5376: Use-after-free in XSL](#CVE-2017-5376)

Reporter
Nicolas Grégoire
Impact
critical
##### Description

Use-after-free while manipulating XSL in XSLT documents

##### References

* [Bug 1311687](https://bugzilla.mozilla.org/show_bug.cgi?id=1311687)

#### [#CVE-2017-5377: Memory corruption with transforms to create gradients in Skia](#CVE-2017-5377)

Reporter
Atte Kettunen
Impact
critical
##### Description

A memory corruption vulnerability in Skia that can occur when using transforms to make gradients, resulting in a potentially exploitable crash.

##### References

* [Bug 1306883](https://bugzilla.mozilla.org/show_bug.cgi?id=1306883)

#### [#CVE-2017-5378: Pointer and frame data leakage of Javascript objects](#CVE-2017-5378)

Reporter
Jann Horn
Impact
high
##### Description

Hashed codes of JavaScript objects are shared between pages. This allows for pointer leaks because an object’s address can be discovered through hash codes, and also allows for data leakage of an object’s content using these hash codes.

##### References

* [Bug 1312001](https://bugzilla.mozilla.org/show_bug.cgi?id=1312001)
* [Bug 1330769](https://bugzilla.mozilla.org/show_bug.cgi?id=1330769)

#### [#CVE-2017-5379: Use-after-free in Web Animations](#CVE-2017-5379)

Reporter
Nils
Impact
high
##### Description

Use-after-free vulnerability in Web Animations when interacting with cycle collection found through fuzzing.

##### References

* [Bug 1309198](https://bugzilla.mozilla.org/show_bug.cgi?id=1309198)

#### [#CVE-2017-5380: Potential use-after-free during DOM manipulations](#CVE-2017-5380)

Reporter
Nils
Impact
high
##### Description

A potential use-after-free found through fuzzing during DOM manipulation of SVG content.

##### References

* [Bug 1322107](https://bugzilla.mozilla.org/show_bug.cgi?id=1322107)

#### [#CVE-2017-5390: Insecure communication methods in Developer Tools JSON viewer](#CVE-2017-5390)

Reporter
Jerri Rice
Impact
high
##### Description

The JSON viewer in the Developer Tools uses insecure methods to create a communication channel for copying and viewing JSON or HTTP headers data, allowing for potential privilege escalation.

##### References

* [Bug 1297361](https://bugzilla.mozilla.org/show_bug.cgi?id=1297361)

#### [#CVE-2017-5389: WebExtensions can install additional add-ons via modified host requests](#CVE-2017-5389)

Reporter
Kris Maglione
Impact
high
##### Description

WebExtensions could use the `mozAddonManager` API by modifying the CSP headers on sites with the appropriate permissions and then using host requests to redirect script loads to a malicious site. This allows a malicious extension to then install additional extensions without explicit user permission.

##### References

* [Bug 1308688](https://bugzilla.mozilla.org/show_bug.cgi?id=1308688)

#### [#CVE-2017-5396: Use-after-free with Media Decoder](#CVE-2017-5396)

Reporter
Filipe Gomes
Impact
high
##### Description

A use-after-free vulnerability in the Media Decoder when working with media files when some events are fired after the media elements are freed from memory.

##### References

* [Bug 1329403](https://bugzilla.mozilla.org/show_bug.cgi?id=1329403)

#### [#CVE-2017-5381: Certificate Viewer exporting can be used to navigate and save to arbitrary filesystem locations](#CVE-2017-5381)

Reporter
Jann Horn
Impact
moderate
##### Description

The "export" function in the Certificate Viewer can force local filesystem navigation when the "common name" in a certificate contains slashes, allowing certificate content to be saved in unsafe locations with an arbitrary filename.

##### References

* [Bug 1017616](https://bugzilla.mozilla.org/show_bug.cgi?id=1017616)

#### [#CVE-2017-5382: Feed preview can expose privileged content errors and exceptions](#CVE-2017-5382)

Reporter
Jerri Rice
Impact
moderate
##### Description

Feed preview for RSS feeds can be used to capture errors and exceptions generated by privileged content, allowing for the exposure of internal information not meant to be seen by web content.

##### References

* [Bug 1295322](https://bugzilla.mozilla.org/show_bug.cgi?id=1295322)

#### [#CVE-2017-5383: Location bar spoofing with unicode characters](#CVE-2017-5383)

Reporter
Armin Ebert
Impact
moderate
##### Description

URLs containing certain unicode glyphs for alternative hyphens and quotes do not properly trigger punycode display, allowing for domain name spoofing attacks in the location bar.

##### References

* [Bug 1323338](https://bugzilla.mozilla.org/show_bug.cgi?id=1323338)
* [Bug 1324716](https://bugzilla.mozilla.org/show_bug.cgi?id=1324716)

#### [#CVE-2017-5384: Information disclosure via Proxy Auto-Config (PAC)](#CVE-2017-5384)

Reporter
Paul Stone, Alex Chapman
Impact
moderate
##### Description

Proxy Auto-Config (PAC) files can specify a JavaScript function called for all URL requests with the full URL path which exposes more information than would be sent to the proxy itself in the case of HTTPS. Normally the Proxy Auto-Config file is specified by the user or machine owner and presumed to be non-malicious, but if a user has enabled Web Proxy Auto Detect (WPAD) this file can be served remotely.

##### References

* [Bug 1255474](https://bugzilla.mozilla.org/show_bug.cgi?id=1255474)
* [Sniffing HTTPS URLS with malicious PAC files](https://www.contextis.com//resources/blog/leaking-https-urls-20-year-old-vulnerability/)

#### [#CVE-2017-5385: Data sent in multipart channels ignores referrer-policy response headers](#CVE-2017-5385)

Reporter
Muneaki Nishimura
Impact
moderate
##### Description

Data sent with in multipart channels, such as the multipart/x-mixed-replace MIME type, will ignore the referrer-policy response header, leading to potential information disclosure for sites using this header.

##### References

* [Bug 1295945](https://bugzilla.mozilla.org/show_bug.cgi?id=1295945)

#### [#CVE-2017-5386: WebExtensions can use data: protocol to affect other extensions](#CVE-2017-5386)

Reporter
Muneaki Nishimura
Impact
moderate
##### Description

WebExtension scripts can use the `data:` protocol to affect pages loaded by other web extensions using this protocol, leading to potential data disclosure or privilege escalation in affected extensions.

##### References

* [Bug 1319070](https://bugzilla.mozilla.org/show_bug.cgi?id=1319070)

#### [#CVE-2017-5394: Android location bar spoofing using fullscreen and JavaScript events](#CVE-2017-5394)

Reporter
Jordi Chancel
Impact
moderate
##### Description

A location bar spoofing attack where the location bar of loaded page will be shown over the content of another tab due to a series of JavaScript events combined with fullscreen mode.
*Note: This issue only affects Firefox for Android. Other operating systems are not affected.*

##### References

* [Bug 1222798](https://bugzilla.mozilla.org/show_bug.cgi?id=1222798)

#### [#CVE-2017-5391: Content about: pages can load privileged about: pages](#CVE-2017-5391)

Reporter
Jerri Rice
Impact
moderate
##### Description

Special `about:` pages used by web content, such as RSS feeds, can load privileged `about:` pages in an iframe. If a content-injection bug were found in one of those pages this could allow for potential privilege escalation.

##### References

* [Bug 1309310](https://bugzilla.mozilla.org/show_bug.cgi?id=1309310)

#### [#CVE-2017-5392: Weak references using multiple threads on weak proxy objects lead to unsafe memory usage](#CVE-2017-5392)

Reporter
Honza Bambas
Impact
moderate
##### Description

Weak proxy objects have weak references on multiple threads when they should only have them on one, resulting in incorrect memory usage and corruption, which leads to potentially exploitable crashes.
*Note: This issue only affects Firefox for Android. Other operating systems are not affected.*

##### References

* [Bug 1293709](https://bugzilla.mozilla.org/show_bug.cgi?id=1293709)

#### [#CVE-2017-5393: Remove addons.mozilla.org CDN from whitelist for mozAddonManager](#CVE-2017-5393)

Reporter
Stuart Colville
Impact
moderate
##### Description

The `mozAddonManager` allows for the installation of extensions from the CDN for addons.mozilla.org, a publicly accessible site. This could allow malicious extensions to install additional extensions from the CDN in combination with an XSS attack on Mozilla AMO sites.

##### References

* [Bug 1309282](https://bugzilla.mozilla.org/show_bug.cgi?id=1309282)

#### [#CVE-2017-5395: Android location bar spoofing during scrolling](#CVE-2017-5395)

Reporter
Jordi Chancel
Impact
low
##### Description

Malicious sites can display a spoofed location bar on a subsequently loaded page when the existing location bar on the new page is scrolled out of view if navigations between pages can be timed correctly.
*Note: This issue only affects Firefox for Android. Other operating systems are not affected.*

##### References

* [Bug 1293463](https://bugzilla.mozilla.org/show_bug.cgi?id=1293463)

#### [#CVE-2017-5387: Disclosure of local file existence through TRACK tag error messages](#CVE-2017-5387)

Reporter
Mustafa Hasan
Impact
low
##### Description

The existence of a specifically requested local file can be found due to the double firing of the `onerror` when the `source` attribute on a `<track>` tag refers to a file that does not exist if the source page is loaded locally.

##### References

* [Bug 1295023](https://bugzilla.mozilla.org/show_bug.cgi?id=1295023)

#### [#CVE-2017-5388: WebRTC can be used to generate a large amount of UDP traffic for DDOS attacks](#CVE-2017-5388)

Reporter
Cullen Jennings
Impact
low
##### Description

A STUN server in conjunction with a large number of `webkitRTCPeerConnection` objects can be used to send large STUN packets in a short period of time due to a lack of rate limiting being applied on e10s systems, allowing for a denial of service attack.

##### References

* [Bug 1281482](https://bugzilla.mozilla.org/show_bug.cgi?id=1281482)

#### [#CVE-2017-5374: Memory safety bugs fixed in Firefox 51](#CVE-2017-5374)

Reporter
Mozilla developers and community
Impact
critical
##### Description

Mozilla developers and community members Gary Kwong, Olli Pettay, Tooru Fujisawa, Carsten Book, Andrew McCreight, Chris Pearce, Ronald Crane, Jan de Mooij, Julian Seward, Nicolas Pierron, Randell Jesup, Esther Monchari, Honza Bambas, and Philipp reported memory safety bugs present in Firefox 50.1. Some of these bugs showed evidence of memory corruption and we presume that with enough effort that some of these could be exploited to run arbitrary code.

##### References

* [Memory safety bugs fixed in Firefox 51](https://bugzilla.mozilla.org/buglist.cgi?bug_id=1325344%2C1317501%2C1311319%2C1329989%2C1300145%2C1322305%2C1288561%2C1295747%2C1318766%2C1297808%2C1321374%2C1324810%2C1313385%2C1319888%2C1302231%2C1307458%2C1293327%2C1315447%2C1319456)

#### [#CVE-2017-5373: Memory safety bugs fixed in Firefox 51 and Firefox ESR 45.7](#CVE-2017-5373)

Reporter
Mozilla developers and community
Impact
critical
##### Description

Mozilla developers and community members Christian Holler, Gary Kwong, André Bargull, Jan de Mooij, Tom Schuster, and Oriol reported memory safety bugs present in Firefox 50.1 and Firefox ESR 45.6. Some of these bugs showed evidence of memory corruption and we presume that with enough effort that some of these could be exploited to run arbitrary code.

##### References

* [Memory safety bugs fixed in Firefox 51 and Firefox ESR 45.7](https://bugzilla.mozilla.org/buglist.cgi?bug_id=1322315%2C1328834%2C1322420%2C1285833%2C1285960%2C1328251%2C1331058%2C1325938%2C1325877)

## Company

* [Leadership](/about/leadership/)
* [Press Center](https://blog.mozilla.org/category/mozilla/news/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=company)
* [Careers](/en-US/careers/)
* [Contact](/en-US/contact/)

## Support

* [Product Help](https://support.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=support)
* [File a Bug](https://bugzilla.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=support)
* [Localize Mozilla](https://pontoon.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=support)

## Resources

* [Advertise with Mozilla](/en-US/advertising/)
* [Firefox Release Notes](/firefox/134.0.2/releasenotes/)

## Developers

* [Developer Edition](/en-US/firefox/developer/)
* [Enterprise](/en-US/firefox/enterprise/)
* [Tools](https://firefox-source-docs.mozilla.org/devtools-user/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=developers)
* [MDN](https://developer.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer)

## Follow @Mozilla

* [X (formerly Twitter) (@mozilla)](https://twitter.com/mozilla)
* [Instagram (@mozilla)](https://www.instagram.com/mozilla/)
* [LinkedIn (@mozilla)](https://www.linkedin.com/company/mozilla-corporation/)
* [TikTok (@mozilla)](https://www.tiktok.com/%40mozilla)
* [Spotify (@mozilla)](https://open.spotify.com/show/0vT7LJMeVDxyQ2ZamHKu08?si=_uDRD6bRR_6M5YZyISGXgA)

## Follow @Firefox

* [X (formerly Twitter) (@firefox)](https://twitter.com/firefox)
* [Instagram (@firefox)](https://www.instagram.com/firefox/)
* [YouTube (@firefoxchannel)](https://www.youtube.com/user/firefoxchannel)
* [TikTok (@firefox)](https://www.tiktok.com/%40firefox)

[Donate](https://foundation.mozilla.org/?form=moco-donate-footer)

Visit [Mozilla Corporation’s](/en-US/) not-for-profit parent, the [Mozilla Foundation](https://foundation.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer).

Portions of this content are ©1998–2025 by individual mozilla.org contributors. Content available under a [Creative Commons license](/en-US/foundation/licensing/website-content/).

* [Website Privacy Notice](/en-US/privacy/websites/)
* [Cookies](/en-US/privacy/websites/cookie-settings/)
* [Legal](/en-US/about/legal/)
* [Community Participation Guidelines](/en-US/about/governance/policies/participation/)
* [About this site](/en-US/about/this-site/)

![](https://www.mozilla.org/media/img/logos/m24/wordmark-white.2d673bb5b33a.svg)



=== Content from bugzilla.mozilla.org_79352463_20250126_100013.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summary▾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View ▾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/1309310)
* [XML](/show_bug.cgi?ctype=xml&id=1309310)

Closed
[Bug 1309310](/show_bug.cgi?id=1309310)
(CVE-2017-5391)

Opened 8 years ago
Closed 8 years ago

# Unlinkable content-privileged about: pages can link to chrome-privileged about: pages

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

Unlinkable content-privileged about: pages can link to chrome-privileged about: pages

## Categories

### (Core :: Security: CAPS, defect, P1)

[Product:](/describecomponents.cgi?product=Core)

Core
▾

Core
Shared components used by Firefox and other Mozilla software, including handling of Web content; Gecko, HTML, CSS, layout, DOM, scripts, images, networking, etc. Issues with web page layout probably go here, while Firefox user interface issues belong in the [Firefox](https://bugzilla.mozilla.org/describecomponents.cgi?product=Firefox) product. ([More info](https://wiki.mozilla.org/Modules/All#Core))
[See Open Bugs in This Product](/buglist.cgi?product=Core&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Core)
Watch This Product

[Component:](/describecomponents.cgi?product=Core&component=Security%3A%20CAPS#Security%3A%20CAPS)

Security: CAPS
▾

Core :: Security: CAPS
Caps is the capabilities-based security system for the browser. Manages principals (entities responsible for a piece of code) and the protected capabilities (the ability to perform a restricted action) that may be enabled for given principals.
[See Open Bugs in This Component](/buglist.cgi?product=Core&component=Security%3A%20CAPS&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Core&component=Security%3A%20CAPS&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Core&component=Security%3A%20CAPS)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

48 Branch

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

Unspecified

Unspecified

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

P1

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

normal

Points:

---

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

VERIFIED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

VERIFIED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

---

Iteration:

---

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| Accessibility Severity | --- |
| --- | --- |
| Webcompat Priority | --- |
| Performance Impact | --- |
| Webcompat Score | --- |
| a11y-review | --- |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox49 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox49&o1=equals&v1=wontfix) |
| firefox-esr45 | --- | [unaffected](/buglist.cgi?f1=cf_status_firefox_esr45&o1=equals&v1=unaffected) |
| firefox50 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox50&o1=equals&v1=wontfix) |
| firefox51 | --- | [verified](/buglist.cgi?f1=cf_status_firefox51&o1=equals&v1=verified) |
| firefox52 | --- | [verified](/buglist.cgi?f1=cf_status_firefox52&o1=equals&v1=verified) |

|  | Tracking | Status |
| --- | --- | --- |
| firefox49 |  | wontfix |
| firefox-esr45 |  | unaffected |
| relnote-firefox |  | --- |
| thunderbird\_esr115 | --- | --- |
| thunderbird\_esr128 | --- | --- |
| firefox50 |  | wontfix |
| firefox51 |  | verified |
| firefox52 |  | verified |
| firefox-esr115 | --- | --- |
| firefox-esr128 | --- | --- |
| firefox134 | --- | --- |
| firefox135 | --- | --- |
| firefox136 | --- | --- |

## People

### (Reporter: Gijs, Assigned: Gijs)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/66445733c06687eafa2978764675104f?d=mm&size=40)  [Gijs](/user_profile?user_id=159069)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](https://secure.gravatar.com/avatar/66445733c06687eafa2978764675104f?d=mm&size=40)  [Gijs](/user_profile?user_id=159069)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

![](https://secure.gravatar.com/avatar/72977b89c86da4a19d3cf1d5920ea341?d=mm&size=40)  [ckerschb](/user_profile?user_id=363267)

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

15 people

## References

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

[1318664](/show_bug.cgi?id=1318664 "RESOLVED FIXED - Security Error: Content at about:cache may not load or link to about:cache?storage=disk&context="), [1329457](/show_bug.cgi?id=1329457 "VERIFIED FIXED - Unable to add about:* pages as a about:newtab tile"), [1335272](/show_bug.cgi?id=1335272 "RESOLVED FIXED - Security Error: Content at about:cache?storage=disk&context= may not load or link to about:cache-entry?storage=disk&context=&eid=&uri=...")

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

---

Dependency [tree](/showdependencytree.cgi?id=1309310&hide_resolved=1)
/ [graph](/showdependencygraph.cgi?id=1309310)

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

---

## Details

### (Keywords: regression, reporter-external, sec-moderate, Whiteboard: [adv-main51+])

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

CVE-2017-5391

[Keywords:](/describekeywords.cgi)

[regression](/buglist.cgi?keywords=regression&resolution=---),
[reporter-external](/buglist.cgi?keywords=reporter-external&resolution=---),
[sec-moderate](/buglist.cgi?keywords=sec-moderate&resolution=---)

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[adv-main51+]

QA Whiteboard:

---

Has STR:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

| [abillings](/user_profile?user_id=280903) | [sec-bounty](#a2346936_280903 "8 years ago") | + |
| --- | --- | --- |
| [abillings](/user_profile?user_id=280903) | sec-bounty | + |
| --- | --- | --- |
|  | behind-pref |  |
| --- | --- | --- |
|  | firefox-backlog |  |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | in-testsuite |  |
|  | qe-verify |  |

## Crash Data

Signature:

*None*

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (3 files, 1 obsolete file)

| [metaRedirection-testcase-new.html](/attachment.cgi?id=8799934)  [8 years ago](#c4)  [Jerri Rice (rehash pending)](/user_profile?user_id=577580)   1009 bytes, text/html |  | [Details](/attachment.cgi?id=8799934&action=edit) |
| --- | --- | --- |
| [Patch v0.1](/attachment.cgi?id=8809091)  [8 years ago](#c13)  [:Gijs (he/him)](/user_profile?user_id=159069)   4.37 KB, patch |  | [Details](/attachment.cgi?id=8809091&action=edit) | [Diff](/attachment.cgi?id=8809091&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1309310&attachment=8809091) |
| [Patch v0.2](/attachment.cgi?id=8809380)  [8 years ago](#c17)  [:Gijs (he/him)](/user_profile?user_id=159069)   4.58 KB, patch | bzbarsky : [review+](#c19 "8 years ago") | [Details](/attachment.cgi?id=8809380&action=edit) | [Diff](/attachment.cgi?id=8809380&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1309310&attachment=8809380) |
| [Patch for beta](/attachment.cgi?id=8818531)  [8 years ago](#c24)  [:Gijs (he/him)](/user_profile?user_id=159069)   9.23 KB, patch | Gijs : [review+](#c24 "8 years ago")  gchang : [approval-mozilla-beta+](#c25 "8 years ago") | [Details](/attachment.cgi?id=8818531&action=edit) | [Diff](/attachment.cgi?id=8818531&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1309310&attachment=8818531) |

Show Obsolete

Bottom ↓
Tags ▾

* Reset

Timeline ▾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [:Gijs (he/him)](/user_profile?user_id=159069)  Assignee |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=1309310#c0)• 8 years ago |
|  | |

As per summary. This also allows loading, say, about:preferences in an iframe on about:feeds or about:reader or whatever. Compartments save our butt from immediate pwnage, but I'm fairly sure that chrome-privileged things in non-toplevel documents is bad either way.
This is a regression (it wasn't possible in 47), probably from [bug 1253673](/show_bug.cgi?id=1253673 "RESOLVED FIXED - bypass FireFox Secure Connection Failed prompt to whitelist any site (but doesn't work)"). Not marking for now because we don't know for sure and I don't yet know exactly how bad this is. Just that it's bad.

|  | [:Gijs (he/him)](/user_profile?user_id=159069)  Assignee |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=1309310#c1)• 8 years ago |
|  | |

(In reply to :Gijs Kruitbosch from [comment #0](/show_bug.cgi?id=1309310#c0 "VERIFIED FIXED - Unlinkable content-privileged about: pages can link to chrome-privileged about: pages"))
> This is a regression (it wasn't possible in 47), probably from [bug 1253673](/show_bug.cgi?id=1253673 "RESOLVED FIXED - bypass FireFox Secure Connection Failed prompt to whitelist any site (but doesn't work)").
Oh, to be clear: it was a regression for about:feeds, which wasn't unlinkable before that bug. I haven't checked how this affects/affected pages that were unlinkable before, like about:reader.

|  | [Jerri Rice (rehash pending)](/user_profile?user_id=577580) |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=1309310#c2)• 8 years ago |
|  | |

(In reply to :Gijs Kruitbosch from [comment #1](/show_bug.cgi?id=1309310#c1 "VERIFIED FIXED - Unlinkable content-privileged about: pages can link to chrome-privileged about: pages"))
> (In reply to :Gijs Kruitbosch from [comment #0](/show_bug.cgi?id=1309310#c0 "VERIFIED FIXED - Unlinkable content-privileged about: pages can link to chrome-privileged about: pages"))
> > This is a regression (it wasn't possible in 47), probably from [bug 1253673](/show_bug.cgi?id=1253673 "RESOLVED FIXED - bypass FireFox Secure Connection Failed prompt to whitelist any site (but doesn't work)").
>
> Oh, to be clear: it was a regression for about:feeds, which wasn't
> unlinkable before that bug. I haven't checked how this affects/affected
> pages that were unlinkable before, like about:reader.
Even when about:feeds wasn't linkable, the meta redirect technique would still load it( I remember testing this in release when there was no other way for me to load content for about:feeds.)
Should that be a different bug if I can confirm that it does work before the regression seen here?

|  | [:Gijs (he/him)](/user_profile?user_id=159069)  Assignee |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=1309310#c3)• 8 years ago |
|  | |

(In reply to Jerri Rice (rehash pending) from [comment #2](/show_bug.cgi?id=1309310#c2 "VERIFIED FIXED - Unlinkable content-privileged about: pages can link to chrome-privileged about: pages"))
> (In reply to :Gijs Kruitbosch from [comment #1](/show_bug.cgi?id=1309310#c1 "VERIFIED FIXED - Unlinkable content-privileged about: pages can link to chrome-privileged about: pages"))
> > (In reply to :Gijs Kruitbosch from [comment #0](/show_bug.cgi?id=1309310#c0 "VERIFIED FIXED - Unlinkable content-privileged about: pages can link to chrome-privileged about: pages"))
> > > This is a regression (it wasn't possible in 47), probably from [bug 1253673](/show_bug.cgi?id=1253673 "RESOLVED FIXED - bypass FireFox Secure Connection Failed prompt to whitelist any site (but doesn't work)").
> >
> > Oh, to be clear: it was a regression for about:feeds, which wasn't
> > unlinkable before that bug. I haven't checked how this affects/affected
> > pages that were unlinkable before, like about:reader.
>
> Even when about:feeds wasn't linkable, the meta redirect technique would
> still load it( I remember testing this in release when there was no other
> way for me to load content for about:feeds.)
>
> Should that be a different bug if I can confirm that it does work before the
> regression seen here?
I'm not sure what "the meta redirect technique" means in this context. about:feeds is currently 'unlinkable', so if you try and do e.g. location.href = 'about:feeds' on the web, you get an error. That didn't use to be the case (pre-firefox-48).

|  | [Jerri Rice (rehash pending)](/user_profile?user_id=577580) |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=1309310#c4)• 8 years ago |
|  | |

Attached file
[metaRedirection-testcase-new.html](attachment.cgi?id=8799934)
— [Details](attachment.cgi?id=8799934&action=edit)

Loading about:feeds in ff 47 which shows that even without this regression the possibility for this being used maliciously is very real.

|  | [:Gijs (he/him)](/user_profile?user_id=159069)  Assignee |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=1309310#c5)• 8 years ago |
|  | |

(In reply to Jerri Rice (rehash pending) from [comment #4](/show_bug.cgi?id=1309310#c4 "VERIFIED FIXED - Unlinkable content-privileged about: pages can link to chrome-privileged about: pages"))
> Created [attachment 8799934](/attachment.cgi?id=8799934 "metaRedirection-testcase-new.html") [[details]](/attachment.cgi?id=8799934&action=edit "metaRedirection-testcase-new.html")
> metaRedirection-testcase-new.html
>
> Loading about:feeds in ff 47 which shows that even without this regression
> the possibility for this being used maliciously is very real.
This doesn't make a difference for this bug - this bug is about loading about:preferences or other privileged about: pages from unprivileged pages like about:feeds . It is orthogonal to whether or not you can load about:feeds, but it was likely regressed by the change in [bug 1253673](/show_bug.cgi?id=1253673 "RESOLVED FIXED - bypass FireFox Secure Connection Failed prompt to whitelist any site (but doesn't work)").
As I said in [comment #3](/show_bug.cgi?id=1309310#c3 "VERIFIED FIXED - Unlinkable content-privileged about: pages can link to chrome-privileged about: pages"), in 47 you could load about:feeds directly with a link or assigning to location.href . That is no longer possible. Your redirect works in 52 as well as 47, but that doesn't affect about:preferences . The problem is loading about:preferences \*from\* about:feeds .

|  | [Jerri Rice (rehash pending)](/user_profile?user_id=577580) |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=1309310#c6)• 8 years ago |
|  | |

Yes, I had realized that after testing that final piece, made a comment pointing out my mistake here only to hit a mid-air collision!
Gijs is on my clock apparently, that's about the 4th one today :)

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1309310#a6146_406194)• 8 years ago |

Group: core-security → dom-core-security

|  | [Andrew Overholt [:overholt]](/user_profile?user_id=442218) |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=1309310#c7)• 8 years ago |
|  | |

Gijs, are you going to be able to take this or do you want me to try to find someone? And just to be clear: your thoughts are that we should/should be able to restrict what about:feeds, etc. can load with code in CAPS somewhere? (/me isn't super-familiar with this) Thanks.Flags: needinfo?(gijskruitbosch+bugs)Priority: -- → P1

|  | [:Gijs (he/him)](/user_profile?user_id=159069)  Assignee |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=1309310#c8)• 8 years ago |
|  | |

(In reply to Andrew Overholt [:overholt] from [comment #7](/show_bug.cgi?id=1309310#c7 "VERIFIED FIXED - Unlinkable content-privileged about: pages can link to chrome-privileged about: pages"))
> Gijs, are you going to be able to take this or do you want me to try to find
> someone?
I feel bad because it's my regression, but I think it would be good if there was someone else with cycles. If not, ping me again and I can try to find time for this.
Note that this might not be entirely trivial to fix...
> And just to be clear: your thoughts are that we should/should be
> able to restrict what about:feeds, etc. can load with code in CAPS
> somewhere? (/me isn't super-familiar with this) Thanks.
Well, I haven't deep-dived on this yet, but there's basically 3 sets of pages here:
(a) about: pages with system principal (which we try always try to prevent the web from opening)
(b) about: pages without system principal that we try to prevent the web from opening (are "unlinkable")
(c) about: pages without system principal that can easily be opened by the web (e.g. about:blank)
(a) and now (b) are not nested URIs, they're just "about:foo". (c) \*are\* nested, they are about:foo on the outside, moz-safe-about:foo on the inside).
CAPS has flag checks on URIs where it basically checks whether one URI can open the other based on the flags set on the target URL (like "this URI is a UI resource" or "this URI should not be loaded by web content"). However, we purposefully don't do some of those flag checks when the source and target URI have the same scheme. This means chrome:// URLs can always link to other chrome:// URLs, http:// can always link to other http://, etc.
The nesting difference means that pages in category (c) can't open pages in (b) and (a), because their URI schemes are not the same (the outer scheme is the same (about), but one of them is nested and the other isn't, so we conclude the two URIs aren't scheme-equivalent).
The bug here is that I would argue that pages in (b) also shouldn't be able to open pages in (a).
I don't know for sure what would be the simplest way of adapting CAPS so this is no longer possible. The obvious options include manually special-casing about: URIs somehow, or adding a flag that we set on the about: protocol that we check for in the CAPS code in question, so that we don't allow loads based on scheme-equivalence for non-nested about: URIs. That last one sounds like the most plausible, much though I would hate to add yet another URI flag to nsIProtocolHandler. Boris, does that sound sane?
Note that as of right now, AFAIK there is no obvious way to exploit this. If there was a way to run script or create links in about:feeds, that would change.Flags: needinfo?(gijskruitbosch+bugs) → needinfo?(bzbarsky)

|  | [:Gijs (he/him)](/user_profile?user_id=159069)  Assignee |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=1309310#c9)• 8 years ago |
|  | |

Oh, also, this problem is just going to get worse once we de-nest about: URIs (which we should be doing at some point - [bug 1228118](/show_bug.cgi?id=1228118 "NEW - Change about: handling to not use nested URIs")).

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1309310#a170186_1689)• 8 years ago |

Keywords: [sec-moderate](/buglist.cgi?keywords=sec-moderate&resolution=---)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1309310#a512731_280903)• 8 years ago |

Flags: sec-bounty?

|  | [Boris Zbarsky [:bzbarsky]](/user_profile?user_id=20209) |  |
| --- | --- | --- |
| [Comment 11](/show_bug.cgi?id=1309310#c11)• 8 years ago |
|  | |

Sorry for the lag here....
> I don't know for sure what would be the simplest way of adapting CAPS so this is no longer possible
Probably creating a new protocol handler flag and skipping the "allow same-protocol links" if it's set is best. We \_could\_ just hard-code "about:", but I think the flexibility of the protocol flag is much more extensible...Flags: needinfo?(bzbarsky)

|  | [Jerri Rice (rehash pending)](/user_profile?user_id=577580) |  |
| --- | --- | --- |
| [Comment 12](/show_bug.cgi?id=1309310#c12)• 8 years ago |
|  | |

(In reply to Boris Zbarsky [:bz] (still a bit busy) from [comment #11](/show_bug.cgi?id=1309310#c11 "VERIFIED FIXED - Unlinkable content-privileged about: pages can link to chrome-privileged about: pages"))
> Sorry for the lag here....
>
> > I don't know for sure what would be the simplest way of adapting CAPS so this is no longer possible
>
> Probably creating a new protocol handler flag and skipping the "allow
> same-protocol links" if it's set is best. We \_could\_ just hard-code
> "about:", but I think the flexibility of the protocol flag is much more
> extensible...
I \*may\* try to implement this a little later today. My net access is limited and if I do get something together I'll dig up try server access and push the patch. Anyone else who may pick this up please do because I have very limited net access as of late and it's hard for me to get sufficient time to focus on work.

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1309310#a1986658_75935)• 8 years ago |

[status-firefox49](/buglist.cgi?f1=cf_status_firefox49&o1=isnotempty):
--- → [wontfix](/buglist.cgi?f1=cf_status_firefox49&o1=equals&v1=wontfix)
[status-firefox50](/buglist.cgi?f1=cf_status_firefox50&o1=isnotempty):
--- → [wontfix](/buglist.cgi?f1=cf_status_firefox50&o1=equals&v1=wontfix)
[status-firefox51](/buglist.cgi?f1=cf_status_firefox51&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox51&o1=equals&v1=affected)Version: Trunk → 48 Branch

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1309310#a2346936_280903)• 8 years ago |

Flags: sec-bounty? → sec-bounty+

|  | [:Gijs (he/him)](/user_profile?user_id=159069)  Assignee |  |
| --- | --- | --- |
| [Comment 13](/show_bug.cgi?id=1309310#c13)• 8 years ago |
|  | |

Attached patch

[Patch v0.1](attachment.cgi?id=8809091&action=diff) (obsolete)
— [Details](attachment.cgi?id=8809091&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1309310&attachment=8809091)

So something like this? Tested by adding a link to about:preferences on about:mozilla, clicking that gets me a security error.
I haven't pushed to try yet... not sure if that's worth it or if I should just land and hope things don't break, given that it's a sec bug. Although I realize this is a sec-moderate, I'm worried that we don't know the exact impact of this bug, and the impact of disclosure-by-patch. But maybe I'm overly paranoid?Flags: needinfo?(bzbarsky)

|  | [Boris Zbarsky [:bzbarsky]](/user_profile?user_id=20209) |  |
| --- | --- | --- |
| [Comment 14](/show_bug.cgi?id=1309310#c14)• 8 years ago |
|  | |

Comment on [attachment 8809091](/attachment.cgi?id=8809091 "Patch v0.1") [[details]](/attachment.cgi?id=8809091&action=edit "Patch v0.1") [[diff]](/attachment.cgi?id=8809091&action=diff "Patch v0.1") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1309310&attachment=8809091)
Patch v0.1
One upshot here is that a not-publicly-linkable but not system privileged about: URI will no longer be able to link to \_itself\_, right? This might in fact cause some breakage. Maybe we should allow the link even if denySameSchemeLinks if currentURI and currentOtherURI are equalsIgnoringRef or something?
Past that, I'm not sure about try vs just landing; that's something worth checking with the sec-approval folks.Flags: needinfo?(bzbarsky)

|  | [:Gijs (he/him)](/user_profile?user_id=159069)  Assignee |  |
| --- | --- | --- |
| [Comment 15](/show_bug.cgi?id=1309310#c15)• 8 years ago |
|  | |

(In reply to Boris Zbarsky [:bz] (still a bit busy) from [comment #14](/show_bug.cgi?id=1309310#c14 "VERIFIED FIXED - Unlinkable content-privileged about: pages can link to chrome-privileged about: pages"))
> Comment on [attachment 8809091](/attachment.cgi?id=8809091 "Patch v0.1") [[details]](/attachment.cgi?id=8809091&action=edit "Patch v0.1") [[diff]](/attachment.cgi?id=8809091&action=diff "Patch v0.1") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1309310&attachment=8809091)
> Patch v0.1
>
> One upshot here is that a not-publicly-linkable but not system privileged
> about: URI will no longer be able to link to \_itself\_, right? This might in
> fact cause some breakage.
Itself, yes, I suppose so. I'm not sure any pages exists that actually need to be able to link to themselves... We could also potentially make only the system-privileged be non-same-scheme-linkable by modifying the flags per URI, which would avoid having to put this logic into caps. That said, that would then allow e.g. about:mozilla and about:reader to link to each other (neither is outside-linkable nor privileged). That might be OK given that neither is privileged - how would you feel about that?
> Maybe we should allow the link even if
> denySameSchemeLinks if currentURI and currentOtherURI are equalsIgnoringRef
> or something?
Indeed, that would also make sense to me.
> Past that, I'm not sure about try vs just landing; that's something worth
> checking with the sec-approval folks.
Dan, thoughts on this?Flags: needinfo?(dveditz)Flags: needinfo?(bzbarsky)

|  | [Boris Zbarsky [:bzbarsky]](/user_profile?user_id=20209) |  |
| --- | --- | --- |
| [Comment 16](/show_bug.cgi?id=1309310#c16)• 8 years ago |
|  | |

> I'm not sure any pages exists that actually need to be able to link to themselves
Anything that uses self-embedded SVG or CSS element() or whatnot? (Maybe there isn't, of course.)
> That might be OK given that neither is privileged - how would you feel about that?
It doesn't seem completely unreasonable, but I think the equalsIgnoringRef suggestion allows fewer things and should be enough in practical terms.Flags: needinfo?(bzbarsky)

|  | [:Gijs (he/him)](/user_profile?user_id=159069)  Assignee |  |
| --- | --- | --- |
| [Comment 17](/show_bug.cgi?id=1309310#c17)• 8 years ago |
|  | |

Attached patch

[Patch v0.2](attachment.cgi?id=8809380&action=diff)
— [Details](attachment.cgi?id=8809380&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1309310&attachment=8809380)

Like this? This seems to wfm (tested by opening about:mozilla, and in the web console running location.href = 'about:mozilla', which failed on the previous patch, and succeeds with these changes).
[Attachment #8809091](/attachment.cgi?id=8809091&action=edit "Patch v0.1") -
Attachment is obsolete: trueFlags: needinfo?(bzbarsky)

|  | [:Gijs (he/him)](/user_profile?user_id=159069)  Assignee |  |
| --- | --- | --- |
| [Comment 18](/show_bug.cgi?id=1309310#c18)• 8 years ago |
|  | |

(In reply to Boris Zbarsky [:bz] (still a bit busy) from [comment #16](/show_bug.cgi?id=1309310#c16 "VERIFIED FIXED - Unlinkable content-privileged about: pages can link to chrome-privileged about: pages"))
> > I'm not sure any pages exists that actually need to be able to link to themselves
>
> Anything that uses self-embedded SVG or CSS element() or whatnot? (Maybe
> there isn't, of course.)
I don't think there is, but you're right that having that break would be confusing.

|  | [Boris Zbarsky [:bzbarsky]](/user_profile?user_id=20209) |  |
| --- | --- | --- |
| [Comment 19](/show_bug.cgi?id=1309310#c19)• 8 years ago |
|  | |

Comment on [attachment 8809380](/attachment.cgi?id=8809380 "Patch v0.2") [[details]](/attachment.cgi?id=8809380&action=edit "Patch v0.2") [[diff]](/attachment.cgi?id=8809380&action=diff "Patch v0.2") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1309310&attachment=8809380)
Patch v0.2
r=meFlags: needinfo?(bzbarsky)
[Attachment #8809380](/attachment.cgi?id=8809380&action=edit "Patch v0.2") -
Flags: review+

|  | [Wes Kocher (:KWierso) (Not reading bugmail; email directly if needed)](/user_profile?user_id=308534) |  |
| --- | --- | --- |
| [Comment 20](/show_bug.cgi?id=1309310#c20)• 8 years ago |
|  | |

<https://hg.mozilla.org/mozilla-central/rev/fb5ae665310e>
<https://hg.mozilla.org/mozilla-central/rev/385cf64debf7>Status: NEW → RESOLVEDClosed: 8 years ago
[status-firefox52](/buglist.cgi?f1=cf_status_firefox52&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox52&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox52&o1=equals&v1=fixed)Resolution: --- → FIXED

|  | [:Gijs (he/him)](/user_profile?user_id=159069)  Assignee |  |
| --- | --- | --- |
| [Comment 21](/show_bug.cgi?id=1309310#c21)• 8 years ago |
|  | |

I ended up just landing this. Ni me to get this uplifted into 51 if there's no reports of terrible breakage in the next week.Assignee: nobody → gijskruitbosch+bugsFlags: needinfo?(dveditz) → needinfo?(gijskruitbosch+bugs)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1309310#a3069325_1689)• 8 years ago |

Group: dom-core-security → core-security-release

|  | [Honza Bambas (:mayhemer)](/user_profile?user_id=269762) |  |
| --- | --- | --- |
| [Comment 22](/show_bug.cgi?id=1309310#c22)• 8 years ago |
|  | |

Causes [bug 1318664](/show_bug.cgi?id=1318664 "RESOLVED FIXED - Security Error: Content at about:cache may not load or link to about:cache?storage=disk&context=").

|  | [Honza Bambas (:mayhemer)](/user_profile?user_id=269762) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1309310#a3289193_269762)• 8 years ago |

Depends on: [1318664](/show_bug.cgi?id=1318664 "RESOLVED FIXED - Security Error: Content at about:cache may not load or link to about:cache?storage=disk&context=")

|  | [:Gijs (he/him)](/user_profile?user_id=159069)  Assignee |  |
| --- | --- | --- |
| [Comment 23](/show_bug.cgi?id=1309310#c23)• 8 years ago |
|  | |

(In reply to :Gijs Kruitbosch from [comment #21](/show_bug.cgi?id=1309310#c21 "VERIFIED FIXED - Unlinkable content-privileged about: pages can link to chrome-privileged about: pages"))
> I ended up just landing this. Ni me to get this uplifted into 51 if there's
> no reports of terrible breakage in the next week.
Not doing this until [bug 1318664](/show_bug.cgi?id=1318664 "RESOLVED FIXED - Security Error: Content at about:cache may not load or link to about:cache?storage=disk&context=") is fixed.Flags: needinfo?(gijskruitbosch+bugs)

|  | [:Gijs (he/him)](/user_profile?user_id=159069)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1309310#a4466237_159069)• 8 years ago |

Flags: needinfo?(gijskruitbosch+bugs)

|  | [:Gijs (he/him)](/user_profile?user_id=159069)  Assignee |  |
| --- | --- | --- |
| [Comment 24](/show_bug.cgi?id=1309310#c24)• 8 years ago |
|  | |

Attached patch

[Patch for beta](attachment.cgi?id=8818531&action=diff)
— [Details](attachment.cgi?id=8818531&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1309310&attachment=8818531)

Approval Request Comment
[Feature/Bug causing the regression]: [bug 1253673](/show_bug.cgi?id=1253673 "RESOLVED FIXED - bypass FireFox Secure Connection Failed prompt to whitelist any site (but doesn't work)")
[User impact if declined]: a failure in one of our defense-in-depth security mechanisms.
[Is this code covered by automated tests?]: yes
[Has the fix been verified in Nightly?]: by automated tests, yes, but not manually
[Needs manual test from QE? If yes, steps to reproduce]:
Maybe. Here's a quick in-product test that I just came up with (which verifies this is indeed fixed on aurora, and still busted on beta):
1. open about:mozilla
2. open the developer tools console (ctrl-shift-k on Windows/Linux)
3. paste in:
i = document.createElement("iframe"); i.src = "about:preferences"; document.body.appendChild(i);
4. execute that code
Expected: the iframe (rectangle) that gets added at the bottom of the page is empty-ish
Actual: the iframe loads the Firefox preferences page.
[List of other uplifts needed for the feature/fix]: this patch includes the fix for [bug 1318664](/show_bug.cgi?id=1318664 "RESOLVED FIXED - Security Error: Content at about:cache may not load or link to about:cache?storage=disk&context="), which was a regression caused by this patch. (Note for people using this: this is a patch file against beta containing 2 separate csets that was generated by using 'hg export' with multiple revs. "hg import" should be able to cope.)
[Is the change risky?]: not very.
[Why is the change risky/not risky?]: there are pretty thorough tests, we found and fixed the 1 regression this caused (and expanded the test coverage to ensure we don't break that code again) and no other regressions have been reported (that I'm aware of) in the 4 weeks that this has now been present on trunk + aurora.
[String changes made/needed]: nopeFlags: needinfo?(gijskruitbosch+bugs)
[Attachment #8818531](/attachment.cgi?id=8818531&action=edit "Patch for beta") -
Flags: review+
[Attachment #8818531](/attachment.cgi?id=8818531&action=edit "Patch for beta") -
Flags: approval-mozilla-beta?

|  | [Gerry Chang [:gchang]](/user_profile?user_id=506302) |  |
| --- | --- | --- |
| [Comment 25](/show_bug.cgi?id=1309310#c25)• 8 years ago |
|  | |

Comment on [attachment 8818531](/attachment.cgi?id=8818531 "Patch for beta") [[details]](/attachment.cgi?id=8818531&action=edit "Patch for beta") [[diff]](/attachment.cgi?id=8818531&action=diff "Patch for beta") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1309310&attachment=8818531)
Patch for beta
Fix a sec-moderate. Beta51+. Should be in 51 beta 8.
[Attachment #8818531](/attachment.cgi?id=8818531&action=edit "Patch for beta") -
Flags: approval-mozilla-beta? → approval-mozilla-beta+

|  | [Gerry Chang [:gchang]](/user_profile?user_id=506302) |  |
| --- | --- | --- |
| [Comment 26](/show_bug.cgi?id=1309310#c26)• 8 years ago |
|  | |

Hi Florin,
Can you help find someone in your team to verify this? Thanks.Flags: needinfo?(florin.mezei)

|  | [Carsten Book [:Tomcat]](/user_profile?user_id=277293) |  |
| --- | --- | --- |
| [Comment 27](/show_bug.cgi?id=1309310#c27)• 8 years ago |
|  | |

<https://hg.mozilla.org/releases/mozilla-beta/rev/61d9cd6239b2a1eb6ec3fd16f0a4ffe57c6ecf73>
[status-firefox51](/buglist.cgi?f1=cf_status_firefox51&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox51&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox51&o1=equals&v1=fixed)

|  | [[SV Manager] Florin Mezei, QA (:FlorinMezei)](/user_profile?user_id=500713) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1309310#a5691982_500713)• 8 years ago |

Flags: needinfo?(florin.mezei)

|  | [Alexandru Simonca [:asimonca], Release Desktop QA](/user_profile?user_id=569824) |  |
| --- | --- | --- |
| [Comment 28](/show_bug.cgi?id=1309310#c28)• 8 years ago |
|  | |

This is Verified Fixed using the str from [comment #24](/show_bug.cgi?id=1309310#c24 "VERIFIED FIXED - Unlinkable content-privileged about: pages can link to chrome-privileged about: pages") in Firefox Beta 51.0b8 and Firefox Aurora 52.0a2 (id: 20161216004017) on a Windows 10 x64 machine.Status: RESOLVED → VERIFIED
[status-firefox51](/buglist.cgi?f1=cf_status_firefox51&o1=isnotempty):
[fixed](/buglist.cgi?f1=cf_status_firefox51&o1=equals&v1=fixed) → [verified](/buglist.cgi?f1=cf_status_firefox51&o1=equals&v1=verified)
[status-firefox52](/buglist.cgi?f1=cf_status_firefox52&o1=isnotempty):
[fixed](/buglist.cgi?f1=cf_status_firefox52&o1=equals&v1=fixed) → [verified](/buglist.cgi?f1=cf_status_firefox52&o1=equals&v1=verified)

|  | [:Gijs (he/him)](/user_profile?user_id=159069)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1309310#a7660125_159069)• 8 years ago |

Depends on: [1329457](/show_bug.cgi?id=1329457 "VERIFIED FIXED - Unable to add about:* pages as a about:newtab tile")

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1309310#a8486646_280903)• 8 years ago |

Whiteboard: [adv-main51+]

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1309310#a8493281_280903)• 8 years ago |

Alias: CVE-2017-5391

|  | [:Gijs (he/him)](/user_profile?user_id=159069)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1309310#a9662331_159069)• 8 years ago |

Depends on: [1335272](/show_bug.cgi?id=1335272 "RESOLVED FIXED - Security Error: Content at about:cache?storage=disk&context= may not load or link to about:cache-entry?storage=disk&context=&eid=&uri=...")

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1309310#a19012382_1689)• 8 years ago |

[status-firefox-esr45](/buglist.cgi?f1=cf_status_firefox_esr45&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_firefox_esr45&o1=equals&v1=unaffected)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1309310#a27742867_1689)• 7 years ago |

Group: core-security-release

|  | [David Lawrence [:dkl]](/user_profile?user_id=5898) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1309310#a240876381_5898)• 8 months ago |

Keywords: [reporter-external](/buglist.cgi?keywords=reporter-external&resolution=---)
You need to [log in](/show_bug.cgi?id=1309310&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top ↑

## Attachment

Hide Details

### General

Creator:  [Jerri Rice (rehash pending)](/user_profile?user_id=577580)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review



=== Content from wiki.mozilla.org_3659d679_20250126_100025.html ===


# BMO/UserGuide/BugFields

From MozillaWiki
< [BMO](/BMO "BMO")‎ | [UserGuide](/BMO/UserGuide "BMO/UserGuide")

[Jump to navigation](#mw-head)
[Jump to search](#searchInput)
## Bugzilla Field Descriptions

Alias
A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla.Assignee
This is the person in charge of resolving the bug. Every time this field changes, the status changes to NEW to make it easy to see which new bugs have appeared on a person's list.Blocks
This bug must be resolved before the bugs listed in this field can be resolved.Bug ID
The numeric id of a bug, unique within this entire installation of Bugzilla.CC
Users who may not have a direct role to play on this bug, but who are interested in its progress.Changed
When this bug was last updated.Classification
Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorization.Comment
Bugs have comments added to them by Bugzilla users. You can search for some text in those comments.Comment Tag
Comments can have arbitrary tags added to them to help with filtering as well as mark comments as spam or abusive.Component
Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list.Creation date
When the bug was filed.Depends on
The bugs listed here must be resolved before this bug can be resolved.Duplicates
List of bugs that have been marked a duplicate of the bug currently being viewed.Keywords
Keywords are a controlled vocabulary for characterizing bugs across Products and Components. Examples of this field are `regression`, `sec-high`, and `topcrash`. Bugzilla administrators manage [the list of keywords](https://bugzilla.mozilla.org/describekeywords.cgi). If you believe you need a new keyword, [please contact the administrators to discuss](https://bugzilla.mozilla.org/enter_bug.cgi?product=bugzilla.mozilla.org&component=Administration).Mentors
Mentors are users who have offered to help the bug owner with such tasks as setting up a development environment, finding relevant information to fixing the bug, how to submit a patch for review, and finally how to get the fix committed.Needinfo
More information has been requested from specific individuals, or anyone, to move the bug forward to completion.OS
This is the operating system against which the bug was reported.Platform
This is the hardware platform against which the bug was reported (ARM, ARM64, x86, x86\_64, etc).Priority

| Priority | Description |
| --- | --- |
| **--** | No decision |
| **P1** | Fix in the current release cycle |
| **P2** | Fix in the next release cycle or the following (nightly + 1 or nightly + 2) |
| **P3** | Backlog |
| **P4** | Do not use. This priority is for the Web Platform Test bot. |
| **P5** | Will not fix, but will accept a patch |

This field describes the importance and order in which a bug should be fixed compared to other bugs. This field is utilized by the programmers/engineers/release managers/managers to prioritize the work to be done. See the Firefox [triage documentation](https://firefox-source-docs.mozilla.org/bug-mgmt/policies/triage-bugzilla.html) and [priority definitions](https://firefox-source-docs.mozilla.org/bug-mgmt/guides/priority.html), or for the main Bugzilla project, [Bugzilla:Priority\_System](/Bugzilla%3APriority_System "Bugzilla:Priority System").Product
Bugs are categorised into Products and Components. Select a Classification to narrow down this list.QA Contact
The person responsible for confirming this bug if it is unconfirmed, and for verifying the fix once the bug has been resolved.Rank
Used by some groups to provide finer-grained ordering for working on bugs than afforded by the Priority field. Use of this field is restricted to the `rank-setters` group.Regressed by
This bug has been introduced by the bugs listed here.Regressions
This bug has introduced the bugs listed here.Reporter
The person who filed this bug.See Also
This allows you to refer to bugs in other bug tracker installations. You can enter a URL to a bug in the 'Add Bug URLs' field to note that that bug is related to this one. You can enter multiple URLs at once by separating them with a comma. You should normally use this field to refer to bugs in other bug tracker installations, or bugs which are related to, but not known to be duplicates of the bug. Bugs which are regressions should be listed in the Regressed by field (above)Severity
This field describes the impact of a bug. This field is utilized by the programmers/engineers/release managers/managers to determine the severity of issues and used as input for the priority of the bug. It should not be set by people filing bugs. See the Firefox [triage documentation](https://firefox-source-docs.mozilla.org/bug-mgmt/policies/triage-bugzilla.html) and [severity documentation](https://firefox-source-docs.mozilla.org/bug-mgmt/guides/severity.html).

| Severity | Description |
| --- | --- |
| **--** | Default value for new bugs; bug triagers for components (ie engineers and other core project folks) are expected to update the bug's severity from this value. To avoid them missing new bugs for triage, do not alter this default when filing bugs. |
| **S1** | (Catastrophic) Blocks development/testing, may impact more than 25% of users, causes data loss, likely dot release driver, and no workaround available |
| **S2** | (Serious) Major functionality/product severely impaired or a high impact issue and a satisfactory workaround does not exist |
| **S3** | (Normal) Blocks non-critical functionality or a work around exists |
| **S4** | (Small/Trivial) minor significance, cosmetic issues, low or no impact to users |
| **N/A** | (Not Applicable) The above definitions do not apply to this bug; this value is reserved for bugs of type Task or Enhancement |

Summary
The bug summary is a short sentence which succinctly describes what the bug is about.Target Milestone
For Firefox-related bugs, when a change set (patch) lands in Mozilla-Central, the [sheriffs](/Sheriffing "Sheriffing") will set this field to the corresponding release value for the current Nightly.
Release status and tracking flags are used to mark intentions for when a fix or other patch should land.
If you need to track a bug against a set of milestones other than upcoming versions of Firefox, please tell the Bugzilla team, you may want a custom status flag.Triage Owner
User that is responsible [for triaging bugs in a specific component](https://firefox-source-docs.mozilla.org/bug-mgmt/policies/triage-bugzilla.html).Type
This field describes the [type of a bug](https://firefox-source-docs.mozilla.org/bug-mgmt/guides/bug-types.html).

| Type | Description |
| --- | --- |
| **defect** | regression, crash, hang, security vulnerability and any other general issue. |
| **enhancement** | new feature, improvement in UI, performance, etc. and any other request for user-facing changes and enhancements in the product; not engineering changes |
| **task** | refactoring, removal, replacement, enabling or disabling of functionality and any other engineering task |

URL
Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen.Version
The version field defines the version of the software the bug was found in.Votes
Some bugs can be voted for, and you can limit your search to bugs with more than a certain number of votes. Votes are not used by Mozilla developers to set priorities.Whiteboard
Each bug has a free-form single line text entry box for adding tags and status information

Retrieved from "<https://wiki.mozilla.org/index.php?title=BMO/UserGuide/BugFields&oldid=1250790>"

## Navigation menu

### Personal tools

* [Log in](/index.php?title=Special:UserLogin&returnto=BMO%2FUserGuide%2FBugFields "You are encouraged to log in; however, it is not mandatory [o]")
* [Request account](/Special%3ARequestAccount "You are encouraged to create an account and log in; however, it is not mandatory")

### Namespaces

* [Page](/BMO/UserGuide/BugFields "View the content page [c]")
* [Discussion](/index.php?title=Talk:BMO/UserGuide/BugFields&action=edit&redlink=1 "Discussion about the content page (page does not exist) [t]")

English

### Views

* [Read](/BMO/UserGuide/BugFields)
* [View source](/index.php?title=BMO/UserGuide/BugFields&action=edit "This page is protected.
  You can view its source [e]")
* [View history](/index.php?title=BMO/UserGuide/BugFields&action=history "Past revisions of this page [h]")

More

### Search

### Navigation

* [Main page](/Main_Page "Visit the main page [z]")
* [Product releases](/Releases)
* [New pages](/Special%3ANewPages)
* [Recent changes](/Special%3ARecentChanges "A list of recent changes in the wiki [r]")
* [Recent uploads](/Special%3ANewFiles)
* [Random page](/Special%3ARandom "Load a random page [x]")
* [Help](/MozillaWiki%3AHelp "The place to find out")

### How to Contribute

* [All-hands meeting](/WeeklyUpdates)
* [Other meetings](/Community_Calendar)
* [Contribute to Mozilla](/Contribute)
* [Community Portal](//community.mozilla.org)
* [Community Participation Guidelines](//www.mozilla.org/en-US/about/governance/policies/participation/)

### MozillaWiki

* [About](/MozillaWiki%3AAbout)
* [Team](/MozillaWiki%3ATeam)
* [Policies](/MozillaWiki%3APolicies)
* [Report a wiki bug](//bugzilla.mozilla.org/enter_bug.cgi?product=Websites&component=wiki.mozilla.org)

### Around Mozilla

* [Mozilla Support](//support.mozilla.org/)
* [Mozilla Developer Network](//developer.mozilla.org/)
* [Planet Mozilla](//planet.mozilla.org/)
* [Mozilla Blog](//blog.mozilla.org/)
* [Research](//www.mozilla.org/research/)

### Tools

* [What links here](/Special%3AWhatLinksHere/BMO/UserGuide/BugFields "A list of all wiki pages that link here [j]")
* [Related changes](/Special%3ARecentChangesLinked/BMO/UserGuide/BugFields "Recent changes in pages linked from this page [k]")
* [Special pages](/Special%3ASpecialPages "A list of all special pages [q]")
* Printable version
* [Permanent link](/index.php?title=BMO/UserGuide/BugFields&oldid=1250790 "Permanent link to this revision of this page")
* [Page information](/index.php?title=BMO/UserGuide/BugFields&action=info "More information about this page")

* This page was last edited on 14 May 2024, at 14:22.

* [Privacy policy](/MozillaWiki%3APrivacy_policy)
* [About MozillaWiki](/MozillaWiki%3AAbout)
* [Mobile view](https://wiki.mozilla.org/index.php?title=BMO/UserGuide/BugFields&mobileaction=toggle_view_mobile)

* [![Powered by MediaWiki](/resources/assets/poweredby_mediawiki_88x31.png)](https://www.mediawiki.org/)



=== Content from wiki.mozilla.org_73f8d6fa_20250126_100025.html ===


# BMO/UserGuide/BugFields

From MozillaWiki
< [BMO](/BMO "BMO")‎ | [UserGuide](/BMO/UserGuide "BMO/UserGuide")

[Jump to navigation](#mw-head)
[Jump to search](#searchInput)
## Bugzilla Field Descriptions

Alias
A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla.Assignee
This is the person in charge of resolving the bug. Every time this field changes, the status changes to NEW to make it easy to see which new bugs have appeared on a person's list.Blocks
This bug must be resolved before the bugs listed in this field can be resolved.Bug ID
The numeric id of a bug, unique within this entire installation of Bugzilla.CC
Users who may not have a direct role to play on this bug, but who are interested in its progress.Changed
When this bug was last updated.Classification
Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorization.Comment
Bugs have comments added to them by Bugzilla users. You can search for some text in those comments.Comment Tag
Comments can have arbitrary tags added to them to help with filtering as well as mark comments as spam or abusive.Component
Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list.Creation date
When the bug was filed.Depends on
The bugs listed here must be resolved before this bug can be resolved.Duplicates
List of bugs that have been marked a duplicate of the bug currently being viewed.Keywords
Keywords are a controlled vocabulary for characterizing bugs across Products and Components. Examples of this field are `regression`, `sec-high`, and `topcrash`. Bugzilla administrators manage [the list of keywords](https://bugzilla.mozilla.org/describekeywords.cgi). If you believe you need a new keyword, [please contact the administrators to discuss](https://bugzilla.mozilla.org/enter_bug.cgi?product=bugzilla.mozilla.org&component=Administration).Mentors
Mentors are users who have offered to help the bug owner with such tasks as setting up a development environment, finding relevant information to fixing the bug, how to submit a patch for review, and finally how to get the fix committed.Needinfo
More information has been requested from specific individuals, or anyone, to move the bug forward to completion.OS
This is the operating system against which the bug was reported.Platform
This is the hardware platform against which the bug was reported (ARM, ARM64, x86, x86\_64, etc).Priority

| Priority | Description |
| --- | --- |
| **--** | No decision |
| **P1** | Fix in the current release cycle |
| **P2** | Fix in the next release cycle or the following (nightly + 1 or nightly + 2) |
| **P3** | Backlog |
| **P4** | Do not use. This priority is for the Web Platform Test bot. |
| **P5** | Will not fix, but will accept a patch |

This field describes the importance and order in which a bug should be fixed compared to other bugs. This field is utilized by the programmers/engineers/release managers/managers to prioritize the work to be done. See the Firefox [triage documentation](https://firefox-source-docs.mozilla.org/bug-mgmt/policies/triage-bugzilla.html) and [priority definitions](https://firefox-source-docs.mozilla.org/bug-mgmt/guides/priority.html), or for the main Bugzilla project, [Bugzilla:Priority\_System](/Bugzilla%3APriority_System "Bugzilla:Priority System").Product
Bugs are categorised into Products and Components. Select a Classification to narrow down this list.QA Contact
The person responsible for confirming this bug if it is unconfirmed, and for verifying the fix once the bug has been resolved.Rank
Used by some groups to provide finer-grained ordering for working on bugs than afforded by the Priority field. Use of this field is restricted to the `rank-setters` group.Regressed by
This bug has been introduced by the bugs listed here.Regressions
This bug has introduced the bugs listed here.Reporter
The person who filed this bug.See Also
This allows you to refer to bugs in other bug tracker installations. You can enter a URL to a bug in the 'Add Bug URLs' field to note that that bug is related to this one. You can enter multiple URLs at once by separating them with a comma. You should normally use this field to refer to bugs in other bug tracker installations, or bugs which are related to, but not known to be duplicates of the bug. Bugs which are regressions should be listed in the Regressed by field (above)Severity
This field describes the impact of a bug. This field is utilized by the programmers/engineers/release managers/managers to determine the severity of issues and used as input for the priority of the bug. It should not be set by people filing bugs. See the Firefox [triage documentation](https://firefox-source-docs.mozilla.org/bug-mgmt/policies/triage-bugzilla.html) and [severity documentation](https://firefox-source-docs.mozilla.org/bug-mgmt/guides/severity.html).

| Severity | Description |
| --- | --- |
| **--** | Default value for new bugs; bug triagers for components (ie engineers and other core project folks) are expected to update the bug's severity from this value. To avoid them missing new bugs for triage, do not alter this default when filing bugs. |
| **S1** | (Catastrophic) Blocks development/testing, may impact more than 25% of users, causes data loss, likely dot release driver, and no workaround available |
| **S2** | (Serious) Major functionality/product severely impaired or a high impact issue and a satisfactory workaround does not exist |
| **S3** | (Normal) Blocks non-critical functionality or a work around exists |
| **S4** | (Small/Trivial) minor significance, cosmetic issues, low or no impact to users |
| **N/A** | (Not Applicable) The above definitions do not apply to this bug; this value is reserved for bugs of type Task or Enhancement |

Summary
The bug summary is a short sentence which succinctly describes what the bug is about.Target Milestone
For Firefox-related bugs, when a change set (patch) lands in Mozilla-Central, the [sheriffs](/Sheriffing "Sheriffing") will set this field to the corresponding release value for the current Nightly.
Release status and tracking flags are used to mark intentions for when a fix or other patch should land.
If you need to track a bug against a set of milestones other than upcoming versions of Firefox, please tell the Bugzilla team, you may want a custom status flag.Triage Owner
User that is responsible [for triaging bugs in a specific component](https://firefox-source-docs.mozilla.org/bug-mgmt/policies/triage-bugzilla.html).Type
This field describes the [type of a bug](https://firefox-source-docs.mozilla.org/bug-mgmt/guides/bug-types.html).

| Type | Description |
| --- | --- |
| **defect** | regression, crash, hang, security vulnerability and any other general issue. |
| **enhancement** | new feature, improvement in UI, performance, etc. and any other request for user-facing changes and enhancements in the product; not engineering changes |
| **task** | refactoring, removal, replacement, enabling or disabling of functionality and any other engineering task |

URL
Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen.Version
The version field defines the version of the software the bug was found in.Votes
Some bugs can be voted for, and you can limit your search to bugs with more than a certain number of votes. Votes are not used by Mozilla developers to set priorities.Whiteboard
Each bug has a free-form single line text entry box for adding tags and status information

Retrieved from "<https://wiki.mozilla.org/index.php?title=BMO/UserGuide/BugFields&oldid=1250790>"

## Navigation menu

### Personal tools

* [Log in](/index.php?title=Special:UserLogin&returnto=BMO%2FUserGuide%2FBugFields "You are encouraged to log in; however, it is not mandatory [o]")
* [Request account](/Special%3ARequestAccount "You are encouraged to create an account and log in; however, it is not mandatory")

### Namespaces

* [Page](/BMO/UserGuide/BugFields "View the content page [c]")
* [Discussion](/index.php?title=Talk:BMO/UserGuide/BugFields&action=edit&redlink=1 "Discussion about the content page (page does not exist) [t]")

English

### Views

* [Read](/BMO/UserGuide/BugFields)
* [View source](/index.php?title=BMO/UserGuide/BugFields&action=edit "This page is protected.
  You can view its source [e]")
* [View history](/index.php?title=BMO/UserGuide/BugFields&action=history "Past revisions of this page [h]")

More

### Search

### Navigation

* [Main page](/Main_Page "Visit the main page [z]")
* [Product releases](/Releases)
* [New pages](/Special%3ANewPages)
* [Recent changes](/Special%3ARecentChanges "A list of recent changes in the wiki [r]")
* [Recent uploads](/Special%3ANewFiles)
* [Random page](/Special%3ARandom "Load a random page [x]")
* [Help](/MozillaWiki%3AHelp "The place to find out")

### How to Contribute

* [All-hands meeting](/WeeklyUpdates)
* [Other meetings](/Community_Calendar)
* [Contribute to Mozilla](/Contribute)
* [Community Portal](//community.mozilla.org)
* [Community Participation Guidelines](//www.mozilla.org/en-US/about/governance/policies/participation/)

### MozillaWiki

* [About](/MozillaWiki%3AAbout)
* [Team](/MozillaWiki%3ATeam)
* [Policies](/MozillaWiki%3APolicies)
* [Report a wiki bug](//bugzilla.mozilla.org/enter_bug.cgi?product=Websites&component=wiki.mozilla.org)

### Around Mozilla

* [Mozilla Support](//support.mozilla.org/)
* [Mozilla Developer Network](//developer.mozilla.org/)
* [Planet Mozilla](//planet.mozilla.org/)
* [Mozilla Blog](//blog.mozilla.org/)
* [Research](//www.mozilla.org/research/)

### Tools

* [What links here](/Special%3AWhatLinksHere/BMO/UserGuide/BugFields "A list of all wiki pages that link here [j]")
* [Related changes](/Special%3ARecentChangesLinked/BMO/UserGuide/BugFields "Recent changes in pages linked from this page [k]")
* [Special pages](/Special%3ASpecialPages "A list of all special pages [q]")
* Printable version
* [Permanent link](/index.php?title=BMO/UserGuide/BugFields&oldid=1250790 "Permanent link to this revision of this page")
* [Page information](/index.php?title=BMO/UserGuide/BugFields&action=info "More information about this page")

* This page was last edited on 14 May 2024, at 14:22.

* [Privacy policy](/MozillaWiki%3APrivacy_policy)
* [About MozillaWiki](/MozillaWiki%3AAbout)
* [Mobile view](https://wiki.mozilla.org/index.php?title=BMO/UserGuide/BugFields&mobileaction=toggle_view_mobile)

* [![Powered by MediaWiki](/resources/assets/poweredby_mediawiki_88x31.png)](https://www.mediawiki.org/)



=== Content from bugzilla.mozilla.org_10819095_20250125_154335.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summary▾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View ▾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/1293709)
* [XML](/show_bug.cgi?ctype=xml&id=1293709)

Closed
[Bug 1293709](/show_bug.cgi?id=1293709)
(CVE-2017-5392)

Opened 8 years ago
Closed 8 years ago

# nsWindow::LayerViewSupport's weak reference used on multiple threads

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

nsWindow::LayerViewSupport's weak reference used on multiple threads

## Categories

### (Core Graveyard :: Widget: Android, defect, P1)

[Product:](/describecomponents.cgi?product=Core%20Graveyard)

Core Graveyard
▾

Core Graveyard
Old, retired Core components
[See Open Bugs in This Product](/buglist.cgi?product=Core%20Graveyard&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Core%20Graveyard)
Watch This Product

[Component:](/describecomponents.cgi?product=Core%20Graveyard&component=Widget%3A%20Android#Widget%3A%20Android)

Widget: Android
▾

Core Graveyard :: Widget: Android
Mapping of cross platform widget interfaces to Android platform APIs.
[See Open Bugs in This Component](/buglist.cgi?product=Core%20Graveyard&component=Widget%3A%20Android&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Core%20Graveyard&component=Widget%3A%20Android&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Core%20Graveyard&component=Widget%3A%20Android)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

Trunk

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

All

Android

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

P1

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

critical

## Tracking

### (fennec51+, firefox51 fixed)

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

mozilla51

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| Webcompat Priority | --- |
| --- | --- |
| a11y-review | --- |
| Accessibility Severity | --- |
| Webcompat Score | --- |
| Performance Impact | --- |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| fennec | [51+](/buglist.cgi?f1=cf_blocking_fennec&o1=equals&v1=51%2B) | --- |
| firefox51 | --- | [fixed](/buglist.cgi?f1=cf_status_firefox51&o1=equals&v1=fixed) |

|  | Tracking | Status |
| --- | --- | --- |
| fennec | 51+ |  |
| firefox51 |  | fixed |

## People

### (Reporter: mayhemer, Assigned: jchen)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/bc062869d013a3c67a222cdf27b430bc?d=mm&size=40)  [jchen](/user_profile?user_id=281508)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](extensions/Gravatar/web/default.jpg)  [mayhemer](/user_profile?user_id=269762)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

---

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

9 people

## References

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

---

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

[956338](/show_bug.cgi?id=956338 "RESOLVED FIXED - Add checks to WeakPtr and related classes to assert single-thread usage")

Dependency [tree](/showdependencytree.cgi?id=1293709&hide_resolved=1)
/ [graph](/showdependencygraph.cgi?id=1293709)

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

---

## Details

### (Keywords: csectype-race, sec-moderate, Whiteboard: [post-critsmash-triage][adv-main51+])

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

CVE-2017-5392

[Keywords:](/describekeywords.cgi)

[csectype-race](/buglist.cgi?keywords=csectype-race&resolution=---),
[sec-moderate](/buglist.cgi?keywords=sec-moderate&resolution=---)

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[post-critsmash-triage][adv-main51+]

Has STR:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

| [mwobensmith](/user_profile?user_id=452604) | [qe-verify](#a13211987_452604 "8 years ago") | - |
| --- | --- | --- |
| [mwobensmith](/user_profile?user_id=452604) | qe-verify | - |
| --- | --- | --- |
|  | behind-pref |  |
| --- | --- | --- |
|  | firefox-backlog |  |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | in-testsuite |  |

## Crash Data

Signature:

*None*

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (3 files, 6 obsolete files)

| [Add NativePtr and WindowPtr smart pointers (v1)](/attachment.cgi?id=8780665)  [8 years ago](#c7)  [(inactive) Jim Chen [:jchen] [:darchons]](/user_profile?user_id=281508)   4.72 KB, patch | snorp : [review+](#a531143_227322 "8 years ago") | [Details](/attachment.cgi?id=8780665&action=edit) | [Diff](/attachment.cgi?id=8780665&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1293709&attachment=8780665) |
| --- | --- | --- |
| [Use NativePtr and WindowPtr for NPZCSupport (v1)](/attachment.cgi?id=8780666)  [8 years ago](#c8)  [(inactive) Jim Chen [:jchen] [:darchons]](/user_profile?user_id=281508)   15.62 KB, patch | snorp : [review+](#a531182_227322 "8 years ago") | [Details](/attachment.cgi?id=8780666&action=edit) | [Diff](/attachment.cgi?id=8780666&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1293709&attachment=8780666) |
| [Use NativePtr and WindowPtr for LayerViewSupport (v1)](/attachment.cgi?id=8780667)  [8 years ago](#c9)  [(inactive) Jim Chen [:jchen] [:darchons]](/user_profile?user_id=281508)   24.41 KB, patch | snorp : [review+](#c10 "8 years ago") | [Details](/attachment.cgi?id=8780667&action=edit) | [Diff](/attachment.cgi?id=8780667&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1293709&attachment=8780667) |
| [Add NativePtr and WindowPtr smart pointers (v1.1)](/attachment.cgi?id=8781651)  [8 years ago](#c12)  [(inactive) Jim Chen [:jchen] [:darchons]](/user_profile?user_id=281508)   4.72 KB, patch | jchen : [review+](#c12 "8 years ago") | [Details](/attachment.cgi?id=8781651&action=edit) | [Diff](/attachment.cgi?id=8781651&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1293709&attachment=8781651) |
| [Use NativePtr and WindowPtr for NPZCSupport (v1.1)](/attachment.cgi?id=8781652)  [8 years ago](#c13)  [(inactive) Jim Chen [:jchen] [:darchons]](/user_profile?user_id=281508)   15.70 KB, patch | jchen : [review+](#c13 "8 years ago") | [Details](/attachment.cgi?id=8781652&action=edit) | [Diff](/attachment.cgi?id=8781652&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1293709&attachment=8781652) |
| [Use NativePtr and WindowPtr for LayerViewSupport (v1.1)](/attachment.cgi?id=8781653)  [8 years ago](#c14)  [(inactive) Jim Chen [:jchen] [:darchons]](/user_profile?user_id=281508)   23.06 KB, patch | jchen : [review+](#c14 "8 years ago") | [Details](/attachment.cgi?id=8781653&action=edit) | [Diff](/attachment.cgi?id=8781653&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1293709&attachment=8781653) |
| [Add NativePtr and WindowPtr smart pointers (v1.2)](/attachment.cgi?id=8782528)  [8 years ago](#c19)  [(inactive) Jim Chen [:jchen] [:darchons]](/user_profile?user_id=281508)   6.28 KB, patch | jchen : [review+](#c19 "8 years ago") | [Details](/attachment.cgi?id=8782528&action=edit) | [Diff](/attachment.cgi?id=8782528&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1293709&attachment=8782528) |
| [Use NativePtr and WindowPtr for NPZCSupport (v1.2)](/attachment.cgi?id=8782529)  [8 years ago](#c20)  [(inactive) Jim Chen [:jchen] [:darchons]](/user_profile?user_id=281508)   18.08 KB, patch | jchen : [review+](#c20 "8 years ago") | [Details](/attachment.cgi?id=8782529&action=edit) | [Diff](/attachment.cgi?id=8782529&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1293709&attachment=8782529) |
| [Use NativePtr and WindowPtr for LayerViewSupport (v1.2)](/attachment.cgi?id=8782530)  [8 years ago](#c21)  [(inactive) Jim Chen [:jchen] [:darchons]](/user_profile?user_id=281508)   27.92 KB, patch | jchen : [review+](#c21 "8 years ago") | [Details](/attachment.cgi?id=8782530&action=edit) | [Diff](/attachment.cgi?id=8782530&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1293709&attachment=8782530) |

Show Obsolete

Bottom ↓
Tags ▾

* Reset

Timeline ▾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [Honza Bambas (:mayhemer)](/user_profile?user_id=269762)  Reporter |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=1293709#c0)• 8 years ago |
|  | |

Based on [bug 956338](/show_bug.cgi?id=956338 "RESOLVED FIXED - Add checks to WeakPtr and related classes to assert single-thread usage"), see <https://treeherder.mozilla.org/#/jobs?repo=try&revision=cfc312760e8c4c6103e05b80db1b192d64fe337b> for android, log: <https://treeherder.mozilla.org/logviewer.html#?job_id=25388610&repo=try#L1704>
Weak references are not thread safe.
09:35:44 INFO - 0 libxul.so!mozilla::detail::WeakReference<nsWindow::GeckoViewSupport>::get [WeakPtr.h:cfc312760e8c : 137 + 0x0]
09:35:44 INFO - r0 = 0x5d7dd7d7 r1 = 0x96b33039 r2 = 0x96b33039 r3 = 0x5df31f08
09:35:44 INFO - r4 = 0x00000000 r5 = 0x61e24b60 r6 = 0x2a2964b0 r7 = 0x62bff498
09:35:44 INFO - r8 = 0x62bff4a8 r9 = 0x5347cedc r10 = 0x2a295de0 r12 = 0x00000003
09:35:44 INFO - fp = 0x62bff4bc sp = 0x62bff430 lr = 0x5cb4c86b pc = 0x5cb4c86a
09:35:44 INFO - Found by: given as instruction pointer in context
09:35:44 INFO - 1 libxul.so!mozilla::jni::detail::NativePtr<nsWindow::LayerViewSupport, true>::Get<mozilla::jni::LocalRef<mozilla::java::LayerView::Compositor> > [WeakPtr.h:cfc312760e8c : 246 + 0x5]
09:35:44 INFO - r4 = 0x4c7a3f78 r5 = 0x2a2964b0 r6 = 0x2a2964b0 r7 = 0x62bff498
09:35:44 INFO - r8 = 0x62bff4a8 r9 = 0x5347cedc r10 = 0x2a295de0 fp = 0x62bff4bc
09:35:44 INFO - sp = 0x62bff448 pc = 0x5cb4f7c3
09:35:44 INFO - Found by: call frame info
09:35:44 INFO - 2 libxul.so!mozilla::jni::detail::ProxyNativeCall<nsWindow::LayerViewSupport, mozilla::java::LayerView::Compositor, false, false>::operator() [Natives.h:cfc312760e8c : 345 + 0x5]
09:35:44 INFO - r3 = 0x0000001a r4 = 0x4c7a3f78 r5 = 0x62bff490 r6 = 0x2a2964b0
09:35:44 INFO - r7 = 0x62bff498 r8 = 0x62bff4a8 r9 = 0x5347cedc r10 = 0x2a295de0
09:35:44 INFO - fp = 0x62bff4bc sp = 0x62bff458 pc = 0x5cb4f805
09:35:44 INFO - Found by: call frame info
09:35:44 INFO - 3 libxul.so!nsWindow::LayerViewSupport::OnNativeCall<mozilla::jni::detail::ProxyNativeCall<nsWindow::LayerViewSupport, mozilla::java::LayerView::Compositor, false, false> > [nsWindow.cpp:cfc312760e8c : 958 + 0x5]
09:35:44 INFO - r4 = 0x4c7a3f78 r5 = 0x62bff490 r6 = 0x00000000 r7 = 0x5347cee4
09:35:44 INFO - r8 = 0x62bff4a8 r9 = 0x5347cedc r10 = 0x2a295de0 fp = 0x62bff4bc
09:35:44 INFO - sp = 0x62bff478 pc = 0x5cb4f88f
09:35:44 INFO - Found by: call frame info
09:35:44 INFO - 4 libxul.so!mozilla::jni::detail::NativeStubImpl<mozilla::java::LayerView::Compositor::SyncInvalidateAndScheduleComposite\_t, nsWindow::LayerViewSupport, mozilla::jni::Args<>, false, true>::Wrap<&nsWindow::LayerViewSupport::SyncInvalidateAndScheduleComposite> [Natives.h:cfc312760e8c : 412 + 0x5]
09:35:44 INFO - r4 = 0x4c7a3f78 r5 = 0x2a295dd0 r6 = 0x00000000 r7 = 0x5347cee4
09:35:44 INFO - r8 = 0x62bff4a8 r9 = 0x5347cedc r10 = 0x2a295de0 fp = 0x62bff4bc
09:35:44 INFO - sp = 0x62bff490 pc = 0x5cb4f979
09:35:44 INFO - Found by: call frame info
stack not copied completely, see the log.

|  | [Honza Bambas (:mayhemer)](/user_profile?user_id=269762)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1293709#a83_269762)• 8 years ago |

Summary: nsWindow::LayerViewSupport's weak reference used on multiple threads → nsWindow::GeckoViewSupport's weak reference used on multiple threads

|  | [Honza Bambas (:mayhemer)](/user_profile?user_id=269762)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1293709#a232_269762)• 8 years ago |

Blocks: [956338](/show_bug.cgi?id=956338 "RESOLVED FIXED - Add checks to WeakPtr and related classes to assert single-thread usage")

|  | [Honza Bambas (:mayhemer)](/user_profile?user_id=269762)  Reporter |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=1293709#c1)• 8 years ago |
|  | |

Jim, you originally wrote this class ([bug 1197957](/show_bug.cgi?id=1197957 "RESOLVED FIXED - Let GeckoView control nsWindow creation") and [bug 1227706](/show_bug.cgi?id=1227706 "RESOLVED FIXED - Make each nsWindow/GeckoView manage their own compositor/GLController")).
The checks introduced in [bug 956338](/show_bug.cgi?id=956338 "RESOLVED FIXED - Add checks to WeakPtr and related classes to assert single-thread usage") makes sure that the weak proxy object is always used only on a single thread. It means, (1) taking weak references + (2) dereference of them + (3) destruction of the referee are all made on the same thread.
The crash shows that the weak reference is dereferenced on a different thread than it has been created on. It shows potentially (likely) wrong usage of weak referencing.
The questions are:
- are we dereferencing the weak ref only on a single thread where also the referee can be destroyed?
- can all the (1+2+3) operations mentioned above be protected by some single umbrella mutex?
- can we migrate away from using weak reference here and use a strong ref and some 'release the ref' notification on referrers?
- some other solution?
It's likely this is a highly critical bug.Flags: needinfo?(nchen)Flags: needinfo?(mark.finkle)

|  | [Mark Finkle (:mfinkle) (use needinfo?)](/user_profile?user_id=252194) |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=1293709#c2)• 8 years ago |
|  | |

Passing to Sebastian. I am no longer working on Firefox.Flags: needinfo?(mark.finkle) → needinfo?(s.kaspari)

|  | [Sebastian Kaspari (:sebastian; :pocmo)](/user_profile?user_id=472516) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1293709#a72701_472516)• 8 years ago |

tracking-fennec: --- → ?OS: Unspecified → AndroidPriority: -- → P1Hardware: Unspecified → All

|  | [(inactive) Jim Chen [:jchen] [:darchons]](/user_profile?user_id=281508)  Assignee |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=1293709#c3)• 8 years ago |
|  | |

Everything in GeckoViewSupport happens on the Gecko thread, so it's most likely nsWindow::LayerViewSupport's WeakPtr.
(In reply to Honza Bambas (:mayhemer) from [comment #1](/show_bug.cgi?id=1293709#c1 "RESOLVED FIXED - nsWindow::LayerViewSupport's weak reference used on multiple threads"))
>
> The questions are:
> - are we dereferencing the weak ref only on a single thread where also the
> referee can be destroyed?
Unfortunately no, we have two threads involved here.
> - can all the (1+2+3) operations mentioned above be protected by some single
> umbrella mutex?
Possibly, but seems like that would still violate [bug 956338](/show_bug.cgi?id=956338 "RESOLVED FIXED - Add checks to WeakPtr and related classes to assert single-thread usage") right?
> - can we migrate away from using weak reference here and use a strong ref
> and some 'release the ref' notification on referrers?
I think so. This is probably the better approach.
> - some other solution?
>
> It's likely this is a highly critical bug.
These are long-lived objects (typically close to application lifetime), so I don't think it's quite expoitable, beyond possible startup/shutdown crashes. I do agree we should fix it though.Flags: needinfo?(nchen)Summary: nsWindow::GeckoViewSupport's weak reference used on multiple threads → nsWindow::LayerViewSupport's weak reference used on multiple threads

|  | [Honza Bambas (:mayhemer)](/user_profile?user_id=269762)  Reporter |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=1293709#c4)• 8 years ago |
|  | |

(In reply to Jim Chen [:jchen] [:darchons] from [comment #3](/show_bug.cgi?id=1293709#c3 "RESOLVED FIXED - nsWindow::LayerViewSupport's weak reference used on multiple threads"))
> Everything in GeckoViewSupport happens on the Gecko thread, so it's most
> likely nsWindow::LayerViewSupport's WeakPtr.
>
> (In reply to Honza Bambas (:mayhemer) from [comment #1](/show_bug.cgi?id=1293709#c1 "RESOLVED FIXED - nsWindow::LayerViewSupport's weak reference used on multiple threads"))
> >
> > The questions are:
> > - are we dereferencing the weak ref only on a single thread where also the
> > referee can be destroyed?
>
> Unfortunately no, we have two threads involved here.
>
> > - can all the (1+2+3) operations mentioned above be protected by some single
> > umbrella mutex?
>
> Possibly, but seems like that would still violate [bug 956338](/show_bug.cgi?id=956338 "RESOLVED FIXED - Add checks to WeakPtr and related classes to assert single-thread usage") right?
We can try to implement something like ProtectedWeakReference that will keep reference to the mutex and assert it's held during all the operations, if the mutex can live longer than the weakref proxy. Or we can just have an implementation that won't do the checks and just assume the correct usage.
>
> > - can we migrate away from using weak reference here and use a strong ref
> > and some 'release the ref' notification on referrers?
>
> I think so. This is probably the better approach.
Cool, who is going to implement that? I have no idea at all how this works, so I'm just a last resort candidate.
>
> > - some other solution?
> >
> > It's likely this is a highly critical bug.
>
> These are long-lived objects (typically close to application lifetime), so I
> don't think it's quite expoitable, beyond possible startup/shutdown crashes.
> I do agree we should fix it though.
Good to here.

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1293709#a173099_406194)• 8 years ago |

Keywords: [csectype-race](/buglist.cgi?keywords=csectype-race&resolution=---),
[sec-moderate](/buglist.cgi?keywords=sec-moderate&resolution=---)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1293709#a177130_1689)• 8 years ago |

Group: core-security → layout-core-security

|  | [(inactive) Jim Chen [:jchen] [:darchons]](/user_profile?user_id=281508)  Assignee |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=1293709#c5)• 8 years ago |
|  | |

I'll work on it.Assignee: nobody → nchenStatus: NEW → ASSIGNED

|  | [Honza Bambas (:mayhemer)](/user_profile?user_id=269762)  Reporter |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=1293709#c6)• 8 years ago |
|  | |

(In reply to Jim Chen [:jchen] [:darchons] from [comment #5](/show_bug.cgi?id=1293709#c5 "RESOLVED FIXED - nsWindow::LayerViewSupport's weak reference used on multiple threads"))
> I'll work on it.
Thanks!

|  | [(inactive) Jim Chen [:jchen] [:darchons]](/user_profile?user_id=281508)  Assignee |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=1293709#c7)• 8 years ago |
|  | |

Attached patch

[Add NativePtr and WindowPtr smart pointers (v1)](attachment.cgi?id=8780665&action=diff) (obsolete)
— [Details](attachment.cgi?id=8780665&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1293709&attachment=8780665)

Add the NativePtr class for referencing a native object, and the
WindowPtr class for referencing back to the nsWindow inside a native
object class. NativePtr automatically clears its reference when the
native object is destroyed. WindowPtr automatically clears its
reference when its nsWindow is detached from the native object.
[Attachment #8780665](/attachment.cgi?id=8780665&action=edit "Add NativePtr and WindowPtr smart pointers (v1)") -
Flags: review?(snorp)

|  | [(inactive) Jim Chen [:jchen] [:darchons]](/user_profile?user_id=281508)  Assignee |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=1293709#c8)• 8 years ago |
|  | |

Attached patch

[Use NativePtr and WindowPtr for NPZCSupport (v1)](attachment.cgi?id=8780666&action=diff) (obsolete)
— [Details](attachment.cgi?id=8780666&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1293709&attachment=8780666)

Use the new NativePtr and WindowPtr classes for NPZCSupport to replace
similar functionality in the exiting class.
[Attachment #8780666](/attachment.cgi?id=8780666&action=edit "Use NativePtr and WindowPtr for NPZCSupport (v1)") -
Flags: review?(snorp)

|  | [(inactive) Jim Chen [:jchen] [:darchons]](/user_profile?user_id=281508)  Assignee |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=1293709#c9)• 8 years ago |
|  | |

Attached patch

[Use NativePtr and WindowPtr for LayerViewSupport (v1)](attachment.cgi?id=8780667&action=diff) (obsolete)
— [Details](attachment.cgi?id=8780667&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1293709&attachment=8780667)

Switch LayerViewSupport from using WeakPtr to using NativePtr/WindowPtr
in order to provide better thread safety. Also make some minor
improvements to code in LayerViewSupport.
[Attachment #8780667](/attachment.cgi?id=8780667&action=edit "Use NativePtr and WindowPtr for LayerViewSupport (v1)") -
Flags: review?(snorp)

|  | [Sebastian Kaspari (:sebastian; :pocmo)](/user_profile?user_id=472516) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1293709#a506870_472516)• 8 years ago |

Flags: needinfo?(s.kaspari)

|  | [James Willcox (:snorp) (jwillcox@mozilla.com) (he/him)](/user_profile?user_id=227322) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1293709#a531143_227322)• 8 years ago |

[Attachment #8780665](/attachment.cgi?id=8780665&action=edit "Add NativePtr and WindowPtr smart pointers (v1)") -
Flags: review?(snorp) → review+

|  | [James Willcox (:snorp) (jwillcox@mozilla.com) (he/him)](/user_profile?user_id=227322) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1293709#a531182_227322)• 8 years ago |

[Attachment #8780666](/attachment.cgi?id=8780666&action=edit "Use NativePtr and WindowPtr for NPZCSupport (v1)") -
Flags: review?(snorp) → review+

|  | [James Willcox (:snorp) (jwillcox@mozilla.com) (he/him)](/user_profile?user_id=227322) |  |
| --- | --- | --- |
| [Comment 10](/show_bug.cgi?id=1293709#c10)• 8 years ago |
|  | |

Comment on [attachment 8780667](/attachment.cgi?id=8780667 "Use NativePtr and WindowPtr for LayerViewSupport (v1)") [[details]](/attachment.cgi?id=8780667&action=edit "Use NativePtr and WindowPtr for LayerViewSupport (v1)") [[diff]](/attachment.cgi?id=8780667&action=diff "Use NativePtr and WindowPtr for LayerViewSupport (v1)") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1293709&attachment=8780667)
Use NativePtr and WindowPtr for LayerViewSupport (v1)
Review of [attachment 8780667](/attachment.cgi?id=8780667 "Use NativePtr and WindowPtr for LayerViewSupport (v1)") [[details]](/attachment.cgi?id=8780667&action=edit "Use NativePtr and WindowPtr for LayerViewSupport (v1)") [[diff]](/attachment.cgi?id=8780667&action=diff "Use NativePtr and WindowPtr for LayerViewSupport (v1)") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1293709&attachment=8780667):
-----------------------------------------------------------------
::: widget/android/nsWindow.cpp
@@ +1147,5 @@
> + MOZ\_ASSERT(AndroidBridge::IsJavaUiThread());
> +
> + RefPtr<CompositorBridgeParent> bridge;
> +
> + if (LockedWindowPtr window{mWindow}) {
This syntax is nice but looks so weird.
[Attachment #8780667](/attachment.cgi?id=8780667&action=edit "Use NativePtr and WindowPtr for LayerViewSupport (v1)") -
Flags: review?(snorp) → review+

|  | [Honza Bambas (:mayhemer)](/user_profile?user_id=269762)  Reporter |  |
| --- | --- | --- |
| [Comment 11](/show_bug.cgi?id=1293709#c11)• 8 years ago |
|  | |

(the patches don't apply to today's m-c)

|  | [(inactive) Jim Chen [:jchen] [:darchons]](/user_profile?user_id=281508)  Assignee |  |
| --- | --- | --- |
| [Comment 12](/show_bug.cgi?id=1293709#c12)• 8 years ago |
|  | |

Attached patch

[Add NativePtr and WindowPtr smart pointers (v1.1)](attachment.cgi?id=8781651&action=diff) (obsolete)
— [Details](attachment.cgi?id=8781651&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1293709&attachment=8781651)

Rebased patches.
[Attachment #8781651](/attachment.cgi?id=8781651&action=edit "Add NativePtr and WindowPtr smart pointers (v1.1)") -
Flags: review+

|  | [(inactive) Jim Chen [:jchen] [:darchons]](/user_profile?user_id=281508)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1293709#a608939_281508)• 8 years ago |

[Attachment #8780665](/attachment.cgi?id=8780665&action=edit "Add NativePtr and WindowPtr smart pointers (v1)") -
Attachment is obsolete: true

|  | [(inactive) Jim Chen [:jchen] [:darchons]](/user_profile?user_id=281508)  Assignee |  |
| --- | --- | --- |
| [Comment 13](/show_bug.cgi?id=1293709#c13)• 8 years ago |
|  | |

Attached patch

[Use NativePtr and WindowPtr for NPZCSupport (v1.1)](attachment.cgi?id=8781652&action=diff) (obsolete)
— [Details](attachment.cgi?id=8781652&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1293709&attachment=8781652)

[Attachment #8781652](/attachment.cgi?id=8781652&action=edit "Use NativePtr and WindowPtr for NPZCSupport (v1.1)") -
Flags: review+

|  | [(inactive) Jim Chen [:jchen] [:darchons]](/user_profile?user_id=281508)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1293709#a608953_281508)• 8 years ago |

[Attachment #8780666](/attachment.cgi?id=8780666&action=edit "Use NativePtr and WindowPtr for NPZCSupport (v1)") -
Attachment is obsolete: true

|  | [(inactive) Jim Chen [:jchen] [:darchons]](/user_profile?user_id=281508)  Assignee |  |
| --- | --- | --- |
| [Comment 14](/show_bug.cgi?id=1293709#c14)• 8 years ago |
|  | |

Attached patch

[Use NativePtr and WindowPtr for LayerViewSupport (v1.1)](attachment.cgi?id=8781653&action=diff) (obsolete)
— [Details](attachment.cgi?id=8781653&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1293709&attachment=8781653)

[Attachment #8781653](/attachment.cgi?id=8781653&action=edit "Use NativePtr and WindowPtr for LayerViewSupport (v1.1)") -
Flags: review+

|  | [(inactive) Jim Chen [:jchen] [:darchons]](/user_profile?user_id=281508)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1293709#a608967_281508)• 8 years ago |

[Attachment #8780667](/attachment.cgi?id=8780667&action=edit "Use NativePtr and WindowPtr for LayerViewSupport (v1)") -
Attachment is obsolete: true

|  | [Honza Bambas (:mayhemer)](/user_profile?user_id=269762)  Reporter |  |
| --- | --- | --- |
| [Comment 15](/show_bug.cgi?id=1293709#c15)• 8 years ago |
|  | |

Interestingly, the problem disappeared with some recent changes: <https://treeherder.mozilla.org/#/jobs?repo=try&revision=fc9b997ac90bf87a80c80c9d8290ffb40d718894> (having my weka assertion patch + all other fixes except this bug's patch)
Patches in this big are still worth landing anyway. Thanks for such a quick reaction!

|  | [Honza Bambas (:mayhemer)](/user_profile?user_id=269762)  Reporter |  |
| --- | --- | --- |
| [Comment 16](/show_bug.cgi?id=1293709#c16)• 8 years ago |
|  | |

(In reply to Honza Bambas (:mayhemer) from [comment #15](/show_bug.cgi?id=1293709#c15 "RESOLVED FIXED - nsWindow::LayerViewSupport's weak reference used on multiple threads"))
> Interestingly, the problem disappeared with some recent changes:
> <https://treeherder.mozilla.org/#/>
> jobs?repo=try&revision=fc9b997ac90bf87a80c80c9d8290ffb40d718894 (having my
> weka assertion patch + all other fixes except this bug's patch)
>
> Patches in this big are still worth landing anyway. Thanks for such a quick
> reaction!
Just for curiosity, I rather repushed to try with a slight loose in #ifdefs of the thread checking code (no !MOZ\_PROFILING)
<https://treeherder.mozilla.org/#/jobs?repo=try&revision=11c3b4364874>

|  | [James Willcox (:snorp) (jwillcox@mozilla.com) (he/him)](/user_profile?user_id=227322) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1293709#a765999_227322)• 8 years ago |

tracking-fennec: ? → 51+

|  | [Honza Bambas (:mayhemer)](/user_profile?user_id=269762)  Reporter |  |
| --- | --- | --- |
| [Comment 17](/show_bug.cgi?id=1293709#c17)• 8 years ago |
|  | |

(In reply to Honza Bambas (:mayhemer) from [comment #16](/show_bug.cgi?id=1293709#c16 "RESOLVED FIXED - nsWindow::LayerViewSupport's weak reference used on multiple threads"))
> <https://treeherder.mozilla.org/#/jobs?repo=try&revision=11c3b4364874>
OK, problem detected. Why does the Android 4.3 API15+ opt tests declare MOZ\_PROFILING?

|  | [(inactive) Jim Chen [:jchen] [:darchons]](/user_profile?user_id=281508)  Assignee |  |
| --- | --- | --- |
| [Comment 18](/show_bug.cgi?id=1293709#c18)• 8 years ago |
|  | |

(In reply to Honza Bambas (:mayhemer) from [comment #17](/show_bug.cgi?id=1293709#c17 "RESOLVED FIXED - nsWindow::LayerViewSupport's weak reference used on multiple threads"))
> (In reply to Honza Bambas (:mayhemer) from [comment #16](/show_bug.cgi?id=1293709#c16 "RESOLVED FIXED - nsWindow::LayerViewSupport's weak reference used on multiple threads"))
> > <https://treeherder.mozilla.org/#/jobs?repo=try&revision=11c3b4364874>
>
> OK, problem detected. Why does the Android 4.3 API15+ opt tests declare
> MOZ\_PROFILING?
We enable it in Nightly builds to not strip away debug info, so that profiler unwinding works.

|  | [(inactive) Jim Chen [:jchen] [:darchons]](/user_profile?user_id=281508)  Assignee |  |
| --- | --- | --- |
| [Comment 19](/show_bug.cgi?id=1293709#c19)• 8 years ago |
|  | |

Attached patch

[Add NativePtr and WindowPtr smart pointers (v1.2)](attachment.cgi?id=8782528&action=diff)
— [Details](attachment.cgi?id=8782528&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1293709&attachment=8782528)

Updated patch that adds locking on the nsWindow side.
[Attachment #8782528](/attachment.cgi?id=8782528&action=edit "Add NativePtr and WindowPtr smart pointers (v1.2)") -
Flags: review+

|  | [(inactive) Jim Chen [:jchen] [:darchons]](/user_profile?user_id=281508)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1293709#a775171_281508)• 8 years ago |

[Attachment #8781651](/attachment.cgi?id=8781651&action=edit "Add NativePtr and WindowPtr smart pointers (v1.1)") -
Attachment is obsolete: true

|  | [(inactive) Jim Chen [:jchen] [:darchons]](/user_profile?user_id=281508)  Assignee |  |
| --- | --- | --- |
| [Comment 20](/show_bug.cgi?id=1293709#c20)• 8 years ago |
|  | |

Attached patch

[Use NativePtr and WindowPtr for NPZCSupport (v1.2)](attachment.cgi?id=8782529&action=diff)
— [Details](attachment.cgi?id=8782529&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1293709&attachment=8782529)

Updated patch that fixes a possible crash when reattaching GeckoView.
[Attachment #8782529](/attachment.cgi?id=8782529&action=edit "Use NativePtr and WindowPtr for NPZCSupport (v1.2)") -
Flags: review+

|  | [(inactive) Jim Chen [:jchen] [:darchons]](/user_profile?user_id=281508)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1293709#a775279_281508)• 8 years ago |

[Attachment #8781652](/attachment.cgi?id=8781652&action=edit "Use NativePtr and WindowPtr for NPZCSupport (v1.1)") -
Attachment is obsolete: true

|  | [(inactive) Jim Chen [:jchen] [:darchons]](/user_profile?user_id=281508)  Assignee |  |
| --- | --- | --- |
| [Comment 21](/show_bug.cgi?id=1293709#c21)• 8 years ago |
|  | |

Attached patch

[Use NativePtr and WindowPtr for LayerViewSupport (v1.2)](attachment.cgi?id=8782530&action=diff)
— [Details](attachment.cgi?id=8782530&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1293709&attachment=8782530)

Updated patch that adds more locking when getting a surface or when drawing.
[Attachment #8782530](/attachment.cgi?id=8782530&action=edit "Use NativePtr and WindowPtr for LayerViewSupport (v1.2)") -
Flags: review+

|  | [(inactive) Jim Chen [:jchen] [:darchons]](/user_profile?user_id=281508)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1293709#a775318_281508)• 8 years ago |

[Attachment #8781653](/attachment.cgi?id=8781653&action=edit "Use NativePtr and WindowPtr for LayerViewSupport (v1.1)") -
Attachment is obsolete: true

|  | [Honza Bambas (:mayhemer)](/user_profile?user_id=269762)  Reporter |  |
| --- | --- | --- |
| [Comment 22](/show_bug.cgi?id=1293709#c22)• 8 years ago |
|  | |

(In reply to Jim Chen [:jchen] [:darchons] from [comment #18](/show_bug.cgi?id=1293709#c18 "RESOLVED FIXED - nsWindow::LayerViewSupport's weak reference used on multiple threads"))
> (In reply to Honza Bambas (:mayhemer) from [comment #17](/show_bug.cgi?id=1293709#c17 "RESOLVED FIXED - nsWindow::LayerViewSupport's weak reference used on multiple threads"))
> > (In reply to Honza Bambas (:mayhemer) from [comment #16](/show_bug.cgi?id=1293709#c16 "RESOLVED FIXED - nsWindow::LayerViewSupport's weak reference used on multiple threads"))
> > > <https://treeherder.mozilla.org/#/jobs?repo=try&revision=11c3b4364874>
> >
> > OK, problem detected. Why does the Android 4.3 API15+ opt tests declare
> > MOZ\_PROFILING?
>
> We enable it in Nightly builds to not strip away debug info, so that
> profiler unwinding works.
OK, I can see that "Android 4.3 API15+ debug" suite + all tests is run on inbound, just not on "try -a". That should be sufficient to give the coverage.

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 23](/show_bug.cgi?id=1293709#c23)• 8 years ago |
|  | |

<https://hg.mozilla.org/mozilla-central/rev/54069ada44c7>Status: ASSIGNED → RESOLVEDClosed: 8 years ago
[status-firefox51](/buglist.cgi?f1=cf_status_firefox51&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox51&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox51&o1=equals&v1=fixed)Resolution: --- → FIXEDTarget Milestone: --- → mozilla51

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1293709#a1985084_1689)• 8 years ago |

Group: layout-core-security → core-security-release

|  | [Matt Wobensmith [:mwobensmith][:matt:]](/user_profile?user_id=452604) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1293709#a13211987_452604)• 8 years ago |

Flags: qe-verify-Whiteboard: [post-critsmash-triage]

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1293709#a13932820_280903)• 8 years ago |

Whiteboard: [post-critsmash-triage] → [post-critsmash-triage][adv-main51+]

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1293709#a13939122_280903)• 8 years ago |

Alias: CVE-2017-5392

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1293709#a33188707_1689)• 7 years ago |

Group: core-security-release

|  | [BMO Automation](/user_profile?user_id=546015) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1293709#a165289246_546015)• 3 years ago |

Product: Core → Core Graveyard
You need to [log in](/show_bug.cgi?id=1293709&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top ↑

## Attachment

Hide Details

### General

Creator:  [(inactive) Jim Chen [:jchen] [:darchons]](/user_profile?user_id=281508)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review


