=== Content from bugs.ruby-lang.org_30956125_20250125_152203.html ===


Search

### Project

### General

### Profile

* [Sign in](/login)
* [Register](/account/register)

* [Home](/)
* [Projects](/projects)
* [Help](https://www.redmine.org/guide)

[Search](/projects/ruby-master/search):

 Ruby master[All Projects](/projects?jump=issues)
# [Ruby](/projects/ruby?jump=issues) » Ruby master

* [Overview](/projects/ruby-master)
* [Activity](/projects/ruby-master/activity)
* [Roadmap](/projects/ruby-master/roadmap)
* [Issues](/projects/ruby-master/issues)
* [Repository](/projects/ruby-master/repository)
* [Like](/projects/ruby-master/hearts)

### Custom queries

* [Backport 3.1](/projects/ruby-master/issues?query_id=287)
* [Backport 3.2](/projects/ruby-master/issues?query_id=293)
* [Backport 3.3](/projects/ruby-master/issues?query_id=300)
* [bugs: unassigned](/projects/ruby-master/issues?query_id=75)
* [DevMeeting](/projects/ruby-master/issues?query_id=156)
* [matz](/projects/ruby-master/issues?query_id=72)
* [Open issues with attachment](/projects/ruby-master/issues?query_id=160)
* [Windows](/projects/ruby-master/issues?query_id=335)

Actions
Copy link
## Bug #13742

closed
![](https://www.gravatar.com/avatar/eefbf5cde49236ebfd360c5c436d3b17e017beb0c669fb060139ea5aed24cb36?rating=PG&size=50&default=mm "Author: fumfel (Kamil Frankowicz)")

### SIGSEGV in parser\_yyerror()

Added by [fumfel (Kamil Frankowicz)](/users/12088) [over 7 years](/projects/ruby-master/activity?from=2017-07-13 "07/13/2017 10:20 AM") ago.
Updated [over 7 years](/projects/ruby-master/activity?from=2017-07-24 "07/24/2017 01:24 AM") ago.

Status:ClosedAssignee:-Target version:-
ruby -v:ruby 2.5.0dev (2017-07-13 trunk 59320) [x86\_64-linux]Backport:[2.2: DONTNEED, 2.3: DONTNEED, 2.4: REQUIRED](https://github.com/ruby/ruby/wiki/How-To-Request-Backport)
[[ruby-core:82029]](https://blade.ruby-lang.org/ruby-core/82029)

---

**Description**

After some fuzz testing I found a crashing test case.

To reproduce: miniruby ruby\_sigsegv\_parser\_yyerror

Valgrind Context:

```
==20061== Memcheck, a memory error detector
==20061== Copyright (C) 2002-2017, and GNU GPL'd, by Julian Seward et al.
==20061== Using Valgrind-3.13.0 and LibVEX; rerun with -h for copyright info
==20061== Command: ruby/miniruby id5_min
==20061==
==20061== Warning: client switching stacks?  SP change: 0x1ffefffd60 --> 0x1ffe8020e0
==20061==          to suppress, use: --max-stackframe=8379520 or greater
==20061== Invalid write of size 1
==20061==    at 0x2E2BF5: reserve_stack (thread_pthread.c:722)
==20061==    by 0x2EA057: ruby_init_stack (thread_pthread.c:757)
==20061==    by 0x12CAD4: main (main.c:40)
==20061==  Address 0x1ffe8020e0 is on thread 1's stack
==20061==  in frame #0, created by reserve_stack (thread_pthread.c:677)
==20061==
==20061== Warning: client switching stacks?  SP change: 0x1ffe8020e0 --> 0x1ffefffe80
==20061==          to suppress, use: --max-stackframe=8379808 or greater
ruby/miniruby: warning: failed to load encoding (Windows-31J); use ASCII-8BIT instead
ruby/miniruby: warning: failed to load encoding (Windows-31J); use ASCII-8BIT instead
ruby_sigsegv_parser_yyerror: invalid Unicode escape
000000000000000000000000
^~~~~~~~~~~~~~~~~~~~~~~~
==20061== Invalid read of size 1
==20061==    at 0x22DC98: parser_yyerror (parse.y:5076)
==20061==    by 0x202020202020201F: ???
==20061==    by 0x202020202020201F: ???
==20061==    by 0x202020202020201F: ???
==20061==    by 0x202020202020201F: ???
==20061==    by 0x202020202020201F: ???
==20061==    by 0x202020202020201F: ???
==20061==    by 0x202020202020201F: ???
==20061==    by 0x202020202020201F: ???
==20061==    by 0x202020202020201F: ???
==20061==    by 0x202020202020201F: ???
==20061==    by 0x202020202020201F: ???
==20061==  Address 0x5f27fd8 is 0 bytes after a block of size 16,344 alloc'd
==20061==    at 0x4C2E256: memalign (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)
==20061==    by 0x4C2E371: posix_memalign (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)
==20061==    by 0x1CC803: aligned_malloc (gc.c:7714)
==20061==    by 0x1CC803: heap_page_allocate (gc.c:1527)
==20061==    by 0x1CC803: heap_page_create (gc.c:1631)
==20061==    by 0x1CC803: heap_assign_page (gc.c:1653)
==20061==    by 0x1CC803: heap_add_pages (gc.c:1666)
==20061==    by 0x1CC803: Init_heap (gc.c:2387)
==20061==    by 0x1B1ED4: ruby_setup (eval.c:55)
==20061==    by 0x1B1FA8: ruby_init (eval.c:76)
==20061==    by 0x12CAD9: main (main.c:41)
==20061==
==20061== Invalid write of size 1
==20061==    at 0x22DCA3: parser_yyerror (parse.y:5076)
==20061==    by 0x202020202020201F: ???
==20061==    by 0x202020202020201F: ???
==20061==    by 0x202020202020201F: ???
==20061==    by 0x202020202020201F: ???
==20061==    by 0x202020202020201F: ???
==20061==    by 0x202020202020201F: ???
==20061==    by 0x202020202020201F: ???
==20061==    by 0x202020202020201F: ???
==20061==    by 0x202020202020201F: ???
==20061==    by 0x202020202020201F: ???
==20061==    by 0x202020202020201F: ???
==20061==  Address 0x1fff001000 is not stack'd, malloc'd or (recently) free'd
==20061==
id5_min: [BUG] Segmentation fault at 0x0000001fff001000
ruby 2.5.0dev (2017-07-13 trunk 59320) [x86_64-linux]

-- Control frame information -----------------------------------------------
c:0001 p:0000 s:0003 E:0021c0 (none) [FINISH]

-- Machine register context ------------------------------------------------
 RIP: 0x000000000022dca3 RBP: 0x0000001ffeffdd70 RSP: 0x0000001ffeffdce0
 RAX: 0x0000001fff001001 RBX: 0x0000000005f26445 RCX: 0x0000000005f5bcf0
 RDX: 0x00000000060cae10 RDI: 0x0000000005f26445 RSI: 0x0000000005f26445
  R8: 0x000000000034bccc  R9: 0x0000000000355435 R10: 0x0000000005f26445
 R11: 0x0000001ffeffdd80 R12: 0x0000000005f29766 R13: 0x0000000000000004
 R14: 0x00000000060c38a0 R15: 0x0000001ffeffdce0 EFL: 0x0000000000000085

-- C level backtrace information -------------------------------------------
==20061== Invalid read of size 1
==20061==    at 0x6217E07: x86_64_fallback_frame_state (md-unwind-support.h:58)
==20061==    by 0x6217E07: uw_frame_state_for (unwind-dw2.c:1257)
==20061==    by 0x62199B7: _Unwind_Backtrace (unwind.inc:290)
==20061==    by 0x5B31A27: backtrace (in /usr/lib/libc-2.25.so)
==20061==    by 0x33C8E2: rb_print_backtrace (vm_dump.c:671)
==20061==    by 0x33C8E2: rb_vm_bugreport (vm_dump.c:941)
==20061==    by 0x1A8CC0: rb_bug_context (error.c:534)
==20061==    by 0x2AA7E1: sigsegv (signal.c:930)
==20061==    by 0x4E4993F: ??? (in /usr/lib/libpthread-2.25.so)
==20061==    by 0x22DCA2: parser_yyerror (parse.y:5075)
==20061==  Address 0x2020202020202020 is not stack'd, malloc'd or (recently) free'd
==20061==
==20061==
==20061== Process terminating with default action of signal 11 (SIGSEGV): dumping core
==20061==  General Protection Fault
==20061==    at 0x6217E07: x86_64_fallback_frame_state (md-unwind-support.h:58)
==20061==    by 0x6217E07: uw_frame_state_for (unwind-dw2.c:1257)
==20061==    by 0x62199B7: _Unwind_Backtrace (unwind.inc:290)
==20061==    by 0x5B31A27: backtrace (in /usr/lib/libc-2.25.so)
==20061==    by 0x33C8E2: rb_print_backtrace (vm_dump.c:671)
==20061==    by 0x33C8E2: rb_vm_bugreport (vm_dump.c:941)
==20061==    by 0x1A8CC0: rb_bug_context (error.c:534)
==20061==    by 0x2AA7E1: sigsegv (signal.c:930)
==20061==    by 0x4E4993F: ??? (in /usr/lib/libpthread-2.25.so)
==20061==    by 0x22DCA2: parser_yyerror (parse.y:5075)
==20061==
==20061== HEAP SUMMARY:
==20061==     in use at exit: 2,135,207 bytes in 6,100 blocks
==20061==   total heap usage: 6,531 allocs, 431 frees, 2,330,433 bytes allocated
==20061==
==20061== LEAK SUMMARY:
==20061==    definitely lost: 8,199 bytes in 2 blocks
==20061==    indirectly lost: 0 bytes in 0 blocks
==20061==      possibly lost: 788,920 bytes in 5,888 blocks
==20061==    still reachable: 1,338,088 bytes in 210 blocks
==20061==         suppressed: 0 bytes in 0 blocks
==20061== Rerun with --leak-check=full to see details of leaked memory
==20061==
==20061== For counts of detected and suppressed errors, rerun with: -v
==20061== ERROR SUMMARY: 6033 errors from 4 contexts (suppressed: 0 from 0)
Segmentation fault (core dumped)

```

---

**Files**

| [ruby\_sigsegv\_parser\_yyerror](/attachments/6643) (46 Bytes) [ruby\_sigsegv\_parser\_yyerror](/attachments/download/6643/ruby_sigsegv_parser_yyerror "Download") |  | fumfel (Kamil Frankowicz), 07/13/2017 10:20 AM |  |
| --- | --- | --- | --- |

* [History](/issues/13742?tab=history)
* [Notes](/issues/13742?tab=notes)
* [Property changes](/issues/13742?tab=properties)
* [Associated revisions](/issues/13742?tab=changesets)

ActionsCopy link
[#1](#note-1)
#### Updated by [nobu (Nobuyoshi Nakada)](/users/4) [over 7 years](/projects/ruby-master/activity?from=2017-07-14 "07/14/2017 01:47 AM") ago

* **Description** updated ([diff](/journals/65769/diff?detail_id=45592 "View differences"))
* **Backport** changed from *2.2: UNKNOWN, 2.3: UNKNOWN, 2.4: UNKNOWN* to *2.2: DONTNEED, 2.3: DONTNEED, 2.4: REQUIRED*

ActionsCopy link
[#2](#note-2)
#### Updated by [nobu (Nobuyoshi Nakada)](/users/4) [over 7 years](/projects/ruby-master/activity?from=2017-07-16 "07/16/2017 01:39 PM") ago

* **Status** changed from *Open* to *Closed*

Applied in changeset trunk|r59344.

---

parse.y: utf-8 codepoints

* parse.y (parser\_tokadd\_utf8): skip spaces in the current line,

  without advancing the line, to get rid of dangling pointer.

  [[ruby-core:82029]](/issues/13742) [Bug [#13742](/issues/13742 "Bug: SIGSEGV in parser_yyerror() (Closed)")]

ActionsCopy link
[#3](#note-3)
[[ruby-core:82143]](https://blade.ruby-lang.org/ruby-core/82143)
#### Updated by [nobu (Nobuyoshi Nakada)](/users/4) [over 7 years](/projects/ruby-master/activity?from=2017-07-24 "07/24/2017 01:24 AM") ago

Note that this is not a vulnerability.

<http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2017-11465> is invalid.

Actions
Copy link

Also available in: [Atom](/issues/13742.atom)
[PDF](/issues/13742.pdf)

Like0
Like0Like0Like0

Powered by [Redmine](https://www.redmine.org/) © 2006-2024 Jean-Philippe Lang

Loading...



=== Content from www.redmine.org_daf899af_20250126_095138.html ===


⚲

### Project

### General

### Profile

* [Sign in](/login)
* [Register](/account/register)

* [Home](/)
* [Projects](/projects)
* [Help](https://www.redmine.org/guide)

[Search](/projects/redmine/search?scope=subprojects):

 Redmine[All Projects](/projects?jump=wiki)
# Redmine

* [Overview](/projects/redmine)
* [Download](/projects/redmine/wiki/Download)
* [Activity](/projects/redmine/activity)
* [Roadmap](/projects/redmine/roadmap)
* [Issues](/projects/redmine/issues)
* [News](/projects/redmine/news)
* [Wiki](/projects/redmine/wiki)
* [Forums](/projects/redmine/boards)
* [Repository](/projects/redmine/repository)

### Latest releases[¶](#Latest-releases)

[6.0.2 (2024-12-11)](/projects/redmine/wiki/Download)
[5.1.5 (2024-12-11)](/projects/redmine/wiki/Download)
[5.0.10 (2024-11-03)](/projects/redmine/wiki/Download)

### Resources[¶](#Resources)

[User's Guide](/projects/redmine/wiki/Guide)
[Developer's Guide](/projects/redmine/wiki/Developer_Guide)
[Changelog](/projects/redmine/wiki/Changelog), [Security](/projects/redmine/wiki/Security_Advisories)
[FAQ](/projects/redmine/wiki/FAQ), [HowTo's](/projects/redmine/wiki/HowTos)
[Plugins](/plugins), [Themes](/projects/redmine/wiki/Theme_List)
[Privacy Policy](/projects/redmine/wiki/PrivacyPolicy)

### Wiki

* [Start page](/)
* [Index by title](/projects/redmine/wiki/index)
* [Index by date](/projects/redmine/wiki/date_index)

Actions
[History](/projects/redmine/wiki/Overview/history)

# Redmine[¶](#Redmine)

* **Table of contents**
* [Redmine](#Redmine)
  + [Features](#Features)
  + [Documentation](#Documentation)
  + [Support & getting help](#Support-amp-getting-help)
  + [Contributing and helping out](#Contributing-and-helping-out)
  + [Who uses Redmine?](#Who-uses-Redmine)
  + [Redmine books](#Redmine-books)

Redmine is a flexible project management web application. Written using the Ruby on Rails framework, it is cross-platform and cross-database.

Redmine is open source and released under the terms of the [GNU General Public License v2](http://www.gnu.org/licenses/old-licenses/gpl-2.0.html) (GPL).

## Features[¶](#Features)

Some of the main features of Redmine are:

* [Multiple projects support](/projects/redmine/wiki/RedmineProjects)
* Flexible [role based access control](/projects/redmine/wiki/RedmineRoles)
* Flexible [issue tracking system](/projects/redmine/wiki/RedmineIssues)
* [Gantt chart](/projects/redmine/wiki/RedmineGantt) and [calendar](/projects/redmine/wiki/RedmineCalendar)
* [News](/projects/redmine/wiki/RedmineNews), [documents](/projects/redmine/wiki/RedmineDocuments) & [files](/projects/redmine/wiki/RedmineFiles) management
* Feeds & email notifications
* Per project [wiki](/projects/redmine/wiki/RedmineWikis)
* Per project [forums](/projects/redmine/wiki/RedmineForums)
* [Time tracking](/projects/redmine/wiki/RedmineTimeTracking)
* [Custom fields](/projects/redmine/wiki/RedmineCustomFields) for issues, time-entries, projects and users
* [SCM integration](/projects/redmine/wiki/RedmineRepository) (SVN, CVS, Git, Mercurial and Bazaar)
* [Issue creation via email](/projects/redmine/wiki/RedmineReceivingEmails)
* Multiple [LDAP authentication](/projects/redmine/wiki/RedmineLDAP) support
* [User self-registration](/projects/redmine/wiki/RedmineRegister) support
* Multilanguage support
* [Multiple databases](/projects/redmine/wiki/RedmineInstall#Supported-database-back-ends) support

Read more about [Redmine features](/projects/redmine/wiki/Features).

## Documentation[¶](#Documentation)

You can read the **[Redmine guide](/projects/redmine/wiki/Guide)**.

* [User's Guide](/projects/redmine/wiki/Guide)
* [Developer's Guide](/projects/redmine/wiki/Developer_Guide)

Other resources:

* [Changelog](/projects/redmine/wiki/Changelog)
* [Security Advisories](/projects/redmine/wiki/Security_Advisories)
* [Frequently Asked Questions](/projects/redmine/wiki/FAQ)
* [HowTos](/projects/redmine/wiki/HowTos)
* [Plugins](/projects/redmine/wiki/Plugins)
* [Themes](/projects/redmine/wiki/Themes)
* [Logo and Icon](/projects/redmine/wiki/Logo)
* [Third Party Tools](/projects/redmine/wiki/ThirdPartyTools)

## Support & getting help[¶](#Support-amp-getting-help)

For getting help or discussing Redmine, you can browse the **[Redmine forums](http://www.redmine.org/projects/redmine/boards)** hosted right here in Redmine.

We also have a **[chatroom](/projects/redmine/wiki/IRC)** - [join #redmine](https://web.libera.chat/?channel=#redmine) on the [libera.chat](https://libera.chat) IRC network.

There's also an unofficial workspace on **[Slack](https://join.slack.com/t/redmineorg/shared_invite/zt-ew74bkww-9~Cs~L2oSioRXDljumZ_zg)** where you can ask questions and participate in discussions with other Redmine users.

Before submitting a bug report, a patch or a feature request here, please read the [Submission guidelines](/projects/redmine/wiki/Submissions).

## Contributing and helping out[¶](#Contributing-and-helping-out)

Redmine is built and maintained by community volunteers. If you enjoy using it and would like to give back to the community, the [Contribute](/projects/redmine/wiki/Contribute) page has several ideas. Software development experience is not required. Check out the [Teams](/projects/redmine/wiki/Teams) Page if you are interested in a specific area to contribute regularly.

You can also make a donation and get listed on the [Redmine Donors page](/projects/redmine/wiki/Donors).

## Who uses Redmine?[¶](#Who-uses-Redmine)

[This page lists](/projects/redmine/wiki/WeAreUsingRedmine) some companies and projects using Redmine.

## Redmine books[¶](#Redmine-books)

|  |  |  |
| --- | --- | --- |
| *Mastering Redmine 2nd Edition* is a comprehensive guide with tips, tricks and best practices for using Redmine.You can [buy it online](https://www.packtpub.com/product/mastering-redmine-second-edition/9781785881305). | *Redmine Plugin Extension and Development* provides an overview of the tools available to developers who want to extend Redmine to work their way.You can [buy it online](https://www.packtpub.com/product/redmine-plugin-extension-and-development/9781783288748). | *Redmine Cookbook*: over 80 hands-on recipes to improve your skills in project management, team management, process improvement, and Redmine administration.You can [buy it online](https://www.packtpub.com/product/redmine-cookbook/9781785286131). |

Files (0)

Updated by [Jean-Philippe Lang](/users/1) [almost 2 years](/projects/redmine/activity?from=2023-03-20 "2023-03-20 14:57") ago
· [85 revisions](/projects/redmine/wiki/Overview/history)
locked

Powered by [Redmine](https://www.redmine.org/) © 2006-2023 Jean-Philippe Lang

Loading...


