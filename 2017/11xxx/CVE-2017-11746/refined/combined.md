=== Content from bugs.gentoo.org_90c6748c_20250126_112355.html ===

[![Gentoo Websites Logo](extensions/Gentoo/web/gentoo_org.png)](/ "Go to the Gentoo Bugzilla homepage")
Go to:
[Gentoo Home](https://www.gentoo.org/)
[Documentation](https://www.gentoo.org/support/documentation/)
[Forums](https://forums.gentoo.org/)
[Lists](https://www.gentoo.org/get-involved/mailing-lists/)
[Bugs](/)
[Planet](https://planet.gentoo.org/)
[Store](https://www.gentoo.org/inside-gentoo/stores/)
[Wiki](https://wiki.gentoo.org/)
**[Get Gentoo!](https://www.gentoo.org/downloads/)**

Gentoo's Bugzilla – Bug 6266
ebuild name-PV.ebuild qmerge assignes incorrect value to FILESDIR
Last modified: 2011-10-30 22:18:11 UTC node [vulture]

* [Home](./)
* | [New](enter_bug.cgi?format=guided)–[[Ex]](enter_bug.cgi)
* | [Browse](describecomponents.cgi)
* | [Search](query.cgi)
* | [Privacy Policy](https://wiki.gentoo.org/wiki/Foundation%3APrivacy_Policy)
* |

  [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")
* | [Reports](report.cgi)
* |
  [Requests](request.cgi)
* |
  [Help](https://bugzilla.readthedocs.org/en/5.0/using/understanding.html)
* |
  [New Account](createaccount.cgi)
* |
  [Log In](show_bug.cgi?id=6266&GoAheadAndLogIn=1)

  [x]
* |
  [Forgot Password](show_bug.cgi?id=6266&GoAheadAndLogIn=1#forgot)
  Login:

  [x]

[**Bug 6266**](show_bug.cgi?id=6266)
- ebuild name-PV.ebuild qmerge assignes incorrect value to FILESDIR

[Summary:](page.cgi?id=fields.html#short_desc "The bug summary is a short sentence which succinctly describes what the bug is about.")
ebuild name-PV.ebuild qmerge assignes incorrect value to FILESDIR

| | [Status](page.cgi?id=fields.html#bug_status): | RESOLVED FIXED | | --- | --- | |  | | | [Alias:](page.cgi?id=fields.html#alias "A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla.") | None | |  | | | [Product:](describecomponents.cgi "Bugs are categorised into Products and Components.") | Portage Development | | [Classification:](page.cgi?id=fields.html#classification "Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation.") | Unclassified | | [Component:](describecomponents.cgi?product=Portage Development "Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list.") | Unclassified ([show other bugs](buglist.cgi?component=Unclassified&product=Portage%20Development&bug_status=__open__)) | | [Hardware:](page.cgi?id=fields.html#rep_platform "The hardware platform the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | x86 Linux | |  | | | [Importance](page.cgi?id=fields.html#importance): | High normal | | [Assignee:](page.cgi?id=fields.html#assigned_to "The person in charge of resolving the bug.") | George Shapovalov (RETIRED) | |  | | | [URL:](page.cgi?id=fields.html#bug_file_loc "Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen.") |  | | [Whiteboard:](page.cgi?id=fields.html#status_whiteboard "Each bug has a free-form single line text entry box for adding tags and status information.") |  | | [Keywords:](describekeywords.cgi "You can add keywords from a defined list to bugs, in order to easily identify and group them.") |  | |  | | | [Depends on:](page.cgi?id=fields.html#dependson "The bugs listed here must be resolved before this bug can be resolved.") |  | | [Blocks:](page.cgi?id=fields.html#blocked "This bug must be resolved before the bugs listed in this field can be resolved.") |  | |  | | Reported: | 2002-08-09 17:01 UTC by George Shapovalov (RETIRED) | | --- | --- | | Modified: | 2011-10-30 22:18 UTC ([History](show_activity.cgi?id=6266)) | | CC List: | 1 user (show)  george | |  | | | [See Also:](page.cgi?id=fields.html#see_also "This allows you to refer to bugs in other installations. You can enter a URL to a bug in the 'Add Bug URLs' field to note that that bug is related to this one. You can enter multiple URLs at once by separating them with whitespace. You should normally use this field to refer to bugs in other installations. For bugs in this installation, it is better to use the Depends on and Blocks fields.") |  | | [Package list:](page.cgi?id=fields.html#cf_stabilisation_atoms "Contains a list of packages (and optionally, architectures) to keyword or stabilize. One fully qualified package per line, optionally followed by a space-delimited list of architectures for that package.") |  | | [Runtime testing required:](page.cgi?id=fields.html#cf_runtime_testing_required "Indicate what level of testing is required. For manual testing following instructions in the bug, choose \"Manual\". For only compile-testing, choose \"No\". For where tests must pass, choose \"Yes\".") | --- | |  | | |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| --- | | |

| | Attachments | | | --- | --- | | [Add an attachment](attachment.cgi?bugid=6266&action=enter) (proposed patch, testcase, etc.) | |   | Note You need to [log in](show_bug.cgi?id=6266&GoAheadAndLogIn=1) before you can comment on or make changes to this bug. | | --- | |  |
| --- | --- | --- | --- | --- | --- | --- |

| [Description](#c0)  George Shapovalov (RETIRED)   gentoo-dev  2002-08-09 17:01:55 UTC  ``` I have noticed the following while processing net-misc/omniORB-305.ebuild: (however the issue seems to be not omniORB related)  host# emerge -b omniORB [long build and install skipped] Performing post-installation routines for omniORB-305. /usr/bin/python: can't open file '/var/tmp/portage-pkg/omniORB-305/inf/files/mkomnistubs.py'  the same happens if I do ebuild omniORB-305.ebuild qmerge (after processing the ebuild PN-PV.ebuild unpack compile install)  When I do "emerge omniORB" (no -b, just plain emerge) everything is fine.   The relevant lines in ebuild:  pkg_postinst() {     echo "Performing post-installation routines for ${P}."      if [ ! -f "${ROOT}etc/omniorb/omniORB.cfg" ] ; then         echo "ORBInitialHost `uname -n`" > ${ROOT}etc/omniorb/omniORB.cfg         echo "ORBInitialPort 2809" >> ${ROOT}etc/omniorb/omniORB.cfg     fi      /usr/bin/python ${FILESDIR}/mkomnistubs.py }     The last line in the function is the one where "emerge -b" or ebuild complain. Apparently FILESDIR gets assigned the path under /var/tmp/${PF} (possibly starting the seacrh/assignment in local dir) instead of ${PORTAGEROOT}/cat/pkg/files. I tries to put "echo $FILESDIR" right before the problemmatic line. This confirms misassignment by ebuild and emerge -b, while plain emerge assigns correct value.  This was observed with portage 2.0.27, 2.0.26 and may go a while back.  George ```  [Comment 1](#c1)  Daniel Robbins (RETIRED)   gentoo-dev  2002-08-18 19:56:29 UTC  ``` ${FILESDIR} can't be used in pkg_postinst() and friends; if we are installing from .tbz2 then we have no filesdir since we can't depend on the right files being in /usr/portage/cat/pkg/files/ in the rsync tree. If you need to run "mkomnistubs.py" as it appears you do, then you need to install it to some location on the real filesystem in src_install(), and then you can run it in pkg_postinst(). ie:  src_install() {   exeinto /usr/share/doc/${PF}   doexe ${FILESDIR}/mkomnistubs.py   ... }  pkg_postinst() {   /usr/bin/python2.2 ${ROOT}usr/share/doc/${PF}/mkomnistubs.py }  Or something like that. Assigning back to you....  ```  [Comment 2](#c2)  George Shapovalov (RETIRED)   gentoo-dev  2002-09-02 13:12:58 UTC  ``` Fixed and unmasked omniORB-305, closing this bug.  George ``` |  |
| --- | --- |

---

* [Format For Printing](show_bug.cgi?format=multiple&id=6266)
* - [XML](show_bug.cgi?ctype=xml&id=6266)
* - [Clone This Bug](enter_bug.cgi?cloned_bug_id=6266)
* - [Clone In The Same
  Product](enter_bug.cgi?cloned_bug_id=6266&product=Portage%20Development)
* - Top of page

* + [Home](./)
  + | [New](enter_bug.cgi?format=guided)–[[Ex]](enter_bug.cgi)
  + | [Browse](describecomponents.cgi)
  + | [Search](query.cgi)
  + | [Privacy Policy](https://wiki.gentoo.org/wiki/Foundation%3APrivacy_Policy)
  + |

    [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")
  + | [Reports](report.cgi)
  + |
    [Requests](request.cgi)
  + |
    [Help](https://bugzilla.readthedocs.org/en/5.0/using/understanding.html)
  + |
    [New Account](createaccount.cgi)
  + |
    [Log In](show_bug.cgi?id=6266&GoAheadAndLogIn=1)

    [x]
  + |
    [Forgot Password](show_bug.cgi?id=6266&GoAheadAndLogIn=1#forgot)
    Login:

    [x]



=== Content from security.gentoo.org_d4f79cef_20250125_193559.html ===

[![Gentoo](https://assets.gentoo.org/tyrian/v2/site-logo.png)](/ "Back to the homepage")
Security

[**Get Gentoo!**](https://get.gentoo.org/)
gentoo.org sites
[gentoo.org](https://www.gentoo.org/ "Main Gentoo website")
[Wiki](https://wiki.gentoo.org/ "Find and contribute documentation")
[Bugs](https://bugs.gentoo.org/ "Report issues and find common issues")
[Forums](https://forums.gentoo.org/ "Discuss with the community")
[Packages](https://packages.gentoo.org/ "Find software for your Gentoo")

[Planet](https://planet.gentoo.org/ "Find out what's going on in the developer community")
[Archives](https://archives.gentoo.org/ "Read up on past discussions")
[Sources](https://sources.gentoo.org/ "Browse our source code")

[Infra Status](https://infra-status.gentoo.org/ "Get updates on the services provided by Gentoo")

* [Home](/)
* [Stay informed](/subscribe)
* [Advisories](/glsa)

# tenshi: Privilege escalation — GLSA **201804-18**

Gentoo's tenshi ebuild is vulnerable to privilege escalation due to
the way pid files are handled.

### Affected packages

| Package | **app-admin/tenshi** on all architectures |
| --- | --- |
| Affected versions | < **0.17** |
| Unaffected versions | >= **0.17** |

### Background

A log monitoring program, designed to watch one or more log files for
lines matching user defined regular expressions and report on the
matches.

### Description

It was discovered that the tenshi ebuild creates a tenshi.pid file after
dropping privileges to a non-root account.

### Impact

A local attacker could escalate privileges to root or kill arbitrary
processes.

### Workaround

There is no known workaround at this time.

### Resolution

All tenshi users should upgrade to the latest version:

```
 # emerge --sync
 # emerge --ask --oneshot --verbose ">=app-admin/tenshi-0.17"

```
### References

* [CVE-2017-11746](https://nvd.nist.gov/vuln/detail/CVE-2017-11746)

**Release date**

April 22, 2018

**Latest revision**

April 22, 2018: 1

**Severity**

normal

**Exploitable**

local

**Bugzilla entries**

* [626654](https://bugs.gentoo.org/show_bug.cgi?id=626654)

### Questions or comments?

Please feel free to contact us.

**© 2001–2020 Gentoo Foundation, Inc.**


