=== Content from sourceware.org_e15c4969_20250125_172803.html ===


Sourceware Bugzilla – Bug 22009
Excessive memory allocation resulting from memory leakge due to incorrect handling of input file
Last modified: 2019-01-01 21:18:05 UTC

* [Home](./)
* | [New](enter_bug.cgi)
* | [Browse](describecomponents.cgi)
* | [Search](query.cgi)
* |

  [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")
* | [Reports](report.cgi)
* |
  [Requests](request.cgi)
* |
  [Help](https://bugzilla.readthedocs.org/en/5.0/using/understanding.html)
* |
  [New Account](createaccount.cgi)
* |
  [Log In](show_bug.cgi?id=22009&GoAheadAndLogIn=1)

  [x]
* |
  [Forgot Password](show_bug.cgi?id=22009&GoAheadAndLogIn=1#forgot)
  Login:

  [x]

[**Bug 22009**](show_bug.cgi?id=22009)
- Excessive memory allocation resulting from memory leakge due to incorrect handling of input file

[Summary:](page.cgi?id=fields.html#short_desc "The bug summary is a short sentence which succinctly describes what the bug is about.")
Excessive memory allocation resulting from memory leakge due to incorrect han...

| | [Status](page.cgi?id=fields.html#bug_status): | RESOLVED WONTFIX | | --- | --- | |  | | | [Alias:](page.cgi?id=fields.html#alias "A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla.") | None | |  | | | [Product:](describecomponents.cgi "Bugs are categorised into Products and Components.") | binutils | | [Classification:](page.cgi?id=fields.html#classification "Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation.") | Unclassified | | [Component:](describecomponents.cgi?product=binutils "Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list.") | binutils ([show other bugs](buglist.cgi?component=binutils&product=binutils&bug_status=__open__)) | | [Version:](page.cgi?id=fields.html#version "The version field defines the version of the software the bug was found in.") | 2.29 | |  | | | [Importance](page.cgi?id=fields.html#importance): | P2 normal | | [Target Milestone:](page.cgi?id=fields.html#target_milestone "The Target Milestone field is used to define when the engineer the bug is assigned to expects to fix it.") | --- | | [Assignee:](page.cgi?id=fields.html#assigned_to "The person in charge of resolving the bug.") | Not yet assigned to anyone | |  | | | [URL:](page.cgi?id=fields.html#bug_file_loc "Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen.") |  | | [Keywords:](describekeywords.cgi "You can add keywords from a defined list to bugs, in order to easily identify and group them.") |  | |  | | | [Depends on:](page.cgi?id=fields.html#dependson "The bugs listed here must be resolved before this bug can be resolved.") |  | | [Blocks:](page.cgi?id=fields.html#blocked "This bug must be resolved before the bugs listed in this field can be resolved.") |  | |  | | Reported: | 2017-08-25 16:39 UTC by Adhokshaj Mishra | | --- | --- | | Modified: | 2019-01-01 21:18 UTC ([History](show_activity.cgi?id=22009)) | | CC List: | 4 users (show)  carnil dilfridge nickc norm.jacobs | |  | | | [See Also:](page.cgi?id=fields.html#see_also "This allows you to refer to bugs in other installations. You can enter a URL to a bug in the 'Add Bug URLs' field to note that that bug is related to this one. You can enter multiple URLs at once by separating them with whitespace. You should normally use this field to refer to bugs in other installations. For bugs in this installation, it is better to use the Depends on and Blocks fields.") |  | | [Host:](page.cgi?id=fields.html#cf_gcchost "A custom Free Text field in this installation of Bugzilla.") |  | | [Target:](page.cgi?id=fields.html#cf_gcctarget "A custom Free Text field in this installation of Bugzilla.") |  | | [Build:](page.cgi?id=fields.html#cf_gccbuild "A custom Free Text field in this installation of Bugzilla.") |  | | [Last reconfirmed:](page.cgi?id=fields.html#cf_reconfirmed_on "A custom Date/Time field in this installation of Bugzilla.") |  | |  | | |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| --- | | |

| | Attachments | | | --- | --- | | [**Payload file which was passed to objdump**](attachment.cgi?id=10367 "View the content of the attachment") (185 bytes, application/octet-stream)  [2017-08-25 16:39 UTC](#attach_10367 "Go to the comment associated with the attachment"), Adhokshaj Mishra | [Details](attachment.cgi?id=10367&action=edit) | | [**Partial trace from ltrace**](attachment.cgi?id=10368 "View the content of the attachment") (35.90 KB, text/plain)  [2017-08-25 18:55 UTC](#attach_10368 "Go to the comment associated with the attachment"), Adhokshaj Mishra | [Details](attachment.cgi?id=10368&action=edit) | | [**Massif output**](attachment.cgi?id=10369 "View the content of the attachment") (6.67 KB, text/plain)  [2017-08-25 18:57 UTC](#attach_10369 "Go to the comment associated with the attachment"), Adhokshaj Mishra | [Details](attachment.cgi?id=10369&action=edit) | | [View All](attachment.cgi?bugid=22009&action=viewall)  [Add an attachment](attachment.cgi?bugid=22009&action=enter) (proposed patch, testcase, etc.) | |   | Note You need to [log in](show_bug.cgi?id=22009&GoAheadAndLogIn=1) before you can comment on or make changes to this bug. | | --- | |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |

| [Description](show_bug.cgi?id=22009#c0)  Adhokshaj Mishra    2017-08-25 16:39:48 UTC  ``` Created [attachment 10367](attachment.cgi?id=10367 "Payload file which was passed to objdump") [[details]](attachment.cgi?id=10367&action=edit "Payload file which was passed to objdump") Payload file which was passed to objdump  When objdump is invoked with a specially crafted file, it goes on memeory allocation spree until it cannot allocate it anymore, and then it crashes.  Command  ./objdump -x -C ./payload  Backtrace (soon after issue starts)  #0  0x00007f929418a015 in __strstr_sse2_unaligned () from /usr/lib/libc.so.6 #1  0x000055555570a1b1 in arm_pt (work=0x7fffffffdae0, mangled=0x555555ae32a5 "A______", 'w' <repeats 193 times>..., n=0x15558, anchor=0x7fffffffd5a8, args=0x7fffffffd5b0)     at ./cplus-dem.c:2392 #2  0x000055555570a623 in demangle_arm_hp_template (work=0x7fffffffdae0, mangled=0x7fffffffd828, n=0x15558, declp=0x7fffffffd6a0) at ./cplus-dem.c:2507 #3  0x000055555570aa00 in demangle_class_name (work=0x7fffffffdae0, mangled=0x7fffffffd828, declp=0x7fffffffd6a0) at ./cplus-dem.c:2614 #4  0x000055555570dc4b in demangle_fund_type (work=0x7fffffffdae0, mangled=0x7fffffffd828, result=0x555555a67240) at ./cplus-dem.c:4118 #5  0x000055555570d240 in do_type (work=0x7fffffffdae0, mangled=0x7fffffffd828, result=0x555555a67240) at ./cplus-dem.c:3907 #6  0x000055555570e2db in do_arg (work=0x7fffffffdae0, mangled=0x7fffffffd828, result=0x7fffffffd830) at ./cplus-dem.c:4332 #7  0x000055555570ebd4 in demangle_args (work=0x7fffffffdae0, mangled=0x7fffffffda60, declp=0x7fffffffda90) at ./cplus-dem.c:4641 #8  0x0000555555708a7c in demangle_signature (work=0x7fffffffdae0, mangled=0x7fffffffda60, declp=0x7fffffffda90) at ./cplus-dem.c:1732 #9  0x000055555570adb2 in iterate_demangle_function (work=0x7fffffffdae0, mangled=0x7fffffffda60, declp=0x7fffffffda90,      scan=0x555555a8bc21 "__87384A______", 'w' <repeats 186 times>...) at ./cplus-dem.c:2743 #10 0x000055555570b619 in demangle_prefix (work=0x7fffffffdae0, mangled=0x7fffffffda60, declp=0x7fffffffda90) at ./cplus-dem.c:2971 #11 0x000055555570793b in internal_cplus_demangle (work=0x7fffffffdae0, mangled=0x555555aa11a7 "20A__K\377\060\060\060#\344\300") at ./cplus-dem.c:1253 #12 0x0000555555706ea7 in cplus_demangle (mangled=0x555555a8bc20 "\236__87384A______", 'w' <repeats 185 times>..., options=0x3) at ./cplus-dem.c:918 #13 0x0000555555617a6c in bfd_demangle (abfd=0x555555a67000, name=0x555555a8bc20 "\236__87384A______", 'w' <repeats 185 times>..., options=0x3) at bfd.c:1961 #14 0x00005555555b9355 in dump_symbols (abfd=0x555555a67000, dynamic=0x0) at ./objdump.c:3163 #15 0x00005555555ba0df in dump_bfd (abfd=0x555555a67000) at ./objdump.c:3532 #16 0x00005555555ba342 in display_object_bfd (abfd=0x555555a67000) at ./objdump.c:3603 #17 0x00005555555ba596 in display_any_bfd (file=0x555555a67000, level=0x0) at ./objdump.c:3692 #18 0x00005555555ba60b in display_file (filename=0x7fffffffe248 "../../test/payload", target=0x0, last_file=0x1) at ./objdump.c:3713 #19 0x00005555555baf36 in main (argc=0x4, argv=0x7fffffffde88) at ./objdump.c:4015 #20 0x00007f929410f4ca in __libc_start_main () from /usr/lib/libc.so.6 #21 0x00005555555b24da in _start ()  Input file: attached herewith  NOTE: I am still investigating it in depth, and will share more details as soon as I get something. ```  [Comment 1](show_bug.cgi?id=22009#c1)  Adhokshaj Mishra    2017-08-25 18:55:35 UTC  ``` Created [attachment 10368](attachment.cgi?id=10368 "Partial trace from ltrace") [[details]](attachment.cgi?id=10368&action=edit "Partial trace from ltrace") Partial trace from ltrace  This partial trace output from ltrace  ltrace -o trace.txt ./objdump -x -C ./payload 2>&1 > /dev/null ```  [Comment 2](show_bug.cgi?id=22009#c2)  Adhokshaj Mishra    2017-08-25 18:57:14 UTC  ``` Created [attachment 10369](attachment.cgi?id=10369 "Massif output") [[details]](attachment.cgi?id=10369&action=edit "Massif output") Massif output  Output from valgrind massif for 30s run.  valgrind --tool=massif ./objdump -x -C ./payload ```  [Comment 3](show_bug.cgi?id=22009#c3)  Nick Clifton    2017-09-01 10:53:38 UTC  ``` Hi Adhokshaj,    This is a bug in the C++ demangler, which is part of the libiberty sources.   These sources are managed by the GCC project, so please could you refile   this bug report with the GCC bugzilla system ?  Thanks.  Cheers   Nick ```  [Comment 4](show_bug.cgi?id=22009#c4)  Adhokshaj Mishra    2017-09-05 09:56:14 UTC  ``` Sure. Will do that. ```  [Comment 5](show_bug.cgi?id=22009#c5)  Andreas K. Huettel    2017-12-09 22:22:11 UTC  ``` Could you add a link to the bug please? ```  [Comment 6](show_bug.cgi?id=22009#c6)  Salvatore Bonaccorso    2019-01-01 21:18:05 UTC  ``` Was this reported to the GCC bugzilla? ``` |  |
| --- | --- |

---

* [Format For Printing](show_bug.cgi?format=multiple&id=22009)
* - [XML](show_bug.cgi?ctype=xml&id=22009)
* - [Clone This Bug](enter_bug.cgi?cloned_bug_id=22009)
* - Top of page

* + [Home](./)
  + | [New](enter_bug.cgi)
  + | [Browse](describecomponents.cgi)
  + | [Search](query.cgi)
  + |

    [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")
  + | [Reports](report.cgi)
  + |
    [Requests](request.cgi)
  + |
    [Help](https://bugzilla.readthedocs.org/en/5.0/using/understanding.html)
  + |
    [New Account](createaccount.cgi)
  + |
    [Log In](show_bug.cgi?id=22009&GoAheadAndLogIn=1)

    [x]
  + |
    [Forgot Password](show_bug.cgi?id=22009&GoAheadAndLogIn=1#forgot)
    Login:

    [x]


