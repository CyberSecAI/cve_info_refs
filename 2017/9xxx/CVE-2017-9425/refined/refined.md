Based on the provided content, here's a breakdown of the vulnerability:

**Root Cause:**
The root cause of this vulnerability is the lack of proper input sanitization in the Facetag plugin for Piwigo. Specifically, when a user tags a face on an image, the provided tag name is directly inserted into the database without being sanitized or encoded.

**Weaknesses/Vulnerabilities:**
- **Stored Cross-Site Scripting (XSS):** The primary vulnerability is a stored XSS. Malicious JavaScript code can be injected into the tag name field, and this script is then stored in the database. When this data is later displayed, the injected script will execute in the user's browser.

**Impact of Exploitation:**
- **Arbitrary JavaScript Execution:** An attacker can execute arbitrary JavaScript in the context of a user's browser.
- **Account Hijacking:** This can lead to session hijacking, where the attacker steals user cookies and impersonates the victim user.
- **Defacement:** The attacker could modify the website's appearance or content.
- **Malware Distribution:** It could be used to redirect users to malicious websites or initiate drive-by downloads of malware.

**Attack Vectors:**
- **HTTP POST Request:** The attack is initiated by sending a POST request to `/ws.php?format=json&method=facetag.changeTag`.
- **Malicious Tag Name:** The core of the attack is injecting malicious JavaScript in the `name` parameter of the POST request.
- **Image Tagging:**  The attacker uses the face tagging feature of the plugin to submit the malicious tag name.

**Required Attacker Capabilities/Position:**
- **Access to Photo Page:** The attacker needs to be able to access the photo page of the Piwigo installation where the plugin is active.
- **Plugin Usage:** The attacker needs to be able to utilize the tagging feature of the Facetag plugin. This can be done by any visitor or registered user.
- **Ability to send HTTP POST Requests:** The attacker needs to be able to craft a malicious POST request with the injected JavaScript.

The provided content offers a good description of the vulnerability and includes a proof of concept. The vulnerability lies within the `facetag_changeTag` function, where user-supplied input (`$params['name']`) is directly inserted into the database using `addImageFaceTag`.