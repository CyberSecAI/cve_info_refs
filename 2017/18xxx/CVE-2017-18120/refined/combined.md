=== Content from bugs.debian.org_c08189bd_20250125_135302.html ===

# Debian Bug report logs - #881120 gifsicle: use after free while running gifsicle

[![version graph](version.cgi?absolute=0;package=gifsicle;height=2;found=gifsicle%2F1.90-1;collapse=1;width=2;fixed=gifsicle%2F1.91-2)](version.cgi?fixed=gifsicle%2F1.91-2;found=gifsicle%2F1.90-1;absolute=0;package=gifsicle;collapse=1;info=1)

Package:
[gifsicle](pkgreport.cgi?package=gifsicle);
Maintainer for [gifsicle](pkgreport.cgi?package=gifsicle) is [Alex Myczko <tar@debian.org>](pkgreport.cgi?maint=tar%40debian.org); Source for [gifsicle](pkgreport.cgi?package=gifsicle) is [src:gifsicle](pkgreport.cgi?src=gifsicle) ([PTS](https://tracker.debian.org/pkg/gifsicle), [buildd](https://buildd.debian.org/gifsicle), [popcon](https://qa.debian.org/popcon.php?package=gifsicle)).

Reported by: [Joonun Jang <joonun.jang@gmail.com>](pkgreport.cgi?submitter=joonun.jang%40gmail.com)

Date: Wed, 8 Nov 2017 01:51:01 UTC

Severity: important

Tags: fixed-upstream, security

Found in version gifsicle/1.90-1

Fixed in version gifsicle/1.91-2

**Done:** Herbert Parentes Fortes Neto <hpfn@debian.org>

Bug is archived. No further changes may be made.

Forwarded to <https://github.com/kohler/gifsicle/issues/123>

Display info messages

View this report as an [mbox folder](bugreport.cgi?bug=881120;mbox=yes), [status mbox](bugreport.cgi?bug=881120;mbox=yes;mboxstatus=yes), [maintainer mbox](bugreport.cgi?bug=881120;mbox=yes;mboxmaint=yes)

---

**Report forwarded**
to `debian-bugs-dist@lists.debian.org, joonun.jang@gmail.com, team@security.debian.org, secure-testing-team@lists.alioth.debian.org, Herbert Parentes Fortes Neto <hpfn@debian.org>`:

`Bug#881120`; Package `gifsicle`.
(Wed, 08 Nov 2017 01:51:04 GMT) ([full text](bugreport.cgi?bug=881120;msg=2), [mbox](bugreport.cgi?bug=881120;mbox=yes;msg=2), [link](#1)).

---

**Acknowledgement sent**
to `Joonun Jang <joonun.jang@gmail.com>`:

New Bug report received and forwarded. Copy sent to `joonun.jang@gmail.com, team@security.debian.org, secure-testing-team@lists.alioth.debian.org, Herbert Parentes Fortes Neto <hpfn@debian.org>`.
(Wed, 08 Nov 2017 01:51:04 GMT) ([full text](bugreport.cgi?bug=881120;msg=4), [mbox](bugreport.cgi?bug=881120;mbox=yes;msg=4), [link](#3)).

---

[Message #5](#5) received at submit@bugs.debian.org ([full text](bugreport.cgi?bug=881120;msg=5), [mbox](bugreport.cgi?bug=881120;mbox=yes;msg=5), reply):

![](/cgi-bin/libravatar.cgi?email=joonun.jang%40gmail.com)
From: Joonun Jang <joonun.jang@gmail.com>
To: Debian Bug Tracking System <submit@bugs.debian.org>
Subject: gifsicle: use after free while running gifsicle
Date: Wed, 08 Nov 2017 10:48:57 +0900
```
[[Message part 1](bugreport.cgi?att=0;bug=881120;msg=5) (text/plain, inline)]
```
```
Package: gifsicle
Version: 1.90-1
Severity: important
Tags: security

use after free while running gifsicle with "poc poc -o output" option

Running 'gifsicle poc poc -o output' with the attached file raises use after free
which may allow a remote attack to cause a denial-of-service attack or other unspecified
impact with a crafted file
I expected the program to terminate without segfault, but the program crashes as follow

-------------------------------------------

june@yuweol:~/poc/gifsicle/crash3$ gifsicle poc poc -o output
gifsicle:poc:#0: read error: unknown block type 49 at file offset 13
gifsicle:poc: read error: image position and/or dimensions out of range
gifsicle:poc:#0: read error: unknown block type 49 at file offset 13
gifsicle:poc: read error: image position and/or dimensions out of range
*** Error in `gifsicle': corrupted size vs. prev_size: 0x00005607ed886d40 ***
======= Backtrace: =========
/lib/x86_64-linux-gnu/libc.so.6(+0x70bfb)[0x7f4338e5abfb]
/lib/x86_64-linux-gnu/libc.so.6(+0x76fc6)[0x7f4338e60fc6]
/lib/x86_64-linux-gnu/libc.so.6(+0x7738d)[0x7f4338e6138d]
/lib/x86_64-linux-gnu/libc.so.6(+0x78dfa)[0x7f4338e62dfa]
/lib/x86_64-linux-gnu/libc.so.6(__libc_malloc+0x54)[0x7f4338e64f64]
gifsicle(+0x877e)[0x5607ecfff77e]
gifsicle(+0x21a51)[0x5607ed018a51]
gifsicle(+0x22d97)[0x5607ed019d97]
gifsicle(+0x1f674)[0x5607ed016674]
gifsicle(+0x209a3)[0x5607ed0179a3]
gifsicle(+0x4054)[0x5607ecffb054]
/lib/x86_64-linux-gnu/libc.so.6(__libc_start_main+0xf1)[0x7f4338e0a2e1]
gifsicle(+0x472a)[0x5607ecffb72a]
======= Memory map: ========
5607ecff7000-5607ed024000 r-xp 00000000 08:01 2104695                    /usr/bin/gifsicle
5607ed224000-5607ed225000 r--p 0002d000 08:01 2104695                    /usr/bin/gifsicle
5607ed225000-5607ed226000 rw-p 0002e000 08:01 2104695                    /usr/bin/gifsicle
5607ed885000-5607ed8ad000 rw-p 00000000 00:00 0                          [heap]
7f4334000000-7f4334021000 rw-p 00000000 00:00 0
7f4334021000-7f4338000000 ---p 00000000 00:00 0
7f4338bd3000-7f4338be9000 r-xp 00000000 08:01 2235139                    /lib/x86_64-linux-gnu/libgcc_s.so.1
7f4338be9000-7f4338de8000 ---p 00016000 08:01 2235139                    /lib/x86_64-linux-gnu/libgcc_s.so.1
7f4338de8000-7f4338de9000 r--p 00015000 08:01 2235139                    /lib/x86_64-linux-gnu/libgcc_s.so.1
7f4338de9000-7f4338dea000 rw-p 00016000 08:01 2235139                    /lib/x86_64-linux-gnu/libgcc_s.so.1
7f4338dea000-7f4338f7d000 r-xp 00000000 08:01 2235485                    /lib/x86_64-linux-gnu/libc-2.24.so
7f4338f7d000-7f433917d000 ---p 00193000 08:01 2235485                    /lib/x86_64-linux-gnu/libc-2.24.so
7f433917d000-7f4339181000 r--p 00193000 08:01 2235485                    /lib/x86_64-linux-gnu/libc-2.24.so
7f4339181000-7f4339183000 rw-p 00197000 08:01 2235485                    /lib/x86_64-linux-gnu/libc-2.24.so
7f4339183000-7f4339187000 rw-p 00000000 00:00 0
7f4339187000-7f433928a000 r-xp 00000000 08:01 2235490                    /lib/x86_64-linux-gnu/libm-2.24.so
7f433928a000-7f4339489000 ---p 00103000 08:01 2235490                    /lib/x86_64-linux-gnu/libm-2.24.so
7f4339489000-7f433948a000 r--p 00102000 08:01 2235490                    /lib/x86_64-linux-gnu/libm-2.24.so
7f433948a000-7f433948b000 rw-p 00103000 08:01 2235490                    /lib/x86_64-linux-gnu/libm-2.24.so
7f433948b000-7f43394a3000 r-xp 00000000 08:01 2235501                    /lib/x86_64-linux-gnu/libpthread-2.24.so
7f43394a3000-7f43396a2000 ---p 00018000 08:01 2235501                    /lib/x86_64-linux-gnu/libpthread-2.24.so
7f43396a2000-7f43396a3000 r--p 00017000 08:01 2235501                    /lib/x86_64-linux-gnu/libpthread-2.24.so
7f43396a3000-7f43396a4000 rw-p 00018000 08:01 2235501                    /lib/x86_64-linux-gnu/libpthread-2.24.so
7f43396a4000-7f43396a8000 rw-p 00000000 00:00 0
7f43396a8000-7f43396cb000 r-xp 00000000 08:01 2230784                    /lib/x86_64-linux-gnu/ld-2.24.so
7f43398a6000-7f43398a8000 rw-p 00000000 00:00 0
7f43398c7000-7f43398cb000 rw-p 00000000 00:00 0
7f43398cb000-7f43398cc000 r--p 00023000 08:01 2230784                    /lib/x86_64-linux-gnu/ld-2.24.so
7f43398cc000-7f43398cd000 rw-p 00024000 08:01 2230784                    /lib/x86_64-linux-gnu/ld-2.24.so
7f43398cd000-7f43398ce000 rw-p 00000000 00:00 0
7ffddc943000-7ffddc964000 rw-p 00000000 00:00 0                          [stack]
7ffddc96f000-7ffddc971000 r--p 00000000 00:00 0                          [vvar]
7ffddc971000-7ffddc973000 r-xp 00000000 00:00 0                          [vdso]
ffffffffff600000-ffffffffff601000 r-xp 00000000 00:00 0                  [vsyscall]
Aborted

-------------------------------------------

june@yuweol:~/poc/gifsicle/crash3$ ~/project/analyze/bins/gifsicle-1.90/src/gifsicle poc poc -o output
gifsicle:poc:#0: read error: unknown block type 49 at file offset 13
gifsicle:poc: read error: image position and/or dimensions out of range
gifsicle:poc:#0: read error: unknown block type 49 at file offset 13
gifsicle:poc: read error: image position and/or dimensions out of range
=================================================================
==4710==ERROR: AddressSanitizer: heap-use-after-free on address 0x608000000020 at pc 0x7fb750ff7994 bp 0x7ffd9ce72e40 sp 0x7ffd9ce725f0
READ of size 2 at 0x608000000020 thread T0
    #0 0x7fb750ff7993  (/usr/lib/x86_64-linux-gnu/libasan.so.4+0x4f993)
    #1 0x561e458994b7 in Gif_CopyString (/home/june/project/analyze/bins/gifsicle-1.90/src/gifsicle+0x214b7)
    #2 0x561e458a9efc in merge_image (/home/june/project/analyze/bins/gifsicle-1.90/src/gifsicle+0x31efc)
    #3 0x561e458df0d4 in merge_frame_interval (/home/june/project/analyze/bins/gifsicle-1.90/src/gifsicle+0x670d4)
    #4 0x561e458f55db in merge_and_write_frames (/home/june/project/analyze/bins/gifsicle-1.90/src/gifsicle+0x7d5db)
    #5 0x561e458f5f77 in output_frames (/home/june/project/analyze/bins/gifsicle-1.90/src/gifsicle+0x7df77)
    #6 0x561e458fb3c7 in main (/home/june/project/analyze/bins/gifsicle-1.90/src/gifsicle+0x833c7)
    #7 0x7fb7509272e0 in __libc_start_main (/lib/x86_64-linux-gnu/libc.so.6+0x202e0)
    #8 0x561e45887da9 in _start (/home/june/project/analyze/bins/gifsicle-1.90/src/gifsicle+0xfda9)

0x608000000020 is located 0 bytes inside of 87-byte region [0x608000000020,0x608000000077)
freed by thread T0 here:
    #0 0x7fb7510818c8 in __interceptor_free (/usr/lib/x86_64-linux-gnu/libasan.so.4+0xd98c8)
    #1 0x561e458a43ae in read_gif (/home/june/project/analyze/bins/gifsicle-1.90/src/gifsicle+0x2c3ae)
    #2 0x561e458a48cd in Gif_FullReadFile (/home/june/project/analyze/bins/gifsicle-1.90/src/gifsicle+0x2c8cd)
    #3 0x561e458f401d in input_stream (/home/june/project/analyze/bins/gifsicle-1.90/src/gifsicle+0x7c01d)
    #4 0x561e458fb2e2 in main (/home/june/project/analyze/bins/gifsicle-1.90/src/gifsicle+0x832e2)
    #5 0x7fb7509272e0 in __libc_start_main (/lib/x86_64-linux-gnu/libc.so.6+0x202e0)

previously allocated by thread T0 here:
    #0 0x7fb751081fd0 in __interceptor_realloc (/usr/lib/x86_64-linux-gnu/libasan.so.4+0xd9fd0)
    #1 0x561e45897de8 in Gif_Realloc (/home/june/project/analyze/bins/gifsicle-1.90/src/gifsicle+0x1fde8)
    #2 0x561e458a29db in suck_data (/home/june/project/analyze/bins/gifsicle-1.90/src/gifsicle+0x2a9db)
    #3 0x561e458a3fe2 in read_gif (/home/june/project/analyze/bins/gifsicle-1.90/src/gifsicle+0x2bfe2)
    #4 0x561e458a48cd in Gif_FullReadFile (/home/june/project/analyze/bins/gifsicle-1.90/src/gifsicle+0x2c8cd)
    #5 0x561e458f401d in input_stream (/home/june/project/analyze/bins/gifsicle-1.90/src/gifsicle+0x7c01d)
    #6 0x561e458fb2e2 in main (/home/june/project/analyze/bins/gifsicle-1.90/src/gifsicle+0x832e2)
    #7 0x7fb7509272e0 in __libc_start_main (/lib/x86_64-linux-gnu/libc.so.6+0x202e0)

SUMMARY: AddressSanitizer: heap-use-after-free (/usr/lib/x86_64-linux-gnu/libasan.so.4+0x4f993)
Shadow bytes around the buggy address:
  0x0c107fff7fb0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
  0x0c107fff7fc0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
  0x0c107fff7fd0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
  0x0c107fff7fe0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
  0x0c107fff7ff0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
=>0x0c107fff8000: fa fa fa fa[fd]fd fd fd fd fd fd fd fd fd fd fa
  0x0c107fff8010: fa fa fa fa fd fd fd fd fd fd fd fd fd fd fd fa
  0x0c107fff8020: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa
  0x0c107fff8030: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa
  0x0c107fff8040: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa
  0x0c107fff8050: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa
Shadow byte legend (one shadow byte represents 8 application bytes):
  Addressable:           00
  Partially addressable: 01 02 03 04 05 06 07
  Heap left redzone:       fa
  Freed heap region:       fd
  Stack left redzone:      f1
  Stack mid redzone:       f2
  Stack right redzone:     f3
  Stack after return:      f5
  Stack use after scope:   f8
  Global redzone:          f9
  Global init order:       f6
  Poisoned by user:        f7
  Container overflow:      fc
  Array cookie:            ac
  Intra object redzone:    bb
  ASan internal:           fe
  Left alloca redzone:     ca
  Right alloca redzone:    cb
==4710==ABORTING

-------------------------------------------

This bug was found with a fuzzer developed by 'SoftSec' group at KAIST.

-- System Information:
Debian Release: buster/sid
  APT prefers unstable-debug
  APT policy: (500, 'unstable-debug'), (500, 'testing-debug'), (500, 'stable-updates'), (500, 'testing'), (500, 'stable'), (1, 'experimental-debug')
Architecture: amd64 (x86_64)

Kernel: Linux 4.9.0-3-amd64 (SMP w/1 CPU core)
Locale: LANG=en_US.UTF-8, LC_CTYPE=en_US.UTF-8 (charmap=UTF-8), LANGUAGE=en_US:en (charmap=UTF-8)
Shell: /bin/sh linked to /bin/dash
Init: systemd (via /run/systemd/system)

Versions of packages gifsicle depends on:
ii  libc6     2.24-17
ii  libx11-6  2:1.6.4-3

gifsicle recommends no packages.

gifsicle suggests no packages.

-- no debconf information

```
```
[[poc](bugreport.cgi?att=1;bug=881120;filename=poc;msg=5) (application/octet-stream, attachment)]
```

---

**Information forwarded**
to `debian-bugs-dist@lists.debian.org, Herbert Parentes Fortes Neto <hpfn@debian.org>`:

`Bug#881120`; Package `gifsicle`.
(Thu, 04 Jan 2018 13:39:07 GMT) ([full text](bugreport.cgi?bug=881120;msg=7), [mbox](bugreport.cgi?bug=881120;mbox=yes;msg=7), [link](#6)).

---

**Acknowledgement sent**
to `Herbert Fortes <terberh@gmail.com>`:

Extra info received and forwarded to list. Copy sent to `Herbert Parentes Fortes Neto <hpfn@debian.org>`.
(Thu, 04 Jan 2018 13:39:07 GMT) ([full text](bugreport.cgi?bug=881120;msg=9), [mbox](bugreport.cgi?bug=881120;mbox=yes;msg=9), [link](#8)).

---

[Message #10](#10) received at 881120@bugs.debian.org ([full text](bugreport.cgi?bug=881120;msg=10), [mbox](bugreport.cgi?bug=881120;mbox=yes;msg=10), reply):

![](/cgi-bin/libravatar.cgi?email=terberh%40gmail.com)
From: Herbert Fortes <terberh@gmail.com>
To: control@bugs.debian.org, 881120@bugs.debian.org
Subject: Re: Bug#881120: gifsicle: use after free while running gifsicle
Date: Thu, 4 Jan 2018 11:34:57 -0200
```
forwarded 881120 <https://github.com/kohler/gifsicle/issues/123>
thanks

```

---

**Set Bug forwarded-to-address to '<https://github.com/kohler/gifsicle/issues/123>'.**
Request was from `Herbert Fortes <terberh@gmail.com>`
to `control@bugs.debian.org`.
(Thu, 04 Jan 2018 13:39:09 GMT) ([full text](bugreport.cgi?bug=881120;msg=12), [mbox](bugreport.cgi?bug=881120;mbox=yes;msg=12), [link](#11)).

---

**Added tag(s) fixed-upstream.**
Request was from `bts-link-upstream@lists.alioth.debian.org`
to `control@bugs.debian.org`.
(Mon, 08 Jan 2018 17:09:39 GMT) ([full text](bugreport.cgi?bug=881120;msg=14), [mbox](bugreport.cgi?bug=881120;mbox=yes;msg=14), [link](#13)).

---

**Reply sent**
to `Herbert Parentes Fortes Neto <hpfn@debian.org>`:

You have taken responsibility.
(Tue, 09 Jan 2018 10:30:39 GMT) ([full text](bugreport.cgi?bug=881120;msg=16), [mbox](bugreport.cgi?bug=881120;mbox=yes;msg=16), [link](#15)).

---

**Notification sent**
to `Joonun Jang <joonun.jang@gmail.com>`:

Bug acknowledged by developer.
(Tue, 09 Jan 2018 10:30:40 GMT) ([full text](bugreport.cgi?bug=881120;msg=18), [mbox](bugreport.cgi?bug=881120;mbox=yes;msg=18), [link](#17)).

---

[Message #19](#19) received at 881120-close@bugs.debian.org ([full text](bugreport.cgi?bug=881120;msg=19), [mbox](bugreport.cgi?bug=881120;mbox=yes;msg=19), reply):

![](/cgi-bin/libravatar.cgi?email=hpfn%40debian.org)
From: Herbert Parentes Fortes Neto <hpfn@debian.org>
To: 881120-close@bugs.debian.org
Subject: Bug#881120: fixed in gifsicle 1.91-2
Date: Tue, 09 Jan 2018 10:19:18 +0000
```
Source: gifsicle
Source-Version: 1.91-2

We believe that the bug you reported is fixed in the latest version of
gifsicle, which is due to be installed in the Debian FTP archive.

A summary of the changes between this version and the previous one is
attached.

Thank you for reporting the bug, which will now be closed.  If you
have further comments please address them to 881120@bugs.debian.org,
and the maintainer will reopen the bug report if appropriate.

Debian distribution maintenance software
pp.
Herbert Parentes Fortes Neto <hpfn@debian.org> (supplier of updated gifsicle package)

(This message was generated automatically at their request; if you
believe that there is a problem with it please contact the archive
administrators by mailing ftpmaster@ftp-master.debian.org)

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA512

Format: 1.8
Date: Tue, 09 Jan 2018 07:54:35 -0200
Source: gifsicle
Binary: gifsicle
Architecture: source
Version: 1.91-2
Distribution: unstable
Urgency: medium
Maintainer: Herbert Parentes Fortes Neto <hpfn@debian.org>
Changed-By: Herbert Parentes Fortes Neto <hpfn@debian.org>
Description:
 gifsicle   - Tool for manipulating GIF images
Closes: [878736](bugreport.cgi?bug=878736) [878739](bugreport.cgi?bug=878739) [881119](bugreport.cgi?bug=881119) [881120](bugreport.cgi?bug=881120) [881141](bugreport.cgi?bug=881141)
Changes:
 gifsicle (1.91-2) unstable; urgency=medium
 .
   * I forgot to mention that this upstream version fixes
     important bugs:
     (Closes: #[878739](bugreport.cgi?bug=878739), #[878736](bugreport.cgi?bug=878736), #[881141](bugreport.cgi?bug=881141), #[881120](bugreport.cgi?bug=881120), #[881119](bugreport.cgi?bug=881119))
Checksums-Sha1:
 0be74456776067cf775d7242d966f932bb76f760 1906 gifsicle_1.91-2.dsc
 faa1daef7a85d94e8d3f21847a335dd27befa344 476239 gifsicle_1.91.orig.tar.gz
 978145fa81259777b734a4f382a2820daa3184d2 4588 gifsicle_1.91-2.debian.tar.xz
 2db7f1fb6094d5b9ce3275c4931469d9c89b3339 6310 gifsicle_1.91-2_amd64.buildinfo
Checksums-Sha256:
 6df8dc16cc09a9481b50ab895aa61456505d4cbc5aa52bddcb8a1b827405b795 1906 gifsicle_1.91-2.dsc
 7c289f1402a0f955ee7b03f25857d4dd84368768da2da312ad1657f9434d616b 476239 gifsicle_1.91.orig.tar.gz
 a7c4178bb58dfd4721682c1c737ffca6a3c1630a4151658d5b50c910c637e4cd 4588 gifsicle_1.91-2.debian.tar.xz
 d3cd8ee44cd0d0545e712124f1b6409ae5c638118fbaf7442768e3a21bc649cb 6310 gifsicle_1.91-2_amd64.buildinfo
Files:
 d1056d4de10f88cb0b149b8c5d93b404 1906 graphics optional gifsicle_1.91-2.dsc
 aa0329e0105bec10f409c19a67579c19 476239 graphics optional gifsicle_1.91.orig.tar.gz
 6c38773c9d1d4c4ab42649274ac6ff3f 4588 graphics optional gifsicle_1.91-2.debian.tar.xz
 722b02c4ea9b37cdb521c09347a1b955 6310 graphics optional gifsicle_1.91-2_amd64.buildinfo

-----BEGIN PGP SIGNATURE-----

iQJEBAEBCgAuFiEEbiJhr5LBUJGFGPlCVSVvKKxgYRoFAlpUk9YQHGhwZm5AZGVi
aWFuLm9yZwAKCRBVJW8orGBhGv/KD/9O/UKGO5tEsdtT2rWVAQJfEuaiwKHa3YYr
7ZBX2MnO9OSFXgpwBMvwr6C4hiOn9Q3W3K2iEIyjnvq/5qdEn6gPXPpoyZ351pAS
A0XoqBYuu2ZTMtC9iFtwob9DTfb0MXfyvjFWIFERYgIJPtyRqxkFts4xadfbFfqf
STGBIs2wHdcfVLcB3q1eacJar0yjRU/jv2AGLk+oYYMR+gBzNXNcp3KbffLtHvOC
HP5lyl4hhTrPmx5HDGT/7NtNuaCaFMjGUaMbdDAOE7+etLQD0qXhqWGmv0UnN2d2
OfA/HDAxgzMGGnbvB7qrHwqB8Uospw626apl399X9Zte2imZqTzaok3EuSfUYiLe
UsRUBoSku0mg2Gc7o/Nm/DrV57ceH7EVXATDWDLayfHeiJUO7aIspkNyXfuaGE27
udlAoJLlzcnEwtSBWRL7dHNqmN32TXbwcsotgA3Bj2c0sLXIIfZJ87W5LdqPgWQE
4ZtAlpyOMdGTn7OnzmQuregDN2u8u+Ztwgf9T2q8Pyyk9bCinYxUDDVtlCQVJJxC
7zeBYFc7xcYsNDIF7XxlZ8YJwxKyAyepHRhZ47ua0dH/x/Qp/DtnNBrsbzwkpz59
1p/C2uo4I/87mL7AouBr2Y2XGRwAgN/7ZLFcPSIBiziBtkNPBCoQnWuOuWGtrglK
lT5SvxemhA==
=BOBc
-----END PGP SIGNATURE-----

```

---

**Bug archived.**
Request was from `Debbugs Internal Request <owner@bugs.debian.org>`
to `internal_control@bugs.debian.org`.
(Wed, 30 May 2018 07:26:49 GMT) ([full text](bugreport.cgi?bug=881120;msg=21), [mbox](bugreport.cgi?bug=881120;mbox=yes;msg=21), [link](#20)).

---

Send a report that [this bug log contains spam](https://bugs.debian.org/cgi-bin/bugspam.cgi?bug=881120).

---

Debian bug tracking system administrator <owner@bugs.debian.org>.
Last modified:
Sat Jan 25 13:53:02 2025;
Machine Name:
buxtehude

[Debian Bug tracking system](https://www.debian.org/Bugs/)

Debbugs is free software and licensed under the terms of the GNU General
Public License version 2. The current version can be obtained
from <https://bugs.debian.org/debbugs-source/>.

Copyright © 1999 Darren O. Benham,
1997,2003 nCipher Corporation Ltd,
1994-97 Ian Jackson,
2005-2017 Don Armstrong, and many other contributors.



=== Content from github.com_c916278a_20250125_135303.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fkohler%2Fgifsicle%2Fissues%2F117)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fkohler%2Fgifsicle%2Fissues%2F117)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fissues_fragments%2Fissue_layout&source=header-repo&source_repo=kohler%2Fgifsicle)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[kohler](/kohler)
/
**[gifsicle](/kohler/gifsicle)**
Public

* [Notifications](/login?return_to=%2Fkohler%2Fgifsicle) You must be signed in to change notification settings
* [Fork
  243](/login?return_to=%2Fkohler%2Fgifsicle)
* [Star
   3.9k](/login?return_to=%2Fkohler%2Fgifsicle)

* [Code](/kohler/gifsicle)
* [Issues
  35](/kohler/gifsicle/issues)
* [Pull requests
  3](/kohler/gifsicle/pulls)
* [Discussions](/kohler/gifsicle/discussions)
* [Actions](/kohler/gifsicle/actions)
* [Projects
  0](/kohler/gifsicle/projects)
* [Wiki](/kohler/gifsicle/wiki)
* [Security](/kohler/gifsicle/security)
* [Insights](/kohler/gifsicle/pulse)

Additional navigation options

* [Code](/kohler/gifsicle)
* [Issues](/kohler/gifsicle/issues)
* [Pull requests](/kohler/gifsicle/pulls)
* [Discussions](/kohler/gifsicle/discussions)
* [Actions](/kohler/gifsicle/actions)
* [Projects](/kohler/gifsicle/projects)
* [Wiki](/kohler/gifsicle/wiki)
* [Security](/kohler/gifsicle/security)
* [Insights](/kohler/gifsicle/pulse)

# denial-of-service attack #117

[New issue](/login?return_to=)[Jump to bottom](#comment-composer-heading)Copy link[New issue](/login?return_to=)[Jump to bottom](#comment-composer-heading)Copy linkClosedClosed[denial-of-service attack](#top)#117Copy link[![@hpfn](https://avatars.githubusercontent.com/u/10065165?v=4&size=80)](/hpfn)
## Description

[![@hpfn](https://avatars.githubusercontent.com/u/10065165?v=4&size=48)](/hpfn)[hpfn](https://github.com/hpfn)opened [on Oct 16, 2017](https://github.com/kohler/gifsicle/issues/117#issue-265767754)

Hi,

I received two report bugs that may allow a denial-of-service attack.

Maybe one has already been fixed. [#116](https://github.com/kohler/gifsicle/issues/116)

<https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=878736>

But this one is new I guess.

<https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=878739>

Regards,

Herbert

## Metadata

### Assignees

No one assigned

### Labels

No labelsNo labels
### Projects

No projects
### Milestone

No milestone

### Relationships

None yet
### Development

No branches or pull requests
## Issue actions

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_5c7c7de9_20250125_135303.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fkohler%2Fgifsicle%2Fcommit%2F118a46090c50829dc543179019e6140e1235f909)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fkohler%2Fgifsicle%2Fcommit%2F118a46090c50829dc543179019e6140e1235f909)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fcommit_fragments%2Frepo_layout&source=header-repo&source_repo=kohler%2Fgifsicle)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[kohler](/kohler)
/
**[gifsicle](/kohler/gifsicle)**
Public

* [Notifications](/login?return_to=%2Fkohler%2Fgifsicle) You must be signed in to change notification settings
* [Fork
  243](/login?return_to=%2Fkohler%2Fgifsicle)
* [Star
   3.9k](/login?return_to=%2Fkohler%2Fgifsicle)

* [Code](/kohler/gifsicle)
* [Issues
  35](/kohler/gifsicle/issues)
* [Pull requests
  3](/kohler/gifsicle/pulls)
* [Discussions](/kohler/gifsicle/discussions)
* [Actions](/kohler/gifsicle/actions)
* [Projects
  0](/kohler/gifsicle/projects)
* [Wiki](/kohler/gifsicle/wiki)
* [Security](/kohler/gifsicle/security)
* [Insights](/kohler/gifsicle/pulse)

Additional navigation options

* [Code](/kohler/gifsicle)
* [Issues](/kohler/gifsicle/issues)
* [Pull requests](/kohler/gifsicle/pulls)
* [Discussions](/kohler/gifsicle/discussions)
* [Actions](/kohler/gifsicle/actions)
* [Projects](/kohler/gifsicle/projects)
* [Wiki](/kohler/gifsicle/wiki)
* [Security](/kohler/gifsicle/security)
* [Insights](/kohler/gifsicle/pulse)

## Commit

[Permalink](/kohler/gifsicle/commit/118a46090c50829dc543179019e6140e1235f909)

This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository.

gif\_read: Set last\_name = NULL unconditionally.

[Browse files](/kohler/gifsicle/tree/118a46090c50829dc543179019e6140e1235f909)
Browse the repository at this point in the history

```
With a non-malicious GIF, last_name is set to NULL when a name
extension is followed by an image. Reported in [#117](https://github.com/kohler/gifsicle/issues/117), via
Debian, via a KAIST fuzzing program.
```

* Loading branch information

[![@kohler](https://avatars.githubusercontent.com/u/410647?s=40&v=4)](/kohler)

[kohler](/kohler/gifsicle/commits?author=kohler "View all commits by kohler")
committed
Dec 3, 2017

1 parent
[f1b8e63](/kohler/gifsicle/commit/f1b8e6323a8fdd029847b7efd400d5fc2ac9aecc)

commit 118a460

Showing
**1 changed file**
with
**1 addition**
and
**0 deletions**.

* Whitespace
* Ignore whitespace

* Split
* Unified

## There are no files selected for viewing

1 change: 1 addition & 0 deletions

1
[src/gifread.c](#diff-b50076ec32d81a76f013204dc7ba99018142e8edf4edc91d9360238f628c9929 "src/gifread.c")

Show comments

[View file](/kohler/gifsicle/blob/118a46090c50829dc543179019e6140e1235f909/src/gifread.c)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -900,6 +900,7 @@ read\_gif(Gif\_Reader \*grr, int read\_flags, |
|  |  | Gif\_DeleteArray(gfc.suffix); |
|  |  | Gif\_DeleteArray(gfc.length); |
|  |  | gfc.gfi = 0; |
|  |  | last\_name = 0; |
|  |  |  |
|  |  | if (gfs) |
|  |  | gfs->errors = gfc.errors[1]; |
| Expand Down | |  |

Toggle all file notes
Toggle all file annotations

### 0 comments on commit `118a460`

Please
[sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fkohler%2Fgifsicle%2Fcommit%2F118a46090c50829dc543179019e6140e1235f909) to comment.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from bugs.debian.org_5e90e11d_20250125_135300.html ===

# Debian Bug report logs - #878739 gifsicle: double-free bug when running gifdiff

[![version graph](version.cgi?found=gifsicle%2F1.90-1;width=2;absolute=0;collapse=1;fixed=gifsicle%2F1.91-2;height=2;package=gifsicle)](version.cgi?found=gifsicle%2F1.90-1;info=1;collapse=1;absolute=0;package=gifsicle;fixed=gifsicle%2F1.91-2)

Package:
[gifsicle](pkgreport.cgi?package=gifsicle);
Maintainer for [gifsicle](pkgreport.cgi?package=gifsicle) is [Alex Myczko <tar@debian.org>](pkgreport.cgi?maint=tar%40debian.org); Source for [gifsicle](pkgreport.cgi?package=gifsicle) is [src:gifsicle](pkgreport.cgi?src=gifsicle) ([PTS](https://tracker.debian.org/pkg/gifsicle), [buildd](https://buildd.debian.org/gifsicle), [popcon](https://qa.debian.org/popcon.php?package=gifsicle)).

Reported by: [Joonun Jang <joonun.jang@gmail.com>](pkgreport.cgi?submitter=joonun.jang%40gmail.com)

Date: Mon, 16 Oct 2017 11:15:04 UTC

Severity: normal

Tags: fixed-upstream

Found in version gifsicle/1.90-1

Fixed in version gifsicle/1.91-2

**Done:** Herbert Parentes Fortes Neto <hpfn@debian.org>

Bug is archived. No further changes may be made.

Forwarded to <https://github.com/kohler/gifsicle/issues/117>

Display info messages

View this report as an [mbox folder](bugreport.cgi?bug=878739;mbox=yes), [status mbox](bugreport.cgi?bug=878739;mbox=yes;mboxstatus=yes), [maintainer mbox](bugreport.cgi?bug=878739;mbox=yes;mboxmaint=yes)

---

**Report forwarded**
to `debian-bugs-dist@lists.debian.org, joonun.jang@gmail.com, Herbert Parentes Fortes Neto <hpfn@debian.org>`:

`Bug#878739`; Package `gifsicle`.
(Mon, 16 Oct 2017 11:15:07 GMT) ([full text](bugreport.cgi?bug=878739;msg=2), [mbox](bugreport.cgi?bug=878739;mbox=yes;msg=2), [link](#1)).

---

**Acknowledgement sent**
to `Joonun Jang <joonun.jang@gmail.com>`:

New Bug report received and forwarded. Copy sent to `joonun.jang@gmail.com, Herbert Parentes Fortes Neto <hpfn@debian.org>`.
(Mon, 16 Oct 2017 11:15:07 GMT) ([full text](bugreport.cgi?bug=878739;msg=4), [mbox](bugreport.cgi?bug=878739;mbox=yes;msg=4), [link](#3)).

---

[Message #5](#5) received at submit@bugs.debian.org ([full text](bugreport.cgi?bug=878739;msg=5), [mbox](bugreport.cgi?bug=878739;mbox=yes;msg=5), reply):

![](/cgi-bin/libravatar.cgi?email=joonun.jang%40gmail.com)
From: Joonun Jang <joonun.jang@gmail.com>
To: Debian Bug Tracking System <submit@bugs.debian.org>
Subject: gifsicle: double-free bug when running gifdiff
Date: Mon, 16 Oct 2017 20:12:02 +0900
```
[[Message part 1](bugreport.cgi?att=0;bug=878739;msg=5) (text/plain, inline)]
```
```
Package: gifsicle
Version: 1.90-1
Severity: normal

Dear Maintainer,

Running 'gifdiff poc poc' with the attached file raises double-free bug,
which may allow a remote attacker to cause a denial-of-service attack or
other unspecified impact with a crafted file.

I expected the program to terminate without segfault, but the program
crashes as follow

----------------------------

june@june:~/project/analyze/poc/gifdiff/crash2$
~/project/analyze/bins/gifsicle-1.90/src/gifdiff poc poc
=================================================================

==22514==ERROR: AddressSanitizer: attempting double-free on
0x611000009c80 in thread T0:
#0 0x7f3b19570090 in realloc
(/usr/lib/x86_64-linux-gnu/libasan.so.3+0xc2090)
#1 0x56146456d6f3 in Gif_Realloc
(/home/june/project/analyze/bins/gifsicle-1.90/src/gifdiff+0x146f3)
#2 0x561464577ed3 in suck_data
(/home/june/project/analyze/bins/gifsicle-1.90/src/gifdiff+0x1eed3)
#3 0x561464579219 in read_gif
(/home/june/project/analyze/bins/gifsicle-1.90/src/gifdiff+0x20219)
#4 0x561464579825 in Gif_FullReadFile
(/home/june/project/analyze/bins/gifsicle-1.90/src/gifdiff+0x20825)
#5 0x56146457e4eb in read_stream
(/home/june/project/analyze/bins/gifsicle-1.90/src/gifdiff+0x254eb)
#6 0x56146457e96f in main
(/home/june/project/analyze/bins/gifsicle-1.90/src/gifdiff+0x2596f)
#7 0x7f3b18e2b2b0 in __libc_start_main
(/lib/x86_64-linux-gnu/libc.so.6+0x202b0)
#8 0x56146455dde9 in _start
(/home/june/project/analyze/bins/gifsicle-1.90/src/gifdiff+0x4de9)

0x611000009c80 is located 0 bytes inside of 253-byte region
[0x611000009c80,0x611000009d7d)
freed by thread T0 here:
#0 0x7f3b1956fa10 in free
(/usr/lib/x86_64-linux-gnu/libasan.so.3+0xc1a10)
#1 0x56146457952d in read_gif
(/home/june/project/analyze/bins/gifsicle-1.90/src/gifdiff+0x2052d)
#2 0x561464579825 in Gif_FullReadFile
(/home/june/project/analyze/bins/gifsicle-1.90/src/gifdiff+0x20825)
#3 0x56146457e4eb in read_stream
(/home/june/project/analyze/bins/gifsicle-1.90/src/gifdiff+0x254eb)
#4 0x56146457e95f in main
(/home/june/project/analyze/bins/gifsicle-1.90/src/gifdiff+0x2595f)
#5 0x7f3b18e2b2b0 in __libc_start_main
(/lib/x86_64-linux-gnu/libc.so.6+0x202b0)

previously allocated by thread T0 here:
#0 0x7f3b19570090 in realloc
(/usr/lib/x86_64-linux-gnu/libasan.so.3+0xc2090)
#1 0x56146456d6f3 in Gif_Realloc
(/home/june/project/analyze/bins/gifsicle-1.90/src/gifdiff+0x146f3)
#2 0x561464577ed3 in suck_data
(/home/june/project/analyze/bins/gifsicle-1.90/src/gifdiff+0x1eed3)
#3 0x561464579219 in read_gif
(/home/june/project/analyze/bins/gifsicle-1.90/src/gifdiff+0x20219)
#4 0x561464579825 in Gif_FullReadFile
(/home/june/project/analyze/bins/gifsicle-1.90/src/gifdiff+0x20825)
#5 0x56146457e4eb in read_stream
(/home/june/project/analyze/bins/gifsicle-1.90/src/gifdiff+0x254eb)
#6 0x56146457e95f in main
(/home/june/project/analyze/bins/gifsicle-1.90/src/gifdiff+0x2595f)
#7 0x7f3b18e2b2b0 in __libc_start_main
(/lib/x86_64-linux-gnu/libc.so.6+0x202b0)

SUMMARY: AddressSanitizer: double-free
(/usr/lib/x86_64-linux-gnu/libasan.so.3+0xc2090) in realloc
==22514==ABORTING

-----------------------------

The bug was found with a fuzzer developed by 'SoftSec' group at KAIST.

-- System Information:
Debian Release: 9.2
  APT prefers stable-updates
  APT policy: (500, 'stable-updates'), (500, 'testing'), (500, 'stable')
Architecture: amd64 (x86_64)

Kernel: Linux 4.9.0-3-amd64 (SMP w/1 CPU core)
Locale: LANG=en_US.UTF-8, LC_CTYPE=en_US.UTF-8 (charmap=UTF-8), LANGUAGE=en_US.UTF-8 (charmap=UTF-8)
Shell: /bin/sh linked to /bin/dash
Init: systemd (via /run/systemd/system)

Versions of packages gifsicle depends on:
ii  libc6     2.24-11+deb9u1
ii  libx11-6  2:1.6.4-3

gifsicle recommends no packages.

gifsicle suggests no packages.

-- no debconf information

```
```
[[poc](bugreport.cgi?att=1;bug=878739;filename=poc;msg=5) (application/octet-stream, attachment)]
```

---

**Information forwarded**
to `debian-bugs-dist@lists.debian.org, Herbert Parentes Fortes Neto <hpfn@debian.org>`:

`Bug#878739`; Package `gifsicle`.
(Mon, 16 Oct 2017 13:27:03 GMT) ([full text](bugreport.cgi?bug=878739;msg=7), [mbox](bugreport.cgi?bug=878739;mbox=yes;msg=7), [link](#6)).

---

**Acknowledgement sent**
to `control@bugs.debian.org`:

Extra info received and forwarded to list. Copy sent to `Herbert Parentes Fortes Neto <hpfn@debian.org>`.
(Mon, 16 Oct 2017 13:27:03 GMT) ([full text](bugreport.cgi?bug=878739;msg=9), [mbox](bugreport.cgi?bug=878739;mbox=yes;msg=9), [link](#8)).

---

[Message #10](#10) received at 878739@bugs.debian.org ([full text](bugreport.cgi?bug=878739;msg=10), [mbox](bugreport.cgi?bug=878739;mbox=yes;msg=10), reply):

![](/cgi-bin/libravatar.cgi?email=terberh%40gmail.com)
From: Herbert Fortes <terberh@gmail.com>
To: 878739@bugs.debian.org
Subject: Re: Bug#878739: gifsicle: double-free bug when running gifdiff
Date: Mon, 16 Oct 2017 11:25:25 -0200
```
forwarded 878739 <https://github.com/kohler/gifsicle/issues/117>
thanks

Em 16-10-2017 09:12, Joonun Jang escreveu:
> Package: gifsicle
> Version: 1.90-1
> Severity: normal
>
> Dear Maintainer,
>
> Running 'gifdiff poc poc' with the attached file raises double-free bug,
> which may allow a remote attacker to cause a denial-of-service attack or
> other unspecified impact with a crafted file.
>
> I expected the program to terminate without segfault, but the program
> crashes as follow
>
> ----------------------------
>
> june@june:~/project/analyze/poc/gifdiff/crash2$
> ~/project/analyze/bins/gifsicle-1.90/src/gifdiff poc poc
> =================================================================
>
> ==22514==ERROR: AddressSanitizer: attempting double-free on
> 0x611000009c80 in thread T0:
> #0 0x7f3b19570090 in realloc
> (/usr/lib/x86_64-linux-gnu/libasan.so.3+0xc2090)
> #1 0x56146456d6f3 in Gif_Realloc
> (/home/june/project/analyze/bins/gifsicle-1.90/src/gifdiff+0x146f3)
> #2 0x561464577ed3 in suck_data
> (/home/june/project/analyze/bins/gifsicle-1.90/src/gifdiff+0x1eed3)
> #3 0x561464579219 in read_gif
> (/home/june/project/analyze/bins/gifsicle-1.90/src/gifdiff+0x20219)
> #4 0x561464579825 in Gif_FullReadFile
> (/home/june/project/analyze/bins/gifsicle-1.90/src/gifdiff+0x20825)
> #5 0x56146457e4eb in read_stream
> (/home/june/project/analyze/bins/gifsicle-1.90/src/gifdiff+0x254eb)
> #6 0x56146457e96f in main
> (/home/june/project/analyze/bins/gifsicle-1.90/src/gifdiff+0x2596f)
> #7 0x7f3b18e2b2b0 in __libc_start_main
> (/lib/x86_64-linux-gnu/libc.so.6+0x202b0)
> #8 0x56146455dde9 in _start
> (/home/june/project/analyze/bins/gifsicle-1.90/src/gifdiff+0x4de9)
>
> 0x611000009c80 is located 0 bytes inside of 253-byte region
> [0x611000009c80,0x611000009d7d)
> freed by thread T0 here:
> #0 0x7f3b1956fa10 in free
> (/usr/lib/x86_64-linux-gnu/libasan.so.3+0xc1a10)
> #1 0x56146457952d in read_gif
> (/home/june/project/analyze/bins/gifsicle-1.90/src/gifdiff+0x2052d)
> #2 0x561464579825 in Gif_FullReadFile
> (/home/june/project/analyze/bins/gifsicle-1.90/src/gifdiff+0x20825)
> #3 0x56146457e4eb in read_stream
> (/home/june/project/analyze/bins/gifsicle-1.90/src/gifdiff+0x254eb)
> #4 0x56146457e95f in main
> (/home/june/project/analyze/bins/gifsicle-1.90/src/gifdiff+0x2595f)
> #5 0x7f3b18e2b2b0 in __libc_start_main
> (/lib/x86_64-linux-gnu/libc.so.6+0x202b0)
>
> previously allocated by thread T0 here:
> #0 0x7f3b19570090 in realloc
> (/usr/lib/x86_64-linux-gnu/libasan.so.3+0xc2090)
> #1 0x56146456d6f3 in Gif_Realloc
> (/home/june/project/analyze/bins/gifsicle-1.90/src/gifdiff+0x146f3)
> #2 0x561464577ed3 in suck_data
> (/home/june/project/analyze/bins/gifsicle-1.90/src/gifdiff+0x1eed3)
> #3 0x561464579219 in read_gif
> (/home/june/project/analyze/bins/gifsicle-1.90/src/gifdiff+0x20219)
> #4 0x561464579825 in Gif_FullReadFile
> (/home/june/project/analyze/bins/gifsicle-1.90/src/gifdiff+0x20825)
> #5 0x56146457e4eb in read_stream
> (/home/june/project/analyze/bins/gifsicle-1.90/src/gifdiff+0x254eb)
> #6 0x56146457e95f in main
> (/home/june/project/analyze/bins/gifsicle-1.90/src/gifdiff+0x2595f)
> #7 0x7f3b18e2b2b0 in __libc_start_main
> (/lib/x86_64-linux-gnu/libc.so.6+0x202b0)
>
> SUMMARY: AddressSanitizer: double-free
> (/usr/lib/x86_64-linux-gnu/libasan.so.3+0xc2090) in realloc
> ==22514==ABORTING
>
> -----------------------------
>
> The bug was found with a fuzzer developed by 'SoftSec' group at KAIST.
>
> -- System Information:
> Debian Release: 9.2
>   APT prefers stable-updates
>   APT policy: (500, 'stable-updates'), (500, 'testing'), (500, 'stable')
> Architecture: amd64 (x86_64)
>
> Kernel: Linux 4.9.0-3-amd64 (SMP w/1 CPU core)
> Locale: LANG=en_US.UTF-8, LC_CTYPE=en_US.UTF-8 (charmap=UTF-8), LANGUAGE=en_US.UTF-8 (charmap=UTF-8)
> Shell: /bin/sh linked to /bin/dash
> Init: systemd (via /run/systemd/system)
>
> Versions of packages gifsicle depends on:
> ii  libc6     2.24-11+deb9u1
> ii  libx11-6  2:1.6.4-3
>
> gifsicle recommends no packages.
>
> gifsicle suggests no packages.
>
> -- no debconf information
>

```

---

**Set Bug forwarded-to-address to '<https://github.com/kohler/gifsicle/issues/117>'.**
Request was from `Herbert Fortes <terberh@gmail.com>`
to `control@bugs.debian.org`.
(Mon, 16 Oct 2017 16:51:03 GMT) ([full text](bugreport.cgi?bug=878739;msg=12), [mbox](bugreport.cgi?bug=878739;mbox=yes;msg=12), [link](#11)).

---

**Added tag(s) fixed-upstream.**
Request was from `bts-link-upstream@lists.alioth.debian.org`
to `control@bugs.debian.org`.
(Mon, 04 Dec 2017 17:09:09 GMT) ([full text](bugreport.cgi?bug=878739;msg=14), [mbox](bugreport.cgi?bug=878739;mbox=yes;msg=14), [link](#13)).

---

**Reply sent**
to `Herbert Parentes Fortes Neto <hpfn@debian.org>`:

You have taken responsibility.
(Tue, 09 Jan 2018 10:30:35 GMT) ([full text](bugreport.cgi?bug=878739;msg=16), [mbox](bugreport.cgi?bug=878739;mbox=yes;msg=16), [link](#15)).

---

**Notification sent**
to `Joonun Jang <joonun.jang@gmail.com>`:

Bug acknowledged by developer.
(Tue, 09 Jan 2018 10:30:35 GMT) ([full text](bugreport.cgi?bug=878739;msg=18), [mbox](bugreport.cgi?bug=878739;mbox=yes;msg=18), [link](#17)).

---

[Message #19](#19) received at 878739-close@bugs.debian.org ([full text](bugreport.cgi?bug=878739;msg=19), [mbox](bugreport.cgi?bug=878739;mbox=yes;msg=19), reply):

![](/cgi-bin/libravatar.cgi?email=hpfn%40debian.org)
From: Herbert Parentes Fortes Neto <hpfn@debian.org>
To: 878739-close@bugs.debian.org
Subject: Bug#878739: fixed in gifsicle 1.91-2
Date: Tue, 09 Jan 2018 10:19:18 +0000
```
Source: gifsicle
Source-Version: 1.91-2

We believe that the bug you reported is fixed in the latest version of
gifsicle, which is due to be installed in the Debian FTP archive.

A summary of the changes between this version and the previous one is
attached.

Thank you for reporting the bug, which will now be closed.  If you
have further comments please address them to 878739@bugs.debian.org,
and the maintainer will reopen the bug report if appropriate.

Debian distribution maintenance software
pp.
Herbert Parentes Fortes Neto <hpfn@debian.org> (supplier of updated gifsicle package)

(This message was generated automatically at their request; if you
believe that there is a problem with it please contact the archive
administrators by mailing ftpmaster@ftp-master.debian.org)

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA512

Format: 1.8
Date: Tue, 09 Jan 2018 07:54:35 -0200
Source: gifsicle
Binary: gifsicle
Architecture: source
Version: 1.91-2
Distribution: unstable
Urgency: medium
Maintainer: Herbert Parentes Fortes Neto <hpfn@debian.org>
Changed-By: Herbert Parentes Fortes Neto <hpfn@debian.org>
Description:
 gifsicle   - Tool for manipulating GIF images
Closes: [878736](bugreport.cgi?bug=878736) [878739](bugreport.cgi?bug=878739) [881119](bugreport.cgi?bug=881119) [881120](bugreport.cgi?bug=881120) [881141](bugreport.cgi?bug=881141)
Changes:
 gifsicle (1.91-2) unstable; urgency=medium
 .
   * I forgot to mention that this upstream version fixes
     important bugs:
     (Closes: #[878739](bugreport.cgi?bug=878739), #[878736](bugreport.cgi?bug=878736), #[881141](bugreport.cgi?bug=881141), #[881120](bugreport.cgi?bug=881120), #[881119](bugreport.cgi?bug=881119))
Checksums-Sha1:
 0be74456776067cf775d7242d966f932bb76f760 1906 gifsicle_1.91-2.dsc
 faa1daef7a85d94e8d3f21847a335dd27befa344 476239 gifsicle_1.91.orig.tar.gz
 978145fa81259777b734a4f382a2820daa3184d2 4588 gifsicle_1.91-2.debian.tar.xz
 2db7f1fb6094d5b9ce3275c4931469d9c89b3339 6310 gifsicle_1.91-2_amd64.buildinfo
Checksums-Sha256:
 6df8dc16cc09a9481b50ab895aa61456505d4cbc5aa52bddcb8a1b827405b795 1906 gifsicle_1.91-2.dsc
 7c289f1402a0f955ee7b03f25857d4dd84368768da2da312ad1657f9434d616b 476239 gifsicle_1.91.orig.tar.gz
 a7c4178bb58dfd4721682c1c737ffca6a3c1630a4151658d5b50c910c637e4cd 4588 gifsicle_1.91-2.debian.tar.xz
 d3cd8ee44cd0d0545e712124f1b6409ae5c638118fbaf7442768e3a21bc649cb 6310 gifsicle_1.91-2_amd64.buildinfo
Files:
 d1056d4de10f88cb0b149b8c5d93b404 1906 graphics optional gifsicle_1.91-2.dsc
 aa0329e0105bec10f409c19a67579c19 476239 graphics optional gifsicle_1.91.orig.tar.gz
 6c38773c9d1d4c4ab42649274ac6ff3f 4588 graphics optional gifsicle_1.91-2.debian.tar.xz
 722b02c4ea9b37cdb521c09347a1b955 6310 graphics optional gifsicle_1.91-2_amd64.buildinfo

-----BEGIN PGP SIGNATURE-----

iQJEBAEBCgAuFiEEbiJhr5LBUJGFGPlCVSVvKKxgYRoFAlpUk9YQHGhwZm5AZGVi
aWFuLm9yZwAKCRBVJW8orGBhGv/KD/9O/UKGO5tEsdtT2rWVAQJfEuaiwKHa3YYr
7ZBX2MnO9OSFXgpwBMvwr6C4hiOn9Q3W3K2iEIyjnvq/5qdEn6gPXPpoyZ351pAS
A0XoqBYuu2ZTMtC9iFtwob9DTfb0MXfyvjFWIFERYgIJPtyRqxkFts4xadfbFfqf
STGBIs2wHdcfVLcB3q1eacJar0yjRU/jv2AGLk+oYYMR+gBzNXNcp3KbffLtHvOC
HP5lyl4hhTrPmx5HDGT/7NtNuaCaFMjGUaMbdDAOE7+etLQD0qXhqWGmv0UnN2d2
OfA/HDAxgzMGGnbvB7qrHwqB8Uospw626apl399X9Zte2imZqTzaok3EuSfUYiLe
UsRUBoSku0mg2Gc7o/Nm/DrV57ceH7EVXATDWDLayfHeiJUO7aIspkNyXfuaGE27
udlAoJLlzcnEwtSBWRL7dHNqmN32TXbwcsotgA3Bj2c0sLXIIfZJ87W5LdqPgWQE
4ZtAlpyOMdGTn7OnzmQuregDN2u8u+Ztwgf9T2q8Pyyk9bCinYxUDDVtlCQVJJxC
7zeBYFc7xcYsNDIF7XxlZ8YJwxKyAyepHRhZ47ua0dH/x/Qp/DtnNBrsbzwkpz59
1p/C2uo4I/87mL7AouBr2Y2XGRwAgN/7ZLFcPSIBiziBtkNPBCoQnWuOuWGtrglK
lT5SvxemhA==
=BOBc
-----END PGP SIGNATURE-----

```

---

**Information forwarded**
to `debian-bugs-dist@lists.debian.org, Herbert Parentes Fortes Neto <hpfn@debian.org>`:

`Bug#878739`; Package `gifsicle`.
(Mon, 19 Feb 2018 02:36:03 GMT) ([full text](bugreport.cgi?bug=878739;msg=21), [mbox](bugreport.cgi?bug=878739;mbox=yes;msg=21), [link](#20)).

---

**Acknowledgement sent**
to `Jaeseung Choi <jschoi17@kaist.ac.kr>`:

Extra info received and forwarded to list. Copy sent to `Herbert Parentes Fortes Neto <hpfn@debian.org>`.
(Mon, 19 Feb 2018 02:36:03 GMT) ([full text](bugreport.cgi?bug=878739;msg=23), [mbox](bugreport.cgi?bug=878739;mbox=yes;msg=23), [link](#22)).

---

[Message #24](#24) received at 878739@bugs.debian.org ([full text](bugreport.cgi?bug=878739;msg=24), [mbox](bugreport.cgi?bug=878739;mbox=yes;msg=24), reply):

![](/cgi-bin/libravatar.cgi?email=jschoi17%40kaist.ac.kr)
From: Jaeseung Choi <jschoi17@kaist.ac.kr>
To: 878739@bugs.debian.org
Subject: Bug#878739 : CVE-2017-18120
Date: Mon, 19 Feb 2018 11:25:31 +0900
```
[[Message part 1](bugreport.cgi?att=0;bug=878739;msg=24) (text/plain, inline)]
```
```
For your information, this bug was assigned  [CVE-2017-18120](https://security-tracker.debian.org/tracker/CVE-2017-18120).

Thank you for the fix.

```
```
[[Message part 2](bugreport.cgi?att=1;bug=878739;msg=24) (text/html, inline)]
```

---

**Bug archived.**
Request was from `Debbugs Internal Request <owner@bugs.debian.org>`
to `internal_control@bugs.debian.org`.
(Wed, 30 May 2018 07:27:17 GMT) ([full text](bugreport.cgi?bug=878739;msg=26), [mbox](bugreport.cgi?bug=878739;mbox=yes;msg=26), [link](#25)).

---

Send a report that [this bug log contains spam](https://bugs.debian.org/cgi-bin/bugspam.cgi?bug=878739).

---

Debian bug tracking system administrator <owner@bugs.debian.org>.
Last modified:
Sat Jan 25 13:53:00 2025;
Machine Name:
bembo

[Debian Bug tracking system](https://www.debian.org/Bugs/)

Debbugs is free software and licensed under the terms of the GNU General
Public License version 2. The current version can be obtained
from <https://bugs.debian.org/debbugs-source/>.

Copyright © 1999 Darren O. Benham,
1997,2003 nCipher Corporation Ltd,
1994-97 Ian Jackson,
2005-2017 Don Armstrong, and many other contributors.



=== Content from security-tracker.debian.org_7ae4f145_20250126_090920.html ===

# CVE-2017-18120

| **Name** | CVE-2017-18120 |
| --- | --- |
| **Description** | A double-free bug in the read\_gif function in gifread.c in gifsicle 1.90 allows a remote attacker to cause a denial-of-service attack or unspecified other impact via a maliciously crafted file, because last\_name is mishandled, a different vulnerability than CVE-2017-1000421. |
| **Source** | [CVE](https://www.cve.org/CVERecord?id=CVE-2017-18120) (at [NVD](https://nvd.nist.gov/vuln/detail/CVE-2017-18120); [CERT](https://www.kb.cert.org/vuls/byid?searchview=&query=CVE-2017-18120), [LWN](https://lwn.net/Search/DoSearch?words=CVE-2017-18120), [oss-sec](https://marc.info/?l=oss-security&s=CVE-2017-18120), [fulldisc](https://marc.info/?l=full-disclosure&s=CVE-2017-18120), [Red Hat](https://bugzilla.redhat.com/show_bug.cgi?id=CVE-2017-18120), [Ubuntu](https://people.canonical.com/~ubuntu-security/cve/CVE-2017-18120), [Gentoo](https://bugs.gentoo.org/show_bug.cgi?id=CVE-2017-18120), SUSE [bugzilla](https://bugzilla.suse.com/show_bug.cgi?id=CVE-2017-18120)/[CVE](https://www.suse.com/security/cve/CVE-2017-18120/), GitHub [advisories](https://github.com/advisories?query=CVE-2017-18120)/[code](https://github.com/search?type=Code&q=%22CVE-2017-18120%22)/[issues](https://github.com/search?type=Issues&q=%22CVE-2017-18120%22), [web search](https://duckduckgo.com/html?q=%22CVE-2017-18120%22), [more](https://oss-security.openwall.org/wiki/vendors)) |
| **Debian Bugs** | [878739](https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=878739), [881120](https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=881120) |

## Vulnerable and fixed packages

The table below lists information on source packages.

| Source Package | Release | Version | Status |
| --- | --- | --- | --- |
| [gifsicle](/tracker/source-package/gifsicle) ([PTS](https://tracker.debian.org/pkg/gifsicle)) | bullseye | 1.92-2 | fixed |
|  | bookworm | 1.93-2 | fixed |
|  | sid, trixie | 1.95-2 | fixed |

The information below is based on the following data on fixed versions.

| Package | Type | Release | Fixed Version | Urgency | Origin | Debian Bugs |
| --- | --- | --- | --- | --- | --- | --- |
| [gifsicle](/tracker/source-package/gifsicle) | source | (unstable) | 1.91-1 | unimportant |  | [878739](https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=878739), [881120](https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=881120) |

## Notes

```
<https://github.com/kohler/gifsicle/issues/117>
<https://github.com/kohler/gifsicle/commit/118a46090c50829dc543179019e6140e1235f909>
Crash in CLI tool, no security impact

```

---

Search for package or bug name:  [Reporting problems](/tracker/data/report)

[Home](/tracker/) - [Debian Security](https://www.debian.org/security/) - [Source](https://salsa.debian.org/security-tracker-team/security-tracker/blob/master/bin/tracker_service.py) [(Git)](https://salsa.debian.org/security-tracker-team/security-tracker)


