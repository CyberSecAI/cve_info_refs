=== Content from git.kernel.org_7e81f1c9_20250124_192448.html ===


| [cgit logo](/) | [index](/) : [kernel/git/torvalds/linux.git](/pub/scm/linux/kernel/git/torvalds/linux.git/) | for-next master |
| --- | --- | --- |
| Linux kernel source tree | Linus Torvalds |

| [about](/pub/scm/linux/kernel/git/torvalds/linux.git/about/)[summary](/pub/scm/linux/kernel/git/torvalds/linux.git/)[refs](/pub/scm/linux/kernel/git/torvalds/linux.git/refs/?id=342ffc26693b528648bdc9377e51e4f2450b4860)[log](/pub/scm/linux/kernel/git/torvalds/linux.git/log/)[tree](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/?id=342ffc26693b528648bdc9377e51e4f2450b4860)[commit](/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=342ffc26693b528648bdc9377e51e4f2450b4860)[diff](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/?id=342ffc26693b528648bdc9377e51e4f2450b4860)[stats](/pub/scm/linux/kernel/git/torvalds/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Seth Forshee <seth.forshee@canonical.com> | 2017-06-23 09:04:22 -0500 |
| --- | --- | --- |
| committer | Martin K. Petersen <martin.petersen@oracle.com> | 2017-06-26 15:01:03 -0400 |
| commit | [342ffc26693b528648bdc9377e51e4f2450b4860](/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=342ffc26693b528648bdc9377e51e4f2450b4860) ([patch](/pub/scm/linux/kernel/git/torvalds/linux.git/patch/?id=342ffc26693b528648bdc9377e51e4f2450b4860)) | |
| tree | [cc0040a1faa1fee02a5c5f878f6cf28dc8af40e1](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/?id=342ffc26693b528648bdc9377e51e4f2450b4860) | |
| parent | [1d32a62c74b3bcb69822b0f4745af5410cfec3a7](/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=1d32a62c74b3bcb69822b0f4745af5410cfec3a7) ([diff](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/?id=342ffc26693b528648bdc9377e51e4f2450b4860&id2=1d32a62c74b3bcb69822b0f4745af5410cfec3a7)) | |
| download | [linux-342ffc26693b528648bdc9377e51e4f2450b4860.tar.gz](/pub/scm/linux/kernel/git/torvalds/linux.git/snapshot/linux-342ffc26693b528648bdc9377e51e4f2450b4860.tar.gz) | |

scsi: aacraid: Don't copy uninitialized stack memory to userspaceBoth aac\_send\_raw\_srb() and aac\_get\_hba\_info() may copy stack allocated
structs to userspace without initializing all members of these
structs. Clear out this memory to prevent information leaks.
Fixes: 423400e64d377 ("scsi: aacraid: Include HBA direct interface")
Fixes: c799d519bf088 ("scsi: aacraid: Retrieve HBA host information ioctl")
Signed-off-by: Seth Forshee <seth.forshee@canonical.com>
Reviewed-by: Johannes Thumshirn <jthumshirn@suse.de>
Signed-off-by: Martin K. Petersen <martin.petersen@oracle.com>
[Diffstat](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/?id=342ffc26693b528648bdc9377e51e4f2450b4860)

| -rw-r--r-- | [drivers/scsi/aacraid/commctrl.c](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/drivers/scsi/aacraid/commctrl.c?id=342ffc26693b528648bdc9377e51e4f2450b4860) | 2 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 2 insertions, 0 deletions

| diff --git a/drivers/scsi/aacraid/commctrl.c b/drivers/scsi/aacraid/commctrl.cindex 6bb6ed48e31dc6..9ab0fa959d8355 100644--- a/[drivers/scsi/aacraid/commctrl.c](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/drivers/scsi/aacraid/commctrl.c?id=1d32a62c74b3bcb69822b0f4745af5410cfec3a7)+++ b/[drivers/scsi/aacraid/commctrl.c](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/drivers/scsi/aacraid/commctrl.c?id=342ffc26693b528648bdc9377e51e4f2450b4860)@@ -949,6 +949,7 @@ static int aac\_send\_raw\_srb(struct aac\_dev\* dev, void \_\_user \* arg) &((struct aac\_native\_hba \*)srbfib->hw\_fib\_va)->resp.err; struct aac\_srb\_reply reply; + memset(&reply, 0, sizeof(reply)); reply.status = ST\_OK; if (srbfib->flags & FIB\_CONTEXT\_FLAG\_FASTRESP) { /\* fast response \*/@@ -1020,6 +1021,7 @@ static int aac\_get\_hba\_info(struct aac\_dev \*dev, void \_\_user \*arg) { struct aac\_hba\_info hbainfo; + memset(&hbainfo, 0, sizeof(hbainfo)); hbainfo.adapter\_number = (u8) dev->id; hbainfo.system\_io\_bus\_number = dev->pdev->bus->number; hbainfo.device\_number = (dev->pdev->devfn >> 3); |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-24 18:57:01 +0000


