=== Content from jira.atlassian.com_24e8a031_20250125_045957.html ===


[Log in](/login.jsp?os_destination=%2Fbrowse%2FJRASERVER-59980)[Skip to main content](#main)[Skip to sidebar](#sidebar)Linked ApplicationsLoading…[![Create and track feature requests for Atlassian products.](/s/2u4fri/9120016/1rg1jpn/_/jira-logo-scaled.png)](https://jira.atlassian.com/secure/MyJiraHome.jspa)

* [Dashboards](/secure/Dashboard.jspa "View and manage your dashboards")
* [Projects](/secure/BrowseProjects.jspa "View recent projects and browse a list of projects")
* [Issues](/issues/ "Search for issues and view recent issues")

* Give feedback to Atlassian
* [Help](https://docs.atlassian.com/jira/jcore-docs-0912/ "Help")
  + [Jira Core help](https://docs.atlassian.com/jira/jcore-docs-0912/ "Go to the online documentation for Jira Core")
  + [Keyboard Shortcuts](/secure/ViewKeyboardShortcuts%21default.jspa "Get more information about Jira's Keyboard Shortcuts")
  + [About Jira](/secure/AboutPage.jspa "Get more information about Jira")
  + [Jira Credits](/secure/credits/AroundTheWorld%21default.jspa "See who did what")
* [Log In](/login.jsp?os_destination=%2Fbrowse%2FJRASERVER-59980)

IMPORTANT: JAC is a Public system and anyone on the internet will be able to view the data in the created JAC tickets. Please don’t include Customer or Sensitive data in the JAC ticket.

![Uploaded image for project: 'Jira Data Center'](https://jira.atlassian.com/secure/projectavatar?pid=10240&avatarId=105190)

1. [Jira Data Center](/browse/JRASERVER)
2. [JRASERVER-59980](/browse/JRASERVER-59980)

## JQL filter for Webhooks doesn't work correctly when "Comment" and "Worklog" related events are fired - CVE-2017-18104

[Log In](/login.jsp?os_destination=%2Fbrowse%2FJRASERVER-59980 "Log In")ClosedExportnullView workflowXMLWordPrintable
### Details

* **Type:**
  ![Icon: Bug](/secure/viewavatar?size=xsmall&avatarId=51493&avatarType=issuetype "Bug - A problem which impairs or prevents the functions of the product.") Bug
* **Resolution:**
  Fixed
* **Priority:**
  ![Icon: Medium](/images/icons/priorities/medium.svg "Medium - Medium priority issues") Medium
* **Fix Version/s:**
  [7.11.0](/issues/?jql=project+%3D+JRASERVER+AND+fixVersion+%3D+7.11.0 "7.11.0 "), [7.6.7](/issues/?jql=project+%3D+JRASERVER+AND+fixVersion+%3D+7.6.7 "7.6.7 ")
* **Affects Version/s:**
  7.0.10, 7.1.0, 7.1.2, 7.1.4, 7.1.7, 7.1.9, 7.6.0
* **Component/s:**
  [Webhooks](/issues/?jql=project+%3D+JRASERVER+AND+component+%3D+Webhooks "Webhooks ")
* **Labels:**
  + [CVE-2017-18104](/issues/?jql=labels+%3D+CVE-2017-18104 "CVE-2017-18104")
  + [advisory](/issues/?jql=labels+%3D+advisory "advisory")
  + [advisory-released](/issues/?jql=labels+%3D+advisory-released "advisory-released")
  + [affects-cloud](/issues/?jql=labels+%3D+affects-cloud "affects-cloud")
  + [affects-server](/issues/?jql=labels+%3D+affects-server "affects-server")
  + [architectural-flaw](/issues/?jql=labels+%3D+architectural-flaw "architectural-flaw")
  + [cvss-medium](/issues/?jql=labels+%3D+cvss-medium "cvss-medium")
  + [ecosystem](/issues/?jql=labels+%3D+ecosystem "ecosystem")
  + [exclude-from-security-metrics-page](/issues/?jql=labels+%3D+exclude-from-security-metrics-page "exclude-from-security-metrics-page")
  + [pse-request](/issues/?jql=labels+%3D+pse-request "pse-request")
  + [raid](/issues/?jql=labels+%3D+raid "raid")
  + [security](/issues/?jql=labels+%3D+security "security")

* **Fixed in Long Term Support Release/s:**

  [Download 7.6](https://confluence.atlassian.com/enterprise/atlassian-enterprise-releases-948227420.html)
* **Introduced in Version:**
  7
* **Support reference count:**
  27
* **Symptom Severity:**
  Severity 2 - Major
* **UIS:**
  90
* **Bug Fix Policy:**
   [View Atlassian Server bug fix policy](https://confluence.atlassian.com/support/atlassian-bug-fixing-policy-201294573.html)

### Description

**NOTE:** This bug report is for **JIRA Server**. Using **JIRA Cloud**? [See the corresponding bug report](http://jira.atlassian.com/browse/JRACLOUD-59980).

### Security information

The Webhooks component of Atlassian Jira before version 7.6.7 and from version 7.7.0 before version 7.11.0 allows remote attackers who are able to observe or otherwise intercept webhook events to learn information about changes in issues that should not be sent because they are not contained within the results of a specified JQL query.

### Summary

JQL filter for Webhooks dosn't work correctly when *Comment* or *Worklog* related events are fired.

### Steps to Reproduce

1. Create an webhook as follows
   * Issue related events
     + JQL: project = <PROJECTKEY>
     + Issue: created, updated
     + Comment: created, updated
     + Worklog: created,updated

       [![](https://jira.atlassian.com/secure/thumbnail/209171/_thumb_209171.png)](/secure/attachment/209171/209171_webhooks.png "webhooks.png")
2. Comment or log work on an issue in a project aside from the one which is specified with the JQL

### Expected Results

The webhook shouldn't be fired.

### Actual Results

The webhook was fired.

### Notes

When it comes to **NOT** "Comment" or "Worklog" related events (like creating issue, updating issue),

the JQL filters the events correctly.

### Attachments

### Attachments

* Options
  + - [Sort By Name](/browse/JRASERVER-59980?attachmentSortBy=fileName#attachmentmodule "viewissue.subtasks.tab.show.all.name")
    - [Sort By Date](/browse/JRASERVER-59980?attachmentSortBy=dateTime#attachmentmodule "Sort By Date")
    - [Ascending](/browse/JRASERVER-59980?attachmentOrder=asc#attachmentmodule "Ascending")
    - [Descending](/browse/JRASERVER-59980?attachmentOrder=desc#attachmentmodule "Descending")
    - [Thumbnails](/browse/JRASERVER-59980?attachmentViewMode=gallery#attachmentmodule "Thumbnails")
    - [List](/browse/JRASERVER-59980?attachmentViewMode=list#attachmentmodule "List")

1. [jql.diff](/secure/attachment/301365/jql.diff "jql.diff - Latest 09/Dec/2017 5:33 PM - Nathan Neulinger")3 kB09/Dec/2017 5:33 PM
2. [![webhook.png](https://jira.atlassian.com/secure/thumbnail/192327/_thumb_192327.png)](/secure/attachment/192327/webhook.png "webhook.png - Latest 26/Feb/2016 7:25 AM - Yuki Okamoto")[webhook.png](/secure/attachment/192327/webhook.png "webhook.png - Latest 26/Feb/2016 7:25 AM - Yuki Okamoto")323 kB26/Feb/2016 7:25 AM
3. [![webhooks.png](https://jira.atlassian.com/secure/thumbnail/209171/_thumb_209171.png)](/secure/attachment/209171/webhooks.png "webhooks.png - Latest 10/Aug/2016 7:35 AM - Yit Wei")[webhooks.png](/secure/attachment/209171/webhooks.png "webhooks.png - Latest 10/Aug/2016 7:35 AM - Yit Wei")27 kB10/Aug/2016 7:35 AM
### Issue Links

is duplicated by

![Bug - A problem which impairs or prevents the functions of the product.](/secure/viewavatar?size=xsmall&avatarId=51493&avatarType=issuetype "Bug - A problem which impairs or prevents the functions of the product.")
[JRASERVER-60721](/browse/JRASERVER-60721)
Webhooks for comments do not respect JQL filter

* ![Medium - Medium priority issues](/images/icons/priorities/medium.svg "Medium - Medium priority issues")
* Closed

![Bug - A problem which impairs or prevents the functions of the product.](/secure/viewavatar?size=xsmall&avatarId=51493&avatarType=issuetype "Bug - A problem which impairs or prevents the functions of the product.")
[JRASERVER-63005](/browse/JRASERVER-63005)
Webhook JQL restriction not working for 'Comment Added' event

* ![Low - Low priority issues](/images/icons/priorities/low.svg "Low - Low priority issues")
* Closed

![Bug - A problem which impairs or prevents the functions of the product.](/secure/viewavatar?size=xsmall&avatarId=51493&avatarType=issuetype "Bug - A problem which impairs or prevents the functions of the product.")
[JRASERVER-67663](/browse/JRASERVER-67663)
WebHooks based on "worklog" events do not respect the JQL in place

* ![Low - Low priority issues](/images/icons/priorities/low.svg "Low - Low priority issues")
* Closed

is related to

![Suggestion - ](/secure/viewavatar?size=xsmall&avatarId=51505&avatarType=issuetype "Suggestion - ")
[JRASERVER-66134](/browse/JRASERVER-66134)
Return project key in JSON response for comment and worklog related webhook

* Gathering Interest

![](https://jira.atlassian.com/s/2u4fri/9120016/1rg1jpn/9.12.16/_/download/resources/com.atlassian.jira.jira-view-issue-plugin:linkingmodule/throbber)

[PSR-79](https://bulldog.internal.atlassian.com/browse/PSR-79) Loading...

relates to

![Bug - A problem which impairs or prevents the functions of the product.](/secure/viewavatar?size=xsmall&avatarId=51493&avatarType=issuetype "Bug - A problem which impairs or prevents the functions of the product.")
[JRACLOUD-59980](/browse/JRACLOUD-59980)
JQL filter for Webhooks doesn't work correctly when "Comment", "Worklog", "Attachment" or "IssueLink" related events are fired

* ![Medium - Medium priority issues](/images/icons/priorities/medium.svg "Medium - Medium priority issues")
* Closed

![](https://jira.atlassian.com/s/2u4fri/9120016/1rg1jpn/9.12.16/_/download/resources/com.atlassian.jira.jira-view-issue-plugin:linkingmodule/throbber)

[RAID-785](https://bulldog.internal.atlassian.com/browse/RAID-785) Loading...

mentioned in

![](https://jira.atlassian.com/s/2u4fri/9120016/1rg1jpn/9.12.16/_/download/resources/com.atlassian.jira.jira-view-issue-plugin:linkingmodule/throbber)

[Page](https://enterprise-tam.atlassian.net/wiki/pages/viewpage.action?pageId=315982551) Loading...

![](https://jira.atlassian.com/s/2u4fri/9120016/1rg1jpn/9.12.16/_/download/resources/com.atlassian.jira.jira-view-issue-plugin:linkingmodule/throbber)

[Page](https://enterprise-tam.atlassian.net/wiki/pages/viewpage.action?pageId=367132899) Loading...

![](https://jira.atlassian.com/s/2u4fri/9120016/1rg1jpn/9.12.16/_/download/resources/com.atlassian.jira.jira-view-issue-plugin:linkingmodule/throbber)

[Page](https://enterprise-tam.atlassian.net/wiki/pages/viewpage.action?pageId=53152908) Loading...

![](https://jira.atlassian.com/s/2u4fri/9120016/1rg1jpn/9.12.16/_/download/resources/com.atlassian.jira.jira-view-issue-plugin:linkingmodule/throbber)

[Page](https://as-a-team.atlassian.net/wiki/pages/viewpage.action?pageId=8588656780) Loading...

![](https://jira.atlassian.com/s/2u4fri/9120016/1rg1jpn/9.12.16/_/download/resources/com.atlassian.jira.jira-view-issue-plugin:linkingmodule/throbber)

[Page](https://extranet.atlassian.com/pages/viewpage.action?pageId=3007072729) Loading...

![](https://jira.atlassian.com/s/2u4fri/9120016/1rg1jpn/9.12.16/_/download/resources/com.atlassian.jira.jira-view-issue-plugin:linkingmodule/throbber)

[Page](https://extranet.atlassian.com/pages/viewpage.action?pageId=3007354423) Loading...

![](https://jira.atlassian.com/s/2u4fri/9120016/1rg1jpn/9.12.16/_/download/resources/com.atlassian.jira.jira-view-issue-plugin:linkingmodule/throbber)

[Page](https://extranet.atlassian.com/pages/viewpage.action?pageId=3515604956) Loading...

![](https://jira.atlassian.com/s/2u4fri/9120016/1rg1jpn/9.12.16/_/download/resources/com.atlassian.jira.jira-view-issue-plugin:linkingmodule/throbber)

[Page](https://extranet.atlassian.com/pages/viewpage.action?pageId=3703898828) Loading...

Show 10 more links (2 relates to, 8 mentioned in)

### Forms

### Activity

### People

Assignee:

![psuwala](https://jira.atlassian.com/secure/useravatar?size=small&avatarId=10612)
ΞΔ (Inactive)

Reporter:

![yokamoto](https://jira.atlassian.com/secure/useravatar?size=small&avatarId=10612)
Yuki Okamoto (Inactive)

Votes:
82
Vote for this issue

Watchers:
96
Start watching this issue

### Dates

Due:

24/Dec/2018

Created:

26/Feb/2016 7:31 AM

Updated:

14/Aug/2024 6:44 PM

Resolved:

25/Jun/2018 2:42 PM

* Atlassian Jira [Project Management Software](https://www.atlassian.com/software/jira)
* [About Jira](/secure/AboutPage.jspa/secure/AboutPage.jspa)
* [Report a problem](/secure/CreateIssue%21default.jspa)
* [Privacy policy](https://www.atlassian.com/legal/privacy-policy)
* [Notice at Collection](https://www.atlassian.com/legal/privacy-policy#additional-disclosures-for-ca-residents)

[Atlassian](http://www.atlassian.com/)


