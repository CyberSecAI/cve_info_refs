=== Content from www.debian.org_3910a7da_20250126_003342.html ===


---

[[Date Prev](msg00070.html)][[Date Next](msg00072.html)]
[[Thread Prev](msg00070.html)][[Thread Next](msg00072.html)]
[[Date Index](maillist.html#00071)]
[[Thread Index](threads.html#00071)]

# [SECURITY] [DSA 4145-1] gitlab security update

---

* *To*: debian-security-announce@lists.debian.org
* *Subject*: [SECURITY] [DSA 4145-1] gitlab security update
* *From*: Moritz Muehlenhoff <jmm@debian.org>
* *Date*: Sun, 18 Mar 2018 19:51:04 +0100
* *Message-id*: <[[ðŸ”Ž]](/msgid-search/20180318185104.GA7103%40pisco.westfalen.local)Â [20180318185104.GA7103@pisco.westfalen.local](msg00071.html)>
* *Reply-to*: debian-security-announce-request@lists.debian.org

---

```
-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA512

- -------------------------------------------------------------------------
Debian Security Advisory DSA-4145-1                   security@debian.org
<https://www.debian.org/security/>                       Moritz Muehlenhoff
March 18, 2018                        <https://www.debian.org/security/faq>
- -------------------------------------------------------------------------

Package        : gitlab
CVE ID         : CVE-2017-0915 CVE-2017-0916 CVE-2017-0917 CVE-2017-0918
                 CVE-2017-0925 CVE-2017-0926 CVE-2018-3710

Several vulnerabilities have been discovered in Gitlab, a software
platform to collaborate on code:

CVE-2017-0915 / CVE-2018-3710

    Arbitrary code execution in project import.

CVE-2017-0916

    Command injection via Webhooks.

CVE-2017-0917

    Cross-site scripting in CI job output.

CVE-2017-0918

    Insufficient restriction of CI runner for project cache access.

CVE-2017-0925

    Information disclosure in Services API.

CVE-2017-0926

    Restrictions for disabled OAuth providers could be bypassed.

For the stable distribution (stretch), these problems have been fixed in
version 8.13.11+dfsg1-8+deb9u1.

We recommend that you upgrade your gitlab packages.

For the detailed security status of gitlab please refer to
its security tracker page at:
<https://security-tracker.debian.org/tracker/gitlab>

Further information about Debian Security Advisories, how to apply
these updates to your system and frequently asked questions can be
found at: <https://www.debian.org/security/>

Mailing list: debian-security-announce@lists.debian.org
-----BEGIN PGP SIGNATURE-----

iQIzBAEBCgAdFiEEtuYvPRKsOElcDakFEMKTtsN8TjYFAlqutO4ACgkQEMKTtsN8
TjZjnQ/+KTZ1TKXjhz4YPdXRQU+omJ4tENM5G7Ayn5PosyTqzWA2SvNUmT9wDsi8
Y5xr2sw9jMoFzpv95sh8A1KRaaV1flDCnO/qIF7hN/6Wz1PZj1yZJRfzxZCNYlc/
Q1HXUFhVun8wTatlu/GC80GE39k/13hXYfZCLp9HPz//2aC8iNsF2KuRn9zyFPy6
PqpE1ZObcgagwG46JMrvB/bsQ+CRvasupOhhDkkl6+w5Mb5MECU+N2gl347BKGvg
InPoCsc2cihMaBMWtAQzr+C1NQyuKeLnK8BBTcxm72d4Ulcnnk03EK+wZDFY0/mN
rCUaxcmqC9DSHs/nIccWKVNRFpIXevX46QXZ/APbIgDAmDRaj2XYYM7GB3EkH0tE
GD9Tg3DK0PY4a9DO3yjA6OoHibtA58nNhFOwJEcpTbN72BhgL0kk5F8bjAeO14k0
TWHzH9QA/2GsJOczEHsoCsm4VxG3TIlEQh4/lYfCDLbpCT6JPjRJrtD23ANdnRZC
eccj+VWpt+M2sscjK6EfPqqEl+Ne+BQynGrCgIgCNKISyezHiXpaxycglQHunquk
d3eyEdw4/4CDmS5rBtw0LxVqEPmQsPe06Z9jsLb8dVAacPgXjTpufh4PvmFbQx+E
bnKue3Mr1Jkibb1v3cxmC6JHTc29JSn545veqvN3HnNQFq0E2FY=
=G7QV
-----END PGP SIGNATURE-----

```

---



=== Content from gitlab.com_30bf3381_20250126_003341.html ===


[Skip to content](#content-body)
GitLab
[Next](https://next.gitlab.com)

* Menu

  + [Why GitLab](https://about.gitlab.com/why-gitlab)
  + [Pricing](https://about.gitlab.com/pricing)
  + [Contact Sales](https://about.gitlab.com/sales)
  + [Explore](/explore)
* [Why GitLab](https://about.gitlab.com/why-gitlab)
* [Pricing](https://about.gitlab.com/pricing)
* [Contact Sales](https://about.gitlab.com/sales)
* [Explore](/explore)

* [Sign in](/users/sign_in?redirect_to_referer=yes)
* [Get free trial](/users/sign_up)

Project 'gitlab-org/gitlab-ce' was moved to 'gitlab-org/gitlab-foss'. Please update any links and bookmarks that may still have the old path.

# GitHub Integration Allows GitHub login even if OAuth sign-in source is disabled

### Summary

Disabling OAuth sign-in in Admin settings should never allow a user to login using their OAuth account.

### Steps to reproduce

1. Enable GitHub integration (<http://docs.gitlab.com/ce/integration/github.html>)
2. Configure LDAP connection (might work with normal accounts as well, but tested with an LDAP login)
3. Disable GitHub OAuth Sign-in under Sign-In Restrictions on the Admin settings page
4. Logon to an LDAP account and connect it to your GitHub account
5. Logout of the GitLab installation and ensure you are also logged out of GitHub.
6. Bring up the login page and edit the form definition so that it posts back to "/users/auth/github" instead of ldapmain: `

`
7. Enter any values into the username and password field for the ldap credentials and click sign in.
8. If you are logged into GitHub you will be logged in without any more prompts. If you aren't logged into GitHub you will be prompted to logon and when you do you will be given access.
### What is the current *bug* behavior?

I am either logged into GitLab using my provided GitHub credentials, or if already logged into GitHub I'm logged into the associated account.

### What is the expected *correct* behavior?

Login should not be allowed.

### Relevant logs and/or screenshots

Confirmation that sign-in to GitHub is disabled:

[![github-login-disabled](data:image/gif;base64...)](/-/project/13083/uploads/f45760076ef0610ae38976e5ce0b4fa4/github-login-disabled.png)

Changed html before posting (also shows that the OAuth logins are actually disabled as no icons below the login form):

[![change-form-action](data:image/gif;base64...)](/-/project/13083/uploads/4244490c03a93f1dbf9736fc242982bb/change-form-action.png)

Confirmation that the login happened by GitHub:

[![logged-in-via-github](data:image/gif;base64...)](/-/project/13083/uploads/52665d7316fc23bac75cbf0a4866749a/logged-in-via-github.png)

### Output of checks

Very minor change for LDAP logons and support for MySQL are the only differences with the main omnibus gitlab installation. Built from fork at <https://gitlab.com/stevenorman/gitlab-ce>

```
~ $ sudo gitlab-rake gitlab:env:info
[sudo] password for stevenorman:

System information
System:
Current User:   git
Using RVM:      no
Ruby Version:   2.3.3p222
Gem Version:    2.6.6
Bundler Version:1.13.7
Rake Version:   10.5.0
Redis Version:  3.2.5
Git Version:    2.11.1
Sidekiq Version:4.2.7

GitLab information
Version:        9.1.3-TR
Revision:       17da30c
Directory:      /opt/gitlab/embedded/service/gitlab-rails
DB Adapter:     mysql2
URL:            https://git.<snip>.com
HTTP Clone URL: https://git.<snip>.com/some-group/some-project.git
SSH Clone URL:  git@git.<snip>.com:some-group/some-project.git
Using LDAP:     yes
Using Omniauth: yes
Omniauth Providers: github

GitLab Shell
Version:        5.0.2
Repository storage paths:
- default:      /<snip>/git-data/repositories
Hooks:          /opt/gitlab/embedded/service/gitlab-shell/hooks
Git:            /opt/gitlab/embedded/bin/git
```

#### Results of GitLab application Check

```
Checking GitLab Shell ...

GitLab Shell version >= 5.0.2 ? ... OK (5.0.2)
Repo base directory exists?
default... yes
Repo storage directories are symlinks?
default... no
Repo paths owned by git:git?
default... yes
Repo paths access is drwxrws---?
default... yes
hooks directories in repos are links: ...
<snip> all projects yes or empty
Running /opt/gitlab/embedded/service/gitlab-shell/bin/check
Check GitLab API access: OK
Access to /var/opt/gitlab/.ssh/authorized_keys: OK
Send ping to redis server: OK
gitlab-shell self-check successful

Checking GitLab Shell ... Finished

Checking Sidekiq ...

Running? ... yes
Number of Sidekiq processes ... 1

Checking Sidekiq ... Finished

Checking Reply by email ...

Reply by email is disabled in config/gitlab.yml

Checking Reply by email ... Finished

Checking LDAP ...

Server: ldapmain
LDAP authentication... Success
<snip> user list
Checking LDAP ... Finished

Checking GitLab ...

Git configured with autocrlf=input? ... yes
Database config exists? ... yes
All migrations up? ... yes
Database contains orphaned GroupMembers? ... no
GitLab config exists? ... yes
GitLab config outdated? ... no
Log directory writable? ... yes
Tmp directory writable? ... yes
Uploads directory setup correctly? ... yes
Init script exists? ... skipped (omnibus-gitlab has no init script)
Init script up-to-date? ... skipped (omnibus-gitlab has no init script)
projects have namespace: ...
<snip> all yes
Redis version >= 2.8.0? ... yes
Ruby version >= 2.1.0 ? ... yes (2.3.3)
Your git bin path is "/opt/gitlab/embedded/bin/git"
Git version >= 2.7.3 ? ... yes (2.11.1)
Active users: 758

Checking GitLab ... Finished
```

### Possible fixes

Route for GitHub logins (and probably other OAuth providers) should be checking for the relevant application setting.

Assignee
Loading

Time tracking
Loading

Confidentiality

Confidentiality controls have moved to the issue actions menu () at the top of the page.


