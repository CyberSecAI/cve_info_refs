=== Content from github.com_05ae0440_20250124_124816.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Ftorproject%2Ftor%2Fcommit%2F79b59a2dfcb68897ee89d98587d09e55f07e68d7)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Ftorproject%2Ftor%2Fcommit%2F79b59a2dfcb68897ee89d98587d09e55f07e68d7)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fcommit_fragments%2Frepo_layout&source=header-repo&source_repo=torproject%2Ftor)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[torproject](/torproject)
/
**[tor](/torproject/tor)**
Public

* [Notifications](/login?return_to=%2Ftorproject%2Ftor) You must be signed in to change notification settings
* [Fork
  945](/login?return_to=%2Ftorproject%2Ftor)
* [Star
   4.5k](/login?return_to=%2Ftorproject%2Ftor)

* [Code](/torproject/tor)
* [Pull requests
  152](/torproject/tor/pulls)
* [Actions](/torproject/tor/actions)
* [Security](/torproject/tor/security)
* [Insights](/torproject/tor/pulse)

Additional navigation options

* [Code](/torproject/tor)
* [Pull requests](/torproject/tor/pulls)
* [Actions](/torproject/tor/actions)
* [Security](/torproject/tor/security)
* [Insights](/torproject/tor/pulse)

## Commit

[Permalink](/torproject/tor/commit/79b59a2dfcb68897ee89d98587d09e55f07e68d7)

This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository.

TROVE-2017-004: Fix assertion failure in relay\_send\_end\_cell\_from\_edge\_

[Browse files](/torproject/tor/tree/79b59a2dfcb68897ee89d98587d09e55f07e68d7)
Browse the repository at this point in the history

```
This fixes an assertion failure in relay_send_end_cell_from_edge_() when an
origin circuit and a cpath_layer = NULL were passed.

A service rendezvous circuit could do such a thing when a malformed BEGIN cell
is received but shouldn't in the first place because the service needs to send
an END cell on the circuit for which it can not do without a cpath_layer.

Fixes #22493

Reported-by: Roger Dingledine <arma@torproject.org>
Signed-off-by: David Goulet <dgoulet@torproject.org>
```

* Loading branch information

[![@dgoulet-tor](https://avatars.githubusercontent.com/u/37544951?s=40&v=4)](/dgoulet-tor) [![@nmathewson](https://avatars.githubusercontent.com/u/162054?s=40&v=4)](/nmathewson)

[dgoulet-tor](/torproject/tor/commits?author=dgoulet-tor "View all commits by dgoulet-tor")
authored and
[nmathewson](/torproject/tor/commits?author=nmathewson "View all commits by nmathewson")
committed
Jun 8, 2017

1 parent
[68c3df6](/torproject/tor/commit/68c3df69dec4b2b9b5276f7cc9f86ef4167fc705)

commit 79b59a2

 Show file tree

 Hide file tree

Showing
**2 changed files**
with
**19 additions**
and
**7 deletions**.

* Whitespace
* Ignore whitespace

* Split
* Unified

* changes

  + changes/trove-2017-004
    [trove-2017-004](#diff-bbf884f138b78407d4980bb8fcf19a8ffb010ae491da57388e9aca7fdbea5de1)
* src/or

  + src/or/connection\_edge.c
    [connection\_edge.c](#diff-ebe86d21b68418333d8c29fccfb1c53b9d9c081c3775c0b4ae7ab16f5bb77fe8)

## There are no files selected for viewing

5 changes: 5 additions & 0 deletions

5
[changes/trove-2017-004](#diff-bbf884f138b78407d4980bb8fcf19a8ffb010ae491da57388e9aca7fdbea5de1 "changes/trove-2017-004")

Show comments

[View file](/torproject/tor/blob/79b59a2dfcb68897ee89d98587d09e55f07e68d7/changes/trove-2017-004)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
|  |  | @@ -0,0 +1,5 @@ |
|  |  | o Major bugfixes (hidden service, relay): |
|  |  | - Fix an assertion failure when an hidden service handles a malformed |
|  |  | BEGIN cell. This bug resulted in the service crashing triggered by a |
|  |  | tor\_assert(). Part of TROVE-2017-004. Fixes bug 22493; bugfix on |
|  |  | tor-0.3.0.1-alpha. Found by armadev. |

21 changes: 14 additions & 7 deletions

21
[src/or/connection\_edge.c](#diff-ebe86d21b68418333d8c29fccfb1c53b9d9c081c3775c0b4ae7ab16f5bb77fe8 "src/or/connection_edge.c")

Show comments

[View file](/torproject/tor/blob/79b59a2dfcb68897ee89d98587d09e55f07e68d7/src/or/connection_edge.c)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -3091,14 +3091,21 @@ connection\_exit\_begin\_conn(cell\_t \*cell, circuit\_t \*circ) |
|  |  | char \*address = NULL; |
|  |  | uint16\_t port = 0; |
|  |  | or\_circuit\_t \*or\_circ = NULL; |
|  |  | origin\_circuit\_t \*origin\_circ = NULL; |
|  |  | crypt\_path\_t \*layer\_hint = NULL; |
|  |  | const or\_options\_t \*options = get\_options(); |
|  |  | begin\_cell\_t bcell; |
|  |  | int rv; |
|  |  | uint8\_t end\_reason=0; |
|  |  |  |
|  |  | assert\_circuit\_ok(circ); |
|  |  | if (!CIRCUIT\_IS\_ORIGIN(circ)) |
|  |  | if (!CIRCUIT\_IS\_ORIGIN(circ)) { |
|  |  | or\_circ = TO\_OR\_CIRCUIT(circ); |
|  |  | } else { |
|  |  | tor\_assert(circ->purpose == CIRCUIT\_PURPOSE\_S\_REND\_JOINED); |
|  |  | origin\_circ = TO\_ORIGIN\_CIRCUIT(circ); |
|  |  | layer\_hint = origin\_circ->cpath->prev; |
|  |  | } |
|  |  |  |
|  |  | relay\_header\_unpack(&rh, cell->payload); |
|  |  | if (rh.length > RELAY\_PAYLOAD\_SIZE) |
| Expand All | | @@ -3123,7 +3130,7 @@ connection\_exit\_begin\_conn(cell\_t \*cell, circuit\_t \*circ) |
|  |  | return -END\_CIRC\_REASON\_TORPROTOCOL; |
|  |  | } else if (rv == -1) { |
|  |  | tor\_free(bcell.address); |
|  |  | relay\_send\_end\_cell\_from\_edge(rh.stream\_id, circ, end\_reason, NULL); |
|  |  | relay\_send\_end\_cell\_from\_edge(rh.stream\_id, circ, end\_reason, layer\_hint); |
|  |  | return 0; |
|  |  | } |
|  |  |  |
| Expand Down  Expand Up | | @@ -3160,7 +3167,7 @@ connection\_exit\_begin\_conn(cell\_t \*cell, circuit\_t \*circ) |
|  |  | if (!directory\_permits\_begindir\_requests(options) || |
|  |  | circ->purpose != CIRCUIT\_PURPOSE\_OR) { |
|  |  | relay\_send\_end\_cell\_from\_edge(rh.stream\_id, circ, |
|  |  | END\_STREAM\_REASON\_NOTDIRECTORY, NULL); |
|  |  | END\_STREAM\_REASON\_NOTDIRECTORY, layer\_hint); |
|  |  | return 0; |
|  |  | } |
|  |  | /\* Make sure to get the 'real' address of the previous hop: the |
| Expand All | | @@ -3177,7 +3184,7 @@ connection\_exit\_begin\_conn(cell\_t \*cell, circuit\_t \*circ) |
|  |  | } else { |
|  |  | log\_warn(LD\_BUG, "Got an unexpected command %d", (int)rh.command); |
|  |  | relay\_send\_end\_cell\_from\_edge(rh.stream\_id, circ, |
|  |  | END\_STREAM\_REASON\_INTERNAL, NULL); |
|  |  | END\_STREAM\_REASON\_INTERNAL, layer\_hint); |
|  |  | return 0; |
|  |  | } |
|  |  |  |
| Expand All | | @@ -3188,7 +3195,7 @@ connection\_exit\_begin\_conn(cell\_t \*cell, circuit\_t \*circ) |
|  |  | if (bcell.flags & BEGIN\_FLAG\_IPV4\_NOT\_OK) { |
|  |  | tor\_free(address); |
|  |  | relay\_send\_end\_cell\_from\_edge(rh.stream\_id, circ, |
|  |  | END\_STREAM\_REASON\_EXITPOLICY, NULL); |
|  |  | END\_STREAM\_REASON\_EXITPOLICY, layer\_hint); |
|  |  | return 0; |
|  |  | } |
|  |  | } |
| Expand All | | @@ -3211,7 +3218,7 @@ connection\_exit\_begin\_conn(cell\_t \*cell, circuit\_t \*circ) |
|  |  | n\_stream->deliver\_window = STREAMWINDOW\_START; |
|  |  |  |
|  |  | if (circ->purpose == CIRCUIT\_PURPOSE\_S\_REND\_JOINED) { |
|  |  | origin\_circuit\_t \*origin\_circ = TO\_ORIGIN\_CIRCUIT(circ); |
|  |  | tor\_assert(origin\_circ); |
|  |  | log\_info(LD\_REND,"begin is for rendezvous. configuring stream."); |
|  |  | n\_stream->base\_.address = tor\_strdup("(rendezvous)"); |
|  |  | n\_stream->base\_.state = EXIT\_CONN\_STATE\_CONNECTING; |
| Expand All | | @@ -3231,7 +3238,7 @@ connection\_exit\_begin\_conn(cell\_t \*cell, circuit\_t \*circ) |
|  |  | \* the hidden service. \*/ |
|  |  | relay\_send\_end\_cell\_from\_edge(rh.stream\_id, circ, |
|  |  | END\_STREAM\_REASON\_DONE, |
|  |  | origin\_circ->cpath->prev); |
|  |  | layer\_hint); |
|  |  | connection\_free(TO\_CONN(n\_stream)); |
|  |  | tor\_free(address); |
|  |  |  |
| Expand Down | |  |

Toggle all file notes
Toggle all file annotations

### 0 comments on commit `79b59a2`

Please
[sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Ftorproject%2Ftor%2Fcommit%2F79b59a2dfcb68897ee89d98587d09e55f07e68d7) to comment.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from trac.torproject.org_04db9fa4_20250124_124819.html ===


[Skip to content](#content-body)
GitLab
[![](data:image/gif;base64...)](/ "Homepage")

* [Explore](/explore)

* [Sign in](/users/sign_in?redirect_to_referer=yes)

This is an archived project. Repository and other project resources are read-only.

# Fix TROVE-2017-004

To upload designs, you'll need to enable LFS and have an admin enable hashed storage. [More information](/help/user/project/issues/design_management.md#prerequisites)

Assignee
Loading

Time tracking
Loading

Confidentiality

Confidentiality controls have moved to the issue actions menu () at the top of the page.



=== Content from lists.torproject.org_c417abf4_20250124_124818.html ===

# [tor-announce] Tor 0.3.0.8 is released, with security fixes for hidden services. (As are 0.2.4.29, 0.2.5.14, 0.2.6.12, 0.2.7.8, 0.2.8.14, and 0.2.9.11)

**Nick Mathewson**
nickm at torproject.org

*Thu Jun 8 17:11:48 UTC 2017*

* Previous message: [[tor-announce] Tor Browser 7.0 is released](000130.html)
* Next message: [[tor-announce] Tor Browser 7.0.1 is released](000132.html)
* **Messages sorted by:**
  [[ date ]](date.html#131)
  [[ thread ]](thread.html#131)
  [[ subject ]](subject.html#131)
  [[ author ]](author.html#131)

---

```
Hello!

Source code for a new Tor release (0.3.0.8) is now available on the
website. Among other things, it fixes two issues in earlier versions
of the hidden service code that would allow an attacker to cause a
hidden service to exit with an assertion failure.

If you're running a hidden service, you should upgrade to this
release, or one of the other versions released today.  Source is
available on the website now; packages should be available over the
next several days.

Concurrently with 0.3.0.8, the following versions are also now
available: 0.2.4.29, 0.2.5.14, 0.2.6.12, 0.2.7.8, 0.2.8.14, and
0.2.9.11.  You can find them all at <https://dist.torproject.org/>

One last reminder: Tor 0.2.4, 0.2.6, and 0.2.7 will no longer be
supported after 1 August of this year.  Tor 0.2.8 will not be
supported after 1 Jan of 2018.  Tor 0.2.5 will not be supported after
1 May of 2018.  If you need a release with long-term support, 0.2.9 is
what we recommend: we plan to support it until at least 1 Jan 2020.

Below are the changelogs for the new stable releases:

=================

Changes in version 0.3.0.8 - 2017-06-08
  Tor 0.3.0.8 fixes a pair of bugs that would allow an attacker to
  remotely crash a hidden service with an assertion failure. Anyone
  running a hidden service should upgrade to this version, or to some
  other version with fixes for TROVE-2017-004 and TROVE-2017-005.

  Tor 0.3.0.8 also includes fixes for several key management bugs
  that sometimes made relays unreliable, as well as several other
  bugfixes described below.

  o Major bugfixes (hidden service, relay, security, backport
    from 0.3.1.3-alpha):
    - Fix a remotely triggerable assertion failure when a hidden service
      handles a malformed BEGIN cell. Fixes bug 22493, tracked as
      TROVE-2017-004 and as CVE-2017-0375; bugfix on 0.3.0.1-alpha.
    - Fix a remotely triggerable assertion failure caused by receiving a
      BEGIN_DIR cell on a hidden service rendezvous circuit. Fixes bug
      22494, tracked as TROVE-2017-005 and CVE-2017-0376; bugfix
      on 0.2.2.1-alpha.

  o Major bugfixes (relay, link handshake, backport from 0.3.1.3-alpha):
    - When performing the v3 link handshake on a TLS connection, report
      that we have the x509 certificate that we actually used on that
      connection, even if we have changed certificates since that
      connection was first opened. Previously, we would claim to have
      used our most recent x509 link certificate, which would sometimes
      make the link handshake fail. Fixes one case of bug 22460; bugfix
      on 0.2.3.6-alpha.

  o Major bugfixes (relays, key management, backport from 0.3.1.3-alpha):
    - Regenerate link and authentication certificates whenever the key
      that signs them changes; also, regenerate link certificates
      whenever the signed key changes. Previously, these processes were
      only weakly coupled, and we relays could (for minutes to hours)
      wind up with an inconsistent set of keys and certificates, which
      other relays would not accept. Fixes two cases of bug 22460;
      bugfix on 0.3.0.1-alpha.
    - When sending an Ed25519 signing->link certificate in a CERTS cell,
      send the certificate that matches the x509 certificate that we
      used on the TLS connection. Previously, there was a race condition
      if the TLS context rotated after we began the TLS handshake but
      before we sent the CERTS cell. Fixes a case of bug 22460; bugfix
      on 0.3.0.1-alpha.

  o Major bugfixes (hidden service v3, backport from 0.3.1.1-alpha):
    - Stop rejecting v3 hidden service descriptors because their size
      did not match an old padding rule. Fixes bug 22447; bugfix on
      tor-0.3.0.1-alpha.

  o Minor features (fallback directory list, backport from 0.3.1.3-alpha):
    - Replace the 177 fallbacks originally introduced in Tor 0.2.9.8 in
      December 2016 (of which ~126 were still functional) with a list of
      151 fallbacks (32 new, 119 unchanged, 58 removed) generated in May
      2017. Resolves ticket 21564.

  o Minor bugfixes (configuration, backport from 0.3.1.1-alpha):
    - Do not crash when starting with LearnCircuitBuildTimeout 0. Fixes
      bug 22252; bugfix on 0.2.9.3-alpha.

  o Minor bugfixes (correctness, backport from 0.3.1.3-alpha):
    - Avoid undefined behavior when parsing IPv6 entries from the geoip6
      file. Fixes bug 22490; bugfix on 0.2.4.6-alpha.

  o Minor bugfixes (link handshake, backport from 0.3.1.3-alpha):
    - Lower the lifetime of the RSA->Ed25519 cross-certificate to six
      months, and regenerate it when it is within one month of expiring.
      Previously, we had generated this certificate at startup with a
      ten-year lifetime, but that could lead to weird behavior when Tor
      was started with a grossly inaccurate clock. Mitigates bug 22466;
      mitigation on 0.3.0.1-alpha.

  o Minor bugfixes (memory leak, directory authority, backport from
    0.3.1.2-alpha):
    - When directory authorities reject a router descriptor due to
      keypinning, free the router descriptor rather than leaking the
      memory. Fixes bug 22370; bugfix on 0.2.7.2-alpha.

Changes in version 0.2.9.11 - 2017-06-08
  Tor 0.2.9.11 backports a fix for a bug that would allow an attacker to
  remotely crash a hidden service with an assertion failure. Anyone
  running a hidden service should upgrade to this version, or to some
  other version with fixes for TROVE-2017-005. (Versions before 0.3.0
  are not affected by TROVE-2017-004.)

  Tor 0.2.9.11 also backports fixes for several key management bugs
  that sometimes made relays unreliable, as well as several other
  bugfixes described below.

  o Major bugfixes (hidden service, relay, security, backport
    from 0.3.1.3-alpha):
    - Fix a remotely triggerable assertion failure caused by receiving a
      BEGIN_DIR cell on a hidden service rendezvous circuit. Fixes bug
      22494, tracked as TROVE-2017-005 and CVE-2017-0376; bugfix
      on 0.2.2.1-alpha.

  o Major bugfixes (relay, link handshake, backport from 0.3.1.3-alpha):
    - When performing the v3 link handshake on a TLS connection, report
      that we have the x509 certificate that we actually used on that
      connection, even if we have changed certificates since that
      connection was first opened. Previously, we would claim to have
      used our most recent x509 link certificate, which would sometimes
      make the link handshake fail. Fixes one case of bug 22460; bugfix
      on 0.2.3.6-alpha.

  o Minor features (fallback directory list, backport from 0.3.1.3-alpha):
    - Replace the 177 fallbacks originally introduced in Tor 0.2.9.8 in
      December 2016 (of which ~126 were still functional) with a list of
      151 fallbacks (32 new, 119 unchanged, 58 removed) generated in May
      2017. Resolves ticket 21564.

  o Minor features (future-proofing, backport from 0.3.0.7):
    - Tor no longer refuses to download microdescriptors or descriptors if
      they are listed as "published in the future".  This change will
      eventually allow us to stop listing meaningful "published" dates
      in microdescriptor consensuses, and thereby allow us to reduce the
      resources required to download consensus diffs by over 50%.
      Implements part of ticket 21642; implements part of proposal 275.

  o Minor features (directory authorities, backport from 0.3.0.4-rc)
    - Directory authorities now reject relays running versions
      0.2.9.1-alpha through 0.2.9.4-alpha, because those relays
      suffer from bug 20499 and don't keep their consensus cache
      up-to-date. Resolves ticket 20509.

  o Minor features (geoip):
    - Update geoip and geoip6 to the May 2 2017 Maxmind GeoLite2
      Country database.

  o Minor bugfixes (control port, backport from 0.3.0.6):
    - The GETINFO extra-info/digest/<digest> command was broken because
      of a wrong base16 decode return value check, introduced when
      refactoring that API. Fixes bug 22034; bugfix on 0.2.9.1-alpha.

  o Minor bugfixes (correctness, backport from 0.3.1.3-alpha):
    - Avoid undefined behavior when parsing IPv6 entries from the geoip6
      file. Fixes bug 22490; bugfix on 0.2.4.6-alpha.

  o Minor bugfixes (Linux seccomp2 sandbox, backport from 0.3.0.7):
    - The getpid() system call is now permitted under the Linux seccomp2
      sandbox, to avoid crashing with versions of OpenSSL (and other
      libraries) that attempt to learn the process's PID by using the
      syscall rather than the VDSO code. Fixes bug 21943; bugfix
      on 0.2.5.1-alpha.

  o Minor bugfixes (memory leak, directory authority, backport
    from 0.3.1.2-alpha):
    - When directory authorities reject a router descriptor due to
      keypinning, free the router descriptor rather than leaking the
      memory. Fixes bug 22370; bugfix on 0.2.7.2-alpha.

Changes in version 0.2.8.14 - 2017-06-08
  Tor 0.2.7.8 backports a fix for a bug that would allow an attacker to
  remotely crash a hidden service with an assertion failure. Anyone
  running a hidden service should upgrade to this version, or to some
  other version with fixes for TROVE-2017-005.  (Versions before 0.3.0
  are not affected by TROVE-2017-004.)

  o Major bugfixes (hidden service, relay, security):
    - Fix a remotely triggerable assertion failure caused by receiving a
      BEGIN_DIR cell on a hidden service rendezvous circuit. Fixes bug
      22494, tracked as TROVE-2017-005 and CVE-2017-0376; bugfix
      on 0.2.2.1-alpha.

  o Minor features (geoip):
    - Update geoip and geoip6 to the May 2 2017 Maxmind GeoLite2
      Country database.

  o Minor features (fallback directory list, backport from 0.3.1.3-alpha):
    - Replace the 177 fallbacks originally introduced in Tor 0.2.9.8 in
      December 2016 (of which ~126 were still functional) with a list of
      151 fallbacks (32 new, 119 unchanged, 58 removed) generated in May
      2017. Resolves ticket 21564.

  o Minor bugfixes (correctness):
    - Avoid undefined behavior when parsing IPv6 entries from the geoip6
      file. Fixes bug 22490; bugfix on 0.2.4.6-alpha.

Changes in version 0.2.7.8 - 2017-06-08
  Tor 0.2.7.8 backports a fix for a bug that would allow an attacker to
  remotely crash a hidden service with an assertion failure. Anyone
  running a hidden service should upgrade to this version, or to some
  other version with fixes for TROVE-2017-005.  (Versions before 0.3.0
  are not affected by TROVE-2017-004.)

  o Major bugfixes (hidden service, relay, security):
    - Fix a remotely triggerable assertion failure caused by receiving a
      BEGIN_DIR cell on a hidden service rendezvous circuit. Fixes bug
      22494, tracked as TROVE-2017-005 and CVE-2017-0376; bugfix
      on 0.2.2.1-alpha.

  o Minor features (geoip):
    - Update geoip and geoip6 to the May 2 2017 Maxmind GeoLite2
      Country database.

  o Minor bugfixes (correctness):
    - Avoid undefined behavior when parsing IPv6 entries from the geoip6
      file. Fixes bug 22490; bugfix on 0.2.4.6-alpha.

Changes in version 0.2.6.12 - 2017-06-08
  Tor 0.2.6.12 backports a fix for a bug that would allow an attacker to
  remotely crash a hidden service with an assertion failure. Anyone
  running a hidden service should upgrade to this version, or to some
  other version with fixes for TROVE-2017-005.  (Versions before 0.3.0
  are not affected by TROVE-2017-004.)

  o Major bugfixes (hidden service, relay, security):
    - Fix a remotely triggerable assertion failure caused by receiving a
      BEGIN_DIR cell on a hidden service rendezvous circuit. Fixes bug
      22494, tracked as TROVE-2017-005 and CVE-2017-0376; bugfix
      on 0.2.2.1-alpha.

  o Minor features (geoip):
    - Update geoip and geoip6 to the May 2 2017 Maxmind GeoLite2
      Country database.

  o Minor bugfixes (correctness):
    - Avoid undefined behavior when parsing IPv6 entries from the geoip6
      file. Fixes bug 22490; bugfix on 0.2.4.6-alpha.

Changes in version 0.2.5.14 - 2017-06-08
  Tor 0.2.5.14 backports a fix for a bug that would allow an attacker to
  remotely crash a hidden service with an assertion failure. Anyone
  running a hidden service should upgrade to this version, or to some
  other version with fixes for TROVE-2017-005.  (Versions before 0.3.0
  are not affected by TROVE-2017-004.)

  o Major bugfixes (hidden service, relay, security):
    - Fix a remotely triggerable assertion failure caused by receiving a
      BEGIN_DIR cell on a hidden service rendezvous circuit. Fixes bug
      22494, tracked as TROVE-2017-005 and CVE-2017-0376; bugfix
      on 0.2.2.1-alpha.

  o Minor features (geoip):
    - Update geoip and geoip6 to the May 2 2017 Maxmind GeoLite2
      Country database.

  o Minor bugfixes (correctness):
    - Avoid undefined behavior when parsing IPv6 entries from the geoip6
      file. Fixes bug 22490; bugfix on 0.2.4.6-alpha.

Changes in version 0.2.4.29 - 2017-06-08
  Tor 0.2.4.29 backports a fix for a bug that would allow an attacker to
  remotely crash a hidden service with an assertion failure. Anyone
  running a hidden service should upgrade to this version, or to some
  other version with fixes for TROVE-2017-005.  (Versions before 0.3.0
  are not affected by TROVE-2017-004.)

  o Major bugfixes (hidden service, relay, security):
    - Fix a remotely triggerable assertion failure caused by receiving a
      BEGIN_DIR cell on a hidden service rendezvous circuit. Fixes bug
      22494, tracked as TROVE-2017-005 and CVE-2017-0376; bugfix
      on 0.2.2.1-alpha.

  o Minor features (geoip):
    - Update geoip and geoip6 to the May 2 2017 Maxmind GeoLite2
      Country database.

  o Minor bugfixes (correctness):
    - Avoid undefined behavior when parsing IPv6 entries from the geoip6
      file. Fixes bug 22490; bugfix on 0.2.4.6-alpha.

```

---

* Previous message: [[tor-announce] Tor Browser 7.0 is released](000130.html)
* Next message: [[tor-announce] Tor Browser 7.0.1 is released](000132.html)
* **Messages sorted by:**
  [[ date ]](date.html#131)
  [[ thread ]](thread.html#131)
  [[ subject ]](subject.html#131)
  [[ author ]](author.html#131)

---

[More information about the tor-announce
mailing list](https://lists.torproject.org/cgi-bin/mailman/listinfo/tor-announce)


