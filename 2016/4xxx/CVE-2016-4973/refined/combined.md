=== Content from bugzilla.redhat.com_f0cf83bb_20250126_105345.html ===


* Login
  + Log in using an SSO provider:- [Fedora Account System](saml2_login.cgi?idp=Fedora%20Account%20System&target=show_bug.cgi%3Fid%3DCVE-2016-4973)
    - [Red Hat Associate](saml2_login.cgi?idp=Red%20Hat%20Associate&target=show_bug.cgi%3Fid%3DCVE-2016-4973)
    - [Red Hat Customer](saml2_login.cgi?idp=Red%20Hat%20Customer&target=show_bug.cgi%3Fid%3DCVE-2016-4973)+ Login using a Red Hat Bugzilla account
  + Forgot Password
  + [Create an Account](createaccount.cgi)

Red Hat Bugzilla – Bug 1324759

* [Home](./)
* [New](enter_bug.cgi)
* Search
  + [Simple Search](query.cgi?format=specific)
  + [Advanced Search](query.cgi?format=advanced)
* My Links
  + [Browse](describecomponents.cgi)
  + [Requests](request.cgi)
  + Reports
  + Current State
    - [Search](query.cgi)
    - [Tabular reports](query.cgi?format=report-table)
    - [Graphical reports](query.cgi?format=report-graph)
    - [Duplicates](duplicates.cgi)
  + Other Reports
    - [User Changes](https://bugzilla.redhat.com/page.cgi?id=user_activity.html)
  + Plotly Reports
    - [Bug Status](https://bugzilla.redhat.com/page.cgi?id=bug_status.html)
    - [Bug Severity](https://bugzilla.redhat.com/page.cgi?id=bug_severity.html)
    - [Non-Defaults](https://bugzilla.redhat.com/page.cgi?id=non_defaults.html)
* [Product Dashboard](page.cgi?id=productdashboard.html)

- Help
  * [Page Help!](docs/en/html/using/understanding.html)
  * [Bug Writing Guidelines](page.cgi?id=bug-writing.html)
  * [What's new](page.cgi?id=whats-new.html)
  * [Browser Support Policy](https://access.redhat.com/help/browsers)
  * [5.0.4.rh103 Release notes](page.cgi?id=release-notes.html)
  * [FAQ](page.cgi?id=faq.html)
  * [Guides index](docs/en/html/index.html)
  * [User guide](docs/en/html/using/index.html)
  * [Web Services](docs/en/html/integrating/api/Bugzilla/WebService/Bug.html)
  * [Contact](page.cgi?id=redhat/contact.html)
  * [Legal](page.cgi?id=terms-conditions.html)
- [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")

This site requires JavaScript to be enabled to function correctly, please enable it.

[**Bug 1324759**](show_bug.cgi?id=1324759)
(CVE-2016-4973)
- [CVE-2016-4973](https://access.redhat.com/security/cve/CVE-2016-4973) gcc: Targets using libssp for SSP are missing -D\_FORTIFY\_SOURCE functionality

[Summary:](page.cgi?id=fields.html#short_desc "The bug summary is a short sentence which succinctly describes what the bug is about.")
CVE-2016-4973 gcc: Targets using libssp for SSP are missing -D\_FORTIFY\_SOURCE...

| | [Keywords](describekeywords.cgi): | Security | | --- | --- | | [Status](page.cgi?id=fields.html#bug_status): | CLOSED WONTFIX | | [Alias:](page.cgi?id=fields.html#alias "A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla.") | CVE-2016-4973 | | [Product:](describecomponents.cgi "Bugs are categorised into Products and Components. Select a Classification to narrow down this list.") | Security Response | | [Classification:](page.cgi?id=fields.html#classification "Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation.") | Other | | [Component:](describecomponents.cgi?product=Security Response "Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list.") | vulnerability | | [Sub Component:](page.cgi?id=fields.html#rh_sub_components "The sub component of a specific component") | --- | | [Version:](page.cgi?id=fields.html#version "The version field defines the version of the software the bug was found in.") | unspecified | | [Hardware:](page.cgi?id=fields.html#rep_platform "The hardware platform the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | All | | [OS:](page.cgi?id=fields.html#op_sys "The operating system the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | Linux | | [Priority:](page.cgi?id=fields.html#priority) | medium | | [Severity:](page.cgi?id=fields.html#bug_severity) | medium | | [Target Milestone:](page.cgi?id=fields.html#target_milestone "The Target Milestone field is used to define when the engineer the bug is assigned to expects to fix it.") | --- | | [Assignee:](page.cgi?id=fields.html#assigned_to "The person in charge of resolving the bug.") | Red Hat Product Security | | [QA Contact:](page.cgi?id=fields.html#qa_contact "The person responsible for confirming this bug if it is unconfirmed, and for verifying the fix once the bug has been resolved.") |  | | [Docs Contact:](page.cgi?id=fields.html#docs_contact "The person responsible for documenting once the bug has been resolved.") |  | | [URL:](page.cgi?id=fields.html#bug_file_loc "Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen.") |  | | [Whiteboard:](page.cgi?id=fields.html#status_whiteboard "Each bug has a free-form single line text entry box for adding tags and status information.") |  | | [Depends On:](page.cgi?id=fields.html#dependson "The bugs listed here must be resolved before this bug can be resolved.") |  | | [Blocks:](page.cgi?id=fields.html#blocked "This bug must be resolved before the bugs listed in this field can be resolved.") | [1324762](show_bug.cgi?id=1324762) | | TreeView+ | [depends on](buglist.cgi?bug_id=1324759&bug_id_type=anddependson&format=tvp) / [blocked](buglist.cgi?bug_id=1324759&bug_id_type=andblocked&format=tvp&tvp_dir=blocked) |  | |  | | [Reported:](page.cgi?id=fields.html#reporter) | 2016-04-07 08:33 UTC by Adam Mariš | | --- | --- | | [Modified:](page.cgi?id=fields.html#modified) | 2021-02-17 04:06 UTC ([History](show_activity.cgi?id=1324759)) | | [CC List:](page.cgi?id=fields.html#cclist) | 30 users (show)  bmcclain cbuissar cfergeau davejohansen dblechte eedri erik-fedora fweimer jakub jwakely kanderso klember ktietz law lsurette mgoldboi michal.skrivanek mpolacek nobody+bgollahe ohudlick rbalakri rh-spice-bugs rjones rzima security-response-team sherold srevivo ykaul ylavi yselkowi | | Fixed In Version: |  | | | Doc Type: | Bug Fix | | | Doc Text: | It was found that targets using gcc's libssp library for Stack Smashing Protection (among others: Cygwin, MinGW, newlib, RTEMS; but not Glibc, Bionic, NetBSD which provide SSP in libc), are missing the Object Size Checking feature, even when explicitly requested with \_FORTIFY\_SOURCE. Vulnerable binaries compiled against such targets do not benefit of such protection, increasing the chances of success of a buffer overflow attack. | | | Clone Of: |  | | | Environment: |  | | | Last Closed: | 2017-08-07 08:47:40 UTC | | | Embargoed: |  | | |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| --- | | |

| | Attachments | [(Terms of Use)](page.cgi?id=terms-conditions.html) | | | --- | --- | --- | | [**Patch for gcc-5.3.0**](attachment.cgi?id=1144750 "View the content of the attachment") (5.79 KB, patch)  [2016-04-07 13:50 UTC](#attach_1144750 "Go to the comment associated with the attachment"), Yaakov Selkowitz | *no flags* | [Details](attachment.cgi?id=1144750&action=edit) | [Diff](attachment.cgi?id=1144750&action=diff) | | [**Patch for gcc svn trunk**](attachment.cgi?id=1144751 "View the content of the attachment") (5.28 KB, patch)  [2016-04-07 13:50 UTC](#attach_1144751 "Go to the comment associated with the attachment"), Yaakov Selkowitz | *no flags* | [Details](attachment.cgi?id=1144751&action=edit) | [Diff](attachment.cgi?id=1144751&action=diff) | | [**Link with -lssp when -D\_FORTIFY\_SOURCE=\* is in use (needs testing)**](attachment.cgi?id=1145808 "View the content of the attachment") (377 bytes, patch)  [2016-04-10 23:45 UTC](#attach_1145808 "Go to the comment associated with the attachment"), Yaakov Selkowitz | *no flags* | [Details](attachment.cgi?id=1145808&action=edit) | [Diff](attachment.cgi?id=1145808&action=diff) | | [**Cumulative patch for gcc svn trunk**](attachment.cgi?id=1165477 "View the content of the attachment") (9.70 KB, patch)  [2016-06-07 02:51 UTC](#attach_1165477 "Go to the comment associated with the attachment"), Yaakov Selkowitz | *no flags* | [Details](attachment.cgi?id=1165477&action=edit) | [Diff](attachment.cgi?id=1165477&action=diff) | | [Show Obsolete](#a0) (3) [View All](attachment.cgi?bugid=1324759&action=viewall&hide_obsolete=1) | | |    Links | System | ID | Private | Priority | Status | Summary | Last Updated | | GNU Compiler Collection | [77409](https://gcc.gnu.org/bugzilla/show_bug.cgi?id=77409) | 0 | None | None | None | 2016-08-29 22:05:54 UTC | |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |

| [Description](show_bug.cgi?id=1324759#c0)  Adam Mariš    2016-04-07 08:33:52 UTC  ``` It was reported that targets that use libssp for SSP (e.g. newlib, Cygwin, RTEMS, MinGW, but not e.g. Glibc, Bionic, NetBSD which provide SSP in libc) are mistakenly missing out on -D_FORTIFY_SOURCE functionality even when explicitly specified. The problem is in gcc libssp/Makefile.am:  libsubincludedir = $(libdir)/gcc/$(target_noncanonical)/$(gcc_version)/include nobase_libsubinclude_HEADERS = ssp/ssp.h ssp/string.h ssp/stdio.h ssp/unistd.h  Headers are structured so that they should be in $(libsubincludedir), instead of $(libsubincludedir)/ssp where they are currently placed.  Demonstration:  $ cat fortify_test.c /* example from <https://gcc.gnu.org/bugzilla/show_bug.cgi?id=50460> [Open URL] */ #include <stdio.h> #include <string.h>  const char *str1 = "JIHGFEDCBA";  int main () { struct A { char buf1[9]; char buf2[1]; } a; strcpy (a.buf1 + (0 + 4), str1 + 5); printf("%s %s\n", a.buf1, a.buf2); return 0; }  $ gcc -D_FORTIFY_SOURCE=2 -fstack-protector-strong -o fortify_test -O2 fortify_test.c $ nm -C fortify_test | grep strcpy U __strcpy_chk@@GLIBC_2.3.4  $ i686-w64-mingw32-gcc -D_FORTIFY_SOURCE=2 -fstack-protector-strong -o fortify_test.exe -O2 fortify_test.c $ i686-w64-mingw32-nm -C fortify_test.exe | grep strcpy 004061e8 I _imp__strcpy 00402624 T strcpy  If headers are moved, we can see:  $ i686-w64-mingw32-gcc -D_FORTIFY_SOURCE=2 -fstack-protector-strong -o fortify_test.exe -O2 fortify_test.c $ i686-w64-mingw32-nm -C fortify_test.exe | grep strcpy 00406200 I _imp____strcpy_chk 00401590 T __strcpy_chk   ```  [Comment 1](show_bug.cgi?id=1324759#c1)  Adam Mariš    2016-04-07 08:33:57 UTC  ``` Acknowledgments:  Name: Yaakov Selkowitz (Red Hat)   ```  [Comment 2](show_bug.cgi?id=1324759#c2)  Yaakov Selkowitz    2016-04-07 13:50:05 UTC  ``` Created [attachment 1144750](attachment.cgi?id=1144750&action=diff "Patch for gcc-5.3.0") [[details]](attachment.cgi?id=1144750&action=edit "Patch for gcc-5.3.0") Patch for gcc-5.3.0   ```  [Comment 3](show_bug.cgi?id=1324759#c3)  Yaakov Selkowitz    2016-04-07 13:50:54 UTC  ``` Created [attachment 1144751](attachment.cgi?id=1144751&action=diff "Patch for gcc svn trunk") [[details]](attachment.cgi?id=1144751&action=edit "Patch for gcc svn trunk") Patch for gcc svn trunk   ```  [Comment 4](show_bug.cgi?id=1324759#c4)  Yaakov Selkowitz    2016-04-10 23:45:01 UTC  ``` Created [attachment 1145808](attachment.cgi?id=1145808&action=diff "Link with -lssp when -D_FORTIFY_SOURCE=* is in use (needs testing)") [[details]](attachment.cgi?id=1145808&action=edit "Link with -lssp when -D_FORTIFY_SOURCE=* is in use (needs testing)") Link with -lssp when -D_FORTIFY_SOURCE=* is in use (needs testing)  Note that a side-effect of having this feature actually work as intended is that the __*_chk symbols are required from libssp.  While gcc automatically adds -lssp if the -fstack-protector* flags are in use, it does not if only -D_FORTIFY_SOURCE=* is specified, resulting in undefined references at link time.  The attached patch, while not technically perfect -- there are several conditions without which -D_FORTIFY_SOURCE=* will have no effect, meaning this may "overlink" -- does appears to rectify that so far in limited testing.   ```  [Comment 5](show_bug.cgi?id=1324759#c5)  Yaakov Selkowitz    2016-04-11 01:45:35 UTC  ``` (In reply to Yaakov Selkowitz from [comment #4](show_bug.cgi?id=1324759#c4)) > Created [attachment 1145808](attachment.cgi?id=1145808&action=diff "Link with -lssp when -D_FORTIFY_SOURCE=* is in use (needs testing)") [[details]](attachment.cgi?id=1145808&action=edit "Link with -lssp when -D_FORTIFY_SOURCE=* is in use (needs testing)") > Link with -lssp when -D_FORTIFY_SOURCE=* is in use (needs testing) >  > The attached patch, while not technically perfect -- there are several > conditions without which -D_FORTIFY_SOURCE=* will have no effect, meaning > this may "overlink" -- does appears to rectify that so far in limited > testing.  Unfortunately this doesn't cover the alternate form -Wp,-D_FORTIFY_SOURCE=*, so this will need further work.   ```  [Comment 6](show_bug.cgi?id=1324759#c6)  Jakub Jelinek    2016-04-11 07:06:18 UTC  ``` The original plan is that users on non-glibc systems would just add the -isystem /usr/include/ssp/ -lssp themselves in addition to -D_FORTIFY_SOURCE=*, or -D_FORTIFY_SOURCE, or -D _FORTIFY_SOURCE=*, or -D _FORTIFY_SOURCE, or -Wp,-D -Wp,-_FORTIFY_SOURCE=*, or -Wp,-D_FORTIFY_SOURCE=*, or -Wp,-D,_FORTIFY_SOURCE, etc. (as you can see there are many different spellings).  So IMNSHO the change to install the headers elsewhere is just wrong, you should keep them as they were installed before, and if you can tweak the spec files for the targets that don't have _FORTIFY_SOURCE in their libc (it is not just glibc, I think e.g. Darwin and various others copied that), then do both the includes and link stuff in there, either through trying to match the most common forms of this option, or some spec helper function that covers all of them somehow.   ```  [Comment 7](show_bug.cgi?id=1324759#c7)  Yaakov Selkowitz    2016-04-11 19:49:18 UTC  ``` (In reply to Jakub Jelinek from [comment #6](show_bug.cgi?id=1324759#c6)) > The original plan is that users on non-glibc systems would just add the > -isystem /usr/include/ssp/ -lssp themselves   This is not only extremely non-intuitive but also unprecedented:  * This is different from every other gcc feature which handles these details -- at least on the header side, if not also wrt linking -- automatically.  * The headers are not installed under /usr/include/ssp but under e.g. /usr/lib/gcc/$target/$version/include, IOW they are clearly an implementation detail of the compiler but there is also no consistent way to specify their location.  * Requiring a spec to handle the includedir where the header and preprocessor can handle this themselves doesn't make much sense.  The only situation where I could think that such a setup would be warranted is if you wanted to provide libssp as an alternative implementation even on systems that have their own support.  But besides being redundant, I'm not sure that the ssp headers' __*_chk declarations would not conflict with those in libc's headers.  Therefore, I was left with no other logical option but to conclude that this was simply a mistake.  Regardless, as the feature does not work OOTB as intended, it should be fixed so that it is actually used with -D_FORTIFY_SOURCE.  > in addition to -D_FORTIFY_SOURCE=*, or > -D_FORTIFY_SOURCE, or -D _FORTIFY_SOURCE=*, or -D _FORTIFY_SOURCE, or -Wp,-D > -Wp,-_FORTIFY_SOURCE=*, or -Wp,-D_FORTIFY_SOURCE=*, or > -Wp,-D,_FORTIFY_SOURCE, etc. (as you can see there are many different > spellings).   Indeed, but I believe the space following -D did not affect the attempt in my spec patch, it's the -Wp, forms that aren't covered thereby.  > So IMNSHO the change to install the headers elsewhere is just > wrong, you should keep them as they were installed before, and if you can > tweak the spec files for the targets that don't have _FORTIFY_SOURCE in > their libc (it is not just glibc, I think e.g. Darwin and various others > copied that), then do both the includes and link stuff in there, either > through trying to match the most common forms of this option, or some spec > helper function that covers all of them somehow.  I don't know about Darwin, but otherwise AFAICS glibc, Bionic, and NetBSD are the only libc's with built-in support.  FreeBSD, DragonFlyBSD, and Musl have only SSP (__stack_chk_*) but not builtin object size checking (__*_chk), and uClibc has only such for bzero/memcpy/mempcpy.  As I said above, there is simply no need for the headers to be in a non-default directory, nor is there a reliable (or official) way to include their current location.  Therefore I still think the headers should be moved, and linking handled with a .spec file as you indicate.   ```  [Comment 8](show_bug.cgi?id=1324759#c8)  Jakub Jelinek    2016-04-11 20:03:10 UTC  ``` I don't care that much about the location of headers, as long as you make sure you DON"T install it when it should not be in a way (i.e. when the system libc supports fortify source natively). And, because adding extra headers for standard headers in presence of #include_next and/or users using say -isystem /usr/include and similar (many users do that, don't ask me why), I'd just say that it would be better if the SSP headers even on systems where libc does not have fortify source support in it weren't by default in the way and only were added when using -D_FORTIFY_SOURCE*.  As for the reason why libssp fortify support has been added to gcc, it was just that we didn't want to submit a glibc only feature at that point to gcc, and allowed to handle something (a small subset, compared to what glibc ships) even on systems with other libcs.  That newlib and other libcs didn't add it natively after all those years is IMHO just a mistake of those libraries.   ```  [Comment 9](show_bug.cgi?id=1324759#c9)  Jakub Jelinek    2016-04-11 20:12:48 UTC  ``` Right now the ssp headers are installed into `gcc -print-file-name=include/ssp` directory on all systems, including the glibc ones, and anyone is free to use it if they for whatever strange reason want that.  But, generally you really don't want to override the glibc stdio.h, string.h and unistd.h, not to mention that unistd.h will be installed even on systems which perhaps have no unistd.h header themselves and then this could just break some configure detection there.   ```  [Comment 10](show_bug.cgi?id=1324759#c10)  Yaakov Selkowitz    2016-04-12 02:55:48 UTC  ``` (In reply to Jakub Jelinek from [comment #8](show_bug.cgi?id=1324759#c8)) > I don't care that much about the location of headers, as long as you make > sure you DON"T install it when it should not be in a way (i.e. when the > system libc supports fortify source natively).  See below.  > And, because adding extra headers for standard headers in presence of > #include_next and/or users using say -isystem /usr/include and similar (many > users do that, don't ask me why), I'd just say that it would be better if > the SSP headers even on systems where libc does not have fortify source > support in it weren't by default in the way and only were added when using > -D_FORTIFY_SOURCE*.  FWIW several other GCC headers use #include_next too, so those too would be missed in such a case.  -I/usr/include is already ignored, can the same be done for -isystem /usr/include (at least w/o -notsdinc)?  > As for the reason why libssp fortify support has been added to gcc, it was > just that we didn't want to submit a glibc only feature at that point to > gcc, and allowed to handle something (a small subset, compared to what glibc > ships) even on systems with other libcs.  That newlib and other libcs didn't > add it natively after all those years is IMHO just a mistake of those > libraries.  After this is disclosed we may very well have a discussion about enabling it in newlib (and hence Cygwin and RTEMS).  I obviously can't speak for the remaining BSDs nor musl.  However, there is also the matter of supporting object size checking on proprietary platforms where users have no control over their libc -- both the commercial *NIXes as well as MinGW.  At least the latter is completely reliant on libssp for this functionality.  (In reply to Jakub Jelinek from [comment #9](show_bug.cgi?id=1324759#c9)) > Right now the ssp headers are installed into `gcc -print-file-name=include/ssp` > directory on all systems, including the glibc ones, and anyone is free to > use it if they for whatever strange reason want that.   Only if libssp is enabled from the toplevel; AFAICS at least RHEL and Fedora gcc packages don't.    > But, generally you really don't want to override the glibc stdio.h, string.h  > and unistd.h  Agreed, and as I suspected, that won't even work:  $ gcc -O2 -D_FORTIFY_SOURCE=2 fortify_test.c -I /path/to/include/ssp In file included from fortify_test.c:2:0: /path/to/include/ssp/stdio.h:80:1: error: redefinition of ‘gets’  gets (char *__str)  ^ In file included from /usr/include/stdio.h:934:0,                  from /path/to/include/ssp/stdio.h:39,                  from fortify_test.c:2: /usr/include/bits/stdio2.h:226:1: note: previous definition of ‘gets’ was here  gets (char *__str)  ^ In file included from fortify_test.c:2:0: /path/to/include/ssp/stdio.h:92:1: error: redefinition of ‘fgets’  fgets (char *__restrict__ __s, int __n, FILE *__restrict__ __stream)  ^ In file included from /usr/include/stdio.h:934:0,                  from /path/to/include/ssp/stdio.h:39,                  from fortify_test.c:2: /usr/include/bits/stdio2.h:245:1: note: previous definition of ‘fgets’ was here  fgets (char *__restrict __s, int __n, FILE *__restrict __stream)  Should target-libssp just be added to noconfigdirs on SSP-and-object-size-checking-in-libc systems?  > not to mention that unistd.h will be installed even on systems which perhaps > have no unistd.h header themselves and then this could just break some > configure detection there.  Wouldn't the #include_next therein fail in that case, with the same result as if it weren't there at all?   ```  [Comment 11](show_bug.cgi?id=1324759#c11)  Jakub Jelinek    2016-04-12 06:47:49 UTC  ``` (In reply to Yaakov Selkowitz from [comment #10](show_bug.cgi?id=1324759#c10)) > FWIW several other GCC headers use #include_next too, so those too would be > missed in such a case.  -I/usr/include is already ignored, can the same be > done for -isystem /usr/include (at least w/o -notsdinc)?  See e.g. <http://gcc.gnu.org/PR69383> for an example of issues caused by include_next changes.  I don't think -I/usr/include is ignored, it shouldn't be, nor should -isystem behavior change.  > Only if libssp is enabled from the toplevel; AFAICS at least RHEL and Fedora > gcc packages don't.    No, in RHEL/Fedora packages it is actually installed and then the gcc.spec file removes them.  But, if you tweak this upstream, then you break all the users that are installing gcc themselves.  > Should target-libssp just be added to noconfigdirs on > SSP-and-object-size-checking-in-libc systems?  Note, GCC 6 is going to be released really soon, you certainly don't want to make too big incompatible changes there now.   ```  [Comment 12](show_bug.cgi?id=1324759#c12)  Yaakov Selkowitz    2016-05-20 07:13:53 UTC  ``` (In reply to Jakub Jelinek from [comment #11](show_bug.cgi?id=1324759#c11)) > Note, GCC 6 is going to be released really soon, you certainly don't want to > make too big incompatible changes there now.  GCC 6 is out and trunk is on stage 1 again, so I'd like to find a way of moving this along.    The problem linking with only -D_FORTIFY_SOURCE* (where -fstack-protector* is not used) is the -Wp, form, and this combination does happen in the real world (e.g. vim).  By definition that would seem to bypass the specs, leaving no way to make a conditional link with -lssp.  Even if there is a way, there's also the distinct possibility that the flag will not be passed during linking (it is a preprocessor flag, after all).  Therefore, it seems we would have to:  1) in toplevel configure, disable target-libssp for targets with SSP-in-libc.  This should be done regardless, as the libssp headers cannot be used.  But how?  Adding the gcc_cv_libc_provides_ssp test in gcc/configure.ac to toplevel (presumably as a config/*.m4 macro called by both) would result in a huge diff due to the test calling GCC_GLIBC_VERSION_GTE_IFELSE and target_header_dir.  The conditional tests therein are pretty old, can/should we just handle those targets unconditionally?  2) Add __gnu_inline__ to the extern inline SSP functions for C99 compatibility, and fix the declared return type of readline to ssize_t.  3) Move the SSP headers as originally proposed.  4) In gcc/gcc.c, change LINK_SSP_SPEC to unconditionally link with -lssp* when !TARGET_LIBC_PROVIDES_SSP, using LD{,_NO}_AS_NEEDED_OPTION where available.  I have preliminary patches for all of these.   ```  [Comment 13](show_bug.cgi?id=1324759#c13)  Cedric Buissart    2016-05-26 12:59:25 UTC  ``` My understanding from [comment 9](show_bug.cgi?id=1324759#c9), 10 and 11 is that RHEL is not affected because we explicitly remove the SSP library out of gcc as shipped :  ----8<---- rm -f %{buildroot}%{_prefix}/%{_lib}/libssp* ---->8----  Therefore there is no way a user could accidentally or willingly use the SSP library instead of glibc's ssp.  I checked from dist-git in the following gcc branches :  rhel-7.3 rhel-6.9 rhel-5.11 devtoolset-4.1-rhel-7 devtoolset-4.1-rhel-6  And following packages : compat-gcc-44 (rhel-6.9 & rhel-7.3) gcc44  Featured appeared with 4.1, it seems. thus pre-4.1 aren't affected either.   ```  [Comment 15](show_bug.cgi?id=1324759#c15)  Yaakov Selkowitz    2016-05-27 19:30:17 UTC  ``` (In reply to Cedric Buissart from [comment #13](show_bug.cgi?id=1324759#c13)) > My understanding from [comment 9](show_bug.cgi?id=1324759#c9), 10 and 11 is that RHEL is not affected > because we explicitly remove the SSP library out of gcc as shipped :  RHEL is not affected because the __*_chk functions are in libc itself and therefore always linked by default.   ```  [Comment 17](show_bug.cgi?id=1324759#c17)  Yaakov Selkowitz    2016-05-27 19:35:02 UTC  ``` (In reply to Yaakov Selkowitz from [comment #15](show_bug.cgi?id=1324759#c15)) > (In reply to Cedric Buissart from [comment #13](show_bug.cgi?id=1324759#c13)) > > My understanding from [comment 9](show_bug.cgi?id=1324759#c9), 10 and 11 is that RHEL is not affected > > because we explicitly remove the SSP library out of gcc as shipped : >  > RHEL is not affected because the __*_chk functions are in libc itself and > therefore always linked by default.  Oh, and RHEL doesn't ship mingw*-gcc etc.   ```  [Comment 18](show_bug.cgi?id=1324759#c18)  Yaakov Selkowitz    2016-06-07 02:51:04 UTC  ``` Created [attachment 1165477](attachment.cgi?id=1165477&action=diff "Cumulative patch for gcc svn trunk") [[details]](attachment.cgi?id=1165477&action=edit "Cumulative patch for gcc svn trunk") Cumulative patch for gcc svn trunk  Here's what I have at the moment against svn trunk.   ```  [Comment 26](show_bug.cgi?id=1324759#c26)  Yaakov Selkowitz    2017-11-30 01:25:15 UTC  ``` For the record, SSP has been added to newlib git master as of today.  Consequently, the future Newlib 2.6.0 and Cygwin 2.10.0 releases (dates TBD), in conjunction with a gcc (re)built with --disable-libssp (and gcc_cv_libc_provides_ssp=yes in GCC 7 and earlier), will no longer have this issue.   ```  [Comment 27](show_bug.cgi?id=1324759#c27)  Yaakov Selkowitz    2018-01-19 02:41:32 UTC  ``` Newlib 3.0.0 was released today including the builtin SSP implementation.   ```  [Comment 28](show_bug.cgi?id=1324759#c28)  Yaakov Selkowitz    2018-02-02 22:13:04 UTC  ``` Cygwin 2.10.0 was released today, along with an update for the Cygwin distribution gcc (6.4.0-5) which uses the new builtin implementation.   ``` |  |
| --- | --- |

---

| Note You need to [log in](show_bug.cgi?id=1324759&GoAheadAndLogIn=1) before you can comment on or make changes to this bug. |
| --- |

---

[Privacy](page.cgi?id=redhat/privacy.html)
[Contact](page.cgi?id=redhat/contact.html)
[FAQ](page.cgi?id=faq.html)
[Legal](page.cgi?id=terms-conditions.html)



=== Content from bugzilla.redhat.com_1ae04aba_20250125_180335.html ===


* Login
  + Log in using an SSO provider:- [Fedora Account System](saml2_login.cgi?idp=Fedora%20Account%20System&target=show_bug.cgi%3Fid%3D1324759)
    - [Red Hat Associate](saml2_login.cgi?idp=Red%20Hat%20Associate&target=show_bug.cgi%3Fid%3D1324759)
    - [Red Hat Customer](saml2_login.cgi?idp=Red%20Hat%20Customer&target=show_bug.cgi%3Fid%3D1324759)+ Login using a Red Hat Bugzilla account
  + Forgot Password
  + [Create an Account](createaccount.cgi)

Red Hat Bugzilla – Bug 1324759

* [Home](./)
* [New](enter_bug.cgi)
* Search
  + [Simple Search](query.cgi?format=specific)
  + [Advanced Search](query.cgi?format=advanced)
* My Links
  + [Browse](describecomponents.cgi)
  + [Requests](request.cgi)
  + Reports
  + Current State
    - [Search](query.cgi)
    - [Tabular reports](query.cgi?format=report-table)
    - [Graphical reports](query.cgi?format=report-graph)
    - [Duplicates](duplicates.cgi)
  + Other Reports
    - [User Changes](https://bugzilla.redhat.com/page.cgi?id=user_activity.html)
  + Plotly Reports
    - [Bug Status](https://bugzilla.redhat.com/page.cgi?id=bug_status.html)
    - [Bug Severity](https://bugzilla.redhat.com/page.cgi?id=bug_severity.html)
    - [Non-Defaults](https://bugzilla.redhat.com/page.cgi?id=non_defaults.html)
* [Product Dashboard](page.cgi?id=productdashboard.html)

- Help
  * [Page Help!](docs/en/html/using/understanding.html)
  * [Bug Writing Guidelines](page.cgi?id=bug-writing.html)
  * [What's new](page.cgi?id=whats-new.html)
  * [Browser Support Policy](https://access.redhat.com/help/browsers)
  * [5.0.4.rh103 Release notes](page.cgi?id=release-notes.html)
  * [FAQ](page.cgi?id=faq.html)
  * [Guides index](docs/en/html/index.html)
  * [User guide](docs/en/html/using/index.html)
  * [Web Services](docs/en/html/integrating/api/Bugzilla/WebService/Bug.html)
  * [Contact](page.cgi?id=redhat/contact.html)
  * [Legal](page.cgi?id=terms-conditions.html)
- [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")

This site requires JavaScript to be enabled to function correctly, please enable it.

[**Bug 1324759**](show_bug.cgi?id=1324759)
(CVE-2016-4973)
- [CVE-2016-4973](https://access.redhat.com/security/cve/CVE-2016-4973) gcc: Targets using libssp for SSP are missing -D\_FORTIFY\_SOURCE functionality

[Summary:](page.cgi?id=fields.html#short_desc "The bug summary is a short sentence which succinctly describes what the bug is about.")
CVE-2016-4973 gcc: Targets using libssp for SSP are missing -D\_FORTIFY\_SOURCE...

| | [Keywords](describekeywords.cgi): | Security | | --- | --- | | [Status](page.cgi?id=fields.html#bug_status): | CLOSED WONTFIX | | [Alias:](page.cgi?id=fields.html#alias "A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla.") | CVE-2016-4973 | | [Product:](describecomponents.cgi "Bugs are categorised into Products and Components. Select a Classification to narrow down this list.") | Security Response | | [Classification:](page.cgi?id=fields.html#classification "Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation.") | Other | | [Component:](describecomponents.cgi?product=Security Response "Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list.") | vulnerability | | [Sub Component:](page.cgi?id=fields.html#rh_sub_components "The sub component of a specific component") | --- | | [Version:](page.cgi?id=fields.html#version "The version field defines the version of the software the bug was found in.") | unspecified | | [Hardware:](page.cgi?id=fields.html#rep_platform "The hardware platform the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | All | | [OS:](page.cgi?id=fields.html#op_sys "The operating system the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | Linux | | [Priority:](page.cgi?id=fields.html#priority) | medium | | [Severity:](page.cgi?id=fields.html#bug_severity) | medium | | [Target Milestone:](page.cgi?id=fields.html#target_milestone "The Target Milestone field is used to define when the engineer the bug is assigned to expects to fix it.") | --- | | [Assignee:](page.cgi?id=fields.html#assigned_to "The person in charge of resolving the bug.") | Red Hat Product Security | | [QA Contact:](page.cgi?id=fields.html#qa_contact "The person responsible for confirming this bug if it is unconfirmed, and for verifying the fix once the bug has been resolved.") |  | | [Docs Contact:](page.cgi?id=fields.html#docs_contact "The person responsible for documenting once the bug has been resolved.") |  | | [URL:](page.cgi?id=fields.html#bug_file_loc "Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen.") |  | | [Whiteboard:](page.cgi?id=fields.html#status_whiteboard "Each bug has a free-form single line text entry box for adding tags and status information.") |  | | [Depends On:](page.cgi?id=fields.html#dependson "The bugs listed here must be resolved before this bug can be resolved.") |  | | [Blocks:](page.cgi?id=fields.html#blocked "This bug must be resolved before the bugs listed in this field can be resolved.") | [1324762](show_bug.cgi?id=1324762) | | TreeView+ | [depends on](buglist.cgi?bug_id=1324759&bug_id_type=anddependson&format=tvp) / [blocked](buglist.cgi?bug_id=1324759&bug_id_type=andblocked&format=tvp&tvp_dir=blocked) |  | |  | | [Reported:](page.cgi?id=fields.html#reporter) | 2016-04-07 08:33 UTC by Adam Mariš | | --- | --- | | [Modified:](page.cgi?id=fields.html#modified) | 2021-02-17 04:06 UTC ([History](show_activity.cgi?id=1324759)) | | [CC List:](page.cgi?id=fields.html#cclist) | 30 users (show)  bmcclain cbuissar cfergeau davejohansen dblechte eedri erik-fedora fweimer jakub jwakely kanderso klember ktietz law lsurette mgoldboi michal.skrivanek mpolacek nobody+bgollahe ohudlick rbalakri rh-spice-bugs rjones rzima security-response-team sherold srevivo ykaul ylavi yselkowi | | Fixed In Version: |  | | | Doc Type: | Bug Fix | | | Doc Text: | It was found that targets using gcc's libssp library for Stack Smashing Protection (among others: Cygwin, MinGW, newlib, RTEMS; but not Glibc, Bionic, NetBSD which provide SSP in libc), are missing the Object Size Checking feature, even when explicitly requested with \_FORTIFY\_SOURCE. Vulnerable binaries compiled against such targets do not benefit of such protection, increasing the chances of success of a buffer overflow attack. | | | Clone Of: |  | | | Environment: |  | | | Last Closed: | 2017-08-07 08:47:40 UTC | | | Embargoed: |  | | |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| --- | | |

| | Attachments | [(Terms of Use)](page.cgi?id=terms-conditions.html) | | | --- | --- | --- | | [**Patch for gcc-5.3.0**](attachment.cgi?id=1144750 "View the content of the attachment") (5.79 KB, patch)  [2016-04-07 13:50 UTC](#attach_1144750 "Go to the comment associated with the attachment"), Yaakov Selkowitz | *no flags* | [Details](attachment.cgi?id=1144750&action=edit) | [Diff](attachment.cgi?id=1144750&action=diff) | | [**Patch for gcc svn trunk**](attachment.cgi?id=1144751 "View the content of the attachment") (5.28 KB, patch)  [2016-04-07 13:50 UTC](#attach_1144751 "Go to the comment associated with the attachment"), Yaakov Selkowitz | *no flags* | [Details](attachment.cgi?id=1144751&action=edit) | [Diff](attachment.cgi?id=1144751&action=diff) | | [**Link with -lssp when -D\_FORTIFY\_SOURCE=\* is in use (needs testing)**](attachment.cgi?id=1145808 "View the content of the attachment") (377 bytes, patch)  [2016-04-10 23:45 UTC](#attach_1145808 "Go to the comment associated with the attachment"), Yaakov Selkowitz | *no flags* | [Details](attachment.cgi?id=1145808&action=edit) | [Diff](attachment.cgi?id=1145808&action=diff) | | [**Cumulative patch for gcc svn trunk**](attachment.cgi?id=1165477 "View the content of the attachment") (9.70 KB, patch)  [2016-06-07 02:51 UTC](#attach_1165477 "Go to the comment associated with the attachment"), Yaakov Selkowitz | *no flags* | [Details](attachment.cgi?id=1165477&action=edit) | [Diff](attachment.cgi?id=1165477&action=diff) | | [Show Obsolete](#a0) (3) [View All](attachment.cgi?bugid=1324759&action=viewall&hide_obsolete=1) | | |    Links | System | ID | Private | Priority | Status | Summary | Last Updated | | GNU Compiler Collection | [77409](https://gcc.gnu.org/bugzilla/show_bug.cgi?id=77409) | 0 | None | None | None | 2016-08-29 22:05:54 UTC | |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |

| [Description](show_bug.cgi?id=1324759#c0)  Adam Mariš    2016-04-07 08:33:52 UTC  ``` It was reported that targets that use libssp for SSP (e.g. newlib, Cygwin, RTEMS, MinGW, but not e.g. Glibc, Bionic, NetBSD which provide SSP in libc) are mistakenly missing out on -D_FORTIFY_SOURCE functionality even when explicitly specified. The problem is in gcc libssp/Makefile.am:  libsubincludedir = $(libdir)/gcc/$(target_noncanonical)/$(gcc_version)/include nobase_libsubinclude_HEADERS = ssp/ssp.h ssp/string.h ssp/stdio.h ssp/unistd.h  Headers are structured so that they should be in $(libsubincludedir), instead of $(libsubincludedir)/ssp where they are currently placed.  Demonstration:  $ cat fortify_test.c /* example from <https://gcc.gnu.org/bugzilla/show_bug.cgi?id=50460> [Open URL] */ #include <stdio.h> #include <string.h>  const char *str1 = "JIHGFEDCBA";  int main () { struct A { char buf1[9]; char buf2[1]; } a; strcpy (a.buf1 + (0 + 4), str1 + 5); printf("%s %s\n", a.buf1, a.buf2); return 0; }  $ gcc -D_FORTIFY_SOURCE=2 -fstack-protector-strong -o fortify_test -O2 fortify_test.c $ nm -C fortify_test | grep strcpy U __strcpy_chk@@GLIBC_2.3.4  $ i686-w64-mingw32-gcc -D_FORTIFY_SOURCE=2 -fstack-protector-strong -o fortify_test.exe -O2 fortify_test.c $ i686-w64-mingw32-nm -C fortify_test.exe | grep strcpy 004061e8 I _imp__strcpy 00402624 T strcpy  If headers are moved, we can see:  $ i686-w64-mingw32-gcc -D_FORTIFY_SOURCE=2 -fstack-protector-strong -o fortify_test.exe -O2 fortify_test.c $ i686-w64-mingw32-nm -C fortify_test.exe | grep strcpy 00406200 I _imp____strcpy_chk 00401590 T __strcpy_chk   ```  [Comment 1](show_bug.cgi?id=1324759#c1)  Adam Mariš    2016-04-07 08:33:57 UTC  ``` Acknowledgments:  Name: Yaakov Selkowitz (Red Hat)   ```  [Comment 2](show_bug.cgi?id=1324759#c2)  Yaakov Selkowitz    2016-04-07 13:50:05 UTC  ``` Created [attachment 1144750](attachment.cgi?id=1144750&action=diff "Patch for gcc-5.3.0") [[details]](attachment.cgi?id=1144750&action=edit "Patch for gcc-5.3.0") Patch for gcc-5.3.0   ```  [Comment 3](show_bug.cgi?id=1324759#c3)  Yaakov Selkowitz    2016-04-07 13:50:54 UTC  ``` Created [attachment 1144751](attachment.cgi?id=1144751&action=diff "Patch for gcc svn trunk") [[details]](attachment.cgi?id=1144751&action=edit "Patch for gcc svn trunk") Patch for gcc svn trunk   ```  [Comment 4](show_bug.cgi?id=1324759#c4)  Yaakov Selkowitz    2016-04-10 23:45:01 UTC  ``` Created [attachment 1145808](attachment.cgi?id=1145808&action=diff "Link with -lssp when -D_FORTIFY_SOURCE=* is in use (needs testing)") [[details]](attachment.cgi?id=1145808&action=edit "Link with -lssp when -D_FORTIFY_SOURCE=* is in use (needs testing)") Link with -lssp when -D_FORTIFY_SOURCE=* is in use (needs testing)  Note that a side-effect of having this feature actually work as intended is that the __*_chk symbols are required from libssp.  While gcc automatically adds -lssp if the -fstack-protector* flags are in use, it does not if only -D_FORTIFY_SOURCE=* is specified, resulting in undefined references at link time.  The attached patch, while not technically perfect -- there are several conditions without which -D_FORTIFY_SOURCE=* will have no effect, meaning this may "overlink" -- does appears to rectify that so far in limited testing.   ```  [Comment 5](show_bug.cgi?id=1324759#c5)  Yaakov Selkowitz    2016-04-11 01:45:35 UTC  ``` (In reply to Yaakov Selkowitz from [comment #4](show_bug.cgi?id=1324759#c4)) > Created [attachment 1145808](attachment.cgi?id=1145808&action=diff "Link with -lssp when -D_FORTIFY_SOURCE=* is in use (needs testing)") [[details]](attachment.cgi?id=1145808&action=edit "Link with -lssp when -D_FORTIFY_SOURCE=* is in use (needs testing)") > Link with -lssp when -D_FORTIFY_SOURCE=* is in use (needs testing) >  > The attached patch, while not technically perfect -- there are several > conditions without which -D_FORTIFY_SOURCE=* will have no effect, meaning > this may "overlink" -- does appears to rectify that so far in limited > testing.  Unfortunately this doesn't cover the alternate form -Wp,-D_FORTIFY_SOURCE=*, so this will need further work.   ```  [Comment 6](show_bug.cgi?id=1324759#c6)  Jakub Jelinek    2016-04-11 07:06:18 UTC  ``` The original plan is that users on non-glibc systems would just add the -isystem /usr/include/ssp/ -lssp themselves in addition to -D_FORTIFY_SOURCE=*, or -D_FORTIFY_SOURCE, or -D _FORTIFY_SOURCE=*, or -D _FORTIFY_SOURCE, or -Wp,-D -Wp,-_FORTIFY_SOURCE=*, or -Wp,-D_FORTIFY_SOURCE=*, or -Wp,-D,_FORTIFY_SOURCE, etc. (as you can see there are many different spellings).  So IMNSHO the change to install the headers elsewhere is just wrong, you should keep them as they were installed before, and if you can tweak the spec files for the targets that don't have _FORTIFY_SOURCE in their libc (it is not just glibc, I think e.g. Darwin and various others copied that), then do both the includes and link stuff in there, either through trying to match the most common forms of this option, or some spec helper function that covers all of them somehow.   ```  [Comment 7](show_bug.cgi?id=1324759#c7)  Yaakov Selkowitz    2016-04-11 19:49:18 UTC  ``` (In reply to Jakub Jelinek from [comment #6](show_bug.cgi?id=1324759#c6)) > The original plan is that users on non-glibc systems would just add the > -isystem /usr/include/ssp/ -lssp themselves   This is not only extremely non-intuitive but also unprecedented:  * This is different from every other gcc feature which handles these details -- at least on the header side, if not also wrt linking -- automatically.  * The headers are not installed under /usr/include/ssp but under e.g. /usr/lib/gcc/$target/$version/include, IOW they are clearly an implementation detail of the compiler but there is also no consistent way to specify their location.  * Requiring a spec to handle the includedir where the header and preprocessor can handle this themselves doesn't make much sense.  The only situation where I could think that such a setup would be warranted is if you wanted to provide libssp as an alternative implementation even on systems that have their own support.  But besides being redundant, I'm not sure that the ssp headers' __*_chk declarations would not conflict with those in libc's headers.  Therefore, I was left with no other logical option but to conclude that this was simply a mistake.  Regardless, as the feature does not work OOTB as intended, it should be fixed so that it is actually used with -D_FORTIFY_SOURCE.  > in addition to -D_FORTIFY_SOURCE=*, or > -D_FORTIFY_SOURCE, or -D _FORTIFY_SOURCE=*, or -D _FORTIFY_SOURCE, or -Wp,-D > -Wp,-_FORTIFY_SOURCE=*, or -Wp,-D_FORTIFY_SOURCE=*, or > -Wp,-D,_FORTIFY_SOURCE, etc. (as you can see there are many different > spellings).   Indeed, but I believe the space following -D did not affect the attempt in my spec patch, it's the -Wp, forms that aren't covered thereby.  > So IMNSHO the change to install the headers elsewhere is just > wrong, you should keep them as they were installed before, and if you can > tweak the spec files for the targets that don't have _FORTIFY_SOURCE in > their libc (it is not just glibc, I think e.g. Darwin and various others > copied that), then do both the includes and link stuff in there, either > through trying to match the most common forms of this option, or some spec > helper function that covers all of them somehow.  I don't know about Darwin, but otherwise AFAICS glibc, Bionic, and NetBSD are the only libc's with built-in support.  FreeBSD, DragonFlyBSD, and Musl have only SSP (__stack_chk_*) but not builtin object size checking (__*_chk), and uClibc has only such for bzero/memcpy/mempcpy.  As I said above, there is simply no need for the headers to be in a non-default directory, nor is there a reliable (or official) way to include their current location.  Therefore I still think the headers should be moved, and linking handled with a .spec file as you indicate.   ```  [Comment 8](show_bug.cgi?id=1324759#c8)  Jakub Jelinek    2016-04-11 20:03:10 UTC  ``` I don't care that much about the location of headers, as long as you make sure you DON"T install it when it should not be in a way (i.e. when the system libc supports fortify source natively). And, because adding extra headers for standard headers in presence of #include_next and/or users using say -isystem /usr/include and similar (many users do that, don't ask me why), I'd just say that it would be better if the SSP headers even on systems where libc does not have fortify source support in it weren't by default in the way and only were added when using -D_FORTIFY_SOURCE*.  As for the reason why libssp fortify support has been added to gcc, it was just that we didn't want to submit a glibc only feature at that point to gcc, and allowed to handle something (a small subset, compared to what glibc ships) even on systems with other libcs.  That newlib and other libcs didn't add it natively after all those years is IMHO just a mistake of those libraries.   ```  [Comment 9](show_bug.cgi?id=1324759#c9)  Jakub Jelinek    2016-04-11 20:12:48 UTC  ``` Right now the ssp headers are installed into `gcc -print-file-name=include/ssp` directory on all systems, including the glibc ones, and anyone is free to use it if they for whatever strange reason want that.  But, generally you really don't want to override the glibc stdio.h, string.h and unistd.h, not to mention that unistd.h will be installed even on systems which perhaps have no unistd.h header themselves and then this could just break some configure detection there.   ```  [Comment 10](show_bug.cgi?id=1324759#c10)  Yaakov Selkowitz    2016-04-12 02:55:48 UTC  ``` (In reply to Jakub Jelinek from [comment #8](show_bug.cgi?id=1324759#c8)) > I don't care that much about the location of headers, as long as you make > sure you DON"T install it when it should not be in a way (i.e. when the > system libc supports fortify source natively).  See below.  > And, because adding extra headers for standard headers in presence of > #include_next and/or users using say -isystem /usr/include and similar (many > users do that, don't ask me why), I'd just say that it would be better if > the SSP headers even on systems where libc does not have fortify source > support in it weren't by default in the way and only were added when using > -D_FORTIFY_SOURCE*.  FWIW several other GCC headers use #include_next too, so those too would be missed in such a case.  -I/usr/include is already ignored, can the same be done for -isystem /usr/include (at least w/o -notsdinc)?  > As for the reason why libssp fortify support has been added to gcc, it was > just that we didn't want to submit a glibc only feature at that point to > gcc, and allowed to handle something (a small subset, compared to what glibc > ships) even on systems with other libcs.  That newlib and other libcs didn't > add it natively after all those years is IMHO just a mistake of those > libraries.  After this is disclosed we may very well have a discussion about enabling it in newlib (and hence Cygwin and RTEMS).  I obviously can't speak for the remaining BSDs nor musl.  However, there is also the matter of supporting object size checking on proprietary platforms where users have no control over their libc -- both the commercial *NIXes as well as MinGW.  At least the latter is completely reliant on libssp for this functionality.  (In reply to Jakub Jelinek from [comment #9](show_bug.cgi?id=1324759#c9)) > Right now the ssp headers are installed into `gcc -print-file-name=include/ssp` > directory on all systems, including the glibc ones, and anyone is free to > use it if they for whatever strange reason want that.   Only if libssp is enabled from the toplevel; AFAICS at least RHEL and Fedora gcc packages don't.    > But, generally you really don't want to override the glibc stdio.h, string.h  > and unistd.h  Agreed, and as I suspected, that won't even work:  $ gcc -O2 -D_FORTIFY_SOURCE=2 fortify_test.c -I /path/to/include/ssp In file included from fortify_test.c:2:0: /path/to/include/ssp/stdio.h:80:1: error: redefinition of ‘gets’  gets (char *__str)  ^ In file included from /usr/include/stdio.h:934:0,                  from /path/to/include/ssp/stdio.h:39,                  from fortify_test.c:2: /usr/include/bits/stdio2.h:226:1: note: previous definition of ‘gets’ was here  gets (char *__str)  ^ In file included from fortify_test.c:2:0: /path/to/include/ssp/stdio.h:92:1: error: redefinition of ‘fgets’  fgets (char *__restrict__ __s, int __n, FILE *__restrict__ __stream)  ^ In file included from /usr/include/stdio.h:934:0,                  from /path/to/include/ssp/stdio.h:39,                  from fortify_test.c:2: /usr/include/bits/stdio2.h:245:1: note: previous definition of ‘fgets’ was here  fgets (char *__restrict __s, int __n, FILE *__restrict __stream)  Should target-libssp just be added to noconfigdirs on SSP-and-object-size-checking-in-libc systems?  > not to mention that unistd.h will be installed even on systems which perhaps > have no unistd.h header themselves and then this could just break some > configure detection there.  Wouldn't the #include_next therein fail in that case, with the same result as if it weren't there at all?   ```  [Comment 11](show_bug.cgi?id=1324759#c11)  Jakub Jelinek    2016-04-12 06:47:49 UTC  ``` (In reply to Yaakov Selkowitz from [comment #10](show_bug.cgi?id=1324759#c10)) > FWIW several other GCC headers use #include_next too, so those too would be > missed in such a case.  -I/usr/include is already ignored, can the same be > done for -isystem /usr/include (at least w/o -notsdinc)?  See e.g. <http://gcc.gnu.org/PR69383> for an example of issues caused by include_next changes.  I don't think -I/usr/include is ignored, it shouldn't be, nor should -isystem behavior change.  > Only if libssp is enabled from the toplevel; AFAICS at least RHEL and Fedora > gcc packages don't.    No, in RHEL/Fedora packages it is actually installed and then the gcc.spec file removes them.  But, if you tweak this upstream, then you break all the users that are installing gcc themselves.  > Should target-libssp just be added to noconfigdirs on > SSP-and-object-size-checking-in-libc systems?  Note, GCC 6 is going to be released really soon, you certainly don't want to make too big incompatible changes there now.   ```  [Comment 12](show_bug.cgi?id=1324759#c12)  Yaakov Selkowitz    2016-05-20 07:13:53 UTC  ``` (In reply to Jakub Jelinek from [comment #11](show_bug.cgi?id=1324759#c11)) > Note, GCC 6 is going to be released really soon, you certainly don't want to > make too big incompatible changes there now.  GCC 6 is out and trunk is on stage 1 again, so I'd like to find a way of moving this along.    The problem linking with only -D_FORTIFY_SOURCE* (where -fstack-protector* is not used) is the -Wp, form, and this combination does happen in the real world (e.g. vim).  By definition that would seem to bypass the specs, leaving no way to make a conditional link with -lssp.  Even if there is a way, there's also the distinct possibility that the flag will not be passed during linking (it is a preprocessor flag, after all).  Therefore, it seems we would have to:  1) in toplevel configure, disable target-libssp for targets with SSP-in-libc.  This should be done regardless, as the libssp headers cannot be used.  But how?  Adding the gcc_cv_libc_provides_ssp test in gcc/configure.ac to toplevel (presumably as a config/*.m4 macro called by both) would result in a huge diff due to the test calling GCC_GLIBC_VERSION_GTE_IFELSE and target_header_dir.  The conditional tests therein are pretty old, can/should we just handle those targets unconditionally?  2) Add __gnu_inline__ to the extern inline SSP functions for C99 compatibility, and fix the declared return type of readline to ssize_t.  3) Move the SSP headers as originally proposed.  4) In gcc/gcc.c, change LINK_SSP_SPEC to unconditionally link with -lssp* when !TARGET_LIBC_PROVIDES_SSP, using LD{,_NO}_AS_NEEDED_OPTION where available.  I have preliminary patches for all of these.   ```  [Comment 13](show_bug.cgi?id=1324759#c13)  Cedric Buissart    2016-05-26 12:59:25 UTC  ``` My understanding from [comment 9](show_bug.cgi?id=1324759#c9), 10 and 11 is that RHEL is not affected because we explicitly remove the SSP library out of gcc as shipped :  ----8<---- rm -f %{buildroot}%{_prefix}/%{_lib}/libssp* ---->8----  Therefore there is no way a user could accidentally or willingly use the SSP library instead of glibc's ssp.  I checked from dist-git in the following gcc branches :  rhel-7.3 rhel-6.9 rhel-5.11 devtoolset-4.1-rhel-7 devtoolset-4.1-rhel-6  And following packages : compat-gcc-44 (rhel-6.9 & rhel-7.3) gcc44  Featured appeared with 4.1, it seems. thus pre-4.1 aren't affected either.   ```  [Comment 15](show_bug.cgi?id=1324759#c15)  Yaakov Selkowitz    2016-05-27 19:30:17 UTC  ``` (In reply to Cedric Buissart from [comment #13](show_bug.cgi?id=1324759#c13)) > My understanding from [comment 9](show_bug.cgi?id=1324759#c9), 10 and 11 is that RHEL is not affected > because we explicitly remove the SSP library out of gcc as shipped :  RHEL is not affected because the __*_chk functions are in libc itself and therefore always linked by default.   ```  [Comment 17](show_bug.cgi?id=1324759#c17)  Yaakov Selkowitz    2016-05-27 19:35:02 UTC  ``` (In reply to Yaakov Selkowitz from [comment #15](show_bug.cgi?id=1324759#c15)) > (In reply to Cedric Buissart from [comment #13](show_bug.cgi?id=1324759#c13)) > > My understanding from [comment 9](show_bug.cgi?id=1324759#c9), 10 and 11 is that RHEL is not affected > > because we explicitly remove the SSP library out of gcc as shipped : >  > RHEL is not affected because the __*_chk functions are in libc itself and > therefore always linked by default.  Oh, and RHEL doesn't ship mingw*-gcc etc.   ```  [Comment 18](show_bug.cgi?id=1324759#c18)  Yaakov Selkowitz    2016-06-07 02:51:04 UTC  ``` Created [attachment 1165477](attachment.cgi?id=1165477&action=diff "Cumulative patch for gcc svn trunk") [[details]](attachment.cgi?id=1165477&action=edit "Cumulative patch for gcc svn trunk") Cumulative patch for gcc svn trunk  Here's what I have at the moment against svn trunk.   ```  [Comment 26](show_bug.cgi?id=1324759#c26)  Yaakov Selkowitz    2017-11-30 01:25:15 UTC  ``` For the record, SSP has been added to newlib git master as of today.  Consequently, the future Newlib 2.6.0 and Cygwin 2.10.0 releases (dates TBD), in conjunction with a gcc (re)built with --disable-libssp (and gcc_cv_libc_provides_ssp=yes in GCC 7 and earlier), will no longer have this issue.   ```  [Comment 27](show_bug.cgi?id=1324759#c27)  Yaakov Selkowitz    2018-01-19 02:41:32 UTC  ``` Newlib 3.0.0 was released today including the builtin SSP implementation.   ```  [Comment 28](show_bug.cgi?id=1324759#c28)  Yaakov Selkowitz    2018-02-02 22:13:04 UTC  ``` Cygwin 2.10.0 was released today, along with an update for the Cygwin distribution gcc (6.4.0-5) which uses the new builtin implementation.   ``` |  |
| --- | --- |

---

| Note You need to [log in](show_bug.cgi?id=1324759&GoAheadAndLogIn=1) before you can comment on or make changes to this bug. |
| --- |

---

[Privacy](page.cgi?id=redhat/privacy.html)
[Contact](page.cgi?id=redhat/contact.html)
[FAQ](page.cgi?id=faq.html)
[Legal](page.cgi?id=terms-conditions.html)



=== Content from access.redhat.com_dbf8893c_20250126_105344.html ===


[Skip to navigation](#pfe-navigation)
[Skip to main content](#cp-main)
### Utilities

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)

[![Red Hat Customer Portal](https://access.redhat.com/chrome_themes/nimbus/img/red-hat-customer-portal.svg)](https://access.redhat.com/)

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)
* [Products](https://access.redhat.com/)
  ### Top Products

  + [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
  + [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
  + [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
  [All Products](https://access.redhat.com/products/)

  ### Downloads and Containers

  + [Downloads](https://access.redhat.com/downloads/)
  + [Packages](https://access.redhat.com/downloads/content/package-browser)
  + [Containers](https://catalog.redhat.com/software/containers/explore/)
  ### Top Resources

  + [Documentation](//docs.redhat.com/)
  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Product Compliance](https://access.redhat.com/articles/1202803)
  + [Errata](https://access.redhat.com/errata/)
* [Knowledge](https://access.redhat.com/labs/)
  ### Red Hat Knowledge Center

  + [Knowledgebase Solutions](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Solution)
  + [Knowledgebase Articles](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Article)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Errata](https://access.redhat.com/errata/)
  ### Top Product Docs

  + [Red Hat Enterprise Linux](//docs.redhat.com/en/documentation/red_hat_enterprise_linux/)
  + [Red Hat OpenShift](//docs.redhat.com/en/documentation/openshift_container_platform/)
  + [Red Hat Ansible Automation Platform](//docs.redhat.com/en/documentation/red_hat_ansible_automation_platform/)
  [All Product Docs](//docs.redhat.com/en/products)

  ### [Training and Certification](//www.redhat.com/en/services/training-and-certification)

  + [About](//www.redhat.com/en/services/training-and-certification)
  + [Course Index](//www.redhat.com/en/services/training/all-courses-exams)
  + [Certification Index](//www.redhat.com/en/services/certifications)
  + [Skill Assessment](//skills.ole.redhat.com/)
* [Security](https://access.redhat.com/security/)
  ### [Red Hat Product Security Center](https://access.redhat.com/security)

  + [Security Updates](https://access.redhat.com/security)
  + [Security Advisories](https://access.redhat.com/security/security-updates/#/security-advisories)
  + [Red Hat CVE Database](https://access.redhat.com/security/security-updates/#/cve)
  + [Errata](https://access.redhat.com/errata/)
  ### References

  + [Security Bulletins](https://access.redhat.com/security/vulnerabilities)
  + [Security Measurement](https://www.redhat.com/security/data/metrics/)
  + [Severity Ratings](https://access.redhat.com/security/updates/classification/)
  + [Security Data](https://access.redhat.com/security/data)
  ### Top Resources

  + [Security Labs](https://access.redhat.com/security/security-updates/#/security-labs)
  + [Backporting Policies](https://access.redhat.com/security/updates/backporting/)
  + [Security Blog](//redhat.com/en/blog/channel/security)
* [Support](https://access.redhat.com/support/)
  ### [Red Hat Support](https://access.redhat.com/support/)

  + [Support Cases](https://access.redhat.com/support/cases/)
  + [Troubleshoot](https://access.redhat.com/support/cases/#/troubleshoot)
  + [Get Support](https://access.redhat.com/support/)
  + [Contact Red Hat Support](https://access.redhat.com/support/contact/)
  ### [Red Hat Community Support](https://access.redhat.com/community)

  + [Customer Portal Community](https://access.redhat.com/community/)
  + [Community Discussions](https://access.redhat.com/discussions/)
  + [Red Hat Accelerator Program](https://access.redhat.com/accelerators/)
  ### Top Resources

  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Red Hat JBoss Supported Configurations](https://access.redhat.com/support/configurations/jboss)
  + [Red Hat Insights](https://cloud.redhat.com/insights)

Or [troubleshoot an issue](/support/cases/#/troubleshoot).

English

## Select Your Language

* [English](https://access.redhat.com/changeLanguage?language=en)
* [Français](https://access.redhat.com/changeLanguage?language=fr)
* [한국어](https://access.redhat.com/changeLanguage?language=ko)
* [日本語](https://access.redhat.com/changeLanguage?language=ja)
* [中文 (中国)](https://access.redhat.com/changeLanguage?language=zh_CN)

### Infrastructure and Management

* [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
* [Red Hat Satellite](https://access.redhat.com/products/red-hat-satellite/)
* [Red Hat Subscription Management](https://access.redhat.com/products/red-hat-subscription-management/)
* [Red Hat Insights](https://access.redhat.com/products/red-hat-insights/)
* [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
### Cloud Computing

* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
* [Red Hat OpenStack Platform](https://access.redhat.com/products/red-hat-openstack-platform/)
* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform/)
* [Red Hat OpenShift AI](https://access.redhat.com/products/red-hat-openshift-ai/)
* [Red Hat OpenShift Dedicated](https://access.redhat.com/products/openshift-dedicated-red-hat/)
* [Red Hat Advanced Cluster Security for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-security-for-kubernetes/)
* [Red Hat Advanced Cluster Management for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-management-for-kubernetes/)
* [Red Hat Quay](https://access.redhat.com/products/red-hat-quay/)
* [Red Hat OpenShift Dev Spaces](https://access.redhat.com/products/red-hat-openshift-dev-spaces)
* [Red Hat OpenShift Service on AWS](https://access.redhat.com/products/red-hat-openshift-service-aws)
### Storage

* [Red Hat Gluster Storage](https://access.redhat.com/products/red-hat-storage/)
* [Red Hat Hyperconverged Infrastructure](https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/)
* [Red Hat Ceph Storage](https://access.redhat.com/products/red-hat-ceph-storage/)
* [Red Hat OpenShift Data Foundation](https://access.redhat.com/products/red-hat-openshift-data-foundation)
### Runtimes

* [Red Hat Runtimes](https://access.redhat.com/products/red-hat-runtimes/)
* [Red Hat JBoss Enterprise Application Platform](https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/)
* [Red Hat Data Grid](https://access.redhat.com/products/red-hat-data-grid/)
* [Red Hat JBoss Web Server](https://access.redhat.com/products/red-hat-jboss-web-server/)
* [Red Hat build of Keycloak](https://access.redhat.com/products/red-hat-build-of-keycloak/)
* [Red Hat support for Spring Boot](https://access.redhat.com/products/spring-boot/)
* [Red Hat build of Node.js](https://access.redhat.com/products/nodejs/)
* [Red Hat build of Quarkus](https://access.redhat.com/products/quarkus/)
### Integration and Automation

* [Red Hat Application Foundations](https://access.redhat.com/products/red-hat-application-foundations/)
* [Red Hat Fuse](https://access.redhat.com/products/red-hat-fuse/)
* [Red Hat AMQ](https://access.redhat.com/products/red-hat-amq/)
* [Red Hat 3scale API Management](https://access.redhat.com/products/red-hat-3scale/)

[All Products](https://access.redhat.com/products/)

**We're sorry but cve-details doesn't work properly without JavaScript enabled. Please enable it to continue.**

[![Red Hat](https://static.redhat.com/libs/redhat/brand-assets/2/corp/logo--on-dark.svg)](https://redhat.com/en)
[X (formerly Twitter)](https://twitter.com/RedHat)
### Quick Links

* [Downloads](https://access.redhat.com/downloads/)
* [Subscriptions](https://access.redhat.com/management)
* [Support Cases](https://access.redhat.com/support)
* [Customer Service](https://access.redhat.com/support/customer-service)
* [Product Documentation](//docs.redhat.com/)

### Help

* [Contact Us](https://access.redhat.com/support/contact/)
* [Customer Portal FAQ](https://access.redhat.com/articles/33844)
* [Log-in Assistance](https://access.redhat.com/help/login_assistance)

### Site Info

* [Trust Red Hat](https://www.redhat.com/en/trust)
* [Browser Support Policy](https://www.redhat.com/en/about/browser-support)
* [Accessibility](https://www.redhat.com/en/about/digital-accessibility)
* [Awards and Recognition](https://access.redhat.com/recognition/)
* [Colophon](https://access.redhat.com/help/colophon/)

### Related Sites

* [redhat.com](https://www.redhat.com/)
* [developers.redhat.com](http://developers.redhat.com/)
* [connect.redhat.com](https://connect.redhat.com/)
* [cloud.redhat.com](https://cloud.redhat.com/)

### Red Hat legal and privacy links

* [About Red Hat](https://redhat.com/en/about/company)
* [Jobs](https://redhat.com/en/jobs)
* [Events](https://redhat.com/en/events)
* [Locations](https://redhat.com/en/about/office-locations)
* [Contact Red Hat](https://redhat.com/en/contact)
* [Red Hat Blog](https://redhat.com/en/blog)
* [Diversity, equity, and inclusion](https://redhat.com/en/about/our-culture/diversity-equity-inclusion)
* [Cool Stuff Store](https://coolstuff.redhat.com/)
* [Red Hat Summit](https://www.redhat.com/en/summit)

 © 2025 Red Hat, Inc.
### Red Hat legal and privacy links

* [Privacy statement](https://redhat.com/en/about/privacy-policy)
* [Terms of use](https://redhat.com/en/about/terms-use)
* [All policies and guidelines](https://redhat.com/en/about/all-policies-guidelines)
* [Digital accessibility](https://redhat.com/en/about/digital-accessibility)



=== Content from www.openwall.com_720def08_20250125_180334.html ===


| [Openwall](/) * [Products](/)   + [Openwall GNU/\*/Linux   *server OS*](/Owl/)+ [Linux Kernel Runtime Guard](/lkrg/)+ [John the Ripper   *password cracker*](/john/)         - [Free & Open Source for any platform](/john/)- [in the cloud](/john/cloud/)- [Pro for Linux](/john/pro/linux/)- [Pro for macOS](/john/pro/macosx/)+ [Wordlists   *for password cracking*](/wordlists/)+ [passwdqc   *policy enforcement*](/passwdqc/)             - [Free & Open Source for Unix](/passwdqc/)- [Pro for Windows (Active Directory)](/passwdqc/windows/)+ [yescrypt   *KDF & password hashing*](/yescrypt/)+ [yespower   *Proof-of-Work (PoW)*](/yespower/)+ [crypt\_blowfish   *password hashing*](/crypt/)+ [phpass   *ditto in PHP*](/phpass/)+ [tcb   *better password shadowing*](/tcb/)+ [Pluggable Authentication Modules](/pam/)+ [scanlogd   *port scan detector*](/scanlogd/)+ [popa3d   *tiny POP3 daemon*](/popa3d/)+ [blists   *web interface to mailing lists*](/blists/)+ [msulogin   *single user mode login*](/msulogin/)+ [php\_mt\_seed   *mt\_rand() cracker*](/php_mt_seed/)* [Services](/services/)* Publications       + [Articles](/articles/)+ [Presentations](/presentations/)* Resources         + [Mailing lists](/lists/)+ [Community wiki](https://openwall.info/wiki/)+ [Source code repositories (GitHub)](https://github.com/openwall)+ [Source code repositories (CVSweb)](https://cvsweb.openwall.com)+ [File archive & mirrors](/mirrors/)+ [How to verify digital signatures](/signatures/)+ [OVE IDs](/ove/)* [What's new](/news) | |
| --- | --- |

| | [Hash Suite - Windows password security audit tool. GUI, reports in PDF.](https://hashsuite.openwall.net) | | --- | |
| --- | --- |

[[<prev]](5) [[next>]](7) [[day]](.) [[month]](..) [[year]](../..) [[list]](../../..)
```

Message-ID: <CAKG8Do7icu-1yBEVZm4Rb9JnUP6Oxz2Rd__B+N_xbj88KTsE=A@mail.gmail.com>
Date: Wed, 17 Aug 2016 18:03:05 +0200
From: Cedric Buissart <cbuissar@...hat.com>
To: oss-security@...ts.openwall.com
Subject: CVE-2016-4973 gcc: Targets using libssp for SSP are missing
 -D_FORTIFY_SOURCE functionality

Hi,

This is to disclose the following CVE:

CVE-2016-4973 gcc: Targets using libssp for SSP are missing
-D_FORTIFY_SOURCE functionality

It was found that targets using gcc's libssp library for Stack Smashing
Protection (among others: Cygwin, MinGW, newlib, RTEMS; but not Glibc,
Bionic, NetBSD which provide SSP in libc), are missing the Object Size
Checking feature, even when explicitly requested with _FORTIFY_SOURCE.
Vulnerable binaries compiled against such targets do not benefit of such
protection, increasing the chances of success of a buffer overflow attack.

There is currently no upstream patch. Discussions on the subject & patch
proposal can be found in the Red Hat corresponding bugzilla :
<https://bugzilla.redhat.com/show_bug.cgi?id=CVE-2016-4973>

Impact: Low

CVSSv3 scoring : 3.6 CVSS:3.0/AV:L/AC:L/PR:N/UI:R/S:C/C:N/I:L/A:N

Note regarding the scoring : only the GCC flaw was taken into account, not
its potential combination with a flaw in an affected binary.

The flaw was reported by Yaakov Selkowitz (Red Hat)

Best regards,

Cedric

--
Cedric Buissart,
Product Security

```

[Powered by blists](https://www.openwall.com/blists/) - [more mailing lists](https://lists.openwall.net)

Please check out the
[Open Source Software Security Wiki](https://oss-security.openwall.org/wiki/), which is counterpart to this
[mailing list](https://oss-security.openwall.org/wiki/mailing-lists/oss-security).

Confused about [mailing lists](/lists/) and their use?
[Read about mailing lists on Wikipedia](https://en.wikipedia.org/wiki/Electronic_mailing_list)
and check out these
[guidelines on proper formatting of your messages](https://www.complang.tuwien.ac.at/anton/mail-news-errors.html).


