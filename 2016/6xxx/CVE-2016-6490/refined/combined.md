=== Content from lists.gnu.org_8ae278e6_20250126_040213.html ===


| | **qemu-devel** | | --- | |
| --- | --- |

[[Top](../)][[All Lists](/archive/html)]

[Advanced](/archive/cgi-bin/namazu.cgi?idxname=qemu-devel)

---

[[Date Prev](msg06245.html)][[Date Next](msg06247.html)][[Thread Prev](msg06244.html)][[Thread Next](msg06253.html)][[Date Index](index.html#06246)][[Thread Index](threads.html#06246)]

## [Qemu-devel] [PATCH] virtio: check vring descriptor buffer length

---

| **From**: | P J P |
| --- | --- |

| **Subject**: | [Qemu-devel] [PATCH] virtio: check vring descriptor buffer length |
| **Date**: | Wed, 27 Jul 2016 21:07:56 +0530 |

---

```
From: Prasad J Pandit <address@hidden>

virtio back end uses set of buffers to facilitate I/O operations.
An infinite loop unfolds in virtqueue_pop() if a buffer was
of zero size. Add check to avoid it.

Reported-by: Li Qiang <address@hidden>
Signed-off-by: Prasad J Pandit <address@hidden>
---
 hw/virtio/virtio.c | 5 +++++
 1 file changed, 5 insertions(+)

diff --git a/hw/virtio/virtio.c b/hw/virtio/virtio.c
index 30ede3d..8de896c 100644
--- a/hw/virtio/virtio.c
+++ b/hw/virtio/virtio.c
@@ -457,6 +457,11 @@ static void virtqueue_map_desc(unsigned int *p_num_sg,
hwaddr *addr, struct iove
     unsigned num_sg = *p_num_sg;
     assert(num_sg <= max_num_sg);

+    if (!sz) {
+        error_report("virtio: zero sized buffers are not allowed");
+        exit(1);
+    }
+
     while (sz) {
         hwaddr len = sz;

--
2.5.5

```

---

reply via email to

---

| [Prev in Thread] | **Current Thread** | [[Next in Thread](msg06253.html)] |
| --- | --- | --- |

* **[Qemu-devel] [PATCH] virtio: check vring descriptor buffer length**,
  *P J P* **<=**
  + **[Re: [Qemu-devel] [PATCH] virtio: check vring descriptor buffer length](msg06253.html)**, *Eric Blake*, 2016/07/27
    - **[Re: [Qemu-devel] [PATCH] virtio: check vring descriptor buffer length](msg06270.html)**, *Michael S. Tsirkin*, 2016/07/27
  + **[Re: [Qemu-devel] [PATCH] virtio: check vring descriptor buffer length](msg06380.html)**, *Stefan Hajnoczi*, 2016/07/28

---

* Prev by Date:
  **[Re: [Qemu-devel] [PATCH] ipmi: Remove hotplug from IPMI BMCs](msg06245.html)**
* Next by Date:
  **[Re: [Qemu-devel] [PATCH v2 1/1] block: improve error handling in raw\_open](msg06247.html)**
* Previous by thread:
  **[[Qemu-devel] [PATCH for-2.7] Xen PCI passthrough: fix passthrough failure when no interrupt pin](msg06244.html)**
* Next by thread:
  **[Re: [Qemu-devel] [PATCH] virtio: check vring descriptor buffer length](msg06253.html)**
* Index(es):
  + [**Date**](index.html#06246)
  + [**Thread**](threads.html#06246)



=== Content from git.qemu.org_75e30f07_20250124_221756.html ===


[Skip to content](#content-body)
GitLab

* Menu

  + [Why GitLab](https://about.gitlab.com/why-gitlab)
  + [Pricing](https://about.gitlab.com/pricing)
  + [Contact Sales](https://about.gitlab.com/sales)
  + [Explore](/explore)
* [Why GitLab](https://about.gitlab.com/why-gitlab)
* [Pricing](https://about.gitlab.com/pricing)
* [Contact Sales](https://about.gitlab.com/sales)
* [Explore](/explore)

* [Sign in](/users/sign_in?redirect_to_referer=yes)
* [Get free trial](/users/sign_up)

![QEMU](/uploads/-/system/group/avatar/3038080/logo.png?width=48)
# QEMU

QEMU Project repositories

Read more



=== Content from www.openwall.com_e486102f_20250124_221758.html ===


| [Openwall](/) * [Products](/)   + [Openwall GNU/\*/Linux   *server OS*](/Owl/)+ [Linux Kernel Runtime Guard](/lkrg/)+ [John the Ripper   *password cracker*](/john/)         - [Free & Open Source for any platform](/john/)- [in the cloud](/john/cloud/)- [Pro for Linux](/john/pro/linux/)- [Pro for macOS](/john/pro/macosx/)+ [Wordlists   *for password cracking*](/wordlists/)+ [passwdqc   *policy enforcement*](/passwdqc/)             - [Free & Open Source for Unix](/passwdqc/)- [Pro for Windows (Active Directory)](/passwdqc/windows/)+ [yescrypt   *KDF & password hashing*](/yescrypt/)+ [yespower   *Proof-of-Work (PoW)*](/yespower/)+ [crypt\_blowfish   *password hashing*](/crypt/)+ [phpass   *ditto in PHP*](/phpass/)+ [tcb   *better password shadowing*](/tcb/)+ [Pluggable Authentication Modules](/pam/)+ [scanlogd   *port scan detector*](/scanlogd/)+ [popa3d   *tiny POP3 daemon*](/popa3d/)+ [blists   *web interface to mailing lists*](/blists/)+ [msulogin   *single user mode login*](/msulogin/)+ [php\_mt\_seed   *mt\_rand() cracker*](/php_mt_seed/)* [Services](/services/)* Publications       + [Articles](/articles/)+ [Presentations](/presentations/)* Resources         + [Mailing lists](/lists/)+ [Community wiki](https://openwall.info/wiki/)+ [Source code repositories (GitHub)](https://github.com/openwall)+ [Source code repositories (CVSweb)](https://cvsweb.openwall.com)+ [File archive & mirrors](/mirrors/)+ [How to verify digital signatures](/signatures/)+ [OVE IDs](/ove/)* [What's new](/news) | |
| --- | --- |

| | [Follow @Openwall on Twitter for new release announcements and other news](https://twitter.com/openwall) | | --- | |
| --- | --- |

[[<prev]](8) [[next>]](10) [[<thread-prev]](4) [[day]](.) [[month]](..) [[year]](../..) [[list]](../../..)
```

Message-Id: <20160728162022.A49C58BC3D3@smtpvmsrv1.mitre.org>
Date: Thu, 28 Jul 2016 12:20:22 -0400 (EDT)
From: cve-assign@...re.org
To: ppandit@...hat.com
Cc: cve-assign@...re.org, oss-security@...ts.openwall.com, liqiang6-s@....cn
Subject: Re: CVE Request Qemu: virtio: infinite loop in virtqueue_pop

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA256

> Quick emulator(Qemu) built with the virtio framework is vulnerable to an
> infinite loop issue. It could occur if the guest was to set the I/O descriptor
> buffer length to be zero. A privileged user inside guest could use this flaw
> to potentially crash the Qemu instance on the host resulting in DoS.
>
> <https://lists.gnu.org/archive/html/qemu-devel/2016-07/msg06246.html>

Use CVE-2016-6490.

This is not yet available at
<http://git.qemu.org/?p=qemu.git;a=history;f=hw/virtio/virtio.c> but
that may be an expected place for a later update.

- --
CVE Assignment Team
M/S M300, 202 Burlington Road, Bedford, MA 01730 USA
[ A PGP key is available for encrypted communications at
  <http://cve.mitre.org/cve/request_id.html> ]
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1

iQIcBAEBCAAGBQJXmjADAAoJEHb/MwWLVhi2KZ8P/jkyKrIQY2ryaoptTvhMn41U
D1TgFaTnQwZAfCLeF4r45Uy1h2G4TmsE+XHnk2gOaqFkBFiYRKBEOKqv7pEszohC
MvKyQC2WPIuQnM8Y/KIy4Xgpw/UVjQfnWtg2dW6Hb4kg/H7WL602vIlE0yxa2BGz
ZpBRQViB/qOn9MI4+5lHdc5jSGlVBLJUEK7Ckm83AejMwF7VVeFfnxM/jGreBH1/
SejweRYV2c9nKsYH41wBvTD482Ee+hLY5cC2CDMKsG/NB015KGY66yzh41vUDLXI
Rc3nxjD9PSxaPvzXyl8ha6cnYZy4H5qWmEUhC96hoPPEOgtiatE8Ekcf8q7reUVM
MI9LXjSaZy7MZOTuS75Ha2lKPqPaBHuCpe/SxpS3vD4BjG7ZpZrTthyZYO1eJz49
f7FxXVb1TLc0GjkWLlWh31EuABldZzwBFXqOIfyYrCsoPngfSgViq1i2GjKgz+XB
5D8mz8jXTcklV2P7EE8nj72aT6YHbwi089oR5oNQzWDAsz86oTYqXghSHHs6MRRx
NweiubIUxDvDVYuGtHlJbVLAUIKeV5O1zIfqAs4YxkC0ADqaz29KWEL5+IBd84nJ
Gg4NJYg1VhztrGCwUmMeqflT1OaduIZkSGgGnzv24oYpoSxF2ZZB3KhSIu/atT50
lmUdCpS6w6UUlT6LMSLd
=7n+b
-----END PGP SIGNATURE-----

```

[Powered by blists](https://www.openwall.com/blists/) - [more mailing lists](https://lists.openwall.net)

Please check out the
[Open Source Software Security Wiki](https://oss-security.openwall.org/wiki/), which is counterpart to this
[mailing list](https://oss-security.openwall.org/wiki/mailing-lists/oss-security).

Confused about [mailing lists](/lists/) and their use?
[Read about mailing lists on Wikipedia](https://en.wikipedia.org/wiki/Electronic_mailing_list)
and check out these
[guidelines on proper formatting of your messages](https://www.complang.tuwien.ac.at/anton/mail-news-errors.html).



=== Content from security.gentoo.org_e3918157_20250124_221801.html ===

[![Gentoo](https://assets.gentoo.org/tyrian/v2/site-logo.png)](/ "Back to the homepage")
Security

[**Get Gentoo!**](https://get.gentoo.org/)
gentoo.org sites
[gentoo.org](https://www.gentoo.org/ "Main Gentoo website")
[Wiki](https://wiki.gentoo.org/ "Find and contribute documentation")
[Bugs](https://bugs.gentoo.org/ "Report issues and find common issues")
[Forums](https://forums.gentoo.org/ "Discuss with the community")
[Packages](https://packages.gentoo.org/ "Find software for your Gentoo")

[Planet](https://planet.gentoo.org/ "Find out what's going on in the developer community")
[Archives](https://archives.gentoo.org/ "Read up on past discussions")
[Sources](https://sources.gentoo.org/ "Browse our source code")

[Infra Status](https://infra-status.gentoo.org/ "Get updates on the services provided by Gentoo")

* [Home](/)
* [Stay informed](/subscribe)
* [Advisories](/glsa)

# QEMU: Multiple vulnerabilities — GLSA **201609-01**

Multiple vulnerabilities have been found in QEMU, the worst of
which could lead to arbitrary code execution, or cause a Denial of Service
condition.

### Affected packages

| Package | **app-emulation/qemu** on all architectures |
| --- | --- |
| Affected versions | < **2.7.0-r3** |
| Unaffected versions | >= **2.7.0-r3** |

### Background

QEMU is a generic and open source machine emulator and virtualizer.

### Description

Multiple vulnerabilities have been discovered in QEMU. Please review the
CVE identifiers referenced below for details.

### Impact

Local users within a guest QEMU environment can execute arbitrary code
within the host or a cause a Denial of Service condition of the QEMU
guest process.

### Workaround

There is no known workaround at this time.

### Resolution

All QEMU users should upgrade to the latest version:

```
 # emerge --sync
 # emerge --ask --oneshot --verbose ">=app-emulation/qemu-2.7.0-r3"

```
### References

* [CVE-2016-2841](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2016-2841)
* [CVE-2016-4001](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2016-4001)
* [CVE-2016-4002](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2016-4002)
* [CVE-2016-4020](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2016-4020)
* [CVE-2016-4439](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2016-4439)
* [CVE-2016-4441](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2016-4441)
* [CVE-2016-4453](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2016-4453)
* [CVE-2016-4454](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2016-4454)
* [CVE-2016-4964](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2016-4964)
* [CVE-2016-5106](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2016-5106)
* [CVE-2016-5107](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2016-5107)
* [CVE-2016-5126](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2016-5126)
* [CVE-2016-5238](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2016-5238)
* [CVE-2016-5337](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2016-5337)
* [CVE-2016-5338](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2016-5338)
* [CVE-2016-6490](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2016-6490)
* [CVE-2016-6833](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2016-6833)
* [CVE-2016-6834](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2016-6834)
* [CVE-2016-6836](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2016-6836)
* [CVE-2016-6888](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2016-6888)
* [CVE-2016-7116](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2016-7116)
* [CVE-2016-7156](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2016-7156)
* [CVE-2016-7157](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2016-7157)
* [CVE-2016-7421](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2016-7421)
* [CVE-2016-7422](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2016-7422)

**Release date**

September 25, 2016

**Latest revision**

September 26, 2016: 2

**Severity**

normal

**Exploitable**

remote

**Bugzilla entries**

* [573816](https://bugs.gentoo.org/show_bug.cgi?id=573816)
* [579734](https://bugs.gentoo.org/show_bug.cgi?id=579734)
* [580040](https://bugs.gentoo.org/show_bug.cgi?id=580040)
* [583496](https://bugs.gentoo.org/show_bug.cgi?id=583496)
* [583952](https://bugs.gentoo.org/show_bug.cgi?id=583952)
* [584094](https://bugs.gentoo.org/show_bug.cgi?id=584094)
* [584102](https://bugs.gentoo.org/show_bug.cgi?id=584102)
* [584146](https://bugs.gentoo.org/show_bug.cgi?id=584146)
* [584514](https://bugs.gentoo.org/show_bug.cgi?id=584514)
* [584630](https://bugs.gentoo.org/show_bug.cgi?id=584630)
* [584918](https://bugs.gentoo.org/show_bug.cgi?id=584918)
* [589924](https://bugs.gentoo.org/show_bug.cgi?id=589924)
* [589928](https://bugs.gentoo.org/show_bug.cgi?id=589928)
* [591242](https://bugs.gentoo.org/show_bug.cgi?id=591242)
* [591244](https://bugs.gentoo.org/show_bug.cgi?id=591244)
* [591374](https://bugs.gentoo.org/show_bug.cgi?id=591374)
* [591380](https://bugs.gentoo.org/show_bug.cgi?id=591380)
* [591678](https://bugs.gentoo.org/show_bug.cgi?id=591678)
* [592430](https://bugs.gentoo.org/show_bug.cgi?id=592430)
* [593034](https://bugs.gentoo.org/show_bug.cgi?id=593034)
* [593036](https://bugs.gentoo.org/show_bug.cgi?id=593036)
* [593038](https://bugs.gentoo.org/show_bug.cgi?id=593038)
* [593284](https://bugs.gentoo.org/show_bug.cgi?id=593284)
* [593950](https://bugs.gentoo.org/show_bug.cgi?id=593950)
* [593956](https://bugs.gentoo.org/show_bug.cgi?id=593956)

### Questions or comments?

Please feel free to contact us.

**© 2001–2020 Gentoo Foundation, Inc.**



=== Content from www.openwall.com_a83b393b_20250124_221757.html ===


| [Openwall](/) * [Products](/)   + [Openwall GNU/\*/Linux   *server OS*](/Owl/)+ [Linux Kernel Runtime Guard](/lkrg/)+ [John the Ripper   *password cracker*](/john/)         - [Free & Open Source for any platform](/john/)- [in the cloud](/john/cloud/)- [Pro for Linux](/john/pro/linux/)- [Pro for macOS](/john/pro/macosx/)+ [Wordlists   *for password cracking*](/wordlists/)+ [passwdqc   *policy enforcement*](/passwdqc/)             - [Free & Open Source for Unix](/passwdqc/)- [Pro for Windows (Active Directory)](/passwdqc/windows/)+ [yescrypt   *KDF & password hashing*](/yescrypt/)+ [yespower   *Proof-of-Work (PoW)*](/yespower/)+ [crypt\_blowfish   *password hashing*](/crypt/)+ [phpass   *ditto in PHP*](/phpass/)+ [tcb   *better password shadowing*](/tcb/)+ [Pluggable Authentication Modules](/pam/)+ [scanlogd   *port scan detector*](/scanlogd/)+ [popa3d   *tiny POP3 daemon*](/popa3d/)+ [blists   *web interface to mailing lists*](/blists/)+ [msulogin   *single user mode login*](/msulogin/)+ [php\_mt\_seed   *mt\_rand() cracker*](/php_mt_seed/)* [Services](/services/)* Publications       + [Articles](/articles/)+ [Presentations](/presentations/)* Resources         + [Mailing lists](/lists/)+ [Community wiki](https://openwall.info/wiki/)+ [Source code repositories (GitHub)](https://github.com/openwall)+ [Source code repositories (CVSweb)](https://cvsweb.openwall.com)+ [File archive & mirrors](/mirrors/)+ [How to verify digital signatures](/signatures/)+ [OVE IDs](/ove/)* [What's new](/news) | |
| --- | --- |

| | [Hash Suite - Windows password security audit tool. GUI, reports in PDF.](https://hashsuite.openwall.net) | | --- | |
| --- | --- |

[[<prev]](3) [[next>]](5) [[thread-next>]](9) [[day]](.) [[month]](..) [[year]](../..) [[list]](../../..)
```

Message-ID: <alpine.LFD.2.20.1607281725190.28945@wniryva>
Date: Thu, 28 Jul 2016 17:31:12 +0530 (IST)
From: P J P <ppandit@...hat.com>
To: oss security list <oss-security@...ts.openwall.com>
cc: Li Qiang <liqiang6-s@....cn>
Subject: CVE Request Qemu: virtio: infinite loop in virtqueue_pop

   Hello,

Quick emulator(Qemu) built with the virtio framework is vulnerable to an
infinite loop issue. It could occur if the guest was to set the I/O descriptor
buffer length to be zero. A privileged user inside guest could use this flaw
to potentially crash the Qemu instance on the host resulting in DoS.

Upstream fix:
-------------
   -> <https://lists.gnu.org/archive/html/qemu-devel/2016-07/msg06246.html>

This issue was discovered by Li Qiang of 360.cn Inc.

Thank you.
--
Prasad J Pandit / Red Hat Product Security Team
47AF CE69 3A90 54AA 9045 1053 DD13 3D32 FE5B 041F

```

[Powered by blists](https://www.openwall.com/blists/) - [more mailing lists](https://lists.openwall.net)

Please check out the
[Open Source Software Security Wiki](https://oss-security.openwall.org/wiki/), which is counterpart to this
[mailing list](https://oss-security.openwall.org/wiki/mailing-lists/oss-security).

Confused about [mailing lists](/lists/) and their use?
[Read about mailing lists on Wikipedia](https://en.wikipedia.org/wiki/Electronic_mailing_list)
and check out these
[guidelines on proper formatting of your messages](https://www.complang.tuwien.ac.at/anton/mail-news-errors.html).


