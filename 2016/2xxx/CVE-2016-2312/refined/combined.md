=== Content from build.opensuse.org_a47795f8_20250126_034417.html ===

[![](https://build.opensuse.org/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBCZz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--aa5cb6f11b842d915c34968e0a4de823d259dcc0/openSUSEBuildService.png)](/)

[Sign Up](https://idp-portal.suse.com/univention/self-service/#page=createaccount)

Log In

[![](/assets/favicon-eb1d8ba2a269175c910cae3ae95a5d0dca90274b90db45c8efe0988ec9efd85d.svg)](/)Log In

---

or

[Sign Up](https://idp-portal.suse.com/univention/self-service/#page=createaccount)

##### Places

* [All Projects](/project "All Projects")
* [Status Monitor](/monitor "Status Monitor")

* Collapse sidebar

1. Request 358584

This request supersedes:
[request 357174](/request/show/357174)
([Show diff](/request/show/358584?diff_to_superseded=357174))

##### Overview

### Request 358584 accepted

- Added 0001-greeter-Dont-quit-when-last-window-closes.patch

 (boo#964548, kde#358125)

- Update to 5.5.4:

 \* Bugfix release

 \* For more details please see:

 https://www.kde.org/announcements/plasma-5.5.4.php

* Created by
  [sumski](/users/sumski)
  almost 9 years ago
* In state
  [accepted](/request/show/358584#request-history)
* Supersedes
  [357174](/request/show/357174)

* [Submit kscreenlocker](#Submit_kscreenlocker386911)

Loading...

* [Comments for request 358584
  0](#comments)

*No comments available*

##### Request History

![Hrvoje Senjan's avatar](https://www.gravatar.com/avatar/38802075875f307d716a8b0b6d000047?s=38&d=robohash "Hrvoje Senjan")

[sumski](/users/sumski)
created request
[almost 9 years ago](#request-creation "2016-02-09 16:19 UTC")

- Added 0001-greeter-Dont-quit-when-last-window-closes.patch

 (boo#964548, kde#358125)

- Update to 5.5.4:

 \* Bugfix release

 \* For more details please see:

 https://www.kde.org/announcements/plasma-5.5.4.php

---

![Saul Goodman's avatar](https://www.gravatar.com/avatar/ffc053e2eedefdebcd8cbbc514d9dc11?s=38&d=robohash "Saul Goodman")

[licensedigger](/users/licensedigger)
accepted review
[almost 9 years ago](#status-history-1228382 "2016-02-09 16:20 UTC")

---

![Factory Auto's avatar](https://www.gravatar.com/avatar/3be6bec62ce4af49b4b555cbd8bd3b9d?s=38&d=robohash "Factory Auto")

[factory-auto](/users/factory-auto)
added opensuse-review-team as a reviewer
[almost 9 years ago](#status-history-1228384 "2016-02-09 16:21 UTC")

Please review sources

---

![Factory Auto's avatar](https://www.gravatar.com/avatar/3be6bec62ce4af49b4b555cbd8bd3b9d?s=38&d=robohash "Factory Auto")

[factory-auto](/users/factory-auto)
added factory-repo-checker as a reviewer
[almost 9 years ago](#status-history-1228385 "2016-02-09 16:22 UTC")

Please review build success

---

![Factory Auto's avatar](https://www.gravatar.com/avatar/3be6bec62ce4af49b4b555cbd8bd3b9d?s=38&d=robohash "Factory Auto")

[factory-auto](/users/factory-auto)
accepted review
[almost 9 years ago](#status-history-1228386 "2016-02-09 16:22 UTC")

Check script succeeded

---

![Dominique Leuenberger's avatar](https://www.gravatar.com/avatar/58018ece4601a5b60720b91442e2612d?s=38&d=robohash "Dominique Leuenberger")

[dimstar\_suse](/users/dimstar_suse)
set openSUSE:Factory:Staging:G as a staging project
[almost 9 years ago](#status-history-1228390 "2016-02-09 16:25 UTC")

Being evaluated by staging project "openSUSE:Factory:Staging:G"

---

![Dominique Leuenberger's avatar](https://www.gravatar.com/avatar/58018ece4601a5b60720b91442e2612d?s=38&d=robohash "Dominique Leuenberger")

[dimstar\_suse](/users/dimstar_suse)
accepted review
[almost 9 years ago](#status-history-1228391 "2016-02-09 16:25 UTC")

Picked openSUSE:Factory:Staging:G

---

![Factory Repo Checker's avatar](https://www.gravatar.com/avatar/5596407744bec62d3b3bdf4bc1050b00?s=38&d=robohash "Factory Repo Checker")

[factory-repo-checker](/users/factory-repo-checker)
reopened review
[almost 9 years ago](#status-history-1228475 "2016-02-09 18:18 UTC")

kscreenlocker is still building for repository openSUSE\_Factory

---

![Raymond Wooninck's avatar](https://www.gravatar.com/avatar/0f2a44ee48448ded558b90d55ed52b28?s=38&d=robohash "Raymond Wooninck")

[tittiatcoke](/users/tittiatcoke)
accepted review
[almost 9 years ago](#status-history-1228506 "2016-02-09 20:34 UTC")

---

![Factory Repo Checker's avatar](https://www.gravatar.com/avatar/5596407744bec62d3b3bdf4bc1050b00?s=38&d=robohash "Factory Repo Checker")

[factory-repo-checker](/users/factory-repo-checker)
accepted review
[almost 9 years ago](#status-history-1228531 "2016-02-09 20:47 UTC")

Builds for repo openSUSE:Factory:Staging:G:DVD/standard

---

![Dominique Leuenberger's avatar](https://www.gravatar.com/avatar/58018ece4601a5b60720b91442e2612d?s=38&d=robohash "Dominique Leuenberger")

[dimstar\_suse](/users/dimstar_suse)
accepted review
[almost 9 years ago](#status-history-1229632 "2016-02-11 11:36 UTC")

ready to accept

---

![Dominique Leuenberger's avatar](https://www.gravatar.com/avatar/58018ece4601a5b60720b91442e2612d?s=38&d=robohash "Dominique Leuenberger")

[dimstar\_suse](/users/dimstar_suse)
approved review
[almost 9 years ago](#status-history-1229633 "2016-02-11 11:36 UTC")

ready to accept

---

![Dominique Leuenberger's avatar](https://www.gravatar.com/avatar/58018ece4601a5b60720b91442e2612d?s=38&d=robohash "Dominique Leuenberger")

[dimstar\_suse](/users/dimstar_suse)
accepted request
[almost 9 years ago](#status-history-1229634 "2016-02-11 11:36 UTC")

Accept to openSUSE:Factory

##### Package Maintainers

OK

**Locations**

* [Projects](/project)
* [Search](/search)
* [Status Monitor](/monitor)

**Help**

* [OpenBuildService.org](https://openbuildservice.org/)
* [Documentation](https://openbuildservice.org/help/manuals/)
* [API Documentation](/apidocs/index)
* [Code of Conduct](/code_of_conduct)

**Contact**

* [Support](https://openbuildservice.org/support/)
* [@OBShq](https://fosstodon.org/%40obshq)
* [Terms](https://en.opensuse.org/Terms_of_site)

openSUSE Build Service is sponsored by
[![](/assets/icons/sponsor_suse-92006bbd693f5f675ccab53afe3e9c858aada01882b490fa784d8cc8a9f4f080.png)](http://www.suse.com "Enterprise Linux you can rely on.")

[![](/assets/icons/sponsor_amd-5ec958d97e60089cad23346048c0b79d2144408deda3d0495fe023bf29ec0d7b.png)](http://www.amd.com/ "Enabling today. Inspiring tomorrow.")

[![](/assets/icons/sponsor_b1-systems-a5bc5a49e7fc7854f9a688f873b074330a68bf7d286c4fda6bd0dd2e592752da.png)](http://www.b1-systems.de/en/homepage/ "Linux / Open Source Consulting, Training, Development & Support")

[![](/assets/icons/sponsor_heinlein-dc9ce64ab5cb25a15c4fd9a1b743f7886867932283f1dace07f0599a663a222a.png)](https://www.heinlein-support.de/ "We provide Knowledge and Experience")

[![](/assets/icons/sponsor_apm-1a5a654e5e7ed3df9d4717a1d68f6c4593096304173961c8b486a3ff3bddde75.png)](https://www.apm.com "Build the future of ARMv8 on Applied Micro")

The Open Build Service is an
[openSUSE project](https://www.opensuse.org).

* [Sign Up](https://idp-portal.suse.com/univention/self-service/#page=createaccount)
* Log In
* Places

##### Places

* [All Projects](/project "All Projects")
* [Status Monitor](/monitor "Status Monitor")



=== Content from bugs.kde.org_14f1e64c_20250124_214523.html ===


KDE Bugtracking System – Bug 358125
the lock-up can be pass through without typing password
Last modified: 2016-02-10 11:22:22 UTC

* [Home](./)
* | [New](enter_bug.cgi)
* | [Browse](describecomponents.cgi)
* | [Search](query.cgi)
* |

  [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")
* | [Reports](report.cgi)
* |
  [Requests](request.cgi)
* |
  [Help](https://bugzilla.readthedocs.org/en/5.0/using/understanding.html)
* |
  [New Account](createaccount.cgi)
* |
  [Log In](show_bug.cgi?id=358125&GoAheadAndLogIn=1)

  [x]
* |
  [Forgot Password](show_bug.cgi?id=358125&GoAheadAndLogIn=1#forgot)
  Login:

  [x]

[**Bug 358125**](show_bug.cgi?id=358125)
- the lock-up can be pass through without typing password

[Summary:](page.cgi?id=fields.html#short_desc "The bug summary is a short sentence which succinctly describes what the bug is about.")
the lock-up can be pass through without typing password

| | [Status](page.cgi?id=fields.html#bug_status): | RESOLVED FIXED | | --- | --- | |  | | | [Alias:](page.cgi?id=fields.html#alias "A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla.") | None | |  | | | [Product:](describecomponents.cgi "Bugs are categorised into Products and Components. Select a Classification to narrow down this list.") | kscreenlocker | | [Classification:](page.cgi?id=fields.html#classification "Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation.") | Plasma | | [Component:](describecomponents.cgi?product=kscreenlocker "Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list.") | general ([show other bugs](buglist.cgi?component=general&product=kscreenlocker&bug_status=__open__)) | | [Version:](page.cgi?id=fields.html#version "The version field defines the version of the software the bug was found in.") | unspecified | | [Platform:](page.cgi?id=fields.html#rep_platform "The hardware platform the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | Other Linux | |  | | | [Importance](page.cgi?id=fields.html#importance): | NOR major | | [Target Milestone:](page.cgi?id=fields.html#target_milestone "The Target Milestone field is used to define when the bug is expected to be fixed.") | --- | | [Assignee:](page.cgi?id=fields.html#assigned_to "The person in charge of resolving the bug.") | Plasma Bugs List | |  | | | [URL:](page.cgi?id=fields.html#bug_file_loc "Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen.") |  | | [Keywords:](describekeywords.cgi "You can add keywords from a defined list to bugs, in order to easily identify and group them.") |  | |  | | | [Depends on:](page.cgi?id=fields.html#dependson "The bugs listed here must be resolved before this bug can be resolved.") |  | | [Blocks:](page.cgi?id=fields.html#blocked "This bug must be resolved before the bugs listed in this field can be resolved.") |  | |  | | Reported: | 2016-01-17 14:48 UTC by Nils | | --- | --- | | Modified: | 2016-02-10 11:22 UTC ([History](show_activity.cgi?id=358125)) | | CC List: | 5 users (show)  bhush94 kde mgraesslin plasma-bugs rdieter | |  | | | [See Also:](page.cgi?id=fields.html#see_also "This allows you to refer to bugs in other installations. You can enter a URL to a bug in the 'Add Bug URLs' field to note that that bug is related to this one. You can enter multiple URLs at once by separating them with whitespace. You should normally use this field to refer to bugs in other installations. For bugs in this installation, it is better to use the Depends on and Blocks fields.") |  | | [Latest Commit:](page.cgi?id=fields.html#cf_commitlink "A custom Free Text field in this installation of Bugzilla.") | http://commits.kde.org/kscreenlocker/fae65f1cdd6446042b31ccd0eafd7a4c0b6623e3 | | [Version Fixed In:](page.cgi?id=fields.html#cf_versionfixedin "A custom Free Text field in this installation of Bugzilla.") | 5.5.5 | | [Sentry Crash Report:](page.cgi?id=fields.html#cf_sentryurl "URL to Sentry Crash Report on crash-reports.kde.org") |  | |  | | |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| --- | | |

| | Attachments | | | --- | --- | | [**errors when logging for the first time**](attachment.cgi?id=96706 "View the content of the attachment") (9.71 KB, application/download)  [2016-01-18 08:33 UTC](#attach_96706 "Go to the comment associated with the attachment"), Nils | [Details](attachment.cgi?id=96706&action=edit) | | [**Hacking KDE session locker by closing the lid several times**](attachment.cgi?id=96755 "View the content of the attachment") (102.95 KB, text/plain)  [2016-01-20 18:49 UTC](#attach_96755 "Go to the comment associated with the attachment"), Nils | [Details](attachment.cgi?id=96755&action=edit) | | [View All](attachment.cgi?bugid=358125&action=viewall)  [Add an attachment](attachment.cgi?bugid=358125&action=enter) | |   | Note You need to [log in](show_bug.cgi?id=358125&GoAheadAndLogIn=1) before you can comment on or make changes to this bug. | | --- | |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |

| [Description](show_bug.cgi?id=358125#c0)  Nils    2016-01-17 14:48:03 UTC  ``` When I let my computer idle for some time, it automatically lock-up, and it used to be then impossible to use  my computer without knowing my password.  However, I have found a trick which allow me to open the session without typing any password.  With my laptop, I first connect my HDMI output to a second screen, then I am waiting for the idle lock-up to occurs. When it is really locked (not immediately after the lock-up appears but something like one minute after) I just have to close the lid and my session is instantaneously reopen without typing anything. Also, the panel disappear in the operation.    Reproducible: Always  Steps to Reproduce: 1. Use a laptop 2. Use a second screen through HDMI 3. Wait for an automatically closed session 4. Then close the lid  Actual Results:   The session is unlocked  Expected Results:   The session should still be locked  I am not sure which severity I should choose, and I don't know whether it is reproducible on another computer. However it seems really serious and not much reassuring. ```  [Comment 1](show_bug.cgi?id=358125#c1)  David Edmundson    2016-01-17 19:06:28 UTC  ``` Thanks  Under screen locking (system settings -> desktop behaviour -> screen locking) there is an option   "Require password after []" . During which if you wiggle the mouse everything unlocks without the password. Are you closing the laptop lid within that time? ```  [Comment 2](show_bug.cgi?id=358125#c2)  Nils    2016-01-18 08:32:37 UTC  ``` The time indicated is 5 secondes. I have been thinking that first, but when I try to wiggle the mouse, it does not unlock. Furthermore, the time during which I do nothing is greater than 5 minutes & 5 secondes (I have not updated these settings).  It is only by closing the lid that I can unlock my session.   Another thing really strange (but not sure whether related). When opening for the first time my session (following a reboot), I need to type several time my password (rightly). Each time it makes all the SDDM disappears and reboot it. Until... somehow... it finish by opening my session.  When I type the bad password it is flag as bad... but when right typed, it just seems to crash.   You will find some errors logs on the attached file. ```  [Comment 3](show_bug.cgi?id=358125#c3)  Nils    2016-01-18 08:33:32 UTC  ``` Created [attachment 96706](attachment.cgi?id=96706 "errors when logging for the first time") [[details]](attachment.cgi?id=96706&action=edit "errors when logging for the first time") errors when logging for the first time ```  [Comment 4](show_bug.cgi?id=358125#c4)  David Edmundson    2016-01-20 18:32:05 UTC  ``` Tested here, I can't reproduce.   That SDDM bug is tracked on another bug. ```  [Comment 5](show_bug.cgi?id=358125#c5)  Nils    2016-01-20 18:49:00 UTC  ``` Created [attachment 96755](attachment.cgi?id=96755 "Hacking KDE session locker by closing the lid several times") [[details]](attachment.cgi?id=96755&action=edit "Hacking KDE session locker by closing the lid several times") Hacking KDE session locker by closing the lid several times  So here the full log about my successful KDE hacking by closing the lid. :) ```  [Comment 6](show_bug.cgi?id=358125#c6)  Nils    2016-01-20 18:52:07 UTC  ``` @David Edmundson,   So I have tested it again on my updated computer and it has not been long before I have been successfully logged in as root on my computer without typing any password by just closing the lid several times.  The people outside looked me like I was crazy. :D  Cheers, ```  [Comment 7](show_bug.cgi?id=358125#c7)  Martin Flöser    2016-01-20 22:52:29 UTC  ``` Do you have configured your system with a user password? ```  [Comment 8](show_bug.cgi?id=358125#c8)  Nils    2016-01-20 22:59:56 UTC  ``` Yes for all the users. ```  [Comment 9](show_bug.cgi?id=358125#c9)  Nils    2016-02-03 13:23:28 UTC  ``` Well, I tried again with the last updates: [2016-01-22 15:36] [ALPM] upgraded linux (4.3.3-2 -> 4.3.3-3) [2016-01-22 15:36] [ALPM] upgraded plasma-framework (5.18.0-1 -> 5.18.0-3) [2016-01-27 13:51] [ALPM] upgraded kde-cli-tools (5.5.3-1 -> 5.5.4-1) [2016-01-27 13:51] [ALPM] upgraded kde-gtk-config (5.5.3-1 -> 5.5.4-1) [2016-01-27 13:51] [ALPM] upgraded kdecoration (5.5.3-1 -> 5.5.4-1) [2016-01-27 13:51] [ALPM] upgraded breeze (5.5.3-1 -> 5.5.4-1) [2016-01-27 13:51] [ALPM] upgraded libksysguard (5.5.3-1 -> 5.5.4-1) [2016-01-27 13:51] [ALPM] upgraded libkscreen (5.5.3-1 -> 5.5.4-1) [2016-01-27 13:51] [ALPM] upgraded plasma-workspace (5.5.3-2 -> 5.5.4-1) [2016-01-27 13:51] [ALPM] upgraded kdeplasma-addons (5.5.3-1 -> 5.5.4-1) [2016-01-27 13:51] [ALPM] upgraded kinfocenter (5.5.3-1 -> 5.5.4-1) [2016-01-27 13:51] [ALPM] upgraded kmenuedit (5.5.3-1 -> 5.5.4-1) [2016-01-27 13:51] [ALPM] upgraded kscreen (5.5.3-1 -> 5.5.4-1) [2016-01-27 13:51] [ALPM] upgraded ksshaskpass (5.5.3-1 -> 5.5.4-1) [2016-01-27 13:51] [ALPM] upgraded ksysguard (5.5.3-1 -> 5.5.4-1) [2016-01-27 13:51] [ALPM] upgraded kwrited (5.5.3-1 -> 5.5.4-1) [2016-01-27 13:51] [ALPM] upgraded plasma-desktop (5.5.3-2 -> 5.5.4-1) [2016-01-27 13:51] [ALPM] upgraded plasma-nm (5.5.3-1 -> 5.5.4-1) [2016-01-27 13:51] [ALPM] upgraded plasma-pa (5.5.3-1 -> 5.5.4-1) [2016-01-27 13:51] [ALPM] upgraded plasma-workspace-wallpapers (5.5.3-1 -> 5.5.4-1)  And I am still facing the issue, below the automated crash error reporter logs: Application: Plasma (plasmashell), signal: Segmentation fault Using host libthread_db library "/usr/lib/libthread_db.so.1". [Current thread is 1 (Thread 0x7fb8fffe2800 (LWP 1862))]  Thread 14 (Thread 0x7fb8e882c700 (LWP 1879)): #0  0x00007fb8fa61416d in read () from /usr/lib/libc.so.6 #1  0x00007fb8f75d5270 in ?? () from /usr/lib/libglib-2.0.so.0 #2  0x00007fb8f7591aa4 in g_main_context_check () from /usr/lib/libglib-2.0.so.0 #3  0x00007fb8f7591f60 in ?? () from /usr/lib/libglib-2.0.so.0 #4  0x00007fb8f75920cc in g_main_context_iteration () from /usr/lib/libglib-2.0.so.0 #5  0x00007fb8faf3b56b in QEventDispatcherGlib::processEvents(QFlags<QEventLoop::ProcessEventsFlag>) () from /usr/lib/libQt5Core.so.5 #6  0x00007fb8faee257a in QEventLoop::exec(QFlags<QEventLoop::ProcessEventsFlag>) () from /usr/lib/libQt5Core.so.5 #7  0x00007fb8facfebe4 in QThread::exec() () from /usr/lib/libQt5Core.so.5 #8  0x00007fb8fd617055 in ?? () from /usr/lib/libQt5Qml.so.5 #9  0x00007fb8fad03b8e in ?? () from /usr/lib/libQt5Core.so.5 #10 0x00007fb8f9e204a4 in start_thread () from /usr/lib/libpthread.so.0 #11 0x00007fb8fa62113d in clone () from /usr/lib/libc.so.6  Thread 13 (Thread 0x7fb8e0f7b700 (LWP 1884)): #0  0x00007fb8f75d6614 in g_mutex_unlock () from /usr/lib/libglib-2.0.so.0 #1  0x00007fb8f7591e6d in ?? () from /usr/lib/libglib-2.0.so.0 #2  0x00007fb8f75920cc in g_main_context_iteration () from /usr/lib/libglib-2.0.so.0 #3  0x00007fb8faf3b56b in QEventDispatcherGlib::processEvents(QFlags<QEventLoop::ProcessEventsFlag>) () from /usr/lib/libQt5Core.so.5 #4  0x00007fb8faee257a in QEventLoop::exec(QFlags<QEventLoop::ProcessEventsFlag>) () from /usr/lib/libQt5Core.so.5 #5  0x00007fb8facfebe4 in QThread::exec() () from /usr/lib/libQt5Core.so.5 #6  0x00007fb8fd617055 in ?? () from /usr/lib/libQt5Qml.so.5 #7  0x00007fb8fad03b8e in ?? () from /usr/lib/libQt5Core.so.5 #8  0x00007fb8f9e204a4 in start_thread () from /usr/lib/libpthread.so.0 #9  0x00007fb8fa62113d in clone () from /usr/lib/libc.so.6  Thread 12 (Thread 0x7fb8da495700 (LWP 1893)): #0  0x00007fb8f75d65f9 in g_mutex_lock () from /usr/lib/libglib-2.0.so.0 #1  0x00007fb8f7591b46 in g_main_context_dispatch () from /usr/lib/libglib-2.0.so.0 #2  0x00007fb8f7592020 in ?? () from /usr/lib/libglib-2.0.so.0 #3  0x00007fb8f75920cc in g_main_context_iteration () from /usr/lib/libglib-2.0.so.0 #4  0x00007fb8faf3b56b in QEventDispatcherGlib::processEvents(QFlags<QEventLoop::ProcessEventsFlag>) () from /usr/lib/libQt5Core.so.5 #5  0x00007fb8faee257a in QEventLoop::exec(QFlags<QEventLoop::ProcessEventsFlag>) () from /usr/lib/libQt5Core.so.5 #6  0x00007fb8facfebe4 in QThread::exec() () from /usr/lib/libQt5Core.so.5 #7  0x00007fb8fd617055 in ?? () from /usr/lib/libQt5Qml.so.5 #8  0x00007fb8fad03b8e in ?? () from /usr/lib/libQt5Core.so.5 #9  0x00007fb8f9e204a4 in start_thread () from /usr/lib/libpthread.so.0 #10 0x00007fb8fa62113d in clone () from /usr/lib/libc.so.6  Thread 11 (Thread 0x7fb8d8b7f700 (LWP 1902)): #0  0x00007fb8f9e2607f in pthread_cond_wait@@GLIBC_2.3.2 () from /usr/lib/libpthread.so.0 #1  0x00007fb8ffa3f934 in ?? () from /usr/lib/libQt5Script.so.5 #2  0x00007fb8ffa3f979 in ?? () from /usr/lib/libQt5Script.so.5 #3  0x00007fb8f9e204a4 in start_thread () from /usr/lib/libpthread.so.0 #4  0x00007fb8fa62113d in clone () from /usr/lib/libc.so.6  Thread 10 (Thread 0x7fb8d2161700 (LWP 1905)): #0  0x00007fb8f75d65f9 in g_mutex_lock () from /usr/lib/libglib-2.0.so.0 #1  0x00007fb8f7591b46 in g_main_context_dispatch () from /usr/lib/libglib-2.0.so.0 #2  0x00007fb8f7592020 in ?? () from /usr/lib/libglib-2.0.so.0 #3  0x00007fb8f75920cc in g_main_context_iteration () from /usr/lib/libglib-2.0.so.0 #4  0x00007fb8faf3b56b in QEventDispatcherGlib::processEvents(QFlags<QEventLoop::ProcessEventsFlag>) () from /usr/lib/libQt5Core.so.5 #5  0x00007fb8faee257a in QEventLoop::exec(QFlags<QEventLoop::ProcessEventsFlag>) () from /usr/lib/libQt5Core.so.5 #6  0x00007fb8facfebe4 in QThread::exec() () from /usr/lib/libQt5Core.so.5 #7  0x00007fb8fdfc7136 in ?? () from /usr/lib/libQt5Quick.so.5 #8  0x00007fb8fad03b8e in ?? () from /usr/lib/libQt5Core.so.5 #9  0x00007fb8f9e204a4 in start_thread () from /usr/lib/libpthread.so.0 #10 0x00007fb8fa62113d in clone () from /usr/lib/libc.so.6  Thread 9 (Thread 0x7fb80f7fd700 (LWP 5933)): #0  0x00007fb8f9e2607f in pthread_cond_wait@@GLIBC_2.3.2 () from /usr/lib/libpthread.so.0 #1  0x00007fb8fad04e2b in QWaitCondition::wait(QMutex*, unsigned long) () from /usr/lib/libQt5Core.so.5 #2  0x00007fb844baa37f in ThreadWeaver::Weaver::takeFirstAvailableJobOrSuspendOrWait(ThreadWeaver::Thread*, bool, bool, bool) () from /usr/lib/libKF5ThreadWeaver.so.5 #3  0x00007fb844baeb28 in ?? () from /usr/lib/libKF5ThreadWeaver.so.5 #4  0x00007fb844ba9433 in ThreadWeaver::Weaver::applyForWork(ThreadWeaver::Thread*, bool) () from /usr/lib/libKF5ThreadWeaver.so.5 #5  0x00007fb844baeb82 in ?? () from /usr/lib/libKF5ThreadWeaver.so.5 #6  0x00007fb844ba9433 in ThreadWeaver::Weaver::applyForWork(ThreadWeaver::Thread*, bool) () from /usr/lib/libKF5ThreadWeaver.so.5 #7  0x00007fb844baeb82 in ?? () from /usr/lib/libKF5ThreadWeaver.so.5 #8  0x00007fb844ba9433 in ThreadWeaver::Weaver::applyForWork(ThreadWeaver::Thread*, bool) () from /usr/lib/libKF5ThreadWeaver.so.5 #9  0x00007fb844baeb82 in ?? () from /usr/lib/libKF5ThreadWeaver.so.5 #10 0x00007fb844ba9433 in ThreadWeaver::Weaver::applyForWork(ThreadWeaver::Thread*, bool) () from /usr/lib/libKF5ThreadWeaver.so.5 #11 0x00007fb844baeb82 in ?? () from /usr/lib/libKF5ThreadWeaver.so.5 #12 0x00007fb844ba9433 in ThreadWeaver::Weaver::applyForWork(ThreadWeaver::Thread*, bool) () from /usr/lib/libKF5ThreadWeaver.so.5 #13 0x00007fb844bac3c3 in ThreadWeaver::Thread::run() () from /usr/lib/libKF5ThreadWeaver.so.5 #14 0x00007fb8fad03b8e in ?? () from /usr/lib/libQt5Core.so.5 #15 0x00007fb8f9e204a4 in start_thread () from /usr/lib/libpthread.so.0 #16 0x00007fb8fa62113d in clone () from /usr/lib/libc.so.6  Thread 8 (Thread 0x7fb8194b1700 (LWP 5934)): #0  0x00007fb8f9e2607f in pthread_cond_wait@@GLIBC_2.3.2 () from /usr/lib/libpthread.so.0 #1  0x00007fb8fad04e2b in QWaitCondition::wait(QMutex*, unsigned long) () from /usr/lib/libQt5Core.so.5 #2  0x00007fb844baa37f in ThreadWeaver::Weaver::takeFirstAvailableJobOrSuspendOrWait(ThreadWeaver::Thread*, bool, bool, bool) () from /usr/lib/libKF5ThreadWeaver.so.5 #3  0x00007fb844baeb28 in ?? () from /usr/lib/libKF5ThreadWeaver.so.5 #4  0x00007fb844ba9433 in ThreadWeaver::Weaver::applyForWork(ThreadWeaver::Thread*, bool) () from /usr/lib/libKF5ThreadWeaver.so.5 #5  0x00007fb844baeb82 in ?? () from /usr/lib/libKF5ThreadWeaver.so.5 #6  0x00007fb844ba9433 in ThreadWeaver::Weaver::applyForWork(ThreadWeaver::Thread*, bool) () from /usr/lib/libKF5ThreadWeaver.so.5 #7  0x00007fb844baeb82 in ?? () from /usr/lib/libKF5ThreadWeaver.so.5 #8  0x00007fb844ba9433 in ThreadWeaver::Weaver::applyForWork(ThreadWeaver::Thread*, bool) () from /usr/lib/libKF5ThreadWeaver.so.5 #9  0x00007fb844baeb82 in ?? () from /usr/lib/libKF5ThreadWeaver.so.5 #10 0x00007fb844ba9433 in ThreadWeaver::Weaver::applyForWork(ThreadWeaver::Thread*, bool) () from /usr/lib/libKF5ThreadWeaver.so.5 #11 0x00007fb844baeb82 in ?? () from /usr/lib/libKF5ThreadWeaver.so.5 #12 0x00007fb844ba9433 in ThreadWeaver::Weaver::applyForWork(ThreadWeaver::Thread*, bool) () from /usr/lib/libKF5ThreadWeaver.so.5 #13 0x00007fb844bac3c3 in ThreadWeaver::Thread::run() () from /usr/lib/libKF5ThreadWeaver.so.5 #14 0x00007fb8fad03b8e in ?? () from /usr/lib/libQt5Core.so.5 #15 0x00007fb8f9e204a4 in start_thread () from /usr/lib/libpthread.so.0 #16 0x00007fb8fa62113d in clone () from /usr/lib/libc.so.6  Thread 7 (Thread 0x7fb80fffe700 (LWP 5935)): #0  0x00007fb8f9e2607f in pthread_cond_wait@@GLIBC_2.3.2 () from /usr/lib/libpthread.so.0 #1  0x00007fb8fad04e2b in QWaitCondition::wait(QMutex*, unsigned long) () from /usr/lib/libQt5Core.so.5 #2  0x00007fb844baa37f in ThreadWeaver::Weaver::takeFirstAvailableJobOrSuspendOrWait(ThreadWeaver::Thread*, bool, bool, bool) () from /usr/lib/libKF5ThreadWeaver.so.5 #3  0x00007fb844baeb28 in ?? () from /usr/lib/libKF5ThreadWeaver.so.5 #4  0x00007fb844ba9433 in ThreadWeaver::Weaver::applyForWork(ThreadWeaver::Thread*, bool) () from /usr/lib/libKF5ThreadWeaver.so.5 #5  0x00007fb844baeb82 in ?? () from /usr/lib/libKF5ThreadWeaver.so.5 #6  0x00007fb844ba9433 in ThreadWeaver::Weaver::applyForWork(ThreadWeaver::Thread*, bool) () from /usr/lib/libKF5ThreadWeaver.so.5 #7  0x00007fb844bac3c3 in ThreadWeaver::Thread::run() () from /usr/lib/libKF5ThreadWeaver.so.5 #8  0x00007fb8fad03b8e in ?? () from /usr/lib/libQt5Core.so.5 #9  0x00007fb8f9e204a4 in start_thread () from /usr/lib/libpthread.so.0 #10 0x00007fb8fa62113d in clone () from /usr/lib/libc.so.6  Thread 6 (Thread 0x7fb81b0fb700 (LWP 5936)): #0  0x00007fb8f9e2607f in pthread_cond_wait@@GLIBC_2.3.2 () from /usr/lib/libpthread.so.0 #1  0x00007fb8fad04e2b in QWaitCondition::wait(QMutex*, unsigned long) () from /usr/lib/libQt5Core.so.5 #2  0x00007fb844baa37f in ThreadWeaver::Weaver::takeFirstAvailableJobOrSuspendOrWait(ThreadWeaver::Thread*, bool, bool, bool) () from /usr/lib/libKF5ThreadWeaver.so.5 #3  0x00007fb844baeb28 in ?? () from /usr/lib/libKF5ThreadWeaver.so.5 #4  0x00007fb844ba9433 in ThreadWeaver::Weaver::applyForWork(ThreadWeaver::Thread*, bool) () from /usr/lib/libKF5ThreadWeaver.so.5 #5  0x00007fb844baeb82 in ?? () from /usr/lib/libKF5ThreadWeaver.so.5 #6  0x00007fb844ba9433 in ThreadWeaver::Weaver::applyForWork(ThreadWeaver::Thread*, bool) () from /usr/lib/libKF5ThreadWeaver.so.5 #7  0x00007fb844baeb82 in ?? () from /usr/lib/libKF5ThreadWeaver.so.5 #8  0x00007fb844ba9433 in ThreadWeaver::Weaver::applyForWork(ThreadWeaver::Thread*, bool) () from /usr/lib/libKF5ThreadWeaver.so.5 #9  0x00007fb844baeb82 in ?? () from /usr/lib/libKF5ThreadWeaver.so.5 #10 0x00007fb844ba9433 in ThreadWeaver::Weaver::applyForWork(ThreadWeaver::Thread*, bool) () from /usr/lib/libKF5ThreadWeaver.so.5 #11 0x00007fb844bac3c3 in ThreadWeaver::Thread::run() () from /usr/lib/libKF5ThreadWeaver.so.5 #12 0x00007fb8fad03b8e in ?? () from /usr/lib/libQt5Core.so.5 #13 0x00007fb8f9e204a4 in start_thread () from /usr/lib/libpthread.so.0 #14 0x00007fb8fa62113d in clone () from /usr/lib/libc.so.6  Thread 5 (Thread 0x7fb822fab700 (LWP 5937)): #0  0x00007fb8f9e2607f in pthread_cond_wait@@GLIBC_2.3.2 () from /usr/lib/libpthread.so.0 #1  0x00007fb8fad04e2b in QWaitCondition::wait(QMutex*, unsigned long) () from /usr/lib/libQt5Core.so.5 #2  0x00007fb844baa37f in ThreadWeaver::Weaver::takeFirstAvailableJobOrSuspendOrWait(ThreadWeaver::Thread*, bool, bool, bool) () from /usr/lib/libKF5ThreadWeaver.so.5 #3  0x00007fb844baeb28 in ?? () from /usr/lib/libKF5ThreadWeaver.so.5 #4  0x00007fb844ba9433 in ThreadWeaver::Weaver::applyForWork(ThreadWeaver::Thread*, bool) () from /usr/lib/libKF5ThreadWeaver.so.5 #5  0x00007fb844baeb82 in ?? () from /usr/lib/libKF5ThreadWeaver.so.5 #6  0x00007fb844ba9433 in ThreadWeaver::Weaver::applyForWork(ThreadWeaver::Thread*, bool) () from /usr/lib/libKF5ThreadWeaver.so.5 #7  0x00007fb844baeb82 in ?? () from /usr/lib/libKF5ThreadWeaver.so.5 #8  0x00007fb844ba9433 in ThreadWeaver::Weaver::applyForWork(ThreadWeaver::Thread*, bool) () from /usr/lib/libKF5ThreadWeaver.so.5 #9  0x00007fb844baeb82 in ?? () from /usr/lib/libKF5ThreadWeaver.so.5 #10 0x00007fb844ba9433 in ThreadWeaver::Weaver::applyForWork(ThreadWeaver::Thread*, bool) () from /usr/lib/libKF5ThreadWeaver.so.5 #11 0x00007fb844baeb82 in ?? () from /usr/lib/libKF5ThreadWeaver.so.5 #12 0x00007fb844ba9433 in ThreadWeaver::Weaver::applyForWork(ThreadWeaver::Thread*, bool) () from /usr/lib/libKF5ThreadWeaver.so.5 #13 0x00007fb844baeb82 in ?? () from /usr/lib/libKF5ThreadWeaver.so.5 #14 0x00007fb844ba9433 in ThreadWeaver::Weaver::applyForWork(ThreadWeaver::Thread*, bool) () from /usr/lib/libKF5ThreadWeaver.so.5 #15 0x00007fb844baeb82 in ?? () from /usr/lib/libKF5ThreadWeaver.so.5 #16 0x00007fb844ba9433 in ThreadWeaver::Weaver::applyForWork(ThreadWeaver::Thread*, bool) () from /usr/lib/libKF5ThreadWeaver.so.5 #17 0x00007fb844bac3c3 in ThreadWeaver::Thread::run() () from /usr/lib/libKF5ThreadWeaver.so.5 #18 0x00007fb8fad03b8e in ?? () from /usr/lib/libQt5Core.so.5 #19 0x00007fb8f9e204a4 in start_thread () from /usr/lib/libpthread.so.0 #20 0x00007fb8fa62113d in clone () from /usr/lib/libc.so.6  Thread 4 (Thread 0x7fb8227aa700 (LWP 5938)): #0  0x00007fb8f9e2607f in pthread_cond_wait@@GLIBC_2.3.2 () from /usr/lib/libpthread.so.0 #1  0x00007fb8fad04e2b in QWaitCondition::wait(QMutex*, unsigned long) () from /usr/lib/libQt5Core.so.5 #2  0x00007fb844baa37f in ThreadWeaver::Weaver::takeFirstAvailableJobOrSuspendOrWait(ThreadWeaver::Thread*, bool, bool, bool) () from /usr/lib/libKF5ThreadWeaver.so.5 #3  0x00007fb844baeb28 in ?? () from /usr/lib/libKF5ThreadWeaver.so.5 #4  0x00007fb844ba9433 in ThreadWeaver::Weaver::applyForWork(ThreadWeaver::Thread*, bool) () from /usr/lib/libKF5ThreadWeaver.so.5 #5  0x00007fb844baeb82 in ?? () from /usr/lib/libKF5ThreadWeaver.so.5 #6  0x00007fb844ba9433 in ThreadWeaver::Weaver::applyForWork(ThreadWeaver::Thread*, bool) () from /usr/lib/libKF5ThreadWeaver.so.5 #7  0x00007fb844baeb82 in ?? () from /usr/lib/libKF5ThreadWeaver.so.5 #8  0x00007fb844ba9433 in ThreadWeaver::Weaver::applyForWork(ThreadWeaver::Thread*, bool) () from /usr/lib/libKF5ThreadWeaver.so.5 #9  0x00007fb844baeb82 in ?? () from /usr/lib/libKF5ThreadWeaver.so.5 #10 0x00007fb844ba9433 in ThreadWeaver::Weaver::applyForWork(ThreadWeaver::Thread*, bool) () from /usr/lib/libKF5ThreadWeaver.so.5 #11 0x00007fb844baeb82 in ?? () from /usr/lib/libKF5ThreadWeaver.so.5 #12 0x00007fb844ba9433 in ThreadWeaver::Weaver::applyForWork(ThreadWeaver::Thread*, bool) () from /usr/lib/libKF5ThreadWeaver.so.5 #13 0x00007fb844bac3c3 in ThreadWeaver::Thread::run() () from /usr/lib/libKF5ThreadWeaver.so.5 #14 0x00007fb8fad03b8e in ?? () from /usr/lib/libQt5Core.so.5 #15 0x00007fb8f9e204a4 in start_thread () from /usr/lib/libpthread.so.0 #16 0x00007fb8fa62113d in clone () from /usr/lib/libc.so.6  Thread 3 (Thread 0x7fb821fa9700 (LWP 5939)): #0  0x00007fb8f9e2607f in pthread_cond_wait@@GLIBC_2.3.2 () from /usr/lib/libpthread.so.0 #1  0x00007fb8fad04e2b in QWaitCondition::wait(QMutex*, unsigned long) () from /usr/lib/libQt5Core.so.5 #2  0x00007fb844baa37f in ThreadWeaver::Weaver::takeFirstAvailableJobOrSuspendOrWait(ThreadWeaver::Thread*, bool, bool, bool) () from /usr/lib/libKF5ThreadWeaver.so.5 #3  0x00007fb844baeb28 in ?? () from /usr/lib/libKF5ThreadWeaver.so.5 #4  0x00007fb844ba9433 in ThreadWeaver::Weaver::applyForWork(ThreadWeaver::Thread*, bool) () from /usr/lib/libKF5ThreadWeaver.so.5 #5  0x00007fb844baeb82 in ?? () from /usr/lib/libKF5ThreadWeaver.so.5 #6  0x00007fb844ba9433 in ThreadWeaver::Weaver::applyForWork(ThreadWeaver::Thread*, bool) () from /usr/lib/libKF5ThreadWeaver.so.5 #7  0x00007fb844baeb82 in ?? () from /usr/lib/libKF5ThreadWeaver.so.5 #8  0x00007fb844ba9433 in ThreadWeaver::Weaver::applyForWork(ThreadWeaver::Thread*, bool) () from /usr/lib/libKF5ThreadWeaver.so.5 #9  0x00007fb844bac3c3 in ThreadWeaver::Thread::run() () from /usr/lib/libKF5ThreadWeaver.so.5 #10 0x00007fb8fad03b8e in ?? () from /usr/lib/libQt5Core.so.5 #11 0x00007fb8f9e204a4 in start_thread () from /usr/lib/libpthread.so.0 #12 0x00007fb8fa62113d in clone () from /usr/lib/libc.so.6  Thread 2 (Thread 0x7fb8217a8700 (LWP 5940)): #0  0x00007fb8f9e2607f in pthread_cond_wait@@GLIBC_2.3.2 () from /usr/lib/libpthread.so.0 #1  0x00007fb8fad04e2b in QWaitCondition::wait(QMutex*, unsigned long) () from /usr/lib/libQt5Core.so.5 #2  0x00007fb844baa37f in ThreadWeaver::Weaver::takeFirstAvailableJobOrSuspendOrWait(ThreadWeaver::Thread*, bool, bool, bool) () from /usr/lib/libKF5ThreadWeaver.so.5 #3  0x00007fb844baeb28 in ?? () from /usr/lib/libKF5ThreadWeaver.so.5 #4  0x00007fb844ba9433 in ThreadWeaver::Weaver::applyForWork(ThreadWeaver::Thread*, bool) () from /usr/lib/libKF5ThreadWeaver.so.5 #5  0x00007fb844baeb82 in ?? () from /usr/lib/libKF5ThreadWeaver.so.5 #6  0x00007fb844ba9433 in ThreadWeaver::Weaver::applyForWork(ThreadWeaver::Thread*, bool) () from /usr/lib/libKF5ThreadWeaver.so.5 #7  0x00007fb844bac3c3 in ThreadWeaver::Thread::run() () from /usr/lib/libKF5ThreadWeaver.so.5 #8  0x00007fb8fad03b8e in ?? () from /usr/lib/libQt5Core.so.5 #9  0x00007fb8f9e204a4 in start_thread () from /usr/lib/libpthread.so.0 #10 0x00007fb8fa62113d in clone () from /usr/lib/libc.so.6  Thread 1 (Thread 0x7fb8fffe2800 (LWP 1862)): [KCrash Handler] #5  0x00007fb8fe4e83f0 in Plasma::Applet::actions() const () from /usr/lib/libKF5Plasma.so.5 #6  0x0000000000456289 in ShellCorona::addOutput(QSharedPointer<KScreen::Output> const&) () #7  0x000000000045640f in ShellCorona::outputEnabledChanged() () #8  0x00007fb8faf131a7 in QMetaObject::activate(QObject*, int, int, void**) () from /usr/lib/libQt5Core.so.5 #9  0x00007fb8ff193717 in KScreen::Output::apply(QSharedPointer<KScreen::Output> const&) () from /usr/lib/libKF5Screen.so.6 #10 0x00007fb8ff17ff9e in KScreen::Config::apply(QSharedPointer<KScreen::Config> const&) () from /usr/lib/libKF5Screen.so.6 #11 0x00007fb8ff186219 in KScreen::ConfigMonitor::Private::updateConfigs(QSharedPointer<KScreen::Config> const&) () from /usr/lib/libKF5Screen.so.6 #12 0x00007fb8ff188509 in KScreen::ConfigMonitor::Private::edidReady(QDBusPendingCallWatcher*) () from /usr/lib/libKF5Screen.so.6 #13 0x00007fb8faf131a7 in QMetaObject::activate(QObject*, int, int, void**) () from /usr/lib/libQt5Core.so.5 #14 0x00007fb90016a11f in QDBusPendingCallWatcher::finished(QDBusPendingCallWatcher*) () from /usr/lib/libQt5DBus.so.5 #15 0x00007fb90016b7f5 in ?? () from /usr/lib/libQt5DBus.so.5 #16 0x00007fb8faf141e1 in QObject::event(QEvent*) () from /usr/lib/libQt5Core.so.5 #17 0x00007fb8fb9e89ac in QApplicationPrivate::notify_helper(QObject*, QEvent*) () from /usr/lib/libQt5Widgets.so.5 #18 0x00007fb8fb9ede86 in QApplication::notify(QObject*, QEvent*) () from /usr/lib/libQt5Widgets.so.5 #19 0x00007fb8faee4bab in QCoreApplication::notifyInternal(QObject*, QEvent*) () from /usr/lib/libQt5Core.so.5 #20 0x00007fb8faee6fa6 in QCoreApplicationPrivate::sendPostedEvents(QObject*, int, QThreadData*) () from /usr/lib/libQt5Core.so.5 #21 0x00007fb8faf3b143 in ?? () from /usr/lib/libQt5Core.so.5 #22 0x00007fb8f7591dc7 in g_main_context_dispatch () from /usr/lib/libglib-2.0.so.0 #23 0x00007fb8f7592020 in ?? () from /usr/lib/libglib-2.0.so.0 #24 0x00007fb8f75920cc in g_main_context_iteration () from /usr/lib/libglib-2.0.so.0 #25 0x00007fb8faf3b54f in QEventDispatcherGlib::processEvents(QFlags<QEventLoop::ProcessEventsFlag>) () from /usr/lib/libQt5Core.so.5 #26 0x00007fb8faee257a in QEventLoop::exec(QFlags<QEventLoop::ProcessEventsFlag>) () from /usr/lib/libQt5Core.so.5 #27 0x00007fb8faeea53c in QCoreApplication::exec() () from /usr/lib/libQt5Core.so.5 #28 0x000000000043138a in main ()  I think I have closed and reopened again the lid something like 30 times before the session has been unlocked. ```  [Comment 10](show_bug.cgi?id=358125#c10)  Nils    2016-02-03 13:25:51 UTC  ``` PS: While unlocking through this way, the panel disappears from my desktop environment, while it was configured for the user (which, like I said, has a password configured & required in order to login). ```  [Comment 11](show_bug.cgi?id=358125#c11)  Martin Flöser    2016-02-09 15:33:57 UTC  ``` Git commit fae65f1cdd6446042b31ccd0eafd7a4c0b6623e3 by Martin Gräßlin. Committed on 09/02/2016 at 14:41. Pushed by graesslin into branch 'Plasma/5.5'.  [greeter] Dont quit when last window closes  Qt allows to have no screens. If all XRandR screens are disconnected there are also no QScreens. This is from an X11 perspective wrong, but we have to deal with it. No QScreens means that all views are destroyed and no new ones are created. Thus all windows close and the greeter exited successfully which in turn unlocked the screen.  This change ensures that the greeter doesn't exit when all windows close.  Funnily this was not a problem with the well known issue of Qt crashing when all screens are disconnected. The lock screen handles crashes gracefully and just restarts or more likely Qt also crashes the application using KSld and thus taking down the complete session. FIXED-IN: 5.5.5  M  +1    -0    greeter/main.cpp  <http://commits.kde.org/kscreenlocker/fae65f1cdd6446042b31ccd0eafd7a4c0b6623e3> ```  [Comment 12](show_bug.cgi?id=358125#c12)  Martin Flöser    2016-02-09 15:38:36 UTC  ``` Git commit 5651785ad6663e2ef4d12a94b0b5f1cb7d40a9a1 by Martin Gräßlin. Committed on 09/02/2016 at 15:37. Pushed by graesslin into branch 'Plasma/5.0'.  [greeter] Dont quit when last window closes  Qt allows to have no screens. If all XRandR screens are disconnected there are also no QScreens. This is from an X11 perspective wrong, but we have to deal with it. No QScreens means that all views are destroyed and no new ones are created. Thus all windows close and the greeter exited successfully which in turn unlocked the screen.  This change ensures that the greeter doesn't exit when all windows close.  Funnily this was not a problem with the well known issue of Qt crashing when all screens are disconnected. The lock screen handles crashes gracefully and just restarts or more likely Qt also crashes the application using KSld and thus taking down the complete session.  M  +1    -0    ksmserver/screenlocker/greeter/main.cpp  <http://commits.kde.org/plasma-workspace/5651785ad6663e2ef4d12a94b0b5f1cb7d40a9a1> ```  [Comment 13](show_bug.cgi?id=358125#c13)  Martin Flöser    2016-02-09 15:39:39 UTC  ``` Git commit 1fe565e5dae31e57d81556b07e7459be14c5d834 by Martin Gräßlin. Committed on 09/02/2016 at 15:39. Pushed by graesslin into branch 'Plasma/5.1'.  [greeter] Dont quit when last window closes  Qt allows to have no screens. If all XRandR screens are disconnected there are also no QScreens. This is from an X11 perspective wrong, but we have to deal with it. No QScreens means that all views are destroyed and no new ones are created. Thus all windows close and the greeter exited successfully which in turn unlocked the screen.  This change ensures that the greeter doesn't exit when all windows close.  Funnily this was not a problem with the well known issue of Qt crashing when all screens are disconnected. The lock screen handles crashes gracefully and just restarts or more likely Qt also crashes the application using KSld and thus taking down the complete session.  M  +1    -0    ksmserver/screenlocker/greeter/main.cpp  <http://commits.kde.org/plasma-workspace/1fe565e5dae31e57d81556b07e7459be14c5d834> ```  [Comment 14](show_bug.cgi?id=358125#c14)  Martin Flöser    2016-02-09 15:40:22 UTC  ``` Git commit e1036973552a8964dffcbca0743eb1accc14bc56 by Martin Gräßlin. Committed on 09/02/2016 at 15:40. Pushed by graesslin into branch 'Plasma/5.2'.  [greeter] Dont quit when last window closes  Qt allows to have no screens. If all XRandR screens are disconnected there are also no QScreens. This is from an X11 perspective wrong, but we have to deal with it. No QScreens means that all views are destroyed and no new ones are created. Thus all windows close and the greeter exited successfully which in turn unlocked the screen.  This change ensures that the greeter doesn't exit when all windows close.  Funnily this was not a problem with the well known issue of Qt crashing when all screens are disconnected. The lock screen handles crashes gracefully and just restarts or more likely Qt also crashes the application using KSld and thus taking down the complete session.  M  +1    -0    ksmserver/screenlocker/greeter/main.cpp  <http://commits.kde.org/plasma-workspace/e1036973552a8964dffcbca0743eb1accc14bc56> ```  [Comment 15](show_bug.cgi?id=358125#c15)  Martin Flöser    2016-02-09 15:41:02 UTC  ``` Git commit de6e19fd8c30166bdbc1333dcd5ef2278f570fa2 by Martin Gräßlin. Committed on 09/02/2016 at 15:40. Pushed by graesslin into branch 'Plasma/5.3'.  [greeter] Dont quit when last window closes  Qt allows to have no screens. If all XRandR screens are disconnected there are also no QScreens. This is from an X11 perspective wrong, but we have to deal with it. No QScreens means that all views are destroyed and no new ones are created. Thus all windows close and the greeter exited successfully which in turn unlocked the screen.  This change ensures that the greeter doesn't exit when all windows close.  Funnily this was not a problem with the well known issue of Qt crashing when all screens are disconnected. The lock screen handles crashes gracefully and just restarts or more likely Qt also crashes the application using KSld and thus taking down the complete session.  M  +1    -0    ksmserver/screenlocker/greeter/main.cpp  <http://commits.kde.org/plasma-workspace/de6e19fd8c30166bdbc1333dcd5ef2278f570fa2> ```  [Comment 16](show_bug.cgi?id=358125#c16)  Martin Flöser    2016-02-09 15:41:49 UTC  ``` Git commit 23a9ed7ba9995570227dbcd69c23f009de7dde49 by Martin Gräßlin. Committed on 09/02/2016 at 15:41. Pushed by graesslin into branch 'Plasma/5.4'.  [greeter] Dont quit when last window closes  Qt allows to have no screens. If all XRandR screens are disconnected there are also no QScreens. This is from an X11 perspective wrong, but we have to deal with it. No QScreens means that all views are destroyed and no new ones are created. Thus all windows close and the greeter exited successfully which in turn unlocked the screen.  This change ensures that the greeter doesn't exit when all windows close.  Funnily this was not a problem with the well known issue of Qt crashing when all screens are disconnected. The lock screen handles crashes gracefully and just restarts or more likely Qt also crashes the application using KSld and thus taking down the complete session.  M  +1    -0    ksmserver/screenlocker/greeter/main.cpp  <http://commits.kde.org/plasma-workspace/23a9ed7ba9995570227dbcd69c23f009de7dde49> ```  [Comment 17](show_bug.cgi?id=358125#c17)  Nils    2016-02-09 16:12:40 UTC  ``` Wow, thank you very much! I was afraid to see this bug never solved as it seem that no one was facing it/able to reproduce it.  It is the second bug I have reported fixed this week, great job to you. :) ``` |  |
| --- | --- |

---

* [Format For Printing](show_bug.cgi?format=multiple&id=358125)
* - [XML](show_bug.cgi?ctype=xml&id=358125)
* - [Clone This Bug](enter_bug.cgi?cloned_bug_id=358125)
* - Top of page

* + [Home](./)
  + | [New](enter_bug.cgi)
  + | [Browse](describecomponents.cgi)
  + | [Search](query.cgi)
  + |

    [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")
  + | [Reports](report.cgi)
  + |
    [Requests](request.cgi)
  + |
    [Help](https://bugzilla.readthedocs.org/en/5.0/using/understanding.html)
  + |
    [New Account](createaccount.cgi)
  + |
    [Log In](show_bug.cgi?id=358125&GoAheadAndLogIn=1)

    [x]
  + |
    [Forgot Password](show_bug.cgi?id=358125&GoAheadAndLogIn=1#forgot)
    Login:

    [x]



=== Content from www.kde.org_517589e6_20250124_214527.html ===
KDE Project Security Advisory
=============================
Title: plasma-workspace, kscreenlocker: Lock screen bypass
Risk Rating: Low
CVE: CVE-2016-2312
Platforms: X11
Versions: plasma-workspace < 5.5.0, kscreenlocker < 5.5.5
Author: Martin Gräßlin mgraesslin@kde.org
Date: 09 February 2016
Overview
========
Turning all screens off while the lock screen is shown can result in the screen being unlocked when turning a screen on again.
Impact
======
An unauthorized user might gain access to a locked system. Physical access to the hardware is required.
Workaround
==========
None
Solution
========
For plasma-workspace apply the following patches:
5.0 branch: http://commits.kde.org/plasma-workspace/5651785ad6663e2ef4d12a94b0b5f1cb7d40a9a1
5.1 branch: http://commits.kde.org/plasma-workspace/1fe565e5dae31e57d81556b07e7459be14c5d834
5.2 branch: http://commits.kde.org/plasma-workspace/e1036973552a8964dffcbca0743eb1accc14bc56
5.3 branch: http://commits.kde.org/plasma-workspace/de6e19fd8c30166bdbc1333dcd5ef2278f570fa2
5.4 branch: http://commits.kde.org/plasma-workspace/23a9ed7ba9995570227dbcd69c23f009de7dde49
For kscreenlocker upgrade to Plasma 5.5.5 (after 1 March 2016) or apply the following patch:
http://commits.kde.org/kscreenlocker/fae65f1cdd6446042b31ccd0eafd7a4c0b6623e3
References
==========
https://bugs.kde.org/show\_bug.cgi?id=358125
https://bugzilla.opensuse.org/show\_bug.cgi?id=964548
Credits
=======
Thanks to Dirk Weber for finding the issue, the openSUSE community for helping investigating and Martin Gräßlin for fixing the issue.


=== Content from idp-portal.suse.com_6b95d262_20250126_034417.html ===

## UCS

# Welcome to Univention Corporate Server

## JavaScript required

A browser with JavaScript enabled is required in order to use this service.

When using Internet Explorer, please check your security settings and add this address to your trusted sites.



=== Content from bugzilla.opensuse.org_70778b02_20250124_214525.html ===


| Bugzilla – Bug 964548 | VUL-1: KDE lockscreen bypass by switching display off and on | Last modified: 2016-05-03 19:01:15 UTC |
| --- | --- | --- |

|  |
| --- |

* [Home](./)
* | [New](enter_bug.cgi?classification=openSUSE)
* | [Browse](describecomponents.cgi)
* | [Search](query.cgi)
* |

  [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")
* | [Reports](report.cgi)
* |
  [Requests](request.cgi)
* |
  [openSUSE\_IDP Log In](/saml2_login.cgi?idp=openSUSE_IDP&target=show_bug.cgi%3Fid%3D964548)
* |
  [Forgot Password](https://idp-portal.suse.com/univention/self-service/#page=passwordreset)

[**Bug 964548**](show_bug.cgi?id=964548)
(CVE-2016-2312)
- VUL-1: KDE lockscreen bypass by switching display off and on

[Summary:](page.cgi?id=glossary.html#short_desc "The bug summary is a short sentence which succinctly describes what the bug is about.")
VUL-1: KDE lockscreen bypass by switching display off and on

| | [Status](page.cgi?id=status_resolution_matrix.html): | RESOLVED FIXED | | --- | --- | |  | | | [Alias:](page.cgi?id=glossary.html#alias "A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla.") | CVE-2016-2312 | |  | | | [Product:](describecomponents.cgi "Bugs are categorised into Products and Components. Select a Classification to narrow down this list.") | openSUSE Distribution | | [Classification:](page.cgi?id=glossary.html#classification "Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation.") | openSUSE | | [Component:](describecomponents.cgi?product=openSUSE Distribution "Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list.") | KDE Workspace (Plasma) ([show other bugs](buglist.cgi?component=KDE%20Workspace%20(Plasma)&product=openSUSE%20Distribution&bug_status=__open__)) | | [Version:](page.cgi?id=glossary.html#version "The version field defines the version of the software the bug was found in.") | Leap 42.1 | | [Hardware:](page.cgi?id=glossary.html#rep_platform "The hardware platform the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | x86-64 openSUSE 42.1 | |  | | | [Priority](page.cgi?id=glossary.html#priority): | P4 - Low **Severity**: Major with [1 vote](page.cgi?id=voting/bug.html&bug_id=964548) ([vote](page.cgi?id=voting/user.html&bug_id=964548#vote_964548)) | | [Target Milestone:](page.cgi?id=glossary.html#target_milestone "The Target Milestone field is used to define when the engineer the bug is assigned to expects to fix it.") | --- | | [Assignee:](page.cgi?id=glossary.html#assigned_to "The person in charge of resolving the bug.") | E-Mail List | | [QA Contact:](page.cgi?id=glossary.html#qa_contact "The person responsible for confirming this bug if it is unconfirmed, and for verifying the fix once the bug has been resolved.") | E-mail List | |  | | | [URL:](page.cgi?id=glossary.html#bug_file_loc "Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen.") |  | | [Whiteboard:](page.cgi?id=glossary.html#status_whiteboard "Each bug has a free-form single line text entry box for adding tags and status information.") |  | | [Keywords:](describekeywords.cgi "You can add keywords from a defined list to bugs, in order to easily identify and group them.") |  | |  | | | [Depends on:](page.cgi?id=glossary.html#dependson "The bugs listed here must be resolved before this bug can be resolved.") |  | | [Blocks:](page.cgi?id=glossary.html#blocked "This bug must be resolved before the bugs listed in this field can be resolved.") |  | |  | | Reported: | 2016-02-01 19:30 UTC by Dirk Weber | | --- | --- | | Modified: | 2016-05-03 19:01 UTC ([History](show_activity.cgi?id=964548)) | | CC List: | 12 users (show)  alarrosa astieger d\_werner forgotten\_33YCGo0egg forgotten\_5zQvLlpSWf forgotten\_qouZmm\_Kx7 forgotten\_sM9JzehKpy forgotten\_zWjTkn5WYm kde krahmer opensuse-kde-bugs security-team | |  | | | [See Also:](page.cgi?id=glossary.html#see_also "This allows you to refer to bugs in other installations. You can enter a URL to a bug in the 'Add Bug URLs' field to note that that bug is related to this one. You can enter multiple URLs at once by separating them with whitespace. You should normally use this field to refer to bugs in other installations. For bugs in this installation, it is better to use the Depends on and Blocks fields.") |  | | [Found By:](page.cgi?id=glossary.html#cf_foundby "A custom Drop Down field in this installation of Bugzilla.") | --- | | [Services Priority:](page.cgi?id=glossary.html#cf_nts_priority "A custom Free Text field in this installation of Bugzilla.") |  | | [Business Priority:](page.cgi?id=glossary.html#cf_biz_priority "A custom Free Text field in this installation of Bugzilla.") |  | | [Blocker:](page.cgi?id=glossary.html#cf_blocker "A custom Drop Down field in this installation of Bugzilla.") | --- | | [Marketing QA Status:](page.cgi?id=glossary.html#cf_marketing_qa_status "A custom Drop Down field in this installation of Bugzilla.") | --- | | [IT Deployment:](page.cgi?id=glossary.html#cf_it_deployment "A custom Drop Down field in this installation of Bugzilla.") | --- | |  | |  * [Clone This Bug](enter_bug.cgi?cloned_bug_id=964548) |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| --- | | |

| | Attachments | | | --- | --- | | [**.xsession-errors-:0 covering periode before diplay power off until after power on**](attachment.cgi?id=664062 "View the content of the attachment") (96.05 KB, text/plain)  [2016-02-01 19:30 UTC](#attach_664062 "Go to the comment associated with the attachment"), Dirk Weber | [Details](attachment.cgi?id=664062&action=edit) | | [**output of kscreenlocker\_greet --testing; .xsession-errors-:0**](attachment.cgi?id=664478 "View the content of the attachment") (12.22 KB, text/plain)  [2016-02-04 16:30 UTC](#attach_664478 "Go to the comment associated with the attachment"), Dirk Weber | [Details](attachment.cgi?id=664478&action=edit) | | [**Possible patch**](attachment.cgi?id=664559 "View the content of the attachment") (1.51 KB, patch)  [2016-02-05 09:50 UTC](#attach_664559 "Go to the comment associated with the attachment"), Martin Gräßlin | [Details](attachment.cgi?id=664559&action=edit) | [Diff](attachment.cgi?id=664559&action=diff) | | [**output of /usr/lib64/libexec/kscreenlocker\_greet --testing with the patched version #c16**](attachment.cgi?id=664611 "View the content of the attachment") (2.83 KB, text/plain)  [2016-02-05 15:11 UTC](#attach_664611 "Go to the comment associated with the attachment"), Dirk Weber | [Details](attachment.cgi?id=664611&action=edit) | | [**When the last windows gets closed, reset a few things and objects in kscreenlocker**](attachment.cgi?id=665550 "View the content of the attachment") (964 bytes, patch)  [2016-02-14 22:55 UTC](#attach_665550 "Go to the comment associated with the attachment"), Forgotten User qouZmm\_Kx7 | [Details](attachment.cgi?id=665550&action=edit) | [Diff](attachment.cgi?id=665550&action=diff) | | [**This should resolve the remaining issues**](attachment.cgi?id=666317 "View the content of the attachment") (5.54 KB, patch)  [2016-02-20 17:39 UTC](#attach_666317 "Go to the comment associated with the attachment"), Forgotten User qouZmm\_Kx7 | [Details](attachment.cgi?id=666317&action=edit) | [Diff](attachment.cgi?id=666317&action=diff) | | [Show Obsolete](#a0) (1) [View All](attachment.cgi?bugid=964548&action=viewall&hide_obsolete=1)  [Add an attachment](attachment.cgi?bugid=964548&action=enter) (proposed patch, testcase, etc.) | |   | Note You need to [log in](show_bug.cgi?id=964548&GoAheadAndLogIn=1) before you can comment on or make changes to this bug. | | --- | |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |

| [Description](show_bug.cgi?id=964548#c0)  Dirk Weber   2016-02-01 19:30:23 UTC  ``` Created [attachment 664062](attachment.cgi?id=664062 ".xsession-errors-:0 covering periode before diplay power off until after power on") [[details]](attachment.cgi?id=664062&action=edit ".xsession-errors-:0 covering periode before diplay power off until after power on") .xsession-errors-:0 covering periode before diplay power off until after power on  On one system with fully updated Leap 42.1 with KDE I observe that the locked screen can be unlocked by switching the display off and on.  I do not observe this on another system which has a very similar SW setup but different HW.  The error does not happen when the display enters and leaves powersave mode.  Affected system: Intel GPU: Integrated Graphics Chipset: Intel(R) HD Graphics 4600 Display Port connection (DP1)  Not affected system: Radeon GPU DVI-I connection  Both: Leap 42.1, packages from the distribution and the update repos  It seems no other applications are affected by this power cycling the display, only the kscreenlocker_greet vanishes on the Intel/Display port system.  Attached: .xsession-errors-:0 starting before powering off the screen until after powering it back on. ``` [Comment 1](show_bug.cgi?id=964548#c1)  Sebastian Krahmer   2016-02-02 10:54:45 UTC  ``` Opened the bug so upstream can access it. ``` [Comment 2](show_bug.cgi?id=964548#c2)  Forgotten User sM9JzehKpy   2016-02-02 11:12:14 UTC  ``` Dirk,   Could you describe your hardware setup a little more ?  Is this a desktop system with just a single monitor and the other systems have the same setup ? So that we are not comparing a desktop system with a single monitor to a laptop with an external display.   What I understand from the original message is that you are locking the screen and then when you switch off and on the display, the lock screen is gone and the desktop is visible ? ``` [Comment 3](show_bug.cgi?id=964548#c3)  Dirk Weber   2016-02-02 16:53:38 UTC  ``` (In reply to Raymond Wooninck from [comment #2](show_bug.cgi?id=964548#c2)) > Dirk,  >  > Could you describe your hardware setup a little more ?  Is this a desktop > system with just a single monitor and the other systems have the same setup > ? So that we are not comparing a desktop system with a single monitor to a > laptop with an external display.  both mentioned systems are desktop systems, both have a single monitor.  The affected system is a less than 2 years old HP Elitedesk 800 G1 TWR, I would consider it quite a "standard" system.  On two laptops (one of them with AMD video chip and the other one with Intel chip) I did not observe this, but I also can't really switch off the monitor :-)  For me the suspicious distinction between the two is the cable (DP vs. DVI) between PC and monitor.  > What I understand from the original message is that you are locking the > screen and then when you switch off and on the display, the lock screen is > gone and the desktop is visible ? exactly.  steps to reproduce on the affected system: when some applications are in use (konsole, Firefox, ...)  - I did not try with "blank" desktop  lock the screen (CTRL+Alt+L) and make sure it is locked switch of the monitor wait "some" (~5) seconds - I did not try very short power off time switch on the monitor the desktop is not locked, the arrangement of windows on the virtual desktops (or nowadays called activities?) are unchanged there is no sign of some crash of the lock screen (no drkonqui), it is just gone as if the screen had not been locked at all. ``` [Comment 4](show_bug.cgi?id=964548#c4)  Swamp Workflow Management   2016-02-02 23:00:16 UTC  ``` bugbot adjusting priority ``` [Comment 5](show_bug.cgi?id=964548#c5)  Martin Gräßlin   2016-02-03 07:01:05 UTC  ``` Upstream maintainer speaking.  From the xsession output it looks like the lockscreen successfully exited. It prints "Grab Released" which is in method  void KSldApp::doUnlock()  which is called from three places: 1) If the kscreenlocker_greet failed to start. This would print an error message "Greeter Process not available" which is not in the log 2) If logind send the Unlock dbus signal 3) If kscreenlocker_greet exits with exit code 0. This can happen after grace time (given description not the case), after logind Unlock or - the normal case - after the password was accepted successfully.  Given the information in the bug report I can exclude case 1), consider case 2) unlikely and am sure that the condition grace time of number 3) is not the case.  So I assume we found a new way to exit kscreenlocker_greet successfully. My gut feeling tells me it's related to Qt's utterly broken multi screen handling including crashes when screens are turned off (see "requesting unexisting screen 0" in log). But to figure that out we would need the debug output of kscreenlocker_greet which is only available since <http://commits.kde.org/kscreenlocker/a68dda3dd2a8a60e7f03beb5f0e652ef10fedbaa>  So we need to manually try that.  @Dirk: can you please try to run: 1) run "kscreenlocker_greet --testing" from a konsole 2) turn off the display  Afterwards please tell us whether the application exited or not. If it did, please add the debug output from the konsole.  Please note that kscreenlocker_greet is installed into the libexec directory and is not in $PATH. Unfortunately I do not know where openSUSE installs that file. ``` [Comment 6](show_bug.cgi?id=964548#c6)  Antonio Larrosa   2016-02-03 08:54:42 UTC  ``` That would be at /usr/lib64/libexec/kscreenlocker_greet  Running /usr/lib64/libexec/kscreenlocker_greet --testing works right away. But just in case that commit Martin mentioned would be helpful, I backported it to plasma5-workspace 5.4.3. This patched version is available at [https://build.opensuse.org/package/binaries/home:alarrosa:branches:bnc964548/plasma5-workspace?repository=standard](https://build.opensuse.org/package/binaries/home%3Aalarrosa%3Abranches%3Abnc964548/plasma5-workspace?repository=standard) . Dirk, maybe it would be nice if you could install it. ``` [Comment 7](show_bug.cgi?id=964548#c7)  Dirk Weber   2016-02-03 21:43:55 UTC  ``` Thanks for the instructions, I will try to provide the logs tomorrow evening. ``` [Comment 8](show_bug.cgi?id=964548#c8)  Dirk Weber   2016-02-04 16:27:12 UTC  ``` > @Dirk: can you please try to run: > 1) run "kscreenlocker_greet --testing" from a konsole > 2) turn off the display >  > Afterwards please tell us whether the application exited or not. If it did, > please add the debug output from the konsole.  I followed the procedure. after switching the monitor on again the kscreenlocker_greet was gone.  I attach the output of "kscreenlocker_greet --testing" and appended to it the content of .xsession-errors-:0  Also some check for the files which can not be opened according to the output of kscreenlocker_greet. ``` [Comment 9](show_bug.cgi?id=964548#c9)  Dirk Weber   2016-02-04 16:30:28 UTC  ``` Created [attachment 664478](attachment.cgi?id=664478 "output of kscreenlocker_greet --testing; .xsession-errors-:0") [[details]](attachment.cgi?id=664478&action=edit "output of kscreenlocker_greet --testing; .xsession-errors-:0") output of kscreenlocker_greet --testing; .xsession-errors-:0  requested output of /usr/lib64/libexec/kscreenlocker_greet --testing ``` [Comment 10](show_bug.cgi?id=964548#c10)  Dirk Weber   2016-02-04 17:58:31 UTC  ``` (In reply to Dirk Weber from [comment #9](show_bug.cgi?id=964548#c9)) > Created [attachment 664478](attachment.cgi?id=664478 "output of kscreenlocker_greet --testing; .xsession-errors-:0") [[details]](attachment.cgi?id=664478&action=edit "output of kscreenlocker_greet --testing; .xsession-errors-:0") > output of kscreenlocker_greet --testing; .xsession-errors-:0 >  > requested output of /usr/lib64/libexec/kscreenlocker_greet --testing  additional observation: the output of kscreenlocker_greet --testing looks identical (except for the timestamp) on the affected system and on the not affected system.  The big difference is that on the not affected system the kscreenlocker_greet is still running after switching the monitor off and on. ``` [Comment 11](show_bug.cgi?id=964548#c11)  Martin Gräßlin   2016-02-05 07:06:57 UTC  ``` Thank you. Interestingly I don't see anything odd in the output, but this gave me an idea. I'll try to verify with a test case. ``` [Comment 12](show_bug.cgi?id=964548#c12)  Martin Gräßlin   2016-02-05 09:48:16 UTC  ``` Unfortunately I was not able to create a test case for the situation. X11 makes it difficult to test with dynamic XRandR screens (neither Xephyr nor Xvfb support XRandr, XWayland is broken), thus I decided to create the test case with Wayland.  Works fine, just that Qt makes kscreenlocker_greet crash in the situation and crashes are handled correctly, the screen stays locked.  The good part of that is that we can be quite certain that not many systems are affected as Qt used to crash on X11 as well. ``` [Comment 13](show_bug.cgi?id=964548#c13)  Martin Gräßlin   2016-02-05 09:50:35 UTC  ``` Created [attachment 664559](attachment.cgi?id=664559&action=diff "Possible patch") [[details]](attachment.cgi?id=664559&action=edit "Possible patch") Possible patch  This is a possible patch against kscreenlocker to not exit when the last window closed. It compiles but I haven't tested it yet as I cannot reproduce the situation.  kscreenlocker used to be in plasma-workspace back in 5.4 release, but should apply nevertheless.  It would be awesome if this patch could be tested. If it works I'm going to contact KDE's security team about the issue. ``` [Comment 14](show_bug.cgi?id=964548#c14)  Forgotten User 33YCGo0egg   2016-02-05 11:36:01 UTC  ``` I can reproduce the problem on a Gentoo box with Qt 5.6 from git (couple months old) and KF5/plasma from git (day or two old). My Plasma session was started on LVDS1, xrandr-ed to DP2, screen locked, and if I power-cycle my DP2 screen, the locker is gone.  After applying the patch, the locker bypass is gone, but there's a regression, another screen locker pops up immediately (but with a nice animation) after I unlock the older one. This only happens when there was a power cycle of the screen, and I can get back to my session after I've unlocked the second screenlocker. ``` [Comment 15](show_bug.cgi?id=964548#c15)  Antonio Larrosa   2016-02-05 11:42:25 UTC  ``` I added the patch from #c13 to the packages at:  [https://build.opensuse.org/package/show/home:alarrosa:branches:bnc964548/plasma5-workspace](https://build.opensuse.org/package/show/home%3Aalarrosa%3Abranches%3Abnc964548/plasma5-workspace)  Btw, Dirk, if you tried to download them before, please try again, I forgot to enable the "publish" flag, but it should be working now.  If you don't want to add a new repository ( [http://download.opensuse.org/repositories/home:/alarrosa:/branches:/bnc964548/standard/](http://download.opensuse.org/repositories/home%3A/alarrosa%3A/branches%3A/bnc964548/standard/) ) then you can install individual packages. In that case, I think just installing plasma5-workspace-5.4.3-10.1.x86_64.rpm and plasma5-workspace-libs-5.4.3-10.1.x86_64.rpm from [https://build.opensuse.org/package/binaries/home:alarrosa:branches:bnc964548/plasma5-workspace?repository=standard](https://build.opensuse.org/package/binaries/home%3Aalarrosa%3Abranches%3Abnc964548/plasma5-workspace?repository=standard) should be enough. ``` [Comment 16](show_bug.cgi?id=964548#c16)  Dirk Weber   2016-02-05 15:03:23 UTC  ``` (In reply to Antonio Larrosa from [comment #15](show_bug.cgi?id=964548#c15)) > I added the patch from #c13 to the packages at: >  > [https://build.opensuse.org/package/show/home:alarrosa:branches:bnc964548/](https://build.opensuse.org/package/show/home%3Aalarrosa%3Abranches%3Abnc964548/) > plasma5-workspace >  > Btw, Dirk, if you tried to download them before, please try again, I forgot > to enable the "publish" flag, but it should be working now. today I was able to download them.   > ... just installing plasma5-workspace-5.4.3-10.1.x86_64.rpm and > plasma5-workspace-libs-5.4.3-10.1.x86_64.rpm from > [https://build.opensuse.org/package/binaries/home:alarrosa:branches:bnc964548/](https://build.opensuse.org/package/binaries/home%3Aalarrosa%3Abranches%3Abnc964548/) > plasma5-workspace?repository=standard should be enough. I installed  plasma5-workspace-libs-5.4.3-10.1.x86_64.rpm plasma5-workspace-5.4.3-10.1.x86_64.rpm  With these I have the same behavior as described in #c14: after switching the monitor off and back on the screen is locked. After unlocking it it gets immediately locked again.  After unlocking the second time the desktop is accessible.  This happens when the screen is locked by CTRL-Alt-L and as well as when started by /usr/lib64/libexec/kscreenlocker_greet --testing ``` [Comment 17](show_bug.cgi?id=964548#c17)  Dirk Weber   2016-02-05 15:11:00 UTC  ``` Created [attachment 664611](attachment.cgi?id=664611 "output of /usr/lib64/libexec/kscreenlocker_greet --testing with the patched version #c16") [[details]](attachment.cgi?id=664611&action=edit "output of /usr/lib64/libexec/kscreenlocker_greet --testing with the patched version #c16") output of /usr/lib64/libexec/kscreenlocker_greet --testing with the patched version #c16  output when using the packages with the patch from #c15 description of the result see #c16 ``` [Comment 18](show_bug.cgi?id=964548#c18)  Forgotten User qouZmm\_Kx7   2016-02-07 21:59:22 UTC  ``` Would it make sense, when there are no more screens, to exit kscreenlocker_greet with exit value == 1, to notify that a valid log-in didn't take place? ``` [Comment 19](show_bug.cgi?id=964548#c19)  Martin Gräßlin   2016-02-08 07:18:45 UTC  ``` (In reply to Lorenzo Desole from [comment #18](show_bug.cgi?id=964548#c18)) > Would it make sense, when there are no more screens, to exit > kscreenlocker_greet with exit value == 1, to notify that a valid log-in > didn't take place?  No, that's kind of a useless information in that case. Assuming we would do so, it would result in KSlD restarting the greeter which would exit again with 1, because there are no screens. Resulting in either a restart loop or in the emergency window being shown. ``` [Comment 20](show_bug.cgi?id=964548#c20)  Forgotten User qouZmm\_Kx7   2016-02-08 08:30:45 UTC  ``` (In reply to Martin Gräßlin from [comment #19](show_bug.cgi?id=964548#c19)) > (In reply to Lorenzo Desole from [comment #18](show_bug.cgi?id=964548#c18)) > > Would it make sense, when there are no more screens, to exit > > kscreenlocker_greet with exit value == 1, to notify that a valid log-in > > didn't take place? >  > No, that's kind of a useless information in that case. Assuming we would do > so, it would result in KSlD restarting the greeter which would exit again > with 1, because there are no screens. Resulting in either a restart loop or > in the emergency window being shown.  Not if the pre-condition is "there was a screen, now it's been removed, there are no screens left". I am currently testing a patch, so far so good. If it behaves, later I can submit it here for you to check. ``` [Comment 21](show_bug.cgi?id=964548#c21)  Martin Gräßlin   2016-02-08 09:00:39 UTC  ``` (In reply to Lorenzo Desole from [comment #20](show_bug.cgi?id=964548#c20)) > (In reply to Martin Gräßlin from [comment #19](show_bug.cgi?id=964548#c19)) > > (In reply to Lorenzo Desole from [comment #18](show_bug.cgi?id=964548#c18)) > > > Would it make sense, when there are no more screens, to exit > > > kscreenlocker_greet with exit value == 1, to notify that a valid log-in > > > didn't take place? > >  > > No, that's kind of a useless information in that case. Assuming we would do > > so, it would result in KSlD restarting the greeter which would exit again > > with 1, because there are no screens. Resulting in either a restart loop or > > in the emergency window being shown. >  > Not if the pre-condition is "there was a screen, now it's been removed, > there are no screens left".  sorry, but that's totally useless information for KSld. It doesn't need to know about it and it's also a not needed information in future. With Qt 5.6 we will get proper dummy QScreens in case there is no screen and on Wayland, well KWin is not so stupid as to remove the last screen ;-)  Anyway concerning the issue: upstream security team is involved now. ``` [Comment 22](show_bug.cgi?id=964548#c22)  Forgotten User qouZmm\_Kx7   2016-02-08 11:25:55 UTC  ``` (In reply to Martin Gräßlin from [comment #21](show_bug.cgi?id=964548#c21)) > (In reply to Lorenzo Desole from [comment #20](show_bug.cgi?id=964548#c20)) > > (In reply to Martin Gräßlin from [comment #19](show_bug.cgi?id=964548#c19)) > > > (In reply to Lorenzo Desole from [comment #18](show_bug.cgi?id=964548#c18)) > > > > Would it make sense, when there are no more screens, to exit > > > > kscreenlocker_greet with exit value == 1, to notify that a valid log-in > > > > didn't take place? > > >  > > > No, that's kind of a useless information in that case. Assuming we would do > > > so, it would result in KSlD restarting the greeter which would exit again > > > with 1, because there are no screens. Resulting in either a restart loop or > > > in the emergency window being shown. > >  > > Not if the pre-condition is "there was a screen, now it's been removed, > > there are no screens left". >  > sorry, but that's totally useless information for KSld. It doesn't need to > know about it and it's also a not needed information in future. With Qt 5.6 > we will get proper dummy QScreens in case there is no screen and on Wayland, > well KWin is not so stupid as to remove the last screen ;-) >  > Anyway concerning the issue: upstream security team is involved now.   Not even as a temporary fix? Because simply adding setQuitOnLastWindowClosed(false) leaves the screen locked but causes kscreenlocker_greet to crash. Which forces KSlD to take action and to respawn it. A clean exit would also force KSlD to respawn kscreenlocker_greet, but at least that happens at the proper time (i.e. when the last screen has been removed) hence you don't have to enter the password twice.  At least this is what happens in my test environment. ``` [Comment 23](show_bug.cgi?id=964548#c23)  Martin Gräßlin   2016-02-08 12:38:08 UTC  ``` (In reply to Lorenzo Desole from [comment #22](show_bug.cgi?id=964548#c22)) > Not even as a temporary fix? Because simply adding > setQuitOnLastWindowClosed(false) leaves the screen locked but causes > kscreenlocker_greet to crash.  No way, we don't work around crashes, we fix them! ``` [Comment 24](show_bug.cgi?id=964548#c24)  Bernhard Wiedemann   2016-02-09 17:00:11 UTC  ``` This is an autogenerated message for OBS integration: This bug (964548) was mentioned in <https://build.opensuse.org/request/show/358584> Factory / kscreenlocker ``` [Comment 25](show_bug.cgi?id=964548#c25)  Sebastian Krahmer   2016-02-10 09:31:14 UTC  ``` CVE-2016-2312 ``` [Comment 26](show_bug.cgi?id=964548#c26)  Forgotten User qouZmm\_Kx7   2016-02-13 15:22:48 UTC  ``` (In reply to Martin Gräßlin from [comment #23](show_bug.cgi?id=964548#c23)) > (In reply to Lorenzo Desole from [comment #22](show_bug.cgi?id=964548#c22)) > > Not even as a temporary fix? Because simply adding > > setQuitOnLastWindowClosed(false) leaves the screen locked but causes > > kscreenlocker_greet to crash. >  > No way, we don't work around crashes, we fix them!  OpenSuse has updated kscreenlocker with the proposed patch. As a result kscreenlocker doesn't exit when the monitor is switched off, but switching the monitor off still breaks something, because entering the password doesn't unlock it.  Everything is fine if I don't switch the monitor off.  $ /usr/lib64/libexec/kscreenlocker_greet --testing Locked at 1455376791 file:///usr/share/plasma/look-and-feel/org.openSUSE.desktop/contents/components/InfoPane.qml:52:22: Unable to assign [undefined] to int file:///usr/share/plasma/look-and-feel/org.openSUSE.desktop/contents/components/UserPasswordPrompt.qml:25: ReferenceError: userModel is not defined file:///usr/share/plasma/look-and-feel/org.openSUSE.desktop/contents/components/UserDelegate.qml:82:9: QML Image: Cannot open: file:///usr/share/plasma/look-and-feel/org.openSUSE.desktop/contents/components/user-identity file:///usr/share/plasma/look-and-feel/org.openSUSE.desktop/contents/components/UserDelegate.qml:82:9: QML Image: Cannot open: file:///usr/share/plasma/look-and-feel/org.openSUSE.desktop/contents/components/system-log-out file:///usr/share/plasma/look-and-feel/org.openSUSE.desktop/contents/components/UserDelegate.qml:82:9: QML Image: Cannot open: file:///usr/share/plasma/look-and-feel/org.openSUSE.desktop/contents/components/system-switch-user org.kde.keyboardLayout: Layouts list changed:  ("it") QXcbConnection: XCB error: 3 (BadWindow), sequence: 766, resource id: 0, major code: 21 (ListProperties), minor code: 0 file:///usr/share/plasma/look-and-feel/org.openSUSE.desktop/contents/components/InfoPane.qml:52:22: Unable to assign [undefined] to int file:///usr/share/plasma/look-and-feel/org.openSUSE.desktop/contents/components/UserPasswordPrompt.qml:25: ReferenceError: userModel is not defined file:///usr/share/plasma/look-and-feel/org.openSUSE.desktop/contents/components/UserDelegate.qml:82:9: QML Image: Cannot open: file:///usr/share/plasma/look-and-feel/org.openSUSE.desktop/contents/components/user-identity file:///usr/share/plasma/look-and-feel/org.openSUSE.desktop/contents/components/UserDelegate.qml:82:9: QML Image: Cannot open: file:///usr/share/plasma/look-and-feel/org.openSUSE.desktop/contents/components/system-log-out file:///usr/share/plasma/look-and-feel/org.openSUSE.desktop/contents/components/UserDelegate.qml:82:9: QML Image: Cannot open: file:///usr/share/plasma/look-and-feel/org.openSUSE.desktop/contents/components/system-switch-user org.kde.keyboardLayout: Layouts list changed:  ("it") file:///usr/share/plasma/look-and-feel/org.openSUSE.desktop/contents/lockscreen/MainBlock.qml:85: TypeError: Property 'tryUnlock' of object function() { [code] } is not a function  The last line is printed out each time the password is entered. ``` [Comment 27](show_bug.cgi?id=964548#c27)  Forgotten User qouZmm\_Kx7   2016-02-13 22:27:12 UTC  ``` I don't know if this can be of some use nor do I know if it is a peculiarity of my setup.  I assumed that switching the monitor off is what causes kscreenlocker () to exit. That is incorrect. When the monitor is switched off, the screen  is not removed.  It is also worth noting that kscreenlocker (still without patch) works perfectly fine if it is executed when the monitor is off. It's when I switch it back on that the screen is removed and, after a split second, a new one is added. This causes all sorts of troubles to kscreenlocker.  I have modified UnlockApp::desktopResized() to printout the number of screen available and launched kscreenlocker in a loop:  $ while : ; do echo -e "\n\n\n*** starting at $(date)***"; echo "Monitor is $(cat /sys/class/drm/card0-DP-2/status)" ; greeter/kscreenlocker_greet --testing ; done  As soon as the login screen was shown, I switched off the monitor and waited for about a minute. This is the output I got:  *** starting at sab 13 feb 2016, 22.58.35, CET*** Monitor is connected UnlockApp::desktopResized() - Screen count: 1 Locked at 1455400716 file:///usr/share/plasma/look-and-feel/org.openSUSE.desktop/contents/components/InfoPane.qml:52:22: Unable to assign [undefined] to int file:///usr/share/plasma/look-and-feel/org.openSUSE.desktop/contents/components/UserPasswordPrompt.qml:25: ReferenceError: userModel is not defined file:///usr/share/plasma/look-and-feel/org.openSUSE.desktop/contents/components/UserDelegate.qml:82:9: QML Image: Cannot open: file:///usr/share/plasma/look-and-feel/org.openSUSE.desktop/contents/components/user-identity file:///usr/share/plasma/look-and-feel/org.openSUSE.desktop/contents/components/UserDelegate.qml:82:9: QML Image: Cannot open: file:///usr/share/plasma/look-and-feel/org.openSUSE.desktop/contents/components/system-log-out file:///usr/share/plasma/look-and-feel/org.openSUSE.desktop/contents/components/UserDelegate.qml:82:9: QML Image: Cannot open: file:///usr/share/plasma/look-and-feel/org.openSUSE.desktop/contents/components/system-switch-user org.kde.keyboardLayout: Layouts list changed:  ("it") UnlockApp::desktopResized() - Screen count: 0    *** starting at sab 13 feb 2016, 22.59.32, CET*** Monitor is disconnected UnlockApp::desktopResized() - Screen count: 1 Locked at 1455400772 QXcbConnection: XCB error: 148 (Unknown), sequence: 170, resource id: 0, major code: 140 (Unknown), minor code: 20 UnlockApp::desktopResized() - Screen count: 2 file:///usr/share/plasma/look-and-feel/org.openSUSE.desktop/contents/components/InfoPane.qml:52:22: Unable to assign [undefined] to int file:///usr/share/plasma/look-and-feel/org.openSUSE.desktop/contents/components/UserPasswordPrompt.qml:25: ReferenceError: userModel is not defined file:///usr/share/plasma/look-and-feel/org.openSUSE.desktop/contents/components/UserDelegate.qml:82:9: QML Image: Cannot open: file:///usr/share/plasma/look-and-feel/org.openSUSE.desktop/contents/components/user-identity file:///usr/share/plasma/look-and-feel/org.openSUSE.desktop/contents/components/UserDelegate.qml:82:9: QML Image: Cannot open: file:///usr/share/plasma/look-and-feel/org.openSUSE.desktop/contents/components/system-log-out file:///usr/share/plasma/look-and-feel/org.openSUSE.desktop/contents/components/UserDelegate.qml:82:9: QML Image: Cannot open: file:///usr/share/plasma/look-and-feel/org.openSUSE.desktop/contents/components/system-switch-user org.kde.keyboardLayout: Layouts list changed:  ("it") file:///usr/share/plasma/look-and-feel/org.openSUSE.desktop/contents/components/InfoPane.qml:52:22: Unable to assign [undefined] to int file:///usr/share/plasma/look-and-feel/org.openSUSE.desktop/contents/components/UserPasswordPrompt.qml:25: ReferenceError: userModel is not defined file:///usr/share/plasma/look-and-feel/org.openSUSE.desktop/contents/components/UserDelegate.qml:82:9: QML Image: Cannot open: file:///usr/share/plasma/look-and-feel/org.openSUSE.desktop/contents/components/user-identity file:///usr/share/plasma/look-and-feel/org.openSUSE.desktop/contents/components/UserDelegate.qml:82:9: QML Image: Cannot open: file:///usr/share/plasma/look-and-feel/org.openSUSE.desktop/contents/components/system-log-out file:///usr/share/plasma/look-and-feel/org.openSUSE.desktop/contents/components/UserDelegate.qml:82:9: QML Image: Cannot open: file:///usr/share/plasma/look-and-feel/org.openSUSE.desktop/contents/components/system-switch-user org.kde.keyboardLayout: Layouts list changed:  ("it")  My deductions are:  1) kscreenlocker exited as soon I switched the monitor back on, not when I had previously switched it off. 2) the while/do loop immediately launched a new instance of kscreenlocker, but the monitor was still being reported off by Xrandr; UnlockApp::desktopResized() reports one screen though 3) there's a strange QXcbConnection: XCB error 4) A new (the real one) screen is added and UnlockApp::desktopResized() reports TWO screens, the fake/virtual/whatever one is not removed). 5) At that point kscreenlocker showed *two* password windows  If I add a "sleep 1" into the middle of the loop, the "QXcbConnection: XCB error doesn't happen", only one screen is reported by UnlockApp::desktopResized() and only one password window is shown. ``` [Comment 28](show_bug.cgi?id=964548#c28)  Forgotten User qouZmm\_Kx7   2016-02-14 22:55:01 UTC  ``` Created [attachment 665550](attachment.cgi?id=665550&action=diff "When the last windows gets closed, reset a few things and objects in kscreenlocker") [[details]](attachment.cgi?id=665550&action=edit "When the last windows gets closed, reset a few things and objects in kscreenlocker") When the last windows gets closed, reset a few things and objects in kscreenlocker  app.setQuitOnLastWindowClosed(false) solves the security issue, but causes a regression: power cycling the monitor breaks kscreenlocker which, after that, refuses to accept the correct password.  The proposed patch resets a few internal things in kscreenlocker when a lastWindowClosed event is received.  It fixes the regression for me.  QT is not my cup of tea, I basically know nothing about the KDE internals, so I could have missed something or broken other stuff. But, still, it works for me. ``` [Comment 29](show_bug.cgi?id=964548#c29)  Martin Gräßlin   2016-02-15 06:36:04 UTC  ``` The only real new code is the deletion of the Authenticator and the recreation of it. Everything else should already be done.  So the question is: why does the Authenticator needs to be recreated?  Personally I'm not really motivated in investigating it as with Qt 5.6 this should auto-resolve itself.  Otherwise I recommend to create a new bug report for the new issue (this one is about the vulnerability) and also to move it upstream (bugs.kde.org). ``` [Comment 30](show_bug.cgi?id=964548#c30)  Andreas Stieger   2016-02-20 08:35:51 UTC  ``` releasing for 42.1 ``` [Comment 31](show_bug.cgi?id=964548#c31)  Forgotten User qouZmm\_Kx7   2016-02-20 09:47:40 UTC  ``` (In reply to Andreas Stieger from [comment #30](show_bug.cgi?id=964548#c30)) > releasing for 42.1  I urge you to reconsider that.  Depending on the lockscreen theme in use, in case of monitor (un)plugging, you get:  1) a crash after entering the password; this will cause kscreenlocker to be respawned. It's a minor annoyance because you can re-enter the password and everything is fine  or  2) kscreenlocker can't be unlocked at all, i.e. you are locked out of your PC. This is a severe regression.  I get #1 with the internal fallback lockscreen.  I get #2 with the opensuse lockscreen.  Apparently this can't be fixed and upstream doesn't like the proposed workarounds. ``` [Comment 32](show_bug.cgi?id=964548#c32)  Swamp Workflow Management   2016-02-20 12:12:33 UTC  ``` openSUSE-RU-2016:0522-1: An update that solves one vulnerability and has one errata is now available.  Category: recommended (moderate) Bug References: 954623,964548 CVE References: CVE-2016-2312 Sources used: openSUSE Leap 42.1 (src):    bluedevil5-5.5.4-6.1, breeze-5.5.4-7.1, breeze4-style-5.5.4-7.1, kcm_sddm-5.5.4-7.1, kde-cli-tools5-5.5.4-6.1, kde-gtk-config5-5.5.4-6.1, kde-user-manager-5.5.4-6.1, kgamma5-5.5.4-6.1, khelpcenter5-5.5.4-6.2, khotkeys5-5.5.4-6.2, kinfocenter5-5.5.4-6.1, kmenuedit5-5.5.3-6.5, kscreen5-5.5.4-7.1, kscreenlocker-5.5.4-4.1, ksshaskpass5-5.5.4-6.1, ksysguard5-5.5.4-8.2, kwayland-5.5.4-9.1, kwayland-integration-5.5.4-6.1, kwin5-5.5.4-9.3, kwrited5-5.5.4-6.1, libkdecoration2-5.5.4-6.1, libkscreen2-5.5.4-6.1, libksysguard5-5.5.4-6.1, milou5-5.5.4-6.1, oxygen5-5.5.4-6.1, plasma-nm5-5.5.4-6.3, plasma5-addons-5.5.4-6.1, plasma5-desktop-5.5.4-9.2, plasma5-mediacenter-5.5.4-6.1, plasma5-openSUSE-13.3-29.1, plasma5-pa-5.5.4-6.1, plasma5-sdk-5.5.4-6.1, plasma5-session-5.5.4-6.1, plasma5-workspace-5.5.4-9.1, plasma5-workspace-wallpapers-5.5.4-6.1, polkit-kde-agent-5-5.5.4-6.1, powerdevil5-5.5.4-6.1, systemsettings5-5.5.4-6.1 ``` [Comment 33](show_bug.cgi?id=964548#c33)  Forgotten User qouZmm\_Kx7   2016-02-20 17:39:58 UTC  ``` Created [attachment 666317](attachment.cgi?id=666317&action=diff "This should resolve the remaining issues") [[details]](attachment.cgi?id=666317&action=edit "This should resolve the remaining issues") This should resolve the remaining issues  If anyone's interested, this patch should resolve the issues caused by patch 664559 till QT 5.6 comes out. It also takes into account Martin's objection to my previous idea, i.e. "KSld doesn't need to know about [monitor unplugged] and it's also a not needed information in future". It's a workaround at best, but at least it gives me a usable screenlocker.  What it does:  1) it catches the lastWindowClosed signal and executes QCoreApplication::exit() with retcode = 123 2) "main()" in main.cpp checks the return code after app.exec(). If it is 123, it re-creates the UnlockApp class and re-executes it, otherwise it exits.  Crashes are gone and so is the "ignore the correct password" problem. ``` [Comment 34](show_bug.cgi?id=964548#c34)  Forgotten User zWjTkn5WYm   2016-04-29 23:21:49 UTC  ``` can we get the proper fix to this in updates?  I too am affected by this and it's pretty embarrassing to deal with it - in a way that hurts OpenSUSE's reputation. ``` [Comment 35](show_bug.cgi?id=964548#c35)  Andreas Stieger   2016-05-03 08:00:28 UTC  ``` (In reply to Jason Newton from [comment #34](show_bug.cgi?id=964548#c34)) > can we get the proper fix to this in updates?  Redirecting this question tho the KDE maintainers? ``` [Comment 36](show_bug.cgi?id=964548#c36)  Martin Gräßlin   2016-05-03 12:18:44 UTC  ``` (In reply to Andreas Stieger from [comment #35](show_bug.cgi?id=964548#c35)) > (In reply to Jason Newton from [comment #34](show_bug.cgi?id=964548#c34)) > > can we get the proper fix to this in updates? >  > Redirecting this question tho the KDE maintainers?  Please report any remaining issues on bugs.kde.org. Sorry, but I cannot monitor distribution bugtrackers in addition to bugs.kde.org - there are just too many distributions. ``` [Comment 37](show_bug.cgi?id=964548#c37)  Andreas Stieger   2016-05-03 12:29:16 UTC  ``` (In reply to Martin Gräßlin from [comment #36](show_bug.cgi?id=964548#c36)) > Please report any remaining issues on bugs.kde.org. Sorry, but I cannot > monitor distribution bugtrackers in addition to bugs.kde.org - there are > just too many distributions.  Thanks and agree, restoring previous state. ``` [Comment 38](show_bug.cgi?id=964548#c38)  Forgotten User zWjTkn5WYm   2016-05-03 14:22:48 UTC  ``` @Andreas , @Martin - let me clarify, I'm having the issue brought up by the patch that Lorenzo reports,  With "file:///usr/share/plasma/look-and-feel/org.openSUSE.desktop/contents/lockscreen/MainBlock.qml:85: TypeError: Property 'tryUnlock' of object function() { [code] } is not a function"  I note that it takes a little while after the monitor is turned off - and by turned off, I mean monitor suspend makes it happen.  If you still wish for me to file the bug at bugs.kde.org, will do so but I just wanted to make sure we weren't too suse specific since there's this patch mentioned in this thread. ``` [Comment 39](show_bug.cgi?id=964548#c39)  Martin Gräßlin   2016-05-03 14:25:18 UTC  ``` well no, I'm not interested in bug reports about patched software :-) ``` [Comment 40](show_bug.cgi?id=964548#c40)  Forgotten User qouZmm\_Kx7   2016-05-03 14:39:48 UTC  ``` (In reply to Martin Gräßlin from [comment #39](show_bug.cgi?id=964548#c39)) > well no, I'm not interested in bug reports about patched software :-)   I agree. There's however a tiny detail: it is your patch that causes it, mine was merely intended to print more debug stuff to help investigate the problem.  See [comment #26](show_bug.cgi?id=964548#c26). ``` [Comment 41](show_bug.cgi?id=964548#c41)  Forgotten User qouZmm\_Kx7   2016-05-03 15:23:41 UTC  ``` (In reply to Lorenzo Desole from [comment #40](show_bug.cgi?id=964548#c40)) > (In reply to Martin Gräßlin from [comment #39](show_bug.cgi?id=964548#c39)) > > well no, I'm not interested in bug reports about patched software :-) >  >  > I agree. There's however a tiny detail: it is your patch that causes it, > mine was merely intended to print more debug stuff to help investigate the > problem. >  > See [comment #26](show_bug.cgi?id=964548#c26).  To clear the issue: OpenSuse is now shipping kscreenlocker with the "setQuitOnLastWindowClosed(false)" patch. I.e. your patch. That same patch triggers a regression that manifests itself either with a crash (in which case kscreenlocker gets relaunched and eventually the user can log in) or with some obscure error that prevents the user from logging in. ``` [Comment 42](show_bug.cgi?id=964548#c42)  Forgotten User zWjTkn5WYm   2016-05-03 18:25:16 UTC  ``` so we're back to what is to be done here? I don't want to put expectations but it sounds like a pretty bad bug to ship with and have no resolution other than maybe what I'm trying...  I *may* get by with a qt 5.6 update / kde update by adding KDE:Frameworks5 and KDE:Qt5 repos - but I really wish I didn't have to and generally I don't like moving off base system Qt because applications may suffer...  Should we leave this as resolved as to my eyes it seems like it should be left open until a proper course of action is taken or work around listed. ``` [Comment 43](show_bug.cgi?id=964548#c43)  Forgotten User qouZmm\_Kx7   2016-05-03 19:01:15 UTC  ``` If you have a chance, please test this patch I made: <https://bugzilla.opensuse.org/attachment.cgi?id=666317>  Let me know if it fixes it for you like it does for me.  Regarding the status of this bug report, I agree that "Fixed" is not appropriate, kscreenlocker is still badly broken. More suitable would be "Reopened" or "Resolved -> WONTIFIX". The latter if the powers that be decide that the purpose of a screenlocker is actually lock you out of your PC. ``` |  |
| --- | --- |

---

* [Format For Printing](show_bug.cgi?format=multiple&id=964548)
* - [XML](show_bug.cgi?ctype=xml&id=964548)
* - [Clone This Bug](enter_bug.cgi?cloned_bug_id=964548)
* - Top of page

* + [Home](./)
  + | [New](enter_bug.cgi?classification=openSUSE)
  + | [Browse](describecomponents.cgi)
  + | [Search](query.cgi)
  + |

    [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")
  + | [Reports](report.cgi)
  + |
    [Requests](request.cgi)
  + |
    [openSUSE\_IDP Log In](/saml2_login.cgi?idp=openSUSE_IDP&target=show_bug.cgi%3Fid%3D964548)
  + |
    [Forgot Password](https://idp-portal.suse.com/univention/self-service/#page=passwordreset)

+ Legal:
+ [openSUSE](http://en.opensuse.org/Terms_of_site)
+ [SUSE](https://www.suse.com/company/legal/)


