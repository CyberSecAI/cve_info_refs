=== Content from github.com_8be31735_20250126_124815.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fadvisories%2FGHSA-cqxw-3p7v-p9gr)

**CVE-2016-10345**

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fadvisories%2FGHSA-cqxw-3p7v-p9gr)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2Fadvisories%2F%3Cid%3E&source=header)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

1. [GitHub Advisory Database](/advisories)
2. [GitHub Reviewed](/advisories?query=type%3Areviewed)
3. [CVE-2016-10345](/advisories/GHSA-cqxw-3p7v-p9gr)

## Phusion Passenger uses a known /tmp filename

High severity

GitHub Reviewed

Published
Aug 21, 2018
to the GitHub Advisory Database
•
Updated Jun 9, 2023

[Vulnerability details](/advisories/GHSA-cqxw-3p7v-p9gr)
[Dependabot alerts
0](/advisories/GHSA-cqxw-3p7v-p9gr/dependabot)

## Package

bundler

passenger
([RubyGems](/advisories?query=ecosystem%3Arubygems))

## Affected versions

< 5.1.0

## Patched versions

5.1.0

## Description

In Phusion Passenger before 5.1.0, a known /tmp filename was used during passenger-install-nginx-module execution, which could allow local attackers to gain the privileges of the passenger user

### References

* <https://nvd.nist.gov/vuln/detail/CVE-2016-10345>
* [phusion/passenger@e5b4b08](https://github.com/phusion/passenger/commit/e5b4b0824d6b648525b4bf63d9fa37e5beeae441)
* [GHSA-cqxw-3p7v-p9gr](https://github.com/advisories/GHSA-cqxw-3p7v-p9gr "GHSA-cqxw-3p7v-p9gr")
* <https://github.com/phusion/passenger/blob/stable-5.1/CHANGELOG>
* <https://blog.phusion.nl/2017/01/10/passenger-5-1-1/>
* <https://github.com/rubysec/ruby-advisory-db/blob/master/gems/passenger/CVE-2016-10345.yml>

Published to the GitHub Advisory Database
Aug 21, 2018

Reviewed
Jun 16, 2020

Last updated
Jun 9, 2023

### Severity

High

7.8

# CVSS overall score

 This score calculates overall vulnerability severity from 0 to 10 and is based on the Common Vulnerability Scoring System (CVSS).

 / 10

#### CVSS v3 base metrics

Attack vector
Local

Attack complexity
Low

Privileges required
Low

User interaction
None

Scope
Unchanged

Confidentiality
High

Integrity
High

Availability
High

Learn more about base metrics

# CVSS v3 base metrics

Attack vector:
More severe the more the remote (logically and physically) an attacker can be in order to exploit the vulnerability.

Attack complexity:
More severe for the least complex attacks.

Privileges required:
More severe if no privileges are required.

User interaction:
More severe when no user interaction is required.

Scope:
More severe when a scope change occurs, e.g. one vulnerable component impacts resources in components beyond its security scope.

Confidentiality:
More severe when loss of data confidentiality is highest, measuring the level of data access available to an unauthorized user.

Integrity:
More severe when loss of data integrity is the highest, measuring the consequence of data modification possible by an unauthorized user.

Availability:
More severe when the loss of impacted component availability is highest.

CVSS:3.0/AV:L/AC:L/PR:L/UI:N/S:U/C:H/I:H/A:H

### EPSS score

0.044%

# Exploit Prediction Scoring System (EPSS)

This score estimates the probability of this vulnerability being exploited within the next 30 days.
Data provided by [FIRST](https://www.first.org/epss/user-guide).

 (15th percentile)

### Weaknesses

No CWEs

### CVE ID

CVE-2016-10345

### GHSA ID

GHSA-cqxw-3p7v-p9gr

### Source code

[phusion/passenger/](https://github.com/phusion/passenger/)

 Loading

Checking history

See something to contribute?
[Suggest improvements for this vulnerability](/advisories/GHSA-cqxw-3p7v-p9gr/improve).

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_6de88707_20250125_233313.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fphusion%2Fpassenger%2Fcommit%2Fe5b4b0824d6b648525b4bf63d9fa37e5beeae441)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fphusion%2Fpassenger%2Fcommit%2Fe5b4b0824d6b648525b4bf63d9fa37e5beeae441)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fcommit_fragments%2Frepo_layout&source=header-repo&source_repo=phusion%2Fpassenger)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[phusion](/phusion)
/
**[passenger](/phusion/passenger)**
Public

* [Notifications](/login?return_to=%2Fphusion%2Fpassenger) You must be signed in to change notification settings
* [Fork
  549](/login?return_to=%2Fphusion%2Fpassenger)
* [Star
   5k](/login?return_to=%2Fphusion%2Fpassenger)

* [Code](/phusion/passenger)
* [Issues
  238](/phusion/passenger/issues)
* [Pull requests
  2](/phusion/passenger/pulls)
* [Actions](/phusion/passenger/actions)
* [Projects
  0](/phusion/passenger/projects)
* [Wiki](/phusion/passenger/wiki)
* [Security](/phusion/passenger/security)
* [Insights](/phusion/passenger/pulse)

Additional navigation options

* [Code](/phusion/passenger)
* [Issues](/phusion/passenger/issues)
* [Pull requests](/phusion/passenger/pulls)
* [Actions](/phusion/passenger/actions)
* [Projects](/phusion/passenger/projects)
* [Wiki](/phusion/passenger/wiki)
* [Security](/phusion/passenger/security)
* [Insights](/phusion/passenger/pulse)

## Commit

[Permalink](/phusion/passenger/commit/e5b4b0824d6b648525b4bf63d9fa37e5beeae441)

This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository.

Fix writing a tmp file with a predictable name in

[Browse files](/phusion/passenger/tree/e5b4b0824d6b648525b4bf63d9fa37e5beeae441)
Browse the repository at this point in the history

```
passenger-install-nginx-module.

With access to the system, a user could plant a symlink in /tmp that
resulted in a chosen-file overwrite attempt whenever
passenger-install-nginx-module was run, using the access rights of
the executing user, potentially even with chosen content.
```

* Loading branch information

Daniel Knoppel (Phusion)
committed
Dec 5, 2016

1 parent
[f3ab65b](/phusion/passenger/commit/f3ab65bafe717497629ba9da0d0a5048f9ef10c7)

commit e5b4b08

 Show file tree

 Hide file tree

Showing
**2 changed files**
with
**16 additions**
and
**13 deletions**.

* Whitespace
* Ignore whitespace

* Split
* Unified

* CHANGELOG
  [CHANGELOG](#diff-ecec88c33adb7591ee6aa88e29b62ad52ef443611cba5e0f0ecac9b5725afdba)
* bin

  + bin/passenger-install-nginx-module
    [passenger-install-nginx-module](#diff-0c65155833323b616e8a322e9445f7f8d7a28a856a6ed572c7ac0e5066513646)

## There are no files selected for viewing

1 change: 1 addition & 0 deletions

1
[CHANGELOG](#diff-ecec88c33adb7591ee6aa88e29b62ad52ef443611cba5e0f0ecac9b5725afdba "CHANGELOG")

Show comments

[View file](/phusion/passenger/blob/e5b4b0824d6b648525b4bf63d9fa37e5beeae441/CHANGELOG)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -16,6 +16,7 @@ Next version (not yet released) |
|  |  | \* Fixes an issue where passenger-config couldn't restart an app if the TMPDIR variable was set to /tmp |
|  |  | \* `passenger-install-apache-module` now suggests the correct apache package on Ubuntu Xenial. Closes GH-1884. |
|  |  | \* [Standalone] The TempDirToucher will now spend most of its time with reduced privileges, except when it's actively touching files. This allows it to be killed when Passenger is quit in most circumstances. Closes GH-1678. |
|  |  | \* Fixes a file overwrite vulnerability caused by a predictable temporary file being written by `passenger-install-nginx-module`. Thanks to Jeremy Evans for reporting this. |
|  |  | \* [Standalone] Fixes starting Passenger as a non-extant user. Closes GH-1849. |
|  |  | \* Improved look of the error pages for failing to spawn an application (development & production mode), and Error ID is now also shown in production mode. |
|  |  | \* [Standalone] Enable ipv6 support by default in builtin nginx. Closes GH-1873. |
| Expand Down | |  |

28 changes: 15 additions & 13 deletions

28
[bin/passenger-install-nginx-module](#diff-0c65155833323b616e8a322e9445f7f8d7a28a856a6ed572c7ac0e5066513646 "bin/passenger-install-nginx-module")

Show comments

[View file](/phusion/passenger/blob/e5b4b0824d6b648525b4bf63d9fa37e5beeae441/bin/passenger-install-nginx-module)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -38,11 +38,11 @@ PhusionPassenger.locate\_directories |
|  |  | require 'digest/sha2' |
|  |  | require 'optparse' |
|  |  | require 'fileutils' |
|  |  | require 'tmpdir' |
|  |  | PhusionPassenger.require\_passenger\_lib 'platform\_info/ruby' |
|  |  | PhusionPassenger.require\_passenger\_lib 'platform\_info/openssl' |
|  |  | PhusionPassenger.require\_passenger\_lib 'abstract\_installer' |
|  |  | PhusionPassenger.require\_passenger\_lib 'utils/terminal\_choice\_menu' |
|  |  | PhusionPassenger.require\_passenger\_lib 'utils/tmpio' |
|  |  | PhusionPassenger.require\_passenger\_lib 'utils/shellwords' |
|  |  |  |
|  |  | DOWNLOAD\_OPTION = { |
| Expand Down  Expand Up | | @@ -566,19 +566,21 @@ private |
|  |  |  |
|  |  | def pcre\_is\_installed? |
|  |  | if @pcre\_is\_installed.nil? |
|  |  | @pcre\_is\_installed = begin |
|  |  | File.open('/tmp/passenger-check.c', 'w') do |f| |
|  |  | f.puts("#include <pcre.h>") |
|  |  | end |
|  |  | Dir.chdir('/tmp') do |
|  |  | # Nginx checks for PCRE in multiple places... |
|  |  | system("(gcc -I/usr/local/include -I/usr/include/pcre " << |
|  |  | "-I/usr/pkg/include -I/opt/local/include " << |
|  |  | "-c passenger-check.c) >/dev/null 2>/dev/null") |
|  |  | Dir.mktmpdir do |safe\_tmpdir| |
|  |  | @pcre\_is\_installed = begin |
|  |  | File.open("#{safe\_tmpdir}/passenger-check.c", 'w') do |f| |
|  |  | f.puts("#include <pcre.h>") |
|  |  | end |
|  |  | Dir.chdir("#{safe\_tmpdir}") do |
|  |  | # Nginx checks for PCRE in multiple places... |
|  |  | system("(gcc -I/usr/local/include -I/usr/include/pcre " << |
|  |  | "-I/usr/pkg/include -I/opt/local/include " << |
|  |  | "-c passenger-check.c) >/dev/null 2>/dev/null") |
|  |  | end |
|  |  | ensure |
|  |  | File.unlink("#{safe\_tmpdir}/passenger-check.c") rescue nil |
|  |  | File.unlink("#{safe\_tmpdir}/passenger-check.o") rescue nil |
|  |  | end |
|  |  | ensure |
|  |  | File.unlink('/tmp/passenger-check.c') rescue nil |
|  |  | File.unlink('/tmp/passenger-check.o') rescue nil |
|  |  | end |
|  |  | end |
|  |  | return @pcre\_is\_installed |
| Expand Down | |  |

Toggle all file notes
Toggle all file annotations

### 2 comments on commit `e5b4b08`

[![@msmeissn](https://avatars.githubusercontent.com/u/1862900?s=80&v=4)](/msmeissn)

Copy link

### @msmeissn **[msmeissn](/msmeissn)** commented on `[e5b4b08](/phusion/passenger/commit/e5b4b0824d6b648525b4bf63d9fa37e5beeae441)` [Apr 19, 2017](#commitcomment-21813134)

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

I have had Mitre assign [CVE-2016-10345](https://github.com/advisories/GHSA-cqxw-3p7v-p9gr "CVE-2016-10345") to this issue.

Sorry, something went wrong.

All reactions

[![@OnixGH](https://avatars.githubusercontent.com/u/10709325?s=80&v=4)](/OnixGH)

Copy link

Contributor

### @OnixGH **[OnixGH](/OnixGH)** commented on `[e5b4b08](/phusion/passenger/commit/e5b4b0824d6b648525b4bf63d9fa37e5beeae441)` [Apr 19, 2017](#commitcomment-21815271)

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

Thanks! I've retroactively updated the [blog post](https://blog.phusion.nl/2017/01/10/passenger-5-1-1/) as well as the [CHANGELOG](https://github.com/phusion/passenger/commit/c44883b774c8d77a24fec44e2c4f9fc960f48aa0).

Sorry, something went wrong.

All reactions

Please
[sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fphusion%2Fpassenger%2Fcommit%2Fe5b4b0824d6b648525b4bf63d9fa37e5beeae441) to comment.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_9f010656_20250125_233312.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fphusion%2Fpassenger%2Fblob%2Fstable-5.1%2FCHANGELOG)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fphusion%2Fpassenger%2Fblob%2Fstable-5.1%2FCHANGELOG)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fblob%2Fshow&source=header-repo&source_repo=phusion%2Fpassenger)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[phusion](/phusion)
/
**[passenger](/phusion/passenger)**
Public

* [Notifications](/login?return_to=%2Fphusion%2Fpassenger) You must be signed in to change notification settings
* [Fork
  549](/login?return_to=%2Fphusion%2Fpassenger)
* [Star
   5k](/login?return_to=%2Fphusion%2Fpassenger)

* [Code](/phusion/passenger/tree/stable-5.1)
* [Issues
  238](/phusion/passenger/issues)
* [Pull requests
  2](/phusion/passenger/pulls)
* [Actions](/phusion/passenger/actions)
* [Projects
  0](/phusion/passenger/projects)
* [Wiki](/phusion/passenger/wiki)
* [Security](/phusion/passenger/security)
* [Insights](/phusion/passenger/pulse)

Additional navigation options

* [Code](/phusion/passenger/tree/stable-5.1)
* [Issues](/phusion/passenger/issues)
* [Pull requests](/phusion/passenger/pulls)
* [Actions](/phusion/passenger/actions)
* [Projects](/phusion/passenger/projects)
* [Wiki](/phusion/passenger/wiki)
* [Security](/phusion/passenger/security)
* [Insights](/phusion/passenger/pulse)

## Files

 stable-5.1
## Breadcrumbs

1. [passenger](/phusion/passenger/tree/stable-5.1)
/
# CHANGELOG

Copy path Blame  Blame
## Latest commit

## History

[History](/phusion/passenger/commits/stable-5.1/CHANGELOG)2591 lines (2074 loc) · 152 KB stable-5.1
## Breadcrumbs

1. [passenger](/phusion/passenger/tree/stable-5.1)
/
# CHANGELOG

Top
## File metadata and controls

* Code
* Blame

2591 lines (2074 loc) · 152 KB[Raw](https://github.com/phusion/passenger/raw/refs/heads/stable-5.1/CHANGELOG)1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889909192939495969798991001011021031041051061071081091101111121131141151161171181191201211221231241251261271281291301311321331341351361371381391401411421431441451461471481491501511521531541551561571581591601611621631641651661671681691701711721731741751761771781791801811821831841851861871881891901911921931941951961971981992002012022032042052062072082092102112122132142152162172182192202212222232242252262272282292302312322332342352362372382392402412422432442452462472482492502512522532542552562572582592602612622632642652662672682692702712722732742752762772782792802812822832842852862872882892902912922932942952962972982993003013023033043053063073083093103113123133143153163173183193203213223233243253263273283293303313323333343353363373383393403413423433443453463473483493503513523533543553563573583593603613623633643653663673683693703713723733743753763773783793803813823833843853863873883893903913923933943953963973983994004014024034044054064074084094104114124134144154164174184194204214224234244254264274284294304314324334344354364374384394404414424434444454464474484494504514524534544554564574584594604614624634644654664674684694704714724734744754764774784794804814824834844854864874884894904914924934944954964974984995005015025035045055065075085095105115125135145155165175185195205215225235245255265275285295305315325335345355365375385395405415425435445455465475485495505515525535545555565575585595605615625635645655665675685695705715725735745755765775785795805815825835845855865875885895905915925935945955965975985996006016026036046056066076086096106116126136146156166176186196206216226236246256266276286296306316326336346356366376386396406416426436446456466476486496506516526536546556566576586596606616626636646656666676686696706716726736746756766776786796806816826836846856866876886896906916926936946956966976986997007017027037047057067077087097107117127137147157167177187197207217227237247257267277287297307317327337347357367377387397407417427437447457467477487497507517527537547557567577587597607617627637647657667677687697707717727737747757767777787797807817827837847857867877887897907917927937947957967977987998008018028038048058068078088098108118128138148158168178188198208218228238248258268278288298308318328338348358368378388398408418428438448458468478488498508518528538548558568578588598608618628638648658668678688698708718728738748758768778788798808818828838848858868878888898908918928938948958968978988999009019029039049059069079089099109119129139149159169179189199209219229239249259269279289299309319329339349359369379389399409419429439449459469479489499509519529539549559569579589599609619629639649659669679689699709719729739749759769779789799809819829839849859869879889899909919929939949959969979989991000Release 5.2.0-------------
 \* [Apache] Breaking change: to avoid configuration ambiguity, options that act on a per-process level (rather than per-request level) can no longer be used in .htaccess. See the Passenger Library -> configuration -> intro for more info (https://www.phusionpassenger.com/library/config/apache/intro.html#global-per-application-and-per-request-options). \* [Apache] Breaking change: the option PassengerResolveSymlinksInDocumentRoot has been removed (old Passenger 2 compatibility option, see PassengerAppRoot for new method). \* [Apache] Option handling has been refactored to avoid silent conflicts and errors: warnings are now generated for global config options in <VirtualHost> (they conflict between VHosts) and per-application options in <Files>, <FilesMatch> and <If> (silently failed before). \* [Apache] Fixes compilation issues on some systems with macOS 10.13 High Sierra (in addition to the fixes from 5.1.11). \* [Enterprise] Fixes two unnecessary warnings about failure to contact the licensing server, one occurring since version 5.1.8 ("3 days out of contact"), the other since 5.1.11 + Apache ("failure to contact"). \* [Nginx] Fixes the default for the `passenger\_app\_group\_name` to start with the `passenger\_app\_root` rather than the document root (the end remains the same: `passenger\_app\_env`). \* [Standalone] Adds command line support for `start\_timeout` in Passenger Standalone (also removes unnecessary warning when using it in `Passengerfile.json`). \* [Standalone, Nginx] Waits for Nginx to exit before cleaning up temp dir (started happening more since the switch to Nginx graceful shutdown in 5.1.6). Closes GH-1970. \* Deprecated options for Union Station. \* Ruby 2.5 compatibility: handle case where an exception's backtrace may be nil. Closes GH-2011. \* Adds JSON mime type for static file serving. Closes GH-2018. \* Removes packages for Ubuntu 17.04 "Zesty" (EOL 13-jan-2018).
Release 5.1.12--------------
 \* Changes the Debian/Ubuntu install script to completely restart Apache upon upgrade. This prevents issues due to a "half upgraded" state (old Passenger Apache module + new Passenger core). Closes GH-2000. \* Adds Ubuntu 17.10 "Artful" packages. \* Fixes a case in which -- when Passenger is configured with user switching turned off -- it is unable to open the web server log file and aborts during startup. This regression was introduced in 5.1.8. Closes GH-1990. \* [Nginx] The preferred Nginx version is now 1.12.2 \* [Nginx] The preferred PCRE version is now 8.41 (previously 8.39). \* [Standalone] Adds support for using `start\_timeout` in Passengerfile.json. \* [Enterprise] Uses libuv to detect total system RAM, allows for compilation on pre-10.11 macOS. \* [Enterprise] Added a max request queue time option, to limit time requests spend in the request queue. Closes GH-1688. \* Updated libcurl version used in precompiled binaries (used for e.g. gem installs) to 7.56.1 (was: 7.54.1). \* Updated OpenSSL version used in precompiled binaries (used for e.g. gem installs) to 1.0.2m (was: 1.0.2l). \* Updated PCRE version used in precompiled binaries (used for e.g. gem installs) to 8.41 (was: 8.40). \* Updated Ruby versions used in precompiled binaries (used for e.g. gem installs) to include 2.1.10, 2.2.8, 2.3.5, and 2.4.2 (removed: 2.1.9, 2.2.7, 2.3.4, and 2.4.1).
Release 5.1.11--------------
 \* [Apache] Fixes a race condition (segfault) on startup, which primarily affected macOS hosts (regression in 5.1.8 due to the logging improvements). Closes GH-1973. \* [Apache] Fixes compilation on macOS 10.13 High Sierra. \* [Nginx] It is now allowed to specify `passenger\_enabled` in the `http` context as well. \* [Nginx] Namespaced Jsoncpp under the Passenger namespace to avoid collisions with Google Pagespeed's copy when linked into Nginx. \* [Standalone] Enables HTTP/2 support in the Nginx template. Support is only active if SSL is used, to avoid potential issues with HTTP/2 on HTTP ports. Closes GH-1945. \* [Enterprise, Standalone] Adds a new feature that is especially useful on Heroku: deferred port binding. When `--defer-port-binding` is set, Passenger does not listen on the given port until the application has finished spawning. If the application starts slowly then this mechanism can prevent the Heroku request timeout from killing the dyno (the boot timeout still applies). \* [Enterprise, Standalone] Fixes duplicate warnings when Passengerfile.json contains errors. \* [Standalone] `passenger start` now accepts the `--start-timeout` configuration option. \* Adds support for Bundler 2.0's new `gems.rb` and `gems.locked`. Learn more about these in [Gemfile's new clothes](https://depfu.com/blog/2017/09/06/gemfiles-new-clothes). Closes GH-1982. \* Removes Debian packages for Ubuntu 12.04 Precise. \* Fixes compilation warnings on macOS + Clang 9.0. \* Introduces a new check that logs a vulnerability warning if Passenger is run with root permissions while the directory permissions of (parts of) its root dir allow modifications by non-root users. \* Fixes an arbitrary file read vulnerability (if Passenger is running as root and the attacker has access to a user account that hosts an application).
Release 5.1.10--------------
 \* This was an Enterprise-only hotfix release (no changes in Passenger Open Source).
Release 5.1.9-------------
 \* This was an Enterprise-only hotfix release (no changes in Passenger Open Source).
Release 5.1.8-------------
 \* Introduces a shorter and more informative log format. The new format significantly shortens the thread ID, and includes the message's log level (critical, error, warning, notice, etc) so that users can more easily filter out uninteresting messages. \* [Nginx] The Phusion Nginx APT package is upgraded to Nginx version 1.12.1 (previously pinned at 1.10.3 while waiting for a compatible lua module release). \* [Standalone] Automatically uses Nginx to serves static asset URLs that conform to the [webpacker](https://github.com/rails/webpacker) gem's format. Closes GH-1966. \* [Standalone] If configured to listen on a Unix domain socket, properly cleans up this socket on Nginx shutdown. Fixes a regression from 5.1.6. Closes GH-1969. \* [Standalone] Fixes the `--max-requests` option when using the builtin engine. Fixes a regression from 5.1.4. \* [Enterprise] Fixes a potential use-after-free bug when reporting usage data to the Phusion licensing server. This bug only occurs when Passenger Enterprise is running inside a container.
Release 5.1.7-------------
 \* Fixes compilation problems on some systems. \* Upgrades the JSON parser (json-cpp) to version 1.8.1. This makes parsing slightly faster, adds various security checks and fixes some JSON generation issues. \* [Enterprise] Fixes an SSL certificate issue in the license usage data reporter, which only occurs when Passenger Enterprise installed from gem or tarball. The license usage data reporter now searches for the correct system CA path. \* [Enterprise] Fixes a potential use-after-free bug when reporting usage data to the Phusion licensing server, and improves reliability of usage data recording.
Release 5.1.6-------------
 \* Fixes a typo that causes a looping crash when long security update information is sent by the server. In practice we will keep the messages shorter to avoid triggering this until there has been ample time to upgrade. \* Fixes unnecessary process respawn if it was detached and min\_instances is set to 0. Closes GH-1735. \* Introduces APT packages for Debian 9 "Stretch", with Passenger built as dynamic module. Closes GH-1960. \* Changes APT packages for Ubuntu 17.04 "Zesty" from static to dynamic module. \* [Standalone] Now uses graceful shutdown for the Nginx engine under the hood (requested as part of GH-1598). Thanks to PikachuEXE for contributing this. \* [Standalone] Fixes a memory corruption issue in the builtin engine. The issue was introduced in 5.1.5 (settings handling refactoring). \* [Standalone] Cleanup the temp dir before aborting when startup cannot continue, e.g. when Passenger is already running. Closes GH-1953. \* Fixes WSGI crash with Python 3 and non-ASCII characters in headers or the URL. Closes GH-1935. Thanks to n4nn31355 for the assistance. \* [Nginx] The preferred Nginx version is now 1.12.1 (previously 1.10.3), except for the Phusion Nginx APT package, which is pinned at 1.10.3 until an 1.12.x compatible lua module becomes available. \* [Nginx] Fixes CVE-2017-7529, an integer overflow vulnerability in the Nginx range filter module. This is accomplished by upgrading to Nginx 1.12.1, or applying the patch (Phusion Nginx APT package). \* Updated libcurl version used in precompiled binaries (used for e.g. gem installs) to 7.54.1 (was: 7.54.0). \* Updated OpenSSL version used in precompiled binaries (used for e.g. gem installs) to 1.0.2l (was: 1.0.2k). \* Updated GeoIP version used in precompiled binaries (used for e.g. gem installs) to 1.6.11 (was: 1.6.9). \* Updated PCRE version used in precompiled binaries (used for e.g. gem installs) to 8.40 (was: 8.39). \* Adds support for building with MacPorts' OpenSSL. Closes GH-1959.
Release 5.1.5-------------
 \* Updated Boost to version 1.64.0, which fixed a compilation issue on certain Gentoo based setups. Closes GH-1942. \* Improved the error message shown when an app fails to start in time. \* [Apache] Remove option to configure PassengerAppGroupName from .htaccess because, assuming AllowOverride Options is set, malicious users (having an account on the same server) can sometimes collide app group names of other users and capture their traffic. \* Major internal refactoring of settings handling, to prepare for supporting settings changes without restart.
Release 5.1.4-------------
 \* Updated zlib version used in building precompiled binaries (used for e.g. gem installs) to 1.2.11 (was: 1.2.8). \* Updated openssl version used in building precompiled binaries (used for e.g. gem installs) to 1.0.2k (was: 1.0.2j). \* Updated curl version used in building precompiled binaries (used for e.g. gem installs) to 7.54.0 (was: 7.51.0). \* Added support for rbenv when building precompiled binaries (passenger\_binary\_build\_automation submodule). \* Fixes issue when building precompiled binaries (used for e.g. gem installs) found in release 5.1.3. \* Added Ruby 2.4.1 precompiled native extension.
Release 5.1.3-------------
 \* [Standalone] Fixes `install-standalone-runtime` command after regression in 5.1.2. \* Removes unnecessary logging of "No Error" from macOS Security Update Checker. \* Adds support for compiling against the built-in Apache installation supplied with macOS 10.12 Sierra. Previous versions of Passenger failed because macOS Sierra's Apache installation is incomplete and does not supply the apr-config tool. We now work around this by using hardcoded default values for macOS. \* Don't output colorized text during dependency check when output isn't a TTY, unless forced. Closes GH-1902. \* [Nginx] The preferred Nginx version is now 1.10.3 (previously 1.10.2). \* Adds Ubuntu 17.04 "Zesty" packages. \* [Enterprise] Fixes `send-cloud-usage` command when Passenger is installed from gem. \* [Enterprise] Improves robustness of machine properties reporting for pay-as-you-go cloud-license holders. \* [Enterprise] Adds support for reporting available RAM, and CONTAINER\_HOST\_IDENTIFIER envvar, to support RAM-based pricing model. \* Added additional debug level logging for troubleshooting issues with bash scripts. Closes GH-1928. \* Revert private keychain use in the Security Update Checker when run as root on macOS, in order to avoid changing the default System Keychain. Closes GH-1922. Remove Cert and Key from keychain separately, to avoid errors when clearing the client certificate. \* Fix missing openssl check in `passenger-install-apache2-module` dependency checker. Closes GH-1934.
Release 5.1.2-------------
 \* Improve curl check for passenger-install- scripts to catch (very old) curl versions that won't compile against 5.1+. \* Fixes remaining false positives (logging) from the new Meteor cluster warning system. Closes GH-1905. \* Create a private keychain on macOS when the system keychain is defaulted to, this avoids a permissions issue with the system keychain when performing the Security Update Check. This is necessary because the system keychain is the default keychain of daemon users and root on macOS. \* Improve `passenger-memory-stats` to include JRuby processes that fail to rename as expected. Closes GH-1878. \* [Standalone] Don't download or compile Nginx when using the builtin engine. Closes GH-1910. \* [Standalone] Fixes `--nginx-tarball` option of `passenger start` and `passenger-config install-standalone-runtime` (wasn't working). Also verifies that `--nginx-version` is explicitly specified as it should be.
Release 5.1.1-------------
 \* The precompiled version of the PassengerAgent binary (used for e.g. gem installs) now configures (statically linked) libcurl with system keystore, so that the new security update check can successfully validate certs. \* Fixes some false positives (logging) from the new Node and Meteor cluster warning system. Logging is less repetitive and has extra debug info. Closes GH-1905. \* Updates the upload-progress module in the Nginx Debian package. The module version that we linked against in 5.1.0 was 0.9.2, but due to a bug in that version the module didn't work. \* The security update check now reports whether libcurl + SSL backend are statically linked to Passenger, in which case the check also needs to warn about relevant OpenSSL vulnerabilities in the linked library. \* Increases the allowed line lengths emitted by apps at startup. \* Adds support for the unary 'not' operator in the Union Station filter language. \* [Enterprise] Add missing flying-passenger integration mode to security update check.  \* Fixes support for Rails 5.0.1 Action Cable. Specifically, we now support the `options` argument in the `write\_nonblock` method in hijacked Rack IO sockets. \* [Apache] Introduces a small delay to prevent running the Security Update Checker twice at startup.
Release 5.1.0--------------
 \* Upgrades union\_station\_hooks\_core to version 2.1.2. \* [Enterprise] When running a Rails app in multithreaded mode, Passenger Enterprise automatically tags Rails logs with the current thread number. This makes it possible to distinguish logs generated by different threads. \* Fixes permissions issue on Linux when setting OOM score after lowering privileges. Closes GH-1858. \* [Standalone] Allows raw json envvars in Passengerfile.json. Closes GH-1837. \* [Standalone] Make the `max\_requests` option available on the command line as well.  \* Fixes unaligned memory access in base64 decoder on platforms that have strict aliasing requirements (non x86/x86\_64). Closes GH-1646. \* Introduces daily Passenger security update check to warn (error log) if there are newer Passenger versions with important security fixes (describing what was discovered, what is affected, which version has the fix). \* Fixes compilation on Linux when a non-glibc C library is in use. Closes GH-1870. \* `passenger-install-nginx-module` and the standalone compiler now add the http v2, realip and addition module flags for Nginx (just like the APT/RPM/autobuilder already had). Closes GH-1788.  \* [Apache] Fixes PassengerShowVersionInHeader option. Thanks to Sebastian Welther for contributing this. \* Passenger now reports when you try to use Node.js or Meteor clustering, and tries to continue with just a nonfunctional shim in place, so that if your code uses the clustering APIs your app may still work. \* Updates libev config.sub and config.guess to support newer platforms such as the IBM power 8. \* Fixes an issue where passenger-config couldn't restart an app if the TMPDIR variable was set to /tmp \* `passenger-install-apache-module` now suggests the correct apache package on Ubuntu Xenial. Closes GH-1884. \* [Standalone] The TempDirToucher will now spend most of its time with reduced privileges, except when it's actively touching files. This allows it to be killed when Passenger is quit in most circumstances. Closes GH-1678. \* Fixes a file overwrite vulnerability (CVE-2016-10345) caused by a predictable temporary file being written by `passenger-install-nginx-module`. Thanks to Jeremy Evans for reporting this. \* [Standalone] Fixes starting Passenger as a non-extant user. Closes GH-1849. \* Improved look of the error pages for failing to spawn an application (development & production mode), and Error ID is now also shown in production mode. \* [Standalone] Enable ipv6 support by default in builtin nginx. Closes GH-1873. \* [Nginx] Updates to APT package builder (Debian & Ubuntu) with fix for www-data to root privilege escalation via log file handling (CVE-2016-1247/USN-3114-1). \* [Nginx] Updates to RPM package builder (CentOS & RHEL) with fix for 1.10.x system nginx package overriding the nginx from the Passenger repo. Closes GH-1895. \* [Nginx] The preferred Nginx version is now 1.10.2 (previously 1.10.1). \* RPM pkg builder fix for breaking SELinux change in RHEL 7.3. \* RPM pkg builder fix for RHEL6/CentOS6 incompatibility and replacement in Passenger. \* Adds Ubuntu 16.10 "Yakkety" packages.
Release 5.0.30--------------
 \* Changes mbuf block size from 512 to 4096 bytes to better fit modern requests and significantly speed up disk buffering. \* [Nginx] Fixes PCRE checksum after the preferred version update in 5.0.29 (contributed by: clemensg). \* [Apache] Fixes buffer limit crash on large file upload (when core disk buffer can't keep up with client for some time), and limits per-client buffer memory usage to 130 KB. Closes GH-1620. \* Fixes potential hang when an UnseekableSocket gets serialized to json. Closes GH-1838.
Release 5.0.29--------------
 \* Fixes the FreeBSD build breaking due to the `-ldl` flag introduced by the LVE integration patch (5.0.28). Closes GH-1805. \* Fixes per-application interpreter override (ruby, node, python) being ignored in mass deployment mode. Closes GH-1818. \* Fixes incomplete refactor from 5.0.27 that could, under specific conditions, lead to a Passenger crash. Closes GH-1794. \* [Apache] Remove unused code that caused a crash in configurations with thousands of VirtualHost entries. Closes GH-1676. \* [Nginx] Fixes use of invalid logfile name (memory already released) in backup log redirection code. Possibly related to GH-1774. \* [Nginx] The preferred Nginx version is now 1.10.1 (previously 1.10.0). \* [Nginx] The preferred PCRE version is now 8.39 (previously 8.34). \* [Standalone] Passenger Standalone now supports /dev/stdout and /dev/stderr as log file path (via `--log-file` or Passengerfile.json). This is especially useful in Docker containers. In previous versions logging to those paths did not work, resulting in nothing getting logged at all. \* Adds Ubuntu 16.04 "Xenial" packages, deprecates Ubuntu 15.10 “Wily” packages (in accordance with LTS support policy).
Release 5.0.28--------------
 \* Finalizes the fix (5.0.26) for the `rails server` command integration to prevent "missing on\_event" errors. Closes GH-1768. \* Fixes missing -fPIC in Nginx dynamic module compilation (5.0.26) on Linux (rewrite of a patch by Andrei Belov). Closes GH-1793. \* Fixes memory leak that could occur whenever more than 1024 concurrent requests are handled (more likely since the higher concurrency support options from 5.0.24). Closes GH-1797. \* Integrates with CloudLinux LVE and CageFS (security checks and a new option PassengerLveMinUid). Thanks to Oleksiy Shchukin from CloudLinux Inc. for contributing this. \* Fixes the Nginx build when the PCRE library is not available (such as when compiling with `--without-http\_rewrite\_module`). Closes GH-1796. \* Extends `passenger-memory-stats` filter to show the instance dir toucher too (as well as the core in valgrind debug runs). \* Changes the default for friendly error pages to "off" unless the environment is set to "development", rather than "on" unless "staging" or "production". Closes GH-1782. \* [Nginx] The preferred Nginx version is now 1.10.0 (previously 1.8.1).
Release 5.0.27--------------
 \* Fixes encoding issue for Ruby apps that resulted in a 0-byte response body. This occurred when the Ruby native support lib was not used and the app outputted an encoding that doesn't mix with UTF-8 (like UTF-16). Closes GH-1763. \* Fixes Passenger Core and application processes staying on the Watchdogs OOM score (unkillable) when user switching is set to off. Closes GH-1631. \* Supports Debian GNU/kFreeBSD build. Based on contribution by stevenc99. \* Switches a number of places in the Passenger Core over to using the monotonic clock instead of the wallclock for robustness against clock time-stepping. \* Slightly improves out-of-memory detection in some subroutines. \* Fixes incomplete libuv upgrade: some build files were not autoregenerated during the upgrade from 1.5.0 to 1.8.0 in the previous release. \* Warnings about 502 responses that are caused by applications aborting their output while the client is no longer connected (e.g. due to half-close event, reported since 5.0.26) are now reduced to debug level. \* Fixes automatic compilation of Ruby's native\_support library in case Passenger was installed through Debian or RPM packages. Closes GH-1778. \* Fixes memory leak when buffering large request/response bodies to disk (which happens as soon as the 100 KB memory buffer is full). \* Fixes crash if an application spawn fails and a non-UTF8 character appears in the spawn output. Closes GH-1601. \* Updates the `rails server` command integration (from 5.0.25) to prevent "missing on\_event" errors. Closes GH-1768. Update: not all required code made it to the release, the final fix is delivered in 5.0.28. \* [Union Station] Fixes a crash that occurs if all of the following conditions are met: 1) Union Station support is enabled, 2) the client sent at least one header containing the empty string, 3) the application responds with a 4xx or 5xx status. Closes GH-1776.
Release 5.0.26--------------
 \* `passenger-status --show=server` now reports the speed at which new requests are accepted. \* `passenger-status --show=server` now reports `last\_data\_send\_time` and `last\_data\_receive\_time` which can be used to troubleshoot long-running requests (for example, to see if a websocket heartbeat is stuck). \* Passenger now reports TCP half-closing events to Node.js and Meteor applications, which allows them to detect request body and WebSocket closes without having to send data to the client. \* Fixes outputting Content-Length and Transfer-Encoding headers on HEAD requests for Ruby apps. These headers were omitted in previous versions on HEAD requests. \* Bumps the default socket backlog size from 1024 to 2048. \* Upgrades libuv to version 1.8.0. \* When using our RPM packages, system SELinux policy upgrades no longer break the Passenger SELinux policy. Closes GH-1663. \* [Apache] Fixes compilation against Apache installations which include `-pie` in CFLAGS. Closes GH-1756. \* [Nginx, Standalone] Bumps default Nginx worker\_connections from 1024 to 4096 (effectively 2048 because of internal reverse proxy) \* [Nginx, Standalone] Introduces the option `core\_file\_descriptor\_ulimit` and `app\_file\_descriptor\_ulimit`, for setting the file descriptor ulimits of the Passenger core and the application, respectively. \* [Nginx] Passenger can now be [compiled as an Nginx dynamic module](https://www.phusionpassenger.com/library/install/nginx/install\_as\_nginx\_module.html#dynamic-module). Thanks to Ruslan Ermilov from NGINX Inc for contributing this. \* [Standalone] Prints a warning when an unsupported configuration option in Passengerfile.json is set. \* [Standalone] Fixes "address already in use" errors when using the builtin engine. \* [Enterprise] The rolling restart feature now waits until the old process is completely gone (drained its request queue, process exited) before proceeding with rolling restarting the next process. This results in friendlier resource usage during rolling restart. \* [Union Station] Fixes custom logging time arguments getting overwritten by current time for Ruby apps (so some sub-blocks like "framework request processing" appeared shorter than they were). This could happen since the switch to monotonic clock in 5.0.22.
Release 5.0.25--------------
 \* Integrates into the `rails server` command. Please learn more at [the Passenger + Rails integration documentation](https://www.phusionpassenger.com/library/dev/ruby/rails\_integration.html). \* Adds explicit support for Action Cable. Please learn more at the [Passenger Library](https://www.phusionpassenger.com/library/dev/ruby/rails\_integration.html#action\_cable). \* Removes packages for Ubuntu 15.04 Vivid and Debian 6. Ubuntu 15.04 and Debian 6 are still supported, we just don't supply packages for them anymore. If you are an Ubuntu 15.04 or Debian 6 user and you want to use Passenger >= 5.0.25, then please upgrade your distribution, or install Passenger from RubyGems/tarball. \* Fixes a potential crash due to memory corruption in code for `passenger-config reopen-logs`. \* Fixes a potential crash in the large (inbound/outbound) file buffering code. \* Fixes a crash that occurs when using Nginx + HTTPS + Sub-requests. Closes GH-1724. \* Fixes a crash that occurs when using Nginx + syslog and a logfile for Passenger. Also fixes edge cases where the Nginx logpath would override the Passenger logpath. Closes GH-1514 (again). \* [Union Station] Fixes a potential crash due to a wrong limit on snprintf (introduced in 5.0.24 by GH-1633). Closes GH-1744. \* [Union Station] Fixes Union Station Node.js request introspection to allow for application.use method chaining. Closes GH-1745. \* [Union Station] Fixes information about sinks sometimes missing from `passenger-status --show=union\_station`. \* [Union Station] When one or more Union Station gateways are suffering from technical difficulties, the Union Station support code now tries more quickly to reestablish the connection. \* [Standalone] Don't reject the value 0 (meaning no limit) for `--max-request-queue-size`. Closes GH-1743. \* [Standalone] Makes the `--address` option work more reliably if the passed hostname may resolve to multiple addresses. For example, if you pass `--address localhost` then previous versions could fail because Passenger thinks it's an IPv6 address (::1) while Nginx thinks it's an IPv4 address (127.0.0.1). Hostname resolution is now done in a consistent manner. \* [Standalone] Adds the `--unlimited-concurrency-path` configuration option. \* [Standalone] Adds IPv6 support to the builtin engine.
Release 5.0.24--------------
 \* Fixes a crash when the new `force\_max\_concurrent\_requests\_per\_process` option (5.0.22) was used for non-Node.js apps (e.g. Ruby). Closes GH-1720. \* Fixes Solaris compilation. This was a regression due to the patch for GH-1643 in 5.0.22. Closes GH-1694, GH-1701. \* Logs for [Union Station](https://www.unionstationapp.com) provide more information about request queueing. Closes GH-1633. \* Also log HTTP headers to Union Station for HTTP 4xx responses (extends the header logging for HTTP 5xx that was added in 5.0.22) \* Fixes cases where compilation failure of (optional) native utils was not reported. \* On Ruby, no longer traps SIGEXIT. This fixes erroneously setting `$ERROR\_INFO` in `at\_exit` callbacks. Closes GH-1730. \* Fixes a wrong loop exit condition that could cause a deadlock with 100% CPU usage by Passenger core. Closes GH-1709, GH-1732. \* Adds `socket\_backlog` option to configure the Passenger Core socket backlog. For use with e.g. "Resource temporarily unavailable while connecting to upstream" errors. Closes GH-1726. \* [Nginx] The preferred Nginx version is now 1.8.1 (previously 1.8.0). \* [Standalone] Fixes the default value of the `load\_shell\_envvars` option. It's supposed to be disabled by default, but due to a typo it was enabled by default.
Release 5.0.23--------------
 \* Fixes the request acceptor error handling timeout. When an error occurs while Passenger is accepting a request (for example, when Passenger has run out of file descriptors), Passenger is supposed to wait for 3 seconds before trying again. Because of a typo, Passenger actually waited 3 milliseconds. \* [Enterprise] Fixed a regression in the Passenger Standalone Nginx config template that breaks the Mass Deployment feature. \* The mime type for serving static XHTML files is updated. We no longer use the mobile profile, so it is recognized by desktop browsers. Closes GH-1695. \* Improves error messages about Ruby native support to indicate the optional nature. Passenger is able to operate even without the native support extension, but that wasn't clear enough to some users, causing them to think of the old messages as errors. \* [Standalone, Nginx] When using the new `abort\_websockets\_on\_process\_shutdown` configuration option, Passenger waited for the app to close without signaling it that shutdown was in progress. Node.js apps now get a SIGINT. Closes GH-1702. \* With friendly error pages off Passenger would still show a trace (referencing only Passenger code) for unusual spawn errors. This has been changed to a generic error message. Closes GH-1704.
Release 5.0.22--------------
 \* Fixes a header collision vulnerability (CVE-2015-7519, medium severity). Note that this fix involves filtering request headers containing underscores. Please see our blog for detailed vulnerability description and advisory. Thanks to the SUSE security team for reporting this issue. \* [Apache] Fixes compatibility with Apache 2.4.17's mod\_autoindex. Fix contributed by Eric Covener. Closes GH-1642. \* [Standalone] Passenger Standalone now [accepts configuration options from environment variables](https://www.phusionpassenger.com/library/config/standalone/intro.html). This makes using Passenger Standalone significantly easier on Heroku or on systems that follow the 12-factor principle. Closes GH-1661. \* [Standalone] The Nginx configuration template has been cleaned up. It is now significantly easier to edit the Nginx configuration template without breaking compatibility with future versions. \* [Standalone] The `passenger start` command now performs a sanity check on the internally generated Nginx configuration file and advises you accordingly when there is a problem. \* [Standalone] The `passenger status` and `passenger stop` commands now respect Passengerfile.json. Closes GH-1593. \* [Standalone] Passenger Standalone on Solaris now properly tails the application log file. \* [Standalone] Fixes a problem with Passenger Standalone's builtin engine exiting at startup when run on Solaris. \* [Standalone] `passenger start` now accepts the `--envvar` command line option for passing environment variables to the application. \* [Standalone] `passenger start` now accepts the `--memory-limit` configuration option. \* [Standalone] `passenger start` now accepts the `--max-request-queue-size` configuration option. \* [Standalone] `passenger start` now accepts the `--debug-nginx-config` configuration option. This option allows you to view the Nginx configuration file that Passenger Standalone generates internally. \* [Standalone, Nginx] Introduces a new configuration option: `abort\_websockets\_on\_process\_shutdown`. By default, when Passenger shuts down or restarts an application process, it will abort associated Websocket connections. This option allows you to disable that behavior. Closes GH-1686. \* Introduces a new configuration option: `force\_max\_concurrent\_requests\_per\_process`. This option is mostly useful for making dynamic process scaling work in Node.js and Meteor apps. \* Various administration tools, such as `passenger-status`, no longer raise an flock EBADF error on Solaris. Closes GH-1643. \* The `passenger-config reopen-logs` command, when used in combination with Passenger Standalone and the Nginx engine, now also instructs Nginx to reopen its log files. Closes GH-1674. \* Fixes Passenger erroneously adding a `Content-Length` or `Transfer-Encoding` header to Ruby HTTP 204 No Content responses. Closes GH-1595. \* Fixes Union Station logging of Rack response body actions. \* The `passenger-config restart-app` command, when given `--ignore-app-not-running`, now properly exits with a zero status when one or more applications are running, but none of them belonging to the invoking user. Closes GH-1655. \* The `passenger-config validate-install` command no longer prints false warnings about duplicate Passenger installs on systems that use RBenv. Closes GH-1627. \* Fixes race conditions in the automatic building of the Ruby native support extension. Closes GH-1570. \* [Enterprise] Fixes compatibility with byebug 7.0. Closes GH-1662. \* Support Union Station logging for Node.js applications, with Express/MongoDB automatically supported.  \* The Ruby Union Station hooks no longer abort with a fatal error when the application does not call the Union Station initializer method during startup. The error is now only logged. \* In case of an error response (HTTP 5xx), Union Station logging will also contain request headers. \* The Union Station hooks are now more resilient against environment variable problems.
Release 5.0.21--------------
 \* Properly handles Ruby applications that output the `Content-Length` and `Transfer-Encoding` headers in non-standard casing, e.g. `Content-length`. Closes GH-1517. \* Fixes Ruby application loading incompatibilities caused by the use of absolute paths. Closes GH-1596. \* Fixes OpenSSL detection problems on OS X 10.11 El Capitan. OS X 10.11 no longer includes OpenSSL headers, so Passenger will suggest and use OpenSSL from Homebrew. Closes GH-1630. \* Introduces the [secure HTTP headers](https://www.phusionpassenger.com/library/indepth/meteor/secure\_http\_headers.html) feature for Node.js and Meteor apps. This mechanism allows Passenger to send per-request information to the application, while guaranteeing that this information is not spoofed by the client. \* Per-request Apache environment variables are now passed to Node.js and Meteor apps through the [`!~Passenger-Envvars`](https://www.phusionpassenger.com/library/indepth/nodejs/apache\_per\_request\_envvars.html) secure header. \* Fixes some unintentional caching of request-specific environment variables. Closes GH-1479. \* For Node.js applications, Passenger now calls `process.emit('message', 'shutdown')` whenever Passenger shuts down an application process. This is the same hook as used by PM2, allowing applications which use the PM2 graceful shutdown mechanism to be run on Passenger without changes. \* [Enterprise] Fixes a bug in passenger-irb where printing strings larger than 64 KB would cause it to crash. \* [Enterprise] Fixes the `passenger-config restart-app` command so that it performs a non-rolling-restart unless `--rolling-restart` is given as command line option, as per the documentation. Previously, `passenger-config restart-app` without `--rolling-restart` would perform a rolling restart if rolling restarts are configured in the configuration file, but this contradicted documented behavior. Closes GH-1634.
Release 5.0.20--------------
 \* Fixes memory management bugs in Union Station support. \* Improves the error handling in Union Station support. \* `passenger-config validate-install` now properly handles CR characters in Apache configuration files.
Release 5.0.19--------------
 \* Fixes an encoding crash in `passenger-memory-stats` on OS X in case one or more processes are running on the system with names containing UTF-8 characters. Closes GH-1603. \* [Ruby] Fixes handling of HTTP 205 responses, which would cause client connections to freeze. \* Improves Union Station data collection: more Rack I/O events are now logged. The time taken to write out and to close the Rack response body are now logged. \* Improves Union Station data sending: errors are now logged more clearly, and DNS errors are now handled more robustly. \* Improves Union Station troubleshooting: errors can now be diagnosed by running `passenger-status --show=union\_station`. \* Refactors the Union Station Ruby hook code. They have been extracted to external gems. However, they are still bundled with Passenger for ease of use.
Release 5.0.18--------------
 \* Fixes more memory corruption issues in the palloc subsystem. \* Fixes memory corruption issues in the Passenger core that may occur if the application sets many response headers. The issue was caused by an off-by-one bug.
Release 5.0.17--------------
 \* Adds packages for Ubuntu 15.10 "Wily", even though Ubuntu 15.10 hasn't been released yet. \* Fixes some memory corruption issues in the palloc subsystem. Closes GH-1587. \* Fixes the Node.js `PhusionPassenger.on('exit')` event. This event worked if you restart the app or detach an application process, but not if you stop Passenger. \* Fixes support for `passenger\_pre\_start` URLs that contain very long authentication strings. This was caused by the fact that our Base64 encoder generated unexpected newlines. \* [Standalone] Improves application prestarting. Application prestarting is now available in combination with the 'builtin' engine, and now works when SSL is used.
Release 5.0.16--------------
 \* Allows independent configuration of Union Station gateway address, port and certificate. Closes GH-1543. \* Supports seek() such that body.rewind works when using Rack middleware that uses Zlib::GzipReader (e.g. for compressed requests). Closes GH-1553. \* [Apache] Improves detection of Apache configuration file problems. Closes GH-1577. \* [Enterprise] Fixes installation of the Passenger Enterprise Apache module on Debian Testing. \* Fixes logging of HTTP response code for Union Station. This regression was introduced by Passenger 5. Closes GH-1581.  \* Adds a new subcommand `passenger-config about support-binaries-dir`. \* Fixes a regression in the Node.js loader with regard to custom startup files. This bug was introduced in 5.0.14. Closes GH-1557 (again). \* Fixes a crash when a Ruby application is accessed through a sub-URI and a root virtual host at the same time.
Release 5.0.15--------------
 \* Support SHA256 digests for the Rails asset pipeline, as used by Sprockets 3.x. \* Support for JRuby 9.0.0.0. Closes GH-1562. \* Fixes some bugs in Union Station support, which causes some data (such as controller information and exceptions) to not be logged. \* The old Users Guides have been deprecated in favor of the [Passenger Library](https://www.phusionpassenger.com/library/). The Users Guides now redirect to appropriate sections in the Passenger Library.
Release 5.0.14--------------
 \* [Standalone] Relative path handling has been improved. In previous versions, relative paths were not handled in a consistent manner. Relative paths are now handled consistently according to the following rules:
 - If a relative path is given via a command line option, then it is relative to the current working directory. - If a relative path is given via Passengerfile.json, then it is relative to Passengerfile.json.
 Closes GH-1557. \* [Standalone] The `--disable-turbocaching` now works with the Nginx engine.
Release 5.0.13--------------
 \* The `passenger-config restart-app` command now supports the option `--ignore-passenger-not-running`. If this option is given, the command will exit normally instead of exiting with an error, if Passenger is not running. This option is useful in deployments involving Passenger Standalone. In an initial deployment, Passenger Standalone may not yet be running. Passing this option allows you to ignore that issue. \* SELinux policy issues in the RPMs have been fixed. \* [Apache] `passenger-config reopen-logs` didn't work on Apache unless you explicitly set `PassengerLogFile`. This has now been fixed. \* [Standalone] Due to some internal refactorings, the Passenger Standalone Nginx configuration template has changed. If you used a custom Nginx configuration template, please merge our latest changes into it.
Release 5.0.12--------------
 \* [Enterprise] Fixed passenger-irb. It was broken in 5.0.10 because of the change that made using admin commands without sudo possible.
Release 5.0.11--------------
 \* In 5.0.10, admin tools such as `passenger-status` and `passenger-config restart-app` display an authorization error if they are run without sudo, while at the same time Passenger isn't serving any applications. Since this is confusing, they have now been modified to display a more appropriate error message. \* Fixes a bug in the RPMs that prevent admin tools such as `passenger-status` and `passenger-config restart-app` from working when they are invoked without root privileges. \* Fixes a bug on OS X that prevent admin tools such as `passenger-status` and `passenger-config restart-app` from detecting Passenger instance directories when they are invoked without root privileges. Closes GH-1535. \* Fixes a bug that causes Passenger not to work if the HOME environment variable is not set. \* Fixes compatibility with non-Rails Ruby apps that require the actionview gem. Closes GH-1547. \* Fixes some non-fatal "permission denied" error that may occasionally occur if user switching is turned off. Closes GH-1541. \* Relative values for the `pid\_file` and `log\_file` options in Passengerfile.json are now supported. \* If Passengerfile.json contains a syntax error, Passenger Standalone now correctly prints an error message instead of crashing. \* Sending a SIGABRT signal to a Ruby process now properly makes it terminate. \* The `passenger-config restart-app` command now accepts `.` as parameter, which it will interpreter as "restart the app in the current working directory". Closes GH-1386. \* [Apache] Setting `PassengerLogLevel` no longer redirects Apache's own stderr to that log file. Closes GH-1373. \* [Standalone] Passenger Standalone's Nginx engine now includes the RealIP module. Closes GH-1389. \* [Standalone] The `--max-preloader-idle-time` option has been added.
Release 5.0.10--------------
 \* It is now possible to run `passenger-status`, `passenger-config restart-app` and other admin commands without using sudo. When run without sudo, these admin commands will allow you to operate on apps and processes that are owned by the user that invoked the admin command. Closes GH-1392. \* Fixes a crash introduces in 5.0.9 due to not properly initializing a variable. Closes GH-1530. \* The `passenger-config reopen-logs` command now works by instructing the Watchdog process to reopen the log file, while instructing the other Passenger processes to re-inherit the log file from the Watchdog instead of trying to reopen the log file on their own. This makes log file reopening more robust. Closes GH-1452. \* `passenger-config restart-app` no longer leaves the terminal in a state with black background. Closes GH-1526. \* `passenger-config admin-command` has been renamed to `passenger-config api-call` in order to avoid confusion with any potential admin interfaces that we will introduce in the future. \* If Union Station support is enabled, process and system metrics weren't being sent correctly to Union Station. This has been fixed. \* [Enterprise] Fixes the fact that the Passenger Enterprise RPM didn't correctly set SELinux permissions on its own files. \* [Apache] passenger-install-apache2-module no longer aborts with an error if the Apache configuration file contains errors. Closes GH-1525. \* [Apache] Fixes a typo that would cause passenger-install-apache2-module to crash on Red Hat and CentOS systems on which the SELinux command line tools are not installed. Closes GH-1527.
Release 5.0.9-------------
 \* The casing of original headers as generated by the application are now preserved, instead of being downcased. This fixes compatibility issues with broken HTTP clients. Closes GH-1436. \* Internal refactoring: we've replaced libeio with libuv. This makes some of our code simpler. Closes GH-1428. \* When the passenger-status tool tries to cleanup a stale instance directory, it will no longer abort with an error when it fails to do that. It will now merely print a warning. Fixes [StackOverflow question 30354732](http://stackoverflow.com/questions/30354732/cap-aborted-capistrano-aborts-rails-deploy-while-attempting-to-chown-tmp-p/30357100#30357100). \* Fixes compilation problems on Solaris. \* The Ruby handler has been made more robust. Previously, it was possible for applications to corrupt connections by returning incorrect Rack responses. This may cause connections to get stuck. The Rack handler has been hardened to ensure that connections will never get corrupted or stuck. Closes GH-1512. \* The Ruby handler now closes the Rack response body even when the socket connection is hijacked by the application. The Rack specification is unclear about what to do in this case, and different Ruby app servers do different things. We have found that by closing the body object anyway, we maximize compatibility with existing Rack middlewares and apps, such as Rack::Lock. Background information about this issue can be found at https://github.com/ngauthier/tubesock/issues/10#issuecomment-72539461. \* Fixes a crash that could occur if some HTTP request headers are present, but have the empty value. Closes GH-1524. \* Fixes a permission problem that prevents the web server from communicating with Passenger when user switching is off. Closes GH-1520. \* Fixes a few small one-time memory leaks in the Passenger agent. This wraps up the workitems discovered in valgrind runs on earlier versions. \* Fixes use of uninitialized metrics. This could happen for a brief moment after spawning. \* [Apache] If you pass the `--apxs2-path` parameter to `passenger-install-apache2-module`, and the apxs2 path that you specified is not in PATH, then the installer would think that Apache installation is broken. This has been fixed. \* [Apache] A `Connection: close` header that was used for internal communication between Passenger processes was being leaked to the client, which breaks HTTP keep-alive connections. This has been fixed. Closes GH-1516. \* [Nginx] The preferred Nginx version is now 1.8.0. It was previously 1.6.3. \* [Nginx] Passenger now passes to the application the raw URI as sent by the client, as long as Nginx didn't modify the URI (e.g. as part of rewrite rules). This means that escaped slashes (%2F) in the URI now work correctly and out-of-the-box as long as there are no applicable rewrite rules. \* [Nginx] Fixes that crash that would occur if Nginx is configured to log to syslog. And to prevent log messages from disappearing into a black hole, Passenger will now ask you to set `passenger\_log\_file` if Nginx is configured to log to syslog. Closes GH-1514. \* [Standalone] Prevents an existing instance from being shut down if starting a new instance fails.
Release 5.0.8-------------
 \* We now supply Debian 8 and Ubuntu 15.04 packages. Closes GH-1494 and GH-1400. \* We now supply Red Hat 6, Red Hat 7, CentOS 6 and CentOS 7 packages. \* We no longer supply Ubuntu 10.04 packages because Ubuntu 10.04 is no longer supported by Canonical. \* Fixes a Passenger crash (SIGSEGV) that occurs occasionally when out-of-band garbage collection is enabled. Closes GH-1469. \* Fixes a Passenger crash (SIGSEGV) that occurs occasionally with redirects to relative URLs. Closes GH-1513. \* Fixes cases when Passenger shuts down more processes than is allowed by the `min\_instances` limit. Closes GH-1500. \* Fixes "Bad Gateway" errors that would occur when an application sets the X-Sendfile or X-Accel-Redirect header, together with a non-empty response body. Closes GH-1498. \* Fixes the fact that Passenger agent processes don't lower their privilege when user switching is turned off. \* Fixes autodetection of Apache on Gentoo. Closes GH-1510. \* Fixes compilation problems on Solaris. Closes GH-1508. \* [Standalone] Adds the `--pool-idle-time` command line parameter. \* [Standalone] Adds the `--auto` command line parameter for running non-interactively. This supresses prompts. Closes GH-1511.
Release 5.0.7-------------
 \* Supports changed way of specifying settings for (non-bundled) Meteor apps. Closes GH-1403. \* Fixes an integer-to-string conversion bug in the code responsible for buffering chunked request bodies. This bug could cause the PassengerAgent to crash due to an exception. Thanks to Marcus Rückert of SUSE for reporting this. \* Request-specific environment variables are no longer cached. This fixes a number of issues, such as Shibboleth not working properly and conflicts between HTTPS and non-HTTPS virtual hosts. Closes GH-1472. \* Fixes a memory corruption bug that would be triggered when using `passenger\_base\_uri`. The memory corruption bug resided in the code for resolving symlinks. Closes GH-1388. \* Re-introduced signal catchers during shutdown, to allow clean shutdown in Foreman. Closes GH-1454. \* `passenger-status --show=xml` no longer outputs the non-XML header by default. This fixes a regression as reported in a comment in GH-1136. \* Passenger now prefers to load Rack and Bundler from RubyGems instead of from `vendor\_ruby`. This solves some issues with Rack and Bundler on Debian systems. Closes GH-1480 and GH-1478. \* The turbocache no longer caches responses that contain the `X-Sendfile` or the `X-Accel-Redirect` header. \* The preferred Nginx version has been upgraded to 1.6.3. \* The logging agent no longer aborts with an error if one of the Passenger root directory's parent directories is not world-executable. Closes GH-1487. \* [Standalone] It is now possible to configure the Ruby, Node.js and Python executable to use in Passenger Standalone through the command line options --ruby, --nodejs and --python. Closes GH-1442. \* [Standalone] Running `passenger start --engine=builtin --daemonize` would fail with a timeout error. This has been fixed. \* [Standalone] Running `passenger start --nginx-version=XXX` would crash. This has been fixed. Closes GH-1490. \* [Apache] Fixed some issues with X-Sendfile. Closes GH-1376. \* [Apache] If the installer fails to autodetect Apache while the installer is running as a normal user, it will now ask you to give it root privileges. Closes GH-1289. \* [Apache] The installer now validates your Apache configuration file to check for common problems. The validator can also be accessed separately by running `passenger-config validate-install --validate-apache2`. \* [Nginx] Introduces the `passenger\_read\_timeout` option for rare cases when server needs more than the default 10 minute timeout. Contributed by pkmiec. Closes [GH-PR-34](https://github.com/phusion/passenger/pull/34). \* [Nginx] The Nginx module now looks for index.html if the path ends in / so that it works intuitively, without needing to use try\_files. \* Fixes wrong memory address display in crash dumps. Thanks to thoughtpolice for pointing it out. \* Fixes an ugly backtrace that would be shown if an invalid request is made to an application process using the private HTTP interface. Contributed by jbergler. Closes GH-1311. \* Various documentation improvements. Closes [GH-PR-1332](https://github.com/phusion/passenger/pull/1332), [GH-PR-1354](https://github.com/phusion/passenger/pull/1354), [GH-PR-1216](https://github.com/phusion/passenger/pull/1216), [GH-PR-1385](https://github.com/phusion/passenger/pull/1385), [GH-PR-1302](https://github.com/phusion/passenger/pull/1302).
Release 5.0.6-------------
 \* The turbocache no longer caches responses for which the Cache-Control header contains "no-cache". Please note that "no-cache" does not mean "do not cache this response". Instead, it means "any caching servers may only serve the cached response after validating it". Since the turbocache does not support validation, we've chosen to skip caching instead.
 Coincidentally, this change "fixes" problems with applications that erroneously use "no-cache" as a flag for "do not cache this response". What these applications should actually use is "no-store". We recommend the developers of such applications to change their caching headers in this manner, because even if Passenger doesn't unintentionally cache the response, any intermediate proxies that visitors are behind may still cache the response. \* Fixes a number of memory leaks. Memory was leaked upon processing a request with multiple headers, upon processing a response with multiple headers, and upon processing a response with Set-Cookie headers. Every time such a request or response was processed, 512 bytes of memory was leaked due to improperly dereferencing relevant memory buffers. Closes GH-1455. \* Fixes various bugs related to Union Station data collection.
 Union Station is our upcoming application analytics and performance monitoring SaaS platform. It is opt-in: no data is collected unless you turn the feature on. \* Fixes a Union Station-related file descriptor leak. Closes GH-1439. \* Fixes some bugs w.r.t. use of uninitialized memory. \* More informative error message if a support binary is not found, including a resolution hint. Closes GH-1395. \* [Apache] `SetEnv` variables are now passed as Rack/CGI/request variables. This was also the case in Passenger 4, but not in Passenger 5.0.0-5.0.5. We've restored the old behavior because the behavior in 5.0.0-5.0.5 breaks certain Apache modules such as Shibboleth. Closes GH-1446. \* [Standalone] PID and log files now correctly created if user specifies relative path.
Release 5.0.5-------------
 \* Fixes various crashes due to use of uninitialized memory. One such crash is documented in GH-1431. \* Fixes a connection stall in the Apache module. Closes GH-1425. \* Fixes a potential read-past-buffer bug in string-to-integer conversion routines. Thanks to dcb314 for spotting this. Closes GH-1441. \* Fixes a compilation problem on Solaris. This problem was caused by the fact that `tm\_gmtoff` is not supported on that platform. Closes GH-1435. \* There is now an API endpoint for force disconnecting a client: `passenger-config admin-command DELETE /server/<client name>.json`. Closes GH-1246. \* Fixes some file descriptor leaks. These leaks were caused by the fact that keep-alive connections with application processes were not being closed properly. Closes GH-1439. \* In order to more easily debug future file descriptor leaks, we've introduced the `PassengerFileDescriptorLogFile` (Apache) and `passenger\_file\_descriptor\_log\_file` (Nginx) config options. This allows Passenger to log all file descriptor open/close activity to a specific log file. \* The `PassengerDebugLogFile` (Apache) and `passenger\_debug\_log\_file` (Nginx) configuration options have been renamed to `PassengerLogFile` and `passenger\_log\_file`, respectively. The old name is support supported for backward compatibility reasons. \* [Enterprise] Fixes a bug in Flying Passenger's `--instance-registry-dir` command line parameter. This command line parameter didn't do anything. \* [Enterprise] The Flying Passenger daemon no longer supports the `--max-preloader-idle-time` config option. This is because the config option never worked. The correct way to set the max preloader idle time is through the Nginx config option, but this was wrongly documented, so the documentation has been fixed.
Release 5.0.4-------------
 \* Fixes a compilation problem introduced in 5.0.3.
Release 5.0.3-------------
 \* [Standalone] When using the builtin engine, `passenger start` may crash during startup due to an initialization race condition. This has been fixed. \* [Enterprise] Fixes a bug in passenger-irb. Running passenger-irb without a PID parameter worked, but running it with a PID parameter didn't. \* Fixes an integer overflow that resulted in a file descriptor leak and stalled client connections. Closes GH-1412. \* Truncates Passenger source code paths in logs (to 3 chars) to reduce redundant info. Closes GH-1383. \* Fixes invalid JSON output for non-finite double values (e.g. from the HTTP JSON API). Closes GH-1408. \* All hooks now set the `PASSENGER\_HOOK\_NAME` environment variable. This variable is set to the name of the hook that is being called. \* The Ruby handler no longer tries to call #force\_encoding on response body strings, which fixes an incompatibility with apps/libraries that return frozen body strings. Closes GH-1414. \* If the Ruby handler crashes while processing a Rack response body, it will now no longer stall the connection. \* Fixes env.SERVER\_PORT containing 80 instead of 443 when using https on default port. Closes GH-1421. \* We now handle errors in the `poll()` system call better. This might fix some crashes during shutdown which manifest on FreeBSD.
Release 5.0.2-------------
 \* Fixes a connection freeze that could occur when processing large responses. This would manifest itself under the error message "This website is under heavy load" or "Request queue is full, returning an error". Closes GH-1404. \* Debian and Ubuntu packages have been reintroduced. \* When `passenger-config restart-app` is run interactively, if Passenger is not serving any applications, then the command now prints an error message instead of showing a menu with only a "Cancel" option. \* Fixes a compilation problem on FreeBSD 10 (contributed by: clemensg). Closes GH-1401. \* [Standalone] Fixes a crash that would occur if you use the `--ctl` parameter. \* [Enterprise] The `--max-request-time` option has been added to Passenger Standalone. \* [Enterprise] The `max\_request\_time\_reached` hook has been introduced. This hook allows you to run diagnostics on a process that that took too long to respond to a request.
Release 5.0.1-------------
 \* The `passenger-config restart-app` command is now more user friendly. When run in a terminal, it will show an interactive menu, allowing you to select the app to restart. Closes GH-1387. \* Fixed a crash bug in the handling of sticky session cookies. \* Log failed program in error message, not its command line (contributed by: paisleyrob). Closes GH-1397. \* [Nginx] Fixes cases in which Passenger overrides the Nginx handler function even when it shouldn't, for example when Passenger is disabled. Closes GH-1393. \* [Enterprise] The `sticky\_sessions` and `envvars` options in Passengerfile.json is now also supported in mass deployment mode.
Release 5.0.0 release candidate 2---------------------------------
 \* Fixes an installation problem with the Ruby gem due to incorrect Makefile generation. Closes GH-1382. \* More helpful message when request queue is full. Closes GH-1375.
Release 5.0.0 release candidate 1---------------------------------
 \* Fixed Date headers not being formatted in the GMT timezone. Closes GH-1367. \* Fixed Passengerfile.json/passenger-standalone.json not being properly loaded in Passenger Standalone. \* Fixed support for sticky sessions. \* Fixed an infinite loop if the ApplicationPool garbage collector fails due to an exception. Closes GH-1360. \* Fixed Passenger Standalone exiting prematurely when the HelperAgent crashes. Exiting prematurely is not supposed to happen because the watchdog will restart the HelperAgent. Closes GH-1339. \* Fixed a crash that occurs when using a non-standard startup file value. Closes GH-1378. \* When dumping system metrics during error page generation, the `passenger-config` command is now invoked under the same Ruby interpreter as the app, instead of the one in PATH. Closes GH-1381. \* When a Ruby process crashes due to an uncaught exception, this fact is now properly logged. \* Specifying 0 for the `max\_pool\_size` config option no longer results in a crash. Closes GH-1334. \* The timeouts when downloading Passenger Standalone binaries and source files are now customizable. Closes GH-1295. \* The `envvars` option is now supported in Passengerfile.json, for passing environment variables to the application. Closes GH-1377. \* Introduced `hook\_queue\_full\_error` for request queue overflows. Closes GH-1358. \* [Ruby] Fixed handling of "transfer-encoding chunked" response bodies which contain zero-sized chunks. \* [Nginx] It is no longer necessary to re-specify `passenger\_enabled` in `location` contexts. Closes GH-1338. \* [Enterprise] Fixed a bug in mass deployment reloading. \* [Enterprise] Fixed a bug in mass deployment daemonization. \* [Enterprise] Fixed passenger-irb. Closes GH-1350. \* [Enterprise] The mass deployment mode now supports the `app\_type` and `startup\_file` configuration options in Passengerfile.json/passenger-standalone.json. Closes GH-1366.
Release 5.0.0 beta 3--------------------
 \* The turbocache has received major updates and fixes based on excellent feedback Chris Heald and the community. First, several bugs w.r.t. the handling of caching headers have been fixed. Second, the turbocache has become slightly more conservative for security reasons. In previous versions, default cacheable responses (as defined by RFC 7234) were cached unless caching headers tell us not to. Now, default cacheable responses are only cached if caching headers explicitly tell us to. This change was introduced because there are many applications that set incorrect caching headers on private responses. This new behavior is currently not configurable, but there are plans to make it configurable in 5.0.0 release candidate 1. \* Introduced a new configuration option, `passenger\_response\_buffer\_high\_watermark` (Nginx) and `PassengerResponseBufferHighWatermark` (Apache), for configuring the behavior of the response buffering system. Closes GH-1300. \* Fixed more cookie handling issues. Closes GH-1310. \* Fixed various WebSocket issues. Closes GH-1306. \* Fixed some crashes caused by race conditions. Closes GH-1326. \* Fixed issues with handling POST data. Closes GH-1331. \* Fixed some issues on Heroku. Closes GH-1329. \* Fixed some integer overflows. Fix contributed by Go Maeda. Closes GH-1357. \* Fixed the `passenger-status --show=union\_station` command. Closes GH-1336. \* Nginx versions earlier than 1.6 are no longer supported. \* Improved state introspection.
Release 5.0.0 beta 2--------------------
 \* Fixed handling of multiple Set-Cookie headers. Closes GH-1296. \* `passenger-config system-metrics` now works properly if the agent is installed in ~/.passenger. Closes GH-1304. \* Documentation enhancements by Igor Vuk. Closes GH-1318. \* Fixed some crasher bugs. \* [Standalone] User switching is now correctly disabled. \* [Standalone] Fixed the `--thread-count` parameter. \* [Apache] IPs set by mod\_remoteip are now respected. Closes GH-1284. \* [Apache] Fixed support for gzipped chunked responses. Closes GH-1309.
Release 5.0.0 beta 1--------------------
Version 5.0.0 beta 1 contains major changes. It's mostly compatible with version 4, but there are a few minor breakages, which are described below. Major changes and notable breakages are:
 \* Performance has been much improved. This is thanks to months of optimization work. You can learn more at www.rubyraptor.org. \* We've published a [server optimization guide](https://www.phusionpassenger.com/documentation/ServerOptimizationGuide.html) for those who are interested in tuning Phusion Passenger. \* Support for Rails 1.2 - 2.2 has been removed, for performance reasons. Rails 2.3 is still supported. \* Phusion Passenger now supports integrated HTTP caching, which we call turbocaching. If your app sets the right HTTP headers then Phusion Passenger can tremendously accelerate your app. It is enabled by default, but you can disable it with `--disable-turbocaching` (Standalone), `PassengerTurbocaching off` (Apache), or 'passenger\_turbocaching off' (Nginx). \* Touching restart.txt will no longer restart your app immediately. This is because, for performance reasons, the stat throttle rate now defaults to 10. You can still get back the old behavior by setting `PassengerStatThrottleRate 0` (Apache) or `passenger\_stat\_throttle\_rate 0` (Nginx), but this is not encouraged. Instead, we encourage you to use the `passenger-config restart-app` tool to initiate restarts, which has immediate effect. \* Websockets are now properly disconnected on application restarts. \* The Phusion Passneger log levels have been completely revamped. If you were setting a log level before (e.g. through `passenger\_log\_level`), please read the latest documentation to learn about the new log levels. \* If you use out-of-band garbage collection, beware that the `X-Passenger-Request-OOB-Work` header has now been renamed to `!~Request-OOB-Work`. \* When using Rack's full socket hijacking, you must now output an HTTP status line. \* [Nginx] The `passenger\_set\_cgi\_param` option has been removed and replaced by `passenger\_set\_header` and `passenger\_env\_var`. \* [Nginx] `passenger\_show\_version\_in\_header` is now only valid in the `http` context. \* [Apache] The `PassengerStatThrottleRate` option is now global.
Minor changes:
 \* The minimum required Nginx version is now 1.6.0. \* The instance directory is now touched every hour instead of every 6 hours. This should hopefully prevent more problems with /tmp cleaner daemons. \* Applications are not grouped not only on the application root path, but also on the environment. For example, this allows you to run the same app in both production and staging mode, with only a single directory, without further configuration. Closes GH-664. \* The `passenger\_temp\_dir` option (Nginx) and the `PassengerTempDir` option (Apache) have been replaced by two config options. On Nginx they are `passenger\_instance\_registry\_dir` and `passenger\_data\_buffer\_dir`. On Apache they are `PassengerInstanceRegistryDir` and `PassengerDataBufferDir`. On Apache, `PassengerUploadBufferDir` has been replaced by `PassengerDataBufferDir`. \* Command line tools no longer respect the `PASSENGER\_TEMP\_DIR` environment variable. Use `PASSENGER\_INSTANCE\_REGISTRY\_DIR` instead. \* `passenger-status --show=requests` has been deprecated in favor of `passenger-status --show=connections`. \* Using the SIGUSR1 signal to restart a Ruby app without dropping connections, is no longer supported. Instead, use `passenger-config detach-process`. \* Introduced the `passenger-config reopen-logs` command, which instructs all Phusion Passenger agent processes to reopen their log files. You should call this after having rotated the web server logs. \* [Standalone] The Phusion Passenger Standalone config template has changed. Users are encouraged to update it. \* [Standalone] `passenger-standalone.json` has been renamed to `Passengerfile.json`. \* [Standalone] `passenger-standalone.json`/`Passengerfile.json` no longer overrides command line options. Instead, command line options now have the highest priority.
Release 4.0.60--------------
Note that 4.0.60 is a source-only maintenance release. There will not be any binaries, Debian or RPM packages for this release.
 \* Adds OS X El Capitan support. \* Updates preferred Nginx version from 1.6.2 to 1.6.3. \* Fixes a header collision vulnerability (CVE-2015-7519, medium severity). Please see our blog for detailed vulnerability description and advisory. Thanks to the SUSE security team for reporting this issue. \* Fixes the password protection of internal Phusion Passenger processes.
 For security reasons, Phusion Passenger limits access to internal processes, by using Unix file permissions and randomly generated passwords that only authorized internal processes know. It turns out that this password wasn't set correctly, which has now been fixed. There was no security vulnerability, because the file permissions already provide sufficient security. The password only serves as an extra layer of security just in case there is a problem with the former.
 This issue is not at all related to any application-level security or application-level passwords. Any database passwords, keys, or secrets used and generated by applications have got nothing to do with the nature of this issue. This issue only relates to some randomly generated passwords that Passenger uses internally, for its internal operations.
Release 4.0.59--------------
 \* [Enterprise] Fixed support for free-style Node.js apps.
Release 4.0.58--------------
 \* [Enterprise] Fixed a bug in the Debian packages which caused Flying Passenger to break when used with non-system Rubies. \* The Debian packages no longer require Ruby 1.9. Closes GH-1353.
Release 4.0.57--------------
 \* Fixed a native extension compatibility problem with Ruby 2.2. Closes [ruby-core:67152](https://bugs.ruby-lang.org/issues/10656). \* Fixed compatibility with Nginx 1.7.9. Closes GH-1335.
Release 4.0.56--------------
 \* Fixed a file descriptor leak that manifests when an error page is shown. Contributed by Paul Bonaud, closes GH-1325. \* Improved Node.js request load balancing. Closes GH-1322. Thanks to Charles Vallières for the analysis.
Release 4.0.55--------------
 \* Supports Ruby 2.2. Closes GH-1314. \* Fixed Linux OS name detection.
Release 4.0.54--------------
 \* Contains a licensing-related hot fix for Enterprise customers.
Release 4.0.53--------------
 \* Upgraded the preferred Nginx version to 1.6.2. \* Improved RVM gemset autodetection. \* Fixed some Ruby 2.2 compatibility issues.
Release 4.0.52--------------
 \* Fixed a null termination bug when autodetecting application types. \* Node.js apps can now also trigger the inverse port binding mechanism by passing `'/passenger'` as argument. This was introduced in order to be able to support the Hapi.js framework. Please read http://stackoverflow.com/questions/20645231/phusion-passenger-error-http-server-listen-was-called-more-than-once/20645549 for more information regarding Hapi.js support. \* It is now possible to abort Node.js WebSocket connections upon application restart. Please refer to https://github.com/phusion/passenger/wiki/Phusion-Passenger:-Node.js-tutorial#restarting\_apps\_that\_serve\_long\_running\_connections for more information. Closes GH-1200. \* Passenger Standalone no longer automatically resolves symlinks in its paths. \* `passenger-config system-metrics` no longer crashes when the system clock is set to a time in the past. Closes GH-1276. \* `passenger-status`, `passenger-memory-stats`, `passenger-install-apache2-module` and `passenger-install-nginx-module` no longer output ANSI color codes by default when STDOUT is not a TTY. Closes GH-487. \* `passenger-install-nginx-module --auto` is now all that's necessary to make it fully non-interactive. It is no longer necessary to provide all the answers through command line parameters. Closes GH-852. \* Minor contribution by Alessandro Lenzen.
Release 4.0.50--------------
 \* Fixed a potential heap corruption bug. \* Added Union Station support for Rails 4.1.
Release 4.0.49--------------
 \* Upgraded the preferred Nginx version to 1.6.1. \* Fixed a crash that may be triggered by the `passenger\_max\_requests` feature. \* Introduced the `spawn\_failed` hook, which is called when an application process fails to spawn. You could use this hook to setup an error notification system. Closes GH-1252. \* Fonts, RSS and XML are now gzip-compressed by default in Phusion Passenger Standalone. Thanks to Jacob Elder. Closes GH-1254. \* Fixed some user and group information lookup issues. Closes GH-1253. \* Fixed some request handling crashes. Closes GH-1250. \* Fixed some compilation problems on Gentoo. Closes GH-1261. \* Fixed some compilation problems on Solaris. Closes GH-1260.
Release 4.0.48--------------
 \* Fixed a race condition while determining what user an application should be executed as. This bug could lead to applications being run as the wrong user. Closes GH-1241. \* [Standalone] Improved autodetection of Rails asset pipeline files. This prevents Standalone from incorrectly setting caching headers on non-asset pipeline files. Closes GH-1225. \* Fixed compilation problems on CentOS 5. Thanks to J. Smith. Closes GH-1247. \* Fixed compilation problems on OpenBSD. \* Fixed compatibility with Ruby 1.8.5.
Release 4.0.47--------------
 \* [Enterprise] Fixed a bug in Flying Passenger's `--max-preloader-idle-time` option.
Release 4.0.46--------------
 \* Further improved Node.js and Socket.io compatibility. \* Sticky session cookies have been made more reliable. \* Fixed WebSocket upgrade issues on Firefox. Closes GH-1232. \* The Python application loader now inserts the application root into `sys.path`. The fact that this was not done previously caused a lot of confusion amongst Python users, who wondered why their `passenger\_wsgi.py` could not import any modules from the same directory. \* Fixed a compatibility problem with Django, which could cause Django apps to freeze indefinitely. Closes GH-1215. \* Logging of application spawning errors has been much improved. Full details about the error, such as environment variables, are saved to a private log file. In the past, these details were only viewable in the browser. This change also fixes a bug on Phusion Passenger Enterprise, where enabling Deployment Error Resistance causes error messages to get lost. Closes GH-1021 and GH-1175. \* Fixed a regression in Node.js support. When a Node.js app is deployed on a HTTPS host, the `X-Forwarded-Proto` header wasn't set in 4.0.45. Closes GH-1231. \* Passenger Standalone no longer, by default, loads shell startup files before loading the application. This is because Passenger Standalone is often invoked from the shell anyway. Indeed, loading shell startup files again can interfere with any environment variables already set in the invoking shell. You can still tell Passenger Standalone to load shell startup files by passing `--load-shell-envvars`. Passenger for Apache and Passenger for Nginx still load shell startup files by default. \* Passenger Standalone now works properly when the HOME environment variable isn't set. Closes GH-713. \* Passenger Standalone's `package-runtime` command has been removed. It has been broken for a while and has nowadays been obsolete by our automatic [binary generation system](https://github.com/phusion/passenger\_autobuilder). Closes GH-1133. \* The `passenger\_startup\_file` option now also works on Python apps. Closes GH-1233. \* If you are a [Union Station](https://www.unionstationapp.com) customer, then Phusion Passenger will now also log application spawning errors to Union Station. This data isn't shown in the Union Station interface yet, but it will be implemented in the future. \* Fixed compilation problems on OmniOS and OpenIndiana. Closes GH-1212. \* Fixed compilation problems when Nginx is configured with OpenResty. Thanks to Yichun Zhang. Closes GH-1226. \* Fixed Nginx HTTP POST failures on ARM platforms. Thanks to nocelic for the fix. Closes GH-1151. \* Documentation contributions by Tim Bishop and Tugdual de Kerviler. \* Minor Nginx bug fix by Feng Gu. Closes GH-1235.
Release 4.0.45--------------
 \* Major improvements in Node.js and Meteor compatibility. Older Phusion Passenger versions implemented Node.js support by emulating Node.js' HTTP library. This approach was found to be unsustainable, so we've abandoned that approach and replaced it with a much simpler approach that does not involve emulating the HTTP library. \* Introduced support for sticky sessions. Sticky sessions are useful -- or even required -- for apps that store state inside process memory. Prominent examples include SockJS, Socket.io, faye-websocket and Meteor. Sticky sessions are required to make the aforementioned examples work in multi-process scenarios. By introducing sticky sessions support, we've much improved WebSocket support and support for the aforementioned libraries and frameworks. \* Due to user demand, GET requests with request bodies are once again supported. Support for these kinds of requests was removed in 4.0.42 in an attempt to increase the strictness and robustness of our request handling code. It has been determined that GET requests with request bodies can be adequately supported without degrading robustness in Phusion Passenger. However, GET requests with both request bodies and WebSocket upgrade headers are unsupported. Fixes issue #1092. \* [Enterprise] The [Flying Passenger](http://www.modrails.com/documentation/Users%20guide%20Apache.html#flying\_passenger) feature is now also available on Apache. \* Fixed some issues with RVM mixed mode support, issue #1121. \* Fixed Passenger Standalone complaining about not finding PassengerHelperAgent during startup. \* Fixed various minor issues such as #1190 and #1197. \* The download timeout for passenger-install-nginx-module has been increased. Patch by 亀田 義裕.
Release 4.0.44--------------
 \* The issue tracker has now been moved from Google Code to Github. Before version 4.0.44 (May 29 2014, commit 3dd0964c9f4), all issue numbers referred to Google Code. From now on, all issue numbers will refer to Github Issues. \* Fixed compilation problems on OS X Lion and OS X Mountain Lion. \* On Ruby, fixed `nil` being frozen on accident in some cases. See issue #1192.
Release 4.0.43--------------
 \* Introduced a new command `passenger-config list-instances`, which prints all running Phusion Passenger instances. \* Introduced a new command `passenger-config system-metrics, which displays metrics about the system such as the total CPU and memory usage. \* Fixed some compilation problems caused by the compiler capability autodetector. \* System metrics such as total CPU usage and memory usage, are now sent to [Union Station](https://www.unionstationapp.com) in preparation for future features.
Release 4.0.42--------------
 \* [Nginx] Upgraded the preferred Nginx version to 1.6.0. \* [Nginx] Fixed compatibility with Nginx 1.7.0. \* [Standalone] The MIME type for .woff files has been changed to application/font-woff. Fixes issue #1071. \* There are now APT packages for Ubuntu 14.04. At the same time, packages for Ubuntu 13.10 have been abandoned. \* Introduced a new command, `passenger-config build-native-support`, for ensuring that the native\_support library for the current Ruby interpreter is built. This is useful in system provisioning scripts. \* For security reasons, friendly error pages (those black/purple pages that shows the error message, backtrace and environment variable dump when an application fails to start) are now disabled by default when the application environment is set to 'staging' or 'production'. Fixes issue #1063. \* Fixed some compilation warnings on Ubuntu 14.04. \* Fixed some compatibility problems with Rake 10.2.0 and later. See [Rake issue 274](https://github.com/jimweirich/rake/issues/274). \* Improved error handling in [Union Station](https://www.unionstationapp.com) support. \* Data is now sent to Union Station on a more frequent basis, in order to make new data show up more quickly. \* Information about the code revision is now sent to Union Station, which will be used in the upcoming deployment tracking feature in Union Station 2.
Release 4.0.41--------------
 \* Fixed some issues with printing UTF-8 log files on Heroku. \* Added a new flag `--ignore-app-not-running` to `passenger-config restart-app`. When this flag is given, `passenger-config restart-app` will exit successfully when the specified application is not running, instead of exiting with an error. \* Our precompiled Passenger Standalone binaries have been upgraded to use OpenSSL 1.0.1g, which fixes [the OpenSSL Heartbleed vulnerability](http://heartbleed.com/). Users who are using Passenger Standalone with SSL enabled are vulnerable, and should upgrade immediately. Users who do not use Passenger Standalone, users who use Passenger Standalone without SSL, or users who use Passenger Standalone with SSL behind another SSL-enabled reverse proxy, are not vulnerable.
Release 4.0.40--------------
 \* Upgraded preferred Nginx version to 1.4.7. This Nginx version fixes a buffer overflow. Users are strongly urged to upgrade Nginx as soon as possible.
Release 4.0.39--------------
 \* Fixed a crash that could happen if the client disconnects while a chunked response is being sent. Fixes issue #1062. \* In Phusion Passenger Standalone, it is now possible to customize the Nginx configuration file on Heroku. It is now also possible to permanently apply changes to the Nginx configuration file, surviving upgrades. Please refer to the "Advanced configuration" section of the Phusion Passenger Standalone manual for more information. \* The programming language selection menu in passenger-install-apache2-module and passenger-install-nginx-module only works on terminals that support UTF-8 and that have a UTF-8 capable font. To cater to users who cannot meet these requirements (e.g. PuTTY users using any of the default Windows fonts), it is now possible to switch the menu to a plain text mode by pressing '!'. Fixes issue #1066. \* Fixed printing UTF-8 characters in log files in Phusion Passenger Standalone. \* It is now possible to dump live backtraces of Python apps through the[View remainder of file in raw view](https://github.com/phusion/passenger/raw/refs/heads/stable-5.1/CHANGELOG)

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from docs.github.com_332f0a88_20250126_124814.html ===
[Skip to main content](#main-content)[GitHub Docs](/en)Version: Free, Pro, & TeamSearch GitHub DocsSearchSelect language: current language is EnglishOpen Search BarClose Search BarOpen MenuOpen Sidebar

* [Building communities](/en/communities "Building communities")/
* [Moderation](/en/communities/moderating-comments-and-conversations "Moderation")/
* [Manage comments](/en/communities/moderating-comments-and-conversations/managing-disruptive-comments "Manage comments")
[Home](/en)[Building communities](/en/communities)

* Healthy contributions
  + [Management & moderation](/en/communities/setting-up-your-project-for-healthy-contributions/about-community-management-and-moderation)
  + [Community profiles](/en/communities/setting-up-your-project-for-healthy-contributions/about-community-profiles-for-public-repositories)
  + [Access community profiles](/en/communities/setting-up-your-project-for-healthy-contributions/accessing-a-projects-community-profile)
  + [Add a code of conduct](/en/communities/setting-up-your-project-for-healthy-contributions/adding-a-code-of-conduct-to-your-project)
  + [Contributor guidelines](/en/communities/setting-up-your-project-for-healthy-contributions/setting-guidelines-for-repository-contributors)
  + [Add a license to a repo](/en/communities/setting-up-your-project-for-healthy-contributions/adding-a-license-to-a-repository)
  + [Add support resources](/en/communities/setting-up-your-project-for-healthy-contributions/adding-support-resources-to-your-project)
  + [Community health file](/en/communities/setting-up-your-project-for-healthy-contributions/creating-a-default-community-health-file)
  + [Encourage contributions](/en/communities/setting-up-your-project-for-healthy-contributions/encouraging-helpful-contributions-to-your-project-with-labels)
* Issue & PR templates
  + [About templates](/en/communities/using-templates-to-encourage-useful-issues-and-pull-requests/about-issue-and-pull-request-templates)
  + [Configure](/en/communities/using-templates-to-encourage-useful-issues-and-pull-requests/configuring-issue-templates-for-your-repository)
  + [Syntax for issue forms](/en/communities/using-templates-to-encourage-useful-issues-and-pull-requests/syntax-for-issue-forms)
  + [Syntax for GitHub's form schema](/en/communities/using-templates-to-encourage-useful-issues-and-pull-requests/syntax-for-githubs-form-schema)
  + [Create a PR template](/en/communities/using-templates-to-encourage-useful-issues-and-pull-requests/creating-a-pull-request-template-for-your-repository)
  + [Create an issue template](/en/communities/using-templates-to-encourage-useful-issues-and-pull-requests/manually-creating-a-single-issue-template-for-your-repository)
  + [Common validation errors when creating issue forms](/en/communities/using-templates-to-encourage-useful-issues-and-pull-requests/common-validation-errors-when-creating-issue-forms)
* Moderation
  + [Manage comments](/en/communities/moderating-comments-and-conversations/managing-disruptive-comments)
  + [Locking conversations](/en/communities/moderating-comments-and-conversations/locking-conversations)
  + [Limit interactions in repo](/en/communities/moderating-comments-and-conversations/limiting-interactions-in-your-repository)
  + [Limit interactions in account](/en/communities/moderating-comments-and-conversations/limiting-interactions-for-your-personal-account)
  + [Limit interactions in org](/en/communities/moderating-comments-and-conversations/limiting-interactions-in-your-organization)
  + [Track comment changes](/en/communities/moderating-comments-and-conversations/tracking-changes-in-a-comment)
  + [Manage abuse in your org](/en/communities/moderating-comments-and-conversations/managing-how-contributors-report-abuse-in-your-organizations-repository)
  + [Manage reported content](/en/communities/moderating-comments-and-conversations/managing-reported-content-in-your-organizations-repository)
* Maintaining safety
  + [Block from your account](/en/communities/maintaining-your-safety-on-github/blocking-a-user-from-your-personal-account)
  + [View blocked users in account](/en/communities/maintaining-your-safety-on-github/viewing-users-youve-blocked-from-your-personal-account)
  + [Unblock from your account](/en/communities/maintaining-your-safety-on-github/unblocking-a-user-from-your-personal-account)
  + [Block from your org](/en/communities/maintaining-your-safety-on-github/blocking-a-user-from-your-organization)
  + [View blocked users in org](/en/communities/maintaining-your-safety-on-github/viewing-users-who-are-blocked-from-your-organization)
  + [Unblock from your org](/en/communities/maintaining-your-safety-on-github/unblocking-a-user-from-your-organization)
  + [Reporting abuse or spam](/en/communities/maintaining-your-safety-on-github/reporting-abuse-or-spam)
* Using wikis
  + [About wikis](/en/communities/documenting-your-project-with-wikis/about-wikis)
  + [Manage wiki pages](/en/communities/documenting-your-project-with-wikis/adding-or-editing-wiki-pages)
  + [Create footer or sidebar](/en/communities/documenting-your-project-with-wikis/creating-a-footer-or-sidebar-for-your-wiki)
  + [Editing wiki content](/en/communities/documenting-your-project-with-wikis/editing-wiki-content)
  + [View a history of changes](/en/communities/documenting-your-project-with-wikis/viewing-a-wikis-history-of-changes)
  + [Change access permissions](/en/communities/documenting-your-project-with-wikis/changing-access-permissions-for-wikis)
  + [Disabling wikis](/en/communities/documenting-your-project-with-wikis/disabling-wikis)

* [Building communities](/en/communities "Building communities")/
* [Moderation](/en/communities/moderating-comments-and-conversations "Moderation")/
* [Manage comments](/en/communities/moderating-comments-and-conversations/managing-disruptive-comments "Manage comments")
# Managing disruptive comments

You can hide, edit, or delete comments on issues, pull requests, and commits.

## In this article

* [Hiding a comment](#hiding-a-comment)
* [Unhiding a comment](#unhiding-a-comment)
* [Editing a comment](#editing-a-comment)
* [Redacting sensitive information](#redacting-sensitive-information)
* [Deleting a comment](#deleting-a-comment)
* [Further reading](#further-reading)
## [Hiding a comment](#hiding-a-comment)

Organization moderators, and anyone with write access to a repository, can hide comments on issues, pull requests, and commits.

If a comment is off-topic, outdated, or resolved, you may want to hide a comment to keep a discussion focused or make a pull request easier to navigate and review. Hidden comments are minimized but people with read access to the repository can expand them.

![Screenshot of a hidden comment. The only visible content is "This comment has been minimized", with a button to show the comment.](/assets/cb-13766/images/help/repository/hidden-comment.png)

1. Navigate to the comment you'd like to hide.
2. In the upper-right corner of the comment, click , then click **Hide**.

   ![Screenshot of a pull request comment by octo-user. Below an icon of three dots, a dropdown menu is expanded, and "Hide" is outlined in orange.](/assets/cb-42438/images/help/repository/comment-menu-hide.png)
3. Using the "Choose a reason" dropdown menu, choose a reason to hide the comment. Then select **Hide comment**.

   ![Screenshot of a comment showing a menu to select a reason to hide the comment: Spam, Abuse, Off Topic, Outdated, Duplicate, or Resolved.](/assets/cb-67538/images/help/repository/choose-reason-for-hiding-comment.png)

## [Unhiding a comment](#unhiding-a-comment)

Organization moderators, and anyone with write access to a repository, can unhide comments on issues, pull requests, and commits.

1. Navigate to the comment you'd like to unhide.
2. On the right side of the comment, click  **Show comment**.
3. On the right side of the expanded comment, select the  dropdown menu, then click **Unhide**.

   ![Screenshot of a pull request comment marked as spam. Below an icon of three dots, a dropdown menu is expanded, and "Unhide" is outlined in orange.](/assets/cb-50118/images/help/repository/comment-menu-hidden.png)

## [Editing a comment](#editing-a-comment)

Anyone with write access to a repository can edit comments on issues, pull requests, and commits.

It's appropriate to edit a comment and remove content that doesn't contribute to the conversation and violates your community's code of conduct or GitHub's [Community Guidelines](/en/site-policy/github-terms/github-community-guidelines).

Sometimes it may make sense to clearly indicate edits and their justification.

That said, anyone with read access to a repository can view a comment's edit history. The **edited** dropdown at the top of the comment contains a history of edits showing the user and timestamp for each edit.

![Screenshot of a comment by octo-user, which is partially redacted. In the header, next to "edited by octocat", a dropdown icon is outlined in orange.](/assets/cb-42069/images/help/repository/content-redacted-comment.png)

## [Redacting sensitive information](#redacting-sensitive-information)

Comment authors and anyone with write access to a repository can also delete sensitive information from a comment's edit history. For more information, see [Tracking changes in a comment](/en/communities/moderating-comments-and-conversations/tracking-changes-in-a-comment).

1. Navigate to the comment you'd like to edit.
2. In the upper-right corner of the comment, click , then click **Edit**.

   ![Screenshot of a pull request comment by octo-user. Below an icon of three dots, a dropdown menu is expanded, and "Edit" is outlined in orange.](/assets/cb-42473/images/help/repository/comment-menu-edit.png)
3. In the comment window, delete the content you'd like to remove, then type `[REDACTED]` to replace it.
4. At the bottom of the comment, type a note indicating that you have edited the comment, and optionally, why you edited the comment.
5. Click **Update comment**.

## [Deleting a comment](#deleting-a-comment)

Anyone with write access to a repository can delete comments on issues, pull requests, and commits. Organization owners, team maintainers, and the comment author can also delete a comment on a team page.

If a comment contains some constructive content that adds to the conversation in the issue or pull request, you can edit the comment instead.

Deleting a comment is your last resort as a moderator. It's appropriate to delete a comment if the entire comment adds no constructive content to a conversation and violates your community's code of conduct or GitHub's [Community Guidelines](/en/site-policy/github-terms/github-community-guidelines).

Deleting a comment creates a timeline event that is visible to anyone with read access to the repository. However, the username of the person who deleted the comment is only visible to people with write access to the repository. For anyone without write access, the timeline event is anonymized.

![Screenshot of a timeline event, which says "octo-org deleted a comment from hubot 6 minutes ago."](/assets/cb-10760/images/help/issues/anonymized-timeline-entry-for-deleted-comment.png)

Note

The initial comment (or body) of an issue or pull request can't be deleted. Instead, you can edit issue and pull request bodies to remove unwanted content.

### [Steps to delete a comment](#steps-to-delete-a-comment)

1. Navigate to the comment you'd like to delete.
2. In the upper-right corner of the comment, click , then click **Delete**.
   ![Screenshot of a pull request comment by octo-user. Below an icon of three dots, a dropdown menu is expanded, and "Delete" is outlined in orange.](/assets/cb-42453/images/help/repository/comment-menu-delete.png)
3. Optionally, write a comment noting that you deleted a comment and why.

## [Further reading](#further-reading)

* [Managing moderators in your organization](/en/organizations/managing-peoples-access-to-your-organization-with-roles/managing-moderators-in-your-organization)
## Help and support

### Did you find what you needed?

 Yes No[Privacy policy](/en/site-policy/privacy-policies/github-privacy-statement)
### Help us make these docs great!

All GitHub docs are open source. See something that's wrong or unclear? Submit a pull request.

[Make a contribution](https://github.com/github/docs/blob/main/content/communities/moderating-comments-and-conversations/managing-disruptive-comments.md)

[Learn how to contribute](/contributing)

### Still need help?

[Ask the GitHub community](https://github.com/orgs/community/discussions)[Contact support](https://support.github.com)
## Legal

* © 2025 GitHub, Inc.
* [Terms](/en/site-policy/github-terms/github-terms-of-service)
* [Privacy](/en/site-policy/privacy-policies/github-privacy-statement)
* [Status](https://www.githubstatus.com/)
* [Pricing](https://github.com/pricing)
* [Expert services](https://services.github.com)
* [Blog](https://github.blog)


=== Content from avatars.githubusercontent.com_504a748e_20250126_124815.html ===
�PNG

   
IHDR  �  �   �.�b  �IDATx���Q��`�8ef%
B%
b%!$|���n�=M�{f� �vW ��� b$�� v@�� b$�� v@�� b$�� v@�� b$�� v@�� b$�� v@�� b$�� v@�� b$�� v@�� b$�� v@�� ��x���WO���s���#����H; A���H; A���H; A���H; A���H; A���H; A���H; A���H; A���H; A���H; A���H; A���H; A���H; A���H; A���H; A���H; A���H; A쀄���s��{���s�p�g$�� v@�� b$�� v@�� b$�� v@�� b$�� v@�� b$�� v@�� b$�� v@�� b$�� v@�� b$�� v@�� b$�� v@�� b$�� v@�� b$�� v@�� b$�� v@�� b$�� v@�� b$�� v@�� b$�� v@�� b$�� v@�� b$�� v@�� b$����x���WO���s���#����H; A���H; A���H; A���H; A���H; A���H; A���H; A���H; A���H; A���H; A���H; A���H; A���H; A���H; A���H; A���H; A���H; A쀄�̬� ��|v@�� b$�� v@�� b$�� v@�� b$�� v@�� b$�� v@�� b$�� v@�� b$�� v@�� b$�� v@�� b$�� v@�� b$�� v@�� b$�� v@�� b$�� v@�� b$�� v@�� b$�� v@�� b$�� v@�� b$�� v@�� b$�� v@�� b$���^=�9�}����>�� <��H; A���H; A���H; A���H; A���H; A���H; A���H; A���H; A���H; A���H; A���H; A���H; A���H; A���H; A���H; A���H; A���H; A���H; �53�7 �8�� v@�� b$�� v@�� b$�� v@�� b$�� v@�� b$�� v@�� b$�� v@�� b$�� v@�� b$�� v@�� b$���/  ���D[ \*�?    IEND�B`�
