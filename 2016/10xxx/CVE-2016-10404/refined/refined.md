Based on the provided commit diff, here's a breakdown of the vulnerability:

**Root cause of vulnerability:**
- The `loginRedirect` value obtained from `spaUtil.getLoginRedirect(request)` was not properly escaped before being embedded into the JavaScript code.

**Weaknesses/vulnerabilities present:**
- **Cross-Site Scripting (XSS):**  The lack of escaping allows an attacker to inject malicious JavaScript code through the `loginRedirect` parameter, which will then be executed in the user's browser when the page loads.

**Impact of exploitation:**
- An attacker could potentially perform actions on behalf of the user, such as stealing cookies, redirecting the user to a malicious website, or performing other unauthorized actions within the application's context.

**Attack vectors:**
- The `loginRedirect` parameter within the HTTP request is the attack vector. If an attacker can control or influence this parameter, they can inject malicious JavaScript.

**Required attacker capabilities/position:**
- The attacker needs to be able to influence the value returned by `spaUtil.getLoginRedirect(request)`. This might involve exploiting another vulnerability to inject the malicious value or manipulating a related configuration.

**Technical Details:**
- The fix implemented in this commit involves using `HtmlUtil.escapeJS` to properly encode the `loginRedirect` value before inserting it into the JavaScript code.
- Specifically, the line `Liferay.SPA.loginRedirect = '<%= spaUtil.getLoginRedirect(request) %>';` was changed to `Liferay.SPA.loginRedirect = '<%= HtmlUtil.escapeJS(spaUtil.getLoginRedirect(request)) %>';`. This ensures that any special characters within the `loginRedirect` value are encoded to prevent them from being interpreted as executable code.

This commit shows a classic example of a reflected XSS vulnerability due to missing output encoding.