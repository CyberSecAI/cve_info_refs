=== Content from cygwin.com_6d0984ba_20250124_113847.html ===


This is the mail archive of the
cygwin-announce
mailing list for the [Cygwin project](http://cygwin.com/).

---

| Index Nav: | [[Date Index](index.html#00020)] [[Subject Index](subjects.html#00020)] [[Author Index](authors.html#00020)] [[Thread Index](threads.html#00020)] | |
| --- | --- | --- |
| Message Nav: | [[Date Prev](msg00019.html)] [[Date Next](msg00021.html)] | [[Thread Prev](msg00019.html)] [[Thread Next](msg00021.html)] |
| Other format: | [[Raw text](/cgi-bin/get-raw-msg?listname=cygwin-announce&date=2016-04&msgid=20160411090750.GH9870%40calimero.vinschen.de)] |

# Cygwin 2.5.0-1

* *From*: Corinna Vinschen <corinna-cygwin at cygwin dot com>
* *To*: cygwin-announce at cygwin dot com
* *Date*: Mon, 11 Apr 2016 11:07:50 +0200
* *Subject*: Cygwin 2.5.0-1
* *Authentication-results*: sourceware.org; auth=none
* *Reply-to*: The Cygwin Mailing List <cygwin at cygwin dot com>

---

```

Hi Cygwin friends and users,

I just released a new Cygwin version 2.5.0-1.

User-visible changes compared to 2.4.1:

What's new:
-----------

- Full set of POSIX.1e ACL API functions now implemented.
 New APIs: acl_add_perm, acl_calc_mask, acl_clear_perms, acl_copy_entry,
 acl_copy_ext, acl_copy_int, acl_create_entry, acl_delete_def_file,
 acl_delete_entry, acl_delete_perm, acl_dup, acl_free, acl_from_text,
 acl_get_entry, acl_get_fd, acl_get_file, acl_get_permset, acl_get_qualifier,
 acl_get_tag_type, acl_init, acl_set_fd, acl_set_file, acl_set_permset,
 acl_set_qualifier, acl_set_tag_type, acl_size, acl_to_text, acl_valid.

- Most libacl extensions now implemented, too:
 New APIs: acl_check, acl_cmp, acl_entries, acl_equiv_mode, acl_error,
 acl_extended_fd, acl_extended_file, acl_extended_file_nofollow,
 acl_from_mode, acl_get_perm, acl_to_any_text.

- First implementation of pthread_barrier/pthread_barrierattr functions.
 New APIs: pthread_barrierattr_init, pthread_barrierattr_setpshared,
 pthread_barrierattr_getpshared, pthread_barrierattr_destroy,
 pthread_barrier_init, pthread_barrier_destroy, pthread_barrier_wait.

- Enabled console reports requested by escape sequences: Requesting primary
 and secondary device attributes, requesting cursor position report; see
 <https://cygwin.com/ml/cygwin-patches/2012-q3/msg00019.html>

- New APIs: clog10, clog10f, nexttoward, nexttowardf, nexttowardl.

- Add missing long double functions.  New APIs:
 acoshl, acosl, asinhl, asinl, atan2l, atanhl, atanl, cacoshl, cacosl, cargl,
 casinhl, casinl, catanhl, catanl, ccoshl, ccosl, ceill, cexpl, clog10l,
 clogl, conjl, copysignl, coshl, cosl, cpowl, cprojl, csinhl, csinl, csqrtl,
 ctanhl, ctanl, dreml, erfcl, erfl, exp10l, exp2l, expl, expm1l, fabsl,
 fdiml, floorl, fmal, fmaxl, fminl, fmodl, frexpl, ilogbl, isinfl, isnanl,
 ldexpl, lgammal, lgammal_r, llroundl, log10l, log1pl, log2l, logbl, logl,
 lroundl, modfl, nearbyintl, nextafterl, pow10l, powl, remainderl, remquol,
 roundl, scalbl, scalblnl, scalbnl, sincosl, sinhl, sinl, tanhl, tanl,
 tgammal, truncl.

- New header: cpio.h.

What changed:
-------------

- Including <sys/acl.h> now *only* includes the POSIX ACL API.  To include
 the old Solaris API, include <cygwin/acl.h>.

- In calls to chmod treat ACLs with extra ACEs *only* for Admins and
 SYSTEM like a trivial ACL.

- Bump POSIX option macros to POSIX.1-2008.

- Profiling data, specifically pc sampling, now covers all threads of a
 program and not just the main thread.  Environment variable GMON_OUT_PREFIX
 enables multiple gmon.out files to preserve profiling data after fork or
 from multiple program runs.

- Feature test macros, which control which symbols are exposed in the standard
 headers, have been completely overhauled for compatibility with glibc.

- The isinf, isinff, and isinfl functions are signed, returning -1 for
 negative infinity for compatibility with glibc.

Bug Fixes
---------

- Fix potential hang when using LoadLibraryEx(LOAD_LIBRARY_SEARCH_SYSTEM32).
 Reported and tested via IRC.

- Fix a bug in ACL handling which might result in a spurious extra entry
 for the primary group.  Self-observed.

- printf(3): Handle multibyte decimal point in field size computation.
 Addresses: <https://cygwin.com/ml/cygwin/2016-02/msg00014.html>

- cygwin_conv_path: Always preserve trailing backslashes in conversion
 to POSIX paths.
 Addresses: <https://cygwin.com/ml/cygwin/2016-01/msg00480.html>

- Make buffered console characters visible to select().
 Addresses: <https://cygwin.com/ml/cygwin/2014-12/msg00118.html>

- Always report relocation problems, not only in debug DLL.
 Addresses: <https://cygwin.com/ml/cygwin/2016-02/msg00147.html>

- Don't spill network credentials of privileged user changing the user
 context via setuid method 1
 (<https://cygwin.com/cygwin-ug-net/ntsec.html#ntsec-nopasswd1>) into
 user session.
 Addresses: <https://cygwin.com/ml/cygwin/2016-02/msg00101.html>

- Fix bug in setvbuf resulting in overwriting data in line buffered IO
 when writing after reading.
 Addresses: <https://cygwin.com/ml/cygwin/2016-03/msg00180.html>

- Fix typo in code converting Windows ACL to POSIX ACL, potentially
 resulting in incorrect group permissions.  Self-observed.

- Fix reading/writing ACLs on Samba shares when using RFC2307 mapped uid/gid
 values.  Self-observed.

- Fix a wrong error code returned when trying to execute a file which can't
 be read for any reason.
 Addresses: <https://cygwin.com/ml/cygwin/2016-03/msg00364.html>

- Only allow enabled groups from the user token's group list as primary
 token.
 Addresses: <https://cygwin.com/ml/cygwin/2016-03/msg00477.html>

- Fix implementation of finitel.
 Addresses: <https://cygwin.com/ml/cygwin-apps/2016-03/msg00152.html>

- Fix strtold return value for +/-infinity.
 Addresses: <https://cygwin.com/ml/cygwin-apps/2016-03/msg00152.html>

- Fix accepted specifications with `getconf -v' on 64-bit.  Self-observed.

Have fun,
Corinna

```

---

| Index Nav: | [[Date Index](index.html#00020)] [[Subject Index](subjects.html#00020)] [[Author Index](authors.html#00020)] [[Thread Index](threads.html#00020)] | |
| --- | --- | --- |
| Message Nav: | [[Date Prev](msg00019.html)] [[Date Next](msg00021.html)] | [[Thread Prev](msg00019.html)] [[Thread Next](msg00021.html)] |



=== Content from cygwin.com_c6dcefdb_20250126_005429.html ===


This is the mail archive of the
cygwin
mailing list for the [Cygwin project](http://cygwin.com/).

---

| Index Nav: | [[Date Index](index.html#00129)] [[Subject Index](subjects.html#00129)] [[Author Index](authors.html#00129)] [[Thread Index](threads.html#00129)] | |
| --- | --- | --- |
| Message Nav: | [[Date Prev](msg00128.html)] [[Date Next](msg00130.html)] | [[Thread Prev](msg00128.html)] [[Thread Next](msg00130.html)] |
| Other format: | [[Raw text](/cgi-bin/get-raw-msg?listname=cygwin&date=2016-02&msgid=019c01d163bc%24fe2fc500%24fa8f4f00%24%40comcast.net)] |

# RE: Possible Security Hole in SSHD w/ CYGWIN?

* *From*: "David Willis" <david\_willis at comcast dot net>
* *To*: <cygwin at cygwin dot com>
* *Date*: Tue, 9 Feb 2016 20:39:13 -0800
* *Subject*: RE: Possible Security Hole in SSHD w/ CYGWIN?
* *Authentication-results*: sourceware.org; auth=none
* *References*:
* *Reply-to*: <cygwin at cygwin dot com>

---

```
Just to add an update to this, it appears that processes run from the shell
while logged into the CYGWIN SSHD server are run as the correct user - i.e.
I run a ping or cat a file and pipe it to less, and check Task Manager on
the SSHD server, and those processes show as being run as the user I SSH'd
in as, the way it should be.

So it looks like this bug is specifically when accessing files or directory
contents. I literally run a "ls -l" command from the local CYGWIN shell on
the SSHD server, against a file share that I have no access to, and get a
permission denied. I run the exact same command, SSH'd into that same box as
the same user against the same file share, and this time I can list the
directory contents. Same results with "cat"ing files in those directories.
What gives?

Any help on this VERY much appreciated!!!

Thanks,

David

-----Original Message-----
Sent: Tuesday, February 09, 2016 7:56 AM
To: 'cygwin@cygwin.com'
Subject: RE: Possible Security Hole in SSHD w/ CYGWIN?

Sorry for starting a new thread w/ the reply, forgot to subscribe before
posting my question yesterday...

Thanks for getting back so quickly

Yes, I have read that page pretty much from top to bottom, and as far as I
know I have configured sshd and the user accounts correctly. I have a
non-privileged, disabled account named "sshd", as well as a privileged
account called "cyg_server". Privilege separation seems to be working fine -
i.e. when the request for a connection comes in the process is running as
"sshd", then it spawns a privileged process running as "cyg_server" once the
user is authenticated.

However no I am not logging in with a password; I have setup public key
authentication.

And the user I'm being connected as (as seen from the file share server) is
not the "sshd" user account, it is the privileged "cyg_server" user account.
Although that account has no rights to logon interactively or thru Terminal
Services, it is a privileged account on the file server (because the file
server is also running CYGWIN and thus must allow privileged rights to that
account as well). I should clarify that in my case, cyg_server is a domain
account (not a local account).

And the way I can verify, is that I have a folder on that share that the
user I am authenicating as does not have rights do view, but cyg_server does
(because Administrators on that server do), and when I connect as my user
via SSHD to any one of my other machines on the domain running CYGWIN, I can
then navigate to and read the contents of that file share when I shouldn't
be able to. If I try to do the same thing, from the same account, but on my
machine locally without connecting to any other CYGWIN SSH server, I get a
"Permission denied", which is what I would expect.

Thank you for your help on this.

David

----------------------------------------------------------------------------
--------------------------

Did you read <https://cygwin.com/cygwin-ug-net/ntsec.html>, configured sshd
and the user accounts correctly and are logging in with a password using
either of the methods described?

FWIW, I'm seeing the connected user as the one that I logged into via ssh.
In fact the sshd user account doesn't have any network access rights anyway,
so I couldn't connect to any network share if that acount would be used.

Regards,
Achim.

-----Original Message-----
Sent: Monday, February 08, 2016 10:43 PM
To: 'cygwin@cygwin.com'
Subject: Possible Security Hole in SSHD w/ CYGWIN?

Hello,

I noticed that when connecting via SSH to a CYGWIN-based SSHD server, if the
user connects to a network share (i.e. they CD to the share UNC path in the
BASH/CYGWIN shell), they get connected as the privileged server user account
created for privilege separation when SSHD is configured w/ ssh-host-config.
In other words, they have the rights of that account, and if that account
happens to be a domain admin (or even a local admin on the box hosting the
share), that user has full admin rights on that share, when in fact they
should have the rights assigned to the user account they SSH'd in with.

To reproduce, connect via SSH (from either a Linux or CYGWIN/Windows client)
to a CYGWIN-based SSHD server using a normal privileged user account (an
account preferably that is not an admin either on the client or server
machine). Once connected to the Windows SSHD server, CD to a UNC path of a
network share. Once CD'd to that path, check Computer Management on that
server, and go to Shares->Open Sessions, and you will see that the user
connected is the privileged SSHD server account (and it will obviously show
as being connected from the machine you are SSH'd into).

Anyone else ever notice this before?

Running OpenSSH v7 BTW, SSH client is Win7, SSH server Win7, file share
server Win2008R2

Thanks,

David

--
Problem reports:       <http://cygwin.com/problems.html>
FAQ:                   <http://cygwin.com/faq/>
Documentation:         <http://cygwin.com/docs.html>
Unsubscribe info:      <http://cygwin.com/ml/#unsubscribe-simple>

```

---

* **Follow-Ups**:
  + **[Re: Possible Security Hole in SSHD w/ CYGWIN?](msg00130.html)**
    - *From:* Stephen John Smoogen

| Index Nav: | [[Date Index](index.html#00129)] [[Subject Index](subjects.html#00129)] [[Author Index](authors.html#00129)] [[Thread Index](threads.html#00129)] | |
| --- | --- | --- |
| Message Nav: | [[Date Prev](msg00128.html)] [[Date Next](msg00130.html)] | [[Thread Prev](msg00128.html)] [[Thread Next](msg00130.html)] |



=== Content from cygwin.com_2d76af8a_20250124_113846.html ===


This is the mail archive of the
cygwin-announce
mailing list for the [Cygwin project](http://cygwin.com/).

---

| Index Nav: | [[Date Index](index.html#00023)] [[Subject Index](subjects.html#00023)] [[Author Index](authors.html#00023)] [[Thread Index](threads.html#00023)] | |
| --- | --- | --- |
| Message Nav: | [[Date Prev](msg00022.html)] [[Date Next](msg00024.html)] | [[Thread Prev](msg00022.html)] [[Thread Next](msg00024.html)] |
| Other format: | [[Raw text](/cgi-bin/get-raw-msg?listname=cygwin-announce&date=2016-02&msgid=20160218145926.GA11617%40calimero.vinschen.de)] |

# TEST RELEASE: Cygwin 2.5.0-0.4

* *From*: Corinna Vinschen <corinna-cygwin at cygwin dot com>
* *To*: cygwin-announce at cygwin dot com
* *Date*: Thu, 18 Feb 2016 15:59:26 +0100
* *Subject*: TEST RELEASE: Cygwin 2.5.0-0.4
* *Authentication-results*: sourceware.org; auth=none
* *Reply-to*: The Cygwin Mailing List <cygwin at cygwin dot com>

---

```
Hi Cygwin friends and users,

I released a new Cygwin TEST version 2.5.0-0.4.

Diffs to -0.3 are mainly bugfixes.

What's new:
-----------

- Switch to POSIX ACL API by default.

- First implementation of pthread_barrier/pthread_barrierattr functions.
  New APIs: pthread_barrierattr_init, pthread_barrierattr_setpshared,
  pthread_barrierattr_getpshared, pthread_barrierattr_destroy,
  pthread_barrier_init, pthread_barrier_destroy, pthread_barrier_wait.

What changed:
-------------

- In calls to chmod treat ACLs with extra ACEs *only* for Admins and
  SYSTEM like a trivial ACL.

- Bump POSIX option macros to POSIX.1-2008.

Bug Fixes
---------

- Fix potential hang when using LoadLibraryEx(LOAD_LIBRARY_SEARCH_SYSTEM32).
  Reported and tested via IRC.

- Fix a bug in ACL handling which might result in a spurious extra entry
  for the primary group.  Self-observed.

- printf(3): Handle multibyte decimal point in field size computation.
  Addresses: <https://cygwin.com/ml/cygwin/2016-02/msg00014.html>

- cygwin_conv_path: Always preserve trailing backslashes in conversion
  to POSIX paths.
  Addresses: <https://cygwin.com/ml/cygwin/2016-01/msg00480.html>

- Make buffered console characters visible to select().
  Addresses: <https://cygwin.com/ml/cygwin/2014-12/msg00118.html>

- Always report relocation problems, not only in debug DLL.
  Addresses: <https://cygwin.com/ml/cygwin/2016-02/msg00147.html>

- Don't spill network credentials of privileged user changing the user
  context via setuid method 1
  (<https://cygwin.com/cygwin-ug-net/ntsec.html#ntsec-nopasswd1>) into
  user session

Have fun,
Corinna

--
Corinna Vinschen                  Please, send mails regarding Cygwin to
Cygwin Maintainer                 cygwin AT cygwin DOT com
Red Hat

```

---

| Index Nav: | [[Date Index](index.html#00023)] [[Subject Index](subjects.html#00023)] [[Author Index](authors.html#00023)] [[Thread Index](threads.html#00023)] | |
| --- | --- | --- |
| Message Nav: | [[Date Prev](msg00022.html)] [[Date Next](msg00024.html)] | [[Thread Prev](msg00022.html)] [[Thread Next](msg00024.html)] |



=== Content from cygwin.com_eedcc831_20250126_005430.html ===


This is the mail archive of the
cygwin
mailing list for the [Cygwin project](http://cygwin.com/).

---

| Index Nav: | [[Date Index](index.html#00101)] [[Subject Index](subjects.html#00101)] [[Author Index](authors.html#00101)] [[Thread Index](threads.html#00101)] | |
| --- | --- | --- |
| Message Nav: | [[Date Prev](msg00100.html)] [[Date Next](msg00102.html)] | [[Thread Prev](msg00100.html)] [[Thread Next](msg00102.html)] |
| Other format: | [[Raw text](/cgi-bin/get-raw-msg?listname=cygwin&date=2016-02&msgid=016c01d16305%24252c94c0%246f85be40%24%40comcast.net)] |

# Possible Security Hole in SSHD w/ CYGWIN?

* *From*: "David Willis" <david\_willis at comcast dot net>
* *To*: <cygwin at cygwin dot com>
* *Date*: Mon, 8 Feb 2016 22:43:11 -0800
* *Subject*: Possible Security Hole in SSHD w/ CYGWIN?
* *Authentication-results*: sourceware.org; auth=none
* *Reply-to*: <cygwin at cygwin dot com>

---

```
Hello,

I noticed that when connecting via SSH to a CYGWIN-based SSHD server, if the
user connects to a network share (i.e. they CD to the share UNC path in the
BASH/CYGWIN shell), they get connected as the privileged server user account
created for privilege separation when SSHD is configured w/ ssh-host-config.
In other words, they have the rights of that account, and if that account
happens to be a domain admin (or even a local admin on the box hosting the
share), that user has full admin rights on that share, when in fact they
should have the rights assigned to the user account they SSH'd in with.

To reproduce, connect via SSH (from either a Linux or CYGWIN/Windows client)
to a CYGWIN-based SSHD server using a normal privileged user account (an
account preferably that is not an admin either on the client or server
machine). Once connected to the Windows SSHD server, CD to a UNC path of a
network share. Once CD'd to that path, check Computer Management on that
server, and go to Shares->Open Sessions, and you will see that the user
connected is the privileged SSHD server account (and it will obviously show
as being connected from the machine you are SSH'd into).

Anyone else ever notice this before?

Running OpenSSH v7 BTW, SSH client is Win7, SSH server Win7, file share
server Win2008R2

Thanks,

David

--
Problem reports:       <http://cygwin.com/problems.html>
FAQ:                   <http://cygwin.com/faq/>
Documentation:         <http://cygwin.com/docs.html>
Unsubscribe info:      <http://cygwin.com/ml/#unsubscribe-simple>

```

---

* **Follow-Ups**:
  + **[Re: Possible Security Hole in SSHD w/ CYGWIN?](msg00102.html)**
    - *From:* Achim Gratz

| Index Nav: | [[Date Index](index.html#00101)] [[Subject Index](subjects.html#00101)] [[Author Index](authors.html#00101)] [[Thread Index](threads.html#00101)] | |
| --- | --- | --- |
| Message Nav: | [[Date Prev](msg00100.html)] [[Date Next](msg00102.html)] | [[Thread Prev](msg00100.html)] [[Thread Next](msg00102.html)] |



=== Content from cygwin.com_0340ad62_20250124_113847.html ===


This is the mail archive of the
cygwin-announce
mailing list for the [Cygwin project](http://cygwin.com/).

---

| Index Nav: | [[Date Index](index.html#00054)] [[Subject Index](subjects.html#00054)] [[Author Index](authors.html#00054)] [[Thread Index](threads.html#00054)] | |
| --- | --- | --- |
| Message Nav: | [[Date Prev](msg00053.html)] [[Date Next](msg00055.html)] | [[Thread Prev](msg00053.html)] [[Thread Next](msg00055.html)] |
| Other format: | [[Raw text](/cgi-bin/get-raw-msg?listname=cygwin-announce&date=2016-04&msgid=571688E6.7000908%40cygwin.com)] |

# CVE-2016-3067: network privilege escalation in Cygwin set(e)uid

* *From*: Yaakov Selkowitz <yselkowitz at cygwin dot com>
* *To*: cygwin-announce at cygwin dot com
* *Date*: Tue, 19 Apr 2016 14:37:10 -0500
* *Subject*: CVE-2016-3067: network privilege escalation in Cygwin set(e)uid
* *Authentication-results*: sourceware.org; auth=none
* *Reply-to*: The Cygwin Mailing List <cygwin at cygwin dot com>

---

In versions of Cygwin prior to 2.5.0, a process which switched user
contexts on a system where neither the Cygwin LSA module was enabled,
nor the user password stored thereon with 'passwd -R', would retain the
network credentials of the original user context even after switching.
In the case of system services, such as a user which logged into a
Cygwin SSHD or a command run from a cronjob, this would allow access to
networks shares to which the system service account (normally
'cyg\_server', which is in the Administrators group) has access but to
which the user would otherwise be denied.
```

```
This issue was reported[1][2] by David Willis on 2016-Feb-08 and a fix
committed[3] to the upstream repository by Corinna Vinschen on
2016-Feb-18. The fix was first included in the 2.5.0-0.4 test release
on the same day[4] and in the 2.5.0-1 stable release which shipped[5] on
2016-Apr-11.
```

Red Hat Product Security has assigned CVE-2016-3067 for this issue.

[1] <https://cygwin.com/ml/cygwin/2016-02/msg00101.html>
[2] <https://cygwin.com/ml/cygwin/2016-02/msg00129.html> and thread

```
[3]
<https://sourceware.org/git/?p=newlib-cygwin.git;a=commit;h=205862ed08649df8f50b926a2c58c963f571b044>
```

[4] <https://cygwin.com/ml/cygwin-announce/2016-02/msg00023.html>
[5] <https://cygwin.com/ml/cygwin-announce/2016-04/msg00020.html>

--
Yaakov

```

---

| Index Nav: | [[Date Index](index.html#00054)] [[Subject Index](subjects.html#00054)] [[Author Index](authors.html#00054)] [[Thread Index](threads.html#00054)] | |
| --- | --- | --- |
| Message Nav: | [[Date Prev](msg00053.html)] [[Date Next](msg00055.html)] | [[Thread Prev](msg00053.html)] [[Thread Next](msg00055.html)] |


