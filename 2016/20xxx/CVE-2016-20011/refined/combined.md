=== Content from bugzilla.gnome.org_1995aebb_20250126_123127.html ===


| GNOME Bugzilla â BugÂ 772647 | Perform TLS certificate verification | Last modified: 2021-05-25 11:42:26 UTC |
| --- | --- | --- |

|  |
| --- |

* [Home](./)

After an [evaluation](https://wiki.gnome.org/Initiatives/DevelopmentInfrastructure), GNOME has moved from Bugzilla to [GitLab](https://gitlab.gnome.org/). [Learn more about GitLab](https://wiki.gnome.org/GitLab).
**No new issues can be reported in GNOME Bugzilla anymore.**

**To report an issue in a GNOME project, [go to GNOME GitLab](https://gitlab.gnome.org/GNOME)**.
Do **not** go to GNOME Gitlab for: [Bluefish](https://sourceforge.net/p/bluefish/tickets), [Doxygen](https://github.com/doxygen/doxygen/issues), [GnuCash](https://bugs.gnucash.org/), [GStreamer](https://gitlab.freedesktop.org/gstreamer/), [java-gnome](https://github.com/afcowie/java-gnome/issues), [LDTP](https://github.com/ldtp/ldtp2/issues), [NetworkManager](https://gitlab.freedesktop.org/NetworkManager/NetworkManager/issues), [Tomboy](https://github.com/tomboy-notes/tomboy/issues).

[**BugÂ 772647**](show_bug.cgi?id=772647) -
Perform TLS certificate verification

|  | |
| --- | --- |
| [Summary:](page.cgi?id=fields.html#short_desc "The bug summary is a short sentence which succinctly describes what the bug is about.") | Perform TLS certificate verification |

| | [Status](page.cgi?id=fields.html#bug_status): | RESOLVED OBSOLETE | | --- | --- | |  | | | [Product:](describecomponents.cgi "Bugs are categorised into Products and Components. Select a Classification to narrow down this list.") | libgrss | | [Classification:](page.cgi?id=fields.html#classification "Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation.") | Other | | [Component:](describecomponents.cgi?product=libgrss "Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list.") | General | | [Version:](page.cgi?id=fields.html#version "The version field defines the version of the software the bug was found in.") | unspecified | | [Hardware:](page.cgi?id=fields.html#rep_platform "The hardware platform the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | Other Linux | |  | | | [Importance](page.cgi?id=fields.html#importance): | Normal critical | | [TargetÂ Milestone](page.cgi?id=fields.html#target_milestone): | --- | | [Assigned To](page.cgi?id=fields.html#assigned_to): | Libgrss Maintainers | | [QA Contact:](page.cgi?id=fields.html#qa_contact "The person responsible for confirming this bug if it is unconfirmed, and for verifying the fix once the bug has been resolved.") | Libgrss Maintainers | |  | | | [URL:](page.cgi?id=fields.html#bug_file_loc "Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen.") |  | | [Whiteboard:](page.cgi?id=fields.html#status_whiteboard "Each bug has a free-form single line text entry box for adding tags and status information.") |  | | |  | | | [Depends on:](page.cgi?id=fields.html#dependson "The bugs listed here must be resolved before this bug can be resolved.") |  | | [Blocks:](page.cgi?id=fields.html#blocked "This bug must be resolved before the bugs listed in this field can be resolved.") |  | | Â | | Â | | Reported: | 2016-10-09 14:06 UTC by Michael Catanzaro | | --- | --- | | Modified: | 2021-05-25 11:42 UTC | |  | | | [See Also:](page.cgi?id=fields.html#see_also "This allows you to refer to bugs in other installations. You can enter a URL to a bug in the 'Add Bug URLs' field to note that that bug is related to this one. You can enter multiple URLs at once by separating them with a comma. You should normally use this field to refer to bugs in other installations. For bugs in this installation, it is better to use the Depends on and Blocks fields.") |  | | [GNOME target:](page.cgi?id=fields.html#cf_gnome_target "A custom Drop Down field in this installation of GNOME Bugzilla.") | --- | | | [GNOME version:](page.cgi?id=fields.html#cf_gnome_version "A custom Drop Down field in this installation of GNOME Bugzilla.") | --- | | |  | | |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| --- | | |

|  |  |
| --- | --- |

| [Description](show_bug.cgi?id=772647#c0)  Michael Catanzaro    2016-10-09 14:06:42 UTC  ``` I see libgrss is using SoupSessionSync. I believe this deprecated class performs no TLS certificate verification by default, and I don't see any code to turn it on (no use of the ssl-ca-file, tls-database, or ssl-strict properties), so I presume no certificate verification is occurring.  The ideal solution would be to upgrade to modern SoupSession, which is secure by default. ``` [Comment 1](show_bug.cgi?id=772647#c1)  Igor Gnatenko    2016-10-09 14:09:12 UTC  ``` (In reply to Michael Catanzaro from [comment #0](show_bug.cgi?id=772647#c0)) > I see libgrss is using SoupSessionSync. I believe this deprecated class > performs no TLS certificate verification by default, and I don't see any > code to turn it on (no use of the ssl-ca-file, tls-database, or ssl-strict > properties), so I presume no certificate verification is occurring. >  > The ideal solution would be to upgrade to modern SoupSession, which is > secure by default. I have some plans to refactor whole code of libgrss, but lack of time =( ``` [Comment 2](show_bug.cgi?id=772647#c2)  Michael Catanzaro    2016-10-09 15:04:11 UTC  ``` Ah, well there is an easier way: just set the ssl-use-system-ca-file property of each SoupSession subclass to TRUE. Note that you create three SoupSessionSync and six SoupSessionAsync objects, so it has to be done in nine different places, but at least then you don't have to refactor anything. ``` [Comment 3](show_bug.cgi?id=772647#c3)  AndrÃ© Klapper    2021-05-25 11:23:57 UTC  ``` GNOME is going to shut down bugzilla.gnome.org in favor of gitlab.gnome.org. As part of that, we are mass-closing older open tickets in bugzilla.gnome.org which have not seen updates for a longer time (resources are unfortunately quite limited so not every ticket can get handled).  If you can still reproduce the situation described in this ticket in a recent and supported software version, then please follow   <https://wiki.gnome.org/GettingInTouch/BugReportingGuidelines> and create a new enhancement request ticket at   <https://gitlab.gnome.org/GNOME/libgrss/-/issues/>  Thank you for your understanding and your help. ``` [Comment 4](show_bug.cgi?id=772647#c4)  Michael Catanzaro    2021-05-25 11:42:26 UTC  ``` Moved to GitLab: <https://gitlab.gnome.org/GNOME/libgrss/-/issues/4> ``` |  |
| --- | --- |

---

---

* + [Home](./)
  + | New
  + | [Browse](page.cgi?id=browse.html&product=libgrss)
  + | [Search](query.cgi)
  + |

    [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")
  + | [Reports](page.cgi?id=reports.html)
  + |
    [Help](http://www.bugzilla.org/docs/4.4/en/html/bug_page.html)
  + |
    [Log In](show_bug.cgi?id=772647&GoAheadAndLogIn=1)

    Remember

    [x]
  + |
    [Forgot Password](show_bug.cgi?id=772647&GoAheadAndLogIn=1#forgot)
    Login:

    [x]



=== Content from gitlab.gnome.org_60e74ec3_20250125_224110.html ===
From 2c6ea642663e2a44efc8583fae7c54b7b98f72b3 Mon Sep 17 00:00:00 2001
From: Ariadne Conill
Date: Mon, 7 Jun 2021 18:51:07 -0600
Subject: [PATCH] Ensure the ssl-use-system-ca-file property is set to true on
all SoupSessions.
The default SoupSessionSync and SoupSessionAsync behaviour does not perform any
TLS certificate validation, unless the ssl-use-system-ca-file property is set
to true.
This mitigates CVE-2016-20011.
---
src/feed-channel.c | 2 ++
src/feed-enclosure.c | 4 ++++
src/feeds-pool.c | 1 +
src/feeds-publisher.c | 4 +++-
src/feeds-subscriber.c | 4 +++-
5 files changed, 13 insertions(+), 2 deletions(-)
diff --git a/src/feed-channel.c b/src/feed-channel.c
index 19ca7b2..d2d51b9 100644
--- a/src/feed-channel.c
+++ b/src/feed-channel.c
@@ -973,6 +973,8 @@ quick\_and\_dirty\_parse (GrssFeedChannel \*channel, SoupMessage \*msg, GList \*\*save\_
static void
init\_soup\_session (SoupSession \*session, GrssFeedChannel \*channel)
{
+ g\_object\_set (G\_OBJECT (session), "ssl-use-system-ca-file", TRUE, NULL);
+
if (channel->priv->jar != NULL)
soup\_session\_add\_feature (session, SOUP\_SESSION\_FEATURE (channel->priv->jar));
if (channel->priv->gzip == TRUE)
diff --git a/src/feed-enclosure.c b/src/feed-enclosure.c
index 68ebbfe..2cd8f9e 100644
--- a/src/feed-enclosure.c
+++ b/src/feed-enclosure.c
@@ -220,6 +220,8 @@ grss\_feed\_enclosure\_fetch (GrssFeedEnclosure \*enclosure, GError \*\*error)
url = grss\_feed\_enclosure\_get\_url (enclosure);
session = soup\_session\_sync\_new ();
+ g\_object\_set (G\_OBJECT (session), "ssl-use-system-ca-file", TRUE, NULL);
+
msg = soup\_message\_new ("GET", url);
status = soup\_session\_send\_message (session, msg);
@@ -282,6 +284,8 @@ grss\_feed\_enclosure\_fetch\_async (GrssFeedEnclosure \*enclosure, GAsyncReadyCallba
task = g\_task\_new (enclosure, NULL, callback, user\_data);
session = soup\_session\_async\_new ();
+ g\_object\_set (G\_OBJECT (session), "ssl-use-system-ca-file", TRUE, NULL);
+
msg = soup\_message\_new ("GET", grss\_feed\_enclosure\_get\_url (enclosure));
soup\_session\_queue\_message (session, msg, enclosure\_downloaded, task);
}
diff --git a/src/feeds-pool.c b/src/feeds-pool.c
index f18f3cd..7b33956 100644
--- a/src/feeds-pool.c
+++ b/src/feeds-pool.c
@@ -178,6 +178,7 @@ grss\_feeds\_pool\_init (GrssFeedsPool \*node)
memset (node->priv, 0, sizeof (GrssFeedsPoolPrivate));
node->priv->parser = grss\_feed\_parser\_new ();
node->priv->soupsession = soup\_session\_async\_new ();
+ g\_object\_set (G\_OBJECT (node->priv->soupsession), "ssl-use-system-ca-file", TRUE, NULL);
}
/\*\*
diff --git a/src/feeds-publisher.c b/src/feeds-publisher.c
index 427a54f..500cd96 100644
--- a/src/feeds-publisher.c
+++ b/src/feeds-publisher.c
@@ -888,8 +888,10 @@ create\_and\_run\_server (GrssFeedsPublisher \*pub)
{
SoupAddress \*soup\_addr;
- if (pub->priv->soupsession == NULL)
+ if (pub->priv->soupsession == NULL) {
pub->priv->soupsession = soup\_session\_async\_new ();
+ g\_object\_set (G\_OBJECT (pub->priv->soupsession), "ssl-use-system-ca-file", TRUE, NULL);
+ }
soup\_addr = soup\_address\_new\_any (SOUP\_ADDRESS\_FAMILY\_IPV4, pub->priv->port);
pub->priv->server = soup\_server\_new ("port", pub->priv->port, "interface", soup\_addr, NULL);
diff --git a/src/feeds-subscriber.c b/src/feeds-subscriber.c
index 259f891..0f63f83 100644
--- a/src/feeds-subscriber.c
+++ b/src/feeds-subscriber.c
@@ -513,8 +513,10 @@ init\_run\_server (GrssFeedsSubscriber \*sub)
{
GInetAddress \*addr;
- if (sub->priv->soupsession == NULL)
+ if (sub->priv->soupsession == NULL) {
sub->priv->soupsession = soup\_session\_async\_new ();
+ g\_object\_set (G\_OBJECT (sub->priv->soupsession), "ssl-use-system-ca-file", TRUE, NULL);
+ }
/\*
Flow:
--
GitLab


=== Content from gitlab.gnome.org_a9cc2611_20250125_224110.html ===


[Skip to content](#content-body)
GitLab
[![](data:image/gif;base64...)](/ "Homepage")

* [Explore](/explore)

* [Sign in](/users/sign_in?redirect_to_referer=yes)

This is an archived project. Repository and other project resources are read-only.

Project 'GNOME/libgrss' was moved to 'Archive/libgrss'. Please update any links and bookmarks that may still have the old path.

# (CVE-2016-20011) No TLS certificate verification

Moving this from [GNOME Bugzilla](https://bugzilla.gnome.org/show_bug.cgi?id=772647). libgrss does not appear to perform any TLS certificate verification because it uses the deprecated SoupSessionAsync, which requires manually enabling certificate verification, rather than a modern SoupSession that has good defaults. This seems to still be broken in 2021, so I'm going to request a CVE.

My Bugzilla report has been public since October 9, 2016, so this is already disclosed.

Edited May 25, 2021 by [Michael Catanzaro](/mcatanzaro)

Assignee
Loading

Time tracking
Loading


