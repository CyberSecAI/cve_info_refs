=== Content from security.openstack.org_5e85c3b5_20250125_104243.html ===


Toggle navigation

 Search

* [Software](https://www.openstack.org/software/)
  + [Overview](https://www.openstack.org/software/)
  + [OpenStack Components](https://www.openstack.org/software/project-navigator/openstack-components)
  + [SDKs](https://www.openstack.org/software/project-navigator/sdks)
  + [Deployment Tools](https://www.openstack.org/software/project-navigator/deployment-tools)
  + [OpenStack Map](https://www.openstack.org/assets/software/projectmap/openstack-map.pdf)
  + [Sample Configs](https://www.openstack.org/software/sample-configs/)
* [Use Cases](https://www.openstack.org/use-cases/)
  + [Users in Production](https://www.openstack.org/use-cases/)
  + [Ironic Bare Metal](https://www.openstack.org/use-cases/bare-metal/)
  + [Edge Computing](https://www.openstack.org/use-cases/edge-computing/)
  + [Telecom & NFV](https://www.openstack.org/use-cases/telecoms-and-nfv/)
  + [Science and HPC](https://www.openstack.org/use-cases/science/)
  + [Containers](https://www.openstack.org/use-cases/containers/)
  + [Enterprise](https://www.openstack.org/use-cases/enterprise/)
  + [User Survey](https://www.openstack.org/surveys/landing)
* [Events](https://openinfra.dev/summit)
  + [OpenInfra Summit](https://openinfra.dev/summit)
  + [Project Teams Gathering](https://www.openstack.org/ptg/)
  + [OpenDev](https://www.openstack.org/events/opendev-2020/)
  + [Community Events](https://www.openstack.org/events/community-events/)
  + [OpenStack & OpenInfra Days](https://www.openstack.org/events/openstackdays)
  + [Summit Videos](https://www.openstack.org/videos/)
* [Community](https://www.openstack.org/community/)
  + [Welcome! Start Here](https://www.openstack.org/community/)
  + [OpenStack Technical Committee](https://www.openstack.org/community/tech-committee)
  + [Speakers Bureau](https://www.openstack.org/community/speakers/)
  + [OpenStack Wiki](http://wiki.openstack.org)
  + [Get Certified (COA)](https://www.openstack.org/coa/)
  + [Jobs](https://www.openstack.org/community/jobs/)
  + [Marketing Resources](https://www.openstack.org/marketing/)
  + [Community News](https://www.openstack.org/news/)
  + [Superuser Magazine](http://superuser.openstack.org)
  + [OpenInfra Foundation Supporting Organizations](https://www.openstack.org/community/supporting-organizations/)
  + [OpenInfra Foundation](https://openinfra.dev)
* [Marketplace](https://www.openstack.org/marketplace/)
  + [Training](https://www.openstack.org/marketplace/training/)
  + [Distros & Appliances](https://www.openstack.org/marketplace/distros/)
  + [Public Clouds](https://www.openstack.org/marketplace/public-clouds/)
  + [Hosted Private Clouds](https://www.openstack.org/marketplace/hosted-private-clouds/)
  + [Remotely Managed Private Clouds](https://www.openstack.org/marketplace/remotely-managed-private-clouds/)
  + [Consulting & Integrators](https://www.openstack.org/marketplace/consulting/)
  + [Drivers](https://www.openstack.org/marketplace/drivers/)
* [Blog](https://www.openstack.org/blog/)
* [Docs](http://docs.openstack.org/)
* [Join](https://openinfra.dev/join/)
  + [Sign up for Foundation Membership](https://openinfra.dev/join/)
  + [Sponsor the Foundation](https://openinfra.dev/join/)
  + [More about the Foundation](https://openinfra.dev)
* [Log In](https://www.openstack.org/Security/login/?BackURL=/home/)

# OSSA-2016-011: Nova may fail to delete images in resize state regression

# OSSA-2016-011: Nova may fail to delete images in resize state regression[Â¶](#ossa-2016-011-nova-may-fail-to-delete-images-in-resize-state-regression "Link to this heading")

Date:

September 21, 2016

CVE:

CVE-2016-7498

## Affects[Â¶](#affects "Link to this heading")

* Nova: ==13.0.0

## Description[Â¶](#description "Link to this heading")

Rajesh Tailor from Red Hat reported a vulnerability in Nova. If an authenticated user deletes an instance while it is in resize state, it will cause the original instance to not be deleted from the compute node it was running on. An attacker can use this to launch a denial of service attack. All Nova setups are affected.

## Patches[Â¶](#patches "Link to this heading")

* <https://review.openstack.org/327398> (Mitaka)
* <https://review.openstack.org/326262> (Newton)

## Credits[Â¶](#credits "Link to this heading")

* Rajesh Tailor from Red Hat (CVE-2016-7498)

## References[Â¶](#references "Link to this heading")

* <https://bugs.launchpad.net/bugs/1589821>
* <http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2016-7498>

## Notes[Â¶](#notes "Link to this heading")

* This bug is similar to OSSA-2015-017 (CVE-2015-3280) and was re-
  introduced in the first release of Mitaka version of Nova and it was
  re-fixed in nova-13.1.0.

this page last updated: 2025-01-07 18:17:35

[![Creative Commons Attribution 3.0 License](../_static/images/docs/license.png)](https://creativecommons.org/licenses/by/3.0/)

Except where otherwise noted, this document is licensed under
[Creative Commons
Attribution 3.0 License](https://creativecommons.org/licenses/by/3.0/). See all [OpenStack Legal Documents](https://www.openstack.org/legal).

found an error? report a bug

OpenStack Documentation

* Guides
* [Install Guides](https://docs.openstack.org/index.html#install-guides)
* [User Guides](https://docs.openstack.org/index.html#user-guides)
* [Configuration Guides](https://docs.openstack.org/index.html#configuration-guides)
* [Operations and Administration Guides](https://docs.openstack.org/index.html#ops-and-admin-guides)
* [API Guides](https://docs.openstack.org/index.html#api-guides)
* [Contributor Guides](https://docs.openstack.org/index.html#contributor-guides)
* Languages
* [Deutsch (German)](https://docs.openstack.org/de/)
* [FranÃ§ais (French)](https://docs.openstack.org/fr/)
* [Bahasa Indonesia (Indonesian)](https://docs.openstack.org/id/)
* [Italiano (Italian)](https://docs.openstack.org/it/)
* [æ¥æ¬èª (Japanese)](https://docs.openstack.org/ja/)
* [íêµ­ì´ (Korean)](https://docs.openstack.org/ko_KR/)
* [PortuguÃªs (Portuguese)](https://docs.openstack.org/pt_BR/)
* [TÃ¼rkÃ§e (TÃ¼rkiye)](https://docs.openstack.org/tr_TR/)
* [ç®ä½ä¸­æ (Simplified Chinese)](https://docs.openstack.org/zh_CN/)

#### Contents

* OSSA-2016-011: Nova may fail to delete images in resize state regression
  + [Affects](#affects)
  + [Description](#description)
  + [Patches](#patches)
  + [Credits](#credits)
  + [References](#references)
  + [Notes](#notes)

### OpenStack

* [Projects](https://www.openstack.org/software/project-navigator/)
* [OpenStack Security](https://security.openstack.org/)
* [Blog](https://openstack.org/blog/)
* [News](https://openstack.org/news/)

### Community

* [User Groups](https://www.meetup.com/pro/openinfradev/)
* [Events](https://openstack.org/community/events/)
* [Jobs](https://openstack.org/community/jobs/)
* [Companies](https://openinfra.dev/members/)
* [Contribute](https://docs.openstack.org/contributors)

### Documentation

* [OpenStack Manuals](https://docs.openstack.org)
* [Getting Started](https://openstack.org/software/start/)
* [API Documentation](https://developer.openstack.org)
* [Wiki](https://wiki.openstack.org)

### Branding & Legal

* [Legal Docs](https://openinfra.dev/legal)
* [Logos & Guidelines](https://openstack.org/brand/)
* [Trademark Policy](https://openinfra.dev/legal/trademark-policy)
* [Privacy Policy](https://openinfra.dev/privacy-policy)
* [OpenInfra CLA](https://docs.openstack.org/contributors/common/setup-gerrit.html#individual-contributor-license-agreement)

### Stay In Touch

The OpenStack project is provided under the
[Apache 2.0 license](https://www.apache.org/licenses/LICENSE-2.0). Docs.openstack.org is powered by
[Rackspace Cloud Computing](https://rackspace.com).



=== Content from www.openwall.com_4499f948_20250125_104242.html ===


| [Openwall](/) * [Products](/)   + [Openwall GNU/\*/Linux   *server OS*](/Owl/)+ [Linux Kernel Runtime Guard](/lkrg/)+ [John the Ripper   *password cracker*](/john/)         - [Free & Open Source for any platform](/john/)- [in the cloud](/john/cloud/)- [Pro for Linux](/john/pro/linux/)- [Pro for macOS](/john/pro/macosx/)+ [Wordlists   *for password cracking*](/wordlists/)+ [passwdqc   *policy enforcement*](/passwdqc/)             - [Free & Open Source for Unix](/passwdqc/)- [Pro for Windows (Active Directory)](/passwdqc/windows/)+ [yescrypt   *KDF & password hashing*](/yescrypt/)+ [yespower   *Proof-of-Work (PoW)*](/yespower/)+ [crypt\_blowfish   *password hashing*](/crypt/)+ [phpass   *ditto in PHP*](/phpass/)+ [tcb   *better password shadowing*](/tcb/)+ [Pluggable Authentication Modules](/pam/)+ [scanlogd   *port scan detector*](/scanlogd/)+ [popa3d   *tiny POP3 daemon*](/popa3d/)+ [blists   *web interface to mailing lists*](/blists/)+ [msulogin   *single user mode login*](/msulogin/)+ [php\_mt\_seed   *mt\_rand() cracker*](/php_mt_seed/)* [Services](/services/)* Publications       + [Articles](/articles/)+ [Presentations](/presentations/)* Resources         + [Mailing lists](/lists/)+ [Community wiki](https://openwall.info/wiki/)+ [Source code repositories (GitHub)](https://github.com/openwall)+ [Source code repositories (CVSweb)](https://cvsweb.openwall.com)+ [File archive & mirrors](/mirrors/)+ [How to verify digital signatures](/signatures/)+ [OVE IDs](/ove/)* [What's new](/news) | |
| --- | --- |

| | [Follow @Openwall on Twitter for new release announcements and other news](https://twitter.com/openwall) | | --- | |
| --- | --- |

[[<prev]](../../../2016/09/22/7) [[next>]](2) [[day]](.) [[month]](..) [[year]](../..) [[list]](../../..)
```

Message-ID: <cb66c7f5-a882-5553-8657-a0bafdf14b2a@redhat.com>
Date: Fri, 23 Sep 2016 01:08:17 +0000
From: Tristan Cacqueray <tdecacqu@...hat.com>
To: oss-security@...ts.openwall.com
Subject: [OSSA 2016-011] Nova may fail to delete images in resize state
 regression (CVE-2016-7498)

========================================================================
OSSA-2016-011: Nova may fail to delete images in resize state regression
========================================================================

:Date: September 21, 2016
:CVE: CVE-2016-7498

Affects
~~~~~~~
- Nova: ==13.0.0

Description
~~~~~~~~~~~
Rajesh Tailor from Red Hat reported a vulnerability in Nova. If an
authenticated user deletes an instance while it is in resize state, it
will cause the original instance to not be deleted from the compute
node it was running on. An attacker can use this to launch a denial of
service attack. All Nova setups are affected.

Patches
~~~~~~~
- <https://review.openstack.org/327398> (Mitaka)
- <https://review.openstack.org/326262> (Newton)

Credits
~~~~~~~
- Rajesh Tailor from Red Hat (CVE-2016-7498)

References
~~~~~~~~~~
- <https://bugs.launchpad.net/bugs/1589821>
- <http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2016-7498>

Notes
~~~~~
- This bug is similar to OSSA-2015-017 (CVE-2015-3280) and was
  re-introduced in the first release of Mitaka version of Nova and it
  was re-fixed in nova-13.1.0.

--
Tristan Cacqueray
OpenStack Vulnerability Management Team

Download attachment "[signature.asc](1/1)" of type "application/pgp-signature" (474 bytes)

```

[Powered by blists](https://www.openwall.com/blists/) - [more mailing lists](https://lists.openwall.net)

Please check out the
[Open Source Software Security Wiki](https://oss-security.openwall.org/wiki/), which is counterpart to this
[mailing list](https://oss-security.openwall.org/wiki/mailing-lists/oss-security).

Confused about [mailing lists](/lists/) and their use?
[Read about mailing lists on Wikipedia](https://en.wikipedia.org/wiki/Electronic_mailing_list)
and check out these
[guidelines on proper formatting of your messages](https://www.complang.tuwien.ac.at/anton/mail-news-errors.html).



=== Content from review.openstack.org_79ec58d1_20250126_080406.html ===




=== Content from review.openstack.org_936091d7_20250126_080406.html ===




=== Content from www.openwall.com_8b2936c4_20250125_104242.html ===


| [Openwall](/) * [Products](/)   + [Openwall GNU/\*/Linux   *server OS*](/Owl/)+ [Linux Kernel Runtime Guard](/lkrg/)+ [John the Ripper   *password cracker*](/john/)         - [Free & Open Source for any platform](/john/)- [in the cloud](/john/cloud/)- [Pro for Linux](/john/pro/linux/)- [Pro for macOS](/john/pro/macosx/)+ [Wordlists   *for password cracking*](/wordlists/)+ [passwdqc   *policy enforcement*](/passwdqc/)             - [Free & Open Source for Unix](/passwdqc/)- [Pro for Windows (Active Directory)](/passwdqc/windows/)+ [yescrypt   *KDF & password hashing*](/yescrypt/)+ [yespower   *Proof-of-Work (PoW)*](/yespower/)+ [crypt\_blowfish   *password hashing*](/crypt/)+ [phpass   *ditto in PHP*](/phpass/)+ [tcb   *better password shadowing*](/tcb/)+ [Pluggable Authentication Modules](/pam/)+ [scanlogd   *port scan detector*](/scanlogd/)+ [popa3d   *tiny POP3 daemon*](/popa3d/)+ [blists   *web interface to mailing lists*](/blists/)+ [msulogin   *single user mode login*](/msulogin/)+ [php\_mt\_seed   *mt\_rand() cracker*](/php_mt_seed/)* [Services](/services/)* Publications       + [Articles](/articles/)+ [Presentations](/presentations/)* Resources         + [Mailing lists](/lists/)+ [Community wiki](https://openwall.info/wiki/)+ [Source code repositories (GitHub)](https://github.com/openwall)+ [Source code repositories (CVSweb)](https://cvsweb.openwall.com)+ [File archive & mirrors](/mirrors/)+ [How to verify digital signatures](/signatures/)+ [OVE IDs](/ove/)* [What's new](/news) | |
| --- | --- |

| | [Follow @Openwall on Twitter for new release announcements and other news](https://twitter.com/openwall) | | --- | |
| --- | --- |

[[<prev]](7) [[next>]](9) [[<thread-prev]](1) [[day]](.) [[month]](..) [[year]](../..) [[list]](../../..)
```

Message-Id: <20160921162950.B2DF572E020@smtpvbsrv1.mitre.org>
Date: Wed, 21 Sep 2016 12:29:50 -0400 (EDT)
From: cve-assign@...re.org
To: tdecacqu@...hat.com
Cc: cve-assign@...re.org, oss-security@...ts.openwall.com
Subject: Re: CVE request for vulnerability in OpenStack Nova

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA256

> Title: Nova may fail to delete images in resize state regression
> Affects: ==13.0.0
>
> If an
> authenticated user deletes an instance while it is in resize state, it
> will cause the original instance to not be deleted from the compute node
> it was running on. An attacker can use this to launch a denial of
> service attack. All Nova setups are affected.
>
> This bug is similar to OSSA-2015-017 (CVE-2015-3280) and was
> re-introduced in the first release of Mitaka version of Nova and it was
> re-fixed in nova-13.1.0.
>
> <https://launchpad.net/bugs/1589821>

>> cleanup_incomplete_migrations periodic task regression with commit
>> 099cf53925c0a0275325339f21932273ee9ce2bc

>> This reverts commit 099cf53925c0a0275325339f21932273ee9ce2bc.

Use CVE-2016-7498.

- --
CVE Assignment Team
M/S M300, 202 Burlington Road, Bedford, MA 01730 USA
[ A PGP key is available for encrypted communications at
  <http://cve.mitre.org/cve/request_id.html> ]
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1

iQIcBAEBCAAGBQJX4rTJAAoJEHb/MwWLVhi2XbYQAJyHRL8m6k3pOx7KnR0yhb3r
UaUcM8iKeJlbL218NgqOcMt0TEhwq6MmhWAWWoa6ptVoVGuriZuuzEXA9QcrgEIU
GF2PEN5umuD6XDP2kqg7InlP1DkGyCU4j5nu4vqg5h31oxuxedQ2kROzUUZbeDew
6fyMpay+suYOTc2eQaP86kTqrx69B/zm0K1agR49Z1dDF/+B0J/HiPAXV+3tmwRy
XfbtQyZwIfLF4wbFmPZVMYuUZqXZhM0piRdFwmkjTiF3Wkf5neo50+qZnU3N8g7b
izWhpemQ+LhZdPEiS2XX7xB+xhZHyGxDrBXdEsf4dEc2NdpjQ4vr/fgk4c41XCvM
2DTtNQLAiTfq5P5KoFS0loAkzTH4H3IRk9iBA9ta2bK6IdDN9arZOwAdxXEgx8Ju
gdoGqGcX9dKrIqo7EMB8u2cM6pdz4BZQqJw6ceXXjBcc+ai46C+6NqwMlTnyYLs2
7gFr6J/RqQpWfQDDZA2LzQbSEFzEJhR3J6eHO/0KuPGMzFVWcAWXJPa1b99ZwTjF
fcGD56XcbJROXbSb+kPxj7kw29k5/1rxaY4qXiWXpvsBXI4juLHH7l2lVMmlLXZ6
xmyNlBIEs/tE3xnj541xAVODZjYkYNiLqvwZaNk/TAiIJ5E85IIp+Eg9r0+OxpuH
kh4a4OUoAvv//hPZkckh
=b3GM
-----END PGP SIGNATURE-----

```

[Powered by blists](https://www.openwall.com/blists/) - [more mailing lists](https://lists.openwall.net)

Please check out the
[Open Source Software Security Wiki](https://oss-security.openwall.org/wiki/), which is counterpart to this
[mailing list](https://oss-security.openwall.org/wiki/mailing-lists/oss-security).

Confused about [mailing lists](/lists/) and their use?
[Read about mailing lists on Wikipedia](https://en.wikipedia.org/wiki/Electronic_mailing_list)
and check out these
[guidelines on proper formatting of your messages](https://www.complang.tuwien.ac.at/anton/mail-news-errors.html).



=== Content from bugs.launchpad.net_e521c62a_20250126_080407.html ===

[Log in / Register](https://bugs.launchpad.net/nova/%2Bbug/1589821/%2Blogin)

[![](https://launchpadlibrarian.net/324577028/nova64.png)](https://launchpad.net/nova)

## [OpenStack Compute (nova)](https://launchpad.net/nova)

* [Overview](https://launchpad.net/nova)
* [Code](https://code.launchpad.net/nova)
* [Bugs](https://bugs.launchpad.net/nova)
* [Blueprints](https://blueprints.launchpad.net/nova)
* [Translations](https://translations.launchpad.net/nova)
* [Answers](https://answers.launchpad.net/nova)

# cleanup\_incomplete\_migrations periodic task regression with commit 099cf53 (CVE-2016-7498)

Bug #1589821 reported by
[Rajesh Tailor](https://launchpad.net/~ratailor)
on 2016-06-07

[6](/%2Bhelp-bugs/bug-heat.html)

This bug affects 1 person

| Affects | | Status | Importance | Assigned to | Milestone |
| --- | --- | --- | --- | --- | --- |
|  | [OpenStack Compute (nova)](https://bugs.launchpad.net/nova) | Fix Released | High | [Matt Riedemann](https://launchpad.net/~mriedem) |  |
|  | [Mitaka](https://bugs.launchpad.net/nova/mitaka) | Fix Released | High | [Matt Riedemann](https://launchpad.net/~mriedem) |  |
|  | [OpenStack Security Advisory](https://bugs.launchpad.net/ossa) | Fix Released | Undecided | Unassigned |  |

### Bug Description

Patch [1] changes the instance filtering condition in periodic task "cleanup\_incomplete\_migrations" introduced in [2], in such a way that it generates new issue, [3]

After change [1] lands, the condition changes filtering logic, so now all instances on current host are filtered, which is not expected.

We should filter all instances where instance uuids are associated with migration records and those migration status is set to 'error' and instance is marked as deleted.

[1] <https://review.openstack.org/#/c/256102/>

[2] <https://review.openstack.org/#/c/219299/>

[2] [https://bugs.launchpad.net/nova/+bug/1586309](https://bugs.launchpad.net/nova/%2Bbug/1586309)

See [original description](comments/0)

Tags:

[compute](/nova/%2Bbugs?field.tag=compute)

## CVE References

* [2015-3280](/bugs/cve/2015-3280 "OpenStack Compute (nova) before 2014....")
* [2016-7498](/bugs/cve/2016-7498 "OpenStack Compute (nova) 13.0.0 does ...")

[Rajesh Tailor (ratailor)](https://launchpad.net/~ratailor)
on 2016-06-07

| Changed in nova: | |
| --- | --- |
| **assignee**: | nobody → Rajesh Tailor (ratailor) |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack) wrote on 2016-06-07:  [**Fix proposed to nova (master)**](/nova/%2Bbug/1589821/comments/1) |  |  | [#1](/nova/%2Bbug/1589821/comments/1) |
| --- | --- | --- | --- |

Fix proposed to branch: master

Review: <https://review.openstack.org/326262>

Fix proposed to branch: master
Review: https://review.openstack.org/326262

| Changed in nova: | |
| --- | --- |
| **status**: | New → In Progress |

[Takashi Natsume (natsume-takashi)](https://launchpad.net/~natsume-takashi)
on 2016-06-08

| **tags**: | added: compute |
| --- | --- |

[Rajesh Tailor (ratailor)](https://launchpad.net/~ratailor)
on 2016-06-08

| **description**: | updated |
| --- | --- |

[OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack)
on 2016-06-08

| Changed in nova: | |
| --- | --- |
| **assignee**: | Rajesh Tailor (ratailor) → Matt Riedemann (mriedem) |

[Matt Riedemann (mriedem)](https://launchpad.net/~mriedem)
on 2016-06-08

| Changed in nova: | |
| --- | --- |
| **importance**: | Undecided → High |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack) wrote on 2016-06-08:  [**Fix proposed to nova (stable/mitaka)**](/nova/%2Bbug/1589821/comments/2) |  |  | [#2](/nova/%2Bbug/1589821/comments/2) |
| --- | --- | --- | --- |

Fix proposed to branch: stable/mitaka

Review: <https://review.openstack.org/327398>

Fix proposed to branch: stable/mitaka
Review: https://review.openstack.org/327398

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Matt Riedemann (mriedem)](https://launchpad.net/~mriedem) wrote on 2016-06-08:  [**Re: cleanup\_incomplete\_migrations periodic task regression with commit 099cf53925c0a0275325339f21932273ee9ce2bc**](/nova/%2Bbug/1589821/comments/3) |  |  | [#3](/nova/%2Bbug/1589821/comments/3) |
| --- | --- | --- | --- |

Since the original fix was for a CVE bug:

[https://bugs.launchpad.net/nova/+bug/1392527](https://bugs.launchpad.net/nova/%2Bbug/1392527)

OSSA 2015-017

CVE-2015-3280

And that was regressed with the change I made in mitaka, we effectively re-introduced the bug in Mitaka (I think?) so do we need a new OSSA for this?

Since the original fix was for a CVE bug:
https://bugs.launchpad.net/nova/+bug/1392527
OSSA 2015-017
CVE-2015-3280
And that was regressed with the change I made in mitaka, we effectively re-introduced the bug in Mitaka (I think?) so do we need a new OSSA for this?

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack) wrote on 2016-06-09:  [**Fix merged to nova (master)**](/nova/%2Bbug/1589821/comments/4) |  |  | [#4](/nova/%2Bbug/1589821/comments/4) |
| --- | --- | --- | --- |

Reviewed: <https://review.openstack.org/326262>

Committed: <https://git.openstack.org/cgit/openstack/nova/commit/?id=adcc0e418b7d880a0b0bd60ea9d0ef1e2ef4e67e>

Submitter: Jenkins

Branch: master

commit adcc0e418b7d880a0b0bd60ea9d0ef1e2ef4e67e

Author: Rajesh Tailor <email address hidden>

Date: Tue Jun 7 07:05:11 2016 +0000

Revert "Optimize \_cleanup\_incomplete\_migrations periodic task"

The change modified instance filtering condition, which filters all

    deleted instances on current host, which is not as expected by periodic

    task.

The periodic task expects instances, whose instance uuid are associated

    with migration record. And after filtering we only need to apply the

    instance deletion logic on instance files where instance.host is not

    set as current host (CONF.host).

This reverts commit 099cf53925c0a0275325339f21932273ee9ce2bc.

Change-Id: Ic71c939bef86f1e5cb485c6827c69c3d638f2e89

    Closes-Bug: 1589821

Reviewed: https://review.openstack.org/326262
Committed: https://git.openstack.org/cgit/openstack/nova/commit/?id=adcc0e418b7d880a0b0bd60ea9d0ef1e2ef4e67e
Submitter: Jenkins
Branch: master
commit adcc0e418b7d880a0b0bd60ea9d0ef1e2ef4e67e
Author: Rajesh Tailor <ratailor@redhat.com>
Date: Tue Jun 7 07:05:11 2016 +0000
Revert "Optimize \_cleanup\_incomplete\_migrations periodic task"
The change modified instance filtering condition, which filters all
deleted instances on current host, which is not as expected by periodic
task.
The periodic task expects instances, whose instance uuid are associated
with migration record. And after filtering we only need to apply the
instance deletion logic on instance files where instance.host is not
set as current host (CONF.host).
This reverts commit 099cf53925c0a0275325339f21932273ee9ce2bc.
Change-Id: Ic71c939bef86f1e5cb485c6827c69c3d638f2e89
Closes-Bug: 1589821

| Changed in nova: | |
| --- | --- |
| **status**: | In Progress → Fix Released |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack) wrote on 2016-06-09:  [**Fix merged to nova (stable/mitaka)**](/nova/%2Bbug/1589821/comments/5) |  |  | [#5](/nova/%2Bbug/1589821/comments/5) |
| --- | --- | --- | --- |

Reviewed: <https://review.openstack.org/327398>

Committed: <https://git.openstack.org/cgit/openstack/nova/commit/?id=f77af87cc34b3a00eb650f6bd3a68c7820647e17>

Submitter: Jenkins

Branch: stable/mitaka

commit f77af87cc34b3a00eb650f6bd3a68c7820647e17

Author: Rajesh Tailor <email address hidden>

Date: Tue Jun 7 07:05:11 2016 +0000

Revert "Optimize \_cleanup\_incomplete\_migrations periodic task"

The change modified instance filtering condition, which filters all

    deleted instances on current host, which is not as expected by periodic

    task.

The periodic task expects instances, whose instance uuid are associated

    with migration record. And after filtering we only need to apply the

    instance deletion logic on instance files where instance.host is not

    set as current host (CONF.host).

This reverts commit 099cf53925c0a0275325339f21932273ee9ce2bc.

Change-Id: Ic71c939bef86f1e5cb485c6827c69c3d638f2e89

    Closes-Bug: 1589821

    (cherry picked from commit adcc0e418b7d880a0b0bd60ea9d0ef1e2ef4e67e)

Reviewed: https://review.openstack.org/327398
Committed: https://git.openstack.org/cgit/openstack/nova/commit/?id=f77af87cc34b3a00eb650f6bd3a68c7820647e17
Submitter: Jenkins
Branch: stable/mitaka
commit f77af87cc34b3a00eb650f6bd3a68c7820647e17
Author: Rajesh Tailor <ratailor@redhat.com>
Date: Tue Jun 7 07:05:11 2016 +0000
Revert "Optimize \_cleanup\_incomplete\_migrations periodic task"
The change modified instance filtering condition, which filters all
deleted instances on current host, which is not as expected by periodic
task.
The periodic task expects instances, whose instance uuid are associated
with migration record. And after filtering we only need to apply the
instance deletion logic on instance files where instance.host is not
set as current host (CONF.host).
This reverts commit 099cf53925c0a0275325339f21932273ee9ce2bc.
Change-Id: Ic71c939bef86f1e5cb485c6827c69c3d638f2e89
Closes-Bug: 1589821
(cherry picked from commit adcc0e418b7d880a0b0bd60ea9d0ef1e2ef4e67e)

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray) wrote on 2016-06-09:  [**Re: cleanup\_incomplete\_migrations periodic task regression with commit 099cf53925c0a0275325339f21932273ee9ce2bc**](/nova/%2Bbug/1589821/comments/6) |  |  | [#6](/nova/%2Bbug/1589821/comments/6) |
| --- | --- | --- | --- |

Since this report concerns a possible security risk, an incomplete security advisory task has been added while the core security reviewers for the affected project or projects confirm the bug and discuss the scope of any vulnerability along with potential solutions.

So IIUC, nova mitaka version(s) is affected by OSSA 2015-017. Does the impact description still applies ?

Title: Nova may fail to delete images in resize state

Description:

If an authenticated user deletes an instance while it is in resize state, it will cause the original instance to not be deleted from the compute node it was running on. An attacker can use this to launch a denial of service attack. All Nova setups are affected.

This may need a new OSSA for this regression.

Since this report concerns a possible security risk, an incomplete security advisory task has been added while the core security reviewers for the affected project or projects confirm the bug and discuss the scope of any vulnerability along with potential solutions.
So IIUC, nova mitaka version(s) is affected by OSSA 2015-017. Does the impact description still applies ?
Title: Nova may fail to delete images in resize state
Description:
If an authenticated user deletes an instance while it is in resize state, it will cause the original instance to not be deleted from the compute node it was running on. An attacker can use this to launch a denial of service attack. All Nova setups are affected.
This may need a new OSSA for this regression.

| Changed in ossa: | |
| --- | --- |
| **status**: | New → Incomplete |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Doug Hellmann (doug-hellmann)](https://launchpad.net/~doug-hellmann) wrote on 2016-06-14:  [**Fix included in openstack/nova 13.1.0**](/nova/%2Bbug/1589821/comments/7) |  |  | [#7](/nova/%2Bbug/1589821/comments/7) |
| --- | --- | --- | --- |

This issue was fixed in the openstack/nova 13.1.0 release.

This issue was fixed in the openstack/nova 13.1.0 release.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray) wrote on 2016-06-27:  [**Re: cleanup\_incomplete\_migrations periodic task regression with commit 099cf53925c0a0275325339f21932273ee9ce2bc**](/nova/%2Bbug/1589821/comments/8) |  |  | [#8](/nova/%2Bbug/1589821/comments/8) |
| --- | --- | --- | --- |

Matt, could you please confirm the impact description proposed in above comment #6 ?

If it's accurate, let's request a cve and issue a new OSSA for that mitaka regression.

Matt, could you please confirm the impact description proposed in above comment #6 ?
If it's accurate, let's request a cve and issue a new OSSA for that mitaka regression.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Matt Riedemann (mriedem)](https://launchpad.net/~mriedem) wrote on 2016-07-11: |  |  | [#9](/nova/%2Bbug/1589821/comments/9) |
| --- | --- | --- | --- |

Tristan, yes it's accurate.

Tristan, yes it's accurate.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray) wrote on 2016-07-13: |  |  | [#10](/nova/%2Bbug/1589821/comments/10) |
| --- | --- | --- | --- |

Here is the full impact description:

Title: Nova may fail to delete images in resize state

Reporter: Rajesh Tailor (Red Hat)

Products: Nova

Affects: >=13.0.0, <13.1.0

Description:

Rajesh Tailor from Red Hat reported a vulnerability in Nova. If an authenticated user deletes an instance while it is in resize state, it will cause the original instance to not be deleted from the compute node it was running on. An attacker can use this to launch a denial of service attack. All Nova setups are affected.

Note:

This bug is similar to OSSA-2015-017 (CVE-2015-3280) and was re-introduced in the first release of Mitaka version of Nova and it was re-fixed in nova-13.1.0.

Here is the full impact description:
Title: Nova may fail to delete images in resize state
Reporter: Rajesh Tailor (Red Hat)
Products: Nova
Affects: >=13.0.0, <13.1.0
Description:
Rajesh Tailor from Red Hat reported a vulnerability in Nova. If an authenticated user deletes an instance while it is in resize state, it will cause the original instance to not be deleted from the compute node it was running on. An attacker can use this to launch a denial of service attack. All Nova setups are affected.
Note:
This bug is similar to OSSA-2015-017 (CVE-2015-3280) and was re-introduced in the first release of Mitaka version of Nova and it was re-fixed in nova-13.1.0.

| Changed in ossa: | |
| --- | --- |
| **status**: | Incomplete → Confirmed |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Doug Hellmann (doug-hellmann)](https://launchpad.net/~doug-hellmann) wrote on 2016-07-14:  [**Fix included in openstack/nova 14.0.0.0b2**](/nova/%2Bbug/1589821/comments/11) |  |  | [#11](/nova/%2Bbug/1589821/comments/11) |
| --- | --- | --- | --- |

This issue was fixed in the openstack/nova 14.0.0.0b2 development milestone.

This issue was fixed in the openstack/nova 14.0.0.0b2 development milestone.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Jeremy Stanley (fungi)](https://launchpad.net/~fungi) wrote on 2016-09-20:  [**Re: cleanup\_incomplete\_migrations periodic task regression with commit 099cf53925c0a0275325339f21932273ee9ce2bc**](/nova/%2Bbug/1589821/comments/12) |  |  | [#12](/nova/%2Bbug/1589821/comments/12) |
| --- | --- | --- | --- |

Since there was no point release between nova 13.0.0 and 13.1.0, I think we can safely scope this to just:

Affects: ==13.0.0

Since there was no point release between nova 13.0.0 and 13.1.0, I think we can safely scope this to just:
Affects: ==13.0.0

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray) wrote on 2016-09-21: |  |  | [#13](/nova/%2Bbug/1589821/comments/13) |
| --- | --- | --- | --- |

CVE requested with this description header (adding regression to the title)

Title: Nova may fail to delete images in resize state regression

Reporter: Rajesh Tailor (Red Hat)

Products: Nova

Affects: ==13.0.0

CVE requested with this description header (adding regression to the title)
Title: Nova may fail to delete images in resize state regression
Reporter: Rajesh Tailor (Red Hat)
Products: Nova
Affects: ==13.0.0

| Changed in ossa: | |
| --- | --- |
| **status**: | Confirmed → In Progress |

[Jeremy Stanley (fungi)](https://launchpad.net/~fungi)
on 2016-09-21

| **summary**: | cleanup\_incomplete\_migrations periodic task regression with commit- 099cf53925c0a0275325339f21932273ee9ce2bc+ 099cf53 (CVE-2016-7498) |
| --- | --- |

[Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray)
on 2016-09-23

| Changed in ossa: | |
| --- | --- |
| **status**: | In Progress → Fix Released |

[See full activity log](https://bugs.launchpad.net/nova/%2Bbug/1589821/%2Bactivity)

To post a comment you must [log in](%2Blogin?comments=all).

* [Report a bug](/nova/%2Bfilebug)

This report contains
**Public**
information

Everyone can see this information.

You are
[not directly subscribed to this bug's notifications.](/nova/%2Bbug/1589821/%2Bsubscribe)

Subscribing...

* [Edit bug mail](https://bugs.launchpad.net/nova/%2Bbug/1589821/%2Bsubscriptions "View and change your subscriptions to this bug")

## Other bug subscribers

[Subscribe someone else](https://bugs.launchpad.net/nova/%2Bbug/1589821/%2Baddsubscriber "Launchpad will email that person whenever this bugs changes")

## Remote bug watches

Bug watches keep track of this bug in other bug trackers.

[![Launchpad](/@@/launchpad-footer-logo.svg)](https://launchpad.net/)
 •
[Take the tour](https://launchpad.net/%2Btour)
 •
[Read the guide](https://help.launchpad.net/)

© 2004
[Canonical Ltd.](http://canonical.com/)
 •
[Terms of use](https://launchpad.net/legal)
 •
[Data privacy](https://www.ubuntu.com/legal/dataprivacy)
 •
[Contact Launchpad Support](/feedback)
 •
[Blog](http://blog.launchpad.net/)
 •
[Careers](https://canonical.com/careers)
 •
[System status](https://ubuntu.social/%40launchpadstatus)
 •
4d55102
([Get the code!](https://dev.launchpad.net/))


