=== Content from bugzilla.redhat.com_756c8e68_20250124_181403.html ===


* Login
  + Log in using an SSO provider:- [Fedora Account System](saml2_login.cgi?idp=Fedora%20Account%20System&target=show_bug.cgi%3Fid%3D1400804)
    - [Red Hat Associate](saml2_login.cgi?idp=Red%20Hat%20Associate&target=show_bug.cgi%3Fid%3D1400804)
    - [Red Hat Customer](saml2_login.cgi?idp=Red%20Hat%20Customer&target=show_bug.cgi%3Fid%3D1400804)+ Login using a Red Hat Bugzilla account
  + Forgot Password
  + [Create an Account](createaccount.cgi)

Red Hat Bugzilla – Bug 1400804

* [Home](./)
* [New](enter_bug.cgi)
* Search
  + [Simple Search](query.cgi?format=specific)
  + [Advanced Search](query.cgi?format=advanced)
* My Links
  + [Browse](describecomponents.cgi)
  + [Requests](request.cgi)
  + Reports
  + Current State
    - [Search](query.cgi)
    - [Tabular reports](query.cgi?format=report-table)
    - [Graphical reports](query.cgi?format=report-graph)
    - [Duplicates](duplicates.cgi)
  + Other Reports
    - [User Changes](https://bugzilla.redhat.com/page.cgi?id=user_activity.html)
  + Plotly Reports
    - [Bug Status](https://bugzilla.redhat.com/page.cgi?id=bug_status.html)
    - [Bug Severity](https://bugzilla.redhat.com/page.cgi?id=bug_severity.html)
    - [Non-Defaults](https://bugzilla.redhat.com/page.cgi?id=non_defaults.html)
* [Product Dashboard](page.cgi?id=productdashboard.html)

- Help
  * [Page Help!](docs/en/html/using/understanding.html)
  * [Bug Writing Guidelines](page.cgi?id=bug-writing.html)
  * [What's new](page.cgi?id=whats-new.html)
  * [Browser Support Policy](https://access.redhat.com/help/browsers)
  * [5.0.4.rh103 Release notes](page.cgi?id=release-notes.html)
  * [FAQ](page.cgi?id=faq.html)
  * [Guides index](docs/en/html/index.html)
  * [User guide](docs/en/html/using/index.html)
  * [Web Services](docs/en/html/integrating/api/Bugzilla/WebService/Bug.html)
  * [Contact](page.cgi?id=redhat/contact.html)
  * [Legal](page.cgi?id=terms-conditions.html)
- [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")

This site requires JavaScript to be enabled to function correctly, please enable it.

[**Bug 1400804**](show_bug.cgi?id=1400804)
(CVE-2016-9777)
- [CVE-2016-9777](https://access.redhat.com/security/cve/CVE-2016-9777) Kernel: kvm: out of bounds memory access via vcpu\_id

[Summary:](page.cgi?id=fields.html#short_desc "The bug summary is a short sentence which succinctly describes what the bug is about.")
CVE-2016-9777 Kernel: kvm: out of bounds memory access via vcpu\_id

| | [Keywords](describekeywords.cgi): | Security | | --- | --- | | [Status](page.cgi?id=fields.html#bug_status): | CLOSED NOTABUG | | [Alias:](page.cgi?id=fields.html#alias "A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla.") | CVE-2016-9777 | | [Product:](describecomponents.cgi "Bugs are categorised into Products and Components. Select a Classification to narrow down this list.") | Security Response | | [Classification:](page.cgi?id=fields.html#classification "Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation.") | Other | | [Component:](describecomponents.cgi?product=Security Response "Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list.") | vulnerability | | [Sub Component:](page.cgi?id=fields.html#rh_sub_components "The sub component of a specific component") | --- | | [Version:](page.cgi?id=fields.html#version "The version field defines the version of the software the bug was found in.") | unspecified | | [Hardware:](page.cgi?id=fields.html#rep_platform "The hardware platform the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | All | | [OS:](page.cgi?id=fields.html#op_sys "The operating system the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | Linux | | [Priority:](page.cgi?id=fields.html#priority) | high | | [Severity:](page.cgi?id=fields.html#bug_severity) | high | | [Target Milestone:](page.cgi?id=fields.html#target_milestone "The Target Milestone field is used to define when the engineer the bug is assigned to expects to fix it.") | --- | | [Assignee:](page.cgi?id=fields.html#assigned_to "The person in charge of resolving the bug.") | Red Hat Product Security | | [QA Contact:](page.cgi?id=fields.html#qa_contact "The person responsible for confirming this bug if it is unconfirmed, and for verifying the fix once the bug has been resolved.") |  | | [Docs Contact:](page.cgi?id=fields.html#docs_contact "The person responsible for documenting once the bug has been resolved.") |  | | [URL:](page.cgi?id=fields.html#bug_file_loc "Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen.") |  | | [Whiteboard:](page.cgi?id=fields.html#status_whiteboard "Each bug has a free-form single line text entry box for adding tags and status information.") |  | | [Depends On:](page.cgi?id=fields.html#dependson "The bugs listed here must be resolved before this bug can be resolved.") | [1400805](show_bug.cgi?id=1400805 "CLOSED ERRATA - CVE-2016-9777 Kernel: kvm: out of bounds memory access via vcpu_id [fedora-all]") | | [Blocks:](page.cgi?id=fields.html#blocked "This bug must be resolved before the bugs listed in this field can be resolved.") | [1398090](show_bug.cgi?id=1398090) | | TreeView+ | [depends on](buglist.cgi?bug_id=1400804&bug_id_type=anddependson&format=tvp) / [blocked](buglist.cgi?bug_id=1400804&bug_id_type=andblocked&format=tvp&tvp_dir=blocked) |  | |  | | [Reported:](page.cgi?id=fields.html#reporter) | 2016-12-02 06:37 UTC by Prasad Pandit | | --- | --- | | [Modified:](page.cgi?id=fields.html#modified) | 2021-02-17 02:57 UTC ([History](show_activity.cgi?id=1400804)) | | [CC List:](page.cgi?id=fields.html#cclist) | 29 users (show)  aquini arm-mgr bhu dhoward fhrbata gansalmon iboverma ichavero itamar jforbes jkacur joelsmith jonathan jross jwboyer kernel-maint kernel-mgr labbott lgoncalv madhu.chinakonda matt mchehab mcressma nmurray pholasek plougher rt-maint rvrbovsk williams | | Fixed In Version: |  | | | Doc Type: | If docs needed, set a value | | | Doc Text: |  | | | Clone Of: |  | | | Environment: |  | | | Last Closed: | 2019-06-08 03:02:58 UTC | | | Embargoed: |  | | |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| --- | | |

| | Attachments | [(Terms of Use)](page.cgi?id=terms-conditions.html) | | | --- | --- | --- | |  | | | |  |
| --- | --- | --- | --- | --- | --- | --- | --- |

| [Description](show_bug.cgi?id=1400804#c0)  Prasad Pandit    2016-12-02 06:37:05 UTC  ``` Linux kernel built with the Kernel-based Virtual Machine(CONFIG_KVM) support is vulnerable to an out-of-bounds memory access issue. It could occur on x86 platform, while servicing I/O APIC requests with larger vcpu_id.  A guest user/process could use this flaw to crash the host kernel resulting in DoS or it could potentially be used to escalate privileges on a host.  Upstream patch: ---------------   -> <https://git.kernel.org/linus/81cdb259fb6d8c1c4ecfeea389ff5a73c07f5755>  Reference: ----------   -> <http://www.openwall.com/lists/oss-security/2016/12/02/2>   ```  [Comment 1](show_bug.cgi?id=1400804#c1)  Prasad Pandit    2016-12-02 06:38:15 UTC  ```  Created kernel tracking bugs for this issue:  Affects: fedora-all [[bug 1400805](show_bug.cgi?id=1400805 "CLOSED ERRATA - CVE-2016-9777 Kernel: kvm: out of bounds memory access via vcpu_id [fedora-all]")]   ```  [Comment 3](show_bug.cgi?id=1400804#c3)  Prasad Pandit    2016-12-02 06:41:46 UTC  ``` Statement:  This issue does not affect the versions of the kernel package as shipped with Red Hat Enterprise Linux 5, 6, 7 and Red Hat Enterprise MRG 2.   ``` |  |
| --- | --- |

---

| Note You need to [log in](show_bug.cgi?id=1400804&GoAheadAndLogIn=1) before you can comment on or make changes to this bug. |
| --- |

---

[Privacy](page.cgi?id=redhat/privacy.html)
[Contact](page.cgi?id=redhat/contact.html)
[FAQ](page.cgi?id=faq.html)
[Legal](page.cgi?id=terms-conditions.html)



=== Content from github.com_79bb808a_20250124_181404.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Ftorvalds%2Flinux%2Fcommit%2F81cdb259fb6d8c1c4ecfeea389ff5a73c07f5755)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Ftorvalds%2Flinux%2Fcommit%2F81cdb259fb6d8c1c4ecfeea389ff5a73c07f5755)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fcommit_fragments%2Frepo_layout&source=header-repo&source_repo=torvalds%2Flinux)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[torvalds](/torvalds)
/
**[linux](/torvalds/linux)**
Public

* [Notifications](/login?return_to=%2Ftorvalds%2Flinux) You must be signed in to change notification settings
* [Fork
  54.9k](/login?return_to=%2Ftorvalds%2Flinux)
* [Star
   186k](/login?return_to=%2Ftorvalds%2Flinux)

* [Code](/torvalds/linux)
* [Pull requests
  437](/torvalds/linux/pulls)
* [Actions](/torvalds/linux/actions)
* [Projects
  0](/torvalds/linux/projects)
* [Security](/torvalds/linux/security)
* [Insights](/torvalds/linux/pulse)

Additional navigation options

* [Code](/torvalds/linux)
* [Pull requests](/torvalds/linux/pulls)
* [Actions](/torvalds/linux/actions)
* [Projects](/torvalds/linux/projects)
* [Security](/torvalds/linux/security)
* [Insights](/torvalds/linux/pulse)

## Commit

[Permalink](/torvalds/linux/commit/81cdb259fb6d8c1c4ecfeea389ff5a73c07f5755)

This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository.

KVM: x86: fix out-of-bounds accesses of rtc\_eoi map

[Browse files](/torvalds/linux/tree/81cdb259fb6d8c1c4ecfeea389ff5a73c07f5755)
Browse the repository at this point in the history

```
KVM was using arrays of size KVM_MAX_VCPUS with vcpu_id, but ID can be
bigger that the maximal number of VCPUs, resulting in out-of-bounds
access.

Found by syzkaller:

  BUG: KASAN: slab-out-of-bounds in __apic_accept_irq+0xb33/0xb50 at addr [...]
  Write of size 1 by task a.out/27101
  CPU: 1 PID: 27101 Comm: a.out Not tainted 4.9.0-rc5+ [#49](https://github.com/torvalds/linux/pull/49)
  Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS Bochs 01/01/2011
   [...]
  Call Trace:
   [...] __apic_accept_irq+0xb33/0xb50 arch/x86/kvm/lapic.c:905
   [...] kvm_apic_set_irq+0x10e/0x180 arch/x86/kvm/lapic.c:495
   [...] kvm_irq_delivery_to_apic+0x732/0xc10 arch/x86/kvm/irq_comm.c:86
   [...] ioapic_service+0x41d/0x760 arch/x86/kvm/ioapic.c:360
   [...] ioapic_set_irq+0x275/0x6c0 arch/x86/kvm/ioapic.c:222
   [...] kvm_ioapic_inject_all arch/x86/kvm/ioapic.c:235
   [...] kvm_set_ioapic+0x223/0x310 arch/x86/kvm/ioapic.c:670
   [...] kvm_vm_ioctl_set_irqchip arch/x86/kvm/x86.c:3668
   [...] kvm_arch_vm_ioctl+0x1a08/0x23c0 arch/x86/kvm/x86.c:3999
   [...] kvm_vm_ioctl+0x1fa/0x1a70 arch/x86/kvm/../../../virt/kvm/kvm_main.c:3099

Reported-by: Dmitry Vyukov <dvyukov@google.com>
Cc: stable@vger.kernel.org
Fixes: [af1bae5](https://github.com/torvalds/linux/commit/af1bae5497b98cb99d6b0492e6981f060420a00c) ("KVM: x86: bump KVM_MAX_VCPU_ID to 1023")
Reviewed-by: Paolo Bonzini <pbonzini@redhat.com>
Reviewed-by: David Hildenbrand <david@redhat.com>
Signed-off-by: Radim Krčmář <rkrcmar@redhat.com>
```

* Loading branch information

[![@rkrcmar](https://avatars.githubusercontent.com/u/18557206?s=40&v=4)](/rkrcmar)

[rkrcmar](/torvalds/linux/commits?author=rkrcmar "View all commits by rkrcmar")
committed
Nov 24, 2016

1 parent
[2117d53](/torvalds/linux/commit/2117d5398c81554fbf803f5fd1dc55eb78216c0c)

commit 81cdb25

 Show file tree

 Hide file tree

Showing
**2 changed files**
with
**3 additions**
and
**3 deletions**.

* Whitespace
* Ignore whitespace

* Split
* Unified

* arch/x86/kvm

  + arch/x86/kvm/ioapic.c
    [ioapic.c](#diff-a9d6b7428ef20fdb692661e075fccfe3188dc03587c979ce34164ee55dff97b2)
  + arch/x86/kvm/ioapic.h
    [ioapic.h](#diff-4f8d8f14709b5b4c3d0d962aa392b9aacae59b91f8bb5929ce4b4acfdb46d5fe)

## There are no files selected for viewing

2 changes: 1 addition & 1 deletion

2
[arch/x86/kvm/ioapic.c](#diff-a9d6b7428ef20fdb692661e075fccfe3188dc03587c979ce34164ee55dff97b2 "arch/x86/kvm/ioapic.c")

Show comments

[View file](/torvalds/linux/blob/81cdb259fb6d8c1c4ecfeea389ff5a73c07f5755/arch/x86/kvm/ioapic.c)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -94,7 +94,7 @@ static unsigned long ioapic\_read\_indirect(struct kvm\_ioapic \*ioapic, |
|  |  | static void rtc\_irq\_eoi\_tracking\_reset(struct kvm\_ioapic \*ioapic) |
|  |  | { |
|  |  | ioapic->rtc\_status.pending\_eoi = 0; |
|  |  | bitmap\_zero(ioapic->rtc\_status.dest\_map.map, KVM\_MAX\_VCPUS); |
|  |  | bitmap\_zero(ioapic->rtc\_status.dest\_map.map, KVM\_MAX\_VCPU\_ID); |
|  |  | } |
|  |  |  |
|  |  | static void kvm\_rtc\_eoi\_tracking\_restore\_all(struct kvm\_ioapic \*ioapic); |
| Expand Down | |  |

4 changes: 2 additions & 2 deletions

4
[arch/x86/kvm/ioapic.h](#diff-4f8d8f14709b5b4c3d0d962aa392b9aacae59b91f8bb5929ce4b4acfdb46d5fe "arch/x86/kvm/ioapic.h")

Show comments

[View file](/torvalds/linux/blob/81cdb259fb6d8c1c4ecfeea389ff5a73c07f5755/arch/x86/kvm/ioapic.h)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -42,13 +42,13 @@ struct kvm\_vcpu; |
|  |  |  |
|  |  | struct dest\_map { |
|  |  | /\* vcpu bitmap where IRQ has been sent \*/ |
|  |  | DECLARE\_BITMAP(map, KVM\_MAX\_VCPUS); |
|  |  | DECLARE\_BITMAP(map, KVM\_MAX\_VCPU\_ID); |
|  |  |  |
|  |  | /\* |
|  |  | \* Vector sent to a given vcpu, only valid when |
|  |  | \* the vcpu's bit in map is set |
|  |  | \*/ |
|  |  | u8 vectors[KVM\_MAX\_VCPUS]; |
|  |  | u8 vectors[KVM\_MAX\_VCPU\_ID]; |
|  |  | }; |
|  |  |  |
|  |  |  |
| Expand Down | |  |

Toggle all file notes
Toggle all file annotations

### 0 comments on commit `81cdb25`

Please
[sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Ftorvalds%2Flinux%2Fcommit%2F81cdb259fb6d8c1c4ecfeea389ff5a73c07f5755) to comment.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from git.kernel.org_6e8a2364_20250124_181401.html ===


| [cgit logo](/) | [index](/) : [kernel/git/torvalds/linux.git](/pub/scm/linux/kernel/git/torvalds/linux.git/) | for-next master |
| --- | --- | --- |
| Linux kernel source tree | Linus Torvalds |

| [about](/pub/scm/linux/kernel/git/torvalds/linux.git/about/)[summary](/pub/scm/linux/kernel/git/torvalds/linux.git/)[refs](/pub/scm/linux/kernel/git/torvalds/linux.git/refs/?id=81cdb259fb6d8c1c4ecfeea389ff5a73c07f5755)[log](/pub/scm/linux/kernel/git/torvalds/linux.git/log/)[tree](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/?id=81cdb259fb6d8c1c4ecfeea389ff5a73c07f5755)[commit](/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=81cdb259fb6d8c1c4ecfeea389ff5a73c07f5755)[diff](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/?id=81cdb259fb6d8c1c4ecfeea389ff5a73c07f5755)[stats](/pub/scm/linux/kernel/git/torvalds/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Radim Krčmář <rkrcmar@redhat.com> | 2016-11-23 21:15:27 +0100 |
| --- | --- | --- |
| committer | Radim Krčmář <rkrcmar@redhat.com> | 2016-11-24 18:37:19 +0100 |
| commit | [81cdb259fb6d8c1c4ecfeea389ff5a73c07f5755](/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=81cdb259fb6d8c1c4ecfeea389ff5a73c07f5755) ([patch](/pub/scm/linux/kernel/git/torvalds/linux.git/patch/?id=81cdb259fb6d8c1c4ecfeea389ff5a73c07f5755)) | |
| tree | [c0e087707bb37d045abc32dce1888afcfa4c977d](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/?id=81cdb259fb6d8c1c4ecfeea389ff5a73c07f5755) | |
| parent | [2117d5398c81554fbf803f5fd1dc55eb78216c0c](/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=2117d5398c81554fbf803f5fd1dc55eb78216c0c) ([diff](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/?id=81cdb259fb6d8c1c4ecfeea389ff5a73c07f5755&id2=2117d5398c81554fbf803f5fd1dc55eb78216c0c)) | |
| download | [linux-81cdb259fb6d8c1c4ecfeea389ff5a73c07f5755.tar.gz](/pub/scm/linux/kernel/git/torvalds/linux.git/snapshot/linux-81cdb259fb6d8c1c4ecfeea389ff5a73c07f5755.tar.gz) | |

KVM: x86: fix out-of-bounds accesses of rtc\_eoi mapKVM was using arrays of size KVM\_MAX\_VCPUS with vcpu\_id, but ID can be
bigger that the maximal number of VCPUs, resulting in out-of-bounds
access.
Found by syzkaller:
BUG: KASAN: slab-out-of-bounds in \_\_apic\_accept\_irq+0xb33/0xb50 at addr [...]
Write of size 1 by task a.out/27101
CPU: 1 PID: 27101 Comm: a.out Not tainted 4.9.0-rc5+ #49
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS Bochs 01/01/2011
[...]
Call Trace:
[...] \_\_apic\_accept\_irq+0xb33/0xb50 arch/x86/kvm/lapic.c:905
[...] kvm\_apic\_set\_irq+0x10e/0x180 arch/x86/kvm/lapic.c:495
[...] kvm\_irq\_delivery\_to\_apic+0x732/0xc10 arch/x86/kvm/irq\_comm.c:86
[...] ioapic\_service+0x41d/0x760 arch/x86/kvm/ioapic.c:360
[...] ioapic\_set\_irq+0x275/0x6c0 arch/x86/kvm/ioapic.c:222
[...] kvm\_ioapic\_inject\_all arch/x86/kvm/ioapic.c:235
[...] kvm\_set\_ioapic+0x223/0x310 arch/x86/kvm/ioapic.c:670
[...] kvm\_vm\_ioctl\_set\_irqchip arch/x86/kvm/x86.c:3668
[...] kvm\_arch\_vm\_ioctl+0x1a08/0x23c0 arch/x86/kvm/x86.c:3999
[...] kvm\_vm\_ioctl+0x1fa/0x1a70 arch/x86/kvm/../../../virt/kvm/kvm\_main.c:3099
Reported-by: Dmitry Vyukov <dvyukov@google.com>
Cc: stable@vger.kernel.org
Fixes: af1bae5497b9 ("KVM: x86: bump KVM\_MAX\_VCPU\_ID to 1023")
Reviewed-by: Paolo Bonzini <pbonzini@redhat.com>
Reviewed-by: David Hildenbrand <david@redhat.com>
Signed-off-by: Radim Krčmář <rkrcmar@redhat.com>
[Diffstat](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/?id=81cdb259fb6d8c1c4ecfeea389ff5a73c07f5755)

| -rw-r--r-- | [arch/x86/kvm/ioapic.c](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/arch/x86/kvm/ioapic.c?id=81cdb259fb6d8c1c4ecfeea389ff5a73c07f5755) | 2 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |
| -rw-r--r-- | [arch/x86/kvm/ioapic.h](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/arch/x86/kvm/ioapic.h?id=81cdb259fb6d8c1c4ecfeea389ff5a73c07f5755) | 4 | |  |  |  | | --- | --- | --- | |

2 files changed, 3 insertions, 3 deletions

| diff --git a/arch/x86/kvm/ioapic.c b/arch/x86/kvm/ioapic.cindex 1a22de70f7f7d4..6e219e5c07d27c 100644--- a/[arch/x86/kvm/ioapic.c](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/arch/x86/kvm/ioapic.c?id=2117d5398c81554fbf803f5fd1dc55eb78216c0c)+++ b/[arch/x86/kvm/ioapic.c](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/arch/x86/kvm/ioapic.c?id=81cdb259fb6d8c1c4ecfeea389ff5a73c07f5755)@@ -94,7 +94,7 @@ static unsigned long ioapic\_read\_indirect(struct kvm\_ioapic \*ioapic, static void rtc\_irq\_eoi\_tracking\_reset(struct kvm\_ioapic \*ioapic) { ioapic->rtc\_status.pending\_eoi = 0;- bitmap\_zero(ioapic->rtc\_status.dest\_map.map, KVM\_MAX\_VCPUS);+ bitmap\_zero(ioapic->rtc\_status.dest\_map.map, KVM\_MAX\_VCPU\_ID); }  static void kvm\_rtc\_eoi\_tracking\_restore\_all(struct kvm\_ioapic \*ioapic);diff --git a/arch/x86/kvm/ioapic.h b/arch/x86/kvm/ioapic.hindex 7d2692a4965756..1cc6e54436dbaa 100644--- a/[arch/x86/kvm/ioapic.h](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/arch/x86/kvm/ioapic.h?id=2117d5398c81554fbf803f5fd1dc55eb78216c0c)+++ b/[arch/x86/kvm/ioapic.h](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/arch/x86/kvm/ioapic.h?id=81cdb259fb6d8c1c4ecfeea389ff5a73c07f5755)@@ -42,13 +42,13 @@ struct kvm\_vcpu;  struct dest\_map { /\* vcpu bitmap where IRQ has been sent \*/- DECLARE\_BITMAP(map, KVM\_MAX\_VCPUS);+ DECLARE\_BITMAP(map, KVM\_MAX\_VCPU\_ID);  /\* \* Vector sent to a given vcpu, only valid when \* the vcpu's bit in map is set \*/- u8 vectors[KVM\_MAX\_VCPUS];+ u8 vectors[KVM\_MAX\_VCPU\_ID]; }; |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-24 18:12:38 +0000



=== Content from www.kernel.org_305e9310_20250124_181402.html ===
commit 356ccf6d2b0cfe9dca6c5d961bfd04dc8c0f4e64
Author: Greg Kroah-Hartman
Date: Fri Dec 2 09:11:45 2016 +0100
Linux 4.8.12
commit f81c90012f2f1facc0b292d9ad63631ec964cd50
Author: Suganath Prabu S
Date: Thu Nov 17 16:15:58 2016 +0530
scsi: mpt3sas: Unblock device after controller reset
commit 7ff723ad0f87feba43dda45fdae71206063dd7d4 upstream.
While issuing any ATA passthrough command to firmware the driver will
block the device. But it will unblock the device only if the I/O
completes through the ISR path. If a controller reset occurs before
command completion the device will remain in blocked state.
Make sure we unblock the device following a controller reset if an ATA
passthrough command was queued.
[mkp: clarified patch description]
Fixes: ac6c2a93bd07 ("mpt3sas: Fix for SATA drive in blocked state, after diag reset")
Signed-off-by: Suganath Prabu S
Signed-off-by: Martin K. Petersen
Signed-off-by: Greg Kroah-Hartman
commit 3de3eebb10fd21155ce2dee2c19ff92c31b7091e
Author: Eric Dumazet
Date: Tue Nov 22 11:17:30 2016 -0800
flow\_dissect: call init\_default\_flow\_dissectors() earlier
commit c9b8af1330198ae241cd545e1f040019010d44d9 upstream.
Andre Noll reported panics after my recent fix (commit 34fad54c2537
"net: \_\_skb\_flow\_dissect() must cap its return value")
After some more headaches, Alexander root caused the problem to
init\_default\_flow\_dissectors() being called too late, in case
a network driver like IGB is not a module and receives DHCP message
very early.
Fix is to call init\_default\_flow\_dissectors() much earlier,
as it is a core infrastructure and does not depend on another
kernel service.
Fixes: 06635a35d13d4 ("flow\_dissect: use programable dissector in skb\_flow\_dissect and friends")
Signed-off-by: Eric Dumazet
Reported-by: Andre Noll
Diagnosed-by: Alexander Duyck
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 7838fbe25a95ce2cd6e8ae27a76d369365da89d4
Author: Michal Hocko
Date: Tue Nov 29 17:25:15 2016 +0100
mm, oom: stop pre-mature high-order OOM killer invocations
31e49bfda184 ("mm, oom: protect !costly allocations some more for
!CONFIG\_COMPACTION") was an attempt to reduce chances of pre-mature OOM
killer invocation for high order requests. It seemed to work for most
users just fine but it is far from bullet proof and obviously not
sufficient for Marc who has reported pre-mature OOM killer invocations
with 4.8 based kernels. 4.9 will all the compaction improvements seems
to be behaving much better but that would be too intrusive to backport
to 4.8 stable kernels. Instead this patch simply never declares OOM for
!costly high order requests. We rely on order-0 requests to do that in
case we are really out of memory. Order-0 requests are much more common
and so a risk of a livelock without any way forward is highly unlikely.
Reported-by: Marc MERLIN
Tested-by: Marc MERLIN
Signed-off-by: Michal Hocko
commit 374ff835e2b6ab9d6b21d28df39445a163759dd2
Author: Oliver Hartkopp
Date: Wed Nov 23 14:33:25 2016 +0100
can: bcm: fix support for CAN FD frames
commit 5499a6b22e5508b921c447757685b0a5e40a07ed upstream.
Since commit 6f3b911d5f29b98 ("can: bcm: add support for CAN FD frames") the
CAN broadcast manager supports CAN and CAN FD data frames.
As these data frames are embedded in struct can[fd]\_frames which have a
different length the access to the provided array of CAN frames became
dependend of op->cfsiz. By using a struct canfd\_frame pointer for the array of
CAN frames the new offset calculation based on op->cfsiz was accidently applied
to CAN FD frame element lengths.
This fix makes the pointer to the arrays of the different CAN frame types a
void pointer so that the offset calculation in bytes accesses the correct CAN
frame elements.
Reference: http://marc.info/?l=linux-netdev&m=147980658909653
Reported-by: Andrey Konovalov
Signed-off-by: Oliver Hartkopp
Tested-by: Andrey Konovalov
Signed-off-by: Marc Kleine-Budde
Signed-off-by: Greg Kroah-Hartman
commit 7ed8d94b99b31fbd6806a313b953a5090e1c26cf
Author: Oliver O'Halloran
Date: Wed Nov 23 13:55:13 2016 +1100
powerpc/boot: Fix the early OPAL console wrappers
commit a1ff57416af9a7971a801d553cd53edd8afb28d6 upstream.
When configured with CONFIG\_PPC\_EARLY\_DEBUG\_OPAL=y the kernel expects
the OPAL entry and base addresses to be passed in r8 and r9
respectively. Currently the wrapper does not attempt to restore these
values before entering the decompressed kernel which causes the kernel
to branch into whatever happens to be in r9 when doing a write to the
OPAL console in early boot.
This patch adds a platform\_ops hook that can be used to branch into the
new kernel. The OPAL console driver patches this at runtime so that if
the console is used it will be restored just prior to entering the
kernel.
Fixes: 656ad58ef19e ("powerpc/boot: Add OPAL console to epapr wrappers")
Signed-off-by: Oliver O'Halloran
Signed-off-by: Michael Ellerman
Signed-off-by: Greg Kroah-Hartman
commit 7cbe9568fa041692d57f88663d215df496179c9d
Author: Aneesh Kumar K.V
Date: Thu Nov 24 15:09:54 2016 +0530
powerpc/mm: Fixup kernel read only mapping
commit 984d7a1ec67ce3a46324fa4bcb4c745bbc266cf2 upstream.
With commit e58e87adc8bf9 ("powerpc/mm: Update \_PAGE\_KERNEL\_RO") we
started using the ppp value 0b110 to map kernel readonly. But that
facility was only added as part of ISA 2.04. For earlier ISA version
only supported ppp bit value for readonly mapping is 0b011. (This
implies both user and kernel get mapped using the same ppp bit value for
readonly mapping.).
Update the code such that for earlier architecture version we use ppp
value 0b011 for readonly mapping. We don't differentiate between power5+
and power5 here and apply the new ppp bits only from power6 (ISA 2.05).
This keep the changes minimal.
This fixes issue with PS3 spu usage reported at
https://lkml.kernel.org/r/rep.1421449714.geoff@infradead.org
Fixes: e58e87adc8bf9 ("powerpc/mm: Update \_PAGE\_KERNEL\_RO")
Tested-by: Geoff Levand
Signed-off-by: Aneesh Kumar K.V
Signed-off-by: Michael Ellerman
Signed-off-by: Greg Kroah-Hartman
commit 30988ea317837df4467d92edb9684ec6330b23df
Author: Benjamin Herrenschmidt
Date: Mon Nov 21 18:08:05 2016 +1100
powerpc: Set missing wakeup bit in LPCR on POWER9
commit 7a43906f5cbfb74712af168988455e350707e310 upstream.
There is a new bit, LPCR\_PECE\_HVEE (Hypervisor Virtualization Exit
Enable), which controls wakeup from STOP states on Hypervisor
Virtualization Interrupts (which happen to also be all external
interrupts in host or bare metal mode).
It needs to be set or we will miss wakeups.
Fixes: 9baaef0a22c8 ("powerpc/irq: Add support for HV virtualization interrupts")
Signed-off-by: Benjamin Herrenschmidt
[mpe: Rename it to HVEE to match the name in the ISA]
Signed-off-by: Michael Ellerman
Signed-off-by: Greg Kroah-Hartman
commit 8d248df485f2f2adf4b6ed7a7855e09c0dffeff7
Author: Dan Williams
Date: Wed Nov 16 09:00:38 2016 -0800
device-dax: fail all private mapping attempts
commit 4cb19355ea19995941ccaad115dbfac6b75215ca upstream.
The device-dax implementation originally tried to be tricky and allow
private read-only mappings, but in the process allowed writable
MAP\_PRIVATE + MAP\_NORESERVE mappings. For simplicity and predictability
just fail all private mapping attempts since device-dax memory is
statically allocated and will never support overcommit.
Cc: Dave Hansen
Fixes: dee410792419 ("/dev/dax, core: file operations and dax-mmap")
Reported-by: Pawel Lebioda
Signed-off-by: Dan Williams
Signed-off-by: Greg Kroah-Hartman
commit f87a483126b5e3f8f03eb778fd18fb5633a14a89
Author: Dan Williams
Date: Fri Oct 28 14:34:51 2016 -0700
device-dax: check devm\_nsio\_enable() return value
commit 6a84fb4b4e439a8ef0ce19ec7e7661ad76f655c9 upstream.
If the dax\_pmem driver is passed a resource that is already busy the
driver probe attempt should fail with a message like the following:
dax\_pmem dax0.1: could not reserve region [mem 0x100000000-0x11fffffff]
However, if we do not catch the error we crash for the obvious reason of
accessing memory that is not mapped.
BUG: unable to handle kernel paging request at ffffc90020001000
IP: [] \_\_memcpy+0x12/0x20
[..]
Call Trace:
[] ? nsio\_rw\_bytes+0x60/0x180
[] nd\_pfn\_validate+0x75/0x320
[] nvdimm\_setup\_pfn+0xb9/0x5d0
[] ? devm\_nsio\_enable+0xff/0x110
[] dax\_pmem\_probe+0x59/0x260
Fixes: ab68f2622136 ("/dev/dax, pmem: direct access to persistent memory")
Reported-by: Dave Hansen
Signed-off-by: Dan Williams
Signed-off-by: Greg Kroah-Hartman
commit 5b08489eba14f66efec11ca7521744d6fd83e246
Author: Takashi Iwai
Date: Thu Nov 17 10:49:31 2016 +0100
xc2028: Fix use-after-free bug properly
commit 22a1e7783e173ab3d86018eb590107d68df46c11 upstream.
The commit 8dfbcc4351a0 ("[media] xc2028: avoid use after free") tried
to address the reported use-after-free by clearing the reference.
However, it's clearing the wrong pointer; it sets NULL to
priv->ctrl.fname, but it's anyway overwritten by the next line
memcpy(&priv->ctrl, p, sizeof(priv->ctrl)).
OTOH, the actual code accessing the freed string is the strcmp() call
with priv->fname:
if (!firmware\_name[0] && p->fname &&
priv->fname && strcmp(p->fname, priv->fname))
free\_firmware(priv);
where priv->fname points to the previous file name, and this was
already freed by kfree().
For fixing the bug properly, this patch does the following:
- Keep the copy of firmware file name in only priv->fname,
priv->ctrl.fname isn't changed;
- The allocation is done only when the firmware gets loaded;
- The kfree() is called in free\_firmware() commonly
Fixes: commit 8dfbcc4351a0 ('[media] xc2028: avoid use after free')
Signed-off-by: Takashi Iwai
Signed-off-by: Mauro Carvalho Chehab
Signed-off-by: Greg Kroah-Hartman
commit 9030deb21f29d96160cf376355ce47ac98fb6e45
Author: Andrey Ryabinin
Date: Thu Nov 24 13:23:03 2016 +0000
X.509: Fix double free in x509\_cert\_parse() [ver #3]
commit 2b95fda2c4fcb6d6625963f889247538f247fce0 upstream.
We shouldn't free cert->pub->key in x509\_cert\_parse() because
x509\_free\_certificate() also does this:
BUG: Double free or freeing an invalid pointer
...
Call Trace:
[] dump\_stack+0x63/0x83
[] kasan\_object\_err+0x21/0x70
[] kasan\_report\_double\_free+0x49/0x60
[] kasan\_slab\_free+0x9d/0xc0
[] kfree+0x8a/0x1a0
[] public\_key\_free+0x1f/0x30
[] x509\_free\_certificate+0x24/0x90
[] x509\_cert\_parse+0x2bc/0x300
[] x509\_key\_preparse+0x3e/0x330
[] asymmetric\_key\_preparse+0x6f/0x100
[] key\_create\_or\_update+0x260/0x5f0
[] SyS\_add\_key+0x199/0x2a0
[] entry\_SYSCALL\_64\_fastpath+0x1e/0xad
Object at ffff880110bd1900, in cache kmalloc-512 size: 512
....
Freed:
PID = 2579
[] save\_stack\_trace+0x1b/0x20
[] save\_stack+0x46/0xd0
[] kasan\_slab\_free+0x73/0xc0
[] kfree+0x8a/0x1a0
[] x509\_cert\_parse+0x2a3/0x300
[] x509\_key\_preparse+0x3e/0x330
[] asymmetric\_key\_preparse+0x6f/0x100
[] key\_create\_or\_update+0x260/0x5f0
[] SyS\_add\_key+0x199/0x2a0
[] entry\_SYSCALL\_64\_fastpath+0x1e/0xad
Fixes: db6c43bd2132 ("crypto: KEYS: convert public key and digsig asym to the akcipher api")
Signed-off-by: Andrey Ryabinin
Signed-off-by: David Howells
Signed-off-by: James Morris
Signed-off-by: Greg Kroah-Hartman
commit 0257b7e20c07e7d1fac3c7e20ef3c01792cef5a3
Author: Andrey Ryabinin
Date: Thu Nov 24 13:23:10 2016 +0000
mpi: Fix NULL ptr dereference in mpi\_powm() [ver #3]
commit f5527fffff3f002b0a6b376163613b82f69de073 upstream.
This fixes CVE-2016-8650.
If mpi\_powm() is given a zero exponent, it wants to immediately return
either 1 or 0, depending on the modulus. However, if the result was
initalised with zero limb space, no limbs space is allocated and a
NULL-pointer exception ensues.
Fix this by allocating a minimal amount of limb space for the result when
the 0-exponent case when the result is 1 and not touching the limb space
when the result is 0.
This affects the use of RSA keys and X.509 certificates that carry them.
BUG: unable to handle kernel NULL pointer dereference at (null)
IP: [] mpi\_powm+0x32/0x7e6
PGD 0
Oops: 0002 [#1] SMP
Modules linked in:
CPU: 3 PID: 3014 Comm: keyctl Not tainted 4.9.0-rc6-fscache+ #278
Hardware name: ASUS All Series/H97-PLUS, BIOS 2306 10/09/2014
task: ffff8804011944c0 task.stack: ffff880401294000
RIP: 0010:[] [] mpi\_powm+0x32/0x7e6
RSP: 0018:ffff880401297ad8 EFLAGS: 00010212
RAX: 0000000000000000 RBX: ffff88040868bec0 RCX: ffff88040868bba0
RDX: ffff88040868b260 RSI: ffff88040868bec0 RDI: ffff88040868bee0
RBP: ffff880401297ba8 R08: 0000000000000000 R09: 0000000000000000
R10: 0000000000000047 R11: ffffffff8183b210 R12: 0000000000000000
R13: ffff8804087c7600 R14: 000000000000001f R15: ffff880401297c50
FS: 00007f7a7918c700(0000) GS:ffff88041fb80000(0000) knlGS:0000000000000000
CS: 0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 0000000000000000 CR3: 0000000401250000 CR4: 00000000001406e0
Stack:
ffff88040868bec0 0000000000000020 ffff880401297b00 ffffffff81376cd4
0000000000000100 ffff880401297b10 ffffffff81376d12 ffff880401297b30
ffffffff81376f37 0000000000000100 0000000000000000 ffff880401297ba8
Call Trace:
[] ? \_\_sg\_page\_iter\_next+0x43/0x66
[] ? sg\_miter\_get\_next\_page+0x1b/0x5d
[] ? sg\_miter\_next+0x17/0xbd
[] ? mpi\_read\_raw\_from\_sgl+0xf2/0x146
[] rsa\_verify+0x9d/0xee
[] ? pkcs1pad\_sg\_set\_buf+0x2e/0xbb
[] pkcs1pad\_verify+0xc0/0xe1
[] public\_key\_verify\_signature+0x1b0/0x228
[] x509\_check\_for\_self\_signed+0xa1/0xc4
[] x509\_cert\_parse+0x167/0x1a1
[] x509\_key\_preparse+0x21/0x1a1
[] asymmetric\_key\_preparse+0x34/0x61
[] key\_create\_or\_update+0x145/0x399
[] SyS\_add\_key+0x154/0x19e
[] do\_syscall\_64+0x80/0x191
[] entry\_SYSCALL64\_slow\_path+0x25/0x25
Code: 56 41 55 41 54 53 48 81 ec a8 00 00 00 44 8b 71 04 8b 42 04 4c 8b 67 18 45 85 f6 89 45 80 0f 84 b4 06 00 00 85 c0 75 2f 41 ff ce <49> c7 04 24 01 00 00 00 b0 01 75 0b 48 8b 41 18 48 83 38 01 0f
RIP [] mpi\_powm+0x32/0x7e6
RSP
CR2: 0000000000000000
---[ end trace d82015255d4a5d8d ]---
Basically, this is a backport of a libgcrypt patch:
http://git.gnupg.org/cgi-bin/gitweb.cgi?p=libgcrypt.git;a=patch;h=6e1adb05d290aeeb1c230c763970695f4a538526
Fixes: cdec9cb5167a ("crypto: GnuPG based MPI lib - source files (part 1)")
Signed-off-by: Andrey Ryabinin
Signed-off-by: David Howells
cc: Dmitry Kasatkin
cc: linux-ima-devel@lists.sourceforge.net
Signed-off-by: James Morris
Signed-off-by: Greg Kroah-Hartman
commit bdab996a7a9e1c94900bfae78c702de23a8edbc7
Author: Michael Walle
Date: Tue Nov 15 11:13:16 2016 +0100
mmc: sdhci-of-esdhc: fixup PRESENT\_STATE read
commit b0921d5c9ed6ffa8a4d6afc5ee5f136b87445f14 upstream.
Since commit 87a18a6a5652 ("mmc: mmc: Use ->card\_busy() to detect busy
cards in \_\_mmc\_switch()") the ESDHC driver is broken:
mmc0: Card stuck in programming state! \_\_mmc\_switch
mmc0: error -110 whilst initialising MMC card
Since this commit \_\_mmc\_switch() uses ->card\_busy(), which is
sdhci\_card\_busy() for the esdhc driver. sdhci\_card\_busy() uses the
PRESENT\_STATE register, specifically the DAT0 signal level bit. But the
ESDHC uses a non-conformant PRESENT\_STATE register, thus a read fixup is
required to make the driver work again.
Signed-off-by: Michael Walle
Fixes: 87a18a6a5652 ("mmc: mmc: Use ->card\_busy() to detect busy cards in \_\_mmc\_switch()")
Acked-by: Yangbo Lu
Acked-by: Adrian Hunter
Signed-off-by: Ulf Hansson
Signed-off-by: Greg Kroah-Hartman
commit 0a80bef18a9f6db0a5dc5683ed42b4c69cd587d4
Author: John David Anglin
Date: Thu Nov 24 20:18:14 2016 -0500
parisc: Also flush data TLB in flush\_icache\_page\_asm
commit 5035b230e7b67ac12691ed3b5495bbb617027b68 upstream.
This is the second issue I noticed in reviewing the parisc TLB code.
The fic instruction may use either the instruction or data TLB in
flushing the instruction cache. Thus, on machines with a split TLB, we
should also flush the data TLB after setting up the temporary alias
registers.
Although this has no functional impact, I changed the pdtlb and pitlb
instructions to consistently use the index register %r0. These
instructions do not support integer displacements.
Tested on rp3440 and c8000.
Signed-off-by: John David Anglin
Signed-off-by: Helge Deller
Signed-off-by: Greg Kroah-Hartman
commit 09e35a83cdc97137bcbe96edd276c26fa118fb36
Author: John David Anglin
Date: Thu Nov 24 20:06:32 2016 -0500
parisc: Fix race in pci-dma.c
commit c0452fb9fb8f49c7d68ab9fa0ad092016be7b45f upstream.
We are still troubled by occasional random segmentation faults and
memory memory corruption on SMP machines. The causes quite a few
package builds to fail on the Debian buildd machines for parisc. When
gcc-6 failed to build three times in a row, I looked again at the TLB
related code. I found a couple of issues. This is the first.
In general, we need to ensure page table updates and corresponding TLB
purges are atomic. The attached patch fixes an instance in pci-dma.c
where the page table update was not guarded by the TLB lock.
Tested on rp3440 and c8000. So far, no further random segmentation
faults have been observed.
Signed-off-by: John David Anglin
Signed-off-by: Helge Deller
Signed-off-by: Greg Kroah-Hartman
commit 3cb2bc6fdc54ed2fbb66f8a5dd6432446cb7fd1b
Author: Helge Deller
Date: Tue Nov 22 18:08:30 2016 +0100
parisc: Switch to generic sched\_clock implementation
commit 43b1f6abd59063a088416a0df042b36450f91f75 upstream.
Drop the open-coded sched\_clock() function and replace it by the provided
GENERIC\_SCHED\_CLOCK implementation. We have seen quite some hung tasks in the
past, which seem to be fixed by this patch.
Signed-off-by: Helge Deller
Signed-off-by: Helge Deller
Signed-off-by: Greg Kroah-Hartman
commit 113b60efa37cc51497171894243f86951a29aa53
Author: John David Anglin
Date: Sun Nov 20 21:12:36 2016 -0500
parisc: Fix races in parisc\_setup\_cache\_timing()
commit 741dc7bf1c7c7d93b853bb55efe77baa27e1b0a9 upstream.
Helge reported to me the following startup crash:
[ 0.000000] Linux version 4.8.0-1-parisc64-smp (debian-kernel@lists.debian.org) (gcc version 5.4.1 20161019 (GCC) ) #1 SMP Debian 4.8.7-1 (2016-11-13)
[ 0.000000] The 64-bit Kernel has started...
[ 0.000000] Kernel default page size is 4 KB. Huge pages enabled with 1 MB physical and 2 MB virtual size.
[ 0.000000] Determining PDC firmware type: System Map.
[ 0.000000] model 9000/785/J5000
[ 0.000000] Total Memory: 2048 MB
[ 0.000000] Memory: 2018528K/2097152K available (9272K kernel code, 3053K rwdata, 1319K rodata, 1024K init, 840K bss, 78624K reserved, 0K cma-reserved)
[ 0.000000] virtual kernel memory layout:
[ 0.000000] vmalloc : 0x0000000000008000 - 0x000000003f000000 (1007 MB)
[ 0.000000] memory : 0x0000000040000000 - 0x00000000c0000000 (2048 MB)
[ 0.000000] .init : 0x0000000040100000 - 0x0000000040200000 (1024 kB)
[ 0.000000] .data : 0x0000000040b0e000 - 0x0000000040f533e0 (4372 kB)
[ 0.000000] .text : 0x0000000040200000 - 0x0000000040b0e000 (9272 kB)
[ 0.768910] Brought up 1 CPUs
[ 0.992465] NET: Registered protocol family 16
[ 2.429981] Releasing cpu 1 now, hpa=fffffffffffa2000
[ 2.635751] CPU(s): 2 out of 2 PA8500 (PCX-W) at 440.000000 MHz online
[ 2.726692] Setting cache flush threshold to 1024 kB
[ 2.729932] Not-handled unaligned insn 0x43ffff80
[ 2.798114] Setting TLB flush threshold to 140 kB
[ 2.928039] Unaligned handler failed, ret = -1
[ 3.000419] \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
[ 3.000419] < Your System ate a SPARC! Gah! >
[ 3.000419] -------------------------------
[ 3.000419] \ ^\_\_^
[ 3.000419] (\_\_)\ )\/\
[ 3.000419] U ||----w |
[ 3.000419] || ||
[ 9.340055] CPU: 1 PID: 0 Comm: swapper/1 Not tainted 4.8.0-1-parisc64-smp #1 Debian 4.8.7-1
[ 9.448082] task: 00000000bfd48060 task.stack: 00000000bfd50000
[ 9.528040]
[ 10.760029] IASQ: 0000000000000000 0000000000000000 IAOQ: 000000004025d154 000000004025d158
[ 10.868052] IIR: 43ffff80 ISR: 0000000000340000 IOR: 000001ff54150960
[ 10.960029] CPU: 1 CR30: 00000000bfd50000 CR31: 0000000011111111
[ 11.052057] ORIG\_R28: 000000004021e3b4
[ 11.100045] IAOQ[0]: irq\_exit+0x94/0x120
[ 11.152062] IAOQ[1]: irq\_exit+0x98/0x120
[ 11.208031] RP(r2): irq\_exit+0xb8/0x120
[ 11.256074] Backtrace:
[ 11.288067] [<00000000402cd944>] cpu\_startup\_entry+0x1e4/0x598
[ 11.368058] [<0000000040109528>] smp\_callin+0x2c0/0x2f0
[ 11.436308] [<00000000402b53fc>] update\_curr+0x18c/0x2d0
[ 11.508055] [<00000000402b73b8>] dequeue\_entity+0x2c0/0x1030
[ 11.584040] [<00000000402b3cc0>] set\_next\_entity+0x80/0xd30
[ 11.660069] [<00000000402c1594>] pick\_next\_task\_fair+0x614/0x720
[ 11.740085] [<000000004020dd34>] \_\_schedule+0x394/0xa60
[ 11.808054] [<000000004020e488>] schedule+0x88/0x118
[ 11.876039] [<0000000040283d3c>] rescuer\_thread+0x4d4/0x5b0
[ 11.948090] [<000000004028fc4c>] kthread+0x1ec/0x248
[ 12.016053] [<0000000040205020>] end\_fault\_vector+0x20/0xc0
[ 12.092239] [<00000000402050c0>] \_switch\_to\_ret+0x0/0xf40
[ 12.164044]
[ 12.184036] CPU: 1 PID: 0 Comm: swapper/1 Not tainted 4.8.0-1-parisc64-smp #1 Debian 4.8.7-1
[ 12.244040] Backtrace:
[ 12.244040] [<000000004021c480>] show\_stack+0x68/0x80
[ 12.244040] [<00000000406f332c>] dump\_stack+0xec/0x168
[ 12.244040] [<000000004021c74c>] die\_if\_kernel+0x25c/0x430
[ 12.244040] [<000000004022d320>] handle\_unaligned+0xb48/0xb50
[ 12.244040]
[ 12.632066] ---[ end trace 9ca05a7215c7bbb2 ]---
[ 12.692036] Kernel panic - not syncing: Attempted to kill the idle task!
We have the insn 0x43ffff80 in IIR but from IAOQ we should have:
4025d150: 0f f3 20 df ldd,s r19(r31),r31
4025d154: 0f 9f 00 9c ldw r31(ret0),ret0
4025d158: bf 80 20 58 cmpb,\*<> r0,ret0,4025d18c
Cpu0 has just completed running parisc\_setup\_cache\_timing:
[ 2.429981] Releasing cpu 1 now, hpa=fffffffffffa2000
[ 2.635751] CPU(s): 2 out of 2 PA8500 (PCX-W) at 440.000000 MHz online
[ 2.726692] Setting cache flush threshold to 1024 kB
[ 2.729932] Not-handled unaligned insn 0x43ffff80
[ 2.798114] Setting TLB flush threshold to 140 kB
[ 2.928039] Unaligned handler failed, ret = -1
From the backtrace, cpu1 is in smp\_callin:
void \_\_init smp\_callin(void)
{
int slave\_id = cpu\_now\_booting;
smp\_cpu\_init(slave\_id);
preempt\_disable();
flush\_cache\_all\_local(); /\* start with known state \*/
flush\_tlb\_all\_local(NULL);
local\_irq\_enable(); /\* Interrupts have been off until now \*/
cpu\_startup\_entry(CPUHP\_AP\_ONLINE\_IDLE);
So, it has just flushed its caches and the TLB. It would seem either the
flushes in parisc\_setup\_cache\_timing or smp\_callin have corrupted kernel
memory.
The attached patch reworks parisc\_setup\_cache\_timing to remove the races
in setting the cache and TLB flush thresholds. It also corrects the
number of bytes flushed in the TLB calculation.
The patch flushes the cache and TLB on cpu0 before starting the
secondary processors so that they are started from a known state.
Tested with a few reboots on c8000.
Signed-off-by: John David Anglin
Signed-off-by: Helge Deller
Signed-off-by: Greg Kroah-Hartman
commit b2f64572db2e97340c8b17c48a9b83fac84cec4f
Author: Jacob Pan
Date: Mon Nov 14 11:08:45 2016 -0800
thermal/powerclamp: add back module device table
commit ec638db8cb9ddd5ca08b23f2835b6c9c15eb616d upstream.
Commit 3105f234e0aba43e44e277c20f9b32ee8add43d4 replaced module
cpu id table with a cpu feature check, which is logically correct.
But we need the module device table to allow module auto loading.
Fixes:3105f234 thermal/powerclamp: correct cpu support check
Signed-off-by: Jacob Pan
Signed-off-by: Zhang Rui
Signed-off-by: Greg Kroah-Hartman
commit 6dfe1643b56adce912d0b82854a7de81b42cfd2c
Author: Peter Zijlstra
Date: Thu Nov 17 18:17:31 2016 +0100
perf/x86/intel: Cure bogus unwind from PEBS entries
commit b8000586c90b4804902058a38d3a59ce5708e695 upstream.
Vince Weaver reported that perf\_fuzzer + KASAN detects that PEBS event
unwinds sometimes do 'weird' things. In particular, we seemed to be
ending up unwinding from random places on the NMI stack.
While it was somewhat expected that the event record BP,SP would not
match the interrupt BP,SP in that the interrupt is strictly later than
the record event, it was overlooked that it could be on an already
overwritten stack.
Therefore, don't copy the recorded BP,SP over the interrupted BP,SP
when we need stack unwinds.
Note that its still possible the unwind doesn't full match the actual
event, as its entirely possible to have done an (I)RET between record
and interrupt, but on average it should still point in the general
direction of where the event came from. Also, it's the best we can do,
considering.
The particular scenario that triggered the bogus NMI stack unwind was
a PEBS event with very short period, upon enabling the event at the
tail of the PMI handler (FREEZE\_ON\_PMI is not used), it instantly
triggers a record (while still on the NMI stack) which in turn
triggers the next PMI. This then causes back-to-back NMIs and we'll
try and unwind the stack-frame from the last NMI, which obviously is
now overwritten by our own.
Analyzed-by: Josh Poimboeuf
Reported-by: Vince Weaver
Signed-off-by: Peter Zijlstra (Intel)
Cc: Alexander Shishkin
Cc: Arnaldo Carvalho de Melo
Cc: Arnaldo Carvalho de Melo
Cc: Jiri Olsa
Cc: Linus Torvalds
Cc: Peter Zijlstra
Cc: Stephane Eranian
Cc: Stephane Eranian
Cc: Thomas Gleixner
Cc: davej@codemonkey.org.uk
Cc: dvyukov@google.com
Fixes: ca037701a025 ("perf, x86: Add PEBS infrastructure")
Link: http://lkml.kernel.org/r/20161117171731.GV3157@twins.programming.kicks-ass.net
Signed-off-by: Ingo Molnar
Signed-off-by: Greg Kroah-Hartman
commit 403f47ddbf6b282c1ea562e91d5f81960507a804
Author: Alexander Shishkin
Date: Fri Nov 18 13:38:43 2016 +0200
perf/core: Fix address filter parser
commit e96271f3ed7e702fa36dd0605c0c5b5f065af816 upstream.
The token table passed into match\_token() must be null-terminated, which
it currently is not in the perf's address filter string parser, as caught
by Vince's perf\_fuzzer and KASAN.
It doesn't blow up otherwise because of the alignment padding of the table
to the next element in the .rodata, which is luck.
Fixing by adding a null-terminator to the token table.
Reported-by: Vince Weaver
Tested-by: Vince Weaver
Signed-off-by: Alexander Shishkin
Acked-by: Peter Zijlstra (Intel)
Cc: Arnaldo Carvalho de Melo
Cc: Linus Torvalds
Cc: Thomas Gleixner
Cc: dvyukov@google.com
Fixes: 375637bc524 ("perf/core: Introduce address range filtering")
Link: http://lkml.kernel.org/r/877f81f264.fsf@ashishki-desk.ger.corp.intel.com
Signed-off-by: Ingo Molnar
Signed-off-by: Greg Kroah-Hartman
commit c5795c5f682dee08403113e4e6df65fc312693e0
Author: Andy Lutomirski
Date: Sat Nov 19 18:42:40 2016 -0800
x86/traps: Ignore high word of regs->cs in early\_fixup\_exception()
commit fc0e81b2bea0ebceb71889b61d2240856141c9ee upstream.
On the 80486 DX, it seems that some exceptions may leave garbage in
the high bits of CS. This causes sporadic failures in which
early\_fixup\_exception() refuses to fix up an exception.
As far as I can tell, this has been buggy for a long time, but the
problem seems to have been exacerbated by commits:
1e02ce4cccdc ("x86: Store a per-cpu shadow copy of CR4")
e1bfc11c5a6f ("x86/init: Fix cr4\_init\_shadow() on CR4-less machines")
This appears to have broken for as long as we've had early
exception handling.
[ Note to stable maintainers: This patch is needed all the way back to 3.4,
but it will only apply to 4.6 and up, as it depends on commit:
0e861fbb5bda ("x86/head: Move early exception panic code into early\_fixup\_exception()")
If you want to backport to kernels before 4.6, please don't backport the
prerequisites (there was a big chain of them that rewrote a lot of the
early exception machinery); instead, ask me and I can send you a one-liner
that will apply. ]
Reported-by: Matthew Whitehead
Signed-off-by: Andy Lutomirski
Cc: Borislav Petkov
Cc: Brian Gerst
Cc: Denys Vlasenko
Cc: H. Peter Anvin
Cc: Josh Poimboeuf
Cc: Linus Torvalds
Cc: Peter Zijlstra
Cc: Thomas Gleixner
Fixes: 4c5023a3fa2e ("x86-32: Handle exception table entries during early boot")
Link: http://lkml.kernel.org/r/cb32c69920e58a1a58e7b5cad975038a69c0ce7d.1479609510.git.luto@kernel.org
Signed-off-by: Ingo Molnar
Signed-off-by: Greg Kroah-Hartman
commit 885bad1e5f32bbf30787ead9578f8174047e6904
Author: Yu-cheng Yu
Date: Thu Nov 17 09:11:35 2016 -0800
x86/fpu: Fix invalid FPU ptrace state after execve()
commit b22cbe404a9cc3c7949e380fa1861e31934c8978 upstream.
Robert O'Callahan reported that after an execve PTRACE\_GETREGSET
NT\_X86\_XSTATE continues to return the pre-exec register values
until the exec'ed task modifies FPU state.
The test code is at:
https://bugzilla.redhat.com/attachment.cgi?id=1164286.
What is happening is fpu\_\_clear() does not properly clear fpstate.
Fix it by doing just that.
Reported-by: Robert O'Callahan
Signed-off-by: Yu-cheng Yu
Cc: Andy Lutomirski
Cc: Borislav Petkov
Cc: David Hansen
Cc: Fenghua Yu
Cc: Linus Torvalds
Cc: Peter Zijlstra
Cc: Ravi V. Shankar
Cc: Thomas Gleixner
Link: http://lkml.kernel.org/r/1479402695-6553-1-git-send-email-yu-cheng.yu@intel.com
Signed-off-by: Ingo Molnar
Signed-off-by: Greg Kroah-Hartman
commit 1a42cd56229b02ce725f313a3daae8f3bc7c9748
Author: Arnd Bergmann
Date: Tue Nov 22 21:50:52 2016 +0100
NFSv4.x: hide array-bounds warning
commit d55b352b01bc78fbc3d1bb650140668b87e58bf9 upstream.
A correct bugfix introduced a harmless warning that shows up with gcc-7:
fs/nfs/callback.c: In function 'nfs\_callback\_up':
fs/nfs/callback.c:214:14: error: array subscript is outside array bounds [-Werror=array-bounds]
What happens here is that the 'minorversion == 0' check tells the
compiler that we assume minorversion can be something other than 0,
but when CONFIG\_NFS\_V4\_1 is disabled that would be invalid and
result in an out-of-bounds access.
The added check for IS\_ENABLED(CONFIG\_NFS\_V4\_1) tells gcc that this
really can't happen, which makes the code slightly smaller and also
avoids the warning.
The bugfix that introduced the warning is marked for stable backports,
we want this one backported to the same releases.
Fixes: 98b0f80c2396 ("NFSv4.x: Fix a refcount leak in nfs\_callback\_up\_net")
Signed-off-by: Arnd Bergmann
Signed-off-by: Anna Schumaker
Signed-off-by: Greg Kroah-Hartman
commit 154c665b2b023f08d7180a28c08f1993b6d1525a
Author: John Johansen
Date: Wed Aug 31 21:10:06 2016 -0700
apparmor: fix change\_hat not finding hat after policy replacement
commit 3d40658c977769ce2138f286cf131537bf68bdfe upstream.
After a policy replacement, the task cred may be out of date and need
to be updated. However change\_hat is using the stale profiles from
the out of date cred resulting in either: a stale profile being applied
or, incorrect failure when searching for a hat profile as it has been
migrated to the new parent profile.
Fixes: 01e2b670aa898a39259bc85c78e3d74820f4d3b6 (failure to find hat)
Fixes: 898127c34ec03291c86f4ff3856d79e9e18952bc (stale policy being applied)
Bugzilla: https://bugzilla.suse.com/show\_bug.cgi?id=1000287
Signed-off-by: John Johansen
Signed-off-by: James Morris
Signed-off-by: Greg Kroah-Hartman
commit 9c15a98542f06aefa58fbbbe3ee02f226948f3bb
Author: Johannes Berg
Date: Tue Nov 15 12:05:11 2016 +0100
cfg80211: limit scan results cache size
commit 9853a55ef1bb66d7411136046060bbfb69c714fa upstream.
It's possible to make scanning consume almost arbitrary amounts
of memory, e.g. by sending beacon frames with random BSSIDs at
high rates while somebody is scanning.
Limit the number of BSS table entries we're willing to cache to
1000, limiting maximum memory usage to maybe 4-5MB, but lower
in practice - that would be the case for having both full-sized
beacon and probe response frames for each entry; this seems not
possible in practice, so a limit of 1000 entries will likely be
closer to 0.5 MB.
Signed-off-by: Johannes Berg
Signed-off-by: Greg Kroah-Hartman
commit f204d21ee0b7ecedcb50c33c4f2ff52b6e5b1455
Author: Chris Metcalf
Date: Wed Nov 16 11:18:05 2016 -0500
tile: avoid using clocksource\_cyc2ns with absolute cycle count
commit e658a6f14d7c0243205f035979d0ecf6c12a036f upstream.
For large values of "mult" and long uptimes, the intermediate
result of "cycles \* mult" can overflow 64 bits. For example,
the tile platform calls clocksource\_cyc2ns with a 1.2 GHz clock;
we have mult = 853, and after 208.5 days, we overflow 64 bits.
Since clocksource\_cyc2ns() is intended to be used for relative
cycle counts, not absolute cycle counts, performance is more
importance than accepting a wider range of cycle values. So,
just use mult\_frac() directly in tile's sched\_clock().
Commit 4cecf6d401a0 ("sched, x86: Avoid unnecessary overflow
in sched\_clock") by Salman Qazi results in essentially the same
generated code for x86 as this change does for tile. In fact,
a follow-on change by Salman introduced mult\_frac() and switched
to using it, so the C code was largely identical at that point too.
Peter Zijlstra then added mul\_u64\_u32\_shr() and switched x86
to use it. This is, in principle, better; by optimizing the
64x64->64 multiplies to be 32x32->64 multiplies we can potentially
save some time. However, the compiler piplines the 64x64->64
multiplies pretty well, and the conditional branch in the generic
mul\_u64\_u32\_shr() causes some bubbles in execution, with the
result that it's pretty much a wash. If tilegx provided its own
implementation of mul\_u64\_u32\_shr() without the conditional branch,
we could potentially save 3 cycles, but that seems like small gain
for a fair amount of additional build scaffolding; no other platform
currently provides a mul\_u64\_u32\_shr() override, and tile doesn't
currently have an  header to put the override in.
Additionally, gcc currently has an optimization bug that prevents
it from recognizing the opportunity to use a 32x32->64 multiply,
and so the result would be no better than the existing mult\_frac()
until such time as the compiler is fixed.
For now, just using mult\_frac() seems like the right answer.
Signed-off-by: Chris Metcalf
Signed-off-by: Greg Kroah-Hartman
commit c707019bef623c72dc52235fb233bfe33decc744
Author: Andrey Grodzovsky
Date: Thu Nov 10 09:35:27 2016 -0500
scsi: mpt3sas: Fix secure erase premature termination
commit 18f6084a989ba1b38702f9af37a2e4049a924be6 upstream.
This is a work around for a bug with LSI Fusion MPT SAS2 when perfoming
secure erase. Due to the very long time the operation takes, commands
issued during the erase will time out and will trigger execution of the
abort hook. Even though the abort hook is called for the specific
command which timed out, this leads to entire device halt
(scsi\_state terminated) and premature termination of the secure erase.
Set device state to busy while ATA passthrough commands are in progress.
[mkp: hand applied to 4.9/scsi-fixes, tweaked patch description]
Signed-off-by: Andrey Grodzovsky
Acked-by: Sreekanth Reddy
Cc:
Cc: Sathya Prakash
Cc: Chaitra P B
Cc: Suganath Prabu Subramani
Cc: Sreekanth Reddy
Cc: Hannes Reinecke
Signed-off-by: Martin K. Petersen
Signed-off-by: Greg Kroah-Hartman
commit b33387f6a68dd45f68770c1e89e0eb937ce426e6
Author: Petr Vandrovec
Date: Thu Nov 10 13:57:14 2016 -0800
Fix USB CB/CBI storage devices with CONFIG\_VMAP\_STACK=y
commit 2ce9d2272b98743b911196c49e7af5841381c206 upstream.
Some code (all error handling) submits CDBs that are allocated
on the stack. This breaks with CB/CBI code that tries to create
URB directly from SCSI command buffer - which happens to be in
vmalloced memory with vmalloced kernel stacks.
Let's make copy of the command in usb\_stor\_CB\_transport.
Signed-off-by: Petr Vandrovec
Acked-by: Alan Stern
Signed-off-by: Greg Kroah-Hartman
commit 89a28f3a3c77c5a71eba35907b606703145855db
Author: Doug Brown
Date: Fri Nov 4 21:18:20 2016 -0700
USB: serial: ftdi\_sio: add support for TI CC3200 LaunchPad
commit 9bfef729a3d11f04d12788d749a3ce6b47645734 upstream.
This patch adds support for the TI CC3200 LaunchPad board, which uses a
custom USB vendor ID and product ID. Channel A is used for JTAG, and
channel B is used for a UART.
Signed-off-by: Doug Brown
Signed-off-by: Johan Hovold
Signed-off-by: Greg Kroah-Hartman
commit 6476f65301879a230208ed997d1db74aada6ce15
Author: Paul Jakma
Date: Wed Nov 16 10:13:49 2016 +0000
USB: serial: cp210x: add ID for the Zone DPMX
commit 2ab13292d7a314fa45de0acc808e41aaad31989c upstream.
The BRIM Brothers Zone DPMX is a bicycle powermeter. This ID is for the USB
serial interface in its charging dock for the control pods, via which some
settings for the pods can be modified.
Signed-off-by: Paul Jakma
Cc: Barry Redmond
Signed-off-by: Johan Hovold
Signed-off-by: Greg Kroah-Hartman
commit 7445ffb75ed5d4feb69c9222356a467b992f30f8
Author: Peter Chen
Date: Tue Nov 15 18:05:33 2016 +0800
usb: chipidea: move the lock initialization to core file
commit a5d906bb261cde5f881a949d3b0fbaa285dcc574 upstream.
This can fix below dump when the lock is accessed at host
mode due to it is not initialized.
[ 46.119638] INFO: trying to register non-static key.
[ 46.124643] the code is fine but needs lockdep annotation.
[ 46.130144] turning off the locking correctness validator.
[ 46.135659] CPU: 0 PID: 690 Comm: cat Not tainted 4.9.0-rc3-00079-g4b75f1d #1210
[ 46.143075] Hardware name: Freescale i.MX6 SoloX (Device Tree)
[ 46.148923] Backtrace:
[ 46.151448] [] (dump\_backtrace) from [] (show\_stack+0x18/0x1c)
[ 46.159038] r7:edf52000
[ 46.161412] r6:60000193
[ 46.163967] r5:00000000
[ 46.165035] r4:c0e25c2c
[ 46.169109] [] (show\_stack) from [] (dump\_stack+0xb4/0xe8)
[ 46.176362] [] (dump\_stack) from [] (register\_lock\_class+0x4fc/0x56c)
[ 46.184554] r10:c0e25d24
[ 46.187014] r9:edf53e70
[ 46.189569] r8:c1642444
[ 46.190637] r7:ee9da024
[ 46.193191] r6:00000000
[ 46.194258] r5:00000000
[ 46.196812] r4:00000000
[ 46.199185] r3:00000001
[ 46.203259] [] (register\_lock\_class) from [] (\_\_lock\_acquire+0x80/0x10f0)
[ 46.211797] r10:c0e25d24
[ 46.214257] r9:edf53e70
[ 46.216813] r8:ee9da024
[ 46.217880] r7:c1642444
[ 46.220435] r6:edcd1800
[ 46.221502] r5:60000193
[ 46.224057] r4:00000000
[ 46.227953] [] (\_\_lock\_acquire) from [] (lock\_acquire+0x74/0x94)
[ 46.235710] r10:00000001
[ 46.238169] r9:edf53e70
[ 46.240723] r8:edf53f80
[ 46.241790] r7:00000001
[ 46.244344] r6:00000001
[ 46.245412] r5:60000193
[ 46.247966] r4:00000000
[ 46.251866] [] (lock\_acquire) from [] (\_raw\_spin\_lock\_irqsave+0x40/0x54)
[ 46.260319] r7:ee1c6a00
[ 46.262691] r6:c062a570
[ 46.265247] r5:20000113
[ 46.266314] r4:ee9da014
[ 46.270393] [] (\_raw\_spin\_lock\_irqsave) from [] (ci\_port\_test\_show+0x2c/0x70)
[ 46.279280] r6:eebd2000
[ 46.281652] r5:ee9da010
[ 46.284207] r4:ee9da014
[ 46.286810] [] (ci\_port\_test\_show) from [] (seq\_read+0x1ac/0x4f8)
[ 46.294655] r9:edf53e70
[ 46.297028] r8:edf53f80
[ 46.299583] r7:ee1c6a00
[ 46.300650] r6:00000001
[ 46.303205] r5:00000000
[ 46.304273] r4:eebd2000
[ 46.306850] [] (seq\_read) from [] (full\_proxy\_read+0x54/0x6c)
[ 46.314348] r10:00000000
[ 46.316808] r9:c0a6ad30
[ 46.319363] r8:edf53f80
[ 46.320430] r7:00020000
[ 46.322986] r6:b6de3000
[ 46.324053] r5:ee1c6a00
[ 46.326607] r4:c0248b58
[ 46.330505] [] (full\_proxy\_read) from [] (\_\_vfs\_read+0x34/0x118)
[ 46.338262] r9:edf52000
[ 46.340635] r8:c0107fc4
[ 46.343190] r7:00020000
[ 46.344257] r6:edf53f80
[ 46.346812] r5:c039e810
[ 46.347879] r4:ee1c6a00
[ 46.350447] [] (\_\_vfs\_read) from [] (vfs\_read+0x8c/0x11c)
[ 46.357597] r9:edf52000
[ 46.359969] r8:c0107fc4
[ 46.362524] r7:edf53f80
[ 46.363592] r6:b6de3000
[ 46.366147] r5:ee1c6a00
[ 46.367214] r4:00020000
[ 46.369782] [] (vfs\_read) from [] (SyS\_read+0x4c/0xa8)
[ 46.376672] r8:c0107fc4
[ 46.379045] r7:00020000
[ 46.381600] r6:b6de3000
[ 46.382667] r5:ee1c6a00
[ 46.385222] r4:ee1c6a00
[ 46.387817] [] (SyS\_read) from [] (ret\_fast\_syscall+0x0/0x1c)
[ 46.395314] r7:00000003
[ 46.397687] r6:b6de3000
[ 46.400243] r5:00020000
[ 46.401310] r4:00020000
Fixes: 26c696c678c4 ("USB: Chipidea: rename struct ci13xxx variables from udc to ci")
Signed-off-by: Peter Chen
Signed-off-by: Greg Kroah-Hartman
commit 32fe669c8634484c04975fe5bccfccec7541d5d3
Author: Radim Krčmář
Date: Wed Nov 23 21:25:48 2016 +0100
KVM: x86: check for pic and ioapic presence before use
commit df492896e6dfb44fd1154f5402428d8e52705081 upstream.
Split irqchip allows pic and ioapic routes to be used without them being
created, which results in NULL access. Check for NULL and avoid it.
(The setup is too racy for a nicer solutions.)
Found by syzkaller:
general protection fault: 0000 [#1] SMP DEBUG\_PAGEALLOC KASAN
Dumping ftrace buffer:
(ftrace buffer empty)
Modules linked in:
CPU: 3 PID: 11923 Comm: kworker/3:2 Not tainted 4.9.0-rc5+ #27
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS Bochs 01/01/2011
Workqueue: events irqfd\_inject
task: ffff88006a06c7c0 task.stack: ffff880068638000
RIP: 0010:[...] [...] \_\_lock\_acquire+0xb35/0x3380 kernel/locking/lockdep.c:3221
RSP: 0000:ffff88006863ea20 EFLAGS: 00010006
RAX: dffffc0000000000 RBX: dffffc0000000000 RCX: 0000000000000000
RDX: 0000000000000039 RSI: 0000000000000000 RDI: 1ffff1000d0c7d9e
RBP: ffff88006863ef58 R08: 0000000000000001 R09: 0000000000000000
R10: 00000000000001c8 R11: 0000000000000000 R12: ffff88006a06c7c0
R13: 0000000000000001 R14: ffffffff8baab1a0 R15: 0000000000000001
FS: 0000000000000000(0000) GS:ffff88006d100000(0000) knlGS:0000000000000000
CS: 0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000004abdd0 CR3: 000000003e2f2000 CR4: 00000000000026e0
Stack:
ffffffff894d0098 1ffff1000d0c7d56 ffff88006863ecd0 dffffc0000000000
ffff88006a06c7c0 0000000000000000 ffff88006863ecf8 0000000000000082
0000000000000000 ffffffff815dd7c1 ffffffff00000000 ffffffff00000000
Call Trace:
[...] lock\_acquire+0x2a2/0x790 kernel/locking/lockdep.c:3746
[...] \_\_raw\_spin\_lock include/linux/spinlock\_api\_smp.h:144
[...] \_raw\_spin\_lock+0x38/0x50 kernel/locking/spinlock.c:151
[...] spin\_lock include/linux/spinlock.h:302
[...] kvm\_ioapic\_set\_irq+0x4c/0x100 arch/x86/kvm/ioapic.c:379
[...] kvm\_set\_ioapic\_irq+0x8f/0xc0 arch/x86/kvm/irq\_comm.c:52
[...] kvm\_set\_irq+0x239/0x640 arch/x86/kvm/../../../virt/kvm/irqchip.c:101
[...] irqfd\_inject+0xb4/0x150 arch/x86/kvm/../../../virt/kvm/eventfd.c:60
[...] process\_one\_work+0xb40/0x1ba0 kernel/workqueue.c:2096
[...] worker\_thread+0x214/0x18a0 kernel/workqueue.c:2230
[...] kthread+0x328/0x3e0 kernel/kthread.c:209
[...] ret\_from\_fork+0x2a/0x40 arch/x86/entry/entry\_64.S:433
Reported-by: Dmitry Vyukov
Fixes: 49df6397edfc ("KVM: x86: Split the APIC from the rest of IRQCHIP.")
Signed-off-by: Radim Krčmář
Signed-off-by: Greg Kroah-Hartman
commit c02d13809180bba04cc4ebdf29e3146e808a0eaa
Author: Radim Krčmář
Date: Wed Nov 23 21:15:27 2016 +0100
KVM: x86: fix out-of-bounds accesses of rtc\_eoi map
commit 81cdb259fb6d8c1c4ecfeea389ff5a73c07f5755 upstream.
KVM was using arrays of size KVM\_MAX\_VCPUS with vcpu\_id, but ID can be
bigger that the maximal number of VCPUs, resulting in out-of-bounds
access.
Found by syzkaller:
BUG: KASAN: slab-out-of-bounds in \_\_apic\_accept\_irq+0xb33/0xb50 at addr [...]
Write of size 1 by task a.out/27101
CPU: 1 PID: 27101 Comm: a.out Not tainted 4.9.0-rc5+ #49
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS Bochs 01/01/2011
[...]
Call Trace:
[...] \_\_apic\_accept\_irq+0xb33/0xb50 arch/x86/kvm/lapic.c:905
[...] kvm\_apic\_set\_irq+0x10e/0x180 arch/x86/kvm/lapic.c:495
[...] kvm\_irq\_delivery\_to\_apic+0x732/0xc10 arch/x86/kvm/irq\_comm.c:86
[...] ioapic\_service+0x41d/0x760 arch/x86/kvm/ioapic.c:360
[...] ioapic\_set\_irq+0x275/0x6c0 arch/x86/kvm/ioapic.c:222
[...] kvm\_ioapic\_inject\_all arch/x86/kvm/ioapic.c:235
[...] kvm\_set\_ioapic+0x223/0x310 arch/x86/kvm/ioapic.c:670
[...] kvm\_vm\_ioctl\_set\_irqchip arch/x86/kvm/x86.c:3668
[...] kvm\_arch\_vm\_ioctl+0x1a08/0x23c0 arch/x86/kvm/x86.c:3999
[...] kvm\_vm\_ioctl+0x1fa/0x1a70 arch/x86/kvm/../../../virt/kvm/kvm\_main.c:3099
Reported-by: Dmitry Vyukov
Fixes: af1bae5497b9 ("KVM: x86: bump KVM\_MAX\_VCPU\_ID to 1023")
Reviewed-by: Paolo Bonzini
Reviewed-by: David Hildenbrand
Signed-off-by: Radim Krčmář
Signed-off-by: Greg Kroah-Hartman
commit 39b653013527ce0cdff1fc27db5a1b874538387d
Author: Radim Krčmář
Date: Wed Nov 23 21:15:00 2016 +0100
KVM: x86: drop error recovery in em\_jmp\_far and em\_ret\_far
commit 2117d5398c81554fbf803f5fd1dc55eb78216c0c upstream.
em\_jmp\_far and em\_ret\_far assumed that setting IP can only fail in 64
bit mode, but syzkaller proved otherwise (and SDM agrees).
Code segment was restored upon failure, but it was left uninitialized
outside of long mode, which could lead to a leak of host kernel stack.
We could have fixed that by always saving and restoring the CS, but we
take a simpler approach and just break any guest that manages to fail
as the error recovery is error-prone and modern CPUs don't need emulator
for this.
Found by syzkaller:
WARNING: CPU: 2 PID: 3668 at arch/x86/kvm/emulate.c:2217 em\_ret\_far+0x428/0x480
Kernel panic - not syncing: panic\_on\_warn set ...
CPU: 2 PID: 3668 Comm: syz-executor Not tainted 4.9.0-rc4+ #49
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS Bochs 01/01/2011
[...]
Call Trace:
[...] \_\_dump\_stack lib/dump\_stack.c:15
[...] dump\_stack+0xb3/0x118 lib/dump\_stack.c:51
[...] panic+0x1b7/0x3a3 kernel/panic.c:179
[...] \_\_warn+0x1c4/0x1e0 kernel/panic.c:542
[...] warn\_slowpath\_null+0x2c/0x40 kernel/panic.c:585
[...] em\_ret\_far+0x428/0x480 arch/x86/kvm/emulate.c:2217
[...] em\_ret\_far\_imm+0x17/0x70 arch/x86/kvm/emulate.c:2227
[...] x86\_emulate\_insn+0x87a/0x3730 arch/x86/kvm/emulate.c:5294
[...] x86\_emulate\_instruction+0x520/0x1ba0 arch/x86/kvm/x86.c:5545
[...] emulate\_instruction arch/x86/include/asm/kvm\_host.h:1116
[...] complete\_emulated\_io arch/x86/kvm/x86.c:6870
[...] complete\_emulated\_mmio+0x4e9/0x710 arch/x86/kvm/x86.c:6934
[...] kvm\_arch\_vcpu\_ioctl\_run+0x3b7a/0x5a90 arch/x86/kvm/x86.c:6978
[...] kvm\_vcpu\_ioctl+0x61e/0xdd0 arch/x86/kvm/../../../virt/kvm/kvm\_main.c:2557
[...] vfs\_ioctl fs/ioctl.c:43
[...] do\_vfs\_ioctl+0x18c/0x1040 fs/ioctl.c:679
[...] SYSC\_ioctl fs/ioctl.c:694
[...] SyS\_ioctl+0x8f/0xc0 fs/ioctl.c:685
[...] entry\_SYSCALL\_64\_fastpath+0x1f/0xc2
Reported-by: Dmitry Vyukov
Fixes: d1442d85cc30 ("KVM: x86: Handle errors when RIP is set during far jumps")
Signed-off-by: Radim Krčmář
Signed-off-by: Greg Kroah-Hartman
commit 3c22c81377d406917d989b70a39fa086b39f6716
Author: Radim Krčmář
Date: Tue Nov 22 20:20:14 2016 +0100
KVM: x86: fix out-of-bounds access in lapic
commit 444fdad88f35de9fd1c130b2c4e4550671758fd2 upstream.
Cluster xAPIC delivery incorrectly assumed that dest\_id <= 0xff.
With enabled KVM\_X2APIC\_API\_USE\_32BIT\_IDS in KVM\_CAP\_X2APIC\_API, a
userspace can send an interrupt with dest\_id that results in
out-of-bounds access.
Found by syzkaller:
BUG: KASAN: slab-out-of-bounds in kvm\_irq\_delivery\_to\_apic\_fast+0x11fa/0x1210 at addr ffff88003d9ca750
Read of size 8 by task syz-executor/22923
CPU: 0 PID: 22923 Comm: syz-executor Not tainted 4.9.0-rc4+ #49
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS Bochs 01/01/2011
[...]
Call Trace:
[...] \_\_dump\_stack lib/dump\_stack.c:15
[...] dump\_stack+0xb3/0x118 lib/dump\_stack.c:51
[...] kasan\_object\_err+0x1c/0x70 mm/kasan/report.c:156
[...] print\_address\_description mm/kasan/report.c:194
[...] kasan\_report\_error mm/kasan/report.c:283
[...] kasan\_report+0x231/0x500 mm/kasan/report.c:303
[...] \_\_asan\_report\_load8\_noabort+0x14/0x20 mm/kasan/report.c:329
[...] kvm\_irq\_delivery\_to\_apic\_fast+0x11fa/0x1210 arch/x86/kvm/lapic.c:824
[...] kvm\_irq\_delivery\_to\_apic+0x132/0x9a0 arch/x86/kvm/irq\_comm.c:72
[...] kvm\_set\_msi+0x111/0x160 arch/x86/kvm/irq\_comm.c:157
[...] kvm\_send\_userspace\_msi+0x201/0x280 arch/x86/kvm/../../../virt/kvm/irqchip.c:74
[...] kvm\_vm\_ioctl+0xba5/0x1670 arch/x86/kvm/../../../virt/kvm/kvm\_main.c:3015
[...] vfs\_ioctl fs/ioctl.c:43
[...] do\_vfs\_ioctl+0x18c/0x1040 fs/ioctl.c:679
[...] SYSC\_ioctl fs/ioctl.c:694
[...] SyS\_ioctl+0x8f/0xc0 fs/ioctl.c:685
[...] entry\_SYSCALL\_64\_fastpath+0x1f/0xc2
Reported-by: Dmitry Vyukov
Fixes: e45115b62f9a ("KVM: x86: use physical LAPIC array for logical x2APIC")
Reviewed-by: Paolo Bonzini
Signed-off-by: Radim Krčmář
Signed-off-by: Greg Kroah-Hartman
commit eb060c1a03f7ab09a890559355fe45eb923161a9
Author: Ashok Raj
Date: Fri Oct 21 15:32:05 2016 -0700
iommu/vt-d: Fix IOMMU lookup for SR-IOV Virtual Functions
commit 1c387188c60f53b338c20eee32db055dfe022a9b upstream.
The VT-d specification (§8.3.3) says:
‘Virtual Functions’ of a ‘Physical Function’ are under the scope
of the same remapping unit as the ‘Physical Function’.
The BIOS is not required to list all the possible VFs in the scope
tables, and arguably \*shouldn't\* make any attempt to do so, since there
could be a huge number of them.
This has been broken basically for ever — the VF is never going to match
against a specific unit's scope, so it ends up being assigned to the
INCLUDE\_ALL IOMMU. Which was always actually correct by coincidence, but
now we're looking at Root-Complex integrated devices with SR-IOV support
it's going to start being wrong.
Fix it to simply use pci\_physfn() before doing the lookup for PCI devices.
Signed-off-by: Sainath Grandhi
Signed-off-by: Ashok Raj
Signed-off-by: David Woodhouse
Signed-off-by: Greg Kroah-Hartman
commit 8b23f16343f6e1b7ffc3d4f2cd2239bcb97bfbb3
Author: David Woodhouse
Date: Mon Sep 12 10:49:11 2016 +0800
iommu/vt-d: Fix PASID table allocation
commit 910170442944e1f8674fd5ddbeeb8ccd1877ea98 upstream.
Somehow I ended up with an off-by-three error in calculating the size of
the PASID and PASID State tables, which triggers allocations failures as
those tables unfortunately have to be physically contiguous.
In fact, even the \*correct\* maximum size of 8MiB is problematic and is
wont to lead to allocation failures. Since I have extracted a promise
that this \*will\* be fixed in hardware, I'm happy to limit it on the
current hardware to a maximum of 0x20000 PASIDs, which gives us 1MiB
tables — still not ideal, but better than before.
Reported by Mika Kuoppala  and also by
Xunlei Pang  who submitted a simpler patch to fix
only the allocation (and not the free) to the "correct" limit... which
was still problematic.
Signed-off-by: David Woodhouse
Signed-off-by: Greg Kroah-Hartman


=== Content from www.openwall.com_cda55916_20250124_181402.html ===


| [Openwall](/) * [Products](/)   + [Openwall GNU/\*/Linux   *server OS*](/Owl/)+ [Linux Kernel Runtime Guard](/lkrg/)+ [John the Ripper   *password cracker*](/john/)         - [Free & Open Source for any platform](/john/)- [in the cloud](/john/cloud/)- [Pro for Linux](/john/pro/linux/)- [Pro for macOS](/john/pro/macosx/)+ [Wordlists   *for password cracking*](/wordlists/)+ [passwdqc   *policy enforcement*](/passwdqc/)             - [Free & Open Source for Unix](/passwdqc/)- [Pro for Windows (Active Directory)](/passwdqc/windows/)+ [yescrypt   *KDF & password hashing*](/yescrypt/)+ [yespower   *Proof-of-Work (PoW)*](/yespower/)+ [crypt\_blowfish   *password hashing*](/crypt/)+ [phpass   *ditto in PHP*](/phpass/)+ [tcb   *better password shadowing*](/tcb/)+ [Pluggable Authentication Modules](/pam/)+ [scanlogd   *port scan detector*](/scanlogd/)+ [popa3d   *tiny POP3 daemon*](/popa3d/)+ [blists   *web interface to mailing lists*](/blists/)+ [msulogin   *single user mode login*](/msulogin/)+ [php\_mt\_seed   *mt\_rand() cracker*](/php_mt_seed/)* [Services](/services/)* Publications       + [Articles](/articles/)+ [Presentations](/presentations/)* Resources         + [Mailing lists](/lists/)+ [Community wiki](https://openwall.info/wiki/)+ [Source code repositories (GitHub)](https://github.com/openwall)+ [Source code repositories (CVSweb)](https://cvsweb.openwall.com)+ [File archive & mirrors](/mirrors/)+ [How to verify digital signatures](/signatures/)+ [OVE IDs](/ove/)* [What's new](/news) | |
| --- | --- |

| | [Hash Suite - Windows password security audit tool. GUI, reports in PDF.](https://hashsuite.openwall.net) | | --- | |
| --- | --- |

[[<prev]](1) [[next>]](3) [[thread-next>]](7) [[day]](.) [[month]](..) [[year]](../..) [[list]](../../..)
```

Message-ID: <alpine.LFD.2.20.1612021209120.5066@wniryva>
Date: Fri, 2 Dec 2016 12:13:14 +0530 (IST)
From: P J P <ppandit@...hat.com>
To: oss security list <oss-security@...ts.openwall.com>
Subject: CVE request: Kernel: kvm: out of bounds memory access via vcpu_id

   Hello,

Linux kernel built with the Kernel-based Virtual Machine(CONFIG_KVM) support
is vulnerable to an out-of-bounds memory access issue. It could occur on x86
platform, while servicing I/O APIC requests with larger vcpu_id.

A guest user/process could use this flaw to crash the host kernel resulting in
DoS or it could potentially be used to escalate privileges on a host.

Upstream patch:
---------------
   -> <https://git.kernel.org/linus/81cdb259fb6d8c1c4ecfeea389ff5a73c07f5755>

Reference:
----------
   -> <https://bugzilla.redhat.com/show_bug.cgi?id=1400804>

Thank you.
--
Prasad J Pandit / Red Hat Product Security Team
47AF CE69 3A90 54AA 9045 1053 DD13 3D32 FE5B 041F

```

[Powered by blists](https://www.openwall.com/blists/) - [more mailing lists](https://lists.openwall.net)

Please check out the
[Open Source Software Security Wiki](https://oss-security.openwall.org/wiki/), which is counterpart to this
[mailing list](https://oss-security.openwall.org/wiki/mailing-lists/oss-security).

Confused about [mailing lists](/lists/) and their use?
[Read about mailing lists on Wikipedia](https://en.wikipedia.org/wiki/Electronic_mailing_list)
and check out these
[guidelines on proper formatting of your messages](https://www.complang.tuwien.ac.at/anton/mail-news-errors.html).



=== Content from access.redhat.com_b572ae99_20250126_024503.html ===


[Skip to navigation](#pfe-navigation)
[Skip to main content](#cp-main)
### Utilities

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)

[![Red Hat Customer Portal](https://access.redhat.com/chrome_themes/nimbus/img/red-hat-customer-portal.svg)](https://access.redhat.com/)

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)
* [Products](https://access.redhat.com/)
  ### Top Products

  + [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
  + [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
  + [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
  [All Products](https://access.redhat.com/products/)

  ### Downloads and Containers

  + [Downloads](https://access.redhat.com/downloads/)
  + [Packages](https://access.redhat.com/downloads/content/package-browser)
  + [Containers](https://catalog.redhat.com/software/containers/explore/)
  ### Top Resources

  + [Documentation](//docs.redhat.com/)
  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Product Compliance](https://access.redhat.com/articles/1202803)
  + [Errata](https://access.redhat.com/errata/)
* [Knowledge](https://access.redhat.com/labs/)
  ### Red Hat Knowledge Center

  + [Knowledgebase Solutions](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Solution)
  + [Knowledgebase Articles](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Article)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Errata](https://access.redhat.com/errata/)
  ### Top Product Docs

  + [Red Hat Enterprise Linux](//docs.redhat.com/en/documentation/red_hat_enterprise_linux/)
  + [Red Hat OpenShift](//docs.redhat.com/en/documentation/openshift_container_platform/)
  + [Red Hat Ansible Automation Platform](//docs.redhat.com/en/documentation/red_hat_ansible_automation_platform/)
  [All Product Docs](//docs.redhat.com/en/products)

  ### [Training and Certification](//www.redhat.com/en/services/training-and-certification)

  + [About](//www.redhat.com/en/services/training-and-certification)
  + [Course Index](//www.redhat.com/en/services/training/all-courses-exams)
  + [Certification Index](//www.redhat.com/en/services/certifications)
  + [Skill Assessment](//skills.ole.redhat.com/)
* [Security](https://access.redhat.com/security/)
  ### [Red Hat Product Security Center](https://access.redhat.com/security)

  + [Security Updates](https://access.redhat.com/security)
  + [Security Advisories](https://access.redhat.com/security/security-updates/#/security-advisories)
  + [Red Hat CVE Database](https://access.redhat.com/security/security-updates/#/cve)
  + [Errata](https://access.redhat.com/errata/)
  ### References

  + [Security Bulletins](https://access.redhat.com/security/vulnerabilities)
  + [Security Measurement](https://www.redhat.com/security/data/metrics/)
  + [Severity Ratings](https://access.redhat.com/security/updates/classification/)
  + [Security Data](https://access.redhat.com/security/data)
  ### Top Resources

  + [Security Labs](https://access.redhat.com/security/security-updates/#/security-labs)
  + [Backporting Policies](https://access.redhat.com/security/updates/backporting/)
  + [Security Blog](//redhat.com/en/blog/channel/security)
* [Support](https://access.redhat.com/support/)
  ### [Red Hat Support](https://access.redhat.com/support/)

  + [Support Cases](https://access.redhat.com/support/cases/)
  + [Troubleshoot](https://access.redhat.com/support/cases/#/troubleshoot)
  + [Get Support](https://access.redhat.com/support/)
  + [Contact Red Hat Support](https://access.redhat.com/support/contact/)
  ### [Red Hat Community Support](https://access.redhat.com/community)

  + [Customer Portal Community](https://access.redhat.com/community/)
  + [Community Discussions](https://access.redhat.com/discussions/)
  + [Red Hat Accelerator Program](https://access.redhat.com/accelerators/)
  ### Top Resources

  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Red Hat JBoss Supported Configurations](https://access.redhat.com/support/configurations/jboss)
  + [Red Hat Insights](https://cloud.redhat.com/insights)

Or [troubleshoot an issue](/support/cases/#/troubleshoot).

English

## Select Your Language

* [English](https://access.redhat.com/changeLanguage?language=en)
* [Français](https://access.redhat.com/changeLanguage?language=fr)
* [한국어](https://access.redhat.com/changeLanguage?language=ko)
* [日本語](https://access.redhat.com/changeLanguage?language=ja)
* [中文 (中国)](https://access.redhat.com/changeLanguage?language=zh_CN)

### Infrastructure and Management

* [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
* [Red Hat Satellite](https://access.redhat.com/products/red-hat-satellite/)
* [Red Hat Subscription Management](https://access.redhat.com/products/red-hat-subscription-management/)
* [Red Hat Insights](https://access.redhat.com/products/red-hat-insights/)
* [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
### Cloud Computing

* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
* [Red Hat OpenStack Platform](https://access.redhat.com/products/red-hat-openstack-platform/)
* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform/)
* [Red Hat OpenShift AI](https://access.redhat.com/products/red-hat-openshift-ai/)
* [Red Hat OpenShift Dedicated](https://access.redhat.com/products/openshift-dedicated-red-hat/)
* [Red Hat Advanced Cluster Security for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-security-for-kubernetes/)
* [Red Hat Advanced Cluster Management for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-management-for-kubernetes/)
* [Red Hat Quay](https://access.redhat.com/products/red-hat-quay/)
* [Red Hat OpenShift Dev Spaces](https://access.redhat.com/products/red-hat-openshift-dev-spaces)
* [Red Hat OpenShift Service on AWS](https://access.redhat.com/products/red-hat-openshift-service-aws)
### Storage

* [Red Hat Gluster Storage](https://access.redhat.com/products/red-hat-storage/)
* [Red Hat Hyperconverged Infrastructure](https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/)
* [Red Hat Ceph Storage](https://access.redhat.com/products/red-hat-ceph-storage/)
* [Red Hat OpenShift Data Foundation](https://access.redhat.com/products/red-hat-openshift-data-foundation)
### Runtimes

* [Red Hat Runtimes](https://access.redhat.com/products/red-hat-runtimes/)
* [Red Hat JBoss Enterprise Application Platform](https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/)
* [Red Hat Data Grid](https://access.redhat.com/products/red-hat-data-grid/)
* [Red Hat JBoss Web Server](https://access.redhat.com/products/red-hat-jboss-web-server/)
* [Red Hat build of Keycloak](https://access.redhat.com/products/red-hat-build-of-keycloak/)
* [Red Hat support for Spring Boot](https://access.redhat.com/products/spring-boot/)
* [Red Hat build of Node.js](https://access.redhat.com/products/nodejs/)
* [Red Hat build of Quarkus](https://access.redhat.com/products/quarkus/)
### Integration and Automation

* [Red Hat Application Foundations](https://access.redhat.com/products/red-hat-application-foundations/)
* [Red Hat Fuse](https://access.redhat.com/products/red-hat-fuse/)
* [Red Hat AMQ](https://access.redhat.com/products/red-hat-amq/)
* [Red Hat 3scale API Management](https://access.redhat.com/products/red-hat-3scale/)

[All Products](https://access.redhat.com/products/)

**We're sorry but cve-details doesn't work properly without JavaScript enabled. Please enable it to continue.**

[![Red Hat](https://static.redhat.com/libs/redhat/brand-assets/2/corp/logo--on-dark.svg)](https://redhat.com/en)
[X (formerly Twitter)](https://twitter.com/RedHat)
### Quick Links

* [Downloads](https://access.redhat.com/downloads/)
* [Subscriptions](https://access.redhat.com/management)
* [Support Cases](https://access.redhat.com/support)
* [Customer Service](https://access.redhat.com/support/customer-service)
* [Product Documentation](//docs.redhat.com/)

### Help

* [Contact Us](https://access.redhat.com/support/contact/)
* [Customer Portal FAQ](https://access.redhat.com/articles/33844)
* [Log-in Assistance](https://access.redhat.com/help/login_assistance)

### Site Info

* [Trust Red Hat](https://www.redhat.com/en/trust)
* [Browser Support Policy](https://www.redhat.com/en/about/browser-support)
* [Accessibility](https://www.redhat.com/en/about/digital-accessibility)
* [Awards and Recognition](https://access.redhat.com/recognition/)
* [Colophon](https://access.redhat.com/help/colophon/)

### Related Sites

* [redhat.com](https://www.redhat.com/)
* [developers.redhat.com](http://developers.redhat.com/)
* [connect.redhat.com](https://connect.redhat.com/)
* [cloud.redhat.com](https://cloud.redhat.com/)

### Red Hat legal and privacy links

* [About Red Hat](https://redhat.com/en/about/company)
* [Jobs](https://redhat.com/en/jobs)
* [Events](https://redhat.com/en/events)
* [Locations](https://redhat.com/en/about/office-locations)
* [Contact Red Hat](https://redhat.com/en/contact)
* [Red Hat Blog](https://redhat.com/en/blog)
* [Diversity, equity, and inclusion](https://redhat.com/en/about/our-culture/diversity-equity-inclusion)
* [Cool Stuff Store](https://coolstuff.redhat.com/)
* [Red Hat Summit](https://www.redhat.com/en/summit)

 © 2025 Red Hat, Inc.
### Red Hat legal and privacy links

* [Privacy statement](https://redhat.com/en/about/privacy-policy)
* [Terms of use](https://redhat.com/en/about/terms-use)
* [All policies and guidelines](https://redhat.com/en/about/all-policies-guidelines)
* [Digital accessibility](https://redhat.com/en/about/digital-accessibility)


