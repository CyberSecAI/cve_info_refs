=== Content from bugs.gentoo.org_1c49ca30_20250126_040357.html ===

[![Gentoo Websites Logo](extensions/Gentoo/web/gentoo_org.png)](/ "Go to the Gentoo Bugzilla homepage")
Go to:
[Gentoo Home](https://www.gentoo.org/)
[Documentation](https://www.gentoo.org/support/documentation/)
[Forums](https://forums.gentoo.org/)
[Lists](https://www.gentoo.org/get-involved/mailing-lists/)
[Bugs](/)
[Planet](https://planet.gentoo.org/)
[Store](https://www.gentoo.org/inside-gentoo/stores/)
[Wiki](https://wiki.gentoo.org/)
**[Get Gentoo!](https://www.gentoo.org/downloads/)**

Gentoo's Bugzilla – Bug 6464
Error resistancy: Do not remove files if not nessesary
Last modified: 2011-10-30 22:37:41 UTC node [vulture]

* [Home](./)
* | [New](enter_bug.cgi?format=guided)–[[Ex]](enter_bug.cgi)
* | [Browse](describecomponents.cgi)
* | [Search](query.cgi)
* | [Privacy Policy](https://wiki.gentoo.org/wiki/Foundation%3APrivacy_Policy)
* |

  [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")
* | [Reports](report.cgi)
* |
  [Requests](request.cgi)
* |
  [Help](https://bugzilla.readthedocs.org/en/5.0/using/understanding.html)
* |
  [New Account](createaccount.cgi)
* |
  [Log In](show_bug.cgi?id=6464&GoAheadAndLogIn=1)

  [x]
* |
  [Forgot Password](show_bug.cgi?id=6464&GoAheadAndLogIn=1#forgot)
  Login:

  [x]

[**Bug 6464**](show_bug.cgi?id=6464)
- Error resistancy: Do not remove files if not nessesary

[Summary:](page.cgi?id=fields.html#short_desc "The bug summary is a short sentence which succinctly describes what the bug is about.")
Error resistancy: Do not remove files if not nessesary

| | [Status](page.cgi?id=fields.html#bug_status): | RESOLVED INVALID | | --- | --- | |  | | | [Alias:](page.cgi?id=fields.html#alias "A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla.") | None | |  | | | [Product:](describecomponents.cgi "Bugs are categorised into Products and Components.") | Portage Development | | [Classification:](page.cgi?id=fields.html#classification "Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation.") | Unclassified | | [Component:](describecomponents.cgi?product=Portage Development "Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list.") | Core ([show other bugs](buglist.cgi?component=Core&product=Portage%20Development&bug_status=__open__)) | | [Hardware:](page.cgi?id=fields.html#rep_platform "The hardware platform the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | All Linux | |  | | | [Importance](page.cgi?id=fields.html#importance): | High normal | | [Assignee:](page.cgi?id=fields.html#assigned_to "The person in charge of resolving the bug.") | Daniel Robbins (RETIRED) | |  | | | [URL:](page.cgi?id=fields.html#bug_file_loc "Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen.") |  | | [Whiteboard:](page.cgi?id=fields.html#status_whiteboard "Each bug has a free-form single line text entry box for adding tags and status information.") |  | | [Keywords:](describekeywords.cgi "You can add keywords from a defined list to bugs, in order to easily identify and group them.") |  | |  | | | [Depends on:](page.cgi?id=fields.html#dependson "The bugs listed here must be resolved before this bug can be resolved.") |  | | [Blocks:](page.cgi?id=fields.html#blocked "This bug must be resolved before the bugs listed in this field can be resolved.") |  | |  | | Reported: | 2002-08-14 11:08 UTC by Ole Tange | | --- | --- | | Modified: | 2011-10-30 22:37 UTC ([History](show_activity.cgi?id=6464)) | | CC List: | 0 users | |  | | | [See Also:](page.cgi?id=fields.html#see_also "This allows you to refer to bugs in other installations. You can enter a URL to a bug in the 'Add Bug URLs' field to note that that bug is related to this one. You can enter multiple URLs at once by separating them with whitespace. You should normally use this field to refer to bugs in other installations. For bugs in this installation, it is better to use the Depends on and Blocks fields.") |  | | [Package list:](page.cgi?id=fields.html#cf_stabilisation_atoms "Contains a list of packages (and optionally, architectures) to keyword or stabilize. One fully qualified package per line, optionally followed by a space-delimited list of architectures for that package.") |  | | [Runtime testing required:](page.cgi?id=fields.html#cf_runtime_testing_required "Indicate what level of testing is required. For manual testing following instructions in the bug, choose \"Manual\". For only compile-testing, choose \"No\". For where tests must pass, choose \"Yes\".") | --- | |  | | |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| --- | | |

| | Attachments | | | --- | --- | | [Add an attachment](attachment.cgi?bugid=6464&action=enter) (proposed patch, testcase, etc.) | |   | Note You need to [log in](show_bug.cgi?id=6464&GoAheadAndLogIn=1) before you can comment on or make changes to this bug. | | --- | |  |
| --- | --- | --- | --- | --- | --- | --- |

| [Description](#c0)  Ole Tange    2002-08-14 11:08:51 UTC  ``` I have just tried installing less. During the install I pressed CTRL-C and now  less is not working.    This made me think: Why do we remove files that we know will be overwritten  later?    The current scheme seems to be: Remove all old-version files. Install all  new-version files. If anything crashes between removing the first old-version  file and installing the new version of this file, then the installation is  broken.    I would assume that it would be possible to do this instead: Keep track of all  old-version files. If installing new-version overwrites an old-version: Mark it  as removed. When all new-version files have been copied: Remove remaining  old-version files.    It would mean be bit more complexity but would save an installation if  something is broken (I recently had emerge remove python - not good. It took  some time before I had things running again). ``` |  |
| --- | --- |

---

* [Format For Printing](show_bug.cgi?format=multiple&id=6464)
* - [XML](show_bug.cgi?ctype=xml&id=6464)
* - [Clone This Bug](enter_bug.cgi?cloned_bug_id=6464)
* - [Clone In The Same
  Product](enter_bug.cgi?cloned_bug_id=6464&product=Portage%20Development)
* - Top of page

* + [Home](./)
  + | [New](enter_bug.cgi?format=guided)–[[Ex]](enter_bug.cgi)
  + | [Browse](describecomponents.cgi)
  + | [Search](query.cgi)
  + | [Privacy Policy](https://wiki.gentoo.org/wiki/Foundation%3APrivacy_Policy)
  + |

    [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")
  + | [Reports](report.cgi)
  + |
    [Requests](request.cgi)
  + |
    [Help](https://bugzilla.readthedocs.org/en/5.0/using/understanding.html)
  + |
    [New Account](createaccount.cgi)
  + |
    [Log In](show_bug.cgi?id=6464&GoAheadAndLogIn=1)

    [x]
  + |
    [Forgot Password](show_bug.cgi?id=6464&GoAheadAndLogIn=1#forgot)
    Login:

    [x]



=== Content from marc.info_dea1d581_20250124_222346.html ===

```
[[prev in list](?l=bugtraq&m=109571780911271&w=2)] [[next in list](?l=bugtraq&m=109572056326199&w=2)] [[prev in thread](?l=getmail&m=109560438320643&w=2)] [next in thread]
List:       [bugtraq](?l=bugtraq&r=1&w=2)
Subject:    [Local root compromise possible with getmail](?t=109560440600002&r=1&w=2)
From:       [David Watson <baikie () ehwhat ! freeserve ! co ! uk>](?a=109560443900002&r=1&w=2)
Date:       [2004-09-19 14:32:38](?l=bugtraq&r=1&w=2&b=200409)
Message-ID: [200409191532.38997.baikie () ehwhat ! freeserve ! co ! uk](?i=200409191532.38997.baikie%20()%20ehwhat%20!%20freeserve%20!%20co%20!%20uk)
[Download RAW [message](?l=bugtraq&m=109571883130372&q=mbox) or [body](?l=bugtraq&m=109571883130372&q=raw)]

The following vulnerabilities apply to all releases of getmail prior to 3.2.5,
and all version 4 releases prior to 4.2.0. They do not apply where getmail is
run as an unprivileged user, or where an unprivileged external MDA is used
for the final delivery of mail. They are not exploitable remotely.

Although it is not the recommended mode of operation, by being run as root,
getmail is able give users ownership of the files containing their new mail.
However, the built-in mail delivery code was not suitable for use as root in
the presence of hostile local users. It had the following vulnerabilities:

Mbox delivery (version 4 releases prior to 4.2.0):

Attacker replacing an mbox file with a symbolic link can have mail delivered
(as root) into a new mbox file with a name and path of their choosing.
Successful exploitation of a race condition allows existing files to be
overwritten. The files are given 600 permissions and the same owner/group
as the directory containing the mbox delivery point.

Maildir delivery (version 4 releases prior to 4.2.0, all releases prior to
3.2.5):

Attacker replacing subdirectories of a maildir with suitable symbolic links
can have mail delivered into an arbitrary directory. Filenames cannot be
chosen by the attacker, but successful exploitation of a race condition can
allow arbitrary file contents to be substituted for mail. The files are given
600 permissions and the same owner/group as the maildir.

Both sets of vulnerabilities may be exploited to have arbitrary commands
executed as root.

Workaround:

Do not run getmail as a privileged user; or, in version 4, use an external MDA
with explicitly configured user and group privileges.

Fix:

Versions 3.2.5 and 4.2.0 are now available at:

<http://www.qcc.ca/~charlesc/software/getmail-4/>

Version 3.2.5 just enforces the workaround. Version 4.2.0 solves the problem
by dropping privileges to those of an explicitly configured user before
delivering mail, as was already done for delivery by external MDAs.

Note: version 4 releases require Python 2.3.3 or later. Python 2.3.x can be
installed alongside an earlier version if required; see the README file in
the latest source tarball, available at <http://www.python.org>. Once
installed, getmail will use whichever version was initially used to run its
setup script.
[[prev in list](?l=bugtraq&m=109571780911271&w=2)] [[next in list](?l=bugtraq&m=109572056326199&w=2)] [[prev in thread](?l=getmail&m=109560438320643&w=2)] [next in thread]

```

[Configure](?q=configure) |
[About](?q=about) |
[News](?q=news) |
Add a list |
Sponsored by [KoreLogic](http://www.korelogic.com/)



=== Content from www.debian.org_7c0f34e5_20250124_222348.html ===


---

[[Date Prev](msg00154.html)][[Date Next](msg00158.html)]
[[Thread Prev](msg00154.html)][[Thread Next](msg00158.html)]
[[Date Index](maillist.html#00157)]
[[Thread Index](threads.html#00157)]

# [SECURITY] [DSA 553-1] New getmail packages fix root compromise

---

* *To*: debian-security-announce@lists.debian.org (Debian Security Announcements)
* *Subject*: [SECURITY] [DSA 553-1] New getmail packages fix root compromise
* *From*: joey@infodrom.org (Martin Schulze)
* *Date*: Mon, 27 Sep 2004 12:34:05 +0200 (CEST)
* *Message-id*: <[[🔎]](/msgid-search/m1CBspZ-000ptyC%40finlandia.Infodrom.North.DE) [m1CBspZ-000ptyC@finlandia.Infodrom.North.DE](msg00157.html)>
* *Reply-to*: debian-security@lists.debian.org

---

```
-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

- --------------------------------------------------------------------------
Debian Security Advisory DSA 553-1                     security@debian.org
<http://www.debian.org/security/>                             Martin Schulze
September 27th, 2004                    <http://www.debian.org/security/faq>
- --------------------------------------------------------------------------

Package        : getmail
Vulnerability  : symlink vulnerability
Problem-Type   : local
Debian-specific: no
CVE ID         : CAN-2004-0880 CAN-2004-0881
Debian Bug     : 272561

A security problem has been discovered in getmail, a POP3 and APOP
mail gatherer and forwarder.  An attacker with a shell account on the
victims host could utilise getmail to overwrite arbitrary files when
it is running as root.

For the stable distribution (woody) this problem has been fixed in
version 2.3.7-2.

For the unstable distribution (sid) this problem has been fixed in
version 3.2.5-1.

We recommend that you upgrade your getmail package.

Upgrade Instructions
- --------------------

wget url
        will fetch the file for you
dpkg -i file.deb
        will install the referenced file.

If you are using the apt-get package manager, use the line for
sources.list as given below:

apt-get update
        will update the internal database
apt-get upgrade
        will install corrected packages

You may use an automated update by adding the resources from the
footer to the proper configuration.

Debian GNU/Linux 3.0 alias woody
- --------------------------------

  Source archives:

    <http://security.debian.org/pool/updates/main/g/getmail/getmail_2.3.7-2.dsc>
      Size/MD5 checksum:      583 6263f8d2d75ec3eb21dd302e0b9d6729
    <http://security.debian.org/pool/updates/main/g/getmail/getmail_2.3.7-2.diff.gz>
      Size/MD5 checksum:     2645 ff40d8f72744bfec8a963ece950e0bcd
    <http://security.debian.org/pool/updates/main/g/getmail/getmail_2.3.7.orig.tar.gz>
      Size/MD5 checksum:    70944 4eef6be77a4cbe1a86eef75affd31b05

  Architecture independent components:

    <http://security.debian.org/pool/updates/main/g/getmail/getmail_2.3.7-2_all.deb>
      Size/MD5 checksum:    74388 f2b9e79b1ddd8ef8bf719d4e1894f051

  These files will probably be moved into the stable distribution on
  its next update.

- ---------------------------------------------------------------------------------
For apt-get: deb <http://security.debian.org/> stable/updates main
For dpkg-ftp: ftp://security.debian.org/debian-security dists/stable/updates/main
Mailing list: debian-security-announce@lists.debian.org
Package info: `apt-cache show <pkg>' and <http://packages.debian.org/><pkg>

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.2.5 (GNU/Linux)

iD8DBQFBV+ydW5ql+IAeqTIRAjKVAJ4jTCBi6jY/HaghCNdQUVfyy2giOQCbB688
7yr1RQ2U25tXqQDxJZqHyPE=
=3lYo
-----END PGP SIGNATURE-----

```

---



=== Content from security.gentoo.org_1b713636_20250124_222347.html ===

[![Gentoo](https://assets.gentoo.org/tyrian/v2/site-logo.png)](/ "Back to the homepage")
Security

[**Get Gentoo!**](https://get.gentoo.org/)
gentoo.org sites
[gentoo.org](https://www.gentoo.org/ "Main Gentoo website")
[Wiki](https://wiki.gentoo.org/ "Find and contribute documentation")
[Bugs](https://bugs.gentoo.org/ "Report issues and find common issues")
[Forums](https://forums.gentoo.org/ "Discuss with the community")
[Packages](https://packages.gentoo.org/ "Find software for your Gentoo")

[Planet](https://planet.gentoo.org/ "Find out what's going on in the developer community")
[Archives](https://archives.gentoo.org/ "Read up on past discussions")
[Sources](https://sources.gentoo.org/ "Browse our source code")

[Infra Status](https://infra-status.gentoo.org/ "Get updates on the services provided by Gentoo")

* [Home](/)
* [Stay informed](/subscribe)
* [Advisories](/glsa)

# getmail: Filesystem overwrite vulnerability — GLSA **200409-32**

getmail contains a vulnerability that could potentially allow any local
user to create or overwrite files in any directory on the system. This flaw
can be escalated further and possibly lead to a complete system compromise.

### Affected packages

| Package | **net-mail/getmail** on all architectures |
| --- | --- |
| Affected versions | < **4.2.0** |
| Unaffected versions | >= **4.2.0** |

### Background

getmail is a reliable fetchmail replacement that supports Maildir,
Mboxrd and external MDA delivery.

### Description

David Watson discovered a vulnerability in getmail when it is
configured to run as root and deliver mail to the maildirs/mbox files
of untrusted local users. A malicious local user can then exploit a
race condition, or a similar symlink attack, and potentially cause
getmail to create or overwrite files in any directory on the system.

### Impact

An untrusted local user could potentially create or overwrite files in
any directory on the system. This vulnerability may also be exploited
to have arbitrary commands executed as root.

### Workaround

Do not run getmail as a privileged user; or, in version 4, use an
external MDA with explicitly configured user and group privileges.

### Resolution

All getmail users should upgrade to the latest version:

```
 # emerge sync

 # emerge -pv ">=net-mail/getmail-4.2.0"
 # emerge ">=net-mail/getmail-4.2.0"
```
### References

* [getmail ChangeLog](http://www.qcc.ca/~charlesc/software/getmail-4/CHANGELOG)
* [getmail Mailing List](https://article.gmane.org/gmane.mail.getmail.user/1430)
* [CVE-2004-0880](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2004-0880)
* [CVE-2004-0881](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2004-0881)

**Release date**

September 23, 2004

**Latest revision**

May 22, 2006: 02

**Severity**

high

**Exploitable**

local

**Bugzilla entries**

* [64643](https://bugs.gentoo.org/show_bug.cgi?id=64643)

### Questions or comments?

Please feel free to contact us.

**© 2001–2020 Gentoo Foundation, Inc.**


