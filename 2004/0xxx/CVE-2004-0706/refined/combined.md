=== Content from bugzilla.mozilla.org_21a7c80b_20250125_110945.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summary▾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View ▾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/235510)
* [XML](/show_bug.cgi?ctype=xml&id=235510)

Closed
[Bug 235510](/show_bug.cgi?id=235510)

Opened 21 years ago
Closed 21 years ago

# Password exposed in URL to chart image if login required to access a chart

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

Password exposed in URL to chart image if login required to access a chart

## Categories

### (Bugzilla :: Reporting/Charting, defect)

[Product:](/describecomponents.cgi?product=Bugzilla)

Bugzilla
▾

Bugzilla
The [Bugzilla](http://www.bugzilla.org) bug-tracking system.

**Note:** This is **not** the place to request configuration, permission, or account changes to this installation of Bugzilla (bugzilla.mozilla.org). File such changes under the appropriate component in the [**bugzilla.mozilla.org**](enter_bug.cgi?product=bugzilla.mozilla.org) product.
[See Open Bugs in This Product](/buglist.cgi?product=Bugzilla&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Bugzilla)
Watch This Product

[Component:](/describecomponents.cgi?product=Bugzilla&component=Reporting%2FCharting#Reporting%2FCharting)

Reporting/Charting
▾

Bugzilla :: Reporting/Charting
Getting reports from Bugzilla. `reports.cgi, duplicates.cgi`
[See Open Bugs in This Component](/buglist.cgi?product=Bugzilla&component=Reporting%2FCharting&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Bugzilla&component=Reporting%2FCharting&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Bugzilla&component=Reporting%2FCharting)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

2.17.6

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

All

All

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

*Not set*

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

normal

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

Bugzilla 2.18

## People

### (Reporter: justdave, Assigned: gerv)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/559c3cf31c98a95b23421186b78df500?d=mm&size=40)  [gerv](/user_profile?user_id=9911)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

![](https://secure.gravatar.com/avatar/9df24a05a7e63cf07e49d30ddfeee31a?d=mm&size=40)  [default-qa](/user_profile?user_id=5086)

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](https://secure.gravatar.com/avatar/e9b8879974f9b8c15f35712b58182a86?d=mm&size=40)  [justdave](/user_profile?user_id=10297)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

---

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

2 people

## References

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

---

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

---

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

---

## Details

### (Whiteboard: [does not affect 2.16.x] [fixed in 2.18rc1])

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

---

[Keywords:](/describekeywords.cgi)

---

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[does not affect 2.16.x] [fixed in 2.18rc1]

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

| [justdave](/user_profile?user_id=10297) | [approval](#c17 "21 years ago") | + |
| --- | --- | --- |
| [justdave](/user_profile?user_id=10297) | approval | + |
| --- | --- | --- |
| [justdave](/user_profile?user_id=10297) | [blocking2.18](#a1910971_10297 "21 years ago") | + |
| --- | --- | --- |
| [justdave](/user_profile?user_id=10297) | blocking2.18 | + |
| --- | --- | --- |
|  | approval5.0 | ? |
| --- | --- | --- |
|  | approval5.2 | ? |
|  | approval6.0 | ? |
|  | blocking5.0.4.1 | ? |
|  | blocking5.2 | ? |
|  | blocking6.0 | ? |
|  | approval4.4 | ? |
|  | blocking4.4.14 | ? |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | documentation | ? + - |
|  | testcase |  | | |
|  | relnote |  |

## Crash Data

Signature:

*None*

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (1 file)

| [Patch v.1](/attachment.cgi?id=142418)  [21 years ago](#c8)  [Gervase Markham [:gerv]](/user_profile?user_id=9911)   702 bytes, patch | kiko : [review+](#c13 "21 years ago") | [Details](/attachment.cgi?id=142418&action=edit) | [Diff](/attachment.cgi?id=142418&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=235510&attachment=142418) |
| --- | --- | --- |

Bottom ↓
Tags ▾

* Reset

Timeline ▾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [Dave Miller [:justdave]](/user_profile?user_id=10297)  Reporter |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=235510#c0)• 21 years ago |
|  | |

Steps to reproduce:
1) View a new series-based chart.
2) Bookmark the results page.
3) Log out of Bugzilla.
4) Access the bookmark. You'll be prompted to log in.
5) Log in.
6) View source on the resulting chart page.
Actual results:
The login ID and password are included in the query string of the URL to the
image (thus also showing up in web server logs).
Expected results:
The login ID and password should not be included.

|  | [Gervase Markham [:gerv]](/user_profile?user_id=9911)  Assignee |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=235510#c1)• 21 years ago |
|  | |

Hmm. If we don't do that, will charting still work for people with cookies
turned off?
Gerv

|  | [Bradley Baetz (:bbaetz)](/user_profile?user_id=29274) |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=235510#c2)• 21 years ago |
|  | |

Storing the username/pw in the URL is bad.
Remind me why we can't just require cookies for this? 'privacy' is not an answer
unless you can explain exactly what bugzilla's cookies do to have privacy
concerns. Its not like cookies lack browser support.....
The cookie IP restrictions is more of an issue, though, for this.
We could do HTTP basic auth, I guess, but thats a lot less secure.

|  | [Gervase Markham [:gerv]](/user_profile?user_id=9911)  Assignee |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=235510#c3)• 21 years ago |
|  | |

> Remind me why we can't just require cookies for this?
Because currently Bugzilla policy is that everything works (albeit less
conveniently) without cookies. If we think that in this age of decent browser
cookie control we want to relax that, then that's fine - but we need to do so
explicitly with discussion, rather than as the easy solution to a technical problem.
Gerv

|  | [Dave Miller [:justdave]](/user_profile?user_id=10297)  Reporter |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=235510#c4)• 21 years ago |
|  | |

It would be better to issue a one-time use token and use that in the URL than
the expose the user's password. We would only need to do this if
Bugzilla\_password is present in the query string, as otherwise we can assume
they had a cookie already when they came in.
Note that uploading an attachment is currently impossible (and always has been)
if cookies are off, so this wouldn't be an isolated problem.

|  | [Bradley Baetz (:bbaetz)](/user_profile?user_id=29274) |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=235510#c5)• 21 years ago |
|  | |

Yes, I know it was our policy, I was asking why :)
A one-time use token may be useful for other reasons, though, I guess.

|  | [Dave Miller [:justdave]](/user_profile?user_id=10297)  Reporter |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=235510#c6)• 21 years ago |
|  | |

Just for the record, given what's at stake here, I would be much happier having
cookieless operation broken for the time being than waiting for a while for some
kind of token interface to be implemented if it's going to take longer to do
that. This is a new feature afterall, so we're not removing existing
functionality from cookieless users.

|  | [Gervase Markham [:gerv]](/user_profile?user_id=9911)  Assignee |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=235510#c7)• 21 years ago |
|  | |

We also need the one-time tokens for attachments-on-a-different-host.
So the long term plan is: implement one-time tokens in a generic way, such that
"the presence of a valid token in a login\_token param in the URL authenticates
that single request only, and invalidates the token." That way, we can use it
for almost anything to bridge the cookie gap.
In the short term, you are right - let's break it. It's fairly easy, I think -
just filter out Bugzilla\_login and Bugzilla\_password when we canonicalise the URL.
/me goes to look.
Gerv

|  | [Gervase Markham [:gerv]](/user_profile?user_id=9911)  Assignee |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=235510#c8)• 21 years ago |
|  | |

Attached patch

[Patch v.1](attachment.cgi?id=142418&action=diff)
— [Details](attachment.cgi?id=142418&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=235510&attachment=142418)

Here we go.
Gerv

|  | [Gervase Markham [:gerv]](/user_profile?user_id=9911)  Assignee |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=235510#c9)• 21 years ago |
|  | |

Comment on [attachment 142418](/attachment.cgi?id=142418 "Patch v.1") [[details]](/attachment.cgi?id=142418&action=edit "Patch v.1") [[diff]](/attachment.cgi?id=142418&action=diff "Patch v.1") [[review]](/page.cgi?id=splinter.html&ignore=&bug=235510&attachment=142418)
Patch v.1
bbaetz?
Gerv
[Attachment #142418](/attachment.cgi?id=142418&action=edit "Patch v.1") -
Flags: review?(bbaetz)

|  | [Dave Miller [:justdave]](/user_profile?user_id=10297)  Reporter |  |
| --- | --- | --- |
| [Comment 10](/show_bug.cgi?id=235510#c10)• 21 years ago |
|  | |

If you're grabbing $cgi->query\_string, then just $cgi->delete() those two params
before grabbing $cgi->query\_string.

|  | [Dave Miller [:justdave]](/user_profile?user_id=10297)  Reporter |  |
| --- | --- | --- |
| [Comment 11](/show_bug.cgi?id=235510#c11)• 21 years ago |
|  | |

bah, my mail is slow. :) I made that comment before I realized you'd posted a
patch :) What you did works for me :)

|  | [Gervase Markham [:gerv]](/user_profile?user_id=9911)  Assignee |  |
| --- | --- | --- |
| [Comment 12](/show_bug.cgi?id=235510#c12)• 21 years ago |
|  | |

canonicalise\_query() does all the hard work for us - check the patch :-)
Gerv

|  | [Christian Reis](/user_profile?user_id=17856) |  |
| --- | --- | --- |
| [Comment 13](/show_bug.cgi?id=235510#c13)• 21 years ago |
|  | |

Comment on [attachment 142418](/attachment.cgi?id=142418 "Patch v.1") [[details]](/attachment.cgi?id=142418&action=edit "Patch v.1") [[diff]](/attachment.cgi?id=142418&action=diff "Patch v.1") [[review]](/page.cgi?id=splinter.html&ignore=&bug=235510&attachment=142418)
Patch v.1
Obvious enough. Open a follow-up bug for the token?
[Attachment #142418](/attachment.cgi?id=142418&action=edit "Patch v.1") -
Flags: review?(bbaetz) → review+

|  | [Gervase Markham [:gerv]](/user_profile?user_id=9911)  Assignee |  |
| --- | --- | --- |
| [Comment 14](/show_bug.cgi?id=235510#c14)• 21 years ago |
|  | |

Requesting approval.
Follow-up [bug 236497](/show_bug.cgi?id=236497 "RESOLVED WONTFIX - Make charting work without cookies") filed.
GervFlags: approval+

|  | [Dave Miller [:justdave]](/user_profile?user_id=10297)  Reporter |  |
| --- | --- | --- |
| [Comment 15](/show_bug.cgi?id=235510#c15)• 21 years ago |
|  | |

Holding approval for 2.18rc1 release and security advisory. (it's sooner than
you think ;)
Thanks guys!Flags: approval+ → approval?Whiteboard: [ready for 2.18rc1]

|  | [Gervase Markham [:gerv]](/user_profile?user_id=9911)  Assignee |  |
| --- | --- | --- |
| [Comment 16](/show_bug.cgi?id=235510#c16)• 21 years ago |
|  | |

Oops, sorry, flubbed the approval request.
Gerv

|  | [Dave Miller [:justdave]](/user_profile?user_id=10297)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=235510#a878511_10297)• 21 years ago |

Target Milestone: --- → Bugzilla 2.18

|  | [Dave Miller [:justdave]](/user_profile?user_id=10297)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=235510#a1910971_10297)• 21 years ago |

Flags: blocking2.18+

|  | [Dave Miller [:justdave]](/user_profile?user_id=10297)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=235510#a8205882_10297)• 21 years ago |

Whiteboard: [ready for 2.18rc1] → [does not affect 2.16.x] [ready for 2.18rc1]

|  | [Dave Miller [:justdave]](/user_profile?user_id=10297)  Reporter |  |
| --- | --- | --- |
| [Comment 17](/show_bug.cgi?id=235510#c17)• 21 years ago |
|  | |

sooner than we think. hah! Live and Learn. Well, now it's here finally.Flags: approval? → approval+

|  | [Joel Peshkin](/user_profile?user_id=40200) |  |
| --- | --- | --- |
| [Comment 18](/show_bug.cgi?id=235510#c18)• 21 years ago |
|  | |

checked in
Status: NEW → RESOLVEDClosed: 21 years agoResolution: --- → FIXED

|  | [Joel Peshkin](/user_profile?user_id=40200) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=235510#a11780148_40200)• 21 years ago |

Whiteboard: [does not affect 2.16.x] [ready for 2.18rc1] → [does not affect 2.16.x] [fixed in 2.18rc1]

|  | [Dave Miller [:justdave]](/user_profile?user_id=10297)  Reporter |  |
| --- | --- | --- |
| [Comment 19](/show_bug.cgi?id=235510#c19)• 21 years ago |
|  | |

Clearing the security flag on disclosed bugsGroup: webtools-security

|  | [Nobody; OK to take it and work on it](/user_profile?user_id=1) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=235510#a278215849_1)• 12 years ago |

QA Contact: matty\_is\_a\_geek → default-qa
You need to [log in](/show_bug.cgi?id=235510&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top ↑

## Attachment

Hide Details

### General

Creator:  [Gervase Markham [:gerv]](/user_profile?user_id=9911)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review


