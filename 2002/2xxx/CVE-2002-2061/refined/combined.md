=== Content from www.mandriva.com_6c86e6e6_20250126_000127.html ===


* [Tuxedo.org](https://tuxedo.org/ "Go to: Tuxedo")
* Store
* Mandriva Linux
* Enterprise Solutions
* Contact Us
* Language ![](/sites/all/themes/mandriva_customer/images/arrow-grey-bottom.gif)
  + English (International)
  + Français
  + Ð ÑÑÑÐºÐ¸Ð¹

# [Mandriva](/mandriva/)

* Download
* Mandriva Linux
* Community
* Help

## One

### The Linux desktopthat's easy to try and easy to keep

Download
![Mandriva One](/sites/all/themes/mandriva_customer/images/front/packshot_Mandriva_One.png)

## Powerpack

### Mandriva Linux- and more

Download
![Mandriva Linux Powerpack](/sites/all/themes/mandriva_customer/images/front/en-49.png)

## Mandriva Flash

### The mobile and installable Linux desktopon a USB key

Buy on Store
![Mandriva Flash](/sites/all/themes/mandriva_customer/images/front/mandriva-flash2.png)

### [Community](community)

* User Forums
* Support - FAQ
* Free Software
* Become a member

### Enterprise Solutions

* Enterprise Linux Products
* Asset Management Solution
* Professional Services
* Support & Maintenance

* Go to site »

### Mandriva Partners

* Worldwide offices
* Partner Program
* Technology Partners
* OEM
* Classmate PC with Mandriva Linux

### News

* Mandriva presents the launch of its new mobile desktop: Mandriva Flash 2008 Spring
* Speaking about Mandriva Linux 2008 Spring in media
* Speaking about Mandriva Linux 2008 Spring in media
* Mandriva presents its latest distribution: Mandriva Linux 2008 Spring
* Mandriva and Novatice Technologies present Edutice, The ready to use solution dedicated to educationand multimedia spaces
* # [Top 50 Online Casinos UK in 2023](https://montycasinos.com/online-casinos/)

more

* Download
  + Mandriva Linux 2008
  + Writing an ISO image
* Mandriva Linux
  + One
  + Powerpack
  + Mandriva Flash
* Community
  + Start
  + Register
  + Stay informed
  + Participate
  + Free software
* Help
  + Getting help
  + Knowledge Base
  + Documentation
  + Forums
  + Support Requests
  + Customer Care
  + Enterprise Support
* Enterprise Solutions
  + Products
  + Support
  + Services
  + Partners
  + Go to site »

Language
English (International)
Français
Ð ÑÑÑÐºÐ¸Ð¹

* © 2007 Mandriva S.A.
* About Us
* Legal Information
* Privacy Policy
* Contact Us



=== Content from bugzilla.mozilla.org_fc247e8b_20250126_000055.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summary▾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View ▾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/157202)
* [XML](/show_bug.cgi?ctype=xml&id=157202)

Closed
[Bug 157202](/show_bug.cgi?id=157202)

Opened 23 years ago
Closed 23 years ago

# Exploitable (?) heap overrun in PNG

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

Exploitable (?) heap overrun in PNG

## Categories

### (Core :: Security, defect)

[Product:](/describecomponents.cgi?product=Core)

Core
▾

Core
Shared components used by Firefox and other Mozilla software, including handling of Web content; Gecko, HTML, CSS, layout, DOM, scripts, images, networking, etc. Issues with web page layout probably go here, while Firefox user interface issues belong in the [Firefox](https://bugzilla.mozilla.org/describecomponents.cgi?product=Firefox) product. ([More info](https://wiki.mozilla.org/Modules/All#Core))
[See Open Bugs in This Product](/buglist.cgi?product=Core&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Core)
Watch This Product

[Component:](/describecomponents.cgi?product=Core&component=Security#Security)

Security
▾

Core :: Security
For non-crypto security bugs. Or use this general component if you know you have a Browser security bug, but not sure what component to use. Bug will be reviewed for proper component.
[See Open Bugs in This Component](/buglist.cgi?product=Core&component=Security&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Core&component=Security&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Core&component=Security)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

Trunk

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

x86

Linux

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

*Not set*

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

major

Points:

---

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

VERIFIED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

VERIFIED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

mozilla1.0.1

Iteration:

---

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| Accessibility Severity | --- |
| --- | --- |
| a11y-review | --- |
| Webcompat Score | --- |
| Webcompat Priority | --- |
| Performance Impact | --- |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| relnote-firefox |  | --- |
| thunderbird\_esr115 | --- | --- |
| thunderbird\_esr128 | --- | --- |
| firefox-esr115 | --- | --- |
| firefox-esr128 | --- | --- |
| firefox134 | --- | --- |
| firefox135 | --- | --- |
| firefox136 | --- | --- |

## People

### (Reporter: security-bugs, Assigned: pavlov)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/a170d274720dcfe840906d4b88a7d117?d=mm&size=40)  [pavlov](/user_profile?user_id=5756)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

![](https://secure.gravatar.com/avatar/ceea653929033897d8451b0c2d0d8ea5?d=mm&size=40)  [bsharma](/user_profile?user_id=4397)

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](https://secure.gravatar.com/avatar/4182f3acd4edf78ac80bd02f43a54a60?d=mm&size=40)  [security-bugs](/user_profile?user_id=6444)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

![](https://secure.gravatar.com/avatar/da6b54ad3fdb36ba7656df9adfe65d12?d=mm&size=40)  [dveditz](/user_profile?user_id=1689)

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

15 people

## References

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

[101948](/show_bug.cgi?id=101948 "VERIFIED DUPLICATE - Alpha-channel code breaks on images >= 32768 pixels")

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

[143047](/show_bug.cgi?id=143047 "RESOLVED FIXED - GO GO Speed Racer!"), [1.0.1](/show_bug.cgi?id=158377 "RESOLVED FIXED - Make mozilla 1.0.1 not suck")

Dependency [tree](/showdependencytree.cgi?id=157202&hide_resolved=1)
/ [graph](/showdependencygraph.cgi?id=157202)

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[Duplicates:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#duplicates)

[101948](/show_bug.cgi?id=101948 "VERIFIED DUPLICATE - Alpha-channel code breaks on images >= 32768 pixels")

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

---

## Details

### (Whiteboard: [adt1 rtm] [ETA 07/23])

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

---

[Keywords:](/describekeywords.cgi)

---

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[adt1 rtm] [ETA 07/23]

QA Whiteboard:

---

Has STR:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

|  | behind-pref |  |
| --- | --- | --- |
|  | firefox-backlog |  |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | in-testsuite |  |
|  | qe-verify |  |

## Crash Data

Signature:

*None*

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (4 files, 6 obsolete files)

| [change int16s to int32s](/attachment.cgi?id=91785)  [23 years ago](#c7)  [Stuart Parmenter](/user_profile?user_id=5756)   1.00 KB, patch | dougt : [review+](#c11 "23 years ago")  tor : [superreview+](#c12 "23 years ago")  chofmann : [approval+](#c14 "23 years ago") | [Details](/attachment.cgi?id=91785&action=edit) | [Diff](/attachment.cgi?id=91785&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=157202&attachment=91785) |
| --- | --- | --- |
| [This crashes on linux even after the proposed patch](/attachment.cgi?id=91955)  [23 years ago](#c18)  [georgi - hopefully not receiving bugspam](/user_profile?user_id=23768)   592 bytes, image/png |  | [Details](/attachment.cgi?id=91955&action=edit) |
| [png decoder patch to pay attention to errors when initing the gfxImageFrame](/attachment.cgi?id=92017)  [23 years ago](#c23)  [Stuart Parmenter](/user_profile?user_id=5756)   827 bytes, patch |  | [Details](/attachment.cgi?id=92017&action=edit) | [Diff](/attachment.cgi?id=92017&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=157202&attachment=92017) |
| [limit size of images to 2^16 x 2^16](/attachment.cgi?id=92018)  [23 years ago](#c24)  [Stuart Parmenter](/user_profile?user_id=5756)   827 bytes, patch |  | [Details](/attachment.cgi?id=92018&action=edit) | [Diff](/attachment.cgi?id=92018&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=157202&attachment=92018) |
| [jpeg and mng patches to pay attention to error](/attachment.cgi?id=92019)  [23 years ago](#c25)  [Stuart Parmenter](/user_profile?user_id=5756)   1.93 KB, patch |  | [Details](/attachment.cgi?id=92019&action=edit) | [Diff](/attachment.cgi?id=92019&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=157202&attachment=92019) |
| [jpeg and mng patches to pay attention to the error](/attachment.cgi?id=92020)  [23 years ago](#c26)  [Stuart Parmenter](/user_profile?user_id=5756)   1.94 KB, patch |  | [Details](/attachment.cgi?id=92020&action=edit) | [Diff](/attachment.cgi?id=92020&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=157202&attachment=92020) |
| [limit size of images to 2^14 x 2^14](/attachment.cgi?id=92021)  [23 years ago](#c27)  [Stuart Parmenter](/user_profile?user_id=5756)   686 bytes, patch | saari : [review+](#c33 "23 years ago") | [Details](/attachment.cgi?id=92021&action=edit) | [Diff](/attachment.cgi?id=92021&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=157202&attachment=92021) |
| [fix ppm and xbm decoders as well](/attachment.cgi?id=92023)  [23 years ago](#c28)  [Stuart Parmenter](/user_profile?user_id=5756)   1.71 KB, patch |  | [Details](/attachment.cgi?id=92023&action=edit) | [Diff](/attachment.cgi?id=92023&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=157202&attachment=92023) |
| [one patch for all the decoders](/attachment.cgi?id=92024)  [23 years ago](#c29)  [Stuart Parmenter](/user_profile?user_id=5756)   4.38 KB, patch | dougt : [review+](#c32 "23 years ago")  tor : [superreview+](#c31 "23 years ago")  asa : [approval+](#c37 "23 years ago") | [Details](/attachment.cgi?id=92024&action=edit) | [Diff](/attachment.cgi?id=92024&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=157202&attachment=92024) |
| [limit size to (2^15)-1](/attachment.cgi?id=92030)  [23 years ago](#c34)  [Stuart Parmenter](/user_profile?user_id=5756)   1.35 KB, patch | dougt : [review+](#c36 "23 years ago")  tor : [superreview+](#c35 "23 years ago")  asa : [approval+](#c38 "23 years ago") | [Details](/attachment.cgi?id=92030&action=edit) | [Diff](/attachment.cgi?id=92030&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=157202&attachment=92030) |

Show Obsolete

Bottom ↓
Tags ▾

* Reset

Timeline ▾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [Mitchell Stoltz (not reading bugmail)](/user_profile?user_id=6444)  Reporter |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=157202#c0)• 23 years ago |
|  | |

Subject:
exploitable heap corruption via PNG Alpha data
From:
zen-parse <zen-parse@gmx.net>
Date:
Sat, 13 Jul 2002 04:04:56 +1200 (NZST)
This problem allows execution of arbitrary code via Netscape 6.2.3.
Product: Netscape 6.x
Platform: Unix: x86 Linux
Operating system version: Redhat 7.0
exploitable heap corruption via PNG Alpha data
I believe the fault lies somewhere around here:
<http://lxr.mozilla.org/mozilla/source/gfx2/src/gfxImageFrame.cpp#326>
A specially crafted invalid PNG, with reported dimensions of 65536x65536
such as and an 8-bit alpha channel (most likely, similar overflowing
values as well, such as 65531x32771 with 16-bit alpha, if that is
supported),can cause controllable heap corruption, overwriting (at least)
a pointer to a function pointer that allows arbitary code to be executed.
An example exploit for this is on:
<http://crash.ihug.co.nz/~Sneuro/pngkiller2.tar.gz>
The code is somewhat commented and explains what I believe is happening,
although it was written while offline, and so without access to the source
to verify the accuracy.
However, this is a DIFFERENT problem to the previously reported PNG
problem.

|  | [Mitchell Stoltz (not reading bugmail)](/user_profile?user_id=6444)  Reporter |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=157202#c1)• 23 years ago |
|  | |

Adding keywords, this sounds quite serious. Could someone (pavlov?) confirm this
crash?Keywords: [adt1.0.1](/buglist.cgi?keywords=adt1.0.1&resolution=---),
[mozilla1.0.1](/buglist.cgi?keywords=mozilla1.0.1&resolution=---),
[nsbeta1](/buglist.cgi?keywords=nsbeta1&resolution=---)Whiteboard: [adt1 rtm]

|  | [Jaime Rodriguez, Jr.](/user_profile?user_id=16235) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=157202#a5544_16235)• 23 years ago |

Blocks: [143047](/show_bug.cgi?id=143047 "RESOLVED FIXED - GO GO Speed Racer!")Severity: normal → majorKeywords: [nsbeta1](/buglist.cgi?keywords=nsbeta1&resolution=---) → [nsbeta1+](/buglist.cgi?keywords=nsbeta1%2B&resolution=---)Whiteboard: [adt1 rtm] → [adt1 rtm] [ETA Needed]Target Milestone: --- → mozilla1.0.1

|  | [Stuart Parmenter](/user_profile?user_id=5756)  Assignee |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=157202#c2)• 23 years ago |
|  | |

I wasn't seeing the crash on my solaris box, but I'll try it on a few other
machines. I am having trouble building the crash code due to missing libraries
and headers.

|  | [Mitchell Stoltz (not reading bugmail)](/user_profile?user_id=6444)  Reporter |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=157202#c3)• 23 years ago |
|  | |

From Georgi:
[Bug 157202](/show_bug.cgi?id=157202 "VERIFIED FIXED - Exploitable (?) heap overrun in PNG") Exploitable (?) heap overrun in PNG really seems exploitable.
I had problems running the programs (probably because they need a lot of
disk space).
But the supplied laa.png really crashes mozilla in a nasty way - writes 0x42 to
the stack.
Georgi

|  | [Mitchell Stoltz (not reading bugmail)](/user_profile?user_id=6444)  Reporter |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=157202#c4)• 23 years ago |
|  | |

Also, does this cause a crash on Windows?

|  | [Stuart Parmenter](/user_profile?user_id=5756)  Assignee |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=157202#c5)• 23 years ago |
|  | |

where did Georgi find laa.png?

|  | [tor](/user_profile?user_id=589) |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=157202#c6)• 23 years ago |
|  | |

Two problems at first glance:
\* nsImageGTK uses signed shorts to describe alpha data metrics. Changing
them in nsImageGTK.h to PRUInt32s should eliminate that problem.
\* mozilla doesn't sanity check the amount of memory requested for an image.
The example file (laa.png) wants 65536\*65536\*4 bytes.
Along the lines of excessive memory use, I'm not aware that we have any limit
to the total amount of memory used by the image cache for a page. A possible
DOS attack would be to create a page with a number of large dimension solid
block pngs (which compress into trivially small files).

|  | [tor](/user_profile?user_id=589) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=157202#a404125_589)• 23 years ago |

Depends on: [101948](/show_bug.cgi?id=101948 "VERIFIED DUPLICATE - Alpha-channel code breaks on images >= 32768 pixels")

|  | [Stuart Parmenter](/user_profile?user_id=5756)  Assignee |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=157202#c7)• 23 years ago |
|  | |

Attached patch

[change int16s to int32s](attachment.cgi?id=91785&action=diff)
— [Details](attachment.cgi?id=91785&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=157202&attachment=91785)

this should fix the overflow on linux. the overflow doesn't occur on the other
platforms.

|  | [georgi - hopefully not receiving bugspam](/user_profile?user_id=23768) |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=157202#c8)• 23 years ago |
|  | |

Stuart Parmenter: the file laa.png is in the tar pngkiller2.tar.gz

|  | [Jaime Rodriguez, Jr.](/user_profile?user_id=16235) |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=157202#c9)• 23 years ago |
|  | |

Removing adt1.0.1, until this has been reviewed and verified on the trunk.
Who can review and supper review Pav's patch? Keywords: [adt1.0.1](/buglist.cgi?keywords=adt1.0.1&resolution=---)Whiteboard: [adt1 rtm] [ETA Needed] → [adt1 rtm] [ETA 07/20]

|  | [Stuart Parmenter](/user_profile?user_id=5756)  Assignee |  |
| --- | --- | --- |
| [Comment 10](/show_bug.cgi?id=157202#c10)• 23 years ago |
|  | |

dougt: can you r=? tor: can you sr=?

|  | [Doug Turner (:dougt)](/user_profile?user_id=302291) |  |
| --- | --- | --- |
| [Comment 11](/show_bug.cgi?id=157202#c11)• 23 years ago |
|  | |

Comment on [attachment 91785](/attachment.cgi?id=91785 "change int16s to int32s") [[details]](/attachment.cgi?id=91785&action=edit "change int16s to int32s") [[diff]](/attachment.cgi?id=91785&action=diff "change int16s to int32s") [[review]](/page.cgi?id=splinter.html&ignore=&bug=157202&attachment=91785)
change int16s to int32s
do we have any logic that depends on the size of these ?
if not and assuming that this is well tested, r=dougt
[Attachment #91785](/attachment.cgi?id=91785&action=edit "change int16s to int32s") -
Flags: review+

|  | [tor](/user_profile?user_id=589) |  |
| --- | --- | --- |
| [Comment 12](/show_bug.cgi?id=157202#c12)• 23 years ago |
|  | |

Comment on [attachment 91785](/attachment.cgi?id=91785 "change int16s to int32s") [[details]](/attachment.cgi?id=91785&action=edit "change int16s to int32s") [[diff]](/attachment.cgi?id=91785&action=diff "change int16s to int32s") [[review]](/page.cgi?id=splinter.html&ignore=&bug=157202&attachment=91785)
change int16s to int32s
sr=tor
There's some logic in the alpha compositing that will break down if
screen dimensions get bigger than 16 bits, but since the X protocol
will break first we're safe.
[Attachment #91785](/attachment.cgi?id=91785&action=edit "change int16s to int32s") -
Flags: superreview+

|  | [Jaime Rodriguez, Jr.](/user_profile?user_id=16235) |  |
| --- | --- | --- |
| [Comment 13](/show_bug.cgi?id=157202#c13)• 23 years ago |
|  | |

Pav - Looks like you have the reviews. Can you pls land this on the trunk
tonight, so that we can have it verified by bindu tomorrow? thanks!Keywords: [adt1.0.1](/buglist.cgi?keywords=adt1.0.1&resolution=---)

|  | [chris hofmann](/user_profile?user_id=2687) |  |
| --- | --- | --- |
| [Comment 14](/show_bug.cgi?id=157202#c14)• 23 years ago |
|  | |

Comment on [attachment 91785](/attachment.cgi?id=91785 "change int16s to int32s") [[details]](/attachment.cgi?id=91785&action=edit "change int16s to int32s") [[diff]](/attachment.cgi?id=91785&action=diff "change int16s to int32s") [[review]](/page.cgi?id=splinter.html&ignore=&bug=157202&attachment=91785)
change int16s to int32s
a=chofmann for trunk/1.1b
[Attachment #91785](/attachment.cgi?id=91785&action=edit "change int16s to int32s") -
Flags: approval+

|  | [Stuart Parmenter](/user_profile?user_id=5756)  Assignee |  |
| --- | --- | --- |
| [Comment 15](/show_bug.cgi?id=157202#c15)• 23 years ago |
|  | |

landed on trunk.Status: NEW → RESOLVEDClosed: 23 years agoResolution: --- → FIXED

|  | [scottputterman](/user_profile?user_id=4448) |  |
| --- | --- | --- |
| [Comment 16](/show_bug.cgi?id=157202#c16)• 23 years ago |
|  | |

Bindu, can you verify this on the trunk?

|  | [georgi - hopefully not receiving bugspam](/user_profile?user_id=23768) |  |
| --- | --- | --- |
| [Comment 17](/show_bug.cgi?id=157202#c17)• 23 years ago |
|  | |

I disagree with [Comment #7](/show_bug.cgi?id=157202#c7 "VERIFIED FIXED - Exploitable (?) heap overrun in PNG") "the overflow doesn't occur on the other
platforms."
The file laa.png crashes moz1.0 on win2k.
Are you sure the fix in \*gtk\* also fixes win2k?

|  | [georgi - hopefully not receiving bugspam](/user_profile?user_id=23768) |  |
| --- | --- | --- |
| [Comment 18](/show_bug.cgi?id=157202#c18)• 23 years ago |
|  | |

Attached image
[This crashes on linux even after the proposed patch](attachment.cgi?id=91955)
— [Details](attachment.cgi?id=91955&action=edit)

Attached png consumes even more memory and still crashes latest CVS build on at
least linux.

|  | [georgi - hopefully not receiving bugspam](/user_profile?user_id=23768) |  |
| --- | --- | --- |
| [Comment 19](/show_bug.cgi?id=157202#c19)• 23 years ago |
|  | |

I think this bug should be reopened per my 2 previous comments.
Today's linux CVS build passes the crash with laa.png (the reporters testcase)
but if it is modified a little mozilla still crashes with the attached to this
bug testcase.
<http://bugzilla.mozilla.org/attachment.cgi?id=91955&action=view>

|  | [tor](/user_profile?user_id=589) |  |
| --- | --- | --- |
| [Comment 20](/show_bug.cgi?id=157202#c20)• 23 years ago |
|  | |

As I mentioned in [comment 6](/show_bug.cgi?id=157202#c6 "VERIFIED FIXED - Exploitable (?) heap overrun in PNG"), the nsImageGTK change is only a small portion
of the problem.
Status: RESOLVED → REOPENEDResolution: FIXED → ---

|  | [georgi - hopefully not receiving bugspam](/user_profile?user_id=23768) |  |
| --- | --- | --- |
| [Comment 21](/show_bug.cgi?id=157202#c21)• 23 years ago |
|  | |

My testcase seems to abort() mozilla and doesn't seem exploitable on linux IMHO.
The problem is a signed/unsigned issue.

|  | [bsharma](/user_profile?user_id=4397) |  |
| --- | --- | --- |
| [Comment 22](/show_bug.cgi?id=157202#c22)• 23 years ago |
|  | |

Verified on 2002-07-19-trunk build on Win 2K and Linux.
Try to open the laa.png in <http://crash.ihug.co.nz/~Sneuro/pngkiller2.tar.gz>
and the Win 2K and Linux crashes.

|  | [tor](/user_profile?user_id=589) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=157202#a609863_589)• 23 years ago |

Blocks: [1.0.1](/show_bug.cgi?id=158377 "RESOLVED FIXED - Make mozilla 1.0.1 not suck")

|  | [Stuart Parmenter](/user_profile?user_id=5756)  Assignee |  |
| --- | --- | --- |
| [Comment 23](/show_bug.cgi?id=157202#c23)• 23 years ago |
|  | |

Attached patch

[png decoder patch to pay attention to errors when initing the gfxImageFrame](attachment.cgi?id=92017&action=diff) (obsolete)
— [Details](attachment.cgi?id=92017&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=157202&attachment=92017)

|  | [Stuart Parmenter](/user_profile?user_id=5756)  Assignee |  |
| --- | --- | --- |
| [Comment 24](/show_bug.cgi?id=157202#c24)• 23 years ago |
|  | |

Attached patch

[limit size of images to 2^16 x 2^16](attachment.cgi?id=92018&action=diff) (obsolete)
— [Details](attachment.cgi?id=92018&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=157202&attachment=92018)

|  | [Stuart Parmenter](/user_profile?user_id=5756)  Assignee |  |
| --- | --- | --- |
| [Comment 25](/show_bug.cgi?id=157202#c25)• 23 years ago |
|  | |

Attached patch

[jpeg and mng patches to pay attention to error](attachment.cgi?id=92019&action=diff) (obsolete)
— [Details](attachment.cgi?id=92019&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=157202&attachment=92019)

|  | [Stuart Parmenter](/user_profile?user_id=5756)  Assignee |  |
| --- | --- | --- |
| [Comment 26](/show_bug.cgi?id=157202#c26)• 23 years ago |
|  | |

Attached patch

[jpeg and mng patches to pay attention to the error](attachment.cgi?id=92020&action=diff) (obsolete)
— [Details](attachment.cgi?id=92020&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=157202&attachment=92020)

[Attachment #92019](/attachment.cgi?id=92019&action=edit "jpeg and mng patches to pay attention to error") -
Attachment is obsolete: true

|  | [Stuart Parmenter](/user_profile?user_id=5756)  Assignee |  |
| --- | --- | --- |
| [Comment 27](/show_bug.cgi?id=157202#c27)• 23 years ago |
|  | |

Attached patch

[limit size of images to 2^14 x 2^14](attachment.cgi?id=92021&action=diff) (obsolete)
— [Details](attachment.cgi?id=92021&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=157202&attachment=92021)

[Attachment #92018](/attachment.cgi?id=92018&action=edit "limit size of images to 2^16 x 2^16") -
Attachment is obsolete: true

|  | [Stuart Parmenter](/user_profile?user_id=5756)  Assignee |  |
| --- | --- | --- |
| [Comment 28](/show_bug.cgi?id=157202#c28)• 23 years ago |
|  | |

Attached patch

[fix ppm and xbm decoders as well](attachment.cgi?id=92023&action=diff) (obsolete)
— [Details](attachment.cgi?id=92023&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=157202&attachment=92023)

|  | [Stuart Parmenter](/user_profile?user_id=5756)  Assignee |  |
| --- | --- | --- |
| [Comment 29](/show_bug.cgi?id=157202#c29)• 23 years ago |
|  | |

Attached patch

[one patch for all the decoders](attachment.cgi?id=92024&action=diff)
— [Details](attachment.cgi?id=92024&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=157202&attachment=92024)

|  | [Stuart Parmenter](/user_profile?user_id=5756)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=157202#a611791_5756)• 23 years ago |

[Attachment #92017](/attachment.cgi?id=92017&action=edit "png decoder patch to pay attention to errors when initing the gfxImageFrame") -
Attachment is obsolete: true
[Attachment #92020](/attachment.cgi?id=92020&action=edit "jpeg and mng patches to pay attention to the error") -
Attachment is obsolete: true
[Attachment #92023](/attachment.cgi?id=92023&action=edit "fix ppm and xbm decoders as well") -
Attachment is obsolete: true

|  | [Stuart Parmenter](/user_profile?user_id=5756)  Assignee |  |
| --- | --- | --- |
| [Comment 30](/show_bug.cgi?id=157202#c30)• 23 years ago |
|  | |

ok, these 2 patches limit image sizes to 2^14 (16k) and will error out if
images try to get bigger than that.Keywords: [patch](/buglist.cgi?keywords=patch&resolution=---)

|  | [tor](/user_profile?user_id=589) |  |
| --- | --- | --- |
| [Comment 31](/show_bug.cgi?id=157202#c31)• 23 years ago |
|  | |

Comment on [attachment 92024](/attachment.cgi?id=92024 "one patch for all the decoders") [[details]](/attachment.cgi?id=92024&action=edit "one patch for all the decoders") [[diff]](/attachment.cgi?id=92024&action=diff "one patch for all the decoders") [[review]](/page.cgi?id=splinter.html&ignore=&bug=157202&attachment=92024)
one patch for all the decoders
sr=tor
[Attachment #92024](/attachment.cgi?id=92024&action=edit "one patch for all the decoders") -
Flags: superreview+

|  | [Doug Turner (:dougt)](/user_profile?user_id=302291) |  |
| --- | --- | --- |
| [Comment 32](/show_bug.cgi?id=157202#c32)• 23 years ago |
|  | |

Comment on [attachment 92024](/attachment.cgi?id=92024 "one patch for all the decoders") [[details]](/attachment.cgi?id=92024&action=edit "one patch for all the decoders") [[diff]](/attachment.cgi?id=92024&action=diff "one patch for all the decoders") [[review]](/page.cgi?id=splinter.html&ignore=&bug=157202&attachment=92024)
one patch for all the decoders
r=dougt
[Attachment #92024](/attachment.cgi?id=92024&action=edit "one patch for all the decoders") -
Flags: review+

|  | [saari (gone)](/user_profile?user_id=4318) |  |
| --- | --- | --- |
| [Comment 33](/show_bug.cgi?id=157202#c33)• 23 years ago |
|  | |

Comment on [attachment 92021](/attachment.cgi?id=92021 "limit size of images to 2^14 x 2^14") [[details]](/attachment.cgi?id=92021&action=edit "limit size of images to 2^14 x 2^14") [[diff]](/attachment.cgi?id=92021&action=diff "limit size of images to 2^14 x 2^14") [[review]](/page.cgi?id=splinter.html&ignore=&bug=157202&attachment=92021)
limit size of images to 2^14 x 2^14
r=saari
[Attachment #92021](/attachment.cgi?id=92021&action=edit "limit size of images to 2^14 x 2^14") -
Flags: review+

|  | [Stuart Parmenter](/user_profile?user_id=5756)  Assignee |  |
| --- | --- | --- |
| [Comment 34](/show_bug.cgi?id=157202#c34)• 23 years ago |
|  | |

Attached patch

[limit size to (2^15)-1](attachment.cgi?id=92030&action=diff)
— [Details](attachment.cgi?id=92030&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=157202&attachment=92030)

[Attachment #92021](/attachment.cgi?id=92021&action=edit "limit size of images to 2^14 x 2^14") -
Attachment is obsolete: true

|  | [tor](/user_profile?user_id=589) |  |
| --- | --- | --- |
| [Comment 35](/show_bug.cgi?id=157202#c35)• 23 years ago |
|  | |

Comment on [attachment 92030](/attachment.cgi?id=92030 "limit size to (2^15)-1") [[details]](/attachment.cgi?id=92030&action=edit "limit size to (2^15)-1") [[diff]](/attachment.cgi?id=92030&action=diff "limit size to (2^15)-1") [[review]](/page.cgi?id=splinter.html&ignore=&bug=157202&attachment=92030)
limit size to (2^15)-1
sr=tor
[Attachment #92030](/attachment.cgi?id=92030&action=edit "limit size to (2^15)-1") -
Flags: superreview+

|  | [Doug Turner (:dougt)](/user_profile?user_id=302291) |  |
| --- | --- | --- |
| [Comment 36](/show_bug.cgi?id=157202#c36)• 23 years ago |
|  | |

Comment on [attachment 92030](/attachment.cgi?id=92030 "limit size to (2^15)-1") [[details]](/attachment.cgi?id=92030&action=edit "limit size to (2^15)-1") [[diff]](/attachment.cgi?id=92030&action=diff "limit size to (2^15)-1") [[review]](/page.cgi?id=splinter.html&ignore=&bug=157202&attachment=92030)
limit size to (2^15)-1
r=dougt
[Attachment #92030](/attachment.cgi?id=92030&action=edit "limit size to (2^15)-1") -
Flags: review+

|  | [Asa Dotzler [:asa]](/user_profile?user_id=5003) |  |
| --- | --- | --- |
| [Comment 37](/show_bug.cgi?id=157202#c37)• 23 years ago |
|  | |

Comment on [attachment 92024](/attachment.cgi?id=92024 "one patch for all the decoders") [[details]](/attachment.cgi?id=92024&action=edit "one patch for all the decoders") [[diff]](/attachment.cgi?id=92024&action=diff "one patch for all the decoders") [[review]](/page.cgi?id=splinter.html&ignore=&bug=157202&attachment=92024)
one patch for all the decoders
a=asa (on behalf of drivers) for checkin to 1.1
[Attachment #92024](/attachment.cgi?id=92024&action=edit "one patch for all the decoders") -
Flags: approval+

|  | [Asa Dotzler [:asa]](/user_profile?user_id=5003) |  |
| --- | --- | --- |
| [Comment 38](/show_bug.cgi?id=157202#c38)• 23 years ago |
|  | |

Comment on [attachment 92030](/attachment.cgi?id=92030 "limit size to (2^15)-1") [[details]](/attachment.cgi?id=92030&action=edit "limit size to (2^15)-1") [[diff]](/attachment.cgi?id=92030&action=diff "limit size to (2^15)-1") [[review]](/page.cgi?id=splinter.html&ignore=&bug=157202&attachment=92030)
limit size to (2^15)-1
a=asa (on behalf of drivers) for checkin to 1.1
[Attachment #92030](/attachment.cgi?id=92030&action=edit "limit size to (2^15)-1") -
Flags: approval+

|  | [Stuart Parmenter](/user_profile?user_id=5756)  Assignee |  |
| --- | --- | --- |
| [Comment 39](/show_bug.cgi?id=157202#c39)• 23 years ago |
|  | |

fixes checked in.Status: REOPENED → RESOLVEDClosed: 23 years ago → 23 years agoResolution: --- → FIXED

|  | [Jaime Rodriguez, Jr.](/user_profile?user_id=16235) |  |
| --- | --- | --- |
| [Comment 40](/show_bug.cgi?id=157202#c40)• 23 years ago |
|  | |

bsharma: bindu, can you verify this fix on the trunk? thanks!Whiteboard: [adt1 rtm] [ETA 07/20] → [adt1 rtm] [ETA 07/23]

|  | [bsharma](/user_profile?user_id=4397) |  |
| --- | --- | --- |
| [Comment 41](/show_bug.cgi?id=157202#c41)• 23 years ago |
|  | |

Verified on 2002-07-22-trunk on Win 2000.
The laa.png does not load and the error appears in the content window.
Status: RESOLVED → VERIFIED

|  | [Paul Wyskoczka](/user_profile?user_id=4386) |  |
| --- | --- | --- |
| [Comment 42](/show_bug.cgi?id=157202#c42)• 23 years ago |
|  | |

Adding adt1.0.1 on behalf of the adt. Please check this fix into the Mozilla
branch after getting branch approval from drivers.Keywords: [adt1.0.1](/buglist.cgi?keywords=adt1.0.1&resolution=---) → [adt1.0.1+](/buglist.cgi?keywords=adt1.0.1%2B&resolution=---)

|  | [chris hofmann](/user_profile?user_id=2687) |  |
| --- | --- | --- |
| [Comment 43](/show_bug.cgi?id=157202#c43)• 23 years ago |
|  | |

a=chofmann for 1.0.1. add the fixed1.0.1 keyword after checking in on the branch.Keywords: [mozilla1.0.1](/buglist.cgi?keywords=mozilla1.0.1&resolution=---) → [mozilla1.0.1+](/buglist.cgi?keywords=mozilla1.0.1%2B&resolution=---)

|  | [Stuart Parmenter](/user_profile?user_id=5756)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=157202#a886226_5756)• 23 years ago |

Keywords: [fixed1.0.1](/buglist.cgi?keywords=fixed1.0.1&resolution=---)

|  | [Jaime Rodriguez, Jr.](/user_profile?user_id=16235) |  |
| --- | --- | --- |
| [Comment 44](/show_bug.cgi?id=157202#c44)• 23 years ago |
|  | |

bsharma: bindu, can you verify this fix on the branch, then replace "fixed1.0.1"
with "verified1.0.1"? thanks!

|  | [bsharma](/user_profile?user_id=4397) |  |
| --- | --- | --- |
| [Comment 45](/show_bug.cgi?id=157202#c45)• 23 years ago |
|  | |

Verified on 2002-07-25-branch on Win 2000.
The laa.png does not load and the error appears in the content window.
Keywords: [fixed1.0.1](/buglist.cgi?keywords=fixed1.0.1&resolution=---) → [verified1.0.1](/buglist.cgi?keywords=verified1.0.1&resolution=---)

|  | [Randell Jesup [:jesup] (needinfo me)](/user_profile?user_id=11539) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=157202#a1629246_11539)• 22 years ago |

Keywords: [mozilla1.0.1+](/buglist.cgi?keywords=mozilla1.0.1%2B&resolution=---)

|  | [Mitchell Stoltz (not reading bugmail)](/user_profile?user_id=6444)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=157202#a4762317_6444)• 22 years ago |

Group: security?

|  | [tor](/user_profile?user_id=589) |  |
| --- | --- | --- |
| [Comment 46](/show_bug.cgi?id=157202#c46)• 22 years ago |
|  | |

\*\*\* [Bug 101948](/show_bug.cgi?id=101948 "VERIFIED DUPLICATE - Alpha-channel code breaks on images >= 32768 pixels") has been marked as a duplicate of this bug. \*\*\*
You need to [log in](/show_bug.cgi?id=157202&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top ↑

## Attachment

Hide Details

### General

Creator:  [Stuart Parmenter](/user_profile?user_id=5756)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review


