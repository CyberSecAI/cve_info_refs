=== Content from marc.info_77fc9248_20250125_142815.html ===

```
[[prev in list](?l=apache-httpd-dev&m=103291895719006&w=2)] [[next in list](?l=apache-httpd-dev&m=103292250221695&w=2)] [prev in thread] [[next in thread](?l=apache-httpd-dev&m=103292250221695&w=2)]
List:       [apache-httpd-dev](?l=apache-httpd-dev&r=1&w=2)
Subject:    [CGI bucket needed](?t=103291968300003&r=1&w=2)
From:       [Greg Stein <gstein () lyra ! org>](?a=91027886500001&r=1&w=2)
Date:       [2002-09-25 2:06:04](?l=apache-httpd-dev&r=1&w=2&b=200209)
[Download RAW [message](?l=apache-httpd-dev&m=103291952019514&q=mbox) or [body](?l=apache-httpd-dev&m=103291952019514&q=raw)]

Just ran into an interesting bug, and I've got a proposal for a way to solve
it, too. (no code tho :-)

If a CGI writes to stderr [more than the pipe's buffer has room for], then
it will block on that write. Meanwhile, when Apache goes to deliver the CGI
output to the network, it will *block* on a read from the CGI's output.

See the deadlock yet? :-)

The CGI can't generate output because it needs the write-to-stderr to
complete. Apache can't drain stderr until the read-from-stdout completes. In
fact, Apache won't even drain stderr until the CGI is *done* (it must empty
the PIPE bucket passed into the output filters).

Eventually, the deadlock resolves itself when the read from the PIPE bucket
times out.

[ this read behavior occurs in the C-L filter ]

[ NOTE: it appears this behavior is a regression from Apache 1.3. In 1.3, we
  just hook stderr into the error log. In 2.0, we manually read lines, then
  log them (with timestamps) ]

I believe the solution is to create a new CGI bucket type. The read()
function would read from stdout, similar to a normal PIPE bucket (e.g.
create a new HEAP bucket with the results). However, the bucket *also* holds
the stderr pipe from the CGI script. When you do a bucket read(), it
actually blocks on both pipes. If data comes in from stderr, then it drains
it and sends that to the error log. Data that comes in from stdout is
handled normally.

This system allows you to keep stderr drained, yet still provide for
standard PIPE style operation on the stdout pipe.

Thoughts?

Anybody adventurous enough to code it? :-)

Cheers,
-g

--
Greg Stein, <http://www.lyra.org/>
[[prev in list](?l=apache-httpd-dev&m=103291895719006&w=2)] [[next in list](?l=apache-httpd-dev&m=103292250221695&w=2)] [prev in thread] [[next in thread](?l=apache-httpd-dev&m=103292250221695&w=2)]

```

[Configure](?q=configure) |
[About](?q=about) |
[News](?q=news) |
Add a list |
Sponsored by [KoreLogic](http://www.korelogic.com/)



=== Content from issues.apache.org_094233ab_20250125_142814.html ===


ASF Bugzilla – Bug 22030
4097+ bytes of stderr from cgi script causes script to hang
Last modified: 2014-02-03 01:22:04 UTC

* + [Home](./)
  + | [New](enter_bug.cgi)
  + | [Browse](describecomponents.cgi)
  + | [Search](query.cgi)
  + |

    [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")
  + | [Reports](report.cgi)
  + |
    [Help](docs/en/html/using/understanding.html)
  + |
    [New Account](createaccount.cgi)
  + |
    [Log In](show_bug.cgi?id=22030&GoAheadAndLogIn=1)

    Remember

    [x]
  + |
    [Forgot Password](show_bug.cgi?id=22030&GoAheadAndLogIn=1#forgot)
    Login:

    [x]

[**Bug 22030**](show_bug.cgi?id=22030)
- 4097+ bytes of stderr from cgi script causes script to hang

[Summary:](page.cgi?id=fields.html#short_desc "The bug summary is a short sentence which succinctly describes what the bug is about.")
4097+ bytes of stderr from cgi script causes script to hang

| | [Status](page.cgi?id=fields.html#bug_status): | RESOLVED FIXED | | --- | --- | |  | | | [Alias:](page.cgi?id=fields.html#alias "A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla.") | None | |  | | | [Product:](describecomponents.cgi "Bugs are categorised into Products and Components.") | Apache httpd-2 | | [Classification:](page.cgi?id=fields.html#classification "Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation.") | Unclassified | | [Component:](describecomponents.cgi?product=Apache httpd-2 "Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list.") | mod\_cgi ([show other bugs](buglist.cgi?component=mod_cgi&product=Apache%20httpd-2&bug_status=__open__)) | | [Version:](page.cgi?id=fields.html#version "The version field defines the version of the software the bug was found in.") | 2.0.49 | | [Hardware:](page.cgi?id=fields.html#rep_platform "The hardware platform the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | PC Linux | |  | | | [Importance](page.cgi?id=fields.html#importance): | P1 normal with [34 votes](page.cgi?id=voting/bug.html&bug_id=22030) ([vote](page.cgi?id=voting/user.html&bug_id=22030#vote_22030)) | | [Target Milestone:](page.cgi?id=fields.html#target_milestone "The Target Milestone field is used to define when the engineer the bug is assigned to expects to fix it.") | --- | | [Assignee:](page.cgi?id=fields.html#assigned_to "The person in charge of resolving the bug.") | Apache HTTPD Bugs Mailing List | |  | | | [URL:](page.cgi?id=fields.html#bug_file_loc "Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen.") | <http://download.softwrap.com/EIDOS/> | | [Keywords:](describekeywords.cgi "You can add keywords from a defined list to bugs, in order to easily identify and group them.") |  | |  | | | Duplicates (9): | [10515](show_bug.cgi?id=10515 "CLOSED DUPLICATE - cgi lock when writing to stderr") [20866](show_bug.cgi?id=20866 "RESOLVED DUPLICATE - cgi script just hangs at end, then apr_bucket_read error") [22318](show_bug.cgi?id=22318 "CLOSED DUPLICATE - Apache Hangs with Excessive Warnings") [22900](show_bug.cgi?id=22900 "CLOSED DUPLICATE - Perl Scripts executing with debug mode \"-w\" using DBI causing child hangs") [23473](show_bug.cgi?id=23473 "CLOSED DUPLICATE - Hangs in poll() while child is waiting in write()") [28025](show_bug.cgi?id=28025 "RESOLVED DUPLICATE - Looping cp, mv, or ftp >50 locks cgi script return to client browser") [28656](show_bug.cgi?id=28656 "RESOLVED DUPLICATE - consecutive ssh commands from a CGI timeout") [28816](show_bug.cgi?id=28816 "CLOSED DUPLICATE - CGI programs will not detach unless STDERR is also closed") [29533](show_bug.cgi?id=29533 "CLOSED DUPLICATE - deadlock")  ([view as bug list](buglist.cgi?bug_id=10515,20866,22318,22900,23473,28025,28656,28816,29533)) | | [Depends on:](page.cgi?id=fields.html#dependson "The bugs listed here must be resolved before this bug can be resolved.") |  | | [Blocks:](page.cgi?id=fields.html#blocked "This bug must be resolved before the bugs listed in this field can be resolved.") |  | |  | | Reported: | 2003-07-31 19:32 UTC by Brandon Black | | --- | --- | | Modified: | 2014-02-03 01:22 UTC ([History](show_activity.cgi?id=22030)) | | CC List: | 22 users (show)  agifford alec alirette am apache-bugzilla-20040415 baustin\_ns bbb bugzilla-apache carl ek fma.linux gstein jeismeie john.fauerbach jon5 Lars.Hamann mholzer morissette pete redwoodtree rmiller wscott | |  | | |  | | |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| --- | | |

| | Attachments | | | --- | --- | | [Add an attachment](attachment.cgi?bugid=22030&action=enter) (proposed patch, testcase, etc.) | |   | Note You need to [log in](show_bug.cgi?id=22030&GoAheadAndLogIn=1) before you can comment on or make changes to this bug. | | --- | |  |
| --- | --- | --- | --- | --- | --- | --- |

| [Description](show_bug.cgi?id=22030#c0)  Brandon Black    2003-07-31 19:32:59 UTC  ``` If a cgi script under mod_cgi outputs more than 4096 bytes of stderr before it  finishes writing to and closing its stdout, the write() inthe cgi script  containing the 4097th byte of stderr will hang indefinitely, hanging the  script's execution.  This appears to be cause by the fact that mod_cgi reads all stdout output  first, and then begins reading stderr output.  APR's file_io which is handling  the streams will only buffer 4096 characters before further writes by the  script to stderr will hang, waiting for mod_cgi to read some of the data from  the stream via APR file_io.  This occured for me where a perl cgi script was producing a large volume of  harmless warning messages to ssl_error_log before it got to the part of it's  execution where it actually wrote the stdout output, and causing the script to  hang and produce no output to the end user.  Below is a test script to  demonstrate:  #!/usr/bin/perl # 24x170 = 4080 bytes to stderr foreach my $x (1..24) {   print STDERR 'X' x 169 . "\n"; } # + 17 more bytes, putting us at 4097 # Delete one char from the print below to make # it work again print STDERR "0123456789ABCDEF\n"; # Our actual script output, which never comes print "Content-type: text/plain\n\nASDF\n"; ```  [Comment 1](show_bug.cgi?id=22030#c1)  Joshua Slive    2003-08-13 16:13:23 UTC  ``` *** [Bug 22318](show_bug.cgi?id=22318 "CLOSED DUPLICATE - Apache Hangs with Excessive Warnings") has been marked as a duplicate of this bug. *** ```  [Comment 2](show_bug.cgi?id=22030#c2)  Jeff Trawick    2003-09-03 13:46:38 UTC  ``` *** [Bug 22900](show_bug.cgi?id=22900 "CLOSED DUPLICATE - Perl Scripts executing with debug mode \"-w\" using DBI causing child hangs") has been marked as a duplicate of this bug. *** ```  [Comment 3](show_bug.cgi?id=22030#c3)  Rob Brown    2003-09-10 19:35:24 UTC  ``` This DoS vulnerability has been tickin me off for two months now.  The CGI is blocked on a write() to stderr trying so hard to shove the packet  down Apache's throat and httpd is blocked waiting for something from the CGI's  stdout, which will never happen until that stderr is consumed, which also  never happens.  My system gets hundreds of processes with httpd and the CGI script deadlocked  with each other because if this issue.  I have to restart apache regularly to  avoid grinding the server to a pulp from wasted processes or "Out of memory"  errors. But mostly it just reaches MaxClients all the time which prevents new  hits from being allowed (thus creating a DoS on my machine).  I'm surprised mod_cgi was already known to be borked in this way and not  repaired yet in the cvs source tree.  Anyone with cvs write access to the httpd repository, I'm begging you to try  to fix this.    I bricked over modules/generators/mod_cgi.c with Jeff Trawic's version:    <http://www.apache.org/~trawick/mod_cgi.c>    And suddenly all the problems vanished on my linux box.  Thank you Jeff!    Is there any reason why this is not incorporated into the httpd trunk source  tree?  Does it break non *NIX platforms?  If so, would it be appropriate to at  least do something like the following:    #ifdef LINUX  (new version)  #endif  #ifndef LINUX  (old version)  #endif    Rolling back to Apache 1.3.28 also eliminates all these problems, but I cannot  keep running 1.3.x because I need to use the new version of mod_php which is  not supported as well on the old apache.    ```  [Comment 4](show_bug.cgi?id=22030#c4)  Nojan Moshiri    2003-09-10 19:40:57 UTC  ``` Diff the old mod_cgi and new mod_cgi leads to a number of changes.  It would be great if we could  get an idea from the developers any pitfalls they may see with going up with the new mod_cgi.  Is  it safe to run on production?? ```  [Comment 5](show_bug.cgi?id=22030#c5)  Rob Brown    2003-09-10 20:28:42 UTC  ``` Yes, the files seem quite different.  So many changes in fact that I got too  bored (or lazy) to review everything.  I just used blind faith and replaced  the whole file.  I'm not sure if anyone is using it on production, but it  certainly works fine on my development system.  I am going to roll it out on  my production system now.  It can't be any worse than the old one!  ```  [Comment 6](show_bug.cgi?id=22030#c6)  Rob Brown    2003-09-10 20:31:49 UTC  ``` FYI: I just figured out how to buttwag around this bug until it can be  repaired.  Just force everyone to put this line at the top of all the perl  scripts:    use IO::Handle; STDERR->blocking(0);    Everything after the first 4096 bytes to stderr will be dropped, but at least  the server never falls into deadlock between the httpd and the CGI script.     ```  [Comment 7](show_bug.cgi?id=22030#c7)  Nojan Moshiri    2003-09-10 20:35:43 UTC  ``` That's a great idea, maybe I can put that in CGI.pm or something.  But I have over 2000 perl  scripts!! :-)   ```  [Comment 8](show_bug.cgi?id=22030#c8)  Jeff Trawick    2003-09-10 21:17:06 UTC  ``` problems with ~/trawick/mod_cgi.c:  1) buffers up the response, which is really uncool and breaks with cgis that need to flush or which write huge responses  the code to parse http headers written by the cgi needs to be changed to get rid of the buffering  handle_script_stdout() needs to know when we've seen all the headers, then process them, then set ctx->headers_processed  2) doesn't work on the ever-lame win32  groan  3) needs the last few fixes to mod_cgi integraded  4) doesn't help mod_cgid, which is needed by threaded MPMs  5) isn't tested a whole lot  but of course you folks are helping with that  --/--  The main problem to attack is #1...  with that solved, everything else is not so hard, other than Win32, which doesn't have to be solved.  I'll try to attack #1 now that I see some interest in it.  Alternately, somebody else play with it in a debugger and see what I mean about needing to recognize when we've read the entire response header from the CGI and can get into the simple mode where we pass all output down the filter chain as soon as we read it. ```  [Comment 9](show_bug.cgi?id=22030#c9)  Jeff Trawick    2003-09-22 11:21:57 UTC  ``` *** [Bug 10515](show_bug.cgi?id=10515 "CLOSED DUPLICATE - cgi lock when writing to stderr") has been marked as a duplicate of this bug. *** ```  [Comment 10](show_bug.cgi?id=22030#c10)  Jeff Trawick    2003-09-29 15:05:46 UTC  ``` *** [Bug 23473](show_bug.cgi?id=23473 "CLOSED DUPLICATE - Hangs in poll() while child is waiting in write()") has been marked as a duplicate of this bug. *** ```  [Comment 11](show_bug.cgi?id=22030#c11)  Nojan Moshiri    2003-09-30 15:49:26 UTC  ``` This bug was issued as an Apache DOS vulnerability in a Symantec Security release yesterday. They  cite going with the latest CVS release as a workaround.    Jeff can you provide some guidance on whether  <http://www.apache.org/~trawick/mod_cgi.c> or  the latest CVS rev will be the most stable release.  I notice several diffs between the CVS version  and the one in your home dir.  Thanks! ```  [Comment 12](show_bug.cgi?id=22030#c12)  Jeff Trawick    2003-09-30 16:37:28 UTC  ``` There is no fix in CVS for this problem.  There is no stable mod_cgi[d] that handles 4097+ bytes from stderr mixed in with stdout processing.  I don't recommend using any of the code in <http://www.apache.org/~trawick/> in a production environment.  I just uploaded jcgi.tar to www.apache.org/~trawick/.  Module was renamed to mod_jcgi so that hopefully it doesn't get confused with real code from CVS. This has fewer big picture problems than the mod_cgi.c hacks I had before, and of course anyone is free to play with it and comment.  See included STATUS file for some notes.  For production users: if your CGI spews gobs of stuff to stderr, change the CGI for now.  For folks debugging CGIs and want to have them temporarily spew gobs of stuff to stderr, play with the hacked up version mentioned here and send me testcases for stuff that doesn't work.  As always, anybody should feel free to make alternate changes to the real mod_cgi[d] and submit patches to dev@httpd.apache.org.  ```  [Comment 13](show_bug.cgi?id=22030#c13)  Greg Stein    2003-10-09 07:12:43 UTC  ``` I raised this bug a long while back (Sep 25, 2002, actually: <http://marc.theaimsgroup.com/?l=apache-httpd-dev&m=103291952019514&w=2>) and suggested a new "CGI bucket" type that kept both stdout and stderr descriptors from the CGI process. When the bucket read() function is called, it would select() across both descriptors. Content from stdout would spawn a new bucket, and content from stderr would be logged.  Then wrowe went off with a crazy super-solution which caused a total loss of focus on the practical problems.  My suggestion still stands: have mod_cgi(d) inject a new CGI_BUCKET into the filter stack which can drain both streams. No more hangs. Ever. No buffering. Works for both cgi implementations. Works on Windows (presumably, since we're using standard apr functions to poll across the two descriptors). ```  [Comment 14](show_bug.cgi?id=22030#c14)  Jeff Trawick    2003-10-09 10:31:42 UTC  ``` mod_cgid does not have this particular hang problem because the script's stderr refers directly to the error log.  Note that mod_cgid has some other issues with error log, but they are of lesser significance.  The two I can think of are:  + writing to syslog doesn't work + the main error log is always used, instead of the vhost-specific error log  (there are entries in this bug database already for these issues)  ```  [Comment 15](show_bug.cgi?id=22030#c15)  Jeff Trawick    2003-10-09 10:52:35 UTC  ``` Regarding Greg's comments about a special CGI bucket type being produced by mod_cgi:  There is another issue to solve with mod_cgi[d] that exists in 1.3 as well: hangs will occur if all body data isn't read first, before the script starts producing output.  Clearly this isn't something that many scripts have encountered, but solving this enables some interesting CGI behavior.  My own work on this problem has been to handle all three channels (script's stdin -- request body, stdout, and stderr) right in mod_cgi.  Sending a special CGI bucket down the filter chain to solve the stdout/stderr problem doesn't deal with writing request body to the script as the script can handle it.  With the I/O handled directly in mod_cgi, an extra channel doesn't need a different model.  An unfortunate problem to solve regardless of where stderr is read is that APR doesn't support polling on pipes on Win32.  In the long term hopefully some Win32 gurus will provide a workable solution, but in the short term special handling is required.  (See APR_FILES_AS_SOCKETS.)  ```  [Comment 16](show_bug.cgi?id=22030#c16)  Carl Brewer    2004-01-05 02:29:41 UTC  ``` For what it's worth, this is proving to be a real problem for us attempting to migrate to apache 2.0 from 1.3 on UNIX (linux).  Is anyone actively looking at this or has it fallen off the radar? ```  [Comment 17](show_bug.cgi?id=22030#c17)  Jeff Trawick    2004-01-05 21:42:25 UTC  ``` Carl, you can try <http://www.apache.org/~trawick/jcgi.tar>  ```  [Comment 18](show_bug.cgi?id=22030#c18)  Carl Brewer    2004-01-05 22:15:22 UTC  ``` Thanks Jeff, is this likely to make it into 2.0.49?  I'm pretty keen on sticking to production releases on our production servers :) ```  [Comment 19](show_bug.cgi?id=22030#c19)  Jeff Trawick    2004-01-07 12:39:57 UTC  ``` definitely not going to make it to 2.0.49 ```  [Comment 20](show_bug.cgi?id=22030#c20)  Carl Brewer    2004-01-07 23:09:58 UTC  ``` *nod*.  This ticket's been open for some time now (some 4 months), do you know if/when it may be fixed in the release?  2.0.50? :) ```  [Comment 21](show_bug.cgi?id=22030#c21)  Alec Edworthy    2004-03-24 14:04:29 UTC  ``` Is there any news at all on when this bug might get fixed please? Thanks. ```  [Comment 22](show_bug.cgi?id=22030#c22)  Jeff Trawick    2004-03-24 14:15:21 UTC  ``` Scroll up from the bottom of the PR to find an alternate mod_cgi which has a redesigned interaction with the script.  Little or no feedback on that so far.  ```  [Comment 23](show_bug.cgi?id=22030#c23)  Alec Edworthy    2004-03-25 10:19:32 UTC  ``` Thanks Jeff. I gave jcgi a very quick spin a couple of months ago but didn't manage to make it work (although I didn't try that hard at the time). I will try again sometime soon and see if I have any more luck.  How urgent is fixing this bug viewed as by those who are actively working on Apache? Obviously to me it seems pretty important because it breaks all my scripts (although I'm sure that it could be argued that my scripts are at fault for sending so much to stderr) but I don't really have that much knowledge of the internals of Apache and what other issues are outstanding against it at the moment. Are we likely to see a proper fix for this included in a production release in the foreseeable future or will work arounds within scripts and fixes like Jeff's be the norm for now? ```  [Comment 24](show_bug.cgi?id=22030#c24)  Wayne Scott    2004-03-25 13:05:42 UTC  ``` I have to agree with Jeff.   Having the server to hang with no explanation when your error output reaches some magic threshold is hopeless broken. It is the type of problem that won't show up in testing, but will break after deployment.   This is a "I can't trust Apache 2.0" problem. ```  [Comment 25](show_bug.cgi?id=22030#c25)  Jeff Trawick    2004-03-25 13:26:12 UTC  ``` >How urgent is fixing this bug viewed as by those who are actively working on Apache?  Emperical evidence would suggest that it is not very important.  >Are we likely to see a proper fix for this included in a production >release in the foreseeable future or will work arounds within scripts >and fixes like Jeff's be the norm for now?  I have no idea about the first question.  The answer to the second question is, in general, no.  This particular situation is one which requires a complete redesign of how mod_cgi interacts with scripts.  I have made a set of code available which for Unix has a design that should solve this problem, it works for my testcases, etc.  Another unusual example: 2.0.49 provided an overhaul of mod_include with completely new parsing engine and a number of existing problems resolved.  For quite a while, people with 2.0.x  mod_include problems were asked to try this alternate implementation.  After a relatively long time it was merged into 2.0.x for the 2.0.49 release.  If somebody has time/energy to move the ball forward they can offer their own solution or try out what I have and offer feedback.  If somebody does not have time/energy to help move the ball forward they can always buy commercial support for Apache or an Apache-based server and complain to the vendor that it does not meet their requirements.  Or modify scripts to redirect stderr or not output so much stuff to stderr. ```  [Comment 26](show_bug.cgi?id=22030#c26)  Dave Evans    2004-04-15 06:53:25 UTC  ``` My lame workaround has been to start all my CGIs by re-opening STDERR to a plain file: open(STDERR, ">>/tmp/error.log").  Yuck.  Without that hack, this is bug a show-stopper for me too - there's no way I could deploy httpd2 on a system with CGIs I don't 100% trust (e.g. the shared webserver we virtualhost all our customer's webs on). ```  [Comment 27](show_bug.cgi?id=22030#c27)  Joe Orton    2004-04-15 08:40:55 UTC  ``` How about taking the simpler "CGI bucket" approach for a lower risk change to incorporate into 2.0 than the fundamental rewrite:  - fix just the regression since 1.3 (not the issue of handling stdin too) - simple #if APR_FILES_AS_SOCKETS to avoid breaking Win32  I have a patch to implement this based largely on mod_jcgi and the existing apr_buckets_pipe.c. ```  [Comment 28](show_bug.cgi?id=22030#c28)  Joe Orton    2004-04-15 09:57:46 UTC  ``` Implementation of CGI bucket:  diff against HEAD: <http://www.apache.org/~jorton/mod_cgi-HEAD.diff> drop-in replacement for 2.0 mod_cgi.c: <http://www.apache.org/~jorton/mod_cgi.c>  one known issue: fail gracefully if script closes both stderr and stdout  Further testing welcome. ```  [Comment 29](show_bug.cgi?id=22030#c29)  Jeff Trawick    2004-04-15 11:16:06 UTC  ``` Any reason not to commit to HEAD and get more eyes on it?  (I'll try to do some detailed testing in next 36hr either way.)  ```  [Comment 30](show_bug.cgi?id=22030#c30)  Joe Orton    2004-04-15 12:54:34 UTC  ``` OK can do, will resolve that last issue first though. ```  [Comment 31](show_bug.cgi?id=22030#c31)  Rob Brown    2004-04-16 03:05:14 UTC  ``` Joe, you're a total genious!  I patched my httpd.spec file as follows:    ---- snip ----  ===================================================================  --- httpd.spec  18 Nov 2003 00:52:34 -0000      1.16  +++ httpd.spec  16 Apr 2004 02:27:23 -0000  @@ -33,6 +33,8 @@   Source31: migration.css   Source32: html.xsl   Source33: README.confd  +# Add Joe Orton's awesome CGI Bucket feature so large STDERR output won't  choke anymore!  +Patch0: <http://www.apache.org/~jorton/mod_cgi-HEAD.diff>   # build/scripts patches   Patch1: httpd-2.0.40-apctl.patch   Patch2: httpd-2.0.36-apxs.patch  @@ -128,6 +130,9 @@   fi      %build  +  +patch modules/generators/mod_cgi.c < $RPM_SOURCE_DIR/mod_cgi-HEAD.diff  +   # update location of migration guide in apachectl   %{__perl} -pi -e "s:\@docdir\@:%{_docdir}/%{name}-%{version}:g" \          support/apachectl.in  ---- snap ----    And then I rebuilt the package and upgraded the rpm.  (I couldn't use the  standard rpm "%patch" because I think Joe forgot to include the  "http-2.0.49/modules/generators/" prefix in the diff headers in his patch  file.)  After restarting, all my problems immediately disappeared.  I'm  putting this on my PRODUCTION servers right now.  (I never close STDERR in any  of my CGIs anyway.)    Thank you!    ```  [Comment 32](show_bug.cgi?id=22030#c32)  Alec Edworthy    2004-04-20 11:02:25 UTC  ``` For what it's worth the patch seems to work fine for me. My CGI scripts now generate the error_log text I would expect and the output appears in the browser as expected with no delays. Will this fix (or a patch based upon it) get worked into a proper release sometime in the future?  Thanks Joe!  Alec ```  [Comment 33](show_bug.cgi?id=22030#c33)  Joe Orton    2004-04-21 09:28:39 UTC  ``` Thanks for testing it out.  This will go into a future 2.0 release only if enough developers have confidence it is suitable for a 2.0 release: the more reports of successful testing here the more confidence will be inspired. ```  [Comment 34](show_bug.cgi?id=22030#c34)  Joe Orton    2004-05-05 19:40:26 UTC  ``` The fix for this is now committed to HEAD, but needs more testers.  <http://www.apache.org/~jorton/> has:  - mod_cgi.c - a drop-in replacement for the 2.0.49 mod_cgi.c - mod_cgi-2.0.diff - a diff against the 2.0 mod_cgi.c  Please post any additional results from testing here. ```  [Comment 35](show_bug.cgi?id=22030#c35)  Nic Doye    2004-05-05 22:07:39 UTC  ``` The trivial testing I have done so far on RHEL ES 3 with Interchange 5 (which is CGI intensive) shows that this patch works perfectly. ```  [Comment 36](show_bug.cgi?id=22030#c36)  Jeff Trawick    2004-05-06 19:20:33 UTC  ``` *** [Bug 28816](show_bug.cgi?id=28816 "CLOSED DUPLICATE - CGI programs will not detach unless STDERR is also closed") has been marked as a duplicate of this bug. *** ```  [Comment 37](show_bug.cgi?id=22030#c37)  Carl Brewer    2004-05-27 00:57:07 UTC  ``` This has been marked as closed, but is there any news on which release of httpd2 that the fix will land in? ```  [Comment 38](show_bug.cgi?id=22030#c38)  Joe Orton    2004-05-27 09:11:46 UTC  ``` It requires one more developer vote for inclusion in a future 2.0 release.  The more people who test it, the better: there are 14 people on the CC list for this bug but only 3 have taken the time to test out the patches so far. ```  [Comment 39](show_bug.cgi?id=22030#c39)  Joe Orton    2004-06-03 22:34:02 UTC  ``` *** [Bug 28025](show_bug.cgi?id=28025 "RESOLVED DUPLICATE - Looping cp, mv, or ftp >50 locks cgi script return to client browser") has been marked as a duplicate of this bug. *** ```  [Comment 40](show_bug.cgi?id=22030#c40)  André Malo    2004-06-11 22:58:08 UTC  ``` *** [Bug 29533](show_bug.cgi?id=29533 "CLOSED DUPLICATE - deadlock") has been marked as a duplicate of this bug. *** ```  [Comment 41](show_bug.cgi?id=22030#c41)  Joe Orton    2004-06-16 08:43:29 UTC  ``` This is committed for 2.0.50 now.  <http://cvs.apache.org/viewcvs.cgi/httpd-2.0/modules/generators/mod_cgi.c?r1=1.148.2.7&r2=1.148.2.8> ```  [Comment 42](show_bug.cgi?id=22030#c42)  Rob Brown    2004-06-16 23:11:31 UTC  ``` Thank you Joe!  I've been needing this fix for a long time.    -- Rob  ```  [Comment 43](show_bug.cgi?id=22030#c43)  Joe Orton    2004-07-12 15:19:40 UTC  ``` *** [Bug 28656](show_bug.cgi?id=28656 "RESOLVED DUPLICATE - consecutive ssh commands from a CGI timeout") has been marked as a duplicate of this bug. *** ```  [Comment 44](show_bug.cgi?id=22030#c44)  Joe Orton    2004-07-13 19:34:56 UTC  ``` *** [Bug 20866](show_bug.cgi?id=20866 "RESOLVED DUPLICATE - cgi script just hangs at end, then apr_bucket_read error") has been marked as a duplicate of this bug. *** ```  [Comment 45](show_bug.cgi?id=22030#c45)  Joe Orton    2004-08-24 20:41:22 UTC  ``` *** [Bug 23528](show_bug.cgi?id=23528 "RESOLVED WONTFIX - httpd hangs for 300 sec with apr_bucket_read failed.") has been marked as a duplicate of this bug. *** ```  [Comment 46](show_bug.cgi?id=22030#c46)  Joe Orton    2004-10-01 18:11:56 UTC  ``` *** [Bug 19315](show_bug.cgi?id=19315 "RESOLVED INVALID - error 70007 apr_bucket_read() failed") has been marked as a duplicate of this bug. *** ```  [Comment 47](show_bug.cgi?id=22030#c47)  David Trusty    2004-10-14 02:19:58 UTC  ``` I just tried version 2.0.52 and this problem persists.  I am running  Redhat 9.   ```  [Comment 48](show_bug.cgi?id=22030#c48)  Joe Orton    2004-10-14 06:24:03 UTC  ``` David, please open a new bug describing the problems you have with 2.0.52, include  a reproduction case if possible.  The bug covered here was fixed in 2.0.50. ```  [Comment 49](show_bug.cgi?id=22030#c49)  dougapache    2006-04-20 16:54:59 UTC  ``` I have entered a new bug, 39342, that I believe is related to this. In that case, mod_cgi is writing a large amount of data to stdout before attempting to read from stdin, which contains a large POST. ``` |  |
| --- | --- |

---

* [Format For Printing](show_bug.cgi?format=multiple&id=22030)
* - [XML](show_bug.cgi?ctype=xml&id=22030)
* - [Clone This Bug](enter_bug.cgi?cloned_bug_id=22030)
* - Top of page

This is **ASF Bugzilla**: the Apache Software Foundation bug system. In case
of problems with the functioning of ASF Bugzilla, please contact
bugzilla-admin@apache.org.
**Please Note:** this e-mail address is **only** for reporting problems
with ASF Bugzilla. Mail about any other subject will be silently
ignored.

* + [Home](./)
  + | [New](enter_bug.cgi)
  + | [Browse](describecomponents.cgi)
  + | [Search](query.cgi)
  + |

    [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")
  + | [Reports](report.cgi)
  + |
    [Help](docs/en/html/using/understanding.html)
  + |
    [New Account](createaccount.cgi)
  + |
    [Log In](show_bug.cgi?id=22030&GoAheadAndLogIn=1)

    Remember

    [x]
  + |
    [Forgot Password](show_bug.cgi?id=22030&GoAheadAndLogIn=1#forgot)
    Login:

    [x]



=== Content from issues.apache.org_c77a2f5a_20250125_142812.html ===


ASF Bugzilla – Bug 10515
cgi lock when writing to stderr
Last modified: 2004-11-16 19:05:39 UTC

* + [Home](./)
  + | [New](enter_bug.cgi)
  + | [Browse](describecomponents.cgi)
  + | [Search](query.cgi)
  + |

    [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")
  + | [Reports](report.cgi)
  + |
    [Help](docs/en/html/using/understanding.html)
  + |
    [New Account](createaccount.cgi)
  + |
    [Log In](show_bug.cgi?id=10515&GoAheadAndLogIn=1)

    Remember

    [x]
  + |
    [Forgot Password](show_bug.cgi?id=10515&GoAheadAndLogIn=1#forgot)
    Login:

    [x]

[**Bug 10515**](show_bug.cgi?id=10515)
- cgi lock when writing to stderr

[Summary:](page.cgi?id=fields.html#short_desc "The bug summary is a short sentence which succinctly describes what the bug is about.")
cgi lock when writing to stderr

| | [Status](page.cgi?id=fields.html#bug_status): | CLOSED DUPLICATE of [bug 22030](show_bug.cgi?id=22030 "RESOLVED FIXED - 4097+ bytes of stderr from cgi script causes script to hang") | | --- | --- | |  | | | [Alias:](page.cgi?id=fields.html#alias "A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla.") | None | |  | | | [Product:](describecomponents.cgi "Bugs are categorised into Products and Components.") | Apache httpd-2 | | [Classification:](page.cgi?id=fields.html#classification "Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation.") | Unclassified | | [Component:](describecomponents.cgi?product=Apache httpd-2 "Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list.") | mod\_cgi ([show other bugs](buglist.cgi?component=mod_cgi&product=Apache%20httpd-2&bug_status=__open__)) | | [Version:](page.cgi?id=fields.html#version "The version field defines the version of the software the bug was found in.") | 2.0.39 | | [Hardware:](page.cgi?id=fields.html#rep_platform "The hardware platform the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | PC All | |  | | | [Importance](page.cgi?id=fields.html#importance): | P3 major with [7 votes](page.cgi?id=voting/bug.html&bug_id=10515) ([vote](page.cgi?id=voting/user.html&bug_id=10515#vote_10515)) | | [Target Milestone:](page.cgi?id=fields.html#target_milestone "The Target Milestone field is used to define when the engineer the bug is assigned to expects to fix it.") | --- | | [Assignee:](page.cgi?id=fields.html#assigned_to "The person in charge of resolving the bug.") | Apache HTTPD Bugs Mailing List | |  | | | [URL:](page.cgi?id=fields.html#bug_file_loc "Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen.") |  | | [Keywords:](describekeywords.cgi "You can add keywords from a defined list to bugs, in order to easily identify and group them.") |  | |  | | | [Depends on:](page.cgi?id=fields.html#dependson "The bugs listed here must be resolved before this bug can be resolved.") |  | | [Blocks:](page.cgi?id=fields.html#blocked "This bug must be resolved before the bugs listed in this field can be resolved.") |  | |  | | Reported: | 2002-07-05 17:35 UTC by Peter Whiting | | --- | --- | | Modified: | 2004-11-16 19:05 UTC ([History](show_activity.cgi?id=10515)) | | CC List: | 3 users (show)  michael michaelk notgod | |  | | |  | | |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| --- | | |

| | Attachments | | | --- | --- | | [Add an attachment](attachment.cgi?bugid=10515&action=enter) (proposed patch, testcase, etc.) | |   | Note You need to [log in](show_bug.cgi?id=10515&GoAheadAndLogIn=1) before you can comment on or make changes to this bug. | | --- | |  |
| --- | --- | --- | --- | --- | --- | --- |

| [Description](show_bug.cgi?id=10515#c0)  Peter Whiting    2002-07-05 17:35:27 UTC  ``` I just upgraded to 2.0 today - all of my cgi-scripts that write debug to stderr now hang. Prior to the upgrade, the output from these scripts showed up in the error log. I've verified that the error log exists and can be written to by the httpd process owner. Removing the debug statements from the CGI scripts fixes the problem. ```  [Comment 1](show_bug.cgi?id=10515#c1)  Joshua Slive    2002-07-09 17:19:38 UTC  ``` Are you writing a very large quantity of stuff to stderr? ```  [Comment 2](show_bug.cgi?id=10515#c2)  William A. Rowe Jr.    2002-07-09 17:40:23 UTC  ```    This is not a new issue.  Linux has a 64kb pipe limit by default.  This means   that once our stdout or stderr have in excess of 64kb written, before Apache   has finished reading the request body and piping it to your CGI's stdin, you   will deadlock.    Try deferring your stderr logging until the entire body is read and the entire   response is written.  ```  [Comment 3](show_bug.cgi?id=10515#c3)  Brian Nelson    2002-08-22 01:31:54 UTC  ``` This is an apache-2.0 only issue.  1.3 does not exhibit this problem, and is seriously hampering development for us.    "Deferring your stderr logging until the entire body is read and the entire response is written." doesn't work for large scripts, sites, development environments, etc.    Also, this system will hang with as little as 4k of std_err action at leasr on RH 6.soemthing, apache 2.0.40...  FreeBSD seems immune to this wackyness....  for example: // Credit to: K.C. Wong #include <stdio.h> #include <time.h> #include <unistd.h> #include <fcntl.h>  #define SIZE 4075  void out_err() { 	char buffer[SIZE]; 	int i = 0;  	for (i = 0; i < SIZE - 1; ++i) 		buffer[i] = 'a' + (char )(i % 26);  	buffer[SIZE - 1] = '\0';  // fcntl(2, F_SETFL, fcntl(2, F_GETFL) | O_NONBLOCK);  	fprintf(stderr, "short test\n"); 	fflush(stderr);  	fprintf(stderr, "test error=%s\n", buffer); 	fflush(stderr); } // out_err()  int main(int argc, char ** argv) { 	fprintf(stdout, "Context-Type: text/html\r\n"); 	fprintf(stdout, "\r\n\r\n"); 	out_err(); 	fprintf(stdout, "<HTML>\n"); 	fprintf(stdout, "<body>\n"); 	fprintf(stdout, "<h1>hello world</h1>\n"); 	fprintf(stdout, "</body>\n"); 	fprintf(stdout, "</HTML>\n"); 	fflush(stdout); 	exit(0); } // main() ```  [Comment 4](show_bug.cgi?id=10515#c4)  William A. Rowe Jr.    2002-08-22 04:01:15 UTC  ```    I will preface this with a single observation, we will need to expand the   apr_poll api to include other 'objects', notably httpd-2.0 filters.  The   only way to accomplish this is to provide a set of added callbacks to   query the filter chain for a data-ready state, and then add the filter   endpoints (e.g. sockets or pipes) to the pollset if there is no data    ready from any filter [or other extended] source or ready to send to any    destination sink.    It is doable, but it is dirty.    It's my impression that the default pipe size on Linux had been 64kb.   Did this change somewhere along the way?  Is it a kernel tuning option   or can it be controlled with something like ioctl?    If we can make the CGI pipes accept 64kb, at least, this remains a problem   for both Win32 and Linux, but at least it's a sane boundry instead of 4kb!!!     ```  [Comment 5](show_bug.cgi?id=10515#c5)  Brian Nelson    2002-08-27 04:50:09 UTC  ``` Hello.  I need to give a status update on this issue...  is there anyone  activly working on/assigned to a resolution for this issue?  If not, is there  perhaps a way I can escalate the issue in any way?  I would offer to help, but  I am not much of a developer, but this is a major stopping block for us at this  point.  Thanks in advance.  If I can help in any way, please let me know. ```  [Comment 6](show_bug.cgi?id=10515#c6)  Mark Cox    2002-09-26 20:30:13 UTC  ``` Someone asked me if this was an Apache or OS issue; I asked our kernel guys who said:  "if nothing is reading the pipe (or the reader is held off from reading by your writer user space locking) then 4K is the internal buffering on a linux pipe.  You can't change that.  Ok my assessment is that you either hit a weird glibc bug in stdio with pipes or apache 2.x has a deadlock in its own pipe handling" ```  [Comment 7](show_bug.cgi?id=10515#c7)  Michael G. Martin    2002-10-08 21:59:36 UTC  ``` Ran into the same behavior today.  After upgrading to Redhat 8, and apache 2.0.40.  I just installed 2.0.43 and it exhibits the same lock.  Both PERL and C ++ programs exhibit the locking.  Locking only happens when writing to STDERR.  This is using a stock Redhat 8 install.  Can reproduce on apache 2.0.40-8 ( redhat default) and fresh build of 2.0.43.  Sample C++ CGI Program: ////////////////////////////////////////////// #include <iostream> #include <sys/types.h> #include <unistd.h>  using namespace std;  int main() {   cout << "Content-Type:text/plain\n\n";   cout << getpid() << endl;   sleep (20); // allow me to hook an strace to the pid    for (int i=0; i < 1000; i++) {     cout << "Here " << i << endl;     cerr << "Here " << i << endl;   }   return 0; } /////////////////////////////////////////////////////  Here is the last of an strace up to hang:  write(1, "Here 466\n", 9)               = 9 write(2, "H", 1)                        = 1 write(2, "e", 1)                        = 1 write(2, "r", 1)                        = 1 write(2, "e", 1)                        = 1 write(2, " ", 1)                        = 1 write(2, "4", 1)                        = 1 write(2, "6", 1)                        = 1 write(2, "6", 1)                        = 1 write(2, "\n", 1)                       = 1 write(1, "Here 467\n", 9)               = 9 write(2, "H", 1)                        = 1 write(2, "e", 1)                        = 1 write(2, "r", 1)                        = 1 write(2, "e", 1     ```  [Comment 8](show_bug.cgi?id=10515#c8)  Michael G. Martin    2002-10-08 22:18:59 UTC  ``` I just installed a copy of apache 1.3.27.  The same sample program runs fine.  Always completes. ```  [Comment 9](show_bug.cgi?id=10515#c9)  Christian Lizell    2003-09-22 10:50:50 UTC  ``` On standard RH8 and RH9 installations this script causes locking;  #!/usr/bin/perl  print "Content-type: text/html\n\n"; print "<html><head><title>Locked</title></head><body><h1>Locked</h1></body></html>\n";  print STDERR "This will lock cgi\n" x 220; ## Slightly more than 4k  There are no problems on the same installations with apache 1.3.  (More information on the same issue: <http://nagoya.apache.org/bugzilla/show_bug.cgi?id=22030>) ```  [Comment 10](show_bug.cgi?id=10515#c10)  Jeff Trawick    2003-09-22 11:21:55 UTC  ``` the newer PR #22030 has more info, so leave that one open  *** This bug has been marked as a duplicate of [22030](show_bug.cgi?id=22030 "RESOLVED FIXED - 4097+ bytes of stderr from cgi script causes script to hang") *** ``` |  |
| --- | --- |

---

* [Format For Printing](show_bug.cgi?format=multiple&id=10515)
* - [XML](show_bug.cgi?ctype=xml&id=10515)
* - [Clone This Bug](enter_bug.cgi?cloned_bug_id=10515)
* - Top of page

This is **ASF Bugzilla**: the Apache Software Foundation bug system. In case
of problems with the functioning of ASF Bugzilla, please contact
bugzilla-admin@apache.org.
**Please Note:** this e-mail address is **only** for reporting problems
with ASF Bugzilla. Mail about any other subject will be silently
ignored.

* + [Home](./)
  + | [New](enter_bug.cgi)
  + | [Browse](describecomponents.cgi)
  + | [Search](query.cgi)
  + |

    [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")
  + | [Reports](report.cgi)
  + |
    [Help](docs/en/html/using/understanding.html)
  + |
    [New Account](createaccount.cgi)
  + |
    [Log In](show_bug.cgi?id=10515&GoAheadAndLogIn=1)

    Remember

    [x]
  + |
    [Forgot Password](show_bug.cgi?id=10515&GoAheadAndLogIn=1#forgot)
    Login:

    [x]



=== Content from seclists.org_31755cc3_20250125_142817.html ===

[![](/shared/images/nst-icons.svg#menu)](#menu)
![](/shared/images/nst-icons.svg#close)
[![Home page logo](/images/sitelogo.png)](/)
[Nmap.org](https://nmap.org/)
[Npcap.com](https://npcap.com/)
[Seclists.org](https://seclists.org/)
[Sectools.org](https://sectools.org)
[Insecure.org](https://insecure.org/)

![](/shared/images/nst-icons.svg#search)

[![bugtraq logo](/images/bugtraq-logo.png)](/bugtraq/)
## [Bugtraq](/bugtraq/) mailing list archives

[![Previous](/images/left-icon-16x16.png)](252)
[By Date](date.html#253)
[![Next](/images/right-icon-16x16.png)](254)

[![Previous](/images/left-icon-16x16.png)](263)
[By Thread](index.html#253)
[![Next](/images/right-icon-16x16.png)](256)

![](/shared/images/nst-icons.svg#search)

# Apache 2.0.(39|40) DOS (PHP!)

---

*From*: shaddup () hush com

*Date*: Mon, 23 Sep 2002 12:33:04 -0700

---

```

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

- -=~=-_-=~=-_-=~=-
I put PHP in the title so I know this message will reach the "sekur1ty c0mmun1ty", that *knows* that PHP is bad,
because it's easy to write insecure applications, unlike C.
- -=~=-_-=~=-_-=~=-
Problem:
 o Apache 2.0 (.39 and .40 tested) on Linuxx0r (and possibly other OS's)
 will hang on a write to stderr that is larger than the default buffer
 size (4k on Linux)
Impact:
 o Local users can cause apache's httpd process to hang
 o Possible new DoS to look for in web apps that write
 user input to stderr!
Tested on:
 o Linux (RedHat)
 o FreeBSD (did not show a problem, but not well tested)
Notification:
 o The Apache Projekt was contacted July 9th, 2002
   (<http://nagoya.apache.org/bugzilla/show_bug.cgi?id=10515>)

- -=~=-_-=~=-_-=~=-
Sample Code
- -=~=-_-=~=-_-=~=-
// Credit to: K.C. Wong
#include <stdio.h>
#include <time.h>
#include <unistd.h>
#include <fcntl.h>

#define SIZE 4075

void out_err()
{
        char buffer[SIZE];
        int i = 0;

        for (i = 0; i < SIZE - 1; ++i)
                buffer[i] = 'a' + (char )(i % 26);

        buffer[SIZE - 1] = '\0';

//
fcntl(2, F_SETFL, fcntl(2, F_GETFL) | O_NONBLOCK);

        fprintf(stderr, "short test\n");
        fflush(stderr);

        fprintf(stderr, "test error=%s\n", buffer);
        fflush(stderr);
} // out_err()

int main(int argc, char ** argv)
{
        fprintf(stdout, "Context-Type: text/html\r\n");
        fprintf(stdout, "\r\n\r\n");
        out_err();
        fprintf(stdout, "<HTML>\n");
        fprintf(stdout, "<body>\n");
        fprintf(stdout, "<h1>hello world</h1>\n");
        fprintf(stdout, "</body>\n");
        fprintf(stdout, "</HTML>\n");
        fflush(stdout);
        exit(0);
} // main()

-----BEGIN PGP SIGNATURE-----
Version: Hush 2.1
Note: This signature can be verified at <https://www.hushtools.com>

wlgEARECABgFAj2Pa0MRHHNoYWRkdXBAaHVzaC5jb20ACgkQ8iAl114OGrxaHwCgsmGs
262aOmBHEUw01ktoAADRIz0AoJOdidtdbVswjjp0sqn1uHW+EQCT
=8PKT
-----END PGP SIGNATURE-----

Get your free encrypted email at <https://www.hushmail.com>

```

---

[![Previous](/images/left-icon-16x16.png)](252)
[By Date](date.html#253)
[![Next](/images/right-icon-16x16.png)](254)

[![Previous](/images/left-icon-16x16.png)](263)
[By Thread](index.html#253)
[![Next](/images/right-icon-16x16.png)](256)

### Current thread:

* **Apache 2.0.(39|40) DOS (PHP!)** *shaddup (Sep 24)*

![](/shared/images/nst-icons.svg#search)

## [Nmap Security Scanner](https://nmap.org/)

* [Ref Guide](https://nmap.org/book/man.html)* [Install Guide](https://nmap.org/book/install.html)* [Docs](https://nmap.org/docs.html)* [Download](https://nmap.org/download.html)* [Nmap OEM](https://nmap.org/oem/)

## [Npcap packet capture](https://npcap.com/)

* [User's Guide](https://npcap.com/guide/)* [API docs](https://npcap.com/guide/npcap-devguide.html#npcap-api)* [Download](https://npcap.com/#download)* [Npcap OEM](https://npcap.com/oem/)

## [Security Lists](https://seclists.org/)

* [Nmap Announce](https://seclists.org/nmap-announce/)* [Nmap Dev](https://seclists.org/nmap-dev/)* [Full Disclosure](https://seclists.org/fulldisclosure/)* [Open Source Security](https://seclists.org/oss-sec/)* [BreachExchange](https://seclists.org/dataloss/)

## [Security Tools](https://sectools.org)

* [Vuln scanners](https://sectools.org/tag/vuln-scanners/)* [Password audit](https://sectools.org/tag/pass-audit/)* [Web scanners](https://sectools.org/tag/web-scanners/)* [Wireless](https://sectools.org/tag/wireless/)* [Exploitation](https://sectools.org/tag/sploits/)

## [About](https://insecure.org/)

* [About/Contact](https://insecure.org/fyodor/)* [Privacy](https://insecure.org/privacy.html)* [Advertising](https://insecure.org/advertising.html)* [Nmap Public Source License](https://nmap.org/npsl/)

[![](/shared/images/nst-icons.svg#twitter)](https://twitter.com/nmap "Visit us on Twitter")
[![](/shared/images/nst-icons.svg#facebook)](https://facebook.com/nmap "Visit us on Facebook")
[![](/shared/images/nst-icons.svg#github)](https://github.com/nmap/ "Visit us on Github")
[![](/shared/images/nst-icons.svg#reddit)](https://reddit.com/r/nmap/ "Discuss Nmap on Reddit")


