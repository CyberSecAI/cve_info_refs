=== Content from bugzilla.mozilla.org_e55f5b8e_20250125_203548.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summary▾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View ▾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/98146)
* [XML](/show_bug.cgi?ctype=xml&id=98146)

Closed
[Bug 98146](/show_bug.cgi?id=98146)

Opened 23 years ago
Closed 23 years ago

# [security] Minor problem w/ error message if some sort of login error in doeditvotes

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

[security] Minor problem w/ error message if some sort of login error in doeditvotes

## Categories

### (Bugzilla :: Creating/Changing Bugs, defect, P1)

[Product:](/describecomponents.cgi?product=Bugzilla)

Bugzilla
▾

Bugzilla
The [Bugzilla](http://www.bugzilla.org) bug-tracking system.

**Note:** This is **not** the place to request configuration, permission, or account changes to this installation of Bugzilla (bugzilla.mozilla.org). File such changes under the appropriate component in the [**bugzilla.mozilla.org**](enter_bug.cgi?product=bugzilla.mozilla.org) product.
[See Open Bugs in This Product](/buglist.cgi?product=Bugzilla&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Bugzilla)
Watch This Product

[Component:](/describecomponents.cgi?product=Bugzilla&component=Creating%2FChanging%20Bugs#Creating%2FChanging%20Bugs)

Creating/Changing Bugs
▾

Bugzilla :: Creating/Changing Bugs
Creating, changing, and viewing bugs. `enter_bug.cgi, post_bug.cgi, show_bug.cgi, process_bug.cgi`
[See Open Bugs in This Component](/buglist.cgi?product=Bugzilla&component=Creating%2FChanging%20Bugs&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Bugzilla&component=Creating%2FChanging%20Bugs&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Bugzilla&component=Creating%2FChanging%20Bugs)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

2.15

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

All

All

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

P1

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

critical

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

Bugzilla 2.16

## People

### (Reporter: bugzilla, Assigned: gerv)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/559c3cf31c98a95b23421186b78df500?d=mm&size=40)  [gerv](/user_profile?user_id=9911)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

![](https://secure.gravatar.com/avatar/9df24a05a7e63cf07e49d30ddfeee31a?d=mm&size=40)  [default-qa](/user_profile?user_id=5086)

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](extensions/Gravatar/web/default.jpg)  [bugzilla](/user_profile?user_id=15150)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

---

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

4 people

## References

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

---

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

---

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

---

## Details

### (Whiteboard: security: untrusted var in HTML | applied to 2.14.1)

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

---

[Keywords:](/describekeywords.cgi)

---

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

security: untrusted var in HTML | applied to 2.14.1

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

|  | approval | ? |
| --- | --- | --- |
|  | approval5.0 | ? |
|  | approval5.2 | ? |
|  | approval6.0 | ? |
|  | blocking5.0.4.1 | ? |
|  | blocking5.2 | ? |
|  | blocking6.0 | ? |
|  | approval4.4 | ? |
|  | blocking4.4.14 | ? |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | documentation | ? + - |
|  | testcase |  | | |
|  | relnote |  |

## Crash Data

Signature:

*None*

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (3 files, 1 obsolete file)

| [Patch v.1](/attachment.cgi?id=53513)  [23 years ago](#c2)  [Gervase Markham [:gerv]](/user_profile?user_id=9911)   715 bytes, patch | myk : [review-](#c4 "23 years ago") | [Details](/attachment.cgi?id=53513&action=edit) | [Diff](/attachment.cgi?id=53513&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=98146&attachment=53513) |
| --- | --- | --- |
| [Patch v.2](/attachment.cgi?id=53658)  [23 years ago](#c5)  [Gervase Markham [:gerv]](/user_profile?user_id=9911)   810 bytes, patch | myk : [review+](#c7 "23 years ago")  myk : [review+](#c7 "23 years ago") | [Details](/attachment.cgi?id=53658&action=edit) | [Diff](/attachment.cgi?id=53658&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=98146&attachment=53658) |
| [bugfix v1](/attachment.cgi?id=53743)  [23 years ago](#c11)  [Jacob Steenhagen](/user_profile?user_id=4897)   591 bytes, patch |  | [Details](/attachment.cgi?id=53743&action=edit) | [Diff](/attachment.cgi?id=53743&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=98146&attachment=53743) |
| [Composite patch against 2.14](/attachment.cgi?id=59138)  [23 years ago](#c14)  [Dave Miller [:justdave]](/user_profile?user_id=10297)   782 bytes, patch |  | [Details](/attachment.cgi?id=59138&action=edit) | [Diff](/attachment.cgi?id=59138&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=98146&attachment=59138) |

Show Obsolete

Bottom ↓
Tags ▾

* Reset

Timeline ▾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [GavinS](/user_profile?user_id=15150)  Reporter |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=98146#c0)• 23 years ago |
|  | |

doeditvotes.cgi contains the following:
> if ( (! defined $who) || (!$who) ) {
> PutHeader("Bad login.");
>
> print "The login info got confused. If you want to adjust the votes\n";
> print "for <tt>$::COOKIE{'Bugzilla\_login'}</tt>, then please\n";
> print "<a href=showvotes.cgi?user=$who>click here</a>.<hr>\n";
>
> PutFooter();
>
> exit();
>}
If something went mad, and $who was undefined, then this warning message would
try and use it in the showvotes.cgi link ( => http log warning + bad link generated)
Should the message just say 'please log in (again) and try again', or something
like that?

|  | [Dave Miller [:justdave]](/user_profile?user_id=10297) |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=98146#c1)• 23 years ago |
|  | |

my first though on this is "oh, it didn't get escaped" but after looking at it
for a minute, I agree with Gavin's thoughts on how to fix it. If we thing the
login info is screwed up in any way, we shouldn't be displaying what we think is
screwed up to the user, in case it's not really them and someone trying to use a
faked cookie or something.Assignee: justdave → mykSeverity: minor → criticalComponent: Bugzilla-General → Creating/Changing BugsPriority: -- → P1Whiteboard: security: untrusted var in HTMLTarget Milestone: --- → Bugzilla 2.16

|  | [Gervase Markham [:gerv]](/user_profile?user_id=9911)  Assignee |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=98146#c2)• 23 years ago |
|  | |

Attached patch

[Patch v.1](attachment.cgi?id=53513&action=diff) (obsolete)
— [Details](attachment.cgi?id=53513&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=98146&attachment=53513)

|  | [Gervase Markham [:gerv]](/user_profile?user_id=9911)  Assignee |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=98146#c3)• 23 years ago |
|  | |

1 down, 352 to go...
GervAssignee: myk → gervKeywords: [patch](/buglist.cgi?keywords=patch&resolution=---),
[review](/buglist.cgi?keywords=review&resolution=---)

|  | [Myk Melez [:myk] [@mykmelez]](/user_profile?user_id=27300) |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=98146#c4)• 23 years ago |
|  | |

Comment on [attachment 53513](/attachment.cgi?id=53513 "Patch v.1") [[details]](/attachment.cgi?id=53513&action=edit "Patch v.1") [[diff]](/attachment.cgi?id=53513&action=diff "Patch v.1") [[review]](/page.cgi?id=splinter.html&ignore=&bug=98146&attachment=53513)
Patch v.1
>+ print "The login info got confused. Please log in (again) and try again.\n";
Shouldn't "log in (again)" be a link?
[Attachment #53513](/attachment.cgi?id=53513&action=edit "Patch v.1") -
Flags: review-

|  | [Gervase Markham [:gerv]](/user_profile?user_id=9911)  Assignee |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=98146#c5)• 23 years ago |
|  | |

Attached patch

[Patch v.2](attachment.cgi?id=53658&action=diff)
— [Details](attachment.cgi?id=53658&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=98146&attachment=53658)

|  | [Gervase Markham [:gerv]](/user_profile?user_id=9911)  Assignee |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=98146#c6)• 23 years ago |
|  | |

myk: re-review?
Gerv

|  | [Myk Melez [:myk] [@mykmelez]](/user_profile?user_id=27300) |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=98146#c7)• 23 years ago |
|  | |

Comment on [attachment 53658](/attachment.cgi?id=53658 "Patch v.2") [[details]](/attachment.cgi?id=53658&action=edit "Patch v.2") [[diff]](/attachment.cgi?id=53658&action=diff "Patch v.2") [[review]](/page.cgi?id=splinter.html&ignore=&bug=98146&attachment=53658)
Patch v.2
>Index: doeditvotes.cgi
>===================================================================
>RCS file: /cvsroot/mozilla/webtools/bugzilla/doeditvotes.cgi,v
>retrieving revision 1.12
>diff -u -r1.12 doeditvotes.cgi
>--- doeditvotes.cgi 2001/08/28 17:55:14 1.12
>+++ doeditvotes.cgi 2001/10/15 22:23:31
>@@ -84,9 +84,11 @@
>
> if ( (! defined $who) || (!$who) ) {
> PutHeader("Bad login.");
>- print "The login info got confused. If you want to adjust the votes\n";
>- print "for <tt>$::COOKIE{'Bugzilla\_login'}</tt>, then please\n";
>- print "<a href=showvotes.cgi?user=$who>click here</a>.<hr>\n";
>+ print qq|
>+ The login info got confused. Please
>+ <a href="<http://bugzilla.mozilla.org/query.cgi?GoAheadAndLogIn=1>">log in</a>
>+ (again) and try again.\n
>+ |;
> PutFooter();
> exit();
> }
Looks good. I can't reproduce the problem, but the fix is trivial, the
script works as it should, and tests pass. r=myk, no second review needed.
Patch checked in.
[Attachment #53658](/attachment.cgi?id=53658&action=edit "Patch v.2") -
Flags: review+

|  | [Myk Melez [:myk] [@mykmelez]](/user_profile?user_id=27300) |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=98146#c8)• 23 years ago |
|  | |

Checking in doeditvotes.cgi;
/cvsroot/mozilla/webtools/bugzilla/doeditvotes.cgi,v <-- doeditvotes.cgi
new revision: 1.13; previous revision: 1.12
done
Patch checked in. Resolving fixed.
Status: NEW → RESOLVEDClosed: 23 years agoResolution: --- → FIXED

|  | [David D. Kilzer (ddk)](/user_profile?user_id=33620) |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=98146#c9)• 23 years ago |
|  | |

Should the fix really have a URL prefixed with
"<http://bugzilla.mozilla.org/>"? That would make all installations
point back to bmo, which (I believe) is incorrect behavior.
I'd reopen this bug, but I don't have permission to do so.

|  | [Jacob Steenhagen](/user_profile?user_id=4897) |  |
| --- | --- | --- |
| [Comment 10](/show_bug.cgi?id=98146#c10)• 23 years ago |
|  | |

Nope, it shouldn't...Status: RESOLVED → REOPENEDResolution: FIXED → ---

|  | [Jacob Steenhagen](/user_profile?user_id=4897) |  |
| --- | --- | --- |
| [Comment 11](/show_bug.cgi?id=98146#c11)• 23 years ago |
|  | |

Attached patch

[bugfix v1](attachment.cgi?id=53743&action=diff)
— [Details](attachment.cgi?id=53743&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=98146&attachment=53743)

|  | [Gervase Markham [:gerv]](/user_profile?user_id=9911)  Assignee |  |
| --- | --- | --- |
| [Comment 12](/show_bug.cgi?id=98146#c12)• 23 years ago |
|  | |

Good catch.
/cvsroot/mozilla/webtools/bugzilla/doeditvotes.cgi,v <-- doeditvotes.cgi
new revision: 1.14; previous revision: 1.13
GervStatus: REOPENED → RESOLVEDClosed: 23 years ago → 23 years agoResolution: --- → FIXED

|  | [Dave Miller [:justdave]](/user_profile?user_id=10297) |  |
| --- | --- | --- |
| [Comment 13](/show_bug.cgi?id=98146#c13)• 23 years ago |
|  | |

Patch (to be attached momentarily) applied to the 2.14.1 branch
/cvsroot/mozilla/webtools/bugzilla/doeditvotes.cgi,v <-- doeditvotes.cgi
new revision: 1.12.2.1; previous revision: 1.12Whiteboard: security: untrusted var in HTML → security: untrusted var in HTML | applied to 2.14.1

|  | [Dave Miller [:justdave]](/user_profile?user_id=10297) |  |
| --- | --- | --- |
| [Comment 14](/show_bug.cgi?id=98146#c14)• 23 years ago |
|  | |

Attached patch

[Composite patch against 2.14](attachment.cgi?id=59138&action=diff)
— [Details](attachment.cgi?id=59138&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=98146&attachment=59138)

[Attachment #53513](/attachment.cgi?id=53513&action=edit "Patch v.1") -
Attachment is obsolete: true

|  | [Dave Miller [:justdave]](/user_profile?user_id=10297) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=98146#a7153767_10297)• 23 years ago |

Summary: Minor problem w/ error message if some sort of login error in doeditvotes → [security] Minor problem w/ error message if some sort of login error in doeditvotes

|  | [Dave Miller [:justdave]](/user_profile?user_id=10297) |  |
| --- | --- | --- |
| [Comment 15](/show_bug.cgi?id=98146#c15)• 23 years ago |
|  | |

Hmm, it seems the bulk change thinks I'm not changing anything if all I do is
add names to the CC list, so I guess I have to make a comment. Anyhow, adding
the representatives from the organizations we know of that support Bugzilla
distributions so they're aware of our upcoming security release

|  | [Nobody; OK to take it and work on it](/user_profile?user_id=1) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=98146#a356292468_1)• 12 years ago |

QA Contact: matty\_is\_a\_geek → default-qa
You need to [log in](/show_bug.cgi?id=98146&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top ↑

## Attachment

Hide Details

### General

Creator:  [Gervase Markham [:gerv]](/user_profile?user_id=9911)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review


